/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "../extension-base/src/background/RequestBytesSign.ts":
/*!************************************************************!*\
  !*** ../extension-base/src/background/RequestBytesSign.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RequestBytesSign)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_dapp_wrapBytes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-dapp/wrapBytes */ "../extension-dapp/src/wrapBytes.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/u8a/toHex.js");
// Copyright 2019-2022 @polkadot/extension authors & contributors
// SPDX-License-Identifier: Apache-2.0



class RequestBytesSign {
  constructor(payload) {
    this.payload = payload;
  }
  sign(_registry, pair) {
    return {
      signature: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_0__.u8aToHex)(pair.sign((0,_subwallet_extension_dapp_wrapBytes__WEBPACK_IMPORTED_MODULE_1__.wrapBytes)(this.payload.data)))
    };
  }
}

/***/ }),

/***/ "../extension-base/src/background/RequestExtrinsicSign.ts":
/*!****************************************************************!*\
  !*** ../extension-base/src/background/RequestExtrinsicSign.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RequestExtrinsicSign)
/* harmony export */ });
// Copyright 2019-2022 @polkadot/extension authors & contributors
// SPDX-License-Identifier: Apache-2.0

class RequestExtrinsicSign {
  constructor(payload) {
    this.payload = payload;
  }
  sign(registry, pair) {
    return registry.createType('ExtrinsicPayload', this.payload, {
      version: this.payload.version
    }).sign(pair);
  }
}

/***/ }),

/***/ "../extension-base/src/background/errors/BalanceError.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/background/errors/BalanceError.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BalanceError": () => (/* binding */ BalanceError)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/SWError */ "../extension-base/src/background/errors/SWError.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/translate.ts");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0






// Todo: finish this map in the future
const defaultErrorMap = {
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.BalanceErrorType.NETWORK_ERROR]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.detectTranslate)('Network is inactive. Please enable network'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.BalanceErrorType.TOKEN_ERROR]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.detectTranslate)('Token is not supported'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.BalanceErrorType.TIMEOUT]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.detectTranslate)('Unable to get balance. Please re-enable the network'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.BalanceErrorType.GET_BALANCE_ERROR]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.detectTranslate)('Unable to get balance. Please re-enable the network'),
    code: undefined
  }
};
class BalanceError extends _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_3__.SWError {
  constructor(errorType, errMessage, data) {
    const defaultErr = defaultErrorMap[errorType];
    const message = errMessage || (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)((defaultErr === null || defaultErr === void 0 ? void 0 : defaultErr.message) || '') || errorType;
    super(errorType, message, defaultErr === null || defaultErr === void 0 ? void 0 : defaultErr.code, data);
    this.errorType = errorType;
  }
}

/***/ }),

/***/ "../extension-base/src/background/errors/EvmProviderError.ts":
/*!*******************************************************************!*\
  !*** ../extension-base/src/background/errors/EvmProviderError.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EvmProviderError": () => (/* binding */ EvmProviderError)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/SWError */ "../extension-base/src/background/errors/SWError.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/translate.ts");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0




const defaultErrorMap = {
  USER_REJECTED_REQUEST: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('User Rejected Request'),
    code: 4001
  },
  UNAUTHORIZED: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Failed to sign'),
    code: 4100
  },
  UNSUPPORTED_METHOD: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Unsupported Method'),
    code: 4200
  },
  DISCONNECTED: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Network is disconnected'),
    code: 4900
  },
  CHAIN_DISCONNECTED: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Network is disconnected'),
    code: 4901
  },
  INVALID_PARAMS: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Undefined error. Please contact SubWallet support'),
    code: -32602
  },
  INTERNAL_ERROR: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Undefined error. Please contact SubWallet support'),
    code: -32603
  }
};
class EvmProviderError extends _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_2__.SWError {
  constructor(errorType, errMessage, data) {
    const {
      code,
      message
    } = defaultErrorMap[errorType];
    const finalMessage = errMessage || (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)(message || '') || errorType;
    super(errorType, finalMessage, code, data);
    this.errorType = errorType;
  }
}

/***/ }),

/***/ "../extension-base/src/background/errors/SWError.ts":
/*!**********************************************************!*\
  !*** ../extension-base/src/background/errors/SWError.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SWError": () => (/* binding */ SWError)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0

class SWError extends Error {
  constructor(errorType, message, code, data) {
    super(message);
    this.errorType = errorType;
    this.code = code;
    this.data = data;
  }
  toJSON() {
    return {
      name: this.name,
      message: this.message,
      code: this.code
    };
  }
}

/***/ }),

/***/ "../extension-base/src/background/errors/TransactionError.ts":
/*!*******************************************************************!*\
  !*** ../extension-base/src/background/errors/TransactionError.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TransactionError": () => (/* binding */ TransactionError)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/SWError */ "../extension-base/src/background/errors/SWError.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/translate.ts");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0






// Todo: finish this map in the future
const defaultErrorMap = {
  NOT_ENOUGH_BALANCE: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Insufficient balance'),
    code: undefined
  },
  CHAIN_DISCONNECTED: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Network is disconnected'),
    code: undefined
  },
  INVALID_PARAMS: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Undefined error. Please contact SubWallet support'),
    code: undefined
  },
  INTERNAL_ERROR: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Undefined error. Please contact SubWallet support'),
    code: undefined
  },
  DUPLICATE_TRANSACTION: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Another transaction is in queue. Please try again later'),
    code: undefined
  },
  UNABLE_TO_SIGN: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Unable to sign'),
    code: undefined
  },
  USER_REJECT_REQUEST: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Rejected by user'),
    code: undefined
  },
  UNABLE_TO_SEND: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Unable to send'),
    code: undefined
  },
  SEND_TRANSACTION_FAILED: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Send transaction failed'),
    code: undefined
  },
  NOT_ENOUGH_EXISTENTIAL_DEPOSIT: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Insufficient balance to cover existential deposit. Please decrease the transaction amount or increase your current balance'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.BasicTxErrorType.UNSUPPORTED]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('This feature is not available with this token'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.BasicTxErrorType.TIMEOUT]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Transaction timeout'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.NOT_ENOUGH_MIN_STAKE]: {
    message: 'Not enough min stake',
    // Message specific to each case
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.EXCEED_MAX_NOMINATIONS]: {
    message: 'Exceed max nominations',
    // Message specific to each case
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.EXIST_UNSTAKING_REQUEST]: {
    message: 'Exist unstaking request',
    // Message specific to each case
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.INVALID_ACTIVE_STAKE]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Invalid. If you unstake this amount your active stake would fall below minimum active threshold'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.EXCEED_MAX_UNSTAKING]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('You reached the maximum number of unstake requests'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.INACTIVE_NOMINATION_POOL]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Invalid. Inactive nomination pool'),
    code: undefined
  },
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.TransferTxErrorType.RECEIVER_NOT_ENOUGH_EXISTENTIAL_DEPOSIT]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.detectTranslate)('Receiver is not enough existential deposit'),
    code: undefined
  }
};
class TransactionError extends _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_3__.SWError {
  constructor(errorType, errMessage, data) {
    const defaultErr = defaultErrorMap[errorType];
    const message = errMessage || (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)((defaultErr === null || defaultErr === void 0 ? void 0 : defaultErr.message) || '') || errorType;
    super(errorType, message, defaultErr === null || defaultErr === void 0 ? void 0 : defaultErr.code, data);
    this.errorType = errorType;
  }
}

/***/ }),

/***/ "../extension-base/src/background/handlers/Extension.ts":
/*!**************************************************************!*\
  !*** ../extension-base/src/background/handlers/Extension.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ETH_DERIVE_DEFAULT": () => (/* binding */ ETH_DERIVE_DEFAULT),
/* harmony export */   "SEED_DEFAULT_LENGTH": () => (/* binding */ SEED_DEFAULT_LENGTH),
/* harmony export */   "SEED_LENGTHS": () => (/* binding */ SEED_LENGTHS),
/* harmony export */   "default": () => (/* binding */ Extension),
/* harmony export */   "getSuri": () => (/* binding */ getSuri),
/* harmony export */   "isJsonPayload": () => (/* binding */ isJsonPayload)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/index.js");
/* harmony import */ var _subwallet_ui_keyring_observable_accounts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/ui-keyring/observable/accounts */ "../../node_modules/@subwallet/ui-keyring/observable/accounts.js");
/* harmony import */ var _polkadot_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/types */ "../../node_modules/@polkadot/types/create/registry.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/assert.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/is/hex.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/mnemonic/generate.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/key/extractSuri.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/mnemonic/validate.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./helpers */ "../extension-base/src/background/handlers/helpers.ts");
/* harmony import */ var _subscriptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./subscriptions */ "../extension-base/src/background/handlers/subscriptions.ts");
// Copyright 2019-2022 @polkadot/extension authors & contributors
// SPDX-License-Identifier: Apache-2.0









const SEED_DEFAULT_LENGTH = 12;
const SEED_LENGTHS = [12, 15, 18, 21, 24];
const ETH_DERIVE_DEFAULT = '/m/44\'/60\'/0\'/0/0';

// a global registry to use internally
const registry = new _polkadot_types__WEBPACK_IMPORTED_MODULE_0__.TypeRegistry();
function getSuri(seed, type) {
  return type === 'ethereum' ? `${seed}${ETH_DERIVE_DEFAULT}` : seed;
}
function transformAccounts(accounts) {
  return Object.values(accounts).map(({
    json: {
      address,
      meta
    },
    type
  }) => ({
    address,
    ...meta,
    type
  }));
}
function isJsonPayload(value) {
  return value.genesisHash !== undefined;
}
class Extension {
  #state;
  constructor(state) {
    this.cachedUnlocks = {};
    this.#state = state;
  }
  accountsCreateExternal({
    address,
    genesisHash,
    name
  }) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].addExternal(address, {
      genesisHash,
      name
    });
    return true;
  }
  accountsCreateHardware({
    accountIndex,
    address,
    addressOffset,
    genesisHash,
    hardwareType,
    name
  }) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].addHardware(address, hardwareType, {
      accountIndex,
      addressOffset,
      genesisHash,
      name
    });
    return true;
  }
  accountsCreateSuri({
    genesisHash,
    name,
    suri,
    type
  }) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].addUri(getSuri(suri, type), {
      genesisHash,
      name
    }, type);
    return true;
  }
  accountsChangePassword({
    address,
    newPass,
    oldPass
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(pair, 'Unable to find account');
    try {
      if (!pair.isLocked) {
        pair.lock();
      }
      pair.decodePkcs8(oldPass);
    } catch (error) {
      throw new Error('Wrong password');
    }
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].encryptAccount(pair, newPass);
    return true;
  }
  accountsEdit({
    address,
    name
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(pair, 'Unable to find account');
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].saveAccountMeta(pair, {
      ...pair.meta,
      name
    });
    return true;
  }
  accountsExport({
    address,
    password
  }) {
    return {
      exportedJson: _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].backupAccount(_subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(address), password)
    };
  }

  // private async accountsBatchExport ({ addresses, password }: RequestAccountBatchExport): Promise<ResponseAccountsExport> {
  //   return {
  //     exportedJson: await keyring.backupAccounts(addresses, password)
  //   };
  // }

  accountsForget({
    address
  }) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].forgetAccount(address);
    return true;
  }
  refreshAccountPasswordCache(pair) {
    const {
      address
    } = pair;
    const savedExpiry = this.cachedUnlocks[address] || 0;
    const remainingTime = savedExpiry - Date.now();
    if (remainingTime < 0) {
      this.cachedUnlocks[address] = 0;
      pair.lock();
      return 0;
    }
    return remainingTime;
  }
  accountsShow({
    address,
    isShowing
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(pair, 'Unable to find account');
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].saveAccountMeta(pair, {
      ...pair.meta,
      isHidden: !isShowing
    });
    return true;
  }
  accountsTie({
    address,
    genesisHash
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(pair, 'Unable to find account');
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].saveAccountMeta(pair, {
      ...pair.meta,
      genesisHash
    });
    return true;
  }
  accountsValidate({
    address,
    password
  }) {
    try {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].backupAccount(_subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(address), password);
      return true;
    } catch (e) {
      return false;
    }
  }

  // FIXME This looks very much like what we have in Tabs
  accountsSubscribe(id, port) {
    const cb = (0,_subscriptions__WEBPACK_IMPORTED_MODULE_3__.createSubscription)(id, port);
    const subscription = _subwallet_ui_keyring_observable_accounts__WEBPACK_IMPORTED_MODULE_4__.accounts.subject.subscribe(accounts => cb(transformAccounts(accounts)));
    port.onDisconnect.addListener(() => {
      (0,_subscriptions__WEBPACK_IMPORTED_MODULE_3__.unsubscribe)(id);
      subscription.unsubscribe();
    });
    return transformAccounts(_subwallet_ui_keyring_observable_accounts__WEBPACK_IMPORTED_MODULE_4__.accounts.subject.getValue());
  }
  authorizeApprove({
    id
  }) {
    const queued = this.#state.getAuthRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(queued, 'Unable to proceed. Please try again');
    const {
      resolve
    } = queued;
    resolve(true);
    return true;
  }
  getAuthList() {
    return {
      list: this.#state.authUrls
    };
  }
  authorizeReject({
    id
  }) {
    const queued = this.#state.getAuthRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(queued, 'Unable to proceed. Please try again');
    const {
      reject
    } = queued;
    reject(new Error('Rejected'));
    return true;
  }

  // FIXME This looks very much like what we have in accounts
  authorizeSubscribe(id, port) {
    const cb = (0,_subscriptions__WEBPACK_IMPORTED_MODULE_3__.createSubscription)(id, port);
    const subscription = this.#state.authSubject.subscribe(requests => cb(requests));
    port.onDisconnect.addListener(() => {
      (0,_subscriptions__WEBPACK_IMPORTED_MODULE_3__.unsubscribe)(id);
      subscription.unsubscribe();
    });
    return true;
  }
  metadataApprove({
    id
  }) {
    const queued = this.#state.getMetaRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(queued, 'Unable to proceed. Please try again');
    const {
      request,
      resolve
    } = queued;
    this.#state.saveMetadata(request);
    resolve(true);
    return true;
  }
  metadataGet(genesisHash) {
    return this.#state.knownMetadata.find(result => result.genesisHash === genesisHash) || null;
  }
  metadataList() {
    return this.#state.knownMetadata;
  }
  metadataReject({
    id
  }) {
    const queued = this.#state.getMetaRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(queued, 'Unable to proceed. Please try again');
    const {
      reject
    } = queued;
    reject(new Error('Rejected'));
    return true;
  }
  metadataSubscribe(id, port) {
    const cb = (0,_subscriptions__WEBPACK_IMPORTED_MODULE_3__.createSubscription)(id, port);
    const subscription = this.#state.metaSubject.subscribe(requests => cb(requests));
    port.onDisconnect.addListener(() => {
      (0,_subscriptions__WEBPACK_IMPORTED_MODULE_3__.unsubscribe)(id);
      subscription.unsubscribe();
    });
    return this.#state.metaSubject.value;
  }
  jsonRestore({
    file,
    password
  }) {
    try {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].restoreAccount(file, password, true);
    } catch (error) {
      throw new Error(error.message);
    }
  }
  batchRestore({
    file,
    password
  }) {
    try {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].restoreAccounts(file, password);
    } catch (error) {
      throw new Error(error.message);
    }
  }
  jsonGetAccountInfo(json) {
    try {
      const {
        address,
        meta: {
          genesisHash,
          name
        },
        type
      } = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].createFromJson(json);
      return {
        address,
        genesisHash,
        name,
        type
      };
    } catch (e) {
      console.error(e);
      throw new Error(e.message);
    }
  }
  seedCreate({
    length = SEED_DEFAULT_LENGTH,
    seed: _seed,
    type
  }) {
    const seed = _seed || (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__.mnemonicGenerate)(length);
    return {
      address: _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].createFromUri(getSuri(seed, type), {}, type).address,
      seed
    };
  }
  seedValidate({
    suri,
    type
  }) {
    const {
      phrase
    } = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__.keyExtractSuri)(suri);
    if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_7__.isHex)(phrase)) {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_7__.isHex)(phrase, 256), 'Invalid seed phrase. Please try again.');
    } else {
      // sadly isHex detects as string, so we need a cast here
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(SEED_LENGTHS.includes(phrase.split(' ').length), `Mnemonic needs to contain ${SEED_LENGTHS.join(', ')} words`);
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_8__.mnemonicValidate)(phrase), 'Invalid seed phrase. Please try again.');
    }
    return {
      address: _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].createFromUri(getSuri(suri, type), {}, type).address,
      suri
    };
  }
  signingApprovePassword({
    id,
    password,
    savePass
  }) {
    const queued = this.#state.getSignRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(queued, 'Unable to proceed. Please try again');
    const {
      reject,
      request,
      resolve
    } = queued;
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(queued.account.address);

    // unlike queued.account.address the following
    // address is encoded with the default prefix
    // which what is used for password caching mapping
    const {
      address
    } = pair;
    if (!pair) {
      reject(new Error('Unable to find account'));
      return false;
    }
    this.refreshAccountPasswordCache(pair);

    // if the keyring pair is locked, the password is needed
    if (pair.isLocked && !password) {
      reject(new Error('Password needed to unlock the account'));
    }
    if (pair.isLocked) {
      pair.decodePkcs8(password);
    }
    const {
      payload
    } = request;
    if (isJsonPayload(payload)) {
      // Get the metadata for the genesisHash
      const currentMetadata = this.#state.knownMetadata.find(meta => meta.genesisHash === payload.genesisHash);

      // set the registry before calling the sign function
      registry.setSignedExtensions(payload.signedExtensions, currentMetadata === null || currentMetadata === void 0 ? void 0 : currentMetadata.userExtensions);
      if (currentMetadata) {
        registry.register(currentMetadata === null || currentMetadata === void 0 ? void 0 : currentMetadata.types);
      }
    }
    const result = request.sign(registry, pair);
    if (savePass) {
      this.cachedUnlocks[address] = Date.now() + _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_9__.PASSWORD_EXPIRY_MS;
    } else {
      pair.lock();
    }
    resolve({
      id,
      ...result
    });
    return true;
  }
  signingApproveSignature({
    id,
    signature
  }) {
    const queued = this.#state.getSignRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(queued, 'Unable to proceed. Please try again');
    const {
      resolve
    } = queued;
    resolve({
      id,
      signature
    });
    return true;
  }
  signingCancel({
    id
  }) {
    const queued = this.#state.getSignRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(queued, 'Unable to proceed. Please try again');
    const {
      reject
    } = queued;
    reject(new Error('Cancelled'));
    return true;
  }
  signingIsLocked({
    id
  }) {
    const queued = this.#state.getSignRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(queued, 'Unable to proceed. Please try again');
    const address = queued.request.payload.address;
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.assert)(pair, 'Unable to find account');
    const remainingTime = this.refreshAccountPasswordCache(pair);
    return {
      isLocked: pair.isLocked,
      remainingTime
    };
  }

  // FIXME This looks very much like what we have in authorization
  signingSubscribe(id, port) {
    const cb = (0,_subscriptions__WEBPACK_IMPORTED_MODULE_3__.createSubscription)(id, port);
    const subscription = this.#state.signSubject.subscribe(requests => cb(requests));
    port.onDisconnect.addListener(() => {
      (0,_subscriptions__WEBPACK_IMPORTED_MODULE_3__.unsubscribe)(id);
      subscription.unsubscribe();
    });
    return this.#state.signSubject.value;
  }
  windowOpen({
    allowedPath: path,
    params,
    subPath
  }) {
    let paramString = '';
    if (params) {
      paramString += '?';
      for (let i = 0; i < Object.keys(params).length; i++) {
        const [key, value] = Object.entries(params)[i];
        paramString += `${key}=${value}`;
        if (i !== Object.keys(params).length - 1) {
          paramString += '&';
        }
      }
    }
    const url = `${chrome.extension.getURL('index.html')}#${path}${subPath || ''}${paramString}`;
    if (!_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_9__.ALLOWED_PATH.includes(path)) {
      console.error('Not allowed to open the url:', url);
      return false;
    }
    (0,_helpers__WEBPACK_IMPORTED_MODULE_10__.withErrorLog)(() => chrome.tabs.create({
      url
    }));
    return true;
  }
  derive(parentAddress, suri, password, metadata) {
    const parentPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].getPair(parentAddress);
    try {
      parentPair.decodePkcs8(password);
    } catch (e) {
      throw new Error('Wrong password');
    }
    try {
      return parentPair.derive(suri, metadata);
    } catch (err) {
      throw new Error(`"${suri}" is not a valid derivation path`);
    }
  }
  derivationValidate({
    parentAddress,
    parentPassword,
    suri
  }) {
    const childPair = this.derive(parentAddress, suri, parentPassword, {});
    return {
      address: childPair.address,
      suri
    };
  }
  derivationCreate({
    genesisHash,
    name,
    parentAddress,
    parentPassword,
    suri
  }) {
    const childPair = this.derive(parentAddress, suri, parentPassword, {
      genesisHash,
      name,
      parentAddress,
      suri
    });
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__["default"].addPair(childPair, true);
    return true;
  }
  toggleAuthorization(url) {
    return {
      list: this.#state.toggleAuthorization(url)
    };
  }

  // Weird thought, the eslint override is not needed in Tabs
  // eslint-disable-next-line @typescript-eslint/require-await
  async handle(id, type, request, port) {
    switch (type) {
      case 'pri(authorize.approve)':
        return this.authorizeApprove(request);
      case 'pri(authorize.list)':
        return this.getAuthList();
      case 'pri(authorize.reject)':
        return this.authorizeReject(request);
      case 'pri(authorize.toggle)':
        return this.toggleAuthorization(request);
      case 'pri(authorize.requests)':
        return this.authorizeSubscribe(id, port);
      case 'pri(accounts.create.external)':
        return this.accountsCreateExternal(request);
      case 'pri(accounts.create.hardware)':
        return this.accountsCreateHardware(request);
      case 'pri(accounts.create.suri)':
        return this.accountsCreateSuri(request);
      case 'pri(accounts.changePassword)':
        return this.accountsChangePassword(request);
      case 'pri(accounts.edit)':
        return this.accountsEdit(request);
      case 'pri(accounts.export)':
        return this.accountsExport(request);
      case 'pri(accounts.batchExport)':
        // return this.accountsBatchExport(request as RequestAccountBatchExport);
        // Disable export all util use master password
        return null;
      case 'pri(accounts.forget)':
        return this.accountsForget(request);
      case 'pri(accounts.show)':
        return this.accountsShow(request);
      case 'pri(accounts.subscribe)':
        return this.accountsSubscribe(id, port);
      case 'pri(accounts.tie)':
        return this.accountsTie(request);
      case 'pri(accounts.validate)':
        return this.accountsValidate(request);
      case 'pri(metadata.approve)':
        return this.metadataApprove(request);
      case 'pri(metadata.get)':
        return this.metadataGet(request);
      case 'pri(metadata.list)':
        return this.metadataList();
      case 'pri(metadata.reject)':
        return this.metadataReject(request);
      case 'pri(metadata.requests)':
        return this.metadataSubscribe(id, port);
      case 'pri(derivation.create)':
        return this.derivationCreate(request);
      case 'pri(derivation.validate)':
        return this.derivationValidate(request);
      case 'pri(json.restore)':
        return this.jsonRestore(request);
      case 'pri(json.batchRestore)':
        return this.batchRestore(request);
      case 'pri(json.account.info)':
        return this.jsonGetAccountInfo(request);
      case 'pri(seed.create)':
        return this.seedCreate(request);
      case 'pri(seed.validate)':
        return this.seedValidate(request);
      case 'pri(signing.approve.password)':
        return this.signingApprovePassword(request);
      case 'pri(signing.approve.signature)':
        return this.signingApproveSignature(request);
      case 'pri(signing.cancel)':
        return this.signingCancel(request);
      case 'pri(signing.isLocked)':
        return this.signingIsLocked(request);
      case 'pri(signing.requests)':
        return this.signingSubscribe(id, port);
      case 'pri(window.open)':
        return this.windowOpen(request);
      default:
        throw new Error(`Unable to handle message of type ${type}`);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/background/handlers/helpers.ts":
/*!************************************************************!*\
  !*** ../extension-base/src/background/handlers/helpers.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "withErrorLog": () => (/* binding */ withErrorLog)
/* harmony export */ });
// Copyright 2019-2022 @polkadot/extension authors & contributors
// SPDX-License-Identifier: Apache-2.0

function withErrorLog(fn) {
  try {
    const p = fn();
    if (p && typeof p === 'object' && typeof p.catch === 'function') {
      p.catch(console.error);
    }
  } catch (e) {
    console.error(e);
  }
}

/***/ }),

/***/ "../extension-base/src/background/handlers/subscriptions.ts":
/*!******************************************************************!*\
  !*** ../extension-base/src/background/handlers/subscriptions.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createSubscription": () => (/* binding */ createSubscription),
/* harmony export */   "isSubscriptionRunning": () => (/* binding */ isSubscriptionRunning),
/* harmony export */   "unsubscribe": () => (/* binding */ unsubscribe)
/* harmony export */ });
// Copyright 2019-2022 @polkadot/extension authors & contributors
// SPDX-License-Identifier: Apache-2.0

const subscriptions = {};

// return a subscription callback, that will send the data to the caller via the port
function createSubscription(id, port) {
  subscriptions[id] = port;
  return subscription => {
    if (subscriptions[id]) {
      port.postMessage({
        id,
        subscription
      });
    }
  };
}
function isSubscriptionRunning(id) {
  return !!subscriptions[id];
}

// clear a previous subscriber
function unsubscribe(id) {
  if (subscriptions[id]) {
    delete subscriptions[id];
  } else {
    console.error(`Unable to unsubscribe from ${id}`);
  }
}

/***/ }),

/***/ "../extension-base/src/background/warnings/SWWarning.ts":
/*!**************************************************************!*\
  !*** ../extension-base/src/background/warnings/SWWarning.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SWWarning": () => (/* binding */ SWWarning)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0

class SWWarning {
  constructor(warningType, message, code, data) {
    this.message = message;
    this.warningType = warningType;
    this.code = code;
    this.data = data;
  }
}

/***/ }),

/***/ "../extension-base/src/background/warnings/TransactionWarning.ts":
/*!***********************************************************************!*\
  !*** ../extension-base/src/background/warnings/TransactionWarning.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TransactionWarning": () => (/* binding */ TransactionWarning)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_background_warnings_SWWarning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/background/warnings/SWWarning */ "../extension-base/src/background/warnings/SWWarning.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/translate.ts");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0





const defaultWarningMap = {
  [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.BasicTxWarningCode.NOT_ENOUGH_EXISTENTIAL_DEPOSIT]: {
    message: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.detectTranslate)('Insufficient balance to cover existential deposit. Please decrease the transaction amount or increase your current balance'),
    code: undefined
  }
};
class TransactionWarning extends _subwallet_extension_base_background_warnings_SWWarning__WEBPACK_IMPORTED_MODULE_3__.SWWarning {
  constructor(warningType, message, code, data) {
    var _defaultWarningMap$wa, _defaultWarningMap$wa2;
    const warningMessage = message || (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)(((_defaultWarningMap$wa = defaultWarningMap[warningType]) === null || _defaultWarningMap$wa === void 0 ? void 0 : _defaultWarningMap$wa.message) || '') || warningType;
    super(warningType, warningMessage, (_defaultWarningMap$wa2 = defaultWarningMap[warningType]) === null || _defaultWarningMap$wa2 === void 0 ? void 0 : _defaultWarningMap$wa2.code, data);
    this.warningType = warningType;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/dotsama/balance.ts":
/*!*********************************************************!*\
  !*** ../extension-base/src/koni/api/dotsama/balance.ts ***!
  \*********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "subscribeBalance": () => (/* binding */ subscribeBalance),
/* harmony export */   "subscribeEVMBalance": () => (/* binding */ subscribeEVMBalance),
/* harmony export */   "subscribeSubstrateBalance": () => (/* binding */ subscribeSubstrateBalance)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_evm_balance__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/evm/balance */ "../extension-base/src/koni/api/tokens/evm/balance.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_evm_web3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/evm/web3 */ "../extension-base/src/koni/api/tokens/evm/web3.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm */ "../extension-base/src/koni/api/tokens/wasm/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm/utils */ "../extension-base/src/koni/api/tokens/wasm/utils.ts");
/* harmony import */ var _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/background/handlers */ "../extension-base/src/koni/background/handlers/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bignumber.js */ "../../node_modules/bignumber.js/bignumber.mjs");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/bn/consts.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__]);
_subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0














// main subscription
function subscribeBalance(addresses, chainInfoMap, substrateApiMap, evmApiMap, callback) {
  const [substrateAddresses, evmAddresses] = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.categoryAddresses)(addresses);

  // Looping over each chain
  const unsubList = Object.entries(chainInfoMap).map(async ([chainSlug, chainInfo]) => {
    const useAddresses = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._isChainEvmCompatible)(chainInfo) ? evmAddresses : substrateAddresses;
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._isPureEvmChain)(chainInfo)) {
      const nativeTokenInfo = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__.state.getNativeTokenInfo(chainSlug);
      return subscribeEVMBalance(chainSlug, useAddresses, evmApiMap, callback, nativeTokenInfo);
    }
    if (!useAddresses || useAddresses.length === 0 || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._PURE_EVM_CHAINS.indexOf(chainSlug) > -1) {
      const fungibleTokensByChain = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__.state.chainService.getFungibleTokensByChain(chainSlug, true);
      const now = new Date().getTime();
      Object.values(fungibleTokensByChain).map(token => {
        return {
          tokenSlug: token.slug,
          free: '0',
          locked: '0',
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY,
          timestamp: now
        };
      }).forEach(callback);
      return undefined;
    }
    const networkAPI = await substrateApiMap[chainSlug].isReady;
    return subscribeSubstrateBalance(useAddresses, chainInfo, chainSlug, networkAPI, evmApiMap, callback);
  });
  return () => {
    unsubList.forEach(subProm => {
      subProm.then(unsub => {
        unsub && unsub();
      }).catch(console.error);
    });
  };
}
async function subscribeSubstrateBalance(addresses, chainInfo, chain, networkAPI, evmApiMap, callBack) {
  let unsubNativeToken;
  if (!_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._BALANCE_CHAIN_GROUP.kintsugi.includes(chain) && !_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._BALANCE_CHAIN_GROUP.genshiro.includes(chain) && !_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._BALANCE_CHAIN_GROUP.equilibrium_parachain.includes(chain)) {
    unsubNativeToken = await subscribeWithSystemAccountPallet(addresses, chainInfo, networkAPI.api, callBack);
  }
  let unsubLocalToken;
  let unsubEvmContractToken;
  let unsubWasmContractToken;
  try {
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._BALANCE_CHAIN_GROUP.bifrost.includes(chain)) {
      unsubLocalToken = await subscribeTokensAccountsPallet(addresses, chain, networkAPI.api, callBack);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._BALANCE_CHAIN_GROUP.kintsugi.includes(chain)) {
      unsubLocalToken = await subscribeTokensAccountsPallet(addresses, chain, networkAPI.api, callBack, true);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._BALANCE_CHAIN_GROUP.statemine.includes(chain)) {
      unsubLocalToken = await subscribeAssetsAccountPallet(addresses, chain, networkAPI.api, callBack);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._BALANCE_CHAIN_GROUP.genshiro.includes(chain)) {
      unsubLocalToken = await subscribeEqBalanceAccountPallet(addresses, chain, networkAPI.api, callBack, true);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._BALANCE_CHAIN_GROUP.equilibrium_parachain.includes(chain)) {
      unsubLocalToken = await subscribeEquilibriumTokenBalance(addresses, chain, networkAPI.api, callBack, true);
    }
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._isChainEvmCompatible)(chainInfo)) {
      unsubEvmContractToken = subscribeERC20Interval(addresses, chain, evmApiMap, callBack);
    }
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._checkSmartContractSupportByChain)(chainInfo, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.PSP22)) {
      // Get sub-token for substrate-based chains
      unsubWasmContractToken = subscribePSP22Balance(addresses, chain, networkAPI.api, callBack);
    }
  } catch (err) {
    console.warn(err);
  }
  return () => {
    unsubNativeToken && unsubNativeToken();
    unsubLocalToken && unsubLocalToken();
    unsubEvmContractToken && unsubEvmContractToken();
    unsubWasmContractToken && unsubWasmContractToken();
  };
}

// handler according to different logic
async function subscribeWithSystemAccountPallet(addresses, chainInfo, networkAPI, callBack) {
  const chainNativeTokenSlug = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._getChainNativeTokenSlug)(chainInfo);
  const unsub = await networkAPI.query.system.account.multi(addresses, async balances => {
    let [total, reserved, miscFrozen, feeFrozen] = [new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0), new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0), new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0), new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0)];
    let pooledStakingBalance = _polkadot_util__WEBPACK_IMPORTED_MODULE_8__.BN_ZERO;
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._isSubstrateRelayChain)(chainInfo) && networkAPI.query.nominationPools) {
      const poolMemberDatas = await networkAPI.query.nominationPools.poolMembers.multi(addresses);
      if (poolMemberDatas) {
        for (const _poolMemberData of poolMemberDatas) {
          const poolMemberData = _poolMemberData.toPrimitive();
          if (poolMemberData) {
            const pooledBalance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(poolMemberData.points.toString());
            pooledStakingBalance = pooledStakingBalance.add(pooledBalance);
            Object.entries(poolMemberData.unbondingEras).forEach(([, amount]) => {
              pooledStakingBalance = pooledStakingBalance.add(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(amount));
            });
          }
        }
      }
    }
    balances.forEach(balance => {
      var _balance$data, _balance$data$free, _balance$data2, _balance$data2$reserv, _balance$data3, _balance$data3$miscFr, _balance$data4, _balance$data4$frozen, _balance$data5, _balance$data5$feeFro;
      total = total.add(((_balance$data = balance.data) === null || _balance$data === void 0 ? void 0 : (_balance$data$free = _balance$data.free) === null || _balance$data$free === void 0 ? void 0 : _balance$data$free.toBn()) || new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0)); // reserved is seperated
      reserved = reserved.add(((_balance$data2 = balance.data) === null || _balance$data2 === void 0 ? void 0 : (_balance$data2$reserv = _balance$data2.reserved) === null || _balance$data2$reserv === void 0 ? void 0 : _balance$data2$reserv.toBn()) || new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0));
      // @ts-ignore
      // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
      miscFrozen = miscFrozen.add(((_balance$data3 = balance.data) === null || _balance$data3 === void 0 ? void 0 : (_balance$data3$miscFr = _balance$data3.miscFrozen) === null || _balance$data3$miscFr === void 0 ? void 0 : _balance$data3$miscFr.toBn()) || (balance === null || balance === void 0 ? void 0 : (_balance$data4 = balance.data) === null || _balance$data4 === void 0 ? void 0 : (_balance$data4$frozen = _balance$data4.frozen) === null || _balance$data4$frozen === void 0 ? void 0 : _balance$data4$frozen.toBn()) || new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0)); // TODO: update frozen
      feeFrozen = feeFrozen.add(((_balance$data5 = balance.data) === null || _balance$data5 === void 0 ? void 0 : (_balance$data5$feeFro = _balance$data5.feeFrozen) === null || _balance$data5$feeFro === void 0 ? void 0 : _balance$data5$feeFro.toBn()) || new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0));
    });
    let locked = reserved.add(miscFrozen);
    total = total.add(reserved); // total = free + reserved

    if (pooledStakingBalance.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.BN_ZERO)) {
      total = total.add(pooledStakingBalance);
      locked = locked.add(pooledStakingBalance);
    }
    const free = total.sub(locked);
    callBack({
      tokenSlug: chainNativeTokenSlug,
      free: free.gte(_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.BN_ZERO) ? free.toString() : '0',
      locked: locked.toString(),
      state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY,
      substrateInfo: {
        miscFrozen: miscFrozen.toString(),
        reserved: reserved.toString(),
        feeFrozen: feeFrozen.toString()
      }
    });
  });
  return () => {
    unsub();
  };
}
function subscribeERC20Interval(addresses, chain, evmApiMap, callBack) {
  let tokenList = {};
  const erc20ContractMap = {};
  const getTokenBalances = () => {
    Object.values(tokenList).map(async tokenInfo => {
      let free = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0);
      try {
        const contract = erc20ContractMap[tokenInfo.slug];
        const balanceList = await Promise.all(addresses.map(address => {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
          return contract.methods.balanceOf(address).call();
        }));
        free = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.sumBN)(balanceList.map(balance => new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(balance || 0)));
        callBack({
          tokenSlug: tokenInfo.slug,
          free: free.toString(),
          locked: '0',
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY
        });
      } catch (err) {
        console.log(tokenInfo.slug, err);
      }
    });
  };
  tokenList = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__.state.getAssetByChainAndAsset(chain, [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.ERC20]);
  Object.entries(tokenList).forEach(([slug, tokenInfo]) => {
    erc20ContractMap[slug] = (0,_subwallet_extension_base_koni_api_tokens_evm_web3__WEBPACK_IMPORTED_MODULE_9__.getERC20Contract)(chain, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._getContractAddressOfToken)(tokenInfo), evmApiMap);
  });
  getTokenBalances();
  const interval = setInterval(getTokenBalances, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_10__.SUB_TOKEN_REFRESH_BALANCE_INTERVAL);
  return () => {
    clearInterval(interval);
  };
}
function subscribePSP22Balance(addresses, chain, api, callBack) {
  let tokenList = {};
  const psp22ContractMap = {};
  const getTokenBalances = () => {
    Object.values(tokenList).map(async tokenInfo => {
      let free = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0);
      try {
        const contract = psp22ContractMap[tokenInfo.slug];
        const balances = await Promise.all(addresses.map(async address => {
          var _balanceOf$output;
          const _balanceOf = await contract.query['psp22::balanceOf'](address, {
            gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_11__.getDefaultWeightV2)(api)
          }, address);
          const balanceObj = _balanceOf === null || _balanceOf === void 0 ? void 0 : (_balanceOf$output = _balanceOf.output) === null || _balanceOf$output === void 0 ? void 0 : _balanceOf$output.toPrimitive();
          return _balanceOf.output ? balanceObj.ok || balanceObj.Ok : '0';
        }));
        free = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.sumBN)(balances.map(bal => new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(bal || 0)));
        callBack({
          tokenSlug: tokenInfo.slug,
          free: free.toString(),
          locked: '0',
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY
        });
      } catch (err) {
        console.warn(tokenInfo.slug, err); // TODO: error createType
      }
    });
  };

  tokenList = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__.state.getAssetByChainAndAsset(chain, [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.PSP22]);
  Object.entries(tokenList).forEach(([slug, tokenInfo]) => {
    psp22ContractMap[slug] = (0,_subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_12__.getPSP22ContractPromise)(api, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._getContractAddressOfToken)(tokenInfo));
  });
  getTokenBalances();
  const interval = setInterval(getTokenBalances, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_10__.SUB_TOKEN_REFRESH_BALANCE_INTERVAL);
  return () => {
    clearInterval(interval);
  };
}
async function subscribeEquilibriumTokenBalance(addresses, chain, api, callBack, includeNativeToken) {
  const tokenTypes = includeNativeToken ? [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.NATIVE, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.LOCAL] : [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.LOCAL];
  const tokenMap = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__.state.getAssetByChainAndAsset(chain, tokenTypes);
  const unsub = await api.query.system.account.multi(addresses, balances => {
    // Equilibrium customizes the SystemAccount pallet
    Object.values(tokenMap).forEach(tokenInfo => {
      const assetId = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._getTokenOnChainAssetId)(tokenInfo);
      let tokenFreeBalance = _polkadot_util__WEBPACK_IMPORTED_MODULE_8__.BN_ZERO;
      for (const balance of balances) {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
        const balancesData = JSON.parse(balance.data.toString());
        const balanceList = balancesData.v0.balance;

        // @ts-ignore
        const freeTokenBalance = balanceList.find(data => data[0] === parseInt(assetId));
        const bnFreeTokenBalance = freeTokenBalance ? new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["default"](freeTokenBalance[1].positive).toString()) : _polkadot_util__WEBPACK_IMPORTED_MODULE_8__.BN_ZERO;
        tokenFreeBalance = tokenFreeBalance.add(bnFreeTokenBalance);
      }
      const tokenBalance = {
        free: tokenFreeBalance.toString(),
        locked: '0',
        // Equilibrium doesn't show locked balance
        state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY,
        tokenSlug: tokenInfo.slug
      };
      callBack(tokenBalance);
    });
  });
  return () => {
    unsub();
  };
}

// eslint-disable-next-line @typescript-eslint/require-await
async function subscribeEqBalanceAccountPallet(addresses, chain, api, callBack, includeNativeToken) {
  const tokenTypes = includeNativeToken ? [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.NATIVE, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.LOCAL] : [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.LOCAL];
  const tokenMap = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__.state.getAssetByChainAndAsset(chain, tokenTypes);
  const unsubList = Object.values(tokenMap).map(async tokenInfo => {
    try {
      const assetId = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._getTokenOnChainAssetId)(tokenInfo);
      const unsub = await api.query.eqBalances.account.multi(addresses.map(address => [address, [assetId]]), balances => {
        const tokenBalance = {
          free: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.sumBN)(balances.map(b => b.asPositive)).toString(),
          locked: '0',
          // Equilibrium doesn't show locked balance
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY,
          tokenSlug: tokenInfo.slug
        };
        callBack(tokenBalance);
      });
      return unsub;
    } catch (err) {
      console.warn(err);
      return undefined;
    }
  });
  return () => {
    unsubList.forEach(subProm => {
      subProm.then(unsub => {
        unsub && unsub();
      }).catch(console.error);
    });
  };
}
async function subscribeTokensAccountsPallet(addresses, chain, api, callBack, includeNativeToken) {
  const tokenTypes = includeNativeToken ? [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.NATIVE, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.LOCAL] : [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.LOCAL];
  const tokenMap = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__.state.getAssetByChainAndAsset(chain, tokenTypes);
  const unsubList = await Promise.all(Object.values(tokenMap).map(async tokenInfo => {
    try {
      const onChainInfo = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._getTokenOnChainInfo)(tokenInfo);
      const assetId = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._getTokenOnChainAssetId)(tokenInfo);

      // Get Token Balance
      // @ts-ignore
      return await api.query.tokens.accounts.multi(addresses.map(address => [address, onChainInfo || assetId]), balances => {
        const tokenBalance = {
          reserved: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.sumBN)(balances.map(b => b.reserved || new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0))),
          frozen: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.sumBN)(balances.map(b => b.frozen || new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0))),
          free: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.sumBN)(balances.map(b => b.free || new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0))) // free is actually total balance
        };

        // free balance = total balance - frozen misc
        // locked balance = reserved + frozen misc
        const freeBalance = tokenBalance.free.sub(tokenBalance.frozen);
        const lockedBalance = tokenBalance.frozen.add(tokenBalance.reserved);
        callBack({
          tokenSlug: tokenInfo.slug,
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY,
          free: freeBalance.toString(),
          locked: lockedBalance.toString(),
          substrateInfo: {
            reserved: tokenBalance.reserved.toString(),
            miscFrozen: tokenBalance.frozen.toString()
          }
        });
      });
    } catch (err) {
      console.warn(err);
    }
    return undefined;
  }));
  return () => {
    unsubList.forEach(unsub => {
      unsub && unsub();
    });
  };
}
async function subscribeAssetsAccountPallet(addresses, chain, api, callBack) {
  const tokenMap = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_3__.state.getAssetByChainAndAsset(chain, [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_6__._AssetType.LOCAL]);
  Object.values(tokenMap).forEach(token => {
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._MANTA_ZK_CHAIN_GROUP.includes(token.originChain) && token.symbol.startsWith(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_4__._ZK_ASSET_PREFIX)) {
      delete tokenMap[token.slug];
    }
  });
  const unsubList = await Promise.all(Object.values(tokenMap).map(async tokenInfo => {
    try {
      const assetIndex = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._getTokenOnChainAssetId)(tokenInfo);

      // Get Token Balance
      return await api.query.assets.account.multi(addresses.map(address => [assetIndex, address]), balances => {
        let total = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0);
        let frozen = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(0);
        balances.forEach(b => {
          // @ts-ignore
          // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-assignment
          const bdata = b === null || b === void 0 ? void 0 : b.toHuman();
          if (bdata) {
            // @ts-ignore
            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-argument
            const addressBalance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(String(bdata === null || bdata === void 0 ? void 0 : bdata.balance).replaceAll(',', '') || '0');

            // @ts-ignore
            if (bdata !== null && bdata !== void 0 && bdata.isFrozen) {
              frozen = frozen.add(addressBalance);
            } else {
              total = total.add(addressBalance);
            }
          }
        });
        const free = total.sub(frozen);
        callBack({
          tokenSlug: tokenInfo.slug,
          free: free.toString(),
          locked: frozen.toString(),
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY,
          substrateInfo: {
            miscFrozen: frozen.toString(),
            reserved: '0'
          }
        });
      });
    } catch (err) {
      console.warn(err);
    }
    return undefined;
  }));
  return () => {
    unsubList.forEach(unsub => {
      unsub && unsub();
    });
  };
}
function subscribeEVMBalance(chain, addresses, evmApiMap, callback, tokenInfo) {
  const balanceItem = {
    tokenSlug: tokenInfo.slug,
    state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.PENDING,
    free: '0',
    locked: '0'
  };
  function getBalance() {
    (0,_subwallet_extension_base_koni_api_tokens_evm_balance__WEBPACK_IMPORTED_MODULE_13__.getEVMBalance)(chain, addresses, evmApiMap).then(balances => {
      balanceItem.free = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.sumBN)(balances.map(b => new (_polkadot_util__WEBPACK_IMPORTED_MODULE_7___default())(b || '0'))).toString();
      balanceItem.state = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.APIItemState.READY;
      callback(balanceItem);
    }).catch(console.warn);
  }
  getBalance();
  const interval = setInterval(getBalance, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_10__.ASTAR_REFRESH_BALANCE_INTERVAL);
  const unsub2 = subscribeERC20Interval(addresses, chain, evmApiMap, callback);
  return () => {
    clearInterval(interval);
    unsub2 && unsub2();
  };
}
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "../extension-base/src/koni/api/dotsama/crowdloan.ts":
/*!***********************************************************!*\
  !*** ../extension-base/src/koni/api/dotsama/crowdloan.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getCrowdloanFundsStatus": () => (/* binding */ getCrowdloanFundsStatus),
/* harmony export */   "subscribeAcalaContributeInterval": () => (/* binding */ subscribeAcalaContributeInterval),
/* harmony export */   "subscribeCrowdloan": () => (/* binding */ subscribeCrowdloan)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/chain-list */ "../../node_modules/@subwallet/chain-list/index.js");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_dotsama_typeRegistry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/dotsama/typeRegistry */ "../extension-base/src/koni/api/dotsama/typeRegistry.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../../node_modules/axios/lib/axios.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0









function getRPCCrowdloan(parentAPI, paraId, hexAddresses, paraState, callback) {
  const unsubPromise = parentAPI.api.derive.crowdloan.ownContributions(paraId, hexAddresses, result => {
    let contribute = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_0___default())(0);
    Object.values(result).forEach(item => {
      contribute = contribute.add(item.toBn());
    });
    const rs = {
      state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.APIItemState.READY,
      paraState,
      contribute: contribute.toString()
    };
    callback(rs);
  });
  return () => {
    unsubPromise.then(unsub => {
      unsub();
    }).catch(console.error);
  };
}
const subscribeAcalaContributeInterval = (polkadotAddresses, paraState, callback) => {
  const acalaContributionApi = 'https://api.polkawallet.io/acala-distribution-v2/crowdloan?account=';
  const getContributeInfo = () => {
    Promise.all(polkadotAddresses.map(polkadotAddress => {
      return axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`${acalaContributionApi}${polkadotAddress}`);
    })).then(resList => {
      let contribute = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_0___default())(0);
      resList.forEach(res => {
        var _res$data$data, _res$data$data$acala, _res$data$data$acala$;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-argument
        contribute = contribute.add(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_0___default())(((_res$data$data = res.data.data) === null || _res$data$data === void 0 ? void 0 : (_res$data$data$acala = _res$data$data.acala) === null || _res$data$data$acala === void 0 ? void 0 : (_res$data$data$acala$ = _res$data$data$acala[0]) === null || _res$data$data$acala$ === void 0 ? void 0 : _res$data$data$acala$.totalDOTLocked) || '0'));
      });
      const rs = {
        state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.APIItemState.READY,
        paraState,
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
        contribute: contribute.toString()
      };
      callback(rs);
    }).catch(console.error);
  };
  getContributeInfo();
  const interval = setInterval(getContributeInfo, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_3__.ACALA_REFRESH_CROWDLOAN_INTERVAL);
  return () => {
    clearInterval(interval);
  };
};
async function getCrowdloanFundsStatus(api) {
  const leases = await api.query.slots.leases.keys();
  const leasesParaIds = leases.map(({
    args: [paraId]
  }) => paraId.toString());
  const rs = await api.query.crowdloan.funds.entries();
  const newRaise = await api.query.crowdloan.newRaise();
  const newRaiseParaIds = newRaise.toJSON().map(p => p.toString());
  return rs.reduce((stateMap, [{
    args: [paraId]
  }, fundData]) => {
    const paraStr = paraId.toString();

    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
    // const item = fundData.unwrap() as PolkadotRuntimeCommonCrowdloanFundInfo;

    if (leasesParaIds.indexOf(paraStr) > -1) {
      stateMap[paraStr] = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.CrowdloanParaState.COMPLETED;
    }
    if (newRaiseParaIds.indexOf(paraStr) > -1) {
      stateMap[paraStr] = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.CrowdloanParaState.ONGOING;
    }
    return stateMap;
  }, {});
}

// Get All crowdloan
async function subscribeCrowdloan(addresses, substrateApiMap, callback, chainInfoMap) {
  const unsubMap = {};
  if (Object.keys(substrateApiMap).includes(_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_4__.COMMON_CHAIN_SLUGS.KUSAMA) && Object.keys(substrateApiMap).includes(_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_4__.COMMON_CHAIN_SLUGS.POLKADOT)) {
    const polkadotAPI = await substrateApiMap[_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_4__.COMMON_CHAIN_SLUGS.POLKADOT].isReady;
    const polkadotFundsStatusMap = await getCrowdloanFundsStatus(polkadotAPI.api);
    const kusamaAPI = await substrateApiMap[_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_4__.COMMON_CHAIN_SLUGS.KUSAMA].isReady;
    const kusamaFundsStatusMap = await getCrowdloanFundsStatus(kusamaAPI.api);

    // TODO: find all crowdloan valid networks: parachains, in-crowdloan, crowdloan but failed

    const substrateAddresses = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_5__.categoryAddresses)(addresses)[0];
    const hexAddresses = substrateAddresses.map(address => {
      return _subwallet_extension_base_koni_api_dotsama_typeRegistry__WEBPACK_IMPORTED_MODULE_6__["default"].createType('AccountId', address).toHex();
    });
    Object.entries(chainInfoMap).forEach(([networkKey, chainInfo]) => {
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._isSubstrateParaChain)(chainInfo)) {
        const parentChain = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getSubstrateRelayParent)(chainInfo);
        const crowdloanCb = rs => {
          callback(networkKey, rs);
        };
        const paraId = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getSubstrateParaId)(chainInfo);
        if (paraId <= -1 || addresses.length === 0 || parentChain.length === 0) {
          return;
        }
        if (networkKey === _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_4__.COMMON_CHAIN_SLUGS.ACALA) {
          const acalaAddresses = substrateAddresses.map(address => (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_5__.reformatAddress)(address, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainSubstrateAddressPrefix)(chainInfo), (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._isChainEvmCompatible)(chainInfo)));
          unsubMap.acala = subscribeAcalaContributeInterval(acalaAddresses, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_1__.CrowdloanParaState.COMPLETED, crowdloanCb);
        } else if (parentChain === _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_4__.COMMON_CHAIN_SLUGS.POLKADOT && polkadotFundsStatusMap[paraId]) {
          unsubMap[networkKey] = getRPCCrowdloan(polkadotAPI, paraId, hexAddresses, polkadotFundsStatusMap[paraId], crowdloanCb);
        } else if (parentChain === _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_4__.COMMON_CHAIN_SLUGS.KUSAMA && kusamaFundsStatusMap[paraId]) {
          unsubMap[networkKey] = getRPCCrowdloan(kusamaAPI, paraId, hexAddresses, kusamaFundsStatusMap[paraId], crowdloanCb);
        }
      }
    });
  }
  return () => {
    Object.values(unsubMap).forEach(unsub => {
      // eslint-disable-next-line @typescript-eslint/no-unsafe-call
      unsub && unsub();
    });
  };
}

/***/ }),

/***/ "../extension-base/src/koni/api/dotsama/parseTransaction.ts":
/*!******************************************************************!*\
  !*** ../extension-base/src/koni/api/dotsama/parseTransaction.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "parseSubstrateTransaction": () => (/* binding */ parseSubstrateTransaction)
/* harmony export */ });
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/hex/toU8a.js");
// Copyright 2019-2022 @polkadot/extension-koni-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



const formatArgs = callInstance => {
  const paramArgKvArray = [];
  const {
    args,
    meta
  } = callInstance;
  for (let i = 0; i < meta.args.length; i++) {
    let argument;
    if (args[i].toRawType().startsWith('AccountId')) {
      argument = args[i].toString();
    } else if (args[i].toRawType().startsWith('Vec<Call>')) {
      argument = JSON.stringify(args[i].toHuman(false));
    } else if (args[i].toRawType().startsWith('Vec')) {
      // toString is nicer than toHuman here because
      // toHuman tends to concatenate long strings and would hide data
      // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-return
      argument = args[i].map(v => v.toString());
    } else {
      // toHuman takes care of the balance formating
      // with the right chain unit
      argument = JSON.stringify(args[i].toHuman());
    }
    const argName = meta.args[i].name.toHuman();
    paramArgKvArray.push({
      argName,
      argValue: argument
    });
  }
  return paramArgKvArray;
};
const parseSubstrateTransaction = (data, apiPromise) => {
  const registry = apiPromise.registry;
  const payload = registry.createType('ExtrinsicPayload', (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_1__.hexToU8a)(data));
  const nonce = payload.nonce.toNumber();
  const tip = payload.tip.toNumber();
  const specVer = payload.specVersion.toNumber();
  const _era = payload.era;
  let era = _era.toString();
  if (_era.isMortalEra) {
    era = {
      period: _era.asMortalEra.period.toNumber(),
      phase: _era.asMortalEra.phase.toNumber()
    };
  }
  const _method = payload.method.toString();
  const call = registry.createType('Call', _method);
  const sectionMethod = `${call.section}.${call.method}`;
  const result = [];
  const firstArg = call.args[0];
  const baseInfo = {
    era: era,
    tip: tip,
    nonce: nonce,
    specVersion: specVer
  };

  // that's a batch
  if (firstArg !== null && firstArg !== void 0 && firstArg.toRawType().startsWith('Vec<Call>')) {
    result.push({
      args: undefined,
      methodName: sectionMethod
    });
    firstArg.forEach(c => {
      registry.createType('Call', c);
      result.push({
        args: formatArgs(c),
        methodName: `${c.section}.${c.method}`
      });
    });
  } else {
    try {
      result.push({
        args: formatArgs(call),
        methodName: sectionMethod
      });
    } catch (e) {
      return {
        ...baseInfo,
        message: (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)('Unable to decode the information'),
        method: _method
      };
    }
  }
  return {
    ...baseInfo,
    method: result,
    message: ''
  };
};

/***/ }),

/***/ "../extension-base/src/koni/api/dotsama/transfer.ts":
/*!**********************************************************!*\
  !*** ../extension-base/src/koni/api/dotsama/transfer.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkReferenceCount": () => (/* binding */ checkReferenceCount),
/* harmony export */   "checkSupportTransfer": () => (/* binding */ checkSupportTransfer),
/* harmony export */   "createTransferExtrinsic": () => (/* binding */ createTransferExtrinsic)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm */ "../extension-base/src/koni/api/tokens/wasm/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm/utils */ "../extension-base/src/koni/api/tokens/wasm/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_4__);
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0






function isRefCount(accountInfo) {
  return !!accountInfo.refcount;
}
async function checkReferenceCount(networkKey, address, substrateApiMap, chainInfo) {
  console.log('Starting checkReferenceCount');
  console.log('Parameters:', {
    networkKey,
    address
  });
  const apiProps = await substrateApiMap[networkKey].isReady;
  const api = apiProps.api;
  console.log('API fetched:', api);
  console.log(Object.keys(api.tx));
  console.log(api.tx.balances ? 'Balances module available' : 'Balances module not available');
  if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isChainEvmCompatible)(chainInfo)) {
    return false;
  }

  // @ts-ignore
  const accountInfo = await api.query.system.account(address);
  return accountInfo ? isRefCount(accountInfo) ? !accountInfo.refcount.isZero() : !accountInfo.consumers.isZero() : false;
}
async function checkSupportTransfer(networkKey, tokenInfo, substrateApiMap, chainInfo) {
  const substrateApi = await substrateApiMap[networkKey].isReady;
  if (!tokenInfo) {
    return {
      supportTransfer: false,
      supportTransferAll: false
    };
  }
  if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isChainEvmCompatible)(chainInfo)) {
    return {
      supportTransfer: true,
      supportTransferAll: true
    };
  }
  if (tokenInfo.symbol.startsWith(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._ZK_ASSET_PREFIX) && _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._MANTA_ZK_CHAIN_GROUP.includes(tokenInfo.originChain)) {
    return {
      supportTransfer: false,
      supportTransferAll: false
    };
  }
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_NOT_SUPPORTED_CHAINS.includes(networkKey)) {
    return {
      supportTransfer: false,
      supportTransferAll: false
    };
  }
  const api = substrateApi.api;
  const isTxCurrenciesSupported = !!api && !!api.tx && !!api.tx.currencies;
  const isTxBalancesSupported = !!api && !!api.tx && !!api.tx.balances;
  const isTxTokensSupported = !!api && !!api.tx && !!api.tx.tokens;
  const isTxEqBalancesSupported = !!api && !!api.tx && !!api.tx.eqBalances;
  const result = {
    supportTransfer: false,
    supportTransferAll: false
  };
  if (!(isTxCurrenciesSupported || isTxBalancesSupported || isTxTokensSupported || isTxEqBalancesSupported)) {
    return result;
  }
  if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isTokenWasmSmartContract)(tokenInfo) && api.query.contracts) {
    // for PSP tokens
    return {
      supportTransfer: true,
      supportTransferAll: true
    };
  }

  // TODO: need review
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.acala.includes(networkKey) && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo) && isTxCurrenciesSupported) {
    result.supportTransfer = true;
    result.supportTransferAll = true;
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.kintsugi.includes(networkKey) && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo) && isTxTokensSupported) {
    result.supportTransfer = true;
    result.supportTransferAll = true;
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.genshiro.includes(networkKey)
  // && !_isNativeToken(tokenInfo) && isTxEqBalancesSupported
  ) {
    result.supportTransfer = false;
    result.supportTransferAll = false;
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.crab.includes(networkKey) && _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._BALANCE_TOKEN_GROUP.crab.includes(tokenInfo.symbol)) {
    result.supportTransfer = true;
    result.supportTransferAll = true;
  } else if (isTxBalancesSupported && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo)) {
    result.supportTransfer = true;
    result.supportTransferAll = true;
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.bitcountry.includes(networkKey) && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo) && _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._BALANCE_TOKEN_GROUP.bitcountry.includes(tokenInfo.symbol)) {
    result.supportTransfer = true;
    result.supportTransferAll = true;
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.statemine.includes(networkKey) && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo)) {
    result.supportTransfer = true;
    result.supportTransferAll = true;
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.sora_substrate.includes(networkKey)) {
    result.supportTransfer = true;
    result.supportTransferAll = true;
    // } else if (_TRANSFER_CHAIN_GROUP.riochain.includes(networkKey) && _isNativeToken(tokenInfo)) {
    //   result.supportTransfer = true;
    //   result.supportTransferAll = true;
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.avail.includes(networkKey)) {
    result.supportTransfer = false;
    result.supportTransferAll = false;
  }
  return result;
}
const createTransferExtrinsic = async ({
  from,
  networkKey,
  substrateApi,
  to,
  tokenInfo,
  transferAll,
  value
}) => {
  const api = substrateApi.api;

  // @ts-ignore
  let transfer = null;
  const isTxCurrenciesSupported = !!api && !!api.tx && !!api.tx.currencies;
  const isTxBalancesSupported = !!api && !!api.tx && !!api.tx.balances;
  const isTxTokensSupported = !!api && !!api.tx && !!api.tx.tokens;
  // const isTxEqBalancesSupported = !!api && !!api.tx && !!api.tx.eqBalances;
  const isTxAssetsSupported = !!api && !!api.tx && !!api.tx.assets;
  let transferAmount; // for PSP-22 tokens, might be deprecated in the future

  if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isTokenWasmSmartContract)(tokenInfo) && api.query.contracts) {
    const contractPromise = (0,_subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_2__.getPSP22ContractPromise)(api, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getContractAddressOfToken)(tokenInfo));
    // @ts-ignore
    const gasLimit = await (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_3__.getWasmContractGasLimit)(api, from, 'psp22::transfer', contractPromise, {}, [from, value, {}]);

    // @ts-ignore
    transfer = contractPromise.tx['psp22::transfer']({
      gasLimit
    }, to, value, {});
    transferAmount = value;
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.acala.includes(networkKey)) {
    if (!(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo)) {
      if (isTxCurrenciesSupported) {
        transfer = api.tx.currencies.transfer(to, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainInfo)(tokenInfo), value);
      }
    } else {
      if (transferAll) {
        transfer = api.tx.balances.transferAll(to, false);
      } else if (value) {
        transfer = api.tx.balances.transferKeepAlive(to, new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(value));
      }
    }
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.kintsugi.includes(networkKey) && isTxTokensSupported) {
    if (transferAll) {
      transfer = api.tx.tokens.transferAll(to, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainInfo)(tokenInfo) || (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainAssetId)(tokenInfo), false);
    } else if (value) {
      transfer = api.tx.tokens.transfer(to, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainInfo)(tokenInfo) || (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainAssetId)(tokenInfo), new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(value));
    }
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.pendulum.includes(networkKey) && isTxTokensSupported && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo)) {
    if (transferAll) {
      transfer = api.tx.tokens.transferAll(to, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainInfo)(tokenInfo), false);
    } else if (value) {
      transfer = api.tx.tokens.transfer(to, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainInfo)(tokenInfo), new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(value));
    }
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.genshiro.includes(networkKey)
  // && isTxEqBalancesSupported
  ) {
    // transfer = api.tx.eqBalances.transfer(_getTokenOnChainAssetId(tokenInfo), to, value);
    /* empty */
  } else if (!(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo) && (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.crab.includes(networkKey) || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._BALANCE_TOKEN_GROUP.crab.includes(tokenInfo.symbol))) {
    if (transferAll) {
      transfer = api.tx.kton.transferAll(to, false);
    } else if (value) {
      transfer = api.tx.kton.transfer(to, new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(value));
    }
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.bitcountry.includes(networkKey) && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo)) {
    transfer = api.tx.currencies.transfer(to, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainInfo)(tokenInfo), value);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.statemine.includes(networkKey) && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo)) {
    transfer = api.tx.assets.transfer((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainAssetId)(tokenInfo), to, value);
    // } else if (_TRANSFER_CHAIN_GROUP.riochain.includes(networkKey)) {
    //   if (_isNativeToken(tokenInfo)) {
    //     transfer = api.tx.currencies.transferNativeCurrency(to, value);
    //   }
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._TRANSFER_CHAIN_GROUP.sora_substrate.includes(networkKey) && isTxAssetsSupported) {
    transfer = api.tx.assets.transfer((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainAssetId)(tokenInfo), to, value);
  } else if (isTxBalancesSupported && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo)) {
    if (transferAll) {
      // alert('Available modules: ' + Object.keys(api.tx).join(', '));
      // alert('Balances methods: ' + (api.tx.balances ? Object.keys(api.tx.balances).join(', ') : 'Balances not available'));
      transfer = api.tx.balances.transferAll(to, false);
    } else if (value) {
      // transfer = api.tx.balances.transfer(to, new BN(value));
      transfer = api.tx.balances.transferKeepAlive(to, new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(value));
    }
  }
  return [transfer, transferAmount || value];
};

/***/ }),

/***/ "../extension-base/src/koni/api/dotsama/typeRegistry.ts":
/*!**************************************************************!*\
  !*** ../extension-base/src/koni/api/dotsama/typeRegistry.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _polkadot_types_create__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/types/create */ "../../node_modules/@polkadot/types/create/registry.js");
// Copyright 2017-2022 @polkadot/react-api authors & contributors
// SPDX-License-Identifier: Apache-2.0


const registry = new _polkadot_types_create__WEBPACK_IMPORTED_MODULE_0__.TypeRegistry();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (registry);

/***/ }),

/***/ "../extension-base/src/koni/api/nft/acala_nft/index.ts":
/*!*************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/acala_nft/index.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AcalaNftApi": () => (/* binding */ AcalaNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/config */ "../extension-base/src/koni/api/nft/config.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0





const acalaExternalBaseUrl = 'https://apps.acala.network/portfolio/nft/';
class AcalaNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__.BaseNftApi {
  // eslint-disable-next-line no-useless-constructor
  constructor(api, addresses, chain) {
    super(chain, api, addresses);
  }
  parseUrl(input) {
    if (!input || input.length === 0) {
      return undefined;
    }
    if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.isUrl)(input)) {
      return input;
    }
    if (!input.includes('ipfs://')) {
      return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.getRandomIpfsGateway)() + input;
    }
    return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.getRandomIpfsGateway)() + input.split('ipfs://')[1];
  }

  /**
   * Retrieve id of NFTs
   *
   * @returns the array of NFT Ids
   * @param addresses
   */
  async getNfts(addresses) {
    if (!this.substrateApi) {
      return [];
    }
    const assetIds = [];
    await Promise.all(addresses.map(async address => {
      // @ts-ignore
      const resp = await this.substrateApi.api.query.ormlNFT.tokensByOwner.keys(address);
      if (resp) {
        for (const key of resp) {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
          const data = key.toHuman();
          assetIds.push({
            classId: data[1],
            tokenId: this.parseTokenId(data[2])
          });
        }
      }
    }));
    return assetIds;
  }
  async getCollectionDetails(collectionId) {
    if (!this.substrateApi) {
      return null;
    }
    const metadataCollection = (await this.substrateApi.api.query.ormlNFT.classes(collectionId)).toHuman();
    if (!(metadataCollection !== null && metadataCollection !== void 0 && metadataCollection.metadata)) {
      return null;
    }
    const data = await getMetadata(metadataCollection === null || metadataCollection === void 0 ? void 0 : metadataCollection.metadata);
    return {
      ...data,
      image: this.parseUrl(data.image)
    };
  }
  async getTokenDetails(assetId) {
    if (!this.substrateApi) {
      return null;
    }
    return (await this.substrateApi.api.query.ormlNFT.tokens(assetId.classId, assetId.tokenId)).toHuman();
  }
  async handleNft(address, params) {
    const assetIds = await this.getNfts([address]);
    try {
      if (!assetIds || assetIds.length === 0) {
        return;
      }
      const collectionIds = [];
      const nftIds = [];
      await Promise.all(assetIds.map(async assetId => {
        const parsedClassId = this.parseTokenId(assetId.classId);
        const parsedTokenId = this.parseTokenId(assetId.tokenId);
        if (!collectionIds.includes(parsedClassId)) {
          collectionIds.push(parsedClassId);
        }
        nftIds.push(parsedTokenId);
        const [tokenInfo, collectionMeta] = await Promise.all([this.getTokenDetails(assetId), this.getCollectionDetails(parseInt(parsedClassId))]);
        const parsedNft = {
          id: parsedTokenId,
          name: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.name,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
          description: tokenInfo && tokenInfo.description ? tokenInfo.description : collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.description,
          externalUrl: acalaExternalBaseUrl + parsedClassId,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
          image: tokenInfo && tokenInfo.image ? this.parseUrl(tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.image) : collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.image,
          collectionId: parsedClassId,
          chain: this.chain,
          owner: address
        };
        const parsedCollection = {
          collectionId: parsedClassId,
          chain: this.chain,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
          collectionName: collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.name,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
          image: collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.image
        };
        params.updateItem(this.chain, parsedNft, address);
        params.updateCollection(this.chain, parsedCollection);
      }));
    } catch (e) {
      console.error(`${this.chain}`, e);
    }
  }
  async handleNfts(params) {
    await Promise.all(this.addresses.map(address => this.handleNft(address, params)));
  }
  async fetchNfts(params) {
    try {
      await this.connect();
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
}
const headers = {
  'Content-Type': 'application/json'
};
const getMetadata = metadataUrl => {
  let url = metadataUrl;
  if (!metadataUrl) {
    return null;
  }
  url = (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.getRandomIpfsGateway)() + metadataUrl + '/azero_domain_registry_abi.json';
  return cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url, {
    method: 'GET',
    headers
  }).then(res => res.json());
};

/***/ }),

/***/ "../extension-base/src/koni/api/nft/bit.country/index.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/bit.country/index.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BitCountryNftApi": () => (/* binding */ BitCountryNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/config */ "../extension-base/src/koni/api/nft/config.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/bn/consts.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/hex/toBn.js");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0






class BitCountryNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__.BaseNftApi {
  constructor(api, addresses, chain) {
    super(chain, api, addresses);
  }
  parseUrl(input) {
    if (!input || input.length === 0) {
      return undefined;
    }
    if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.isUrl)(input)) {
      return input;
    }
    if (!input.includes('ipfs://')) {
      return _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.BIT_COUNTRY_IPFS_SERVER + input;
    }
    return _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.BIT_COUNTRY_IPFS_SERVER + input.split('ipfs://')[1];
  }
  async getNfts(addresses) {
    if (!this.substrateApi) {
      return [];
    }
    const assetIds = [];
    await Promise.all(addresses.map(async address => {
      // @ts-ignore
      const resp = await this.substrateApi.api.query.ormlNFT.tokensByOwner.entries(address);
      for (const item of resp) {
        const data = item[0].toHuman();
        assetIds.push({
          classId: this.parseTokenId(data[1]),
          tokenId: this.parseTokenId(data[2]),
          owner: address
        });
      }
    }));
    return assetIds;
  }
  async getTokenDetails(assetId) {
    if (!this.substrateApi) {
      return null;
    }
    const onChainMeta = (await this.substrateApi.api.query.ormlNFT.tokens(assetId.classId, assetId.tokenId)).toHuman();
    if (!onChainMeta.metadata) {
      return null;
    }

    // check if NFT is Land/Estate
    if (onChainMeta.data.attributes['MetaverseId:']) {
      return await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(`${_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.BIT_COUNTRY_LAND_ESTATE_METADATA_API}/${assetId.classId}/${assetId.tokenId}/metadata.json`).then(resp => resp.json());
    } else {
      return await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.BIT_COUNTRY_IPFS_SERVER + onChainMeta.metadata).then(resp => resp.json());
    }
  }
  async getCollectionDetails(collectionId) {
    if (!this.substrateApi) {
      return null;
    }
    const metadataCollection = (await this.substrateApi.api.query.ormlNFT.classes(collectionId)).toHuman();
    if (!metadataCollection.metadata) {
      return null;
    }
    if (metadataCollection.data.attributes['MetaverseId:']) {
      const category = metadataCollection.data.attributes['Category:'];
      const hexMetaverseId = metadataCollection.data.attributes['MetaverseId:'];
      let metaverseId = _polkadot_util__WEBPACK_IMPORTED_MODULE_4__.BN_ZERO;
      try {
        metaverseId = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_5__.hexToBn)(hexMetaverseId);
      } catch (e) {
        console.warn('Error parsing metaverse id', e);
      }
      return {
        name: `${category} #${collectionId}`,
        metaverseId: metaverseId.toString()
      };
    } else {
      return await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.BIT_COUNTRY_IPFS_SERVER + metadataCollection.metadata).then(resp => resp.json());
    }
  }
  parseMetadata(data) {
    const traitList = data !== null && data !== void 0 && data.traits ? data.traits : data === null || data === void 0 ? void 0 : data.attributes;
    const propertiesMap = {};
    if (traitList) {
      traitList.forEach(traitMap => {
        propertiesMap[traitMap.trait_type] = {
          value: traitMap.value
        };
      });
    }
    return {
      name: data === null || data === void 0 ? void 0 : data.name,
      image: data !== null && data !== void 0 && data.image_url ? this.parseUrl(data.image_url) : this.parseUrl(data === null || data === void 0 ? void 0 : data.image),
      description: data === null || data === void 0 ? void 0 : data.description,
      properties: propertiesMap,
      externalUrl: data === null || data === void 0 ? void 0 : data.external_url,
      chain: this.chain
    };
  }
  async fetchNfts(params) {
    try {
      await this.connect();
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
  async handleNft(address, params) {
    const assetIds = await this.getNfts([address]);
    try {
      if (!assetIds || assetIds.length === 0) {
        return;
      }
      const collectionIds = [];
      const nftIds = [];
      await Promise.all(assetIds.map(async assetId => {
        const parsedClassId = this.parseTokenId(assetId.classId);
        const parsedTokenId = this.parseTokenId(assetId.tokenId);
        if (!collectionIds.includes(parsedClassId)) {
          collectionIds.push(parsedClassId);
        }
        nftIds.push(parsedTokenId);
        const [tokenInfo, collectionMeta] = await Promise.all([this.getTokenDetails(assetId), this.getCollectionDetails(parsedClassId)]);
        const parsedNft = this.parseMetadata(tokenInfo);
        parsedNft.collectionId = parsedClassId;
        parsedNft.id = parsedTokenId;
        parsedNft.owner = address;
        const parsedCollection = {
          collectionId: parsedClassId,
          chain: this.chain,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
          collectionName: collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.name,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
          image: this.parseUrl(collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.image_url)
        };
        params.updateItem(this.chain, parsedNft, address);
        params.updateCollection(this.chain, parsedCollection);
      }));
    } catch (e) {
      console.error(`${this.chain}`, e);
    }
  }
  async handleNfts(params) {
    await Promise.all(this.addresses.map(address => this.handleNft(address, params)));
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/config.ts":
/*!****************************************************!*\
  !*** ../extension-base/src/koni/api/nft/config.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BIT_COUNTRY_IPFS_SERVER": () => (/* binding */ BIT_COUNTRY_IPFS_SERVER),
/* harmony export */   "BIT_COUNTRY_LAND_ESTATE_METADATA_API": () => (/* binding */ BIT_COUNTRY_LAND_ESTATE_METADATA_API),
/* harmony export */   "BIT_COUNTRY_THUMBNAIL_RESOLVER": () => (/* binding */ BIT_COUNTRY_THUMBNAIL_RESOLVER),
/* harmony export */   "CF_IPFS_GATEWAY": () => (/* binding */ CF_IPFS_GATEWAY),
/* harmony export */   "CLOUDFLARE_PINATA_SERVER": () => (/* binding */ CLOUDFLARE_PINATA_SERVER),
/* harmony export */   "DWEB_LINK": () => (/* binding */ DWEB_LINK),
/* harmony export */   "GATEWAY_IPFS_IO": () => (/* binding */ GATEWAY_IPFS_IO),
/* harmony export */   "IPFS_FLEEK": () => (/* binding */ IPFS_FLEEK),
/* harmony export */   "IPFS_GATEWAY_4EVERLAND": () => (/* binding */ IPFS_GATEWAY_4EVERLAND),
/* harmony export */   "IPFS_IO": () => (/* binding */ IPFS_IO),
/* harmony export */   "IPFS_W3S_LINK": () => (/* binding */ IPFS_W3S_LINK),
/* harmony export */   "KANARIA_ENDPOINT": () => (/* binding */ KANARIA_ENDPOINT),
/* harmony export */   "KANARIA_EXTERNAL_SERVER": () => (/* binding */ KANARIA_EXTERNAL_SERVER),
/* harmony export */   "NFT_STORAGE_GATEWAY": () => (/* binding */ NFT_STORAGE_GATEWAY),
/* harmony export */   "PINATA_IPFS_GATEWAY": () => (/* binding */ PINATA_IPFS_GATEWAY),
/* harmony export */   "QUARTZ_SCAN_ENDPOINT": () => (/* binding */ QUARTZ_SCAN_ENDPOINT),
/* harmony export */   "RMRK_PINATA_SERVER": () => (/* binding */ RMRK_PINATA_SERVER),
/* harmony export */   "SINGULAR_V1_COLLECTION_ENDPOINT": () => (/* binding */ SINGULAR_V1_COLLECTION_ENDPOINT),
/* harmony export */   "SINGULAR_V1_ENDPOINT": () => (/* binding */ SINGULAR_V1_ENDPOINT),
/* harmony export */   "SINGULAR_V2_COLLECTION_ENDPOINT": () => (/* binding */ SINGULAR_V2_COLLECTION_ENDPOINT),
/* harmony export */   "SINGULAR_V2_ENDPOINT": () => (/* binding */ SINGULAR_V2_ENDPOINT),
/* harmony export */   "SUPPORTED_NFT_NETWORKS": () => (/* binding */ SUPPORTED_NFT_NETWORKS),
/* harmony export */   "SUPPORTED_TRANSFER_EVM_CHAIN": () => (/* binding */ SUPPORTED_TRANSFER_EVM_CHAIN),
/* harmony export */   "SUPPORTED_TRANSFER_EVM_CHAIN_NAME": () => (/* binding */ SUPPORTED_TRANSFER_EVM_CHAIN_NAME),
/* harmony export */   "SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME": () => (/* binding */ SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME),
/* harmony export */   "TRANSFER_CHAIN_ID": () => (/* binding */ TRANSFER_CHAIN_ID),
/* harmony export */   "UNIQUE_IPFS_GATEWAY": () => (/* binding */ UNIQUE_IPFS_GATEWAY),
/* harmony export */   "UNIQUE_SCAN_ENDPOINT": () => (/* binding */ UNIQUE_SCAN_ENDPOINT),
/* harmony export */   "VARA_SCAN_ENDPOINT": () => (/* binding */ VARA_SCAN_ENDPOINT),
/* harmony export */   "getRandomIpfsGateway": () => (/* binding */ getRandomIpfsGateway)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/environment.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


const SINGULAR_V1_ENDPOINT = 'https://singular.rmrk-api.xyz/api/account-rmrk1/';
const SINGULAR_V2_ENDPOINT = 'https://singular.rmrk-api.xyz/api/account/';
const KANARIA_ENDPOINT = 'https://kanaria.rmrk.app/api/rmrk2/';
const RMRK_PINATA_SERVER = 'https://rmrk.mypinata.cloud/ipfs/';
const SINGULAR_V1_COLLECTION_ENDPOINT = 'https://singular.rmrk.app/api/rmrk1/collection/';
const SINGULAR_V2_COLLECTION_ENDPOINT = 'https://singular.app/api/rmrk2/collection/';
const KANARIA_EXTERNAL_SERVER = 'https://kanaria.rmrk.app/catalogue/';
const CLOUDFLARE_PINATA_SERVER = 'https://cloudflare-ipfs.com/ipfs/';
const BIT_COUNTRY_IPFS_SERVER = 'https://ipfs-cdn.bit.country/';
const BIT_COUNTRY_LAND_ESTATE_METADATA_API = 'https://pioneer-api.bit.country/metadata/landTokenUriPioneer';
const BIT_COUNTRY_THUMBNAIL_RESOLVER = 'https://res.cloudinary.com/ddftctzph/image/upload/c_scale,q_100,w_250/production-ipfs/asset/';
const CF_IPFS_GATEWAY = 'https://cf-ipfs.com/ipfs/';
const PINATA_IPFS_GATEWAY = 'https://gateway.pinata.cloud/ipfs/';
const UNIQUE_SCAN_ENDPOINT = 'https://explorer-api.unique.network/v1/graphql';
const QUARTZ_SCAN_ENDPOINT = 'https://hasura-quartz.unique.network/v1/graphql';
const VARA_SCAN_ENDPOINT = 'https://nft-explorer.vara-network.io/graphql';

// GATEWAY

const UNIQUE_IPFS_GATEWAY = 'https://ipfs.unique.network/ipfs/';
const NFT_STORAGE_GATEWAY = 'https://nftstorage.link/ipfs/';
const IPFS_W3S_LINK = 'https://w3s.link/ipfs/';
const GATEWAY_IPFS_IO = 'https://gateway.ipfs.io/ipfs/';
const IPFS_IO = 'https://ipfs.io/ipfs/';
const DWEB_LINK = 'https://dweb.link/ipfs/';
const IPFS_GATEWAY_4EVERLAND = 'https://4everland.io/ipfs/';
const IPFS_FLEEK = 'https://ipfs.fleek.co/ipfs/';
let SUPPORTED_NFT_NETWORKS;
(function (SUPPORTED_NFT_NETWORKS) {
  SUPPORTED_NFT_NETWORKS["karura"] = "karura";
  SUPPORTED_NFT_NETWORKS["acala"] = "acala";
  SUPPORTED_NFT_NETWORKS["kusama"] = "kusama";
  SUPPORTED_NFT_NETWORKS["statemine"] = "statemine";
  SUPPORTED_NFT_NETWORKS["unique_network"] = "unique_network";
  SUPPORTED_NFT_NETWORKS["quartz"] = "quartz";
  SUPPORTED_NFT_NETWORKS["bitcountry"] = "bitcountry";
  SUPPORTED_NFT_NETWORKS["pioneer"] = "pioneer";
})(SUPPORTED_NFT_NETWORKS || (SUPPORTED_NFT_NETWORKS = {}));
let SUPPORTED_TRANSFER_EVM_CHAIN_NAME;
(function (SUPPORTED_TRANSFER_EVM_CHAIN_NAME) {
  SUPPORTED_TRANSFER_EVM_CHAIN_NAME["moonbeam"] = "moonbeam";
  SUPPORTED_TRANSFER_EVM_CHAIN_NAME["moonbase"] = "moonbase";
  SUPPORTED_TRANSFER_EVM_CHAIN_NAME["astarEvm"] = "astarEvm";
  SUPPORTED_TRANSFER_EVM_CHAIN_NAME["moonriver"] = "moonriver";
  SUPPORTED_TRANSFER_EVM_CHAIN_NAME["shiden"] = "shiden";
  SUPPORTED_TRANSFER_EVM_CHAIN_NAME["shibuya"] = "shibuya";
})(SUPPORTED_TRANSFER_EVM_CHAIN_NAME || (SUPPORTED_TRANSFER_EVM_CHAIN_NAME = {}));
const SUPPORTED_TRANSFER_EVM_CHAIN = [SUPPORTED_TRANSFER_EVM_CHAIN_NAME.moonbase, SUPPORTED_TRANSFER_EVM_CHAIN_NAME.moonbeam, SUPPORTED_TRANSFER_EVM_CHAIN_NAME.moonriver, SUPPORTED_TRANSFER_EVM_CHAIN_NAME.astarEvm, SUPPORTED_TRANSFER_EVM_CHAIN_NAME.shiden, SUPPORTED_TRANSFER_EVM_CHAIN_NAME.shibuya];
const TRANSFER_CHAIN_ID = {
  [SUPPORTED_TRANSFER_EVM_CHAIN_NAME.moonbase]: 1287,
  [SUPPORTED_TRANSFER_EVM_CHAIN_NAME.moonbeam]: 1284,
  [SUPPORTED_TRANSFER_EVM_CHAIN_NAME.moonriver]: 1285,
  [SUPPORTED_TRANSFER_EVM_CHAIN_NAME.astarEvm]: 592,
  [SUPPORTED_TRANSFER_EVM_CHAIN_NAME.shiden]: 336,
  [SUPPORTED_TRANSFER_EVM_CHAIN_NAME.shibuya]: 81
};
let SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME;
(function (SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME) {
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["statemine"] = "statemine";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["acala"] = "acala";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["karura"] = "karura";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["kusama"] = "kusama";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["uniqueNft"] = "unique_network";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["quartz"] = "quartz";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["opal"] = "opal";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["statemint"] = "statemint";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["bitcountry"] = "bitcountry";
  SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME["pioneer"] = "pioneer";
})(SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME || (SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME = {}));
const RANDOM_IPFS_GATEWAY_SETTING = [{
  provider: CF_IPFS_GATEWAY,
  weight: 4
}, {
  provider: CLOUDFLARE_PINATA_SERVER,
  weight: 10
}, {
  provider: PINATA_IPFS_GATEWAY,
  weight: 1 // Rate limit too low
}, {
  provider: DWEB_LINK,
  weight: 5
}, {
  provider: GATEWAY_IPFS_IO,
  weight: 5
}, {
  provider: IPFS_IO,
  weight: 5
}, {
  provider: NFT_STORAGE_GATEWAY,
  weight: 50
}];
if (!_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.RuntimeInfo.protocol || _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.RuntimeInfo.protocol && !_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.RuntimeInfo.protocol.startsWith('http')) {
  RANDOM_IPFS_GATEWAY_SETTING.push({
    provider: IPFS_FLEEK,
    weight: 4
  });
  RANDOM_IPFS_GATEWAY_SETTING.push({
    provider: IPFS_GATEWAY_4EVERLAND,
    weight: 2
  });
  RANDOM_IPFS_GATEWAY_SETTING.push({
    provider: IPFS_W3S_LINK,
    weight: 1
  });
}
const RANDOM_IPFS_GATEWAY_TOTAL_WEIGHT = RANDOM_IPFS_GATEWAY_SETTING.reduce((value, item) => value + item.weight, 0);
function getRandomIpfsGateway() {
  const weighedItems = [];
  let currentItem = 0;
  while (currentItem < RANDOM_IPFS_GATEWAY_SETTING.length) {
    for (let i = 0; i < RANDOM_IPFS_GATEWAY_SETTING[currentItem].weight; i++) {
      weighedItems[weighedItems.length] = RANDOM_IPFS_GATEWAY_SETTING[currentItem].provider;
    }
    currentItem++;
  }
  return weighedItems[Math.floor(Math.random() * RANDOM_IPFS_GATEWAY_TOTAL_WEIGHT)];
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/evm_nft/index.ts":
/*!***********************************************************!*\
  !*** ../extension-base/src/koni/api/nft/evm_nft/index.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EvmNftApi": () => (/* binding */ EvmNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/config */ "../extension-base/src/koni/api/nft/config.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/helper */ "../extension-base/src/services/chain-service/helper/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0









class EvmNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__.BaseNftApi {
  evmContracts = [];
  constructor(evmApi, addresses, chain) {
    super(chain, undefined, addresses);
    this.evmApi = evmApi;
    this.isEthereum = true;
  }
  setSmartContractNfts(evmContracts) {
    this.evmContracts = evmContracts;
  }
  parseUrl(input) {
    if (!input) {
      return undefined;
    }
    if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.isUrl)(input)) {
      return input;
    }
    if (input.includes('ipfs://')) {
      return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.getRandomIpfsGateway)() + input.split('ipfs://')[1];
    }
    return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.getRandomIpfsGateway)() + input.split('ipfs://ipfs/')[1];
  }
  parseMetadata(data) {
    const traitList = data.traits ? data.traits : data.attributes;
    const propertiesMap = {};
    if (traitList) {
      traitList.forEach(traitMap => {
        propertiesMap[traitMap.trait_type] = {
          value: traitMap.value
          // rarity: traitMap.trait_count / itemTotal
        };
      });
    }

    // extra fields
    if (data.dna) {
      propertiesMap.dna = {
        value: data.dna
      };
    }

    // if (data.compiler) {
    //   propertiesMap.compiler = {
    //     value: data.compiler as string
    //   };
    // }

    return {
      name: data.name,
      image: data.image_url ? this.parseUrl(data.image_url) : this.parseUrl(data.image),
      description: data.description,
      properties: propertiesMap,
      externalUrl: data.external_url,
      chain: this.chain
    };
  }
  async getItemsByCollection(tokenInfo, collectionName, nftParams) {
    if (!this.evmApi) {
      return;
    }
    const smartContract = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._getContractAddressOfToken)(tokenInfo);

    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-assignment
    const contract = new this.evmApi.api.eth.Contract(_subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_5__._ERC721_ABI, smartContract);
    let ownItem = false;
    let collectionImage;
    const nftOwnerMap = {};
    await Promise.all(this.addresses.map(async address => {
      if (!(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__.isEthereumAddress)(address)) {
        return;
      }
      const nftIds = [];

      // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
      const balance = await contract.methods.balanceOf(address).call();
      if (Number(balance) === 0) {
        return;
      }
      const itemIndexes = [];
      for (let i = 0; i < Number(balance); i++) {
        itemIndexes.push(i);
      }
      try {
        await Promise.all(itemIndexes.map(async i => {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
          const tokenId = await contract.methods.tokenOfOwnerByIndex(address, i).call();
          // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
          const tokenURI = await contract.methods.tokenURI(tokenId).call();
          const detailUrl = this.parseUrl(tokenURI);
          const nftId = tokenId.toString();
          nftIds.push(nftId);
          if (detailUrl) {
            try {
              const resp = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(detailUrl);
              const itemDetail = resp && resp.ok && (await resp.json());
              if (!itemDetail) {
                return;
              }
              const parsedItem = this.parseMetadata(itemDetail);
              parsedItem.collectionId = smartContract;
              parsedItem.id = nftId;
              parsedItem.owner = address;
              parsedItem.type = _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_7__._AssetType.ERC721;
              parsedItem.originAsset = tokenInfo.slug;
              if (parsedItem) {
                if (parsedItem.image) {
                  collectionImage = parsedItem.image;
                }
                nftParams.updateItem(this.chain, parsedItem, address);
                ownItem = true;
              }
            } catch (e) {
              console.error(`${this.chain}`, e);
            }
          }
        }));
        nftOwnerMap[address] = nftIds;
      } catch (e) {
        console.error(`${this.chain}`, e);
      }
    }));
    if (ownItem) {
      const nftCollection = {
        collectionId: smartContract,
        collectionName,
        image: collectionImage || undefined,
        chain: this.chain,
        originAsset: tokenInfo.slug
      };
      nftParams.updateCollection(this.chain, nftCollection);
    }
  }
  async handleNfts(params) {
    if (!this.evmContracts || this.evmContracts.length === 0) {
      return;
    }
    await Promise.all(this.evmContracts.map(async tokenInfo => {
      return await this.getItemsByCollection(tokenInfo, tokenInfo.name, params);
    }));
  }
  async fetchNfts(params) {
    try {
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/index.ts":
/*!***************************************************!*\
  !*** ../extension-base/src/koni/api/nft/index.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NftHandler": () => (/* binding */ NftHandler)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_acala_nft__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/acala_nft */ "../extension-base/src/koni/api/nft/acala_nft/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_bit_country__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/bit.country */ "../extension-base/src/koni/api/nft/bit.country/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_evm_nft__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/evm_nft */ "../extension-base/src/koni/api/nft/evm_nft/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_karura_nft__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/karura_nft */ "../extension-base/src/koni/api/nft/karura_nft/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_rmrk_nft__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/rmrk_nft */ "../extension-base/src/koni/api/nft/rmrk_nft/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_statemine_nft__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/statemine_nft */ "../extension-base/src/koni/api/nft/statemine_nft/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_unique_nft__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/unique_nft */ "../extension-base/src/koni/api/nft/unique_nft/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_vara_nft__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/vara_nft */ "../extension-base/src/koni/api/nft/vara_nft/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_wasm_nft__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/wasm_nft */ "../extension-base/src/koni/api/nft/wasm_nft/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _statemint_nft__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./statemint_nft */ "../extension-base/src/koni/api/nft/statemint_nft/index.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0














function createSubstrateNftApi(chain, substrateApi, addresses) {
  const [substrateAddresses] = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.categoryAddresses)(addresses);
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._NFT_CHAIN_GROUP.acala.includes(chain)) {
    return new _subwallet_extension_base_koni_api_nft_acala_nft__WEBPACK_IMPORTED_MODULE_2__.AcalaNftApi(substrateApi, substrateAddresses, chain);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._NFT_CHAIN_GROUP.karura.includes(chain)) {
    return new _subwallet_extension_base_koni_api_nft_karura_nft__WEBPACK_IMPORTED_MODULE_3__.KaruraNftApi(substrateApi, substrateAddresses, chain);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._NFT_CHAIN_GROUP.rmrk.includes(chain)) {
    return new _subwallet_extension_base_koni_api_nft_rmrk_nft__WEBPACK_IMPORTED_MODULE_4__.RmrkNftApi(substrateAddresses, chain);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._NFT_CHAIN_GROUP.statemine.includes(chain)) {
    return new _subwallet_extension_base_koni_api_nft_statemine_nft__WEBPACK_IMPORTED_MODULE_5__["default"](substrateApi, substrateAddresses, chain);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._NFT_CHAIN_GROUP.statemint.includes(chain)) {
    return new _statemint_nft__WEBPACK_IMPORTED_MODULE_6__["default"](substrateApi, substrateAddresses, chain);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._NFT_CHAIN_GROUP.unique_network.includes(chain)) {
    return new _subwallet_extension_base_koni_api_nft_unique_nft__WEBPACK_IMPORTED_MODULE_7__["default"](substrateApi, substrateAddresses, chain);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._NFT_CHAIN_GROUP.bitcountry.includes(chain)) {
    return new _subwallet_extension_base_koni_api_nft_bit_country__WEBPACK_IMPORTED_MODULE_8__.BitCountryNftApi(substrateApi, substrateAddresses, chain);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._NFT_CHAIN_GROUP.vara.includes(chain)) {
    return new _subwallet_extension_base_koni_api_nft_vara_nft__WEBPACK_IMPORTED_MODULE_9__.VaraNftApi(chain, substrateAddresses);
  }
  return null;
}
function createWasmNftApi(chain, apiProps, addresses) {
  const [substrateAddresses] = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.categoryAddresses)(addresses);
  return new _subwallet_extension_base_koni_api_nft_wasm_nft__WEBPACK_IMPORTED_MODULE_10__.WasmNftApi(apiProps, substrateAddresses, chain);
}
function createWeb3NftApi(chain, evmApi, addresses) {
  const [, evmAddresses] = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.categoryAddresses)(addresses);
  return new _subwallet_extension_base_koni_api_nft_evm_nft__WEBPACK_IMPORTED_MODULE_11__.EvmNftApi(evmApi, evmAddresses, chain);
}
class NftHandler {
  // General settings
  chainInfoMap = {};
  addresses = [];
  smartContractNfts = [];

  // Provider API needed
  substrateApiMap = {};
  evmApiMap = {};

  // Logic handling
  handlers = []; // 1 chain can have multiple handlers (to support multiple token standards)
  total = 0;
  needSetupApi = true;
  setChainInfoMap(chainInfoMap) {
    this.chainInfoMap = chainInfoMap;
    this.needSetupApi = true;
  }
  setWeb3ApiMap(web3ApiMap) {
    this.evmApiMap = web3ApiMap;
    this.needSetupApi = true;
  }
  setDotSamaApiMap(dotSamaAPIMap) {
    this.substrateApiMap = dotSamaAPIMap;
    this.needSetupApi = true;
  }
  setAddresses(addresses) {
    this.addresses = addresses;
    const [substrateAddresses, evmAddresses] = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.categoryAddresses)(addresses);
    for (const handler of this.handlers) {
      const useAddresses = handler.isEthereum ? evmAddresses : substrateAddresses;
      handler.setAddresses(useAddresses);
    }
  }
  setupNftContracts(smartContractNfts) {
    this.smartContractNfts = smartContractNfts;
    for (const handler of this.handlers) {
      if (handler instanceof _subwallet_extension_base_koni_api_nft_evm_nft__WEBPACK_IMPORTED_MODULE_11__.EvmNftApi || handler instanceof _subwallet_extension_base_koni_api_nft_wasm_nft__WEBPACK_IMPORTED_MODULE_10__.WasmNftApi) {
        const filteredNfts = [];
        for (const nft of smartContractNfts) {
          if (nft.originChain === handler.chain) {
            filteredNfts.push(nft);
          }
        }
        handler.setSmartContractNfts(filteredNfts);
      }
    }
  }
  setupApi() {
    try {
      if (this.needSetupApi) {
        // setup connections for first time use
        this.handlers = [];
        const [substrateAddresses, evmAddresses] = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.categoryAddresses)(this.addresses);
        Object.entries(this.chainInfoMap).forEach(([chain, chainInfo]) => {
          if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_12__._isChainSupportNativeNft)(chainInfo)) {
            if (this.substrateApiMap[chain]) {
              const handler = createSubstrateNftApi(chain, this.substrateApiMap[chain], substrateAddresses);
              if (handler) {
                this.handlers.push(handler);
              }
            }
          }
          if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_12__._isChainSupportEvmNft)(chainInfo)) {
            if (this.evmApiMap[chain]) {
              const handler = createWeb3NftApi(chain, this.evmApiMap[chain], evmAddresses);
              if (handler) {
                this.handlers.push(handler);
              }
            }
          }
          if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_12__._isChainSupportWasmNft)(chainInfo)) {
            if (this.substrateApiMap[chain]) {
              const handler = createWasmNftApi(chain, this.substrateApiMap[chain], substrateAddresses);
              if (handler && !this.handlers.includes(handler)) {
                this.handlers.push(handler);
              }
            }
          }
        });
        this.needSetupApi = false;
      }
    } catch (e) {
      console.error(e);
    }
  }
  async handleNfts(nftContracts, updateItem, updateCollection) {
    this.setupApi();
    this.setupNftContracts(nftContracts);
    await Promise.all(this.handlers.map(async handler => {
      await handler.fetchNfts({
        updateItem,
        updateCollection
      });
    }));
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/karura_nft/index.ts":
/*!**************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/karura_nft/index.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KaruraNftApi": () => (/* binding */ KaruraNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/config */ "../extension-base/src/koni/api/nft/config.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0





class KaruraNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__.BaseNftApi {
  // eslint-disable-next-line no-useless-constructor
  constructor(api, addresses, chain) {
    super(chain, api, addresses);
  }
  parseUrl(input) {
    if (!input || input.length === 0) {
      return undefined;
    }
    if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.isUrl)(input)) {
      return input;
    }
    if (!input.includes('ipfs://')) {
      return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.getRandomIpfsGateway)() + input;
    }
    return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.getRandomIpfsGateway)() + input.split('ipfs://')[1];
  }

  /**
   * Retrieve id of NFTs
   *
   * @returns the array of NFT Ids
   * @param addresses
   */
  async getNfts(addresses) {
    if (!this.substrateApi) {
      return [];
    }
    const accountAssets = {};
    await Promise.all(addresses.map(async address => {
      // @ts-ignore
      const resp = await this.substrateApi.api.query.ormlNFT.tokensByOwner.keys(address);
      if (address in accountAssets) {
        accountAssets[address].concat(resp);
      } else {
        accountAssets[address] = resp;
      }
    }));
    const assetIds = [];
    Object.entries(accountAssets).forEach(([owner, rawData]) => {
      for (const key of rawData) {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
        const data = key.toHuman();
        assetIds.push({
          classId: data[1],
          tokenId: this.parseTokenId(data[2]),
          owner
        });
      }
    });
    return assetIds;
  }
  async getCollectionDetails(collectionId) {
    if (!this.substrateApi) {
      return null;
    }
    const metadataCollection = (await this.substrateApi.api.query.ormlNFT.classes(collectionId)).toHuman();
    if (!(metadataCollection !== null && metadataCollection !== void 0 && metadataCollection.metadata)) {
      return null;
    }
    const data = await getKaruraMetadata(metadataCollection === null || metadataCollection === void 0 ? void 0 : metadataCollection.metadata);
    return {
      ...data,
      image: this.parseUrl(data.image)
    };
  }
  async getTokenDetails(assetId) {
    if (!this.substrateApi) {
      return null;
    }
    return (await this.substrateApi.api.query.ormlNFT.tokens(assetId.classId, assetId.tokenId)).toHuman();
  }
  async handleNft(address, params) {
    // const start = performance.now();
    const assetIds = await this.getNfts([address]);
    try {
      if (!assetIds || assetIds.length === 0) {
        return;
      }
      const collectionIds = [];
      const nftIds = [];
      await Promise.all(assetIds.map(async assetId => {
        const parsedClassId = this.parseTokenId(assetId.classId);
        const parsedTokenId = this.parseTokenId(assetId.tokenId);
        if (!collectionIds.includes(parsedClassId)) {
          collectionIds.push(parsedClassId);
        }
        nftIds.push(parsedTokenId);
        const [tokenInfo, collectionMeta] = await Promise.all([this.getTokenDetails(assetId), this.getCollectionDetails(parseInt(parsedClassId))]);
        const parsedNft = {
          id: parsedTokenId,
          name: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.name,
          description: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.description,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
          image: tokenInfo && tokenInfo.image ? this.parseUrl(tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.image) : collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.image,
          collectionId: parsedClassId,
          chain: this.chain,
          owner: assetId.owner
        };
        const parsedCollection = {
          collectionId: parsedClassId,
          chain: this.chain,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
          collectionName: collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.name,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
          image: collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.image
        };
        params.updateItem(this.chain, parsedNft, address);
        params.updateCollection(this.chain, parsedCollection);
      }));
    } catch (e) {
      console.error(`${this.chain}`, e);
    }
  }
  async handleNfts(params) {
    await Promise.all(this.addresses.map(address => this.handleNft(address, params)));
  }
  async fetchNfts(params) {
    try {
      await this.connect();
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
}
const getKaruraMetadata = metadataUrl => {
  let url = metadataUrl;
  if (!metadataUrl) {
    return null;
  }
  url = (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_3__.getRandomIpfsGateway)() + metadataUrl + '/azero_domain_registry_abi.json';
  return cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url, {
    method: 'GET',
    headers: {
      'Content-Type': 'application/json'
    }
  }).then(res => res.json());
};

/***/ }),

/***/ "../extension-base/src/koni/api/nft/nft.ts":
/*!*************************************************!*\
  !*** ../extension-base/src/koni/api/nft/nft.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BaseNftApi": () => (/* binding */ BaseNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/config */ "../extension-base/src/koni/api/nft/config.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class BaseNftApi {
  chain = '';
  substrateApi = null;
  evmApi = null;
  data = [];
  total = 0;
  addresses = [];
  isEthereum = false;
  constructor(chain, substrateApi, addresses, evmApi) {
    if (substrateApi) {
      this.substrateApi = substrateApi;
    }
    if (addresses) {
      this.addresses = addresses;
    }
    this.chain = chain;
    if (evmApi) {
      this.evmApi = evmApi;
    }
  }
  async connect() {
    var _this$substrateApi;
    if (!((_this$substrateApi = this.substrateApi) !== null && _this$substrateApi !== void 0 && _this$substrateApi.isApiConnected)) {
      var _this$substrateApi2;
      this.substrateApi = await ((_this$substrateApi2 = this.substrateApi) === null || _this$substrateApi2 === void 0 ? void 0 : _this$substrateApi2.isReady);
    }
  }
  recoverConnection() {
    var _this$substrateApi3;
    if (!((_this$substrateApi3 = this.substrateApi) !== null && _this$substrateApi3 !== void 0 && _this$substrateApi3.isApiConnected)) {
      var _this$substrateApi4;
      ((_this$substrateApi4 = this.substrateApi) === null || _this$substrateApi4 === void 0 ? void 0 : _this$substrateApi4.recoverConnect) && this.substrateApi.recoverConnect();
    }
  }
  getSubstrateApi() {
    return this.substrateApi;
  }
  getChain() {
    return this.chain;
  }
  getTotal() {
    return this.total;
  }
  getData() {
    return this.data;
  }
  setSubstrateApi(api) {
    this.substrateApi = api;
  }
  setChain(chain) {
    this.chain = chain;
  }
  setAddresses(addresses) {
    this.addresses = addresses;
  }
  parseTokenId(tokenId) {
    if (tokenId.includes(',')) {
      return tokenId.replace(',', '');
    }
    return tokenId;
  }
  parseUrl(input) {
    if (!input || input.length === 0) {
      return undefined;
    }
    if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.isUrl)(input)) {
      return input;
    }
    if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.isUrl)(input) || input.includes('https://') || input.includes('http')) {
      return input;
    }
    if (input.startsWith('/ipfs/')) {
      return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.getRandomIpfsGateway)() + input.split('/ipfs/')[1];
    }
    if (!input.includes('ipfs://') && !input.includes('ipfs://ipfs/')) {
      // just the IPFS hash
      return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.getRandomIpfsGateway)() + input;
    }
    if (input.includes('ipfs://') && !input.includes('ipfs://ipfs/')) {
      // starts with ipfs://
      return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.getRandomIpfsGateway)() + input.split('ipfs://')[1];
    }
    return (0,_subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.getRandomIpfsGateway)() + input.split('ipfs://ipfs/')[1]; // starts with ipfs://ipfs/
  }

  // Subclass implements this function to parse data into prop result
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/rmrk_nft/index.ts":
/*!************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/rmrk_nft/index.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RmrkNftApi": () => (/* binding */ RmrkNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "../extension-base/src/koni/api/nft/config.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0






var RMRK_SOURCE;
(function (RMRK_SOURCE) {
  RMRK_SOURCE["BIRD_KANARIA"] = "bird_kanaria";
  RMRK_SOURCE["KANARIA"] = "kanaria";
  RMRK_SOURCE["SINGULAR_V1"] = "singular_v1";
  RMRK_SOURCE["SINGULAR_V2"] = "singular_v2";
})(RMRK_SOURCE || (RMRK_SOURCE = {}));
const KANBIRD_KEYWORD = 'KANBIRD';
class RmrkNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__.BaseNftApi {
  constructor(addresses, chain) {
    super(chain, null, addresses);
  }

  // override parseUrl (input: string): string | undefined {
  //   if (!input || input.length === 0) {
  //     return undefined;
  //   }
  //
  //   if (isUrl(input) || input.includes('https://') || input.includes('http')) {
  //     return input;
  //   }
  //
  //   if (!input.includes('ipfs://ipfs/')) {
  //     return getRandomIpfsGateway() + input;
  //   }
  //
  //   return getRandomIpfsGateway() + input.split('ipfs://ipfs/')[1];
  // }

  async getMetadata(metadataUrl) {
    let url = metadataUrl;
    if (!(0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.isUrl)(metadataUrl)) {
      url = this.parseUrl(metadataUrl);
      if (!url || url.length === 0) {
        return undefined;
      }
    }
    return await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url, {
      method: 'GET'
    }).then(res => res.json());
  }
  async getAllByAccount(account) {
    const fetchUrls = [{
      url: _config__WEBPACK_IMPORTED_MODULE_3__.SINGULAR_V2_ENDPOINT + account,
      source: RMRK_SOURCE.SINGULAR_V2
    }];
    let data = [];
    await Promise.all(fetchUrls.map(async ({
      source,
      url
    }) => {
      let _data = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url, {
        method: 'GET'
      }).then(res => res.json());
      _data = _data.map(item => {
        let nftSource = source;
        if (item.collectionId.includes(KANBIRD_KEYWORD)) {
          nftSource = RMRK_SOURCE.BIRD_KANARIA;
        }
        return {
          ...item,
          source: nftSource
        };
      });
      data = data.concat(_data);
    }));
    const nfts = [];
    await Promise.all(data.map(async item => {
      try {
        const primaryResource = item.primaryResource ? item.primaryResource : null;
        const metadataUri = primaryResource && primaryResource.metadata ? primaryResource.metadata : item.metadata;
        const nftMetadata = await this.getMetadata(metadataUri);
        if (item.source === RMRK_SOURCE.BIRD_KANARIA) {
          nfts.push({
            ...item,
            metadata: nftMetadata,
            owner: account
          });
        } else if (item.source === RMRK_SOURCE.KANARIA) {
          nfts.push({
            ...item,
            metadata: {
              ...nftMetadata,
              image: this.parseUrl(nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.image)
            },
            owner: account
          });
        } else if (item.source === RMRK_SOURCE.SINGULAR_V1) {
          nfts.push({
            ...item,
            metadata: {
              description: nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.description,
              name: nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.name,
              attributes: nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.attributes,
              animation_url: this.parseUrl(nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.animation_url),
              image: this.parseUrl(nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.image)
            },
            owner: account
          });
        } else if (item.source === RMRK_SOURCE.SINGULAR_V2) {
          const id = item.id;
          if (!id.toLowerCase().includes(KANBIRD_KEYWORD)) {
            // excludes kanaria bird, already handled above
            nfts.push({
              ...item,
              metadata: {
                description: nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.description,
                name: nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.name,
                attributes: nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.attributes,
                properties: nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.properties,
                animation_url: this.parseUrl(nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.animation_url),
                image: this.parseUrl(nftMetadata === null || nftMetadata === void 0 ? void 0 : nftMetadata.mediaUri)
              },
              owner: account
            });
          }
        }
      } catch (e) {
        console.log('error fetching RMRK NFT', e);
      }
    }));
    return nfts;
  }
  async handleNft(address, params) {
    // const start = performance.now();

    let allNfts = [];
    const allCollections = [];
    try {
      const kusamaAddress = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.reformatAddress)(address, 2);
      allNfts = await this.getAllByAccount(kusamaAddress);
      if (allNfts.length <= 0) {
        return;
      }
      const collectionInfoUrl = [];
      for (const item of allNfts) {
        var _item$metadata, _item$metadata2, _item$metadata3;
        const parsedItem = {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
          id: item === null || item === void 0 ? void 0 : item.id,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
          name: item === null || item === void 0 ? void 0 : (_item$metadata = item.metadata) === null || _item$metadata === void 0 ? void 0 : _item$metadata.name,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-argument
          image: this.parseUrl(item.image ? item.image : item.metadata.image ? item.metadata.image : item.metadata.animation_url),
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
          description: item === null || item === void 0 ? void 0 : (_item$metadata2 = item.metadata) === null || _item$metadata2 === void 0 ? void 0 : _item$metadata2.description,
          externalUrl: item === null || item === void 0 ? void 0 : item.external_url,
          rarity: item === null || item === void 0 ? void 0 : item.metadata_rarity,
          collectionId: item === null || item === void 0 ? void 0 : item.collectionId,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
          properties: item === null || item === void 0 ? void 0 : (_item$metadata3 = item.metadata) === null || _item$metadata3 === void 0 ? void 0 : _item$metadata3.properties,
          chain: this.chain,
          rmrk_ver: item.source && item.source === RMRK_SOURCE.SINGULAR_V1 ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.RMRK_VER.VER_1 : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.RMRK_VER.VER_2,
          owner: item.owner
        };

        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
        params.updateItem(this.chain, parsedItem, address);
        let url = '';
        if (item.source === RMRK_SOURCE.SINGULAR_V1) {
          url = _config__WEBPACK_IMPORTED_MODULE_3__.SINGULAR_V1_COLLECTION_ENDPOINT + item.collectionId;
        } else {
          url = _config__WEBPACK_IMPORTED_MODULE_3__.SINGULAR_V2_COLLECTION_ENDPOINT + item.collectionId;
        }
        if (!collectionInfoUrl.includes(url)) {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
          allCollections.push({
            chain: '',
            collectionId: item.collectionId
          });
          collectionInfoUrl.push(url.replace(' ', '%20'));
        }
      }
      const allCollectionMetaUrl = [];
      await Promise.all(collectionInfoUrl.map(async url => {
        try {
          const data = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url, {
            method: 'GET'
          }).then(resp => resp.json());
          const result = data[0];
          if (result && 'metadata' in result) {
            allCollectionMetaUrl.push({
              url: this.parseUrl(result === null || result === void 0 ? void 0 : result.metadata),
              id: result === null || result === void 0 ? void 0 : result.id
            });
          }
          if (data.length > 0) {
            return result;
          } else {
            return {};
          }
        } catch (e) {
          return {};
        }
      }));
      const allCollectionMeta = {};
      await Promise.all(allCollectionMetaUrl.map(async item => {
        let data = {};
        try {
          if (item.url) {
            data = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(item === null || item === void 0 ? void 0 : item.url, {
              method: 'GET'
            }).then(resp => resp.json());
          }
          if ('mediaUri' in data) {
            // rmrk v2.0
            // @ts-ignore
            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
            allCollectionMeta[item === null || item === void 0 ? void 0 : item.id] = {
              ...data,
              image: data.mediaUri
            };
          } else {
            allCollectionMeta[item === null || item === void 0 ? void 0 : item.id] = {
              ...data
            };
          }
        } catch (e) {
          console.error(item.url, e);
        }
      }));
      allCollections.forEach(item => {
        const parsedCollection = {
          collectionId: item.collectionId,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
          collectionName: allCollectionMeta[item.collectionId] ? allCollectionMeta[item.collectionId].name : null,
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
          image: allCollectionMeta[item.collectionId] ? this.parseUrl(allCollectionMeta[item.collectionId].image) : null,
          chain: this.chain
        };
        const nftIds = [];
        allNfts.forEach(nft => {
          const nftCollectionId = nft === null || nft === void 0 ? void 0 : nft.collectionId;
          if (nftCollectionId === item.collectionId) {
            nftIds.push(nft === null || nft === void 0 ? void 0 : nft.id);
          }
        });
        params.updateCollection(this.chain, parsedCollection);
      });
    } catch (e) {
      console.error(`${this.chain}`, e);
    }
  }
  async handleNfts(params) {
    await Promise.all(this.addresses.map(address => this.handleNft(address, params)));
  }
  async fetchNfts(params) {
    try {
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/statemine_nft/index.ts":
/*!*****************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/statemine_nft/index.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ StatemineNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0




class StatemineNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__.BaseNftApi {
  // eslint-disable-next-line no-useless-constructor
  constructor(api, addresses, chain) {
    super(chain, api, addresses);
  }
  getMetadata(metadataUrl) {
    let url = metadataUrl;
    if (!(0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.isUrl)(metadataUrl)) {
      url = this.parseUrl(metadataUrl);
      if (!url || url.length === 0) {
        return undefined;
      }
    }
    return cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json'
      }
    }).then(res => res.json());
  }

  /**
   * Retrieve id of NFTs
   *
   * @returns the array of NFT Ids
   * @param addresses
   */
  async getNfts(addresses) {
    if (!this.substrateApi) {
      return [];
    }
    const assetIds = [];
    await Promise.all(addresses.map(async address => {
      // @ts-ignore
      const resp = await this.substrateApi.api.query.uniques.account.keys(address);
      if (resp) {
        for (const key of resp) {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
          const data = key.toHuman();
          assetIds.push({
            classId: data[1],
            tokenId: this.parseTokenId(data[2])
          });
        }
      }
    }));
    return assetIds;
  }
  async getTokenDetails(assetId) {
    if (!this.substrateApi) {
      return null;
    }
    const {
      classId,
      tokenId
    } = assetId;
    const metadataNft = (await this.substrateApi.api.query.uniques.instanceMetadataOf(this.parseTokenId(classId), this.parseTokenId(tokenId))).toHuman();
    if (!(metadataNft !== null && metadataNft !== void 0 && metadataNft.data)) {
      return null;
    }

    // @ts-ignore
    return this.getMetadata(metadataNft === null || metadataNft === void 0 ? void 0 : metadataNft.data);
  }
  async getCollectionDetail(collectionId) {
    if (!this.substrateApi) {
      return null;
    }
    const collectionMetadata = (await this.substrateApi.api.query.uniques.classMetadataOf(collectionId)).toHuman();
    if (!(collectionMetadata !== null && collectionMetadata !== void 0 && collectionMetadata.data)) {
      return null;
    }

    // @ts-ignore
    return this.getMetadata(collectionMetadata === null || collectionMetadata === void 0 ? void 0 : collectionMetadata.data);
  }
  async handleNft(address, params) {
    // const start = performance.now();

    const assetIds = await this.getNfts([address]);
    try {
      if (!assetIds || assetIds.length === 0) {
        return;
      }
      const collectionIds = [];
      const nftIds = [];
      await Promise.all(assetIds.map(async assetId => {
        const parsedClassId = this.parseTokenId(assetId.classId);
        const parsedTokenId = this.parseTokenId(assetId.tokenId);
        if (!collectionIds.includes(parsedClassId)) {
          collectionIds.push(parsedClassId);
        }
        nftIds.push(parsedTokenId);
        const [tokenInfo, collectionMeta] = await Promise.all([this.getTokenDetails(assetId), this.getCollectionDetail(parseInt(parsedClassId))]);
        const parsedNft = {
          id: parsedTokenId,
          name: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.name,
          description: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.description,
          image: tokenInfo && tokenInfo.image ? this.parseUrl(tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.image) : undefined,
          collectionId: this.parseTokenId(parsedClassId),
          chain: this.chain,
          owner: address
        };
        params.updateItem(this.chain, parsedNft, address);
        const parsedCollection = {
          collectionId: parsedClassId,
          chain: this.chain,
          collectionName: collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.name,
          image: collectionMeta && collectionMeta.image ? this.parseUrl(collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.image) : undefined
        };
        params.updateCollection(this.chain, parsedCollection);
      }));
    } catch (e) {
      console.error(`${this.chain}`, e);
    }
  }
  async handleNfts(params) {
    await Promise.all(this.addresses.map(address => this.handleNft(address, params)));
  }
  async fetchNfts(params) {
    try {
      await this.connect();
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/statemint_nft/index.ts":
/*!*****************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/statemint_nft/index.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ StatemintNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0




class StatemintNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__.BaseNftApi {
  // eslint-disable-next-line no-useless-constructor
  constructor(api, addresses, chain) {
    super(chain, api, addresses);
  }
  getMetadata(metadataUrl) {
    let url = metadataUrl;
    if (!(0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.isUrl)(metadataUrl)) {
      url = this.parseUrl(metadataUrl);
      if (!url || url.length === 0) {
        return undefined;
      }
    }
    return cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json'
      }
    }).then(res => res.json());
  }

  /**
   * Retrieve id of NFTs
   *
   * @returns the array of NFT Ids
   * @param addresses
   */
  async getNfts(addresses) {
    if (!this.substrateApi) {
      return [];
    }
    const assetIds = [];
    await Promise.all(addresses.map(async address => {
      // @ts-ignore
      const resp = await this.substrateApi.api.query.nfts.account.keys(address);
      if (resp) {
        for (const key of resp) {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
          const data = key.toHuman();
          assetIds.push({
            classId: data[1],
            tokenId: this.parseTokenId(data[2])
          });
        }
      }
    }));
    return assetIds;
  }
  async getTokenDetails(assetId) {
    if (!this.substrateApi) {
      return null;
    }
    const {
      classId,
      tokenId
    } = assetId;
    const metadataNft = (await this.substrateApi.api.query.nfts.itemMetadataOf(this.parseTokenId(classId), this.parseTokenId(tokenId))).toHuman();
    if (!(metadataNft !== null && metadataNft !== void 0 && metadataNft.data)) {
      return null;
    }

    // @ts-ignore
    return this.getMetadata(metadataNft === null || metadataNft === void 0 ? void 0 : metadataNft.data);
  }
  async getCollectionDetail(collectionId) {
    if (!this.substrateApi) {
      return null;
    }
    const collectionMetadata = (await this.substrateApi.api.query.nfts.collectionMetadataOf(collectionId)).toHuman();
    if (!(collectionMetadata !== null && collectionMetadata !== void 0 && collectionMetadata.data)) {
      return null;
    }

    // @ts-ignore
    return this.getMetadata(collectionMetadata === null || collectionMetadata === void 0 ? void 0 : collectionMetadata.data);
  }
  async handleNft(address, params) {
    // const start = performance.now();

    const assetIds = await this.getNfts([address]);
    try {
      if (!assetIds || assetIds.length === 0) {
        return;
      }
      const collectionIds = [];
      const nftIds = [];
      await Promise.all(assetIds.map(async assetId => {
        const parsedClassId = this.parseTokenId(assetId.classId);
        const parsedTokenId = this.parseTokenId(assetId.tokenId);
        if (!collectionIds.includes(parsedClassId)) {
          collectionIds.push(parsedClassId);
        }
        nftIds.push(parsedTokenId);
        const [tokenInfo, collectionMeta] = await Promise.all([this.getTokenDetails(assetId), this.getCollectionDetail(parseInt(parsedClassId))]);
        const parsedNft = {
          id: parsedTokenId,
          name: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.name,
          description: tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.description,
          image: tokenInfo && tokenInfo.image ? this.parseUrl(tokenInfo === null || tokenInfo === void 0 ? void 0 : tokenInfo.image) : undefined,
          collectionId: this.parseTokenId(parsedClassId),
          chain: this.chain,
          owner: address
        };
        params.updateItem(this.chain, parsedNft, address);
        const parsedCollection = {
          collectionId: parsedClassId,
          chain: this.chain,
          collectionName: collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.name,
          image: collectionMeta && collectionMeta.image ? this.parseUrl(collectionMeta === null || collectionMeta === void 0 ? void 0 : collectionMeta.image) : undefined
        };
        params.updateCollection(this.chain, parsedCollection);
      }));
    } catch (e) {
      console.error(`${this.chain}`, e);
    }
  }
  async handleNfts(params) {
    await Promise.all(this.addresses.map(address => this.handleNft(address, params)));
  }
  async fetchNfts(params) {
    try {
      await this.connect();
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/transfer.ts":
/*!******************************************************!*\
  !*** ../extension-base/src/koni/api/nft/transfer.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "acalaGetExtrinsic": () => (/* binding */ acalaGetExtrinsic),
/* harmony export */   "getNftTransferExtrinsic": () => (/* binding */ getNftTransferExtrinsic),
/* harmony export */   "isRecipientSelf": () => (/* binding */ isRecipientSelf),
/* harmony export */   "quartzGetExtrinsic": () => (/* binding */ quartzGetExtrinsic),
/* harmony export */   "rmrkGetExtrinsic": () => (/* binding */ rmrkGetExtrinsic),
/* harmony export */   "statemineGetExtrinsic": () => (/* binding */ statemineGetExtrinsic),
/* harmony export */   "statemintGetExtrinsic": () => (/* binding */ statemintGetExtrinsic),
/* harmony export */   "uniqueGetExtrinsic": () => (/* binding */ uniqueGetExtrinsic)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/config */ "../extension-base/src/koni/api/nft/config.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



function isRecipientSelf(currentAddress, recipientAddress) {
  return (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(currentAddress, 1) === (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(recipientAddress, 1);
}
function acalaGetExtrinsic(substrateApi, senderAddress, recipientAddress, params) {
  try {
    const itemId = params.itemId;
    const collectionId = params.collectionId;
    return substrateApi.api.tx.nft.transfer(recipientAddress, [collectionId, itemId]);
  } catch (e) {
    console.error(e);
    return null;
  }
}
function rmrkGetExtrinsic(substrateApi, senderAddress, recipientAddress, params) {
  try {
    const remark = params.remark;
    if (!remark) {
      return null;
    }
    const parsedRemark = remark.concat(recipientAddress.replace(/\\s/g, ''));
    return substrateApi.api.tx.system.remark(parsedRemark);
  } catch (e) {
    console.error(e);
    return null;
  }
}
function uniqueGetExtrinsic(substrateApi, senderAddress, recipientAddress, params) {
  try {
    const itemId = params.itemId;
    const collectionId = params.collectionId;
    return substrateApi.api.tx.nft.transfer({
      Substrate: recipientAddress
    }, collectionId, itemId, 1);
  } catch (e) {
    console.error(e);
    return null;
  }
}
function quartzGetExtrinsic(substrateApi, senderAddress, recipientAddress, params) {
  try {
    const itemId = params.itemId;
    const collectionId = params.collectionId;
    return substrateApi.api.tx.unique.transfer({
      Substrate: recipientAddress
    }, collectionId, itemId, 1);
  } catch (e) {
    console.error(e);
    return null;
  }
}
function statemineGetExtrinsic(substrateApi, senderAddress, recipientAddress, params) {
  try {
    const itemId = params.itemId;
    const collectionId = params.collectionId;
    return substrateApi.api.tx.uniques.transfer(collectionId, itemId, recipientAddress);
  } catch (e) {
    console.error(e);
    return null;
  }
}
function statemintGetExtrinsic(substrateApi, senderAddress, recipientAddress, params) {
  try {
    const itemId = params.itemId;
    const collectionId = params.collectionId;
    return substrateApi.api.tx.nfts.transfer(collectionId, itemId, recipientAddress);
  } catch (e) {
    console.error(e);
    return null;
  }
}
function getNftTransferExtrinsic(networkKey, substrateApi, senderAddress, recipientAddress, params) {
  switch (networkKey) {
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.acala:
      return acalaGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.karura:
      return acalaGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.kusama:
      return rmrkGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.uniqueNft:
      return uniqueGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.quartz:
      return quartzGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.opal:
      return quartzGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.statemine:
      return statemineGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.statemint:
      return statemintGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.bitcountry:
      return acalaGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
    case _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_1__.SUPPORTED_TRANSFER_SUBSTRATE_CHAIN_NAME.pioneer:
      return acalaGetExtrinsic(substrateApi, senderAddress, recipientAddress, params);
  }
  return null;
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/unique_nft/index.ts":
/*!**************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/unique_nft/index.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ UniqueNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _protobuf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./protobuf */ "../extension-base/src/koni/api/nft/unique_nft/protobuf.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0




// deprecated
class UniqueNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_0__.BaseNftApi {
  // eslint-disable-next-line no-useless-constructor
  constructor(api, addresses, chain) {
    super(chain, api, addresses);
  }
  async getCollectionCount() {
    if (!this.substrateApi) {
      return 0;
    }
    return await this.substrateApi.api.query.nft.createdCollectionCount();
  }

  /**
    * Retrieve address of NFTs
    *
    * @param collectionId: Id of the collection
    * @param owner: address of account
    * @returns the array of NFTs
    */
  async getAddressTokens(collectionId, owner) {
    if (!this.substrateApi) {
      return;
    }
    return (await this.substrateApi.api.query.nft.addressTokens(collectionId, owner)).toJSON();
  }

  /**
   * Retrieve NFT image URL according to the collection offchain schema
   *
   * @param collection
   * @param tokenId: Token ID
   * @returns the URL of the token image
   */
  getNftImageUrl(collection, tokenId) {
    if (!this.substrateApi) {
      return;
    }
    let url = '';

    // Get schema version and off-chain schema
    if (!collection) {
      return;
    }
    const schemaVersion = collection.SchemaVersion;
    const offchainSchema = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.hexToStr)(collection.OffchainSchema);
    if (schemaVersion === 'ImageURL') {
      // Replace {id} with token ID
      url = offchainSchema;
      url = url.replace('{id}', `${tokenId}`);
    } else {
      // TBD: Query image URL from the RESTful service
    }
    return url;
  }

  /**
   * Retrieve and deserialize properties
   *
   *
   * @param collection
   * @param tokenId: Token ID
   * @param locale: Output locale (default is "en")
   * @param collectionId
   * @returns tokenData: Token data object
   */
  async getNftData(collection, tokenId, locale = 'en', collectionId) {
    if (!this.substrateApi) {
      return;
    }
    const schemaRead = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.hexToStr)(collection.ConstOnChainSchema);
    const token = (await this.substrateApi.api.query.nft.nftItemList(collectionId, tokenId)).toJSON();
    const nftProps = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.hexToUTF16)(token.ConstData);
    const properties = (0,_protobuf__WEBPACK_IMPORTED_MODULE_2__.deserializeNft)(schemaRead, nftProps, locale);
    let url = '';

    // Get schema version and off-chain schema
    if (!collection) {
      return;
    }
    const schemaVersion = collection.SchemaVersion;
    const offchainSchema = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.hexToStr)(collection.OffchainSchema);
    if (schemaVersion === 'ImageURL') {
      // Replace {id} with token ID
      url = offchainSchema;
      url = url.replace('{id}', `${tokenId}`);
    } else {
      // TBD: Query image URL from the RESTful service
    }
    return {
      owner: token.Owner,
      prefix: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.hexToStr)(collection.TokenPrefix),
      collectionName: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.utf16ToString)(collection.Name),
      collectionDescription: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.utf16ToString)(collection.Description),
      properties: properties,
      image: url
    };
  }
  async handleNft(address, params) {
    // const start = performance.now();

    const collectionCount = await this.getCollectionCount();
    const addressTokenDict = [];
    const nftMap = {};
    const collectionMap = {};
    const allCollectionId = [];
    try {
      for (let i = 0; i < collectionCount; i++) {
        for (const addr of [address]) {
          addressTokenDict.push({
            i,
            account: addr
          });
        }
      }
      await Promise.all(addressTokenDict.map(async item => {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
        const nftIds = await this.getAddressTokens(item.i, item.account);

        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        if (nftIds && nftIds.length > 0) {
          if (!allCollectionId.includes(item.i)) {
            allCollectionId.push(item.i);
          }
          for (const nftId of nftIds) {
            nftMap[nftId] = item.i;
          }
        }
      }));
      await Promise.all(allCollectionId.map(async collectionId => {
        const collectionIdStr = collectionId.toString();

        // @ts-ignore
        const collection = (await this.substrateApi.api.query.nft.collectionById(collectionId)).toJSON();
        collectionMap[collectionIdStr] = collection;
        const nftIds = Object.entries(nftMap).filter(item => item[1] === collectionId).map(item => item[0]);
        const parsedCollection = {
          collectionId: collectionIdStr,
          chain: this.chain
        };
        await Promise.all(nftIds.map(async nft => {
          const tokenId = nft;
          const imageUrl = this.getNftImageUrl(collection, tokenId);
          const tokenData = await this.getNftData(collection, tokenId, 'en', collectionId);
          if (tokenData && imageUrl) {
            const parsedItem = {
              id: tokenId,
              name: tokenData.prefix + '#' + tokenId,
              image: this.parseUrl(imageUrl),
              externalUrl: `https://unqnft.io/#/market/token-details?collectionId=${collectionId}&tokenId=${tokenId}`,
              collectionId: collectionIdStr,
              properties: tokenData.properties,
              rarity: '',
              chain: this.chain,
              owner: address
            };
            if (!parsedCollection.collectionName) {
              parsedCollection.collectionName = tokenData.collectionName;
              parsedCollection.image = this.parseUrl(tokenData.image);
            }
            params.updateItem(this.chain, parsedItem, address);
            params.updateCollection(this.chain, parsedCollection);
          }
        }));
      }));
    } catch (e) {
      console.error(`${this.chain}`, e);
    }
  }
  async handleNfts(params) {
    await Promise.all(this.addresses.map(address => this.handleNft(address, params)));
  }
  async fetchNfts(params) {
    try {
      await this.connect();
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/unique_nft/protobuf.ts":
/*!*****************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/unique_nft/protobuf.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deserializeNft": () => (/* binding */ deserializeNft)
/* harmony export */ });
/* harmony import */ var protobufjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! protobufjs */ "../../node_modules/protobufjs/index.js");
/* harmony import */ var protobufjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(protobufjs__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


function defineMessage(schema) {
  try {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
    return protobufjs__WEBPACK_IMPORTED_MODULE_0__.Root.fromJSON(JSON.parse(schema));
  } catch (e) {
    console.log('Error parsing JSON schema', e);
    return null;
  }
}
function convertEnumToString(value, key, NFTMeta, locale) {
  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
  let result = value;
  try {
    var _NFTMeta$fields$key, _NFTMeta$fields$key$r;
    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
    const options = NFTMeta === null || NFTMeta === void 0 ? void 0 : (_NFTMeta$fields$key = NFTMeta.fields[key]) === null || _NFTMeta$fields$key === void 0 ? void 0 : (_NFTMeta$fields$key$r = _NFTMeta$fields$key.resolvedType) === null || _NFTMeta$fields$key$r === void 0 ? void 0 : _NFTMeta$fields$key$r.options;
    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
    const valueJsonComment = options[value];
    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-assignment
    const translationObject = JSON.parse(valueJsonComment);

    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
    if (translationObject && translationObject[locale]) {
      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
      result = translationObject[locale];
    }
  } catch (e) {
    console.log('Error parsing schema when trying to convert enum to string: ', e);
  }

  // eslint-disable-next-line @typescript-eslint/no-unsafe-return
  return result;
}
const deserializeNft = (schema, buffer, locale) => {
  const root = defineMessage(schema);
  if (root === null) {
    return root;
  }

  // Obtain the message type
  const NFTMeta = root.lookupType('onChainMetaData.NFTMeta');

  // Decode a Uint8Array (browser) or Buffer (node) to a message
  const message = NFTMeta.decode(buffer);

  // Maybe convert the message back to a plain object
  const objectItem = NFTMeta.toObject(message, {
    arrays: true,
    // populates empty arrays (repeated fields) even if defaults=false
    bytes: String,
    // bytes as base64 encoded strings
    defaults: true,
    // includes default values
    enums: String,
    // enums as string names
    longs: String,
    // longs as strings (requires long.js)
    objects: true,
    // populates empty objects (map fields) even if defaults=false
    oneofs: true
  });
  for (const key in objectItem) {
    var _NFTMeta$fields$key2, _NFTMeta$fields$key2$, _NFTMeta$fields$key3, _NFTMeta$fields$key3$;
    // eslint-disable-next-line @typescript-eslint/ban-types
    if (NFTMeta !== null && NFTMeta !== void 0 && (_NFTMeta$fields$key2 = NFTMeta.fields[key]) !== null && _NFTMeta$fields$key2 !== void 0 && (_NFTMeta$fields$key2$ = _NFTMeta$fields$key2.resolvedType) !== null && _NFTMeta$fields$key2$ !== void 0 && _NFTMeta$fields$key2$.options && Object.keys(NFTMeta === null || NFTMeta === void 0 ? void 0 : (_NFTMeta$fields$key3 = NFTMeta.fields[key]) === null || _NFTMeta$fields$key3 === void 0 ? void 0 : (_NFTMeta$fields$key3$ = _NFTMeta$fields$key3.resolvedType) === null || _NFTMeta$fields$key3$ === void 0 ? void 0 : _NFTMeta$fields$key3$.options).length > 0) {
      if (Array.isArray(objectItem[key])) {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
        const item = objectItem[key];
        objectItem[key] = [];
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
        item.forEach(value => {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
          objectItem[key].push(convertEnumToString(value, key, NFTMeta, locale));
        });
      } else {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
        objectItem[key] = convertEnumToString(objectItem[key], key, NFTMeta, locale);
      }
    }
  }
  return objectItem;
};

/***/ }),

/***/ "../extension-base/src/koni/api/nft/vara_nft/index.ts":
/*!************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/vara_nft/index.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VaraNftApi": () => (/* binding */ VaraNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/config */ "../extension-base/src/koni/api/nft/config.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/hex/addPrefix.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/u8a/toHex.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/decode.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0






class VaraNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_1__.BaseNftApi {
  endpoint = _subwallet_extension_base_koni_api_nft_config__WEBPACK_IMPORTED_MODULE_2__.VARA_SCAN_ENDPOINT;

  // eslint-disable-next-line no-useless-constructor
  constructor(chain, addresses) {
    super(chain, undefined, addresses);
  }
  static parseNftRequest(publicKey) {
    return {
      // eslint-disable-next-line
      query: `
        query MyQuery {
          accountById(id: "${publicKey}") {
            id
            nfts {
              id
              mediaUrl
              name
              tokenId
              attribUrl
              description
              collection {
                id
                name
                description
              }
            }
          }
        }
      `
    };
  }

  // private static parseNftCollectionRequest (collectionId: string) {
  //   return {
  //     // eslint-disable-next-line
  //     query: `query MyQuery { collections(where: {collection_id: {_eq: \"${collectionId}\"}}) { collection_id name } }`
  //   };
  // }

  async getNftByAccount(address) {
    var _result$data, _result$data$accountB;
    const publicKey = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_3__.hexAddPrefix)((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_4__.u8aToHex)((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__.decodeAddress)(address)));
    const resp = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(this.endpoint, {
      method: 'post',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(VaraNftApi.parseNftRequest(publicKey))
    });
    const result = await resp.json();

    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
    return result === null || result === void 0 ? void 0 : (_result$data = result.data) === null || _result$data === void 0 ? void 0 : (_result$data$accountB = _result$data.accountById) === null || _result$data$accountB === void 0 ? void 0 : _result$data$accountB.nfts;
  }
  async handleNfts(params) {
    try {
      await Promise.all(this.addresses.map(async address => {
        const nfts = await this.getNftByAccount(address);
        for (const nft of nfts) {
          const parsedNft = {
            id: nft.tokenId,
            chain: this.chain,
            owner: address,
            name: nft.name,
            image: this.parseUrl(nft.mediaUrl),
            description: nft.description,
            collectionId: nft.collection.id
          };
          const parsedCollection = {
            collectionId: nft.collection.id,
            chain: this.chain,
            collectionName: nft.collection.name
          };
          params.updateItem(this.chain, parsedNft, address);
          params.updateCollection(this.chain, parsedCollection);
        }
      }));
    } catch (e) {
      console.error(`Failed to fetch ${this.chain} nft`, e);
    }
  }
  async fetchNfts(params) {
    try {
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/wasm_nft/index.ts":
/*!************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/wasm_nft/index.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WasmNftApi": () => (/* binding */ WasmNftApi)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_koni_api_dotsama_domain__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/dotsama/domain */ "../extension-base/src/koni/api/dotsama/domain.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/nft */ "../extension-base/src/koni/api/nft/nft.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/wasm_nft/utils */ "../extension-base/src/koni/api/nft/wasm_nft/utils.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm */ "../extension-base/src/koni/api/tokens/wasm/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm/utils */ "../extension-base/src/koni/api/tokens/wasm/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ "../../node_modules/axios/lib/axios.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0













// interface CollectionAttributes {
//   storedOnChain: boolean,
//   attributeList: string[] // list of attribute names
// }

async function isArtZeroFeaturedCollection(networkKey, contractAddress) {
  const timeout = new Promise(resolve => {
    const id = setTimeout(() => {
      clearTimeout(id);
      resolve(null);
    }, 3000);
  });
  const urlencoded = new URLSearchParams();
  urlencoded.append('collection_address', contractAddress);
  const collectionInfoPromise = new Promise(function (resolve) {
    cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()((0,_subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__.collectionApiFromArtZero)(networkKey), {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: urlencoded
    }).then(resp => {
      resolve(resp.json());
    }).catch(console.error);
  });
  const collectionInfo = await Promise.race([timeout, collectionInfoPromise]);

  // @ts-ignore
  return collectionInfo !== null && (collectionInfo === null || collectionInfo === void 0 ? void 0 : collectionInfo.status) !== 'FAILED';
}
class WasmNftApi extends _subwallet_extension_base_koni_api_nft_nft__WEBPACK_IMPORTED_MODULE_2__.BaseNftApi {
  wasmContracts = [];
  constructor(api, addresses, chain) {
    super(chain, api, addresses);
  }
  setSmartContractNfts(wasmContracts) {
    this.wasmContracts = wasmContracts;
  }
  async isAttributeStoredOnChain(contractPromise) {
    var _this$substrateApi, _onChainAttributeCoun;
    if (!contractPromise.query['psp34Traits::getAttributeCount']) {
      return false;
    }

    // @ts-ignore
    const _onChainAttributeCount = await contractPromise.query['psp34Traits::getAttributeCount'](this.addresses[0], {
      gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_3__.getDefaultWeightV2)((_this$substrateApi = this.substrateApi) === null || _this$substrateApi === void 0 ? void 0 : _this$substrateApi.api)
    });
    const _attributeCount = _onChainAttributeCount === null || _onChainAttributeCount === void 0 ? void 0 : (_onChainAttributeCoun = _onChainAttributeCount.output) === null || _onChainAttributeCoun === void 0 ? void 0 : _onChainAttributeCoun.toJSON();
    const onChainAttributeCount = _onChainAttributeCount.output ? (_attributeCount === null || _attributeCount === void 0 ? void 0 : _attributeCount.ok) || (_attributeCount === null || _attributeCount === void 0 ? void 0 : _attributeCount.Ok) : '0';
    if (!_onChainAttributeCount.result.isOk) {
      return false;
    }
    return !!onChainAttributeCount && parseInt(onChainAttributeCount) !== 0;
  }
  parseFeaturedTokenUri(tokenUri) {
    if (!tokenUri || tokenUri.length === 0) {
      return undefined;
    }
    if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_4__.isUrl)(tokenUri)) {
      return tokenUri;
    }
    if (tokenUri.startsWith('/ipfs/')) {
      return tokenUri;
    }
    if (tokenUri.startsWith('ipfs://')) {
      return `/ipfs/${tokenUri.split('ipfs://')[1]}`;
    }
    if (!tokenUri.includes('ipfs://') && !tokenUri.includes('ipfs://ipfs/')) {
      return `/ipfs/${tokenUri}`;
    }
    if (tokenUri.includes('ipfs://ipfs/')) {
      return `/ipfs/${tokenUri.split('ipfs://ipfs/')[1]}`;
    }
    return tokenUri;
  }
  async parseFeaturedNftImage(tokenUri) {
    const parsedTokenUri = this.parseFeaturedTokenUri(tokenUri);
    if (!parsedTokenUri) {
      return undefined;
    }
    const nftItemImageSrc = `${(0,_subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__.itemImageApiFromArtZero)(this.chain)}?input=${parsedTokenUri}&size=500`;
    const collectionImageUrl = await (0,axios__WEBPACK_IMPORTED_MODULE_5__["default"])(nftItemImageSrc, {
      method: 'GET'
    });
    return collectionImageUrl.data;
  }
  async parseFeaturedCollectionImage(smartContract) {
    const urlencoded = new URLSearchParams();
    urlencoded.append('collection_address', smartContract);
    const resp = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()((0,_subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__.collectionDetailApiFromArtZero)(this.chain), {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: urlencoded
    });
    const result = resp && resp.ok && (await resp.json());
    if (!result) {
      return;
    }

    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
    const collectionDetail = result.ret[0];
    const collectionImage = collectionDetail.avatarImage;
    const parsedCollectionImage = this.parseFeaturedTokenUri(collectionImage);
    if (!parsedCollectionImage) {
      return;
    }
    const collectionImageSrc = `${(0,_subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__.itemImageApiFromArtZero)(this.chain)}?input=${parsedCollectionImage}&size=500`;
    const collectionImageUrl = await (0,axios__WEBPACK_IMPORTED_MODULE_5__["default"])(collectionImageSrc, {
      method: 'GET'
    });
    return collectionImageUrl.data;
  }

  // private async getCollectionAttributes (contractPromise: ContractPromise): Promise<CollectionAttributes> {
  //   const _onChainAttributeCount = await contractPromise.query['psp34Traits::getAttributeCount'](this.addresses[0], { gasLimit: getDefaultWeightV2(this.substrateApi?.api as ApiPromise) });
  //   const onChainAttributeCount = _onChainAttributeCount.output ? _onChainAttributeCount.output.toString() : '0';
  //
  //   if (parseInt(onChainAttributeCount) === 0) {
  //     return {
  //       storedOnChain: false,
  //       attributeList: []
  //     };
  //   }
  //
  //   const attributeList: string[] = [];
  //   const attributeIndexes: number[] = [];
  //
  //   for (let i = 0; i < parseInt(onChainAttributeCount); i++) {
  //     attributeIndexes.push(i);
  //   }
  //
  //   await Promise.all(attributeIndexes.map(async (i) => {
  //     const _attributeByIndex = await contractPromise.query['psp34Traits::getAttributeName'](this.addresses[0], { gasLimit: getDefaultWeightV2(this.substrateApi?.api as ApiPromise) }, i);
  //
  //     if (_attributeByIndex.output) {
  //       const attributeName = _attributeByIndex.output.toString();
  //
  //       if (attributeName !== '') {
  //         attributeList.push(attributeName);
  //       }
  //     }
  //   }));
  //
  //   return {
  //     storedOnChain: true,
  //     attributeList
  //   };
  // }

  // private async processOnChainMetadata (contractPromise: ContractPromise, address: string, tokenIdObj: Record<string, string>, collectionAttributes: string[], isFeatured: boolean): Promise<NftItem> {
  //   const nftItem: NftItem = { chain: '', collectionId: '', id: '', owner: '' };
  //   const _attributeValues = await contractPromise.query['psp34Traits::getAttributes'](address, { gasLimit: getDefaultWeightV2(this.substrateApi?.api as ApiPromise) }, tokenIdObj, collectionAttributes);
  //
  //   if (_attributeValues.output) {
  //     const attributeValues = _attributeValues.output.toHuman() as string[];
  //
  //     const attributeDict: Record<string, any> = {};
  //
  //     for (let i = 0; i < collectionAttributes.length; i++) {
  //       const attributeName = collectionAttributes[i];
  //       const attributeValue = attributeValues[i] ? attributeValues[i] : '';
  //
  //       if (attributeName.toLowerCase() === 'nft_name') {
  //         nftItem.name = attributeValue;
  //       } else if (attributeName.toLowerCase() === 'description') {
  //         nftItem.description = attributeValue;
  //       } else if (attributeName.toLowerCase() === 'avatar') {
  //         if (isFeatured) {
  //           nftItem.image = await this.parseFeaturedNftImage(attributeValue);
  //         } else {
  //           nftItem.image = this.parseUrl(attributeValue);
  //         }
  //       } else {
  //         if (attributeValue !== '') {
  //           attributeDict[attributeName] = { value: attributeValue };
  //         }
  //       }
  //     }
  //
  //     nftItem.properties = attributeDict;
  //   }
  //
  //   if (isFeatured) {
  //     nftItem.externalUrl = ART_ZERO_EXTERNAL_URL;
  //   }
  //
  //   return nftItem;
  // }

  async processOnChainMetadata(tokenId, isFeatured, tokenUri) {
    const nftItem = {
      chain: '',
      collectionId: '',
      id: '',
      owner: '',
      name: tokenId
    };
    let itemDetail = false;
    if (isFeatured) {
      const parsedTokenUri = this.parseFeaturedTokenUri(tokenUri);
      if (parsedTokenUri) {
        const resp = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(`${(0,_subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__.ipfsApiFromArtZero)(this.chain)}?input=${parsedTokenUri}`);
        itemDetail = resp && resp.ok && (await resp.json());
      }
    } else {
      const parsedTokenUri = this.parseFeaturedTokenUri(tokenUri);
      const detailUrl = this.parseUrl(parsedTokenUri);
      if (detailUrl) {
        const resp = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(detailUrl);
        itemDetail = resp && resp.ok && (await resp.json());
      }
    }
    if (!itemDetail) {
      return nftItem;
    }
    nftItem.name = itemDetail.name;
    nftItem.description = itemDetail.description;
    const rawImageSrc = itemDetail.image ? itemDetail.image : itemDetail.image_url;
    if (isFeatured) {
      nftItem.image = await this.parseFeaturedNftImage(rawImageSrc);
      nftItem.externalUrl = (0,_subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__.externalUrlOnArtZero)(this.chain);
    } else {
      nftItem.image = this.parseUrl(rawImageSrc);
    }
    const propertiesMap = {};
    const traitList = itemDetail.attributes ? itemDetail.attributes : itemDetail.traits;
    if (traitList) {
      traitList.forEach(traitMap => {
        propertiesMap[traitMap.trait_type] = {
          value: traitMap.value
        };
      });
      nftItem.properties = propertiesMap;
    }
    return nftItem;
  }
  async processOffChainMetadata(contractPromise, address, tokenId, isFeatured) {
    var _this$substrateApi2;
    const nftItem = {
      chain: '',
      collectionId: '',
      id: '',
      owner: '',
      name: tokenId
    };
    const _isFeatured = isFeatured && !_subwallet_extension_base_koni_api_dotsama_domain__WEBPACK_IMPORTED_MODULE_6__.AZERO_DOMAIN_CONTRACTS.includes(contractPromise.address.toString());
    const _tokenUri = await contractPromise.query[(0,_subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_7__.getTokenUriMethod)(contractPromise.address.toString())](address, {
      gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_3__.getDefaultWeightV2)((_this$substrateApi2 = this.substrateApi) === null || _this$substrateApi2 === void 0 ? void 0 : _this$substrateApi2.api)
    }, (0,_subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_7__.isAzeroDomainNft)(contractPromise.address.toString()) ? {
      bytes: tokenId
    } : tokenId);
    if (_tokenUri.output) {
      let itemDetail = false;
      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
      const _tokenUriObj = _tokenUri.output.toJSON();
      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
      const tokenUri = (0,_subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_7__.isPinkRoboNft)(contractPromise.address.toString()) ? _tokenUriObj.ok.ok : _tokenUriObj.Ok || _tokenUriObj.ok;
      if (_isFeatured) {
        const parsedTokenUri = this.parseFeaturedTokenUri(tokenUri);
        if (parsedTokenUri) {
          const resp = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(`${(0,_subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__.ipfsApiFromArtZero)(this.chain)}?input=${parsedTokenUri}`);
          itemDetail = resp && resp.ok && (await resp.json());
        }
      } else {
        const parsedTokenUri = this.parseFeaturedTokenUri(tokenUri);
        const detailUrl = this.parseUrl(parsedTokenUri);
        if (detailUrl) {
          const resp = await cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(detailUrl);
          itemDetail = resp && resp.ok && (await resp.json());
          if (_subwallet_extension_base_koni_api_dotsama_domain__WEBPACK_IMPORTED_MODULE_6__.AZERO_DOMAIN_CONTRACTS.includes(contractPromise.address.toString())) {
            var _itemDetail;
            // @ts-ignore
            itemDetail = (_itemDetail = itemDetail) === null || _itemDetail === void 0 ? void 0 : _itemDetail.metadata;
          }
        }
      }
      if (!itemDetail) {
        return nftItem;
      }
      nftItem.name = itemDetail.name;
      nftItem.description = itemDetail.description;
      nftItem.externalUrl = itemDetail.external_url;
      const rawImageSrc = itemDetail.image ? itemDetail.image : itemDetail.image_url;
      if (_isFeatured) {
        nftItem.image = await this.parseFeaturedNftImage(rawImageSrc);
        nftItem.externalUrl = (0,_subwallet_extension_base_koni_api_nft_wasm_nft_utils__WEBPACK_IMPORTED_MODULE_1__.externalUrlOnArtZero)(this.chain);
      } else {
        nftItem.image = this.parseUrl(rawImageSrc);
      }
      const propertiesMap = {};
      const traitList = itemDetail.attributes || itemDetail.traits;
      if (traitList) {
        traitList.forEach(traitMap => {
          propertiesMap[traitMap.trait_type] = {
            value: traitMap.value
          };
        });
        nftItem.properties = propertiesMap;
      }
    }
    return nftItem;
  }
  async getItemsByCollection(contractPromise, tokenInfo, collectionName, nftParams, isFeatured, isAttributeOnChain) {
    let ownItem = false;
    let collectionImage;
    const smartContract = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_8__._getContractAddressOfToken)(tokenInfo);
    const nftOwnerMap = {};
    await Promise.all(this.addresses.map(async address => {
      var _this$substrateApi3, _balance$output;
      if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_9__.isEthereumAddress)(address)) {
        return;
      }
      const nftIds = [];
      const _balance = await contractPromise.query['psp34::balanceOf'](address, {
        gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_3__.getDefaultWeightV2)((_this$substrateApi3 = this.substrateApi) === null || _this$substrateApi3 === void 0 ? void 0 : _this$substrateApi3.api)
      }, address);
      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
      const balanceJson = _balance === null || _balance === void 0 ? void 0 : (_balance$output = _balance.output) === null || _balance$output === void 0 ? void 0 : _balance$output.toJSON();
      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
      const balance = _balance.output ? balanceJson.ok || balanceJson.Ok : '0';
      if (parseInt(balance) === 0) {
        return;
      }
      const itemIndexes = [];
      for (let i = 0; i < parseInt(balance); i++) {
        itemIndexes.push(i);
      }
      try {
        await Promise.all(itemIndexes.map(async i => {
          var _this$substrateApi4;
          const _tokenByIndexResp = await contractPromise.query['psp34Enumerable::ownersTokenByIndex'](address, {
            gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_3__.getDefaultWeightV2)((_this$substrateApi4 = this.substrateApi) === null || _this$substrateApi4 === void 0 ? void 0 : _this$substrateApi4.api)
          }, address, i);
          if (_tokenByIndexResp.output) {
            const rawTokenId = _tokenByIndexResp.output.toHuman();
            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
            let tokenIdObj = rawTokenId.Ok.Ok || rawTokenId.ok.ok; // capital O, not normal o
            const tokenId = Object.values(tokenIdObj)[0].replaceAll(',', '');
            if ((0,_subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_7__.isAzeroDomainNft)(contractPromise.address.toString())) {
              tokenIdObj = {
                bytes: tokenId
              };
            }
            nftIds.push(tokenId);
            let tokenUri;
            try {
              if (isAttributeOnChain) {
                var _this$substrateApi5, _tokenUri$output;
                const _tokenUri = await contractPromise.query['psp34Traits::getAttributes'](address, {
                  gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_3__.getDefaultWeightV2)((_this$substrateApi5 = this.substrateApi) === null || _this$substrateApi5 === void 0 ? void 0 : _this$substrateApi5.api)
                }, tokenIdObj, ['metadata']);
                const tokenUriObj = (_tokenUri$output = _tokenUri.output) === null || _tokenUri$output === void 0 ? void 0 : _tokenUri$output.toJSON();
                tokenUri = (tokenUriObj.ok || tokenUriObj.Ok)[0];
              }
            } catch (e) {
              console.debug(e);
            }
            if (!tokenUri) {
              const nftItem = await this.processOffChainMetadata(contractPromise, address, tokenId, isFeatured);
              nftItem.collectionId = smartContract;
              nftItem.chain = this.chain;
              nftItem.type = _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_10__._AssetType.PSP34;
              nftItem.id = tokenId;
              nftItem.owner = address;
              nftItem.onChainOption = tokenIdObj;
              nftItem.originAsset = tokenInfo.slug;
              nftParams.updateItem(this.chain, nftItem, address);
              ownItem = true;
              if (!isFeatured && !collectionImage && nftItem.image) {
                collectionImage = nftItem.image; // No default collection image
              }
            } else {
              const nftItem = await this.processOnChainMetadata(tokenId, false, tokenUri);
              nftItem.collectionId = smartContract;
              nftItem.chain = this.chain;
              nftItem.type = _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_10__._AssetType.PSP34;
              nftItem.id = tokenId;
              nftItem.owner = address;
              nftItem.onChainOption = tokenIdObj;
              nftItem.originAsset = tokenInfo.slug;
              nftParams.updateItem(this.chain, nftItem, address);
              ownItem = true;
              if (!isFeatured && !collectionImage && nftItem.image) {
                collectionImage = nftItem.image; // No default collection image
              }
            }
          }
        }));

        nftOwnerMap[address] = nftIds;
      } catch (e) {
        console.error(`${this.chain}`, e);
      }
    }));
    if (isFeatured) {
      const featuredCollectionImage = await this.parseFeaturedCollectionImage(smartContract);
      if (featuredCollectionImage) {
        collectionImage = featuredCollectionImage;
      }
    }
    if (ownItem) {
      const nftCollection = {
        collectionId: smartContract,
        collectionName,
        image: collectionImage || undefined,
        chain: this.chain,
        originAsset: tokenInfo.slug
      };
      nftParams.updateCollection(this.chain, nftCollection);
    }
  }
  async fetchNfts(params) {
    try {
      await this.handleNfts(params);
    } catch (e) {
      return 0;
    }
    return 1;
  }
  async handleNfts(params) {
    var _this$substrateApi6;
    if (!this.wasmContracts || this.wasmContracts.length === 0) {
      return;
    }
    await this.connect(); // might not be necessary

    const apiPromise = (_this$substrateApi6 = this.substrateApi) === null || _this$substrateApi6 === void 0 ? void 0 : _this$substrateApi6.api;
    await Promise.all(this.wasmContracts.map(async tokenInfo => {
      const contractPromise = (0,_subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_7__.getPSP34ContractPromise)(apiPromise, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_8__._getContractAddressOfToken)(tokenInfo));
      const [isAttributeOnChain, isCollectionFeatured] = await Promise.all([this.isAttributeStoredOnChain(contractPromise), isArtZeroFeaturedCollection(this.chain, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_8__._getContractAddressOfToken)(tokenInfo))]);
      return await this.getItemsByCollection(contractPromise, tokenInfo, tokenInfo.name, params, isCollectionFeatured, isAttributeOnChain);
    }));
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/nft/wasm_nft/utils.ts":
/*!************************************************************!*\
  !*** ../extension-base/src/koni/api/nft/wasm_nft/utils.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "A0_ART_ZERO_COLLECTION_API": () => (/* binding */ A0_ART_ZERO_COLLECTION_API),
/* harmony export */   "A0_ART_ZERO_EXTERNAL_URL": () => (/* binding */ A0_ART_ZERO_EXTERNAL_URL),
/* harmony export */   "A0_ART_ZERO_IMAGE_API": () => (/* binding */ A0_ART_ZERO_IMAGE_API),
/* harmony export */   "A0_ART_ZERO_IPFS_API": () => (/* binding */ A0_ART_ZERO_IPFS_API),
/* harmony export */   "A0_ART_ZERO_TESTNET_COLLECTION_API": () => (/* binding */ A0_ART_ZERO_TESTNET_COLLECTION_API),
/* harmony export */   "A0_ART_ZERO_TESTNET_IMAGE_API": () => (/* binding */ A0_ART_ZERO_TESTNET_IMAGE_API),
/* harmony export */   "ART_ZERO_TESTNET_IPFS_API": () => (/* binding */ ART_ZERO_TESTNET_IPFS_API),
/* harmony export */   "ASTAR_ART_ZERO_COLLECTION_API": () => (/* binding */ ASTAR_ART_ZERO_COLLECTION_API),
/* harmony export */   "ASTAR_ART_ZERO_EXTERNAL_URL": () => (/* binding */ ASTAR_ART_ZERO_EXTERNAL_URL),
/* harmony export */   "ASTAR_ART_ZERO_IMAGE_API": () => (/* binding */ ASTAR_ART_ZERO_IMAGE_API),
/* harmony export */   "ASTAR_ART_ZERO_IPFS_API": () => (/* binding */ ASTAR_ART_ZERO_IPFS_API),
/* harmony export */   "ASTAR_ART_ZERO_TESTNET_COLLECTION_API": () => (/* binding */ ASTAR_ART_ZERO_TESTNET_COLLECTION_API),
/* harmony export */   "ASTAR_ART_ZERO_TESTNET_IMAGE_API": () => (/* binding */ ASTAR_ART_ZERO_TESTNET_IMAGE_API),
/* harmony export */   "ASTAR_ART_ZERO_TESTNET_IPFS_API": () => (/* binding */ ASTAR_ART_ZERO_TESTNET_IPFS_API),
/* harmony export */   "collectionApiFromArtZero": () => (/* binding */ collectionApiFromArtZero),
/* harmony export */   "collectionDetailApiFromArtZero": () => (/* binding */ collectionDetailApiFromArtZero),
/* harmony export */   "externalUrlOnArtZero": () => (/* binding */ externalUrlOnArtZero),
/* harmony export */   "ipfsApiFromArtZero": () => (/* binding */ ipfsApiFromArtZero),
/* harmony export */   "itemImageApiFromArtZero": () => (/* binding */ itemImageApiFromArtZero)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0

const A0_ART_ZERO_TESTNET_IMAGE_API = 'https://a0-test-api.artzero.io/getImage';
const ASTAR_ART_ZERO_TESTNET_IMAGE_API = 'https://astar-test-api.artzero.io/getImage';
const ART_ZERO_TESTNET_IPFS_API = 'https://a0-test-api.artzero.io/getJSON';
const ASTAR_ART_ZERO_TESTNET_IPFS_API = 'https://astar-test-api.artzero.io/getJSON';
const A0_ART_ZERO_TESTNET_COLLECTION_API = 'https://a0-test-api.artzero.io/getCollectionByAddress';
const ASTAR_ART_ZERO_TESTNET_COLLECTION_API = 'https://astar-test-api.artzero.io/getCollectionByAddress';
const A0_ART_ZERO_IMAGE_API = 'https://a0-api.artzero.io/getImage';
const ASTAR_ART_ZERO_IMAGE_API = 'https://astar-api.artzero.io/getImage';
const A0_ART_ZERO_IPFS_API = 'https://a0-api.artzero.io/getJSON';
const ASTAR_ART_ZERO_IPFS_API = 'https://astar-api.artzero.io/getJSON';
const A0_ART_ZERO_COLLECTION_API = 'https://a0-api.artzero.io/getCollectionByAddress';
const ASTAR_ART_ZERO_COLLECTION_API = 'https://astar-api.artzero.io/getCollectionByAddress';
const A0_ART_ZERO_EXTERNAL_URL = 'https://a0.artzero.io/#/marketplace';
const ASTAR_ART_ZERO_EXTERNAL_URL = 'https://astar.artzero.io/#/marketplace';
function collectionApiFromArtZero(chain) {
  if (chain === 'alephTest') {
    return A0_ART_ZERO_TESTNET_COLLECTION_API;
  }
  if (chain === 'astar') {
    return ASTAR_ART_ZERO_COLLECTION_API;
  }
  return A0_ART_ZERO_COLLECTION_API;
}
function itemImageApiFromArtZero(chain) {
  if (chain === 'alephTest') {
    return A0_ART_ZERO_TESTNET_IMAGE_API;
  }
  if (chain === 'astar') {
    return ASTAR_ART_ZERO_IMAGE_API;
  }
  return A0_ART_ZERO_IMAGE_API;
}
function collectionDetailApiFromArtZero(chain) {
  if (chain === 'alephTest') {
    return A0_ART_ZERO_TESTNET_COLLECTION_API;
  }
  if (chain === 'astar') {
    return ASTAR_ART_ZERO_COLLECTION_API;
  }
  return A0_ART_ZERO_COLLECTION_API;
}
function ipfsApiFromArtZero(chain) {
  if (chain === 'alephTest') {
    return ART_ZERO_TESTNET_IPFS_API;
  }
  if (chain === 'astar') {
    return ASTAR_ART_ZERO_IPFS_API;
  }
  return A0_ART_ZERO_IPFS_API;
}
function externalUrlOnArtZero(chain) {
  if (chain === 'astar') {
    return ASTAR_ART_ZERO_EXTERNAL_URL;
  }
  return A0_ART_ZERO_EXTERNAL_URL;
}

/***/ }),

/***/ "../extension-base/src/koni/api/staking/bonding/amplitude.ts":
/*!*******************************************************************!*\
  !*** ../extension-base/src/koni/api/staking/bonding/amplitude.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getAmplitudeBondingExtrinsic": () => (/* binding */ getAmplitudeBondingExtrinsic),
/* harmony export */   "getAmplitudeClaimRewardExtrinsic": () => (/* binding */ getAmplitudeClaimRewardExtrinsic),
/* harmony export */   "getAmplitudeCollatorsInfo": () => (/* binding */ getAmplitudeCollatorsInfo),
/* harmony export */   "getAmplitudeNominatorMetadata": () => (/* binding */ getAmplitudeNominatorMetadata),
/* harmony export */   "getAmplitudeStakingMetadata": () => (/* binding */ getAmplitudeStakingMetadata),
/* harmony export */   "getAmplitudeUnbondingExtrinsic": () => (/* binding */ getAmplitudeUnbondingExtrinsic),
/* harmony export */   "getAmplitudeWithdrawalExtrinsic": () => (/* binding */ getAmplitudeWithdrawalExtrinsic),
/* harmony export */   "subscribeAmplitudeNominatorMetadata": () => (/* binding */ subscribeAmplitudeNominatorMetadata),
/* harmony export */   "subscribeAmplitudeStakingMetadata": () => (/* binding */ subscribeAmplitudeStakingMetadata)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/utils */ "../extension-base/src/koni/api/staking/bonding/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/bn/consts.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0







function subscribeAmplitudeStakingMetadata(chain, substrateApi, callback) {
  return substrateApi.api.query.parachainStaking.round(_round => {
    const roundObj = _round.toHuman();
    const round = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.parseRawNumber)(roundObj.current);
    const maxDelegations = substrateApi.api.consts.parachainStaking.maxDelegationsPerRound.toString();
    const minDelegatorStake = substrateApi.api.consts.parachainStaking.minDelegatorStake.toString();
    const unstakingDelay = substrateApi.api.consts.parachainStaking.stakeDuration.toString();
    const _blockPerRound = substrateApi.api.consts.parachainStaking.defaultBlocksPerRound.toString();
    const blockPerRound = parseFloat(_blockPerRound);
    const blockDuration = (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_ERA_LENGTH_MAP[chain] || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_ERA_LENGTH_MAP["default"]) / blockPerRound; // in hours
    const unstakingPeriod = blockDuration * parseInt(unstakingDelay);
    callback(chain, {
      chain,
      type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
      era: round,
      minStake: minDelegatorStake,
      maxValidatorPerNominator: parseInt(maxDelegations),
      maxWithdrawalRequestPerValidator: 1,
      // by default
      allowCancelUnstaking: true,
      unstakingPeriod
    });
  });
}
async function getAmplitudeStakingMetadata(chain, substrateApi) {
  const chainApi = await substrateApi.isReady;
  const _round = (await chainApi.api.query.parachainStaking.round()).toHuman();
  const round = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.parseRawNumber)(_round.current);
  const maxDelegations = chainApi.api.consts.parachainStaking.maxDelegationsPerRound.toString();
  const minDelegatorStake = chainApi.api.consts.parachainStaking.minDelegatorStake.toString();
  const unstakingDelay = chainApi.api.consts.parachainStaking.stakeDuration.toString();
  const _blockPerRound = chainApi.api.consts.parachainStaking.defaultBlocksPerRound.toString();
  const blockPerRound = parseFloat(_blockPerRound);
  const blockDuration = (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_ERA_LENGTH_MAP[chain] || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_ERA_LENGTH_MAP["default"]) / blockPerRound; // in hours
  const unstakingPeriod = blockDuration * parseInt(unstakingDelay);
  return {
    chain,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
    era: round,
    minStake: minDelegatorStake,
    maxValidatorPerNominator: parseInt(maxDelegations),
    maxWithdrawalRequestPerValidator: 1,
    // by default
    allowCancelUnstaking: true,
    unstakingPeriod
  };
}
async function subscribeAmplitudeNominatorMetadata(chainInfo, address, substrateApi, delegatorState, unstakingInfo) {
  const nominationList = [];
  const unstakingList = [];
  const minDelegatorStake = substrateApi.api.consts.parachainStaking.minDelegatorStake.toString();
  let activeStake = '0';
  if (delegatorState) {
    // delegatorState can be null while unstaking all
    const identityInfo = substrateApi.api.query.identity ? (await substrateApi.api.query.identity.identityOf(delegatorState.owner)).toPrimitive() : undefined;
    const identity = identityInfo ? (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_3__.parseIdentity)(identityInfo) : undefined;
    activeStake = delegatorState.amount.toString();
    const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(activeStake);
    let delegationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_EARNING;
    if (bnActiveStake.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_5__.BN_ZERO) && bnActiveStake.gte(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(minDelegatorStake))) {
      delegationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.EARNING_REWARD;
    }
    nominationList.push({
      status: delegationStatus,
      chain: chainInfo.slug,
      validatorAddress: delegatorState.owner,
      activeStake: delegatorState.amount.toString(),
      validatorMinStake: '0',
      hasUnstaking: !!unstakingInfo && Object.values(unstakingInfo).length > 0,
      validatorIdentity: identity
    });
  }
  if (unstakingInfo && Object.values(unstakingInfo).length > 0) {
    const _currentBlockInfo = await substrateApi.api.rpc.chain.getHeader();
    const currentBlockInfo = _currentBlockInfo.toPrimitive();
    const currentBlockNumber = currentBlockInfo.number;
    const _blockPerRound = substrateApi.api.consts.parachainStaking.defaultBlocksPerRound.toString();
    const blockPerRound = parseFloat(_blockPerRound);
    const nearestUnstakingBlock = Object.keys(unstakingInfo)[0];
    const nearestUnstakingAmount = Object.values(unstakingInfo)[0];
    const blockDuration = (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_ERA_LENGTH_MAP[chainInfo.slug] || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_ERA_LENGTH_MAP["default"]) / blockPerRound; // in hours

    const isClaimable = parseInt(nearestUnstakingBlock) - currentBlockNumber < 0;
    const remainingBlock = parseInt(nearestUnstakingBlock) - currentBlockNumber;
    const waitingTime = remainingBlock * blockDuration;
    unstakingList.push({
      chain: chainInfo.slug,
      status: isClaimable ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.UnstakingStatus.CLAIMABLE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.UnstakingStatus.UNLOCKING,
      claimable: nearestUnstakingAmount.toString(),
      waitingTime,
      validatorAddress: (delegatorState === null || delegatorState === void 0 ? void 0 : delegatorState.owner) || undefined
    });
  }
  const stakingStatus = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_3__.getStakingStatusByNominations)(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(activeStake), nominationList);
  return {
    chain: chainInfo.slug,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
    status: stakingStatus,
    address: address,
    activeStake: activeStake,
    nominations: nominationList,
    unstakings: unstakingList
  };
}
async function getAmplitudeNominatorMetadata(chainInfo, address, substrateApi) {
  if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__.isEthereumAddress)(address)) {
    return;
  }
  const chain = chainInfo.slug;
  const chainApi = await substrateApi.isReady;
  const nominationList = [];
  const unstakingList = [];
  const [_delegatorState, _unstakingInfo] = await Promise.all([chainApi.api.query.parachainStaking.delegatorState(address), chainApi.api.query.parachainStaking.unstaking(address)]);
  const minDelegatorStake = chainApi.api.consts.parachainStaking.minDelegatorStake.toString();
  const delegatorState = _delegatorState.toPrimitive();
  const unstakingInfo = _unstakingInfo.toPrimitive();
  if (!delegatorState && !unstakingInfo) {
    return {
      chain: chainInfo.slug,
      type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
      address,
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING,
      activeStake: '0',
      nominations: [],
      unstakings: []
    };
  }
  let activeStake = '0';
  if (delegatorState) {
    // delegatorState can be null while unstaking all
    const identityInfo = chainApi.api.query.identity ? (await chainApi.api.query.identity.identityOf(delegatorState.owner)).toPrimitive() : undefined;
    const identity = identityInfo ? (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_3__.parseIdentity)(identityInfo) : undefined;
    activeStake = delegatorState.amount.toString();
    const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(activeStake);
    let delegationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_EARNING;
    if (bnActiveStake.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_5__.BN_ZERO) && bnActiveStake.gte(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(minDelegatorStake))) {
      delegationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.EARNING_REWARD;
    }
    nominationList.push({
      status: delegationStatus,
      chain,
      validatorAddress: delegatorState.owner,
      activeStake: delegatorState.amount.toString(),
      validatorMinStake: '0',
      hasUnstaking: !!unstakingInfo && Object.values(unstakingInfo).length > 0,
      validatorIdentity: identity
    });
  }
  if (unstakingInfo && Object.values(unstakingInfo).length > 0) {
    const _currentBlockInfo = await chainApi.api.rpc.chain.getHeader();
    const currentBlockInfo = _currentBlockInfo.toPrimitive();
    const currentBlockNumber = currentBlockInfo.number;
    const _blockPerRound = chainApi.api.consts.parachainStaking.defaultBlocksPerRound.toString();
    const blockPerRound = parseFloat(_blockPerRound);
    const nearestUnstakingBlock = Object.keys(unstakingInfo)[0];
    const nearestUnstakingAmount = Object.values(unstakingInfo)[0];
    const blockDuration = (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_ERA_LENGTH_MAP[chain] || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_ERA_LENGTH_MAP["default"]) / blockPerRound; // in hours

    const isClaimable = parseInt(nearestUnstakingBlock) - currentBlockNumber < 0;
    const remainingBlock = parseInt(nearestUnstakingBlock) - currentBlockNumber;
    const waitingTime = remainingBlock * blockDuration;
    unstakingList.push({
      chain,
      status: isClaimable ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.UnstakingStatus.CLAIMABLE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.UnstakingStatus.UNLOCKING,
      claimable: nearestUnstakingAmount.toString(),
      waitingTime,
      validatorAddress: (delegatorState === null || delegatorState === void 0 ? void 0 : delegatorState.owner) || undefined
    });
  }
  if (nominationList.length === 0 && unstakingList.length === 0) {
    return;
  }
  const stakingStatus = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_3__.getStakingStatusByNominations)(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(activeStake), nominationList);
  return {
    chain,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
    status: stakingStatus,
    address: address,
    activeStake: activeStake,
    nominations: nominationList,
    unstakings: unstakingList
  };
}
async function getAmplitudeCollatorsInfo(chain, substrateApi) {
  const chainApi = await substrateApi.isReady;
  const [_allCollators, _inflationConfig] = await Promise.all([chainApi.api.query.parachainStaking.candidatePool.entries(), chainApi.api.query.parachainStaking.inflationConfig()]);
  const maxDelegatorsPerCollator = chainApi.api.consts.parachainStaking.maxDelegatorsPerCollator.toString();
  const inflationConfig = _inflationConfig.toHuman();
  const rawDelegatorReturn = inflationConfig.delegator.rewardRate.annual;
  const delegatorReturn = parseFloat(rawDelegatorReturn.split('%')[0]);
  const allCollators = [];
  for (const _collator of _allCollators) {
    const collatorInfo = _collator[1].toPrimitive();
    const bnTotalStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(collatorInfo.total);
    const bnOwnStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(collatorInfo.stake);
    const bnOtherStake = bnTotalStake.sub(bnOwnStake);
    allCollators.push({
      address: collatorInfo.id,
      totalStake: bnTotalStake.toString(),
      ownStake: bnOwnStake.toString(),
      otherStake: bnOtherStake.toString(),
      nominatorCount: collatorInfo.delegators.length,
      commission: 0,
      expectedReturn: delegatorReturn,
      blocked: false,
      isVerified: false,
      minBond: '0',
      chain,
      isCrowded: collatorInfo.delegators.length >= parseInt(maxDelegatorsPerCollator)
    });
  }
  return allCollators;
}
async function getAmplitudeBondingExtrinsic(substrateApi, amount, selectedValidatorInfo, nominatorMetadata) {
  const chainApi = await substrateApi.isReady;
  const binaryAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(amount);
  if (!nominatorMetadata) {
    return chainApi.api.tx.parachainStaking.joinDelegators(selectedValidatorInfo.address, binaryAmount);
  }
  const {
    bondedValidators
  } = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_3__.getBondedValidators)(nominatorMetadata.nominations);
  if (!bondedValidators.includes((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(selectedValidatorInfo.address, 0))) {
    return chainApi.api.tx.parachainStaking.joinDelegators(selectedValidatorInfo.address, binaryAmount);
  } else {
    const _params = chainApi.api.tx.parachainStaking.delegatorStakeMore.toJSON();
    const paramsCount = _params.args.length;
    if (paramsCount === 2) {
      // detect number of params
      return chainApi.api.tx.parachainStaking.delegatorStakeMore(selectedValidatorInfo.address, binaryAmount);
    } else {
      return chainApi.api.tx.parachainStaking.delegatorStakeMore(binaryAmount);
    }
  }
}
async function getAmplitudeUnbondingExtrinsic(substrateApi, amount, nominatorMetadata, collatorAddress) {
  const chainApi = await substrateApi.isReady;
  const binaryAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_4___default())(amount);
  const unstakeAll = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_3__.isUnstakeAll)(collatorAddress, nominatorMetadata.nominations, amount);
  if (!unstakeAll) {
    const _params = chainApi.api.tx.parachainStaking.delegatorStakeMore.toJSON();
    const paramsCount = _params.args.length;
    if (paramsCount === 2) {
      return chainApi.api.tx.parachainStaking.delegatorStakeLess(collatorAddress, binaryAmount);
    } else {
      return chainApi.api.tx.parachainStaking.delegatorStakeLess(binaryAmount);
    }
  } else {
    return chainApi.api.tx.parachainStaking.leaveDelegators();
  }
}
async function getAmplitudeWithdrawalExtrinsic(substrateApi, address) {
  const chainApi = await substrateApi.isReady;
  return chainApi.api.tx.parachainStaking.unlockUnstaked(address);
}
async function getAmplitudeClaimRewardExtrinsic(substrateApi) {
  const chainApi = await substrateApi.isReady;
  return chainApi.api.tx.utility.batch([chainApi.api.tx.parachainStaking.incrementDelegatorRewards(), chainApi.api.tx.parachainStaking.claimRewards()]);
}

/***/ }),

/***/ "../extension-base/src/koni/api/staking/bonding/index.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/koni/api/staking/bonding/index.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getBondingExtrinsic": () => (/* binding */ getBondingExtrinsic),
/* harmony export */   "getCancelWithdrawalExtrinsic": () => (/* binding */ getCancelWithdrawalExtrinsic),
/* harmony export */   "getChainStakingMetadata": () => (/* binding */ getChainStakingMetadata),
/* harmony export */   "getClaimRewardExtrinsic": () => (/* binding */ getClaimRewardExtrinsic),
/* harmony export */   "getNominationPoolsInfo": () => (/* binding */ getNominationPoolsInfo),
/* harmony export */   "getNominatorMetadata": () => (/* binding */ getNominatorMetadata),
/* harmony export */   "getUnbondingExtrinsic": () => (/* binding */ getUnbondingExtrinsic),
/* harmony export */   "getValidatorsInfo": () => (/* binding */ getValidatorsInfo),
/* harmony export */   "getWithdrawalExtrinsic": () => (/* binding */ getWithdrawalExtrinsic),
/* harmony export */   "subscribeEssentialChainStakingMetadata": () => (/* binding */ subscribeEssentialChainStakingMetadata),
/* harmony export */   "validateBondingCondition": () => (/* binding */ validateBondingCondition),
/* harmony export */   "validateUnbondingCondition": () => (/* binding */ validateUnbondingCondition)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/amplitude */ "../extension-base/src/koni/api/staking/bonding/amplitude.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/astar */ "../extension-base/src/koni/api/staking/bonding/astar.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/paraChain */ "../extension-base/src/koni/api/staking/bonding/paraChain.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/relayChain */ "../extension-base/src/koni/api/staking/bonding/relayChain.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0







// all addresses must be converted to its chain format

function validateUnbondingCondition(nominatorMetadata, amount, chain, chainStakingMetadata, selectedValidator) {
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.relay.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.validateRelayUnbondingCondition)(amount, chainStakingMetadata, nominatorMetadata);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.validateParaChainUnbondingCondition)(amount, nominatorMetadata, chainStakingMetadata, selectedValidator);
}
function validateBondingCondition(chainInfo, amount, selectedValidators, address, chainStakingMetadata, nominatorMetadata) {
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.relay.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.validateRelayBondingCondition)(chainInfo, amount, selectedValidators, address, chainStakingMetadata, nominatorMetadata);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.validateParaChainBondingCondition)(chainInfo, amount, selectedValidators, address, chainStakingMetadata, nominatorMetadata);
}
async function getChainStakingMetadata(chainInfo, substrateApi) {
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.astar.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__.getAstarStakingMetadata)(chainInfo.slug, substrateApi);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.para.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.getParaChainStakingMetadata)(chainInfo.slug, substrateApi);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.amplitude.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__.getAmplitudeStakingMetadata)(chainInfo.slug, substrateApi);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getRelayChainStakingMetadata)(chainInfo, substrateApi);
}
async function getNominatorMetadata(chainInfo, address, substrateApi) {
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.astar.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__.getAstarNominatorMetadata)(chainInfo, address, substrateApi);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.para.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.getParaChainNominatorMetadata)(chainInfo, address, substrateApi);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.amplitude.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__.getAmplitudeNominatorMetadata)(chainInfo, address, substrateApi);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getRelayChainNominatorMetadata)(chainInfo, address, substrateApi);
}
async function getValidatorsInfo(networkKey, substrateApi, decimals, chainStakingMetadata) {
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.para.includes(networkKey)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.getParachainCollatorsInfo)(networkKey, substrateApi);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.astar.includes(networkKey)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__.getAstarDappsInfo)(networkKey, substrateApi);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.amplitude.includes(networkKey)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__.getAmplitudeCollatorsInfo)(networkKey, substrateApi);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getRelayValidatorsInfo)(networkKey, substrateApi, decimals, chainStakingMetadata);
}
async function getNominationPoolsInfo(chain, substrateApi) {
  return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getRelayPoolsInfo)(chain, substrateApi);
}
async function getBondingExtrinsic(chainInfo, amount, selectedValidators, substrateApi, address, nominatorMetadata) {
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.para.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.getParaBondingExtrinsic)(chainInfo, substrateApi, amount, selectedValidators[0], nominatorMetadata); // only select 1 validator at a time
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.astar.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__.getAstarBondingExtrinsic)(substrateApi, amount, selectedValidators[0]);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.amplitude.includes(chainInfo.slug)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__.getAmplitudeBondingExtrinsic)(substrateApi, amount, selectedValidators[0], nominatorMetadata);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getRelayBondingExtrinsic)(substrateApi, amount, selectedValidators, chainInfo, address, nominatorMetadata);
}
async function getUnbondingExtrinsic(nominatorMetadata, amount, chain, substrateApi, selectedValidator) {
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.para.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.getParaUnbondingExtrinsic)(substrateApi, amount, nominatorMetadata, selectedValidator);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.astar.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__.getAstarUnbondingExtrinsic)(substrateApi, amount, selectedValidator);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.amplitude.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__.getAmplitudeUnbondingExtrinsic)(substrateApi, amount, nominatorMetadata, selectedValidator);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getRelayUnbondingExtrinsic)(substrateApi, amount, nominatorMetadata);
}
async function getWithdrawalExtrinsic(substrateApi, chain, nominatorMetadata, validatorAddress) {
  if (nominatorMetadata.type === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.StakingType.POOLED) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getPoolingWithdrawalExtrinsic)(substrateApi, nominatorMetadata);
  }
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.para.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.getParaWithdrawalExtrinsic)(substrateApi, nominatorMetadata.address, validatorAddress);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.astar.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__.getAstarWithdrawalExtrinsic)(substrateApi);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.amplitude.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__.getAmplitudeWithdrawalExtrinsic)(substrateApi, nominatorMetadata.address);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getRelayWithdrawalExtrinsic)(substrateApi, nominatorMetadata.address);
}
async function getClaimRewardExtrinsic(substrateApi, chain, address, stakingType, bondReward = true) {
  if (stakingType === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.StakingType.POOLED) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getPoolingClaimRewardExtrinsic)(substrateApi, bondReward);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.amplitude.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__.getAmplitudeClaimRewardExtrinsic)(substrateApi);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__.getAstarClaimRewardExtrinsic)(substrateApi, address);
}
async function getCancelWithdrawalExtrinsic(substrateApi, chain, selectedUnstaking) {
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.para.includes(chain)) {
    return (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.getParaCancelWithdrawalExtrinsic)(substrateApi, selectedUnstaking);
  }
  return (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.getRelayCancelWithdrawalExtrinsic)(substrateApi, selectedUnstaking);
}
function subscribeEssentialChainStakingMetadata(substrateApiMap, chainInfoMap, callback) {
  const unsubList = [];

  // eslint-disable-next-line @typescript-eslint/no-misused-promises
  Object.values(chainInfoMap).forEach(async chainInfo => {
    if (!substrateApiMap[chainInfo.slug]) {
      return;
    }
    const substrateApi = await substrateApiMap[chainInfo.slug].isReady;
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.astar.includes(chainInfo.slug)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_3__.subscribeAstarStakingMetadata)(chainInfo.slug, substrateApi, callback);

      // @ts-ignore
      unsubList.push(unsub);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.para.includes(chainInfo.slug)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_2__.subscribeParaChainStakingMetadata)(chainInfo.slug, substrateApi, callback);

      // @ts-ignore
      unsubList.push(unsub);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.amplitude.includes(chainInfo.slug)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_4__.subscribeAmplitudeStakingMetadata)(chainInfo.slug, substrateApi, callback);

      // @ts-ignore
      unsubList.push(unsub);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._STAKING_CHAIN_GROUP.relay.includes(chainInfo.slug)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_1__.subscribeRelayChainStakingMetadata)(chainInfo, substrateApi, callback);

      // @ts-ignore
      unsubList.push(unsub);
    }
  });
  return () => {
    unsubList.forEach(unsub => {
      unsub && unsub();
    });
  };
}

/***/ }),

/***/ "../extension-base/src/koni/api/staking/bonding/paraChain.ts":
/*!*******************************************************************!*\
  !*** ../extension-base/src/koni/api/staking/bonding/paraChain.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getParaBondingExtrinsic": () => (/* binding */ getParaBondingExtrinsic),
/* harmony export */   "getParaCancelWithdrawalExtrinsic": () => (/* binding */ getParaCancelWithdrawalExtrinsic),
/* harmony export */   "getParaChainNominatorMetadata": () => (/* binding */ getParaChainNominatorMetadata),
/* harmony export */   "getParaChainStakingMetadata": () => (/* binding */ getParaChainStakingMetadata),
/* harmony export */   "getParaUnbondingExtrinsic": () => (/* binding */ getParaUnbondingExtrinsic),
/* harmony export */   "getParaWithdrawalExtrinsic": () => (/* binding */ getParaWithdrawalExtrinsic),
/* harmony export */   "getParachainCollatorsInfo": () => (/* binding */ getParachainCollatorsInfo),
/* harmony export */   "getTuringCancelCompoundingExtrinsic": () => (/* binding */ getTuringCancelCompoundingExtrinsic),
/* harmony export */   "getTuringCompoundExtrinsic": () => (/* binding */ getTuringCompoundExtrinsic),
/* harmony export */   "subscribeParaChainNominatorMetadata": () => (/* binding */ subscribeParaChainNominatorMetadata),
/* harmony export */   "subscribeParaChainStakingMetadata": () => (/* binding */ subscribeParaChainStakingMetadata),
/* harmony export */   "validateParaChainBondingCondition": () => (/* binding */ validateParaChainBondingCondition),
/* harmony export */   "validateParaChainUnbondingCondition": () => (/* binding */ validateParaChainUnbondingCondition)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/TransactionError */ "../extension-base/src/background/errors/TransactionError.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/utils */ "../extension-base/src/koni/api/staking/bonding/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/bn/consts.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0









function validateParaChainUnbondingCondition(amount, nominatorMetadata, chainStakingMetadata, selectedCollator) {
  const errors = [];
  let targetNomination;
  for (const nomination of nominatorMetadata.nominations) {
    if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.isSameAddress)(nomination.validatorAddress, selectedCollator)) {
      targetNomination = nomination;
      break;
    }
  }
  if (!targetNomination) {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.BasicTxErrorType.INTERNAL_ERROR));
    return errors;
  }
  const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(targetNomination.activeStake);
  const bnRemainingStake = bnActiveStake.sub(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(amount));
  const bnChainMinStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(chainStakingMetadata.minStake || '0');
  const bnCollatorMinStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(targetNomination.validatorMinStake || '0');
  const bnMinStake = _polkadot_util__WEBPACK_IMPORTED_MODULE_3___default().max(bnCollatorMinStake, bnChainMinStake);
  const existUnstakeErrorMessage = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getExistUnstakeErrorMessage)(chainStakingMetadata.chain);
  if (targetNomination.hasUnstaking) {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.EXIST_UNSTAKING_REQUEST, existUnstakeErrorMessage));
  }
  if (!(bnRemainingStake.isZero() || bnRemainingStake.gte(bnMinStake))) {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.INVALID_ACTIVE_STAKE));
  }
  return errors;
}
function validateParaChainBondingCondition(chainInfo, amount, selectedCollators, address, chainStakingMetadata, nominatorMetadata) {
  const errors = [];
  const selectedCollator = selectedCollators[0];
  let bnTotalStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(amount);
  const bnChainMinStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(chainStakingMetadata.minStake || '0');
  const bnCollatorMinStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(selectedCollator.minBond || '0');
  const bnMinStake = bnCollatorMinStake > bnChainMinStake ? bnCollatorMinStake : bnChainMinStake;
  const minStakeErrorMessage = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getMinStakeErrorMessage)(chainInfo, bnMinStake);
  const maxValidatorErrorMessage = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getMaxValidatorErrorMessage)(chainInfo, chainStakingMetadata.maxValidatorPerNominator);
  const existUnstakeErrorMessage = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getExistUnstakeErrorMessage)(chainInfo.slug, true);
  if (!nominatorMetadata || nominatorMetadata.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING) {
    if (!bnTotalStake.gte(bnMinStake)) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.NOT_ENOUGH_MIN_STAKE, minStakeErrorMessage));
    }
    return errors;
  }
  const {
    bondedValidators
  } = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getBondedValidators)(nominatorMetadata.nominations);
  const parsedSelectedCollatorAddress = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(selectedCollator.address, 0);
  if (!bondedValidators.includes(parsedSelectedCollatorAddress)) {
    // new delegation
    if (!bnTotalStake.gte(bnMinStake)) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.NOT_ENOUGH_MIN_STAKE, minStakeErrorMessage));
    }
    const delegationCount = nominatorMetadata.nominations.length + 1;
    if (delegationCount > chainStakingMetadata.maxValidatorPerNominator) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.EXCEED_MAX_NOMINATIONS, maxValidatorErrorMessage));
    }
  } else {
    let currentDelegationAmount = '0';
    let hasUnstaking = false;
    for (const delegation of nominatorMetadata.nominations) {
      if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(delegation.validatorAddress, 0) === parsedSelectedCollatorAddress) {
        currentDelegationAmount = delegation.activeStake;
        hasUnstaking = !!delegation.hasUnstaking && delegation.hasUnstaking;
        break;
      }
    }
    bnTotalStake = bnTotalStake.add(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(currentDelegationAmount));
    if (!bnTotalStake.gte(bnMinStake)) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.NOT_ENOUGH_MIN_STAKE, minStakeErrorMessage));
    }
    if (hasUnstaking) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_1__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingTxErrorType.EXIST_UNSTAKING_REQUEST, existUnstakeErrorMessage));
    }
  }
  return errors;
}
function subscribeParaChainStakingMetadata(chain, substrateApi, callback) {
  return substrateApi.api.query.parachainStaking.round(_round => {
    var _substrateApi$api$con, _substrateApi$api$con2, _substrateApi$api$con3;
    const roundObj = _round.toHuman();
    const round = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.parseRawNumber)(roundObj.current);
    const maxDelegations = (_substrateApi$api$con = substrateApi.api.consts) === null || _substrateApi$api$con === void 0 ? void 0 : (_substrateApi$api$con2 = _substrateApi$api$con.parachainStaking) === null || _substrateApi$api$con2 === void 0 ? void 0 : (_substrateApi$api$con3 = _substrateApi$api$con2.maxDelegationsPerDelegator) === null || _substrateApi$api$con3 === void 0 ? void 0 : _substrateApi$api$con3.toString();
    const unstakingDelay = substrateApi.api.consts.parachainStaking.delegationBondLessDelay.toString();
    const unstakingPeriod = parseInt(unstakingDelay) * (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chain] || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP["default"]);
    callback(chain, {
      chain,
      type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
      era: round,
      minStake: '0',
      maxValidatorPerNominator: parseInt(maxDelegations),
      maxWithdrawalRequestPerValidator: 1,
      // by default
      allowCancelUnstaking: true,
      unstakingPeriod
    });
  });
}
async function getParaChainStakingMetadata(chain, substrateApi) {
  const chainApi = await substrateApi.isReady;
  const _round = (await chainApi.api.query.parachainStaking.round()).toHuman();
  const round = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.parseRawNumber)(_round.current);
  const maxDelegations = chainApi.api.consts.parachainStaking.maxDelegationsPerDelegator.toString();
  const unstakingDelay = chainApi.api.consts.parachainStaking.delegationBondLessDelay.toString();
  let _unvestedAllocation;
  if (chainApi.api.query.vesting && chainApi.api.query.vesting.totalUnvestedAllocation) {
    _unvestedAllocation = await chainApi.api.query.vesting.totalUnvestedAllocation();
  }
  const [_totalStake, _totalIssuance, _inflation] = await Promise.all([chainApi.api.query.parachainStaking.staked(round), chainApi.api.query.balances.totalIssuance(), chainApi.api.query.parachainStaking.inflationConfig()]);
  let unvestedAllocation;
  if (_unvestedAllocation) {
    const rawUnvestedAllocation = _unvestedAllocation.toString();
    unvestedAllocation = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(rawUnvestedAllocation);
  }
  const totalStake = _totalStake ? new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(_totalStake.toString()) : _polkadot_util__WEBPACK_IMPORTED_MODULE_6__.BN_ZERO;
  const totalIssuance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(_totalIssuance.toString());
  if (unvestedAllocation) {
    totalIssuance.add(unvestedAllocation); // for Turing network, read more at https://hackmd.io/@sbAqOuXkRvyiZPOB3Ryn6Q/Sypr3ZJh5
  }

  const inflationConfig = _inflation.toHuman();
  const inflation = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getParaCurrentInflation)((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.parseRawNumber)(totalStake.toString()), inflationConfig);
  const unstakingPeriod = parseInt(unstakingDelay) * _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chain];
  return {
    chain,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
    era: round,
    inflation,
    minStake: '0',
    maxValidatorPerNominator: parseInt(maxDelegations),
    maxWithdrawalRequestPerValidator: 1,
    // by default
    allowCancelUnstaking: true,
    unstakingPeriod
  };
}
async function subscribeParaChainNominatorMetadata(chainInfo, address, substrateApi, delegatorState) {
  const nominationList = [];
  const unstakingMap = {};
  let bnTotalActiveStake = _polkadot_util__WEBPACK_IMPORTED_MODULE_6__.BN_ZERO;
  const _roundInfo = await substrateApi.api.query.parachainStaking.round();
  const roundInfo = _roundInfo.toPrimitive();
  const currentRound = roundInfo.current;
  await Promise.all(delegatorState.delegations.map(async delegation => {
    var _substrateApi$api$que;
    const [_delegationScheduledRequests, _identity, _collatorInfo] = await Promise.all([substrateApi.api.query.parachainStaking.delegationScheduledRequests(delegation.owner), (_substrateApi$api$que = substrateApi.api.query.identity) === null || _substrateApi$api$que === void 0 ? void 0 : _substrateApi$api$que.identityOf(delegation.owner), substrateApi.api.query.parachainStaking.candidateInfo(delegation.owner)]);
    const collatorInfo = _collatorInfo.toPrimitive();
    const minDelegation = collatorInfo === null || collatorInfo === void 0 ? void 0 : collatorInfo.lowestTopDelegationAmount.toString();
    const identityInfo = _identity === null || _identity === void 0 ? void 0 : _identity.toHuman();
    const delegationScheduledRequests = _delegationScheduledRequests.toPrimitive();
    const identity = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.parseIdentity)(identityInfo);
    let hasUnstaking = false;
    let delegationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_EARNING;

    // parse unstaking info
    if (delegationScheduledRequests) {
      for (const scheduledRequest of delegationScheduledRequests) {
        if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(scheduledRequest.delegator, 0) === (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(address, 0)) {
          // add network prefix
          const isClaimable = scheduledRequest.whenExecutable - currentRound < 0;
          const remainingEra = scheduledRequest.whenExecutable - currentRound;
          const waitingTime = remainingEra * _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chainInfo.slug];
          const claimable = Object.values(scheduledRequest.action)[0];
          unstakingMap[delegation.owner] = {
            chain: chainInfo.slug,
            status: isClaimable ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.UnstakingStatus.CLAIMABLE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.UnstakingStatus.UNLOCKING,
            validatorAddress: delegation.owner,
            claimable: claimable.toString(),
            waitingTime
          };
          hasUnstaking = true;
          break; // only handle 1 scheduledRequest per collator
        }
      }
    }

    const bnStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(delegation.amount);
    const bnUnstakeBalance = unstakingMap[delegation.owner] ? new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(unstakingMap[delegation.owner].claimable) : _polkadot_util__WEBPACK_IMPORTED_MODULE_6__.BN_ZERO;
    const bnActiveStake = bnStake.sub(bnUnstakeBalance);
    if (bnActiveStake.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_6__.BN_ZERO) && bnActiveStake.gte(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(minDelegation))) {
      delegationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.EARNING_REWARD;
    }
    bnTotalActiveStake = bnTotalActiveStake.add(bnActiveStake);
    nominationList.push({
      chain: chainInfo.slug,
      status: delegationStatus,
      validatorAddress: delegation.owner,
      validatorIdentity: identity,
      activeStake: bnActiveStake.toString(),
      hasUnstaking,
      validatorMinStake: collatorInfo.lowestTopDelegationAmount.toString()
    });
  }));

  // await Promise.all(nominationList.map(async (nomination) => {
  //   const _collatorInfo = await substrateApi.api.query.parachainStaking.candidateInfo(nomination.validatorAddress);
  //   const collatorInfo = _collatorInfo.toPrimitive() as unknown as ParachainStakingCandidateMetadata;
  //
  //   nomination.validatorMinStake = collatorInfo.lowestTopDelegationAmount.toString();
  // }));

  const stakingStatus = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getStakingStatusByNominations)(bnTotalActiveStake, nominationList);
  return {
    chain: chainInfo.slug,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
    status: stakingStatus,
    address: address,
    activeStake: bnTotalActiveStake.toString(),
    nominations: nominationList,
    unstakings: Object.values(unstakingMap)
  };
}
async function getParaChainNominatorMetadata(chainInfo, address, substrateApi) {
  if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._isChainEvmCompatible)(chainInfo) && !(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_8__.isEthereumAddress)(address)) {
    return;
  }
  const chain = chainInfo.slug;
  const chainApi = await substrateApi.isReady;
  const nominationList = [];
  const unstakingMap = {};
  const _delegatorState = await chainApi.api.query.parachainStaking.delegatorState(address);
  const delegatorState = _delegatorState.toPrimitive();
  if (!delegatorState) {
    return {
      chain: chainInfo.slug,
      type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
      address,
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING,
      activeStake: '0',
      nominations: [],
      unstakings: []
    };
  }
  let bnTotalActiveStake = _polkadot_util__WEBPACK_IMPORTED_MODULE_6__.BN_ZERO;
  await Promise.all(delegatorState.delegations.map(async delegation => {
    const [_delegationScheduledRequests, _identity, _roundInfo, _collatorInfo] = await Promise.all([chainApi.api.query.parachainStaking.delegationScheduledRequests(delegation.owner), chainApi.api.query.identity.identityOf(delegation.owner), chainApi.api.query.parachainStaking.round(), chainApi.api.query.parachainStaking.candidateInfo(delegation.owner)]);
    const rawCollatorInfo = _collatorInfo.toHuman();
    const minDelegation = (rawCollatorInfo === null || rawCollatorInfo === void 0 ? void 0 : rawCollatorInfo.lowestTopDelegationAmount).replaceAll(',', '');
    const identityInfo = _identity.toHuman();
    const roundInfo = _roundInfo.toPrimitive();
    const delegationScheduledRequests = _delegationScheduledRequests.toPrimitive();
    const currentRound = roundInfo.current;
    const identity = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.parseIdentity)(identityInfo);
    let hasUnstaking = false;
    let delegationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_EARNING;

    // parse unstaking info
    if (delegationScheduledRequests) {
      for (const scheduledRequest of delegationScheduledRequests) {
        if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(scheduledRequest.delegator, 0) === (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(address, 0)) {
          // add network prefix
          const isClaimable = scheduledRequest.whenExecutable - currentRound < 0;
          const remainingEra = scheduledRequest.whenExecutable - (currentRound + 1);
          const waitingTime = remainingEra * _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chain];
          const claimable = Object.values(scheduledRequest.action)[0];
          unstakingMap[delegation.owner] = {
            chain,
            status: isClaimable ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.UnstakingStatus.CLAIMABLE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.UnstakingStatus.UNLOCKING,
            validatorAddress: delegation.owner,
            claimable: claimable.toString(),
            waitingTime: waitingTime
          };
          hasUnstaking = true;
          break; // only handle 1 scheduledRequest per collator
        }
      }
    }

    const bnStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(delegation.amount);
    const bnUnstakeBalance = unstakingMap[delegation.owner] ? new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(unstakingMap[delegation.owner].claimable) : _polkadot_util__WEBPACK_IMPORTED_MODULE_6__.BN_ZERO;
    const bnActiveStake = bnStake.sub(bnUnstakeBalance);
    if (bnActiveStake.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_6__.BN_ZERO) && bnActiveStake.gte(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(minDelegation))) {
      delegationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.EARNING_REWARD;
    }
    bnTotalActiveStake = bnTotalActiveStake.add(bnActiveStake);
    nominationList.push({
      chain,
      status: delegationStatus,
      validatorAddress: delegation.owner,
      validatorIdentity: identity,
      activeStake: bnActiveStake.toString(),
      hasUnstaking
    });
  }));
  await Promise.all(nominationList.map(async nomination => {
    const _collatorInfo = await chainApi.api.query.parachainStaking.candidateInfo(nomination.validatorAddress);
    const collatorInfo = _collatorInfo.toPrimitive();
    nomination.validatorMinStake = collatorInfo.lowestTopDelegationAmount.toString();
  }));
  const stakingStatus = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getStakingStatusByNominations)(bnTotalActiveStake, nominationList);
  return {
    chain,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
    status: stakingStatus,
    address: address,
    activeStake: bnTotalActiveStake.toString(),
    nominations: nominationList,
    unstakings: Object.values(unstakingMap)
  };
}
async function getParachainCollatorsInfo(chain, substrateApi) {
  const apiProps = await substrateApi.isReady;
  const allCollators = [];
  const [_allCollators, _collatorCommission] = await Promise.all([apiProps.api.query.parachainStaking.candidateInfo.entries(), apiProps.api.query.parachainStaking.collatorCommission()]);
  const maxDelegationPerCollator = apiProps.api.consts.parachainStaking.maxTopDelegationsPerCandidate.toString();
  const rawCollatorCommission = _collatorCommission.toHuman();
  const collatorCommission = parseFloat(rawCollatorCommission.split('%')[0]);
  for (const collator of _allCollators) {
    const _collatorAddress = collator[0].toHuman();
    const collatorAddress = _collatorAddress[0];
    const collatorInfo = collator[1].toPrimitive();
    const bnTotalStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(collatorInfo.totalCounted);
    const bnOwnStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(collatorInfo.bond);
    const bnOtherStake = bnTotalStake.sub(bnOwnStake);
    const bnMinBond = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(collatorInfo.lowestTopDelegationAmount);
    allCollators.push({
      commission: 0,
      expectedReturn: 0,
      address: collatorAddress,
      totalStake: bnTotalStake.toString(),
      ownStake: bnOwnStake.toString(),
      otherStake: bnOtherStake.toString(),
      nominatorCount: collatorInfo.delegationCount,
      blocked: false,
      isVerified: false,
      minBond: bnMinBond.toString(),
      chain,
      isCrowded: parseInt(maxDelegationPerCollator) > 0
    });
  }
  const extraInfoMap = {};
  await Promise.all(allCollators.map(async collator => {
    var _apiProps$api$query, _apiProps$api$query$i;
    const [_info, _identity] = await Promise.all([apiProps.api.query.parachainStaking.candidateInfo(collator.address), (_apiProps$api$query = apiProps.api.query) === null || _apiProps$api$query === void 0 ? void 0 : (_apiProps$api$query$i = _apiProps$api$query.identity) === null || _apiProps$api$query$i === void 0 ? void 0 : _apiProps$api$query$i.identityOf(collator.address) // some chains might not have identity pallet
    ]);
    const rawInfo = _info.toHuman();
    const rawIdentity = _identity ? _identity.toHuman() : null;
    const active = (rawInfo === null || rawInfo === void 0 ? void 0 : rawInfo.status) === 'Active';
    let isReasonable = false;
    let identity;
    if (rawIdentity !== null) {
      // Check if identity is eth address
      isReasonable = rawIdentity.judgements.length > 0;
      identity = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.parseIdentity)(rawIdentity);
    }
    extraInfoMap[collator.address] = {
      identity,
      isVerified: isReasonable,
      active
    };
  }));
  for (const validator of allCollators) {
    validator.blocked = !extraInfoMap[validator.address].active;
    validator.identity = extraInfoMap[validator.address].identity;
    validator.isVerified = extraInfoMap[validator.address].isVerified;
    // @ts-ignore
    validator.commission = collatorCommission;
  }
  return allCollators;
}
async function getParaBondingExtrinsic(chainInfo, substrateApi, amount, selectedCollatorInfo, nominatorMetadata) {
  const apiPromise = await substrateApi.isReady;
  const binaryAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(amount);
  if (!nominatorMetadata) {
    return apiPromise.api.tx.parachainStaking.delegate(selectedCollatorInfo.address, binaryAmount, new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(selectedCollatorInfo.nominatorCount), 0);
  }
  const {
    bondedValidators,
    nominationCount
  } = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getBondedValidators)(nominatorMetadata.nominations);
  const parsedSelectedCollatorAddress = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.reformatAddress)(selectedCollatorInfo.address, 0);
  if (!bondedValidators.includes(parsedSelectedCollatorAddress)) {
    return apiPromise.api.tx.parachainStaking.delegate(selectedCollatorInfo.address, binaryAmount, new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(selectedCollatorInfo.nominatorCount), nominationCount);
  } else {
    return apiPromise.api.tx.parachainStaking.delegatorBondMore(selectedCollatorInfo.address, binaryAmount);
  }
}
async function getParaUnbondingExtrinsic(substrateApi, amount, nominatorMetadata, selectedValidator) {
  const apiPromise = await substrateApi.isReady;
  const binaryAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(amount);
  const unstakeAll = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.isUnstakeAll)(selectedValidator, nominatorMetadata.nominations, amount);
  if (!unstakeAll) {
    return apiPromise.api.tx.parachainStaking.scheduleDelegatorBondLess(selectedValidator, binaryAmount);
  } else {
    return apiPromise.api.tx.parachainStaking.scheduleRevokeDelegation(selectedValidator);
  }
}
async function getParaWithdrawalExtrinsic(substrateApi, address, collatorAddress) {
  const chainApi = await substrateApi.isReady;
  return chainApi.api.tx.parachainStaking.executeDelegationRequest(address, collatorAddress);
}
async function getTuringCompoundExtrinsic(substrateApi, address, collatorAddress, accountMinimum, bondedAmount) {
  const apiPromise = await substrateApi.isReady;

  // @ts-ignore
  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
  const _optimalCompounding = await apiPromise.api.rpc.automationTime.calculateOptimalAutostaking(bondedAmount, collatorAddress);

  // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
  const optimalCompounding = _optimalCompounding.toHuman();
  const compoundingPeriod = parseInt(optimalCompounding.period); // in days

  const frequency = compoundingPeriod * 24 * 60 * 60; // in seconds
  const timestamp = new Date();
  timestamp.setDate(timestamp.getDate() + compoundingPeriod);
  timestamp.setHours(timestamp.getHours() + Math.round(timestamp.getMinutes() / 60));
  timestamp.setMinutes(0, 0, 0);
  const startTime = Math.floor(timestamp.valueOf() / 1000); // must be in seconds

  return apiPromise.api.tx.automationTime.scheduleAutoCompoundDelegatedStakeTask(startTime.toString(), frequency.toString(), collatorAddress, accountMinimum);
}
async function getTuringCancelCompoundingExtrinsic(substrateApi, taskId) {
  const apiPromise = await substrateApi.isReady;
  return apiPromise.api.tx.automationTime.cancelTask(taskId);
}
async function getParaCancelWithdrawalExtrinsic(substrateApi, selectedUnstaking) {
  const chainApi = await substrateApi.isReady;
  return chainApi.api.tx.parachainStaking.cancelDelegationRequest(selectedUnstaking.validatorAddress);
}

/***/ }),

/***/ "../extension-base/src/koni/api/staking/bonding/relayChain.ts":
/*!********************************************************************!*\
  !*** ../extension-base/src/koni/api/staking/bonding/relayChain.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getPoolingBondingExtrinsic": () => (/* binding */ getPoolingBondingExtrinsic),
/* harmony export */   "getPoolingClaimRewardExtrinsic": () => (/* binding */ getPoolingClaimRewardExtrinsic),
/* harmony export */   "getPoolingUnbondingExtrinsic": () => (/* binding */ getPoolingUnbondingExtrinsic),
/* harmony export */   "getPoolingWithdrawalExtrinsic": () => (/* binding */ getPoolingWithdrawalExtrinsic),
/* harmony export */   "getRelayBondingExtrinsic": () => (/* binding */ getRelayBondingExtrinsic),
/* harmony export */   "getRelayCancelWithdrawalExtrinsic": () => (/* binding */ getRelayCancelWithdrawalExtrinsic),
/* harmony export */   "getRelayChainNominatorMetadata": () => (/* binding */ getRelayChainNominatorMetadata),
/* harmony export */   "getRelayChainPoolMemberMetadata": () => (/* binding */ getRelayChainPoolMemberMetadata),
/* harmony export */   "getRelayChainStakingMetadata": () => (/* binding */ getRelayChainStakingMetadata),
/* harmony export */   "getRelayPoolsInfo": () => (/* binding */ getRelayPoolsInfo),
/* harmony export */   "getRelayUnbondingExtrinsic": () => (/* binding */ getRelayUnbondingExtrinsic),
/* harmony export */   "getRelayValidatorsInfo": () => (/* binding */ getRelayValidatorsInfo),
/* harmony export */   "getRelayWithdrawalExtrinsic": () => (/* binding */ getRelayWithdrawalExtrinsic),
/* harmony export */   "subscribeRelayChainNominatorMetadata": () => (/* binding */ subscribeRelayChainNominatorMetadata),
/* harmony export */   "subscribeRelayChainPoolMemberMetadata": () => (/* binding */ subscribeRelayChainPoolMemberMetadata),
/* harmony export */   "subscribeRelayChainStakingMetadata": () => (/* binding */ subscribeRelayChainStakingMetadata),
/* harmony export */   "validatePoolBondingCondition": () => (/* binding */ validatePoolBondingCondition),
/* harmony export */   "validateRelayBondingCondition": () => (/* binding */ validateRelayBondingCondition),
/* harmony export */   "validateRelayUnbondingCondition": () => (/* binding */ validateRelayUnbondingCondition)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/TransactionError */ "../extension-base/src/background/errors/TransactionError.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/utils */ "../extension-base/src/koni/api/staking/bonding/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/bn/consts.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0










function validateRelayUnbondingCondition(amount, chainStakingMetadata, nominatorMetadata) {
  const errors = [];
  const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(nominatorMetadata.activeStake);
  const bnRemainingStake = bnActiveStake.sub(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(amount));
  const minStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(chainStakingMetadata.minJoinNominationPool || '0');
  if (!(bnRemainingStake.isZero() || bnRemainingStake.gte(minStake))) {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.INVALID_ACTIVE_STAKE));
  }
  if (nominatorMetadata.unstakings.length > chainStakingMetadata.maxWithdrawalRequestPerValidator) {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.EXCEED_MAX_UNSTAKING, (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)('You cannot unstake more than {{number}} times', {
      replace: {
        number: chainStakingMetadata.maxWithdrawalRequestPerValidator
      }
    })));
  }
  return errors;
}
function validatePoolBondingCondition(chainInfo, amount, selectedPool, address, chainStakingMetadata, nominatorMetadata) {
  // cannot stake when unstake all
  // amount >= min stake
  const errors = [];
  let bnTotalStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(amount);
  const bnMinStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(chainStakingMetadata.minJoinNominationPool || '0');
  const minStakeErrorMessage = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getMinStakeErrorMessage)(chainInfo, bnMinStake);
  const existUnstakeErrorMessage = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getExistUnstakeErrorMessage)(chainInfo.slug, true);
  if (selectedPool.state !== 'Open') {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.INACTIVE_NOMINATION_POOL));
  }
  if (nominatorMetadata) {
    const bnCurrentActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(nominatorMetadata.activeStake);
    bnTotalStake = bnTotalStake.add(bnCurrentActiveStake);
    if (nominatorMetadata.unstakings.length > 0 && bnCurrentActiveStake.isZero()) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.EXIST_UNSTAKING_REQUEST, existUnstakeErrorMessage));
    }
  }
  if (!bnTotalStake.gte(bnMinStake)) {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.NOT_ENOUGH_MIN_STAKE, minStakeErrorMessage));
  }
  return errors;
}
function validateRelayBondingCondition(chainInfo, amount, selectedValidators, address, chainStakingMetadata, nominatorMetadata) {
  const errors = [];
  let bnTotalStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(amount);
  const bnMinStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(chainStakingMetadata.minStake);
  const minStakeErrorMessage = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getMinStakeErrorMessage)(chainInfo, bnMinStake);
  const maxValidatorErrorMessage = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getMaxValidatorErrorMessage)(chainInfo, chainStakingMetadata.maxValidatorPerNominator);
  if (!nominatorMetadata || nominatorMetadata.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_STAKING) {
    if (!bnTotalStake.gte(bnMinStake)) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.NOT_ENOUGH_MIN_STAKE, minStakeErrorMessage));
    }
    if (selectedValidators.length > chainStakingMetadata.maxValidatorPerNominator) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.EXCEED_MAX_NOMINATIONS, maxValidatorErrorMessage));
    }
    return errors;
  }
  const bnCurrentActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(nominatorMetadata.activeStake);
  bnTotalStake = bnTotalStake.add(bnCurrentActiveStake);
  if (!bnTotalStake.gte(bnMinStake)) {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.NOT_ENOUGH_MIN_STAKE, minStakeErrorMessage));
  }
  if (selectedValidators.length > chainStakingMetadata.maxValidatorPerNominator) {
    errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_2__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingTxErrorType.EXCEED_MAX_NOMINATIONS, maxValidatorErrorMessage));
  }
  return errors;
}
function subscribeRelayChainStakingMetadata(chainInfo, substrateApi, callback) {
  return substrateApi.api.query.staking.currentEra(async _currentEra => {
    var _substrateApi$api$que, _substrateApi$api$que2, _substrateApi$api$que3, _substrateApi$api$que4, _substrateApi$api$que5, _substrateApi$api$que6, _substrateApi$api$que7;
    const currentEra = _currentEra.toString();
    const maxNominations = substrateApi.api.consts.staking.maxNominations.toString();
    const maxUnlockingChunks = substrateApi.api.consts.staking.maxUnlockingChunks.toString();
    const unlockingEras = substrateApi.api.consts.staking.bondingDuration.toString();
    const [_totalEraStake, _totalIssuance, _auctionCounter, _minNominatorBond, _minPoolJoin, _minimumActiveStake] = await Promise.all([substrateApi.api.query.staking.erasTotalStake(parseInt(currentEra)), substrateApi.api.query.balances.totalIssuance(), (_substrateApi$api$que = substrateApi.api.query.auctions) === null || _substrateApi$api$que === void 0 ? void 0 : _substrateApi$api$que.auctionCounter(), substrateApi.api.query.staking.minNominatorBond(), (_substrateApi$api$que2 = substrateApi.api.query) === null || _substrateApi$api$que2 === void 0 ? void 0 : (_substrateApi$api$que3 = _substrateApi$api$que2.nominationPools) === null || _substrateApi$api$que3 === void 0 ? void 0 : _substrateApi$api$que3.minJoinBond(), ((_substrateApi$api$que4 = substrateApi.api.query) === null || _substrateApi$api$que4 === void 0 ? void 0 : (_substrateApi$api$que5 = _substrateApi$api$que4.staking) === null || _substrateApi$api$que5 === void 0 ? void 0 : _substrateApi$api$que5.minimumActiveStake) && ((_substrateApi$api$que6 = substrateApi.api.query) === null || _substrateApi$api$que6 === void 0 ? void 0 : (_substrateApi$api$que7 = _substrateApi$api$que6.staking) === null || _substrateApi$api$que7 === void 0 ? void 0 : _substrateApi$api$que7.minimumActiveStake())]);
    const minActiveStake = (_minimumActiveStake === null || _minimumActiveStake === void 0 ? void 0 : _minimumActiveStake.toString()) || '0';
    const minNominatorBond = _minNominatorBond.toString();
    const bnMinActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(minActiveStake);
    const bnMinNominatorBond = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(minNominatorBond);
    const minStake = bnMinActiveStake.gt(bnMinNominatorBond) ? bnMinActiveStake : bnMinNominatorBond;
    const rawTotalEraStake = _totalEraStake.toString();
    const rawTotalIssuance = _totalIssuance.toString();
    const numAuctions = _auctionCounter ? _auctionCounter.toHuman() : 0;
    const bnTotalEraStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(rawTotalEraStake);
    const bnTotalIssuance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(rawTotalIssuance);
    const inflation = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.calculateInflation)(bnTotalEraStake, bnTotalIssuance, numAuctions, chainInfo.slug);
    const expectedReturn = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.calculateChainStakedReturn)(inflation, bnTotalEraStake, bnTotalIssuance, chainInfo.slug);
    const minPoolJoin = (_minPoolJoin === null || _minPoolJoin === void 0 ? void 0 : _minPoolJoin.toString()) || undefined;
    const unlockingPeriod = parseInt(unlockingEras) * (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chainInfo.slug] || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP["default"]); // in hours

    callback(chainInfo.slug, {
      chain: chainInfo.slug,
      type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
      expectedReturn: !_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_CHAIN_GROUP.ternoa.includes(chainInfo.slug) ? expectedReturn : undefined,
      // in %, annually
      inflation,
      era: parseInt(currentEra),
      minStake: minStake.toString(),
      maxValidatorPerNominator: parseInt(maxNominations),
      maxWithdrawalRequestPerValidator: parseInt(maxUnlockingChunks),
      allowCancelUnstaking: true,
      unstakingPeriod: unlockingPeriod,
      minJoinNominationPool: minPoolJoin
    });
  });
}
async function getRelayChainStakingMetadata(chainInfo, substrateApi) {
  var _chainApi$api$query$a, _chainApi$api$query, _chainApi$api$query$s, _chainApi$api$query2, _chainApi$api$query2$, _chainApi$api$query3, _chainApi$api$query3$;
  const chain = chainInfo.slug;
  const chainApi = await substrateApi.isReady;
  const _era = await chainApi.api.query.staking.currentEra();
  const currentEra = _era.toString();
  const maxNominations = chainApi.api.consts.staking.maxNominations.toString();
  const maxUnlockingChunks = chainApi.api.consts.staking.maxUnlockingChunks.toString();
  const unlockingEras = chainApi.api.consts.staking.bondingDuration.toString();
  const [_totalEraStake, _totalIssuance, _auctionCounter, _minimumActiveStake, _minNominatorBond, _minPoolJoin, _eraStakers] = await Promise.all([chainApi.api.query.staking.erasTotalStake(parseInt(currentEra)), chainApi.api.query.balances.totalIssuance(), (_chainApi$api$query$a = chainApi.api.query.auctions) === null || _chainApi$api$query$a === void 0 ? void 0 : _chainApi$api$query$a.auctionCounter(), ((_chainApi$api$query = chainApi.api.query) === null || _chainApi$api$query === void 0 ? void 0 : (_chainApi$api$query$s = _chainApi$api$query.staking) === null || _chainApi$api$query$s === void 0 ? void 0 : _chainApi$api$query$s.minimumActiveStake) && ((_chainApi$api$query2 = chainApi.api.query) === null || _chainApi$api$query2 === void 0 ? void 0 : (_chainApi$api$query2$ = _chainApi$api$query2.staking) === null || _chainApi$api$query2$ === void 0 ? void 0 : _chainApi$api$query2$.minimumActiveStake()), chainApi.api.query.staking.minNominatorBond(), (_chainApi$api$query3 = chainApi.api.query) === null || _chainApi$api$query3 === void 0 ? void 0 : (_chainApi$api$query3$ = _chainApi$api$query3.nominationPools) === null || _chainApi$api$query3$ === void 0 ? void 0 : _chainApi$api$query3$.minJoinBond(), chainApi.api.query.staking.erasStakers.entries(parseInt(currentEra))]);
  const eraStakers = _eraStakers;
  let allCurrentNominators = [];
  const nominatorList = [];
  for (const item of eraStakers) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
    const rawValidatorStat = item[1].toHuman();
    const eraNominators = rawValidatorStat.others;
    allCurrentNominators = allCurrentNominators.concat(eraNominators);
  }
  for (const nominator of allCurrentNominators) {
    if (!nominatorList.includes(nominator.who)) {
      nominatorList.push(nominator.who);
    }
  }
  const minActiveStake = (_minimumActiveStake === null || _minimumActiveStake === void 0 ? void 0 : _minimumActiveStake.toString()) || '0';
  const minNominatorBond = _minNominatorBond.toString();
  const bnMinActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(minActiveStake);
  const bnMinNominatorBond = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(minNominatorBond);
  const minStake = bnMinActiveStake.gt(bnMinNominatorBond) ? bnMinActiveStake : bnMinNominatorBond;
  const minPoolJoin = (_minPoolJoin === null || _minPoolJoin === void 0 ? void 0 : _minPoolJoin.toString()) || undefined;
  const rawTotalEraStake = _totalEraStake.toString();
  const rawTotalIssuance = _totalIssuance.toString();
  const numAuctions = _auctionCounter ? _auctionCounter.toHuman() : 0;
  const bnTotalEraStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(rawTotalEraStake);
  const bnTotalIssuance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(rawTotalIssuance);
  const inflation = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.calculateInflation)(bnTotalEraStake, bnTotalIssuance, numAuctions, chain);
  const expectedReturn = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.calculateChainStakedReturn)(inflation, bnTotalEraStake, bnTotalIssuance, chain);
  const unlockingPeriod = parseInt(unlockingEras) * _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chain]; // in hours

  return {
    chain,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
    era: parseInt(currentEra),
    expectedReturn: !_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_CHAIN_GROUP.ternoa.includes(chain) ? expectedReturn : undefined,
    // in %, annually
    inflation,
    minStake: minStake.toString(),
    maxValidatorPerNominator: parseInt(maxNominations),
    maxWithdrawalRequestPerValidator: parseInt(maxUnlockingChunks),
    allowCancelUnstaking: true,
    unstakingPeriod: unlockingPeriod,
    minJoinNominationPool: minPoolJoin,
    nominatorCount: nominatorList.length
  };
}
async function subscribeRelayChainNominatorMetadata(chainInfo, address, substrateApi, ledger) {
  var _chainApi$api$query4, _chainApi$api$query4$, _chainApi$api$query5, _chainApi$api$query5$, _chainApi$api$query6, _chainApi$api$query6$, _chainApi$api$query7, _chainApi$api$query7$, _chainApi$api$query8, _chainApi$api$query8$, _chainApi$api$query9, _chainApi$api$query9$;
  const chain = chainInfo.slug;
  const chainApi = await substrateApi.isReady;
  const [_nominations, _currentEra, _bonded, _minimumActiveStake, _minNominatorBond] = await Promise.all([(_chainApi$api$query4 = chainApi.api.query) === null || _chainApi$api$query4 === void 0 ? void 0 : (_chainApi$api$query4$ = _chainApi$api$query4.staking) === null || _chainApi$api$query4$ === void 0 ? void 0 : _chainApi$api$query4$.nominators(address), (_chainApi$api$query5 = chainApi.api.query) === null || _chainApi$api$query5 === void 0 ? void 0 : (_chainApi$api$query5$ = _chainApi$api$query5.staking) === null || _chainApi$api$query5$ === void 0 ? void 0 : _chainApi$api$query5$.currentEra(), (_chainApi$api$query6 = chainApi.api.query) === null || _chainApi$api$query6 === void 0 ? void 0 : (_chainApi$api$query6$ = _chainApi$api$query6.staking) === null || _chainApi$api$query6$ === void 0 ? void 0 : _chainApi$api$query6$.bonded(address), ((_chainApi$api$query7 = chainApi.api.query) === null || _chainApi$api$query7 === void 0 ? void 0 : (_chainApi$api$query7$ = _chainApi$api$query7.staking) === null || _chainApi$api$query7$ === void 0 ? void 0 : _chainApi$api$query7$.minimumActiveStake) && ((_chainApi$api$query8 = chainApi.api.query) === null || _chainApi$api$query8 === void 0 ? void 0 : (_chainApi$api$query8$ = _chainApi$api$query8.staking) === null || _chainApi$api$query8$ === void 0 ? void 0 : _chainApi$api$query8$.minimumActiveStake()), (_chainApi$api$query9 = chainApi.api.query) === null || _chainApi$api$query9 === void 0 ? void 0 : (_chainApi$api$query9$ = _chainApi$api$query9.staking) === null || _chainApi$api$query9$ === void 0 ? void 0 : _chainApi$api$query9$.minNominatorBond()]);
  const minActiveStake = (_minimumActiveStake === null || _minimumActiveStake === void 0 ? void 0 : _minimumActiveStake.toString()) || '0';
  const minNominatorBond = _minNominatorBond.toString();
  const bnMinActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(minActiveStake);
  const bnMinNominatorBond = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(minNominatorBond);
  const minStake = bnMinActiveStake.gt(bnMinNominatorBond) ? bnMinActiveStake : bnMinNominatorBond;
  const _maxNominatorRewardedPerValidator = chainApi.api.consts.staking.maxNominatorRewardedPerValidator.toString();
  const maxNominatorRewardedPerValidator = parseInt(_maxNominatorRewardedPerValidator);
  const nominations = _nominations.toPrimitive();
  const currentEra = _currentEra.toString();
  const bonded = _bonded.toHuman();
  const activeStake = ledger.active.toString();
  const nominationList = [];
  const unstakingList = [];
  if (nominations) {
    const validatorList = nominations.targets;
    await Promise.all(validatorList.map(async validatorAddress => {
      var _chainApi$api$query$i;
      let nominationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_EARNING;
      const [_identityInfo, _eraStaker] = await Promise.all([(_chainApi$api$query$i = chainApi.api.query.identity) === null || _chainApi$api$query$i === void 0 ? void 0 : _chainApi$api$query$i.identityOf(validatorAddress), chainApi.api.query.staking.erasStakers(currentEra, validatorAddress)]);
      const eraStaker = _eraStaker.toPrimitive();
      const identityInfo = _identityInfo === null || _identityInfo === void 0 ? void 0 : _identityInfo.toHuman();
      const identity = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.parseIdentity)(identityInfo);
      const topNominators = eraStaker.others.map(nominator => {
        return nominator.who;
      });
      if (!topNominators.includes((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__.reformatAddress)(address, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainSubstrateAddressPrefix)(chainInfo)))) {
        // if nominator has target but not in nominator list
        nominationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.WAITING;
      } else if (topNominators.slice(0, maxNominatorRewardedPerValidator).includes((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__.reformatAddress)(address, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainSubstrateAddressPrefix)(chainInfo)))) {
        // if address in top nominators
        nominationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.EARNING_REWARD;
      }
      nominationList.push({
        chain,
        validatorAddress,
        status: nominationStatus,
        validatorIdentity: identity,
        activeStake: '0' // relaychain allocates stake accordingly
      });
    }));
  }

  let stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_EARNING;
  const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(activeStake);
  let waitingNominationCount = 0;
  if (bnActiveStake.gte(minStake)) {
    for (const nomination of nominationList) {
      if (nomination.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.EARNING_REWARD) {
        // only need 1 earning nomination to count
        stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.EARNING_REWARD;
      } else if (nomination.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.WAITING) {
        waitingNominationCount += 1;
      }
    }
    if (waitingNominationCount === nominationList.length) {
      stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.WAITING;
    }
  }
  ledger.unlocking.forEach(unlockingChunk => {
    const isClaimable = unlockingChunk.era - parseInt(currentEra) < 0;
    const remainingEra = unlockingChunk.era - parseInt(currentEra);
    const waitingTime = remainingEra * _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chain];
    unstakingList.push({
      chain,
      status: isClaimable ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.UnstakingStatus.CLAIMABLE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.UnstakingStatus.UNLOCKING,
      claimable: unlockingChunk.value.toString(),
      waitingTime: waitingTime
    });
  });
  return {
    chain,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
    status: stakingStatus,
    address: address,
    activeStake,
    nominations: nominationList,
    unstakings: unstakingList,
    isBondedBefore: bonded !== null
  };
}
async function getRelayChainNominatorMetadata(chainInfo, address, substrateApi) {
  var _chainApi$api$query10, _chainApi$api$query11, _chainApi$api$query12, _chainApi$api$query13, _chainApi$api$query14, _chainApi$api$query15, _chainApi$api$query16, _chainApi$api$query17, _chainApi$api$query18, _chainApi$api$query19, _chainApi$api$query20, _chainApi$api$query21, _chainApi$api$query22, _chainApi$api$query23;
  if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_8__.isEthereumAddress)(address)) {
    return;
  }
  const chain = chainInfo.slug;
  const chainApi = await substrateApi.isReady;
  const [_ledger, _nominations, _currentEra, _bonded, _minimumActiveStake, _minNominatorBond] = await Promise.all([(_chainApi$api$query10 = chainApi.api.query) === null || _chainApi$api$query10 === void 0 ? void 0 : (_chainApi$api$query11 = _chainApi$api$query10.staking) === null || _chainApi$api$query11 === void 0 ? void 0 : _chainApi$api$query11.ledger(address), (_chainApi$api$query12 = chainApi.api.query) === null || _chainApi$api$query12 === void 0 ? void 0 : (_chainApi$api$query13 = _chainApi$api$query12.staking) === null || _chainApi$api$query13 === void 0 ? void 0 : _chainApi$api$query13.nominators(address), (_chainApi$api$query14 = chainApi.api.query) === null || _chainApi$api$query14 === void 0 ? void 0 : (_chainApi$api$query15 = _chainApi$api$query14.staking) === null || _chainApi$api$query15 === void 0 ? void 0 : _chainApi$api$query15.currentEra(), (_chainApi$api$query16 = chainApi.api.query) === null || _chainApi$api$query16 === void 0 ? void 0 : (_chainApi$api$query17 = _chainApi$api$query16.staking) === null || _chainApi$api$query17 === void 0 ? void 0 : _chainApi$api$query17.bonded(address), ((_chainApi$api$query18 = chainApi.api.query) === null || _chainApi$api$query18 === void 0 ? void 0 : (_chainApi$api$query19 = _chainApi$api$query18.staking) === null || _chainApi$api$query19 === void 0 ? void 0 : _chainApi$api$query19.minimumActiveStake) && ((_chainApi$api$query20 = chainApi.api.query) === null || _chainApi$api$query20 === void 0 ? void 0 : (_chainApi$api$query21 = _chainApi$api$query20.staking) === null || _chainApi$api$query21 === void 0 ? void 0 : _chainApi$api$query21.minimumActiveStake()), (_chainApi$api$query22 = chainApi.api.query) === null || _chainApi$api$query22 === void 0 ? void 0 : (_chainApi$api$query23 = _chainApi$api$query22.staking) === null || _chainApi$api$query23 === void 0 ? void 0 : _chainApi$api$query23.minNominatorBond()]);
  const minActiveStake = (_minimumActiveStake === null || _minimumActiveStake === void 0 ? void 0 : _minimumActiveStake.toString()) || '0';
  const minNominatorBond = _minNominatorBond.toString();
  const bnMinActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(minActiveStake);
  const bnMinNominatorBond = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(minNominatorBond);
  const minStake = bnMinActiveStake.gt(bnMinNominatorBond) ? bnMinActiveStake : bnMinNominatorBond;
  const _maxNominatorRewardedPerValidator = chainApi.api.consts.staking.maxNominatorRewardedPerValidator.toString();
  const maxNominatorRewardedPerValidator = parseInt(_maxNominatorRewardedPerValidator);
  const ledger = _ledger.toPrimitive();
  const nominations = _nominations.toPrimitive();
  const currentEra = _currentEra.toString();
  const bonded = _bonded.toHuman();
  if (!ledger) {
    return {
      chain,
      type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_STAKING,
      address: address,
      activeStake: '0',
      nominations: [],
      unstakings: []
    };
  }
  const activeStake = ledger.active.toString();
  const nominationList = [];
  const unstakingList = [];
  if (nominations) {
    const validatorList = nominations.targets;
    await Promise.all(validatorList.map(async validatorAddress => {
      let nominationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_EARNING;
      const [_identityInfo, _eraStaker] = await Promise.all([chainApi.api.query.identity.identityOf(validatorAddress), chainApi.api.query.staking.erasStakers(currentEra, validatorAddress)]);
      const eraStaker = _eraStaker.toPrimitive();
      const identityInfo = _identityInfo.toHuman();
      const identity = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.parseIdentity)(identityInfo);
      const topNominators = eraStaker.others.map(nominator => {
        return nominator.who;
      });
      if (!topNominators.includes((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__.reformatAddress)(address, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainSubstrateAddressPrefix)(chainInfo)))) {
        // if nominator has target but not in nominator list
        nominationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.WAITING;
      } else if (topNominators.slice(0, maxNominatorRewardedPerValidator).includes((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__.reformatAddress)(address, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainSubstrateAddressPrefix)(chainInfo)))) {
        // if address in top nominators
        nominationStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.EARNING_REWARD;
      }
      nominationList.push({
        chain,
        validatorAddress,
        status: nominationStatus,
        validatorIdentity: identity,
        activeStake: '0' // relaychain allocates stake accordingly
      });
    }));
  }

  let stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_EARNING;
  const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(activeStake);
  let waitingNominationCount = 0;
  if (bnActiveStake.gte(minStake)) {
    for (const nomination of nominationList) {
      if (nomination.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.EARNING_REWARD) {
        // only need 1 earning nomination to count
        stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.EARNING_REWARD;
      } else if (nomination.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.WAITING) {
        waitingNominationCount += 1;
      }
    }
    if (waitingNominationCount === nominationList.length) {
      stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.WAITING;
    }
  }
  ledger.unlocking.forEach(unlockingChunk => {
    const isClaimable = unlockingChunk.era - parseInt(currentEra) < 0;
    const remainingEra = unlockingChunk.era - parseInt(currentEra);
    const waitingTime = remainingEra * _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chain];
    unstakingList.push({
      chain,
      status: isClaimable ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.UnstakingStatus.CLAIMABLE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.UnstakingStatus.UNLOCKING,
      claimable: unlockingChunk.value.toString(),
      waitingTime: waitingTime
    });
  });
  return {
    chain,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
    status: stakingStatus,
    address: address,
    activeStake,
    nominations: nominationList,
    unstakings: unstakingList,
    isBondedBefore: bonded !== null
  };
}
async function subscribeRelayChainPoolMemberMetadata(chainInfo, address, substrateApi, poolMemberInfo) {
  const _maxNominatorRewardedPerValidator = substrateApi.api.consts.staking.maxNominatorRewardedPerValidator.toString();
  const maxNominatorRewardedPerValidator = parseInt(_maxNominatorRewardedPerValidator);
  const poolsPalletId = substrateApi.api.consts.nominationPools.palletId.toString();
  const poolStashAccount = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.parsePoolStashAddress)(substrateApi.api, 0, poolMemberInfo.poolId, poolsPalletId);
  const [_nominations, _poolMetadata, _currentEra] = await Promise.all([substrateApi.api.query.staking.nominators(poolStashAccount), substrateApi.api.query.nominationPools.metadata(poolMemberInfo.poolId), substrateApi.api.query.staking.currentEra()]);
  const poolMetadata = _poolMetadata.toPrimitive();
  const currentEra = _currentEra.toString();
  const nominations = _nominations.toJSON();
  let stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_EARNING;
  const poolName = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.transformPoolName)(poolMetadata.isUtf8 ? poolMetadata.toUtf8() : poolMetadata.toString());
  if (nominations) {
    const validatorList = nominations.targets;
    await Promise.all(validatorList.map(async validatorAddress => {
      const _eraStaker = await substrateApi.api.query.staking.erasStakers(currentEra, validatorAddress);
      const eraStaker = _eraStaker.toPrimitive();
      const topNominators = eraStaker.others.map(nominator => {
        return nominator.who;
      }).slice(0, maxNominatorRewardedPerValidator);
      if (topNominators.includes((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__.reformatAddress)(poolStashAccount, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainSubstrateAddressPrefix)(chainInfo)))) {
        // if address in top nominators
        stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.EARNING_REWARD;
      }
    }));
  }
  const joinedPoolInfo = {
    activeStake: poolMemberInfo.points.toString(),
    chain: chainInfo.slug,
    status: stakingStatus,
    validatorIdentity: poolName,
    validatorAddress: poolMemberInfo.poolId.toString(),
    // use poolId
    hasUnstaking: poolMemberInfo.unbondingEras && Object.keys(poolMemberInfo.unbondingEras).length > 0
  };
  const unstakings = [];
  Object.entries(poolMemberInfo.unbondingEras).forEach(([unlockingEra, amount]) => {
    const isClaimable = parseInt(unlockingEra) - parseInt(currentEra) < 0;
    const remainingEra = parseInt(unlockingEra) - parseInt(currentEra);
    const waitingTime = remainingEra * _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chainInfo.slug];
    unstakings.push({
      chain: chainInfo.slug,
      status: isClaimable ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.UnstakingStatus.CLAIMABLE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.UnstakingStatus.UNLOCKING,
      claimable: amount.toString(),
      waitingTime: waitingTime
    });
  });
  const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(poolMemberInfo.points.toString());
  if (!bnActiveStake.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_9__.BN_ZERO)) {
    stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_EARNING;
  }
  return {
    chain: chainInfo.slug,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.POOLED,
    address,
    status: stakingStatus,
    activeStake: poolMemberInfo.points.toString(),
    nominations: [joinedPoolInfo],
    // can only join 1 pool at a time
    unstakings
  };
}
async function getRelayChainPoolMemberMetadata(chainInfo, address, substrateApi) {
  const chainApi = await substrateApi.isReady;
  const [_poolMemberInfo, _currentEra] = await Promise.all([chainApi.api.query.nominationPools.poolMembers(address), chainApi.api.query.staking.currentEra()]);
  const _maxNominatorRewardedPerValidator = chainApi.api.consts.staking.maxNominatorRewardedPerValidator.toString();
  const maxNominatorRewardedPerValidator = parseInt(_maxNominatorRewardedPerValidator);
  const poolsPalletId = chainApi.api.consts.nominationPools.palletId.toString();
  const poolMemberInfo = _poolMemberInfo.toPrimitive();
  const currentEra = _currentEra.toString();
  if (!poolMemberInfo) {
    return {
      chain: chainInfo.slug,
      type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.POOLED,
      address,
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_STAKING,
      activeStake: '0',
      nominations: [],
      // can only join 1 pool at a time
      unstakings: []
    };
  }
  let stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_EARNING;
  const _poolMetadata = await chainApi.api.query.nominationPools.metadata(poolMemberInfo.poolId);
  const poolMetadata = _poolMetadata.toPrimitive();
  const poolName = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.transformPoolName)(poolMetadata.isUtf8 ? poolMetadata.toUtf8() : poolMetadata.toString());
  const poolStashAccount = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.parsePoolStashAddress)(chainApi.api, 0, poolMemberInfo.poolId, poolsPalletId);
  const _nominations = await chainApi.api.query.staking.nominators(poolStashAccount);
  const nominations = _nominations.toJSON();
  if (nominations) {
    const validatorList = nominations.targets;
    await Promise.all(validatorList.map(async validatorAddress => {
      const _eraStaker = await chainApi.api.query.staking.erasStakers(currentEra, validatorAddress);
      const eraStaker = _eraStaker.toPrimitive();
      const topNominators = eraStaker.others.map(nominator => {
        return nominator.who;
      }).slice(0, maxNominatorRewardedPerValidator);
      if (topNominators.includes((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__.reformatAddress)(poolStashAccount, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainSubstrateAddressPrefix)(chainInfo)))) {
        // if address in top nominators
        stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.EARNING_REWARD;
      }
    }));
  }
  const joinedPoolInfo = {
    activeStake: poolMemberInfo.points.toString(),
    chain: chainInfo.slug,
    status: stakingStatus,
    validatorIdentity: poolName,
    validatorAddress: poolMemberInfo.poolId.toString(),
    // use poolId
    hasUnstaking: poolMemberInfo.unbondingEras && Object.keys(poolMemberInfo.unbondingEras).length > 0
  };
  const unstakings = [];
  Object.entries(poolMemberInfo.unbondingEras).forEach(([unlockingEra, amount]) => {
    const isClaimable = parseInt(unlockingEra) - parseInt(currentEra) < 0;
    const remainingEra = parseInt(unlockingEra) - parseInt(currentEra);
    const waitingTime = remainingEra * _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_ERA_LENGTH_MAP[chainInfo.slug];
    unstakings.push({
      chain: chainInfo.slug,
      status: isClaimable ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.UnstakingStatus.CLAIMABLE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.UnstakingStatus.UNLOCKING,
      claimable: amount.toString(),
      waitingTime: waitingTime
    });
  });
  const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(poolMemberInfo.points.toString());
  if (!bnActiveStake.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_9__.BN_ZERO)) {
    stakingStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_EARNING;
  }
  return {
    chain: chainInfo.slug,
    type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.POOLED,
    address,
    status: stakingStatus,
    activeStake: poolMemberInfo.points.toString(),
    nominations: [joinedPoolInfo],
    // can only join 1 pool at a time
    unstakings
  };
}
async function getRelayValidatorsInfo(chain, substrateApi, decimals, chainStakingMetadata) {
  var _chainApi$api$query$s2;
  const chainApi = await substrateApi.isReady;
  const _era = await chainApi.api.query.staking.currentEra();
  const currentEra = _era.toString();
  const allValidators = [];
  const validatorInfoList = [];
  const [_totalEraStake, _eraStakers, _minBond, _stakingRewards] = await Promise.all([chainApi.api.query.staking.erasTotalStake(parseInt(currentEra)), chainApi.api.query.staking.erasStakers.entries(parseInt(currentEra)), chainApi.api.query.staking.minNominatorBond(), ((_chainApi$api$query$s2 = chainApi.api.query.stakingRewards) === null || _chainApi$api$query$s2 === void 0 ? void 0 : _chainApi$api$query$s2.data) && chainApi.api.query.stakingRewards.data()]);
  const stakingRewards = _stakingRewards === null || _stakingRewards === void 0 ? void 0 : _stakingRewards.toPrimitive();
  const maxNominatorRewarded = chainApi.api.consts.staking.maxNominatorRewardedPerValidator.toString();
  const bnTotalEraStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(_totalEraStake.toString());
  const eraStakers = _eraStakers;
  const rawMinBond = _minBond.toHuman();
  const minBond = rawMinBond.replaceAll(',', '');
  const totalStakeMap = {};
  const bnDecimals = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())((10 ** decimals).toString());
  for (const item of eraStakers) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
    const rawValidatorInfo = item[0].toHuman();
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
    const rawValidatorStat = item[1].toHuman();
    const validatorAddress = rawValidatorInfo[1];
    const rawTotalStake = rawValidatorStat.total;
    const rawOwnStake = rawValidatorStat.own;
    const bnTotalStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(rawTotalStake.replaceAll(',', ''));
    const bnOwnStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(rawOwnStake.replaceAll(',', ''));
    const otherStake = bnTotalStake.sub(bnOwnStake);
    totalStakeMap[validatorAddress] = bnTotalStake;
    let nominatorCount = 0;
    if ('others' in rawValidatorStat) {
      const others = rawValidatorStat.others;
      nominatorCount = others.length;
    }
    allValidators.push(validatorAddress);
    validatorInfoList.push({
      address: validatorAddress,
      totalStake: bnTotalStake.toString(),
      ownStake: bnOwnStake.toString(),
      otherStake: otherStake.toString(),
      nominatorCount,
      // to be added later
      commission: 0,
      expectedReturn: 0,
      blocked: false,
      isVerified: false,
      minBond,
      isCrowded: nominatorCount > parseInt(maxNominatorRewarded)
    });
  }
  const extraInfoMap = {};
  await Promise.all(allValidators.map(async address => {
    var _chainApi$api$query24, _chainApi$api$query25, _identityInfo$judgeme;
    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
    const [_commissionInfo, _identityInfo] = await Promise.all([chainApi.api.query.staking.validators(address), (_chainApi$api$query24 = chainApi.api.query) === null || _chainApi$api$query24 === void 0 ? void 0 : (_chainApi$api$query25 = _chainApi$api$query24.identity) === null || _chainApi$api$query25 === void 0 ? void 0 : _chainApi$api$query25.identityOf(address)]);
    const commissionInfo = _commissionInfo.toHuman();
    const identityInfo = _identityInfo ? _identityInfo.toHuman() : null;
    let identity;
    if (identityInfo !== null) {
      identity = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.parseIdentity)(identityInfo);
    }
    extraInfoMap[address] = {
      commission: commissionInfo.commission,
      blocked: commissionInfo.blocked,
      identity,
      isVerified: identityInfo && (identityInfo === null || identityInfo === void 0 ? void 0 : (_identityInfo$judgeme = identityInfo.judgements) === null || _identityInfo$judgeme === void 0 ? void 0 : _identityInfo$judgeme.length) > 0
    };
  }));
  const bnAvgStake = bnTotalEraStake.divn(validatorInfoList.length).div(bnDecimals);
  for (const validator of validatorInfoList) {
    const commission = extraInfoMap[validator.address].commission;
    const bnValidatorStake = totalStakeMap[validator.address].div(bnDecimals);
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_CHAIN_GROUP.aleph.includes(chain)) {
      validator.expectedReturn = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.calculateAlephZeroValidatorReturn)(chainStakingMetadata.expectedReturn, (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getCommission)(commission));
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_5__._STAKING_CHAIN_GROUP.ternoa.includes(chain)) {
      const rewardPerValidator = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(stakingRewards.sessionExtraRewardPayout).divn(allValidators.length).div(bnDecimals);
      const validatorStake = totalStakeMap[validator.address].div(bnDecimals).toNumber();
      validator.expectedReturn = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.calculateTernoaValidatorReturn)(rewardPerValidator.toNumber(), validatorStake, (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getCommission)(commission));
    } else {
      validator.expectedReturn = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.calculateValidatorStakedReturn)(chainStakingMetadata.expectedReturn, bnValidatorStake, bnAvgStake, (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.getCommission)(commission));
    }
    validator.commission = parseFloat(commission.split('%')[0]);
    validator.blocked = extraInfoMap[validator.address].blocked;
    validator.identity = extraInfoMap[validator.address].identity;
    validator.isVerified = extraInfoMap[validator.address].isVerified;
  }
  return validatorInfoList;
}
async function getRelayPoolsInfo(chain, substrateApi) {
  const chainApi = await substrateApi.isReady;
  const nominationPools = [];
  const _allPoolsInfo = await chainApi.api.query.nominationPools.reversePoolIdLookup.entries();
  await Promise.all(_allPoolsInfo.map(async _poolInfo => {
    var _bondedPool$points;
    const poolAddressList = _poolInfo[0].toHuman();
    const poolAddress = poolAddressList[0];
    const poolId = _poolInfo[1].toPrimitive();
    const [_bondedPool, _metadata] = await Promise.all([chainApi.api.query.nominationPools.bondedPools(poolId), chainApi.api.query.nominationPools.metadata(poolId)]);
    const poolMetadata = _metadata.toPrimitive();
    const bondedPool = _bondedPool.toPrimitive();
    const poolName = (0,_subwallet_extension_base_koni_api_staking_bonding_utils__WEBPACK_IMPORTED_MODULE_4__.transformPoolName)(poolMetadata.isUtf8 ? poolMetadata.toUtf8() : poolMetadata.toString());
    nominationPools.push({
      id: poolId,
      address: poolAddress,
      name: poolName,
      bondedAmount: ((_bondedPool$points = bondedPool.points) === null || _bondedPool$points === void 0 ? void 0 : _bondedPool$points.toString()) || '0',
      roles: bondedPool.roles,
      memberCounter: bondedPool.memberCounter,
      state: bondedPool.state
    });
  }));
  return nominationPools;
}
async function getRelayBondingExtrinsic(substrateApi, amount, targetValidators, chainInfo, address, nominatorMetadata, bondDest = 'Staked') {
  const chainApi = await substrateApi.isReady;
  const binaryAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(amount);
  let bondTx;
  let nominateTx;
  const _params = chainApi.api.tx.staking.bond.toJSON();
  const paramsCount = _params.args.length;
  const validatorParamList = targetValidators.map(validator => {
    return validator.address;
  });
  if (!nominatorMetadata) {
    if (paramsCount === 2) {
      bondTx = chainApi.api.tx.staking.bond(binaryAmount, bondDest);
    } else {
      bondTx = chainApi.api.tx.staking.bond(address, binaryAmount, bondDest);
    }
    nominateTx = chainApi.api.tx.staking.nominate(validatorParamList);
    return chainApi.api.tx.utility.batchAll([bondTx, nominateTx]);
  }
  if (!nominatorMetadata.isBondedBefore) {
    // first time
    if (paramsCount === 2) {
      bondTx = chainApi.api.tx.staking.bond(binaryAmount, bondDest);
    } else {
      bondTx = chainApi.api.tx.staking.bond(nominatorMetadata.address, binaryAmount, bondDest);
    }
    nominateTx = chainApi.api.tx.staking.nominate(validatorParamList);
    return chainApi.api.tx.utility.batchAll([bondTx, nominateTx]);
  } else {
    if (binaryAmount.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_9__.BN_ZERO)) {
      bondTx = chainApi.api.tx.staking.bondExtra(binaryAmount);
    }
    if (nominatorMetadata.isBondedBefore && targetValidators.length > 0) {
      nominateTx = chainApi.api.tx.staking.nominate(validatorParamList);
    }
  }
  if (bondTx && !nominateTx) {
    return bondTx;
  } else if (nominateTx && !bondTx) {
    return nominateTx;
  }
  return chainApi.api.tx.utility.batchAll([bondTx, nominateTx]);
}
async function getRelayUnbondingExtrinsic(substrateApi, amount, nominatorMetadata) {
  const chainApi = await substrateApi.isReady;
  const binaryAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())(amount);
  const isUnstakeAll = amount === nominatorMetadata.activeStake;
  if (isUnstakeAll) {
    const chillTx = chainApi.api.tx.staking.chill();
    const unbondTx = chainApi.api.tx.staking.unbond(binaryAmount);
    return chainApi.api.tx.utility.batchAll([chillTx, unbondTx]);
  }
  return chainApi.api.tx.staking.unbond(binaryAmount);
}
async function getRelayWithdrawalExtrinsic(substrateApi, address) {
  const chainApi = await substrateApi.isReady;
  if (chainApi.api.tx.staking.withdrawUnbonded.meta.args.length === 1) {
    const _slashingSpans = (await chainApi.api.query.staking.slashingSpans(address)).toHuman();
    const slashingSpanCount = _slashingSpans !== null ? _slashingSpans.spanIndex : '0';
    return chainApi.api.tx.staking.withdrawUnbonded(slashingSpanCount);
  } else {
    return chainApi.api.tx.staking.withdrawUnbonded();
  }
}
async function getRelayCancelWithdrawalExtrinsic(substrateApi, selectedUnstaking) {
  const chainApi = await substrateApi.isReady;
  return chainApi.api.tx.staking.rebond(selectedUnstaking.claimable);
}

// Pooling txs

async function getPoolingClaimRewardExtrinsic(substrateApi, bondReward = true) {
  const chainApi = await substrateApi.isReady;
  if (bondReward) {
    return chainApi.api.tx.nominationPools.bondExtra('Rewards');
  }
  return chainApi.api.tx.nominationPools.claimPayout();
}
async function getPoolingBondingExtrinsic(substrateApi, amount, selectedPoolId, nominatorMetadata) {
  const chainApi = await substrateApi.isReady;
  const bnActiveStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_1___default())((nominatorMetadata === null || nominatorMetadata === void 0 ? void 0 : nominatorMetadata.activeStake) || '0');
  if (bnActiveStake.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_9__.BN_ZERO)) {
    // already joined a pool
    return chainApi.api.tx.nominationPools.bondExtra({
      FreeBalance: amount
    });
  }
  return chainApi.api.tx.nominationPools.join(amount, selectedPoolId);
}
async function getPoolingUnbondingExtrinsic(substrateApi, amount, nominatorMetadata) {
  const chainApi = await substrateApi.isReady;
  return chainApi.api.tx.nominationPools.unbond({
    Id: nominatorMetadata.address
  }, amount);
}
async function getPoolingWithdrawalExtrinsic(substrateApi, nominatorMetadata) {
  const chainApi = await substrateApi.isReady;
  if (chainApi.api.tx.nominationPools.withdrawUnbonded.meta.args.length === 2) {
    const _slashingSpans = (await chainApi.api.query.staking.slashingSpans(nominatorMetadata.address)).toHuman();
    const slashingSpanCount = _slashingSpans !== null ? _slashingSpans.spanIndex : '0';
    return chainApi.api.tx.nominationPools.withdrawUnbonded({
      Id: nominatorMetadata.address
    }, slashingSpanCount);
  } else {
    return chainApi.api.tx.nominationPools.withdrawUnbonded({
      Id: nominatorMetadata.address
    });
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/staking/config.ts":
/*!********************************************************!*\
  !*** ../extension-base/src/koni/api/staking/config.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "INDEXER_SUPPORTED_STAKING_CHAINS": () => (/* binding */ INDEXER_SUPPORTED_STAKING_CHAINS),
/* harmony export */   "SUBQUERY_ENDPOINTS": () => (/* binding */ SUBQUERY_ENDPOINTS),
/* harmony export */   "SUBSQUID_ENDPOINTS": () => (/* binding */ SUBSQUID_ENDPOINTS)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/chain-list */ "../../node_modules/@subwallet/chain-list/index.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


const SUBSQUID_ENDPOINTS = {
  [_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.KUSAMA]: 'https://squid.subsquid.io/kusama-explorer/graphql',
  [_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.POLKADOT]: 'https://squid.subsquid.io/polkadot-explorer/graphql',
  [_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.ASTAR]: 'https://squid.subsquid.io/astar-explorer/graphql',
  [_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.MOONRIVER]: 'https://squid.subsquid.io/moonriver-explorer/graphql',
  [_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.MOONBEAM]: 'https://squid.subsquid.io/moonbeam-explorer/graphql'
};
const INDEXER_SUPPORTED_STAKING_CHAINS = [_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.POLKADOT, _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.KUSAMA, _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.ASTAR, _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.MOONRIVER, _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.MOONBEAM];
const SUBQUERY_ENDPOINTS = {
  polkadot: 'https://api.subquery.network/sq/nova-wallet/nova-westend',
  kusama: 'https://api.subquery.network/sq/nova-wallet/nova-kusama',
  westend: 'https://api.subquery.network/sq/nova-wallet/nova-westend',
  picasso: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-picasso',
  calamari: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-calamari',
  khala: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-khala',
  parallel: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-parallel',
  bifrost: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-bifrost',
  clover: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-clover',
  basilisk: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-basilisk',
  acala: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-acala',
  astar: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-astar',
  karura: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-karura',
  altair: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-altair',
  kilt: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-kilt',
  robonomics: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-robonomics',
  statemint: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-statemint',
  quartz: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-quartz',
  zeigeist: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-zeitgeist',
  shiden: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-shiden',
  statemine: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-statemine',
  moonbeam: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-moonbeam',
  moonriver: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-moonriver',
  pioneer: 'https://api.subquery.network/sq/nova-wallet/nova-wallet-bit-country'
};

/***/ }),

/***/ "../extension-base/src/koni/api/staking/index.ts":
/*!*******************************************************!*\
  !*** ../extension-base/src/koni/api/staking/index.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getNominationStakingRewardData": () => (/* binding */ getNominationStakingRewardData),
/* harmony export */   "getPoolingStakingRewardData": () => (/* binding */ getPoolingStakingRewardData),
/* harmony export */   "stakingOnChainApi": () => (/* binding */ stakingOnChainApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_staking_paraChain__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/paraChain */ "../extension-base/src/koni/api/staking/paraChain.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_relayChain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/relayChain */ "../extension-base/src/koni/api/staking/relayChain.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_subsquidStaking__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/subsquidStaking */ "../extension-base/src/koni/api/staking/subsquidStaking.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0







function stakingOnChainApi(addresses, substrateApiMap, chainInfoMap, stakingCallback, nominatorStateCallback) {
  const filteredApiMap = [];
  const [substrateAddresses, evmAddresses] = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.categoryAddresses)(addresses);
  Object.entries(chainInfoMap).forEach(([networkKey, chainInfo]) => {
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._PURE_EVM_CHAINS.indexOf(networkKey) < 0 && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._isChainSupportSubstrateStaking)(chainInfo)) {
      filteredApiMap.push({
        chain: networkKey,
        api: substrateApiMap[networkKey]
      });
    }
  });
  const unsubList = [];

  // eslint-disable-next-line @typescript-eslint/no-misused-promises
  filteredApiMap.forEach(async ({
    api: apiPromise,
    chain
  }) => {
    const parentApi = await apiPromise.isReady;
    const useAddresses = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._isChainEvmCompatible)(chainInfoMap[chain]) ? evmAddresses : substrateAddresses;
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_CHAIN_GROUP.amplitude.includes(chain)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_paraChain__WEBPACK_IMPORTED_MODULE_3__.getAmplitudeStakingOnChain)(parentApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback);
      unsubList.push(unsub);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_CHAIN_GROUP.astar.includes(chain)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_paraChain__WEBPACK_IMPORTED_MODULE_3__.getAstarStakingOnChain)(parentApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback);
      unsubList.push(unsub);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_CHAIN_GROUP.para.includes(chain)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_paraChain__WEBPACK_IMPORTED_MODULE_3__.getParaStakingOnChain)(parentApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback);
      unsubList.push(unsub);
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_CHAIN_GROUP.relay.includes(chain)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_relayChain__WEBPACK_IMPORTED_MODULE_4__.getRelayStakingOnChain)(parentApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback);
      unsubList.push(unsub);
    }
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__._STAKING_CHAIN_GROUP.nominationPool.includes(chain)) {
      const unsub = await (0,_subwallet_extension_base_koni_api_staking_relayChain__WEBPACK_IMPORTED_MODULE_4__.getRelayPoolingOnChain)(parentApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback);
      unsubList.push(unsub);
    }
  });
  return () => {
    unsubList.forEach(unsub => {
      unsub && unsub();
    });
  };
}
async function getNominationStakingRewardData(addresses, chainInfoMap, callback) {
  // might retrieve from other sources
  await (0,_subwallet_extension_base_koni_api_staking_subsquidStaking__WEBPACK_IMPORTED_MODULE_5__.getAllSubsquidStaking)(addresses, chainInfoMap, callback);
}
async function getPoolingStakingRewardData(addresses, networkMap, dotSamaApiMap, callback) {
  const activeNetworks = [];
  Object.entries(networkMap).forEach(([key, chainInfo]) => {
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._isChainSupportSubstrateStaking)(chainInfo) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_2__._isSubstrateRelayChain)(chainInfo)) {
      activeNetworks.push(key);
    }
  });
  if (activeNetworks.length === 0) {
    return;
  }
  await (0,_subwallet_extension_base_koni_api_staking_relayChain__WEBPACK_IMPORTED_MODULE_4__.getNominationPoolReward)(addresses, networkMap, dotSamaApiMap, callback);
}

/***/ }),

/***/ "../extension-base/src/koni/api/staking/paraChain.ts":
/*!***********************************************************!*\
  !*** ../extension-base/src/koni/api/staking/paraChain.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getAmplitudeStakingOnChain": () => (/* binding */ getAmplitudeStakingOnChain),
/* harmony export */   "getAmplitudeUnclaimedStakingReward": () => (/* binding */ getAmplitudeUnclaimedStakingReward),
/* harmony export */   "getAstarStakingOnChain": () => (/* binding */ getAstarStakingOnChain),
/* harmony export */   "getParaStakingOnChain": () => (/* binding */ getParaStakingOnChain)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/amplitude */ "../extension-base/src/koni/api/staking/bonding/amplitude.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/astar */ "../extension-base/src/koni/api/staking/bonding/astar.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/paraChain */ "../extension-base/src/koni/api/staking/bonding/paraChain.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/bn/consts.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0










function getSingleStakingAmplitude(substrateApi, address, chainInfoMap, chain, stakingCallback, nominatorStateCallback) {
  return substrateApi.api.queryMulti([[substrateApi.api.query.parachainStaking.delegatorState, address], [substrateApi.api.query.parachainStaking.unstaking, address]], async ([_delegatorState, _unstaking]) => {
    const delegatorState = _delegatorState.toPrimitive();
    const unstakingInfo = _unstaking.toPrimitive();
    const {
      symbol
    } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainNativeTokenBasicInfo)(chainInfoMap[chain]);
    const owner = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.reformatAddress)(address, 42);
    if (!delegatorState && !unstakingInfo) {
      stakingCallback(chain, {
        name: chainInfoMap[chain].name,
        chain: chain,
        balance: '0',
        activeBalance: '0',
        unlockingBalance: '0',
        nativeToken: symbol,
        unit: symbol,
        state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
        type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
        address: owner
      });
      nominatorStateCallback({
        chain,
        type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
        address: owner,
        status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING,
        activeStake: '0',
        nominations: [],
        unstakings: []
      });
    } else {
      const activeBalance = delegatorState ? new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(delegatorState.amount.toString()) : _polkadot_util__WEBPACK_IMPORTED_MODULE_4__.BN_ZERO;
      let unstakingBalance = _polkadot_util__WEBPACK_IMPORTED_MODULE_4__.BN_ZERO;
      if (unstakingInfo) {
        Object.values(unstakingInfo).forEach(unstakingAmount => {
          const bnUnstakingAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(unstakingAmount.toString());
          unstakingBalance = unstakingBalance.add(bnUnstakingAmount);
        });
      }
      const totalBalance = activeBalance.add(unstakingBalance);
      const stakingItem = {
        name: chainInfoMap[chain].name,
        chain: chain,
        balance: totalBalance.toString(),
        activeBalance: activeBalance.toString(),
        unlockingBalance: unstakingBalance.toString(),
        nativeToken: symbol,
        unit: symbol,
        state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
        type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
        address: owner
      };
      stakingCallback(chain, stakingItem);
      const nominatorMetadata = await (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_5__.subscribeAmplitudeNominatorMetadata)(chainInfoMap[chain], owner, substrateApi, delegatorState, unstakingInfo);
      nominatorStateCallback(nominatorMetadata);
    }
  });
}
function getMultiStakingAmplitude(substrateApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback) {
  return substrateApi.api.query.parachainStaking.delegatorState.multi(useAddresses, async ledgers => {
    if (ledgers) {
      const {
        symbol
      } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainNativeTokenBasicInfo)(chainInfoMap[chain]);
      const _unstakingStates = await substrateApi.api.query.parachainStaking.unstaking.multi(useAddresses);
      await Promise.all(ledgers.map(async (_delegatorState, i) => {
        const owner = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.reformatAddress)(useAddresses[i], 42);
        const delegatorState = _delegatorState.toPrimitive();
        const unstakingInfo = _unstakingStates[i].toPrimitive();
        if (!delegatorState && !unstakingInfo) {
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: '0',
            activeBalance: '0',
            unlockingBalance: '0',
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner
          });
          nominatorStateCallback({
            chain,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner,
            status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING,
            activeStake: '0',
            nominations: [],
            unstakings: []
          });
        } else {
          const activeBalance = delegatorState ? new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(delegatorState.amount.toString()) : _polkadot_util__WEBPACK_IMPORTED_MODULE_4__.BN_ZERO;
          let unstakingBalance = _polkadot_util__WEBPACK_IMPORTED_MODULE_4__.BN_ZERO;
          if (unstakingInfo) {
            Object.values(unstakingInfo).forEach(unstakingAmount => {
              const bnUnstakingAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(unstakingAmount.toString());
              unstakingBalance = unstakingBalance.add(bnUnstakingAmount);
            });
          }
          const totalBalance = activeBalance.add(unstakingBalance);
          const stakingItem = {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: totalBalance.toString(),
            activeBalance: activeBalance.toString(),
            unlockingBalance: unstakingBalance.toString(),
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner
          };
          stakingCallback(chain, stakingItem);
          const nominatorMetadata = await (0,_subwallet_extension_base_koni_api_staking_bonding_amplitude__WEBPACK_IMPORTED_MODULE_5__.subscribeAmplitudeNominatorMetadata)(chainInfoMap[chain], owner, substrateApi, delegatorState, unstakingInfo);
          nominatorStateCallback(nominatorMetadata);
        }
      }));
    }
  });
}
function getAmplitudeStakingOnChain(parentApi, useAddresses, networks, chain, callback, nominatorStateCallback) {
  if (useAddresses.length === 1) {
    return getSingleStakingAmplitude(parentApi, useAddresses[0], networks, chain, callback, nominatorStateCallback);
  }
  return getMultiStakingAmplitude(parentApi, useAddresses, networks, chain, callback, nominatorStateCallback);
}
async function getAmplitudeUnclaimedStakingReward(substrateApiMap, addresses, networks, chains, callBack) {
  if (chains.length === 0) {
    return [];
  }
  const useAddresses = [];
  addresses.forEach(address => {
    if (!(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__.isEthereumAddress)(address)) {
      useAddresses.push(address);
    }
  });
  const unclaimedRewardList = [];
  await Promise.all(chains.map(async chain => {
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__._STAKING_CHAIN_GROUP.amplitude.includes(chain) && !_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__._STAKING_CHAIN_GROUP.kilt.includes(chain)) {
      const networkInfo = networks[chain];
      const apiProps = await substrateApiMap[chain].isReady;
      await Promise.all(useAddresses.map(async address => {
        const _unclaimedReward = await apiProps.api.query.parachainStaking.rewards(address);
        callBack({
          chain,
          name: networkInfo.name,
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
          type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
          address: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.reformatAddress)(address, 42),
          unclaimedReward: _unclaimedReward.toString()
        });
      }));
    }
  }));
  return unclaimedRewardList;
}
function getParaStakingOnChain(substrateApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback) {
  const {
    symbol
  } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainNativeTokenBasicInfo)(chainInfoMap[chain]);
  return substrateApi.api.query.parachainStaking.delegatorState.multi(useAddresses, async ledgers => {
    if (ledgers) {
      await Promise.all(ledgers.map(async (_delegatorState, i) => {
        const delegatorState = _delegatorState.toPrimitive();
        const owner = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.reformatAddress)(useAddresses[i], 42);
        if (delegatorState) {
          const _totalBalance = delegatorState.total;
          // let _unlockingBalance = delegatorState.lessTotal ? delegatorState.lessTotal : delegatorState.requests.lessTotal;
          const _unlockingBalance = delegatorState.lessTotal;
          const totalBalance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(_totalBalance.toString());
          const unlockingBalance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(_unlockingBalance.toString());
          const activeBalance = totalBalance.sub(unlockingBalance);
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: totalBalance.toString(),
            activeBalance: activeBalance.toString(),
            unlockingBalance: unlockingBalance.toString(),
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner
          });
          const nominatorMetadata = await (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_8__.subscribeParaChainNominatorMetadata)(chainInfoMap[chain], owner, substrateApi, delegatorState);
          nominatorStateCallback(nominatorMetadata);
        } else {
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: '0',
            activeBalance: '0',
            unlockingBalance: '0',
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner
          });
          nominatorStateCallback({
            chain,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner,
            status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING,
            activeStake: '0',
            nominations: [],
            unstakings: []
          });
        }
      }));
    }
  });
}
function getAstarStakingOnChain(substrateApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback) {
  const {
    symbol
  } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainNativeTokenBasicInfo)(chainInfoMap[chain]);
  return substrateApi.api.query.dappsStaking.ledger.multi(useAddresses, async ledgers => {
    if (ledgers) {
      await Promise.all(ledgers.map(async (_ledger, i) => {
        let bnUnlockingBalance = _polkadot_util__WEBPACK_IMPORTED_MODULE_4__.BN_ZERO;
        const owner = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.reformatAddress)(useAddresses[i], 42);
        const ledger = _ledger.toPrimitive();
        if (ledger && ledger.locked > 0) {
          const unlockingChunks = ledger.unbondingInfo.unlockingChunks;
          const _totalStake = ledger.locked;
          const bnTotalStake = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(_totalStake.toString());
          for (const chunk of unlockingChunks) {
            const bnChunk = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(chunk.amount.toString());
            bnUnlockingBalance = bnUnlockingBalance.add(bnChunk);
          }
          const bnActiveStake = bnTotalStake.sub(bnUnlockingBalance);
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: bnTotalStake.toString(),
            activeBalance: bnActiveStake.toString(),
            unlockingBalance: bnUnlockingBalance.toString(),
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner
          });
          const nominatorMetadata = await (0,_subwallet_extension_base_koni_api_staking_bonding_astar__WEBPACK_IMPORTED_MODULE_9__.subscribeAstarNominatorMetadata)(chainInfoMap[chain], owner, substrateApi, ledger);
          nominatorStateCallback(nominatorMetadata);
        } else {
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain,
            balance: '0',
            activeBalance: '0',
            unlockingBalance: '0',
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner
          });
          nominatorStateCallback({
            chain,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED,
            address: owner,
            status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING,
            activeStake: '0',
            nominations: [],
            unstakings: []
          });
        }
      }));
    }
  });
}

/***/ }),

/***/ "../extension-base/src/koni/api/staking/relayChain.ts":
/*!************************************************************!*\
  !*** ../extension-base/src/koni/api/staking/relayChain.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getNominationPoolReward": () => (/* binding */ getNominationPoolReward),
/* harmony export */   "getRelayPoolingOnChain": () => (/* binding */ getRelayPoolingOnChain),
/* harmony export */   "getRelayStakingOnChain": () => (/* binding */ getRelayStakingOnChain)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/relayChain */ "../extension-base/src/koni/api/staking/bonding/relayChain.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0







function getRelayStakingOnChain(substrateApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback) {
  var _substrateApi$api$que;
  const {
    symbol
  } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainNativeTokenBasicInfo)(chainInfoMap[chain]);
  return (_substrateApi$api$que = substrateApi.api.query.staking) === null || _substrateApi$api$que === void 0 ? void 0 : _substrateApi$api$que.ledger.multi(useAddresses, async ledgers => {
    if (ledgers) {
      await Promise.all(ledgers.map(async (_ledger, i) => {
        const owner = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.reformatAddress)(useAddresses[i], 42);
        const ledger = _ledger.toPrimitive();
        if (ledger) {
          const _totalBalance = ledger.total.toString();
          const _activeBalance = ledger.active.toString();
          const bnUnlockingBalance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_2___default())(_totalBalance).sub(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_2___default())(_activeBalance));
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: _totalBalance,
            activeBalance: _activeBalance,
            unlockingBalance: bnUnlockingBalance.toString(),
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
            address: owner
          });
          const nominatorMetadata = await (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_4__.subscribeRelayChainNominatorMetadata)(chainInfoMap[chain], owner, substrateApi, ledger);
          nominatorStateCallback(nominatorMetadata);
        } else {
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: '0',
            activeBalance: '0',
            unlockingBalance: '0',
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
            address: owner
          });
          nominatorStateCallback({
            chain,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
            status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_STAKING,
            address: owner,
            activeStake: '0',
            nominations: [],
            unstakings: []
          });
        }
      }));
    }
  });
}
function getRelayPoolingOnChain(substrateApi, useAddresses, chainInfoMap, chain, stakingCallback, nominatorStateCallback) {
  var _substrateApi$api$que2, _substrateApi$api$que3;
  const {
    symbol
  } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainNativeTokenBasicInfo)(chainInfoMap[chain]);
  return (_substrateApi$api$que2 = substrateApi.api.query) === null || _substrateApi$api$que2 === void 0 ? void 0 : (_substrateApi$api$que3 = _substrateApi$api$que2.nominationPools) === null || _substrateApi$api$que3 === void 0 ? void 0 : _substrateApi$api$que3.poolMembers.multi(useAddresses, async ledgers => {
    if (ledgers) {
      await Promise.all(ledgers.map(async (_poolMemberInfo, i) => {
        const poolMemberInfo = _poolMemberInfo.toPrimitive();
        const owner = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_1__.reformatAddress)(useAddresses[i], 42);
        if (poolMemberInfo) {
          const bondedBalance = poolMemberInfo.points;
          const unbondedBalance = poolMemberInfo.unbondingEras;
          let unlockingBalance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_2___default())(0);
          const bnBondedBalance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_2___default())(bondedBalance.toString());
          Object.entries(unbondedBalance).forEach(([, value]) => {
            const bnUnbondedBalance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_2___default())(value.toString());
            unlockingBalance = unlockingBalance.add(bnUnbondedBalance);
          });
          const totalBalance = bnBondedBalance.add(unlockingBalance);
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: totalBalance.toString(),
            activeBalance: bnBondedBalance.toString(),
            unlockingBalance: unlockingBalance.toString(),
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.POOLED,
            address: owner
          });
          const nominatorMetadata = await (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_4__.subscribeRelayChainPoolMemberMetadata)(chainInfoMap[chain], owner, substrateApi, poolMemberInfo);
          nominatorStateCallback(nominatorMetadata);
        } else {
          stakingCallback(chain, {
            name: chainInfoMap[chain].name,
            chain: chain,
            balance: '0',
            activeBalance: '0',
            unlockingBalance: '0',
            nativeToken: symbol,
            unit: symbol,
            state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.APIItemState.READY,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.POOLED,
            address: owner
          });
          nominatorStateCallback({
            chain,
            type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.POOLED,
            address: owner,
            status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingStatus.NOT_STAKING,
            activeStake: '0',
            nominations: [],
            // can only join 1 pool at a time
            unstakings: []
          });
        }
      }));
    }
  });
}
async function getNominationPoolReward(addresses, chainInfoMap, substrateApiMap, callBack) {
  const targetNetworks = [];
  const validAddresses = [];
  Object.keys(chainInfoMap).forEach(key => {
    targetNetworks.push(key);
  });
  addresses.forEach(address => {
    if (!(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__.isEthereumAddress)(address)) {
      validAddresses.push(address);
    }
  });
  try {
    await Promise.all(targetNetworks.map(async networkKey => {
      const substrateApi = await substrateApiMap[networkKey].isReady;
      if (substrateApi.api.call.nominationPoolsApi) {
        await Promise.all(validAddresses.map(async address => {
          var _substrateApi$api$cal, _substrateApi$api$cal2;
          const _unclaimedReward = await ((_substrateApi$api$cal = substrateApi.api.call) === null || _substrateApi$api$cal === void 0 ? void 0 : (_substrateApi$api$cal2 = _substrateApi$api$cal.nominationPoolsApi) === null || _substrateApi$api$cal2 === void 0 ? void 0 : _substrateApi$api$cal2.pendingRewards(address));
          if (_unclaimedReward) {
            callBack({
              address: address,
              chain: networkKey,
              unclaimedReward: _unclaimedReward.toString(),
              name: chainInfoMap[networkKey].name,
              state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.APIItemState.READY,
              type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.POOLED
            });
          }
        }));
      }
    }));
  } catch (e) {
    console.debug(e);
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/staking/subsquidStaking.ts":
/*!*****************************************************************!*\
  !*** ../extension-base/src/koni/api/staking/subsquidStaking.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getAllSubsquidStaking": () => (/* binding */ getAllSubsquidStaking)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/config */ "../extension-base/src/koni/api/staking/config.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ "../../node_modules/axios/lib/axios.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0







const getSubsquidQuery = (account, chain) => {
  if (chain === 'moonbeam' || chain === 'moonriver' || chain === 'astar') {
    return `
    query MyQuery {
      stakerById(id: "${account}") {
        totalReward
        activeBond
        rewards(limit: 1, orderBy: blockNumber_DESC) {
          amount
        }
      }
    }`;
  }
  return `
  query MyQuery {
    stakerById(id: "${account}") {
      totalReward
      totalSlash
      activeBond
      rewards(limit: 1, orderBy: blockNumber_DESC) {
        amount
      }
    }
  }`;
};
const getSubsquidStaking = async (accounts, chain, chainInfoMap, callback) => {
  try {
    await Promise.all(accounts.map(async account => {
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isChainEvmCompatible)(chainInfoMap[chain]) && (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_1__.isEthereumAddress)(account) || !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isChainEvmCompatible)(chainInfoMap[chain]) && !(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_1__.isEthereumAddress)(account)) {
        const parsedAccount = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.reformatAddress)(account, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainSubstrateAddressPrefix)(chainInfoMap[chain]));
        const stakingRewardItem = {
          chain: chain,
          name: chainInfoMap[chain].name,
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.APIItemState.READY,
          type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_3__.StakingType.NOMINATED,
          address: (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.reformatAddress)(account, 42)
        };
        const resp = await (0,axios__WEBPACK_IMPORTED_MODULE_4__["default"])({
          url: _subwallet_extension_base_koni_api_staking_config__WEBPACK_IMPORTED_MODULE_5__.SUBSQUID_ENDPOINTS[chain],
          method: 'post',
          data: {
            query: getSubsquidQuery(parsedAccount, chain)
          }
        });
        if (resp.status === 200) {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
          const respData = resp.data.data;
          const rewardItem = respData.stakerById;
          if (rewardItem) {
            const latestReward = rewardItem.rewards[0];
            if (rewardItem.totalReward) {
              stakingRewardItem.totalReward = rewardItem.totalReward;
            }
            if (rewardItem.totalSlash) {
              stakingRewardItem.totalSlash = rewardItem.totalSlash;
            }
            if (latestReward && latestReward.amount) {
              stakingRewardItem.latestReward = latestReward.amount;
            }
          }
        }
        if (stakingRewardItem.totalReward && parseFloat(stakingRewardItem.totalReward) > 0) {
          callback(stakingRewardItem);
        }
      }
    }));
  } catch (e) {
    console.debug(e);
  }
};
const getAllSubsquidStaking = async (accounts, chainInfoMap, callback) => {
  const filteredNetworks = [];
  Object.values(chainInfoMap).forEach(network => {
    if (_subwallet_extension_base_koni_api_staking_config__WEBPACK_IMPORTED_MODULE_5__.INDEXER_SUPPORTED_STAKING_CHAINS.includes(network.slug)) {
      filteredNetworks.push(network.slug);
    }
  });
  try {
    await Promise.all(filteredNetworks.map(async network => {
      await getSubsquidStaking(accounts, network, chainInfoMap, callback);
    }));
  } catch (e) {
    console.debug(e);
  }
};

/***/ }),

/***/ "../extension-base/src/koni/api/tokens/evm/balance.ts":
/*!************************************************************!*\
  !*** ../extension-base/src/koni/api/tokens/evm/balance.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getEVMBalance": () => (/* binding */ getEVMBalance)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0

async function getEVMBalance(networkKey, addresses, evmApiMap) {
  const web3Api = evmApiMap[networkKey];
  return await Promise.all(addresses.map(async address => {
    return await web3Api.api.eth.getBalance(address);
  }));
}

/***/ }),

/***/ "../extension-base/src/koni/api/tokens/evm/transfer.ts":
/*!*************************************************************!*\
  !*** ../extension-base/src/koni/api/tokens/evm/transfer.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getERC20TransactionObject": () => (/* binding */ getERC20TransactionObject),
/* harmony export */   "getERC721Transaction": () => (/* binding */ getERC721Transaction),
/* harmony export */   "getEVMTransactionObject": () => (/* binding */ getEVMTransactionObject),
/* harmony export */   "handleTransferBalanceResult": () => (/* binding */ handleTransferBalanceResult)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_evm_web3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/evm/web3 */ "../extension-base/src/koni/api/tokens/evm/web3.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/helper */ "../extension-base/src/services/chain-service/helper/index.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/hex/toBn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_3__);
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0






const handleTransferBalanceResult = ({
  callback,
  changeValue,
  networkKey,
  receipt,
  response,
  updateState
}) => {
  response.status = true;
  let fee;
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._BALANCE_PARSING_CHAIN_GROUP.bobabeam.indexOf(networkKey) > -1) {
    // @ts-ignore
    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
    fee = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_1__.hexToBn)(receipt.l1Fee || '0x0').add((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_1__.hexToBn)(receipt.l2BobaFee || '0x0')).toString();
  } else {
    fee = (receipt.gasUsed * receipt.effectiveGasPrice).toString();
  }
  response.txResult = {
    change: changeValue || '0',
    fee
  };
  updateState && updateState({
    status: receipt.status ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.ExternalRequestPromiseStatus.COMPLETED : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.ExternalRequestPromiseStatus.FAILED
  });
  callback(response);
};
async function getEVMTransactionObject(chainInfo, from, to, value, transferAll, evmApiMap) {
  const networkKey = chainInfo.slug;
  const web3Api = evmApiMap[networkKey];
  const gasPrice = await web3Api.api.eth.getGasPrice();
  const transactionObject = {
    gasPrice: gasPrice,
    to: to,
    value: value,
    from: from
  };
  const gasLimit = await web3Api.api.eth.estimateGas(transactionObject);
  transactionObject.gas = gasLimit;
  const estimateFee = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(gasLimit).mul(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(gasPrice));
  transactionObject.value = transferAll ? new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(value).sub(estimateFee).toString() : value;
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__.EVM_REFORMAT_DECIMALS.acala.includes(networkKey)) {
    const numberReplace = 18 - 12;
    transactionObject.value = transactionObject.value.substring(0, transactionObject.value.length - 6) + new Array(numberReplace).fill('0').join('');
  }
  return [transactionObject, transactionObject.value.toString()];
}
async function getERC20TransactionObject(assetAddress, chainInfo, from, to, value, transferAll, evmApiMap) {
  const networkKey = chainInfo.slug;
  const evmApi = evmApiMap[networkKey];
  const erc20Contract = (0,_subwallet_extension_base_koni_api_tokens_evm_web3__WEBPACK_IMPORTED_MODULE_4__.getERC20Contract)(networkKey, assetAddress, evmApiMap);
  let freeAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(0);
  let transferValue = value;
  if (transferAll) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
    const bal = await erc20Contract.methods.balanceOf(from).call();
    freeAmount = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(bal || '0');
    transferValue = freeAmount.toString() || '0';
  }
  function generateTransferData(to, transferValue) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
    return erc20Contract.methods.transfer(to, transferValue).encodeABI();
  }
  const transferData = generateTransferData(to, transferValue);
  const [gasLimit, gasPrice] = await Promise.all([
  // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
  erc20Contract.methods.transfer(to, transferValue).estimateGas({
    from
  }), evmApi.api.eth.getGasPrice()]);
  const transactionObject = {
    gasPrice: gasPrice,
    gas: gasLimit,
    from,
    to: assetAddress,
    data: transferData
  };
  if (transferAll) {
    transferValue = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_3___default())(freeAmount).toString();
    transactionObject.data = generateTransferData(to, transferValue);
  }
  return [transactionObject, transferValue];
}
async function getERC721Transaction(web3Api, contractAddress, senderAddress, recipientAddress, tokenId) {
  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
  const contract = new web3Api.api.eth.Contract(_subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_5__._ERC721_ABI, contractAddress);
  const [gasLimit, gasPrice] = await Promise.all([
  // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
  contract.methods.safeTransferFrom(senderAddress, recipientAddress, tokenId).estimateGas({
    from: senderAddress
  }), web3Api.api.eth.getGasPrice()]);
  return {
    from: senderAddress,
    gasPrice,
    gas: gasLimit,
    to: contractAddress,
    value: '0x00',
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
    data: contract.methods.safeTransferFrom(senderAddress, recipientAddress, tokenId).encodeABI()
  };
}

/***/ }),

/***/ "../extension-base/src/koni/api/tokens/evm/web3.ts":
/*!*********************************************************!*\
  !*** ../extension-base/src/koni/api/tokens/evm/web3.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getERC20Contract": () => (/* binding */ getERC20Contract)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/helper */ "../extension-base/src/services/chain-service/helper/index.ts");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0


const getERC20Contract = (networkKey, assetAddress, evmApiMap, options = {}) => {
  // @ts-ignore
  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-member-access
  return new evmApiMap[networkKey].api.eth.Contract(_subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_0__._ERC20_ABI, assetAddress, options);
};

/***/ }),

/***/ "../extension-base/src/koni/api/tokens/wasm/index.ts":
/*!***********************************************************!*\
  !*** ../extension-base/src/koni/api/tokens/wasm/index.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getPSP22ContractPromise": () => (/* binding */ getPSP22ContractPromise),
/* harmony export */   "getPSP34ContractPromise": () => (/* binding */ getPSP34ContractPromise),
/* harmony export */   "getPSP34TransferExtrinsic": () => (/* binding */ getPSP34TransferExtrinsic),
/* harmony export */   "getTokenUriMethod": () => (/* binding */ getTokenUriMethod),
/* harmony export */   "isAzeroDomainNft": () => (/* binding */ isAzeroDomainNft),
/* harmony export */   "isNeurogunNft": () => (/* binding */ isNeurogunNft),
/* harmony export */   "isPinkRoboNft": () => (/* binding */ isPinkRoboNft)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm/utils */ "../extension-base/src/koni/api/tokens/wasm/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/helper */ "../extension-base/src/services/chain-service/helper/index.ts");
/* harmony import */ var _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/api-contract */ "../../node_modules/@polkadot/api-contract/promise/index.js");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0




function getPSP22ContractPromise(apiPromise, contractAddress) {
  return new _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_0__.ContractPromise(apiPromise, _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_1__._PSP22_ABI, contractAddress);
}
function isPinkRoboNft(contractAddress) {
  return ['XoywUxTTtNKPRrRN7V5KXCqz2QLMFeK7DxhpSniqZHps5Xq'].includes(contractAddress);
}
function isNeurogunNft(contractAddress) {
  return ['aZ9bd2tHeGKrs3FnJv5oe7kgVrP5GQvdJMhC2GxjXA2Yqbd'].includes(contractAddress);
}
function isAzeroDomainNft(contractAddress) {
  return ['5FsB91tXSEuMj6akzdPczAtmBaVKToqHmtAwSUzXh49AYzaD', '5CTQBfBC9SfdrCDBJdfLiyW2pg9z5W6C6Es8sK313BLnFgDf'].includes(contractAddress);
}
function getPSP34ContractPromise(apiPromise, contractAddress) {
  if (isPinkRoboNft(contractAddress)) {
    return new _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_0__.ContractPromise(apiPromise, _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_1__._PINK_PSP34_ABI, contractAddress);
  }
  if (isNeurogunNft(contractAddress)) {
    return new _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_0__.ContractPromise(apiPromise, _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_1__._NEUROGUNS_PSP34_ABI, contractAddress);
  }
  if (isAzeroDomainNft(contractAddress)) {
    return new _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_0__.ContractPromise(apiPromise, _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_1__._AZERO_DOMAIN_REGISTRY_ABI, contractAddress);
  }
  return new _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_0__.ContractPromise(apiPromise, _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_1__._PSP34_ABI, contractAddress);
}
function getTokenUriMethod(contractAddress) {
  if (isPinkRoboNft(contractAddress)) {
    return 'pinkMint::tokenUri';
  }
  if (isNeurogunNft(contractAddress)) {
    return 'tokenUri';
  }
  return 'psp34Traits::tokenUri';
}
const mustFormatNumberReg = /^-?[0-9][0-9,.]+$/;
async function getPSP34TransferExtrinsic(networkKey, substrateApi, senderAddress, recipientAddress, params) {
  const contractAddress = params.contractAddress;
  const onChainOption = params.onChainOption;
  for (const [key, value] of Object.entries(onChainOption)) {
    if (mustFormatNumberReg.test(value)) {
      onChainOption[key] = value.replaceAll(',', '');
    }
  }
  try {
    const contractPromise = getPSP34ContractPromise(substrateApi.api, contractAddress);
    // @ts-ignore
    const gasLimit = await (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_2__.getWasmContractGasLimit)(substrateApi.api, senderAddress, 'psp34::transfer', contractPromise, {}, [recipientAddress, onChainOption, {}]);

    // @ts-ignore
    return contractPromise.tx['psp34::transfer']({
      gasLimit
    }, recipientAddress, onChainOption, {});
  } catch (e) {
    console.debug(e);
    return null;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/api/tokens/wasm/utils.ts":
/*!***********************************************************!*\
  !*** ../extension-base/src/koni/api/tokens/wasm/utils.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getDefaultWeightV2": () => (/* binding */ getDefaultWeightV2),
/* harmony export */   "getWasmContractGasLimit": () => (/* binding */ getWasmContractGasLimit)
/* harmony export */ });
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0


const MAX_CALL_WEIGHT = '5000000000000';
const DEFAULT_REF_TIME = '1000000000000';
const toContractAbiMessage = (contractPromise, message) => {
  const value = contractPromise.abi.messages.find(m => m.method === message);
  if (!value) {
    const messages = contractPromise === null || contractPromise === void 0 ? void 0 : contractPromise.abi.messages.map(m => m.method).join(', ');
    const error = `"${message}" not found in metadata.spec.messages: [${messages}]`;
    return {
      ok: false,
      error
    };
  }
  return {
    ok: true,
    value
  };
};
async function getWasmContractGasLimit(api, callerAddress, message, contract, options = {}, args = []) {
  try {
    var _abiMessage$value;
    const abiMessage = toContractAbiMessage(contract, message);
    if (!abiMessage.ok) {
      return getDefaultWeightV2(api, true);
    }

    // @ts-ignore
    const {
      gasLimit,
      storageDepositLimit,
      value
    } = options;

    // @ts-ignore
    const {
      gasRequired
    } = await api.call.contractsApi.call(callerAddress, contract.address, value !== null && value !== void 0 ? value : new (_polkadot_util__WEBPACK_IMPORTED_MODULE_0___default())(0), gasLimit !== null && gasLimit !== void 0 ? gasLimit : null, storageDepositLimit !== null && storageDepositLimit !== void 0 ? storageDepositLimit : null, abiMessage === null || abiMessage === void 0 ? void 0 : (_abiMessage$value = abiMessage.value) === null || _abiMessage$value === void 0 ? void 0 : _abiMessage$value.toU8a(args));
    return gasRequired;
  } catch {
    return getDefaultWeightV2(api, true);
  }
}
function getDefaultWeightV2(apiPromise, isFallback) {
  const proofSize = isFallback ? 3407872 : MAX_CALL_WEIGHT; // TODO: handle error better
  const refTime = isFallback ? 32490000000 : DEFAULT_REF_TIME;
  return apiPromise.registry.createType('WeightV2', {
    refTime,
    proofSize
  });
}

/***/ }),

/***/ "../extension-base/src/koni/api/xcm/index.ts":
/*!***************************************************!*\
  !*** ../extension-base/src/koni/api/xcm/index.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createXcmExtrinsic": () => (/* binding */ createXcmExtrinsic)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_xcm_polkadotXcm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/xcm/polkadotXcm */ "../extension-base/src/koni/api/xcm/polkadotXcm.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_xcm_xcmPallet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/xcm/xcmPallet */ "../extension-base/src/koni/api/xcm/xcmPallet.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_xcm_xTokens__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/xcm/xTokens */ "../extension-base/src/koni/api/xcm/xTokens.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0





const createXcmExtrinsic = async ({
  chainInfoMap,
  destinationTokenInfo,
  originTokenInfo,
  recipient,
  sendingValue,
  substrateApi
}) => {
  const originChainInfo = chainInfoMap[originTokenInfo.originChain];
  const destinationChainInfo = chainInfoMap[destinationTokenInfo.originChain];
  const chainApi = await substrateApi.isReady;
  const api = chainApi.api;
  let extrinsic;
  if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._XCM_CHAIN_GROUP.polkadotXcm.includes(originTokenInfo.originChain)) {
    extrinsic = (0,_subwallet_extension_base_koni_api_xcm_polkadotXcm__WEBPACK_IMPORTED_MODULE_1__.getExtrinsicByPolkadotXcmPallet)(originTokenInfo, originChainInfo, destinationChainInfo, recipient, sendingValue, api);
  } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_0__._XCM_CHAIN_GROUP.xcmPallet.includes(originTokenInfo.originChain)) {
    extrinsic = (0,_subwallet_extension_base_koni_api_xcm_xcmPallet__WEBPACK_IMPORTED_MODULE_2__.getExtrinsicByXcmPalletPallet)(originTokenInfo, originChainInfo, destinationChainInfo, recipient, sendingValue, api);
  } else {
    extrinsic = (0,_subwallet_extension_base_koni_api_xcm_xTokens__WEBPACK_IMPORTED_MODULE_3__.getExtrinsicByXtokensPallet)(originTokenInfo, originChainInfo, destinationChainInfo, recipient, sendingValue, api);
  }
  return extrinsic;
};

/***/ }),

/***/ "../extension-base/src/koni/api/xcm/polkadotXcm.ts":
/*!*********************************************************!*\
  !*** ../extension-base/src/koni/api/xcm/polkadotXcm.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getExtrinsicByPolkadotXcmPallet": () => (/* binding */ getExtrinsicByPolkadotXcmPallet)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/xcm/utils */ "../extension-base/src/koni/api/xcm/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0



function getExtrinsicByPolkadotXcmPallet(tokenInfo, originChainInfo, destinationChainInfo, recipientAddress, value, api) {
  const weightParam = (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__.getDestWeight)();
  const version = ['statemint', 'statemine', 'shiden', 'astar'].includes(originChainInfo.slug) ? 'V3' : 'V1';
  const beneficiary = (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__.getBeneficiary)(destinationChainInfo, recipientAddress, version);
  const destination = (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__.getDestinationChainLocation)(originChainInfo, destinationChainInfo, version);
  let assetLocation = (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__.getTokenLocation)(tokenInfo, value, version);
  let method = 'limitedReserveTransferAssets';
  if (['astar', 'shiden'].includes(originChainInfo.slug) && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_1__._isNativeToken)(tokenInfo)) {
    method = 'limitedReserveWithdrawAssets';
  } else if (['statemint', 'statemine'].includes(originChainInfo.slug) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_1__._isSubstrateRelayChain)(destinationChainInfo)) {
    assetLocation = {
      [version]: [{
        id: {
          Concrete: {
            parents: 1,
            interior: 'Here'
          }
        },
        fun: {
          Fungible: value
        }
      }]
    };
    method = 'limitedTeleportAssets';
  }
  return api.tx.polkadotXcm[method](destination, beneficiary, assetLocation, 0,
  // FeeAssetItem
  weightParam);
}

/***/ }),

/***/ "../extension-base/src/koni/api/xcm/utils.ts":
/*!***************************************************!*\
  !*** ../extension-base/src/koni/api/xcm/utils.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FOUR_INSTRUCTIONS_LIMITED_WEIGHT": () => (/* binding */ FOUR_INSTRUCTIONS_LIMITED_WEIGHT),
/* harmony export */   "FOUR_INSTRUCTIONS_WEIGHT": () => (/* binding */ FOUR_INSTRUCTIONS_WEIGHT),
/* harmony export */   "getBeneficiary": () => (/* binding */ getBeneficiary),
/* harmony export */   "getDestMultilocation": () => (/* binding */ getDestMultilocation),
/* harmony export */   "getDestWeight": () => (/* binding */ getDestWeight),
/* harmony export */   "getDestinationChainLocation": () => (/* binding */ getDestinationChainLocation),
/* harmony export */   "getReceiverLocation": () => (/* binding */ getReceiverLocation),
/* harmony export */   "getTokenLocation": () => (/* binding */ getTokenLocation)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/chain-list */ "../../node_modules/@subwallet/chain-list/index.js");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/evmToAddress.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/decode.js");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0




const FOUR_INSTRUCTIONS_WEIGHT = 5000000000;
const FOUR_INSTRUCTIONS_LIMITED_WEIGHT = {
  Limited: 5000000000
};

// get multilocation for destination chain from a parachain

function getReceiverLocation(destinationChainInfo, toAddress, version) {
  const network = version && version === 'V3' ? undefined : 'Any';
  if (destinationChainInfo.slug === _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_0__.COMMON_CHAIN_SLUGS.ASTAR_EVM) {
    const ss58Address = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_1__.evmToAddress)(toAddress, 2006); // TODO: shouldn't pass addressPrefix directly

    return {
      AccountId32: {
        network,
        id: (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_2__.decodeAddress)(ss58Address)
      }
    };
  }
  if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isChainEvmCompatible)(destinationChainInfo)) {
    return {
      AccountKey20: {
        network,
        key: toAddress
      }
    };
  }
  return {
    AccountId32: {
      network,
      id: (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_2__.decodeAddress)(toAddress)
    }
  };
}
function getBeneficiary(destinationChainInfo, recipientAddress, version = 'V1') {
  const receiverLocation = getReceiverLocation(destinationChainInfo, recipientAddress, version);
  return {
    [version]: {
      parents: 0,
      interior: {
        X1: receiverLocation
      }
    }
  };
}
function getDestWeight() {
  return 'Unlimited';
}
function getTokenLocation(tokenInfo, sendingValue, version = 'V1') {
  if (!(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isNativeToken)(tokenInfo)) {
    const multilocation = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getXcmAssetMultilocation)(tokenInfo);
    return {
      [version]: [{
        id: multilocation,
        fun: {
          Fungible: sendingValue
        }
      }]
    };
  }
  return {
    [version]: [{
      id: {
        Concrete: {
          parents: 0,
          interior: 'Here'
        }
      },
      fun: {
        Fungible: sendingValue
      }
    }]
  };
}
function getDestMultilocation(destinationChainInfo, recipient, version = 'V1') {
  const receiverLocation = getReceiverLocation(destinationChainInfo, recipient, version);
  if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isSubstrateParaChain)(destinationChainInfo)) {
    const interior = {
      X2: [{
        Parachain: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getSubstrateParaId)(destinationChainInfo)
      }, receiverLocation]
    };
    return {
      [version]: {
        parents: 1,
        interior
      }
    };
  }
  return {
    [version]: {
      parents: 1,
      interior: {
        X1: receiverLocation
      }
    }
  };
}
function getDestinationChainLocation(originChainInfo, destinationChainInfo, version = 'V1') {
  const parents = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isSubstrateRelayChain)(originChainInfo) ? 0 : 1;
  const interior = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isSubstrateParaChain)(destinationChainInfo) ? {
    X1: {
      Parachain: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getSubstrateParaId)(destinationChainInfo)
    }
  } : 'Here';
  return {
    [version]: {
      parents,
      interior
    }
  };
}

/***/ }),

/***/ "../extension-base/src/koni/api/xcm/xTokens.ts":
/*!*****************************************************!*\
  !*** ../extension-base/src/koni/api/xcm/xTokens.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getExtrinsicByXtokensPallet": () => (/* binding */ getExtrinsicByXtokensPallet)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/xcm/utils */ "../extension-base/src/koni/api/xcm/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0



function getCurrencyId(tokenInfo) {
  if (['acala', 'karura'].includes(tokenInfo.originChain) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._isNativeToken)(tokenInfo)) {
    return (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getXcmAssetMultilocation)(tokenInfo);
  } else if (['moonbeam', 'moonbase', 'moonriver'].includes(tokenInfo.originChain)) {
    const tokenType = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getXcmAssetType)(tokenInfo);
    const assetId = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getXcmAssetId)(tokenInfo);
    return {
      [tokenType]: assetId
    };
  } else if (['pioneer'].includes(tokenInfo.originChain)) {
    return (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getXcmAssetMultilocation)(tokenInfo);
  }
  return (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainInfo)(tokenInfo) || (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getTokenOnChainAssetId)(tokenInfo);
}
function getExtrinsicByXtokensPallet(tokenInfo, originChainInfo, destinationChainInfo, recipientAddress, value, api) {
  const weightParam = ['pioneer'].includes(originChainInfo.slug) ? _subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_1__.FOUR_INSTRUCTIONS_WEIGHT : (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_1__.getDestWeight)();
  const destVersion = ['moonbeam', 'moonriver', 'bifrost_dot', 'interlay', 'hydradx_main', 'acala'].includes(originChainInfo.slug) ? 'V3' : undefined;
  return api.tx.xTokens.transfer(getCurrencyId(tokenInfo), value, (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_1__.getDestMultilocation)(destinationChainInfo, recipientAddress, destVersion), weightParam);
}

/***/ }),

/***/ "../extension-base/src/koni/api/xcm/xcmPallet.ts":
/*!*******************************************************!*\
  !*** ../extension-base/src/koni/api/xcm/xcmPallet.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getExtrinsicByXcmPalletPallet": () => (/* binding */ getExtrinsicByXcmPalletPallet)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/xcm/utils */ "../extension-base/src/koni/api/xcm/utils.ts");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0


// this pallet is only used by Relaychains
function getExtrinsicByXcmPalletPallet(tokenInfo, originChainInfo, destinationChainInfo, recipientAddress, value, api) {
  const weightParam = (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__.getDestWeight)();
  const xcmVer = 'V3';
  const destination = (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__.getDestinationChainLocation)(originChainInfo, destinationChainInfo, xcmVer);
  const beneficiary = (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__.getBeneficiary)(destinationChainInfo, recipientAddress, xcmVer);
  const tokenLocation = (0,_subwallet_extension_base_koni_api_xcm_utils__WEBPACK_IMPORTED_MODULE_0__.getTokenLocation)(tokenInfo, value, xcmVer);
  let method = 'limitedReserveTransferAssets';
  if (['statemint', 'statemine'].includes(destinationChainInfo.slug)) {
    method = 'limitedTeleportAssets';
  }
  return api.tx.xcmPallet[method](destination, beneficiary, tokenLocation, 0, weightParam);
}

/***/ }),

/***/ "../extension-base/src/koni/background/cron.ts":
/*!*****************************************************!*\
  !*** ../extension-base/src/koni/background/cron.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KoniCron": () => (/* binding */ KoniCron)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/logger.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0






class KoniCron {
  status = 'pending';
  constructor(state, subscriptions, dbService) {
    this.subscriptions = subscriptions;
    this.dbService = dbService;
    this.state = state;
    this.logger = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_0__.logger)('Cron');
    // this.init();
  }

  cronMap = {};
  subjectMap = {};
  getCron = name => {
    return this.cronMap[name];
  };
  getSubjectMap = name => {
    return this.subjectMap[name];
  };
  addCron = (name, callback, interval, runFirst = true) => {
    if (runFirst) {
      callback();
    }
    this.cronMap[name] = setInterval(callback, interval);
  };
  addSubscribeCron = (name, callback, interval) => {
    const sb = new rxjs__WEBPACK_IMPORTED_MODULE_1__.Subject();
    callback(sb);
    this.subjectMap[name] = sb;
    this.cronMap[name] = setInterval(callback, interval);
  };
  removeCron = name => {
    const interval = this.cronMap[name];
    if (interval) {
      clearInterval(interval);
      delete this.cronMap[name];
    }
  };
  removeAllCrons = () => {
    Object.entries(this.cronMap).forEach(([key, interval]) => {
      clearInterval(interval);
      delete this.cronMap[key];
    });
  };
  start = async () => {
    if (this.status === 'running') {
      return;
    }
    await Promise.all([this.state.eventService.waitKeyringReady, this.state.eventService.waitAssetReady]);
    const currentAccountInfo = this.state.keyringService.currentAccount;
    const commonReloadEvents = ['account.add', 'account.remove', 'account.updateCurrent', 'chain.add', 'asset.updateState'];
    this.eventHandler = (events, eventTypes) => {
      var _serviceInfo$currentA;
      const serviceInfo = this.state.getServiceInfo();
      const commonReload = eventTypes.some(eventType => commonReloadEvents.includes(eventType));
      const chainUpdated = eventTypes.includes('chain.updateState');
      const reloadMantaPay = eventTypes.includes('mantaPay.submitTransaction') || eventTypes.includes('mantaPay.enable');
      const updatedChains = [];
      if (chainUpdated) {
        events.forEach(event => {
          if (event.type === 'chain.updateState') {
            const updatedData = event.data;
            updatedChains.push(updatedData[0]);
          }
        });
      }
      if (!commonReload && !chainUpdated && !reloadMantaPay) {
        return;
      }
      const address = (_serviceInfo$currentA = serviceInfo.currentAccountInfo) === null || _serviceInfo$currentA === void 0 ? void 0 : _serviceInfo$currentA.address;
      if (!address) {
        return;
      }
      const chainInfoMap = serviceInfo.chainInfoMap;
      const needUpdateNft = this.needUpdateNft(chainInfoMap, updatedChains);

      // MantaPay
      reloadMantaPay && this.removeCron('syncMantaPay');

      // NFT
      (commonReload || needUpdateNft) && this.resetNft(address);
      (commonReload || needUpdateNft) && this.removeCron('refreshNft');

      // Chains
      if (this.checkNetworkAvailable(serviceInfo)) {
        // only add cron job if there's at least 1 active network
        (commonReload || needUpdateNft) && this.addCron('refreshNft', this.refreshNft(address, serviceInfo.chainApiMap, this.state.getSmartContractNfts(), this.state.getActiveChainInfoMap()), _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.CRON_REFRESH_NFT_INTERVAL);
        reloadMantaPay && this.addCron('syncMantaPay', this.syncMantaPay, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.CRON_SYNC_MANTA_PAY);
      } else {
        this.setStakingRewardReady();
      }
    };
    this.state.eventService.onLazy(this.eventHandler);
    if (!(currentAccountInfo !== null && currentAccountInfo !== void 0 && currentAccountInfo.address)) {
      return;
    }
    if (Object.keys(this.state.getSubstrateApiMap()).length !== 0 || Object.keys(this.state.getEvmApiMap()).length !== 0) {
      this.resetNft(currentAccountInfo.address);
      this.addCron('refreshNft', this.refreshNft(currentAccountInfo.address, this.state.getApiMap(), this.state.getSmartContractNfts(), this.state.getActiveChainInfoMap()), _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.CRON_REFRESH_NFT_INTERVAL);
      this.addCron('refreshStakingReward', this.refreshStakingReward(currentAccountInfo.address), _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.CRON_REFRESH_STAKING_REWARD_INTERVAL);
      this.addCron('refreshPoolingSta             kingReward', this.refreshStakingRewardFastInterval(currentAccountInfo.address), _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.CRON_REFRESH_STAKING_REWARD_FAST_INTERVAL);
      this.addCron('syncMantaPay', this.syncMantaPay, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.CRON_SYNC_MANTA_PAY);
    } else {
      this.setStakingRewardReady();
    }
    this.status = 'running';
  };
  stop = async () => {
    if (this.status === 'stopped') {
      return;
    }

    // Unsubscribe events
    if (this.eventHandler) {
      this.state.eventService.offLazy(this.eventHandler);
      this.eventHandler = undefined;
    }
    if (this.serviceSubscription) {
      this.serviceSubscription.unsubscribe();
      this.serviceSubscription = undefined;
    }
    this.removeAllCrons();
    this.status = 'stopped';
    return Promise.resolve();
  };
  syncMantaPay = () => {
    if (this.state.isMantaPayEnabled) {
      this.state.syncMantaPay().catch(console.warn);
    }
  };
  refreshNft = (address, apiMap, smartContractNfts, chainInfoMap) => {
    return () => {
      this.subscriptions.subscribeNft(address, apiMap.substrate, apiMap.evm, smartContractNfts, chainInfoMap);
    };
  };
  resetNft = newAddress => {
    this.state.resetNft(newAddress);
  };
  refreshStakingReward = address => {
    return () => {
      this.subscriptions.subscribeStakingReward(address).catch(this.logger.error);
    };
  };
  refreshStakingRewardFastInterval = address => {
    return () => {
      this.subscriptions.subscribeStakingRewardFastInterval(address).catch(this.logger.error);
    };
  };
  setStakingRewardReady = () => {
    this.state.updateStakingRewardReady(true);
  };
  checkNetworkAvailable = serviceInfo => {
    return Object.keys(serviceInfo.chainApiMap.substrate).length > 0 || Object.keys(serviceInfo.chainApiMap.evm).length > 0;
  };
  async reloadNft() {
    const address = this.state.keyringService.currentAccount.address;
    const serviceInfo = this.state.getServiceInfo();
    this.resetNft(address);
    this.removeCron('refreshNft');
    this.addCron('refreshNft', this.refreshNft(address, serviceInfo.chainApiMap, this.state.getSmartContractNfts(), this.state.getActiveChainInfoMap()), _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.CRON_REFRESH_NFT_INTERVAL);
    await (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_3__.waitTimeout)(1800);
    return true;
  }
  async reloadStaking() {
    const address = this.state.keyringService.currentAccount.address;
    console.log('reload staking', address);
    await (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_3__.waitTimeout)(1800);
    return true;
  }
  needUpdateNft(chainInfoMap, updatedChains) {
    if (updatedChains && updatedChains.length > 0) {
      return updatedChains.some(updatedChain => {
        const chainInfo = chainInfoMap[updatedChain];
        return (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._isChainSupportNativeNft)(chainInfo) || (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._isChainSupportEvmNft)(chainInfo) || (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._isChainSupportWasmNft)(chainInfo);
      });
    }
    return false;
  }
}

/***/ }),

/***/ "../extension-base/src/koni/background/handlers/Extension.ts":
/*!*******************************************************************!*\
  !*** ../extension-base/src/koni/background/handlers/Extension.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ KoniExtension)
/* harmony export */ });
/* harmony import */ var _ethereumjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ethereumjs/common */ "../../node_modules/@ethereumjs/common/dist.browser/index.js");
/* harmony import */ var _ethereumjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_ethereumjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/TransactionError */ "../extension-base/src/background/errors/TransactionError.ts");
/* harmony import */ var _subwallet_extension_base_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/Extension */ "../extension-base/src/background/handlers/Extension.ts");
/* harmony import */ var _subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/helpers */ "../extension-base/src/background/handlers/helpers.ts");
/* harmony import */ var _subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/subscriptions */ "../extension-base/src/background/handlers/subscriptions.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_background_warnings_TransactionWarning__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @subwallet/extension-base/background/warnings/TransactionWarning */ "../extension-base/src/background/warnings/TransactionWarning.ts");
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_dotsama_domain__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/dotsama/domain */ "../extension-base/src/koni/api/dotsama/domain.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_dotsama_parseTransaction__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/dotsama/parseTransaction */ "../extension-base/src/koni/api/dotsama/parseTransaction.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_dotsama_transfer__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/dotsama/transfer */ "../extension-base/src/koni/api/dotsama/transfer.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft_transfer__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft/transfer */ "../extension-base/src/koni/api/nft/transfer.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding */ "../extension-base/src/koni/api/staking/bonding/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/paraChain */ "../extension-base/src/koni/api/staking/bonding/paraChain.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding/relayChain */ "../extension-base/src/koni/api/staking/bonding/relayChain.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_evm_transfer__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/evm/transfer */ "../extension-base/src/koni/api/tokens/evm/transfer.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm */ "../extension-base/src/koni/api/tokens/wasm/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_xcm__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/xcm */ "../extension-base/src/koni/api/xcm/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/types */ "../extension-base/src/services/chain-service/types.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @subwallet/extension-base/services/request-service/constants */ "../extension-base/src/services/request-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/services/setting-service/constants */ "../extension-base/src/services/setting-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service_constants__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service/constants */ "../extension-base/src/services/wallet-connect-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service/helpers */ "../extension-base/src/services/wallet-connect-service/helpers.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/array.ts");
/* harmony import */ var _subwallet_extension_base_utils_address__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @subwallet/extension-base/utils/address */ "../extension-base/src/utils/address.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth */ "../extension-base/src/utils/eth.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth/parseTransaction */ "../extension-base/src/utils/eth/parseTransaction/index.ts");
/* harmony import */ var _subwallet_extension_base_utils_number__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @subwallet/extension-base/utils/number */ "../extension-base/src/utils/number.ts");
/* harmony import */ var _subwallet_keyring__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @subwallet/keyring */ "../../node_modules/@subwallet/keyring/pair/index.js");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/bundle.js");
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/utils */ "../../node_modules/@walletconnect/utils/dist/index.es.js");
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bignumber.js */ "../../node_modules/bignumber.js/bignumber.mjs");
/* harmony import */ var ethereumjs_tx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ethereumjs-tx */ "../../node_modules/ethereumjs-tx/dist/index.js");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
/* harmony import */ var _polkadot_types__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! @polkadot/types */ "../../node_modules/@polkadot/types/create/registry.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/assert.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/is/hex.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/hex/toU8a.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/u8a/toString.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_29__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/u8a/toHex.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/bn/consts.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/hex/stripPrefix.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/is/ascii.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/mnemonic/generate.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/key/extractSuri.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/mnemonic/validate.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/is.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/decode.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/base64/bs64.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/json/decrypt.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/addressToEvm.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0










































const ETH_DERIVE_DEFAULT = '/m/44\'/60\'/0\'/0/0';
function getSuri(seed, type) {
  return type === 'ethereum' ? `${seed}${ETH_DERIVE_DEFAULT}` : seed;
}
function transformAccounts(accounts) {
  return Object.values(accounts).map(({
    json: {
      address,
      meta
    },
    type
  }) => ({
    address,
    ...meta,
    type
  }));
}
const ACCOUNT_ALL_JSON = {
  address: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_ACCOUNT_KEY,
  name: 'All'
};
class KoniExtension {
  #lockTimeOut = undefined;
  #koniState;
  #timeAutoLock = _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_AUTO_LOCK_TIME;
  #skipAutoLock = false;
  #alwaysLock = false;
  #firstTime = true;
  constructor(state) {
    this.#koniState = state;
    const updateTimeAutoLock = rs => {
      // Check time auto lock change
      if (this.#timeAutoLock !== rs.timeAutoLock) {
        this.#timeAutoLock = rs.timeAutoLock;
        this.#alwaysLock = !rs.timeAutoLock;
        clearTimeout(this.#lockTimeOut);
        if (this.#timeAutoLock > 0) {
          this.#lockTimeOut = setTimeout(() => {
            if (!this.#skipAutoLock) {
              this.keyringLock();
            }
          }, this.#timeAutoLock * 60 * 1000);
        } else if (this.#alwaysLock) {
          if (!this.#firstTime) {
            this.keyringLock();
          }
        }
      }
      if (this.#firstTime) {
        this.#firstTime = false;
      }
    };
    this.#koniState.settingService.getSettings(updateTimeAutoLock);
    this.#koniState.settingService.getSubject().subscribe({
      next: updateTimeAutoLock
    });
  }

  /// Clone from PolkadotJs
  accountsCreateExternal({
    address,
    genesisHash,
    name
  }) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addExternal(address, {
      genesisHash,
      name
    });
    return true;
  }
  accountsCreateHardware({
    accountIndex,
    address,
    addressOffset,
    genesisHash,
    hardwareType,
    name
  }) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addHardware(address, hardwareType, {
      accountIndex,
      addressOffset,
      genesisHash,
      name
    });
    return true;
  }
  accountsCreateSuri({
    genesisHash,
    name,
    suri,
    type
  }) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addUri(getSuri(suri, type), {
      genesisHash,
      name
    }, type);
    return true;
  }
  accountsChangePassword({
    address,
    newPass,
    oldPass
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(pair, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to find account'));
    try {
      if (!pair.isLocked) {
        pair.lock();
      }
      pair.decodePkcs8(oldPass);
    } catch (error) {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Wrong password'));
    }
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.encryptAccount(pair, newPass);
    return true;
  }
  accountsEdit({
    address,
    name
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(pair, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to find account'));
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.saveAccountMeta(pair, {
      ...pair.meta,
      name
    });
    return true;
  }
  accountsExport({
    address,
    password
  }) {
    return {
      exportedJson: _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.backupAccount(_subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address), password)
    };
  }
  accountsShow({
    address,
    isShowing
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(pair, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to find account'));
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.saveAccountMeta(pair, {
      ...pair.meta,
      isHidden: !isShowing
    });
    return true;
  }
  accountsValidate({
    address,
    password
  }) {
    try {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.backupAccount(_subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address), password);
      return true;
    } catch (e) {
      return false;
    }
  }

  // FIXME This looks very much like what we have in Tabs
  accountsSubscribe(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const accountSubject = this.#koniState.keyringService.accountSubject;
    const subscription = accountSubject.subscribe(accounts => cb(transformAccounts(accounts)));
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
      subscription.unsubscribe();
    });
    return true;
  }
  metadataApprove({
    id
  }) {
    const queued = this.#koniState.getMetaRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(queued, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
    const {
      request,
      resolve
    } = queued;
    this.#koniState.saveMetadata(request);
    resolve(true);
    return true;
  }
  metadataGet(genesisHash) {
    return this.#koniState.knownMetadata.find(result => result.genesisHash === genesisHash) || null;
  }
  metadataList() {
    return this.#koniState.knownMetadata;
  }
  metadataReject({
    id
  }) {
    const queued = this.#koniState.getMetaRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(queued, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
    const {
      reject
    } = queued;
    reject(new Error('Rejected'));
    return true;
  }
  metadataSubscribe(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = this.#koniState.metaSubject.subscribe(requests => cb(requests));
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
      subscription.unsubscribe();
    });
    return this.#koniState.metaSubject.value;
  }
  jsonRestore({
    file,
    password
  }) {
    try {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.restoreAccount(file, password, true);
    } catch (error) {
      throw new Error(error.message);
    }
  }
  batchRestore({
    file,
    password
  }) {
    try {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.restoreAccounts(file, password);
    } catch (error) {
      throw new Error(error.message);
    }
  }
  jsonGetAccountInfo(json) {
    try {
      const {
        address,
        meta: {
          genesisHash,
          name
        },
        type
      } = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.createFromJson(json);
      return {
        address,
        genesisHash,
        name,
        type
      };
    } catch (e) {
      console.error(e);
      throw new Error(e.message);
    }
  }
  seedCreate({
    length = _subwallet_extension_base_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_10__.SEED_DEFAULT_LENGTH,
    seed: _seed,
    type
  }) {
    const seed = _seed || (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_11__.mnemonicGenerate)(length);
    return {
      address: _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.createFromUri(getSuri(seed, type), {}, type).address,
      seed
    };
  }
  seedValidate({
    suri,
    type
  }) {
    const {
      phrase
    } = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_12__.keyExtractSuri)(suri);
    if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(phrase)) {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(phrase, 256), (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Invalid seed phrase. Please try again.'));
    } else {
      // sadly isHex detects as string, so we need a cast here
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(_subwallet_extension_base_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_10__.SEED_LENGTHS.includes(phrase.split(' ').length), (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Seed phrase needs to contain {{x}} words', {
        replace: {
          x: _subwallet_extension_base_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_10__.SEED_LENGTHS.join(', ')
        }
      }));
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_14__.mnemonicValidate)(phrase), (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Invalid seed phrase. Please try again.'));
    }
    return {
      address: _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.createFromUri(getSuri(suri, type), {}, type).address,
      suri
    };
  }

  // TODO: move to request service
  signingApproveSignature({
    id,
    signature
  }) {
    const queued = this.#koniState.getSignRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(queued, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
    const {
      resolve
    } = queued;
    resolve({
      id,
      signature
    });
    return true;
  }

  // TODO: move to request service
  signingCancel({
    id
  }) {
    const queued = this.#koniState.getSignRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(queued, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
    const {
      reject
    } = queued;
    reject(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.USER_REJECT_REQUEST));
    return true;
  }

  // FIXME This looks very much like what we have in authorization
  signingSubscribe(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = this.#koniState.signSubject.subscribe(requests => cb(requests));
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
      subscription.unsubscribe();
    });
    return this.#koniState.signSubject.value;
  }
  windowOpen({
    allowedPath: path,
    params,
    subPath
  }) {
    let paramString = '';
    if (params) {
      paramString += '?';
      for (let i = 0; i < Object.keys(params).length; i++) {
        const [key, value] = Object.entries(params)[i];
        paramString += `${key}=${value}`;
        if (i !== Object.keys(params).length - 1) {
          paramString += '&';
        }
      }
    }
    const url = `${chrome.extension.getURL('index.html')}#${path}${subPath || ''}${paramString}`;
    if (!_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_17__.ALLOWED_PATH.includes(path)) {
      console.error('Not allowed to open the url:', url);
      return false;
    }
    (0,_subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_18__.withErrorLog)(() => chrome.tabs.create({
      url
    }));
    return true;
  }
  derive(parentAddress, suri, password, metadata) {
    const parentPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(parentAddress);
    try {
      parentPair.decodePkcs8(password);
    } catch (e) {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Wrong password'));
    }
    try {
      return parentPair.derive(suri, metadata);
    } catch (err) {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('"{{suri}}" is not a valid derivation path', {
        replace: {
          suri
        }
      }));
    }
  }
  derivationValidate({
    parentAddress,
    parentPassword,
    suri
  }) {
    const childPair = this.derive(parentAddress, suri, parentPassword, {});
    return {
      address: childPair.address,
      suri
    };
  }
  derivationCreate({
    genesisHash,
    name,
    parentAddress,
    parentPassword,
    suri
  }) {
    const childPair = this.derive(parentAddress, suri, parentPassword, {
      genesisHash,
      name,
      parentAddress,
      suri
    });
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addPair(childPair, true);
    return true;
  }

  ///

  cancelSubscription(id) {
    return this.#koniState.cancelSubscription(id);
  }
  createUnsubscriptionHandle(id, unsubscribe) {
    this.#koniState.createUnsubscriptionHandle(id, unsubscribe);
  }
  decodeAddress = (key, ignoreChecksum, ss58Format) => {
    return _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.decodeAddress(key, ignoreChecksum, ss58Format);
  };
  encodeAddress = (key, ss58Format) => {
    return _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.encodeAddress(key, ss58Format);
  };
  accountExportPrivateKey({
    address,
    password
  }) {
    return this.#koniState.accountExportPrivateKey({
      address,
      password
    });
  }
  checkPublicAndSecretKey(request) {
    return this.#koniState.checkPublicAndSecretKey(request);
  }
  async accountsGetAllWithCurrentAddress(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const keyringService = this.#koniState.keyringService;
    await this.#koniState.eventService.waitAccountReady;
    const currentAccount = keyringService.currentAccount;
    const transformedAccounts = transformAccounts(keyringService.accounts);
    const responseData = {
      accounts: transformedAccounts !== null && transformedAccounts !== void 0 && transformedAccounts.length ? [{
        ...ACCOUNT_ALL_JSON
      }, ...transformedAccounts] : [],
      currentAddress: currentAccount === null || currentAccount === void 0 ? void 0 : currentAccount.address,
      currentGenesisHash: currentAccount === null || currentAccount === void 0 ? void 0 : currentAccount.currentGenesisHash
    };
    const subscriptionAccounts = keyringService.accountSubject.subscribe(storedAccounts => {
      const transformedAccounts = transformAccounts(storedAccounts);
      responseData.accounts = transformedAccounts !== null && transformedAccounts !== void 0 && transformedAccounts.length ? [{
        ...ACCOUNT_ALL_JSON
      }, ...transformedAccounts] : [];
      cb(responseData);
    });
    const subscriptionCurrentAccount = keyringService.currentAccountSubject.subscribe(currentAccountData => {
      responseData.currentAddress = currentAccountData.address;
      responseData.currentGenesisHash = currentAccountData.currentGenesisHash;
      cb(responseData);
    });
    this.createUnsubscriptionHandle(id, () => {
      subscriptionAccounts.unsubscribe();
      subscriptionCurrentAccount.unsubscribe();
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return responseData;
  }
  accountsGetAll(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.keyringOption.optionsSubject.subscribe(options => {
      const optionsInputAddress = {
        options
      };
      cb(optionsInputAddress);
    });
    this.createUnsubscriptionHandle(id, subscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return id;
  }
  subscribeAddresses(id, port) {
    const _cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = this.#koniState.keyringService.addressesSubject.subscribe(subjectInfo => {
      const addresses = (0,_subwallet_extension_base_utils_address__WEBPACK_IMPORTED_MODULE_19__.convertSubjectInfoToAddresses)(subjectInfo);
      _cb({
        addresses: addresses
      });
    });
    this.createUnsubscriptionHandle(id, subscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    const subjectInfo = this.#koniState.keyringService.addresses;
    return {
      addresses: (0,_subwallet_extension_base_utils_address__WEBPACK_IMPORTED_MODULE_19__.convertSubjectInfoToAddresses)(subjectInfo)
    };
  }
  saveRecentAccount({
    accountId
  }) {
    if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_20__.isAddress)(accountId)) {
      const address = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_21__.reformatAddress)(accountId);
      const account = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getAccount(address);
      const contact = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getAddress(address);
      return account || contact || {
        ..._subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.saveRecent(address).json,
        publicKey: (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_22__.decodeAddress)(address)
      };
    } else {
      throw Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('This is not an address'));
    }
  }
  editContactAccount({
    address,
    meta
  }) {
    if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_20__.isAddress)(address)) {
      const _address = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_21__.reformatAddress)(address);
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.saveAddress(_address, meta);
      return true;
    } else {
      throw Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('This is not an address'));
    }
  }
  deleteContactAccount({
    address
  }) {
    if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_20__.isAddress)(address)) {
      const _address = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_21__.reformatAddress)(address);
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.forgetAddress(_address);
      return true;
    } else {
      throw Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('This is not an address'));
    }
  }
  _getAuthListV2() {
    const keyringService = this.#koniState.keyringService;
    return new Promise((resolve, reject) => {
      this.#koniState.getAuthorize(rs => {
        const addressList = Object.keys(keyringService.accounts);
        const urlList = Object.keys(rs);
        if (Object.keys(rs[urlList[0]].isAllowedMap).toString() !== addressList.toString()) {
          urlList.forEach(url => {
            addressList.forEach(address => {
              if (!Object.keys(rs[url].isAllowedMap).includes(address)) {
                rs[url].isAllowedMap[address] = false;
              }
            });
            Object.keys(rs[url].isAllowedMap).forEach(address => {
              if (!addressList.includes(address)) {
                delete rs[url].isAllowedMap[address];
              }
            });
          });
          this.#koniState.setAuthorize(rs);
        }
        resolve(rs);
      });
    });
  }
  authorizeSubscribeV2(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = this.#koniState.authSubjectV2.subscribe(requests => cb(requests));
    this.createUnsubscriptionHandle(id, subscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.authSubjectV2.value;
  }
  async getAuthListV2() {
    const authList = await this._getAuthListV2();
    return {
      list: authList
    };
  }
  authorizeApproveV2({
    accounts,
    id
  }) {
    const queued = this.#koniState.getAuthRequestV2(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(queued, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
    const {
      resolve
    } = queued;
    resolve({
      accounts,
      result: true
    });
    return true;
  }
  authorizeRejectV2({
    id
  }) {
    const queued = this.#koniState.getAuthRequestV2(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(queued, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
    const {
      reject
    } = queued;
    reject(new Error('Rejected'));
    return true;
  }
  authorizeCancelV2({
    id
  }) {
    const queued = this.#koniState.getAuthRequestV2(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(queued, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
    const {
      reject
    } = queued;

    // Reject without error meaning cancel
    reject(new Error('Cancelled'));
    return true;
  }
  _forgetSite(url, callBack) {
    this.#koniState.getAuthorize(value => {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(value, 'The source is not known');
      delete value[url];
      this.#koniState.setAuthorize(value, () => {
        callBack && callBack(value);
      });
    });
  }
  forgetSite(data, id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    this._forgetSite(data.url, items => {
      cb(items);
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return true;
  }
  _forgetAllSite(callBack) {
    this.#koniState.getAuthorize(value => {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(value, 'The source is not known');
      value = {};
      this.#koniState.setAuthorize(value, () => {
        callBack && callBack(value);
      });
    });
  }
  forgetAllSite(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    this._forgetAllSite(items => {
      cb(items);
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return true;
  }
  getAccounts() {
    const storedAccounts = this.#koniState.keyringService.accounts;
    const transformedAccounts = transformAccounts(storedAccounts);
    return transformedAccounts.map(a => a.address);
  }
  isAddressValidWithAuthType(address, accountAuthType) {
    if (accountAuthType === 'substrate') {
      return !(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(address);
    } else if (accountAuthType === 'evm') {
      return (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(address);
    }
    return true;
  }
  filterAccountsByAccountAuthType(accounts, accountAuthType) {
    if (accountAuthType === 'substrate') {
      return accounts.filter(address => !(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(address));
    } else if (accountAuthType === 'evm') {
      return accounts.filter(address => (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(address));
    } else {
      return accounts;
    }
  }
  _changeAuthorizationAll(connectValue, callBack) {
    this.#koniState.getAuthorize(value => {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(value, 'The source is not known');
      const accounts = this.getAccounts();
      Object.keys(value).forEach(url => {
        if (!value[url].isAllowed) {
          return;
        }
        const targetAccounts = this.filterAccountsByAccountAuthType(accounts, value[url].accountAuthType);
        targetAccounts.forEach(address => {
          value[url].isAllowedMap[address] = connectValue;
        });
      });
      this.#koniState.setAuthorize(value, () => {
        callBack && callBack(value);
      });
    });
  }
  changeAuthorizationAll(data, id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    this._changeAuthorizationAll(data.connectValue, items => {
      cb(items);
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return true;
  }
  _changeAuthorization(url, connectValue, callBack) {
    this.#koniState.getAuthorize(value => {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(value[url], 'The source is not known');
      const accounts = this.getAccounts();
      const targetAccounts = this.filterAccountsByAccountAuthType(accounts, value[url].accountAuthType);
      targetAccounts.forEach(address => {
        value[url].isAllowedMap[address] = connectValue;
      });
      this.#koniState.setAuthorize(value, () => {
        callBack && callBack(value);
      });
    });
  }
  toggleAuthorization2(url) {
    return new Promise(resolve => {
      this.#koniState.getAuthorize(value => {
        (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(value[url], 'The source is not known');
        value[url].isAllowed = !value[url].isAllowed;
        this.#koniState.setAuthorize(value, () => {
          resolve({
            list: value
          });
        });
      });
    });
  }
  changeAuthorization(data, id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    this._changeAuthorization(data.url, data.connectValue, items => {
      cb(items);
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return true;
  }
  _changeAuthorizationPerAcc(address, connectValue, url, callBack) {
    this.#koniState.getAuthorize(value => {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(value, 'The source is not known');
      if (this.isAddressValidWithAuthType(address, value[url].accountAuthType)) {
        value[url].isAllowedMap[address] = connectValue;
        this.#koniState.setAuthorize(value, () => {
          callBack && callBack(value);
        });
      } else {
        callBack && callBack(value);
      }
    });
  }
  _changeAuthorizationBlock(connectValue, id) {
    this.#koniState.getAuthorize(value => {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(value, 'The source is not known');
      value[id].isAllowed = connectValue;
      this.#koniState.setAuthorize(value);
    });
  }
  _changeAuthorizationPerSite(values, id) {
    this.#koniState.getAuthorize(value => {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(value, 'The source is not known');
      value[id].isAllowedMap = values;
      this.#koniState.setAuthorize(value);
    });
  }
  changeAuthorizationPerAcc(data, id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    this._changeAuthorizationPerAcc(data.address, data.connectValue, data.url, items => {
      cb(items);
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return true;
  }
  changeAuthorizationPerSite(data) {
    this._changeAuthorizationPerSite(data.values, data.id);
    return true;
  }
  changeAuthorizationBlock(data) {
    this._changeAuthorizationBlock(data.connectedValue, data.id);
    return true;
  }
  async getSettings() {
    return await new Promise(resolve => {
      this.#koniState.getSettings(value => {
        resolve(value);
      });
    });
  }
  async toggleBalancesVisibility() {
    return new Promise(resolve => {
      this.#koniState.getSettings(value => {
        const updateValue = {
          ...value,
          isShowBalance: !value.isShowBalance
        };
        this.#koniState.setSettings(updateValue, () => {
          resolve(!value.isShowBalance);
        });
      });
    });
  }
  saveAccountAllLogo(data, id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    this.#koniState.getSettings(value => {
      const updateValue = {
        ...value,
        accountAllLogo: data
      };
      this.#koniState.setSettings(updateValue, () => {
        // eslint-disable-next-line node/no-callback-literal
        cb(updateValue);
      });
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return true;
  }
  saveTheme(data) {
    this.#koniState.updateSetting('theme', data);
    return true;
  }
  setCamera({
    camera
  }) {
    this.#koniState.updateSetting('camera', camera);
    return true;
  }
  saveBrowserConfirmationType(data) {
    this.#koniState.updateSetting('browserConfirmationType', data);
    return true;
  }
  setAutoLockTime({
    autoLockTime
  }) {
    this.#koniState.updateSetting('timeAutoLock', autoLockTime);
    return true;
  }
  setUnlockType({
    unlockType
  }) {
    this.#koniState.updateSetting('unlockType', unlockType);
    return true;
  }
  async subscribeSettings(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const balancesVisibilitySubscription = this.#koniState.subscribeSettingsSubject().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, balancesVisibilitySubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return await this.getSettings();
  }
  setEnableChainPatrol({
    enable
  }) {
    this.#koniState.updateSetting('enableChainPatrol', enable);
    return true;
  }
  setShowZeroBalance({
    show
  }) {
    this.#koniState.updateSetting('isShowZeroBalance', show);
    return true;
  }
  setLanguage({
    language
  }) {
    this.#koniState.updateSetting('language', language);
    return true;
  }
  setShowBalance({
    enable
  }) {
    this.#koniState.updateSetting('isShowBalance', enable);
    return true;
  }
  async subscribeAuthUrls(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const authorizeUrlSubscription = this.#koniState.subscribeAuthorizeUrlSubject().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, authorizeUrlSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return await this.#koniState.getAuthList();
  }
  _saveCurrentAccountAddress(address, callback) {
    let accountInfo = this.#koniState.keyringService.currentAccount;
    if (!accountInfo) {
      accountInfo = {
        address,
        currentGenesisHash: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_GENESIS_HASH,
        allGenesisHash: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_GENESIS_HASH || undefined
      };
    } else {
      accountInfo.address = address;
      if (address !== _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_ACCOUNT_KEY) {
        try {
          const currentKeyPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
          accountInfo.currentGenesisHash = (currentKeyPair === null || currentKeyPair === void 0 ? void 0 : currentKeyPair.meta.genesisHash) || _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_GENESIS_HASH;
        } catch {
          accountInfo.currentGenesisHash = _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_GENESIS_HASH;
        }
      } else {
        accountInfo.currentGenesisHash = accountInfo.allGenesisHash || _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_GENESIS_HASH;
      }
    }
    this.#koniState.setCurrentAccount(accountInfo, () => {
      callback && callback(accountInfo);
    });
  }
  updateCurrentAccountAddress(address) {
    this._saveCurrentAccountAddress(address);
    return true;
  }
  async saveCurrentAccountAddress(data) {
    return new Promise(resolve => {
      this._saveCurrentAccountAddress(data.address, currentInfo => {
        resolve(currentInfo);
      });
    });
  }
  async getAssetSetting() {
    return this.#koniState.chainService.getAssetSettings();
  }
  subscribeAssetSetting(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const assetSettingSubscription = this.#koniState.chainService.subscribeAssetSettings().subscribe(cb);
    this.createUnsubscriptionHandle(id, assetSettingSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.getAssetSetting();
  }
  async updateAssetSetting(params) {
    try {
      await this.#koniState.chainService.updateAssetSetting(params.tokenSlug, params.assetSetting, params.autoEnableNativeToken);
      this.#koniState.eventService.emit('asset.updateState', params.tokenSlug);
      return true;
    } catch (e) {
      console.error(e);
      return false;
    }
  }
  async getPrice() {
    return this.#koniState.priceService.getPrice();
  }
  subscribePrice(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const priceSubscription = this.#koniState.priceService.getPriceSubject().subscribe(rs => {
      cb(rs);
    });
    this.createUnsubscriptionHandle(id, priceSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.getPrice();
  }
  getBalance(reset) {
    return this.#koniState.getBalance(reset);
  }
  subscribeBalance(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const balanceSubscription = this.#koniState.subscribeBalance().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, balanceSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.getBalance(true);
  }
  getCrowdloan(reset) {
    return this.#koniState.getCrowdloan(reset);
  }
  subscribeCrowdloan(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const crowdloanSubscription = this.#koniState.subscribeCrowdloan().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, crowdloanSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.getCrowdloan(true);
  }
  validatePassword(json, password) {
    const cryptoType = Array.isArray(json.encoding.content) ? json.encoding.content[1] : 'ed25519';
    const encType = Array.isArray(json.encoding.type) ? json.encoding.type : [json.encoding.type];
    const pair = (0,_subwallet_keyring__WEBPACK_IMPORTED_MODULE_24__.createPair)({
      toSS58: this.encodeAddress,
      type: cryptoType
    }, {
      publicKey: this.decodeAddress(json.address, true)
    }, json.meta, (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(json.encoded) ? (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.hexToU8a)(json.encoded) : (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_26__.base64Decode)(json.encoded), encType);

    // unlock then lock (locking cleans secretKey, so needs to be last)
    try {
      pair.decodePkcs8(password);
      pair.lock();
      return true;
    } catch (e) {
      console.error(e);
      return false;
    }
  }
  validatedAccountsPassword(json, password) {
    try {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_27__.u8aToString)((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_28__.jsonDecrypt)(json, password));
      return true;
    } catch (e) {
      return false;
    }
  }
  _addAddressToAuthList(address, isAllowed) {
    this.#koniState.getAuthorize(value => {
      if (value && Object.keys(value).length) {
        Object.keys(value).forEach(url => {
          if (this.isAddressValidWithAuthType(address, value[url].accountAuthType)) {
            value[url].isAllowedMap[address] = isAllowed;
          }
        });
        this.#koniState.setAuthorize(value);
      }
    });
  }
  _addAddressesToAuthList(addresses, isAllowed) {
    this.#koniState.getAuthorize(value => {
      if (value && Object.keys(value).length) {
        Object.keys(value).forEach(url => {
          addresses.forEach(address => {
            if (this.isAddressValidWithAuthType(address, value[url].accountAuthType)) {
              value[url].isAllowedMap[address] = isAllowed;
            }
          });
        }); /**/

        this.#koniState.setAuthorize(value);
      }
    });
  }
  async accountsCreateSuriV2({
    genesisHash,
    isAllowed,
    name,
    password,
    suri: _suri,
    types
  }) {
    const addressDict = {};
    let changedAccount = false;
    const hasMasterPassword = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.keyring.hasMasterPassword;
    if (!hasMasterPassword) {
      if (!password) {
        throw Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('The password of each account is needed to set up master password'));
      } else {
        _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.changeMasterPassword(password);
        this.#koniState.updateKeyringState();
      }
    }
    const currentAccount = this.#koniState.keyringService.currentAccount;
    const allGenesisHash = (currentAccount === null || currentAccount === void 0 ? void 0 : currentAccount.allGenesisHash) || undefined;
    types === null || types === void 0 ? void 0 : types.forEach(type => {
      const suri = getSuri(_suri, type);
      const address = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.createFromUri(suri, {}, type).address;
      addressDict[type] = address;
      const newAccountName = type === 'ethereum' ? `${name} - EVM` : name;
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addUri(suri, {
        genesisHash,
        name: newAccountName
      }, type);
      this._addAddressToAuthList(address, isAllowed);
      if (!changedAccount) {
        if (types.length === 1) {
          this.#koniState.setCurrentAccount({
            address,
            currentGenesisHash: genesisHash || null,
            allGenesisHash
          });
        } else {
          this.#koniState.setCurrentAccount({
            address: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_ACCOUNT_KEY,
            currentGenesisHash: allGenesisHash || null,
            allGenesisHash
          }, undefined, true);
        }
        changedAccount = true;
      }
    });
    await new Promise(resolve => {
      this.#koniState.addAccountRef(Object.values(addressDict), () => {
        resolve();
      });
    });
    if (this.#alwaysLock) {
      this.keyringLock();
    }
    return addressDict;
  }
  async accountsForgetOverride({
    address,
    lockAfter
  }) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.forgetAccount(address);
    await new Promise(resolve => {
      this.#koniState.removeAccountRef(address, () => {
        resolve();
      });
    });

    // Remove from auth list
    await new Promise(resolve => {
      this.#koniState.getAuthorize(value => {
        if (value && Object.keys(value).length) {
          Object.keys(value).forEach(url => {
            delete value[url].isAllowedMap[address];
          });
          this.#koniState.setAuthorize(value, resolve);
        } else {
          resolve();
        }
      });
    });

    // Set current account to all account
    await new Promise(resolve => {
      const currentAccountInfo = this.#koniState.keyringService.currentAccount;
      this.#koniState.setCurrentAccount({
        currentGenesisHash: (currentAccountInfo === null || currentAccountInfo === void 0 ? void 0 : currentAccountInfo.allGenesisHash) || null,
        address: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_ACCOUNT_KEY
      }, resolve);
    });
    await this.#koniState.disableMantaPay(address);
    if (lockAfter) {
      this.checkLockAfterMigrate();
    }
    return true;
  }
  seedCreateV2({
    length = _subwallet_extension_base_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_10__.SEED_DEFAULT_LENGTH,
    seed: _seed,
    types
  }) {
    const seed = _seed || (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_11__.mnemonicGenerate)(length);
    const rs = {
      seed: seed,
      addressMap: {}
    };
    types === null || types === void 0 ? void 0 : types.forEach(type => {
      rs.addressMap[type] = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.createFromUri(getSuri(seed, type), {}, type).address;
    });
    return rs;
  }
  seedValidateV2({
    suri,
    types
  }) {
    const {
      phrase
    } = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_12__.keyExtractSuri)(suri);
    if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(phrase)) {
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(phrase, 256), (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Invalid seed phrase. Please try again.'));
    } else {
      // sadly isHex detects as string, so we need a cast here
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(_subwallet_extension_base_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_10__.SEED_LENGTHS.includes(phrase.split(' ').length), (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Seed phrase needs to contain {{x}} words', {
        replace: {
          x: _subwallet_extension_base_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_10__.SEED_LENGTHS.join(', ')
        }
      }));
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_14__.mnemonicValidate)(phrase), (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Invalid seed phrase. Please try again.'));
    }
    const rs = {
      seed: suri,
      addressMap: {}
    };
    types && types.forEach(type => {
      rs.addressMap[type] = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.createFromUri(getSuri(suri, type), {}, type).address;
    });
    return rs;
  }
  _checkValidatePrivateKey({
    suri,
    types
  }, autoAddPrefix = false) {
    const {
      phrase
    } = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_12__.keyExtractSuri)(suri);
    const rs = {
      autoAddPrefix: autoAddPrefix,
      addressMap: {}
    };
    types && types.forEach(type => {
      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
      rs.addressMap[type] = '';
    });
    if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(phrase) && (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(phrase, 256)) {
      types && types.forEach(type => {
        rs.addressMap[type] = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.createFromUri(getSuri(suri, type), {}, type).address;
      });
    } else {
      rs.autoAddPrefix = false;
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(false, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Invalid private key. Please try again.'));
    }
    return rs;
  }
  metamaskPrivateKeyValidateV2({
    suri,
    types
  }) {
    const isValidSuri = suri.startsWith('0x');
    if (isValidSuri) {
      return this._checkValidatePrivateKey({
        suri,
        types
      });
    } else {
      return this._checkValidatePrivateKey({
        suri: `0x${suri}`,
        types
      }, true);
    }
  }
  deriveV2(parentAddress, suri, metadata) {
    const parentPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(parentAddress);
    if (parentPair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockPair(parentPair.address);
    }
    try {
      return parentPair.derive(suri, metadata);
    } catch (err) {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('"{{suri}}" is not a valid derivation path', {
        replace: {
          suri
        }
      }));
    }
  }
  derivationCreateV2({
    genesisHash,
    isAllowed,
    name,
    parentAddress,
    suri
  }) {
    const childPair = this.deriveV2(parentAddress, suri, {
      genesisHash,
      name,
      parentAddress,
      suri
    });
    const address = childPair.address;
    this._saveCurrentAccountAddress(address, () => {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addPair(childPair, true);
      this._addAddressToAuthList(address, isAllowed);
    });
    return true;
  }
  jsonRestoreV2({
    address,
    file,
    isAllowed,
    password,
    withMasterPassword
  }) {
    const isPasswordValidated = this.validatePassword(file, password);
    if (isPasswordValidated) {
      try {
        this._saveCurrentAccountAddress(address, () => {
          _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.restoreAccount(file, password, withMasterPassword);
          this._addAddressToAuthList(address, isAllowed);
        });
        if (this.#alwaysLock) {
          this.keyringLock();
        }
      } catch (error) {
        throw new Error(error.message);
      }
    } else {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Wrong password'));
    }
  }
  batchRestoreV2({
    accountsInfo,
    file,
    isAllowed,
    password
  }) {
    const addressList = accountsInfo.map(acc => acc.address);
    const isPasswordValidated = this.validatedAccountsPassword(file, password);
    if (isPasswordValidated) {
      try {
        this._saveCurrentAccountAddress(_subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_ACCOUNT_KEY, () => {
          _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.restoreAccounts(file, password);
          this._addAddressesToAuthList(addressList, isAllowed);
        });

        // if (this.#alwaysLock) {
        //   this.keyringLock();
        // }
      } catch (error) {
        throw new Error(error.message);
      }
    } else {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Wrong password'));
    }
  }
  getNftCollection() {
    return this.#koniState.getNftCollection();
  }
  subscribeNftCollection(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const nftCollectionSubscription = this.#koniState.subscribeNftCollection().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, nftCollectionSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.getNftCollection();
  }
  getNft() {
    return this.#koniState.getNft();
  }
  async subscribeNft(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const nftSubscription = this.#koniState.subscribeNft().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, nftSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.getNft();
  }
  getStakingReward() {
    return new Promise((resolve, reject) => {
      this.#koniState.getStakingReward(rs => {
        resolve(rs);
      });
    });
  }
  subscribeStakingReward(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const stakingRewardSubscription = this.#koniState.subscribeStakingReward().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, stakingRewardSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.getStakingReward();
  }
  async getStaking() {
    return this.#koniState.getStaking();
  }
  async subscribeStaking(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const stakingSubscription = this.#koniState.subscribeStaking().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, stakingSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return await this.getStaking();
  }
  async subscribeHistory(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const historySubject = await this.#koniState.historyService.getHistorySubject();
    const subscription = historySubject.subscribe(histories => {
      const addresses = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getAccounts().map(a => a.address);

      // Re-filter
      cb(histories.filter(item => addresses.some(address => (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_21__.isSameAddress)(item.address, address))));
    });
    this.createUnsubscriptionHandle(id, subscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    const addresses = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getAccounts().map(a => a.address);

    // Re-filter
    return historySubject.getValue().filter(item => addresses.some(address => (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_21__.isSameAddress)(item.address, address)));
  }

  // Save address to contact
  // private addContact (to: string) {
  //   const toAddress = reformatAddress(to);
  //   const account = keyring.getAccount(toAddress);
  //   const contact = keyring.getAddress(toAddress);
  //
  //   if (!account && (!contact || contact.meta.isRecent)) {
  //     keyring.saveAddress(toAddress, {});
  //   }
  // }

  validateTransfer(tokenSlug, from, to, value, transferAll) {
    const errors = [];
    const keypair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(from);
    let transferValue;
    if (!transferAll) {
      if (value === undefined) {
        errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Transfer amount is required')));
      }
      if (value) {
        transferValue = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_29___default())(value);
      }
    }
    const tokenInfo = this.#koniState.getAssetBySlug(tokenSlug);
    if (!tokenInfo) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Not found token from registry')));
    }
    if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(from) && (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(to) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isTokenEvmSmartContract)(tokenInfo) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getContractAddressOfToken)(tokenInfo).length === 0) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Not found ERC20 address for this token')));
    }
    return [errors, keypair, transferValue, tokenInfo];
  }
  async makeTransfer(inputData) {
    const {
      from,
      networkKey,
      to,
      tokenSlug,
      transferAll,
      value
    } = inputData;
    const [errors,,, tokenInfo] = this.validateTransfer(tokenSlug, from, to, value, transferAll);
    const warnings = [];
    const evmApiMap = this.#koniState.getEvmApiMap();
    const chainInfo = this.#koniState.getChainInfo(networkKey);
    const nativeTokenInfo = this.#koniState.getNativeTokenInfo(networkKey);
    const nativeTokenSlug = nativeTokenInfo.slug;
    const isTransferNativeToken = nativeTokenSlug === tokenSlug;
    let chainType = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE;
    const tokenBaseAmount = {
      value: '0',
      symbol: tokenInfo.symbol,
      decimals: tokenInfo.decimals || 0
    };
    const transferAmount = {
      ...tokenBaseAmount
    };
    let transaction;

    // Get native token amount
    const freeBalance = await this.getAddressFreeBalance({
      address: from,
      networkKey,
      token: tokenSlug
    });
    try {
      if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(from) && (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(to) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isTokenTransferredByEvm)(tokenInfo)) {
        // TODO: review this
        chainType = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.EVM;
        const txVal = transferAll ? freeBalance.value : value || '0';

        // Estimate with EVM API
        if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isTokenEvmSmartContract)(tokenInfo) || (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isLocalToken)(tokenInfo)) {
          [transaction, transferAmount.value] = await (0,_subwallet_extension_base_koni_api_tokens_evm_transfer__WEBPACK_IMPORTED_MODULE_31__.getERC20TransactionObject)((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getContractAddressOfToken)(tokenInfo), chainInfo, from, to, txVal, !!transferAll, evmApiMap);
        } else {
          [transaction, transferAmount.value] = await (0,_subwallet_extension_base_koni_api_tokens_evm_transfer__WEBPACK_IMPORTED_MODULE_31__.getEVMTransactionObject)(chainInfo, from, to, txVal, !!transferAll, evmApiMap);
        }
      } else if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isMantaZkAsset)(tokenInfo)) {
        // TODO
        transaction = undefined;
        transferAmount.value = '0';
      } else {
        const substrateApi = this.#koniState.getSubstrateApi(networkKey);
        [transaction, transferAmount.value] = await (0,_subwallet_extension_base_koni_api_dotsama_transfer__WEBPACK_IMPORTED_MODULE_32__.createTransferExtrinsic)({
          transferAll: !!transferAll,
          value: value || '0',
          from: from,
          networkKey,
          tokenInfo,
          to: to,
          substrateApi
        });
      }
    } catch (e) {
      const error = e;
      if (error.message.includes('transfer amount exceeds balance')) {
        error.message = (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Insufficient balance');
      }
      throw error;
    }
    const transferNativeAmount = isTransferNativeToken ? transferAmount.value : '0';

    // this.addContact(to);

    const additionalValidator = async inputTransaction => {
      const minAmount = tokenInfo.minAmount || '0';

      // Check ed for sender
      if (!isTransferNativeToken) {
        const {
          value: balance
        } = await this.getAddressFreeBalance({
          address: from,
          networkKey,
          token: tokenSlug
        });
        if (new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](balance).minus(transferAmount.value).lt(minAmount)) {
          inputTransaction.warnings.push(new _subwallet_extension_base_background_warnings_TransactionWarning__WEBPACK_IMPORTED_MODULE_33__.TransactionWarning(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxWarningCode.NOT_ENOUGH_EXISTENTIAL_DEPOSIT));
        }
      }
      const {
        value: receiverBalance
      } = await this.getAddressFreeBalance({
        address: to,
        networkKey,
        token: tokenSlug
      });

      // Check ed for receiver
      if (new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](receiverBalance).plus(transferAmount.value).lt(minAmount)) {
        const atLeast = new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](minAmount).minus(receiverBalance).plus((tokenInfo.decimals || 0) === 0 ? 0 : 1);
        const atLeastStr = (0,_subwallet_extension_base_utils_number__WEBPACK_IMPORTED_MODULE_34__.formatNumber)(atLeast, tokenInfo.decimals || 0, _subwallet_extension_base_utils_number__WEBPACK_IMPORTED_MODULE_34__.balanceFormatter);
        inputTransaction.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.TransferTxErrorType.RECEIVER_NOT_ENOUGH_EXISTENTIAL_DEPOSIT, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('You must transfer at least {{amount}}{{symbol}} to keep the destination account alive', {
          replace: {
            amount: atLeastStr,
            symbol: tokenInfo.symbol
          }
        })));
      }
    };
    return this.#koniState.transactionService.handleTransaction({
      errors,
      warnings,
      address: from,
      chain: networkKey,
      chainType,
      transferNativeAmount,
      transaction,
      data: inputData,
      extrinsicType: isTransferNativeToken ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.TRANSFER_BALANCE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.TRANSFER_TOKEN,
      ignoreWarnings: transferAll,
      isTransferAll: isTransferNativeToken ? transferAll : false,
      edAsWarning: isTransferNativeToken,
      additionalValidator: additionalValidator
    });
  }
  validateCrossChainTransfer(destinationNetworkKey, sendingTokenSlug, sender, sendingValue) {
    const errors = [];
    const keypair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(sender);
    const transferValue = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_29___default())(sendingValue);
    const originTokenInfo = this.#koniState.getAssetBySlug(sendingTokenSlug);
    const destinationTokenInfo = this.#koniState.getXcmEqualAssetByChain(destinationNetworkKey, sendingTokenSlug);
    if (!destinationTokenInfo) {
      errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.TransferTxErrorType.INVALID_TOKEN, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Not found token from registry')));
    }
    return [errors, keypair, transferValue, originTokenInfo, destinationTokenInfo];
  }
  async makeCrossChainTransfer(inputData) {
    const {
      destinationNetworkKey,
      from,
      originNetworkKey,
      to,
      tokenSlug,
      value
    } = inputData;
    const [errors, fromKeyPair,, originTokenInfo, destinationTokenInfo] = this.validateCrossChainTransfer(destinationNetworkKey, tokenSlug, from, value);
    let extrinsic = null;
    if (errors.length > 0) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors(errors);
    }
    let additionalValidator;
    let eventsHandler;
    if (fromKeyPair && destinationTokenInfo) {
      const substrateApi = this.#koniState.getSubstrateApi(originNetworkKey);
      const chainInfoMap = this.#koniState.getChainInfoMap();
      extrinsic = await (0,_subwallet_extension_base_koni_api_xcm__WEBPACK_IMPORTED_MODULE_35__.createXcmExtrinsic)({
        destinationTokenInfo,
        originTokenInfo,
        sendingValue: value,
        recipient: to,
        chainInfoMap,
        substrateApi
      });
      additionalValidator = async inputTransaction => {
        const destMinAmount = destinationTokenInfo.minAmount || '0';
        const atLeast = new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](destMinAmount).multipliedBy(_subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.XCM_MIN_AMOUNT_RATIO);

        // Check ed for receiver
        if (new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](value).lt(atLeast)) {
          const atLeastStr = (0,_subwallet_extension_base_utils_number__WEBPACK_IMPORTED_MODULE_34__.formatNumber)(atLeast, destinationTokenInfo.decimals || 0, _subwallet_extension_base_utils_number__WEBPACK_IMPORTED_MODULE_34__.balanceFormatter);
          inputTransaction.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.TransferTxErrorType.RECEIVER_NOT_ENOUGH_EXISTENTIAL_DEPOSIT, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('You must transfer at least {{amount}}{{symbol}} to keep the destination account alive', {
            replace: {
              amount: atLeastStr,
              symbol: originTokenInfo.symbol
            }
          })));
        }
        const srcMinAmount = originTokenInfo.minAmount || '0';
        const isTransferNativeToken = originTokenInfo.assetType === _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_36__._AssetType.NATIVE;

        // Check ed for sender
        if (!isTransferNativeToken) {
          const {
            value: balance
          } = await this.getAddressFreeBalance({
            address: from,
            networkKey: originNetworkKey,
            token: originTokenInfo.slug
          });
          if (new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](balance).minus(value).lt(srcMinAmount)) {
            inputTransaction.warnings.push(new _subwallet_extension_base_background_warnings_TransactionWarning__WEBPACK_IMPORTED_MODULE_33__.TransactionWarning(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxWarningCode.NOT_ENOUGH_EXISTENTIAL_DEPOSIT));
          }
        }
      };
      eventsHandler = eventEmitter => {
        eventEmitter.on('send', () => {
          try {
            const dest = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(to);
            if (dest) {
              this.updateAssetSetting({
                autoEnableNativeToken: false,
                tokenSlug: destinationTokenInfo.slug,
                assetSetting: {
                  visible: true
                }
              }).catch(console.error);
            }
          } catch (e) {}
        });
      };
    }

    // this.addContact(to);

    return await this.#koniState.transactionService.handleTransaction({
      url: _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_37__.EXTENSION_REQUEST_URL,
      address: from,
      chain: originNetworkKey,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.TRANSFER_XCM,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE,
      transferNativeAmount: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isNativeToken)(originTokenInfo) ? value : '0',
      ignoreWarnings: inputData.transferAll,
      isTransferAll: inputData.transferAll,
      errors,
      additionalValidator: additionalValidator,
      eventsHandler: eventsHandler
    });
  }
  async evmNftSubmitTransaction(inputData) {
    const {
      networkKey,
      params,
      recipientAddress,
      senderAddress
    } = inputData;
    const contractAddress = params.contractAddress;
    const tokenId = params.tokenId;
    const transaction = await (0,_subwallet_extension_base_koni_api_tokens_evm_transfer__WEBPACK_IMPORTED_MODULE_31__.getERC721Transaction)(this.#koniState.getEvmApi(networkKey), contractAddress, senderAddress, recipientAddress, tokenId);

    // this.addContact(recipientAddress);

    return await this.#koniState.transactionService.handleTransaction({
      address: senderAddress,
      chain: networkKey,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.EVM,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.SEND_NFT,
      transaction,
      url: _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_37__.EXTENSION_REQUEST_URL
    });
  }
  async upsertChain(data) {
    try {
      return await this.#koniState.upsertChainInfo(data);
    } catch (e) {
      console.error(e);
      return false;
    }
  }
  removeCustomChain(networkKey) {
    return this.#koniState.removeCustomChain(networkKey);
  }
  disableChain(networkKey) {
    return this.#koniState.disableChain(networkKey);
  }
  async enableChain({
    chainSlug,
    enableTokens
  }) {
    return await this.#koniState.enableChain(chainSlug, enableTokens);
  }
  async reconnectChain(chainSlug) {
    return this.#koniState.chainService.reconnectChain(chainSlug);
  }
  async validateNetwork({
    existedChainSlug,
    provider
  }) {
    return await this.#koniState.validateCustomChain(provider, existedChainSlug);
  }
  resetDefaultNetwork() {
    return this.#koniState.resetDefaultChains();
  }
  recoverDotSamaApi(networkKey) {
    try {
      return this.#koniState.refreshSubstrateApi(networkKey);
    } catch (e) {
      console.error(e);
      return false;
    }
  }
  async upsertCustomToken(data) {
    try {
      await this.#koniState.upsertCustomToken(data);
      return true;
    } catch (e) {
      console.error(e);
      return false;
    }
  }
  async deleteCustomAsset(assetSlug) {
    const assetInfo = this.#koniState.getAssetBySlug(assetSlug);
    if (assetInfo && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isCustomAsset)(assetSlug)) {
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isAssetSmartContractNft)(assetInfo)) {
        // check if deleting a smart contract NFT
        await this.#koniState.deleteNftCollection(assetInfo.originChain, (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getContractAddressOfToken)(assetInfo));
      }
      this.#koniState.deleteCustomAssets([assetSlug]);
      return true;
    }
    return false;
  }
  async validateCustomAsset(data) {
    return await this.#koniState.validateCustomAsset(data);
  }
  async getAddressFreeBalance({
    address,
    networkKey,
    token
  }) {
    if (token && _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_38__._MANTA_ZK_CHAIN_GROUP.includes(networkKey)) {
      const tokenInfo = this.#koniState.chainService.getAssetBySlug(token);
      if (tokenInfo.symbol.startsWith(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_38__._ZK_ASSET_PREFIX)) {
        return await this.#koniState.getMantaPayZkBalance(address, tokenInfo);
      }
    }
    return await this.#koniState.balanceService.getTokenFreeBalance(address, networkKey, token);
  }
  async transferGetMaxTransferable({
    address,
    destChain,
    isXcmTransfer,
    networkKey,
    token
  }) {
    const freeBalance = await this.getAddressFreeBalance({
      address,
      networkKey,
      token
    });
    const tokenInfo = token ? this.#koniState.chainService.getAssetBySlug(token) : this.#koniState.chainService.getNativeTokenInfo(networkKey);
    if (!(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isNativeToken)(tokenInfo)) {
      return freeBalance;
    } else {
      const substrateApi = this.#koniState.chainService.getSubstrateApi(networkKey);
      let estimatedFee;
      let maxTransferable = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_29___default())(freeBalance.value);
      try {
        if (isXcmTransfer) {
          const chainInfoMap = this.#koniState.chainService.getChainInfoMap();
          const destinationTokenInfo = this.#koniState.getXcmEqualAssetByChain(destChain, tokenInfo.slug);
          if (!destinationTokenInfo) {
            estimatedFee = '0';
          } else {
            var _paymentInfo$partialF;
            maxTransferable = maxTransferable.sub(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_29___default())(tokenInfo.minAmount || '0'));
            const desChainInfo = chainInfoMap[destChain];
            const orgChainInfo = chainInfoMap[networkKey];
            const recipient = !(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(address) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isChainEvmCompatible)(desChainInfo) && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isChainEvmCompatible)(orgChainInfo) ? (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_39__.u8aToHex)((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_40__.addressToEvm)(address)) : address;
            const mockTx = await (0,_subwallet_extension_base_koni_api_xcm__WEBPACK_IMPORTED_MODULE_35__.createXcmExtrinsic)({
              chainInfoMap,
              destinationTokenInfo,
              originTokenInfo: tokenInfo,
              recipient: recipient,
              sendingValue: '0',
              substrateApi
            });
            const paymentInfo = await mockTx.paymentInfo(address);
            estimatedFee = (paymentInfo === null || paymentInfo === void 0 ? void 0 : (_paymentInfo$partialF = paymentInfo.partialFee) === null || _paymentInfo$partialF === void 0 ? void 0 : _paymentInfo$partialF.toString()) || '0';
          }
        } else {
          const chainInfo = this.#koniState.chainService.getChainInfoByKey(networkKey);
          if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isChainEvmCompatible)(chainInfo) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isTokenTransferredByEvm)(tokenInfo)) {
            const web3 = this.#koniState.chainService.getEvmApi(networkKey);
            const transaction = {
              value: 0,
              to: '0x0000000000000000000000000000000000000000',
              // null address
              from: address
            };
            const gasPrice = await web3.api.eth.getGasPrice();
            const gasLimit = await web3.api.eth.estimateGas(transaction);
            estimatedFee = (gasLimit * parseInt(gasPrice)).toString();
          } else {
            var _paymentInfo$partialF2;
            const [mockTx] = await (0,_subwallet_extension_base_koni_api_dotsama_transfer__WEBPACK_IMPORTED_MODULE_32__.createTransferExtrinsic)({
              from: address,
              networkKey,
              substrateApi,
              to: address,
              tokenInfo,
              transferAll: true,
              value: '0'
            });
            const paymentInfo = await (mockTx === null || mockTx === void 0 ? void 0 : mockTx.paymentInfo(address));
            estimatedFee = (paymentInfo === null || paymentInfo === void 0 ? void 0 : (_paymentInfo$partialF2 = paymentInfo.partialFee) === null || _paymentInfo$partialF2 === void 0 ? void 0 : _paymentInfo$partialF2.toString()) || '0';
          }
        }
      } catch (e) {
        estimatedFee = '0';
        console.warn('Unable to estimate fee', e);
      }
      maxTransferable = maxTransferable.sub(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_29___default())(estimatedFee));
      return {
        ...freeBalance,
        value: maxTransferable.gt(_polkadot_util__WEBPACK_IMPORTED_MODULE_41__.BN_ZERO) ? maxTransferable.toString() || '0' : '0'
      };
    }
  }
  async subscribeAddressFreeBalance({
    address,
    networkKey,
    token
  }, id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const [unsub, currentFreeBalance] = await this.#koniState.balanceService.subscribeTokenFreeBalance(address, networkKey, token, cb);
    this.createUnsubscriptionHandle(id, unsub);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return currentFreeBalance;
  }
  async transferCheckReferenceCount({
    address,
    networkKey
  }) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-return
    return await (0,_subwallet_extension_base_koni_api_dotsama_transfer__WEBPACK_IMPORTED_MODULE_32__.checkReferenceCount)(networkKey, address, this.#koniState.getSubstrateApiMap(), this.#koniState.getChainInfo(networkKey));
  }
  async transferCheckSupporting({
    networkKey,
    tokenSlug
  }) {
    const tokenInfo = this.#koniState.getAssetBySlug(tokenSlug);
    return await (0,_subwallet_extension_base_koni_api_dotsama_transfer__WEBPACK_IMPORTED_MODULE_32__.checkSupportTransfer)(networkKey, tokenInfo, this.#koniState.getSubstrateApiMap(), this.#koniState.getChainInfo(networkKey));
  }
  transferGetExistentialDeposit({
    tokenSlug
  }) {
    const tokenInfo = this.#koniState.getAssetBySlug(tokenSlug);
    return (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getTokenMinAmount)(tokenInfo);
  }
  async substrateNftSubmitTransaction(inputData) {
    const {
      params,
      recipientAddress,
      senderAddress
    } = inputData;
    const isSendingSelf = (0,_subwallet_extension_base_koni_api_nft_transfer__WEBPACK_IMPORTED_MODULE_42__.isRecipientSelf)(senderAddress, recipientAddress);

    // TODO: do better to detect tokenType
    const isPSP34 = params === null || params === void 0 ? void 0 : params.isPsp34;
    const networkKey = params === null || params === void 0 ? void 0 : params.networkKey;
    const apiProps = this.#koniState.getSubstrateApi(networkKey);
    const extrinsic = !isPSP34 ? (0,_subwallet_extension_base_koni_api_nft_transfer__WEBPACK_IMPORTED_MODULE_42__.getNftTransferExtrinsic)(networkKey, apiProps, senderAddress, recipientAddress, params || {}) : await (0,_subwallet_extension_base_koni_api_tokens_wasm__WEBPACK_IMPORTED_MODULE_43__.getPSP34TransferExtrinsic)(networkKey, apiProps, senderAddress, recipientAddress, params || {});

    // this.addContact(recipientAddress);

    const rs = await this.#koniState.transactionService.handleTransaction({
      address: senderAddress,
      chain: networkKey,
      transaction: extrinsic,
      data: {
        ...inputData,
        isSendingSelf
      },
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.SEND_NFT,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE
    });
    return {
      ...rs,
      isSendingSelf
    };
  }
  async enableChains({
    chainSlugs,
    enableTokens
  }) {
    try {
      await Promise.all(chainSlugs.map(chainSlug => this.enableChain({
        chainSlug,
        enableTokens
      })));
    } catch (e) {
      return false;
    }
    return true;
  }
  getAccountMeta({
    address
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(pair, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to find account'));
    return {
      meta: pair.meta
    };
  }
  accountsTie2({
    address,
    genesisHash
  }) {
    return this.#koniState.setAccountTie(address, genesisHash);
  }
  async accountsCreateExternalV2({
    address,
    genesisHash,
    isAllowed,
    isEthereum,
    isReadOnly,
    name
  }) {
    try {
      let result;
      try {
        const exists = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
        if (exists) {
          if (exists.type === (isEthereum ? 'ethereum' : 'sr25519')) {
            return [{
              code: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.AccountExternalErrorCode.INVALID_ADDRESS,
              message: (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Account exists')
            }];
          }
        }
      } catch (e) {}
      if (isEthereum) {
        const chainInfoMap = this.#koniState.getChainInfoMap();
        let _gen = '';
        if (genesisHash) {
          for (const network of Object.values(chainInfoMap)) {
            if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getEvmChainId)(network) === parseInt(genesisHash)) {
              // TODO: pure EVM chains do not have genesisHash
              _gen = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getSubstrateGenesisHash)(network);
            }
          }
        }
        result = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.keyring.addFromAddress(address, {
          name,
          isExternal: true,
          isReadOnly,
          genesisHash: _gen
        }, null, 'ethereum');
        _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.saveAccount(result);
      } else {
        result = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addExternal(address, {
          genesisHash,
          name,
          isReadOnly
        }).pair;
      }
      const _address = result.address;
      await new Promise(resolve => {
        this.#koniState.addAccountRef([_address], () => {
          resolve();
        });
      });
      await new Promise(resolve => {
        this._saveCurrentAccountAddress(_address, () => {
          this._addAddressToAuthList(_address, isAllowed);
          resolve();
        });
      });
      return [];
    } catch (e) {
      return [{
        code: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.AccountExternalErrorCode.KEYRING_ERROR,
        message: e.message
      }];
    }
  }
  async accountsCreateHardwareV2({
    accountIndex,
    address,
    addressOffset,
    genesisHash,
    hardwareType,
    isAllowed,
    name
  }) {
    const key = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addHardware(address, hardwareType, {
      accountIndex,
      addressOffset,
      genesisHash,
      name,
      originGenesisHash: genesisHash
    });
    const result = key.pair;
    const _address = result.address;
    await new Promise(resolve => {
      this.#koniState.addAccountRef([_address], () => {
        resolve();
      });
    });
    await new Promise(resolve => {
      this._saveCurrentAccountAddress(_address, () => {
        this._addAddressToAuthList(_address, isAllowed || false);
        resolve();
      });
    });
    return true;
  }
  async accountsCreateHardwareMultiple({
    accounts
  }) {
    const addresses = [];
    if (!accounts.length) {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)("Can't find an account. Please try again"));
    }
    const slugMap = {};
    for (const account of accounts) {
      const {
        accountIndex,
        address,
        addressOffset,
        genesisHash,
        hardwareType,
        isEthereum,
        name
      } = account;
      let result;
      const baseMeta = {
        name,
        hardwareType,
        accountIndex,
        addressOffset,
        genesisHash,
        originGenesisHash: genesisHash
      };
      if (isEthereum) {
        result = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.keyring.addFromAddress(address, {
          ...baseMeta,
          isExternal: true,
          isHardware: true
        }, null, 'ethereum');
        _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.saveAccount(result);
        slugMap.ethereum = 'ethereum';
      } else {
        result = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addHardware(address, hardwareType, {
          ...baseMeta,
          availableGenesisHashes: [genesisHash]
        }).pair;
        const [slug] = this.#koniState.findNetworkKeyByGenesisHash(genesisHash);
        if (slug) {
          slugMap[slug] = slug;
        }
      }
      const _address = result.address;
      addresses.push(_address);
      await new Promise(resolve => {
        this._addAddressToAuthList(_address, true);
        resolve();
      });
    }
    const currentAccount = this.#koniState.keyringService.currentAccount;
    const allGenesisHash = (currentAccount === null || currentAccount === void 0 ? void 0 : currentAccount.allGenesisHash) || undefined;
    if (addresses.length <= 1) {
      this.#koniState.setCurrentAccount({
        address: addresses[0],
        currentGenesisHash: null,
        allGenesisHash
      });
    } else {
      this.#koniState.setCurrentAccount({
        address: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_ACCOUNT_KEY,
        currentGenesisHash: allGenesisHash || null,
        allGenesisHash
      });
    }
    await new Promise(resolve => {
      this.#koniState.addAccountRef(addresses, () => {
        resolve();
      });
    });
    if (Object.keys(slugMap).length) {
      this.enableChains({
        chainSlugs: Object.keys(slugMap),
        enableTokens: true
      }).catch(console.error);
    }
    return true;
  }
  async accountsCreateWithSecret({
    isAllow,
    isEthereum,
    name,
    publicKey,
    secretKey
  }) {
    try {
      let keyringPair = null;
      if (isEthereum) {
        const _secret = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_44__.hexStripPrefix)(secretKey);
        if (_secret.length === 64) {
          const suri = `0x${_secret}`;
          const {
            phrase
          } = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_12__.keyExtractSuri)(suri);
          if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(phrase) && (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(phrase, 256)) {
            const type = 'ethereum';
            keyringPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addUri(getSuri(suri, type), {
              name: name
            }, type).pair;
          }
        }
      } else {
        keyringPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.keyring.addFromPair({
          publicKey: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.hexToU8a)(publicKey),
          secretKey: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.hexToU8a)(secretKey)
        }, {
          name
        });
        _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addPair(keyringPair, true);
      }
      if (!keyringPair) {
        return {
          success: false,
          errors: [{
            code: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.AccountExternalErrorCode.KEYRING_ERROR,
            message: (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Cannot create account')
          }]
        };
      }
      const _address = keyringPair.address;
      await new Promise(resolve => {
        this.#koniState.addAccountRef([_address], () => {
          resolve();
        });
      });
      await new Promise(resolve => {
        this._saveCurrentAccountAddress(_address, () => {
          this._addAddressToAuthList(_address, isAllow);
          resolve();
        });
      });
      if (this.#alwaysLock) {
        this.keyringLock();
      }
      return {
        errors: [],
        success: true
      };
    } catch (e) {
      return {
        success: false,
        errors: [{
          code: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.AccountExternalErrorCode.KEYRING_ERROR,
          message: e.message
        }]
      };
    }
  }

  /// External account

  rejectExternalRequest(request) {
    const {
      id,
      message,
      throwError
    } = request;
    const promise = this.#koniState.getExternalRequest(id);
    if (promise.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExternalRequestPromiseStatus.PENDING && promise.reject) {
      if (throwError) {
        promise.reject(new Error(message));
      } else {
        promise.reject();
      }
      this.#koniState.updateExternalRequest(id, {
        status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExternalRequestPromiseStatus.REJECTED,
        message: message,
        reject: undefined,
        resolve: undefined
      });
    }
  }
  resolveQrTransfer(request) {
    const {
      data,
      id
    } = request;
    const promise = this.#koniState.getExternalRequest(id);
    if (promise.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExternalRequestPromiseStatus.PENDING) {
      promise.resolve && promise.resolve(data);
      this.#koniState.updateExternalRequest(id, {
        status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExternalRequestPromiseStatus.COMPLETED,
        reject: undefined,
        resolve: undefined
      });
    }
  }
  subscribeConfirmations(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = this.#koniState.getConfirmationsQueueSubject().subscribe(cb);
    this.createUnsubscriptionHandle(id, subscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.getConfirmationsQueueSubject().getValue();
  }
  async completeConfirmation(request) {
    return await this.#koniState.completeConfirmation(request);
  }

  /// Sign Qr

  getNetworkJsonByChainId(chainId) {
    const chainInfoMap = this.#koniState.getChainInfoMap();
    if (!chainId) {
      for (const n in chainInfoMap) {
        if (!Object.prototype.hasOwnProperty.call(chainInfoMap, n)) {
          continue;
        }
        const networkInfo = chainInfoMap[n];
        if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isChainEvmCompatible)(networkInfo)) {
          return networkInfo;
        }
      }
      return null;
    }
    for (const n in chainInfoMap) {
      if (!Object.prototype.hasOwnProperty.call(chainInfoMap, n)) {
        continue;
      }
      const networkInfo = chainInfoMap[n];
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getEvmChainId)(networkInfo) === chainId) {
        return networkInfo;
      }
    }
    return null;
  }

  // Parse transaction

  parseSubstrateTransaction({
    data,
    networkKey
  }) {
    const apiProps = this.#koniState.getSubstrateApi(networkKey);
    const apiPromise = apiProps.api;
    return (0,_subwallet_extension_base_koni_api_dotsama_parseTransaction__WEBPACK_IMPORTED_MODULE_45__.parseSubstrateTransaction)(data, apiPromise);
  }
  async parseEVMRLP({
    data
  }) {
    return await (0,_subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_46__.parseEvmRlp)(data, this.#koniState.getChainInfoMap(), this.#koniState.getEvmApiMap());
  }

  // Sign

  qrSignSubstrate({
    address,
    data,
    networkKey
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(pair, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to find account'));
    if (pair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockPair(pair.address);
    }
    let signed = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_44__.hexStripPrefix)((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_39__.u8aToHex)(pair.sign(data, {
      withType: true
    })));
    const network = this.#koniState.getChainInfo(networkKey);
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isChainEvmCompatible)(network)) {
      signed = signed.substring(2);
    }
    return {
      signature: signed
    };
  }
  async qrSignEVM({
    address,
    chainId,
    message,
    type
  }) {
    let signed;
    const network = this.getNetworkJsonByChainId(chainId);
    if (!network) {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Cannot find network'));
    }
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
    if (!pair) {
      throw Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to find account'));
    }
    if (pair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockPair(pair.address);
    }
    if (type === 'message') {
      let data = message;
      if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.isHex)(message)) {
        data = message;
      } else if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_47__.isAscii)(message)) {
        data = `0x${message}`;
      }
      signed = await pair.evmSigner.signMessage(data, 'personal_sign');
    } else {
      const tx = (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_48__.createTransactionFromRLP)(message);
      if (!tx) {
        throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Failed to decode data. Please use a valid QR code'));
      }
      const txObject = {
        gasPrice: new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](tx.gasPrice).toNumber(),
        to: tx.to,
        value: new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](tx.value).toNumber(),
        data: tx.data,
        nonce: new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](tx.nonce).toNumber(),
        gas: new bignumber_js__WEBPACK_IMPORTED_MODULE_2__["default"](tx.gas).toNumber()
      };
      const common = _ethereumjs_common__WEBPACK_IMPORTED_MODULE_0___default().forCustomChain('mainnet', {
        name: network.name,
        networkId: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getEvmChainId)(network),
        chainId: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getEvmChainId)(network)
      }, 'petersburg');

      // @ts-ignore
      const transaction = new ethereumjs_tx__WEBPACK_IMPORTED_MODULE_3__.Transaction(txObject, {
        common
      });
      pair.evmSigner.signTransaction(transaction);
      signed = (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_48__.signatureToHex)({
        r: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_39__.u8aToHex)(transaction.r),
        s: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_39__.u8aToHex)(transaction.s),
        v: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_39__.u8aToHex)(transaction.v)
      });
    }
    return {
      signature: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_44__.hexStripPrefix)(signed)
    };
  }
  async subscribeChainStakingMetadata(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const chainStakingMetadata = this.#koniState.subscribeChainStakingMetadata().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, chainStakingMetadata.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.getChainStakingMetadata();
  }
  async subscribeStakingNominatorMetadata(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const nominatorMetadata = this.#koniState.subscribeNominatorMetadata().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, nominatorMetadata.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.getNominatorMetadata();
  }
  async getBondingOptions({
    chain,
    type
  }) {
    const apiProps = this.#koniState.getSubstrateApi(chain);
    const chainInfo = this.#koniState.getChainInfo(chain);
    const chainStakingMetadata = await this.#koniState.getStakingMetadataByChain(chain, type);
    if (!chainStakingMetadata) {
      return;
    }
    const {
      decimals
    } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getChainNativeTokenBasicInfo)(chainInfo);
    return await (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.getValidatorsInfo)(chain, apiProps, decimals, chainStakingMetadata);
  }
  async getNominationPoolOptions(chain) {
    const substrateApi = this.#koniState.getSubstrateApi(chain);
    return await (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.getNominationPoolsInfo)(chain, substrateApi);
  }
  async submitBonding(inputData) {
    const {
      address,
      amount,
      chain,
      nominatorMetadata,
      selectedValidators
    } = inputData;
    const chainInfo = this.#koniState.getChainInfo(chain);
    const chainStakingMetadata = await this.#koniState.getStakingMetadataByChain(chain, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.StakingType.NOMINATED);
    if (!chainStakingMetadata) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors([new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INTERNAL_ERROR)]);
    }
    const bondingValidation = (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.validateBondingCondition)(chainInfo, amount, selectedValidators, address, chainStakingMetadata, nominatorMetadata);
    if (!amount || !selectedValidators || bondingValidation.length > 0) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors(bondingValidation);
    }
    const substrateApi = this.#koniState.getSubstrateApi(chain);
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.getBondingExtrinsic)(chainInfo, amount, selectedValidators, substrateApi, address, nominatorMetadata);
    return await this.#koniState.transactionService.handleTransaction({
      address,
      chain: chain,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_BOND,
      transaction: extrinsic,
      url: _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_37__.EXTENSION_REQUEST_URL,
      transferNativeAmount: amount
    });
  }
  async submitUnbonding(inputData) {
    const {
      amount,
      chain,
      nominatorMetadata,
      validatorAddress
    } = inputData;
    const chainStakingMetadata = await this.#koniState.getStakingMetadataByChain(chain, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.StakingType.NOMINATED);
    if (!chainStakingMetadata || !nominatorMetadata) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors([new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INTERNAL_ERROR)]);
    }
    const unbondingValidation = (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.validateUnbondingCondition)(nominatorMetadata, amount, chain, chainStakingMetadata, validatorAddress);
    if (!amount || unbondingValidation.length > 0) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors(unbondingValidation);
    }
    const substrateApi = this.#koniState.getSubstrateApi(chain);
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.getUnbondingExtrinsic)(nominatorMetadata, amount, chain, substrateApi, validatorAddress);
    return await this.#koniState.transactionService.handleTransaction({
      address: nominatorMetadata.address,
      chain: chain,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_UNBOND,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE
    });
  }
  async submitStakeWithdrawal(inputData) {
    const {
      chain,
      nominatorMetadata,
      validatorAddress
    } = inputData;
    if (!nominatorMetadata) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors([new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INVALID_PARAMS)]);
    }
    const dotSamaApi = this.#koniState.getSubstrateApi(chain);
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.getWithdrawalExtrinsic)(dotSamaApi, chain, nominatorMetadata, validatorAddress);
    return await this.#koniState.transactionService.handleTransaction({
      address: nominatorMetadata.address,
      chain: chain,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_WITHDRAW,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE
    });
  }
  async submitStakeClaimReward(inputData) {
    const {
      address,
      bondReward,
      chain,
      stakingType
    } = inputData;
    if (!address) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors([new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INVALID_PARAMS)]);
    }
    const substrateApi = this.#koniState.getSubstrateApi(chain);
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.getClaimRewardExtrinsic)(substrateApi, chain, address, stakingType, bondReward);
    return await this.#koniState.transactionService.handleTransaction({
      address,
      chain: chain,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_CLAIM_REWARD,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE
    });
  }
  async submitCancelStakeWithdrawal(inputData) {
    const {
      address,
      chain,
      selectedUnstaking
    } = inputData;
    if (!chain || !selectedUnstaking) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors([new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INVALID_PARAMS)]);
    }
    const substrateApi = this.#koniState.getSubstrateApi(chain);
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_49__.getCancelWithdrawalExtrinsic)(substrateApi, chain, selectedUnstaking);
    return await this.#koniState.transactionService.handleTransaction({
      address,
      chain,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_CANCEL_UNSTAKE,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE
    });
  }
  async submitPoolBonding(inputData) {
    const {
      address,
      amount,
      chain,
      nominatorMetadata,
      selectedPool
    } = inputData;
    const chainInfo = this.#koniState.getChainInfo(chain);
    const chainStakingMetadata = await this.#koniState.getStakingMetadataByChain(chain, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.StakingType.NOMINATED);
    if (!chainStakingMetadata) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors([new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INTERNAL_ERROR)]);
    }
    const bondingValidation = (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_50__.validatePoolBondingCondition)(chainInfo, amount, selectedPool, address, chainStakingMetadata, nominatorMetadata);
    if (!amount || bondingValidation.length > 0) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors(bondingValidation);
    }
    const substrateApi = this.#koniState.getSubstrateApi(chain);
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_50__.getPoolingBondingExtrinsic)(substrateApi, amount, selectedPool.id, nominatorMetadata);
    return await this.#koniState.transactionService.handleTransaction({
      address,
      chain,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_JOIN_POOL,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE,
      transferNativeAmount: amount
    });
  }
  async submitPoolingUnbonding(inputData) {
    const {
      amount,
      chain,
      nominatorMetadata
    } = inputData;
    const chainStakingMetadata = await this.#koniState.getStakingMetadataByChain(chain, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.StakingType.NOMINATED);
    if (!chainStakingMetadata || !nominatorMetadata) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors([new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INTERNAL_ERROR)]);
    }
    const unbondingValidation = (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_50__.validateRelayUnbondingCondition)(amount, chainStakingMetadata, nominatorMetadata);
    if (!amount || unbondingValidation.length > 0) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors(unbondingValidation);
    }
    const substrateApi = this.#koniState.getSubstrateApi(chain);
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding_relayChain__WEBPACK_IMPORTED_MODULE_50__.getPoolingUnbondingExtrinsic)(substrateApi, amount, nominatorMetadata);
    return await this.#koniState.transactionService.handleTransaction({
      address: nominatorMetadata.address,
      chain,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_LEAVE_POOL,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE
    });
  }

  // EVM Transaction
  async parseContractInput({
    chainId,
    contract,
    data
  }) {
    const network = this.getNetworkJsonByChainId(chainId);
    return await (0,_subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_46__.parseContractInput)(data, contract, network);
  }
  async submitTuringStakeCompounding(inputData) {
    const {
      accountMinimum,
      address,
      bondedAmount,
      collatorAddress,
      networkKey
    } = inputData;
    if (!address) {
      return this.#koniState.transactionService.generateBeforeHandleResponseErrors([new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_15__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.BasicTxErrorType.INVALID_PARAMS)]);
    }
    const dotSamaApi = this.#koniState.getSubstrateApi(networkKey);
    const chainInfo = this.#koniState.getChainInfo(networkKey);
    const {
      decimals
    } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._getChainNativeTokenBasicInfo)(chainInfo);
    const parsedAccountMinimum = parseFloat(accountMinimum) * 10 ** decimals;
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_51__.getTuringCompoundExtrinsic)(dotSamaApi, address, collatorAddress, parsedAccountMinimum.toString(), bondedAmount);
    return await this.#koniState.transactionService.handleTransaction({
      address,
      chain: networkKey,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_COMPOUNDING,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE
    });
  }
  async submitTuringCancelStakeCompound(inputData) {
    const {
      address,
      networkKey,
      taskId
    } = inputData;
    const txState = {};
    if (!address) {
      txState.txError = true;
      return txState;
    }
    const dotSamaApi = this.#koniState.getSubstrateApi(networkKey);
    const extrinsic = await (0,_subwallet_extension_base_koni_api_staking_bonding_paraChain__WEBPACK_IMPORTED_MODULE_51__.getTuringCancelCompoundingExtrinsic)(dotSamaApi, taskId);
    return await this.#koniState.transactionService.handleTransaction({
      address,
      chain: networkKey,
      transaction: extrinsic,
      data: inputData,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ExtrinsicType.STAKING_CANCEL_COMPOUNDING,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.ChainType.SUBSTRATE
    });
  }

  /// Keyring state

  // Subscribe keyring state

  keyringStateSubscribe(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const keyringStateSubject = this.#koniState.keyringService.keyringStateSubject;
    const subscription = keyringStateSubject.subscribe(value => cb(value));
    this.createUnsubscriptionHandle(id, subscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.keyringService.keyringState;
  }

  // Change master password

  keyringChangeMasterPassword({
    createNew,
    newPassword,
    oldPassword
  }) {
    try {
      // Remove isMasterPassword meta if createNew
      if (createNew) {
        const pairs = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPairs();
        for (const pair of pairs) {
          if (pair.meta.isInjected) {
            // Empty
          } else {
            const meta = {
              ...pair.meta,
              isMasterPassword: false
            };
            if (!meta.originGenesisHash) {
              meta.genesisHash = '';
            }
            pair.setMeta(meta);
            _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.saveAccountMeta(pair, pair.meta);
          }
        }
      }
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.changeMasterPassword(newPassword, oldPassword);
    } catch (e) {
      console.error(e);
      return {
        errors: [(0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)(e.message)],
        status: false
      };
    }
    this.#koniState.updateKeyringState();
    if (this.#alwaysLock && !createNew) {
      this.keyringLock();
    }
    return {
      status: true,
      errors: []
    };
  }

  // Migrate password

  checkLockAfterMigrate() {
    const pairs = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPairs();
    const needMigrate = !!pairs.filter(acc => acc.address !== _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_ACCOUNT_KEY && !acc.meta.isExternal && !acc.meta.isInjected).filter(acc => !acc.meta.isMasterPassword).length;
    if (!needMigrate) {
      if (this.#alwaysLock) {
        this.keyringLock();
      }
    }
  }
  keyringMigrateMasterPassword({
    address,
    password
  }) {
    try {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.migrateWithMasterPassword(address, password);
      this.checkLockAfterMigrate();
    } catch (e) {
      console.error(e);
      return {
        errors: [e.message],
        status: false
      };
    }
    return {
      status: true,
      errors: []
    };
  }

  // Unlock wallet

  keyringUnlock({
    password
  }) {
    try {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockKeyring(password);
      this.#koniState.initMantaPay(password).catch(console.error);
    } catch (e) {
      return {
        errors: [e.message],
        status: false
      };
    }
    this.#koniState.updateKeyringState();
    return {
      status: true,
      errors: []
    };
  }

  // Lock wallet

  keyringLock() {
    this.#koniState.keyringService.lock();
    clearTimeout(this.#lockTimeOut);
  }

  // Export mnemonic

  keyringExportMnemonic({
    address,
    password
  }) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(address);
    const result = pair.exportMnemonic(password);
    return {
      result
    };
  }

  // Reset wallet

  async resetWallet({
    resetAll
  }) {
    try {
      await this.#koniState.resetWallet(resetAll);
      return {
        errors: [],
        status: true
      };
    } catch (e) {
      return {
        errors: [e.message],
        status: false
      };
    }
  }

  /// Signing substrate request
  signingApprovePasswordV2({
    id
  }) {
    const queued = this.#koniState.getSignRequest(id);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.assert)(queued, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
    const {
      reject,
      request,
      resolve
    } = queued;
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(queued.account.address);

    // unlike queued.account.address the following
    // address is encoded with the default prefix
    // which what is used for password caching mapping
    const {
      address
    } = pair;
    if (!pair) {
      reject(new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to find account')));
      return false;
    }
    if (pair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockPair(address);
    }
    const {
      payload
    } = request;
    let registry = new _polkadot_types__WEBPACK_IMPORTED_MODULE_52__.TypeRegistry();
    let isEvm = false;
    if ((0,_subwallet_extension_base_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_10__.isJsonPayload)(payload)) {
      // Get the metadata for the genesisHash
      const currentMetadata = this.#koniState.knownMetadata.find(meta => meta.genesisHash === payload.genesisHash);

      // set the registry before calling the sign function
      registry.setSignedExtensions(payload.signedExtensions, currentMetadata === null || currentMetadata === void 0 ? void 0 : currentMetadata.userExtensions);
      if (currentMetadata) {
        registry.register(currentMetadata === null || currentMetadata === void 0 ? void 0 : currentMetadata.types);
      }
      const [, chainInfo] = this.#koniState.findNetworkKeyByGenesisHash(payload.genesisHash);
      if (chainInfo && _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_38__._API_OPTIONS_CHAIN_GROUP.avail.includes(chainInfo.slug)) {
        const isChainActive = this.#koniState.getChainStateByKey(chainInfo.slug).active;
        if (!isChainActive) {
          reject(new Error('Unable to sign'));
          return false;
        } else {
          registry = this.#koniState.getSubstrateApi(chainInfo.slug).api.registry;
        }
      }
      if (chainInfo) {
        isEvm = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_30__._isChainEvmCompatible)(chainInfo);
      }
    }
    const result = request.sign(registry, pair);
    resolve({
      id,
      // In case evm chain, must be cut 2 character after 0x
      signature: isEvm ? `0x${result.signature.slice(4)}` : result.signature
    });
    if (this.#alwaysLock) {
      this.keyringLock();
    }
    return true;
  }

  /// Derive account

  derivationCreateMultiple({
    isAllowed,
    items,
    parentAddress
  }) {
    const parentPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(parentAddress);
    const isEvm = parentPair.type === 'ethereum';
    if (parentPair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockPair(parentPair.address);
    }
    const createChild = ({
      name,
      suri
    }) => {
      const meta = {
        name: name,
        parentAddress
      };
      if (isEvm) {
        let index = 0;
        try {
          const reg = /^\d+$/;
          const path = suri.split('//')[1];
          if (reg.test(path)) {
            index = parseInt(path);
          }
        } catch (e) {}
        if (!index) {
          throw Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Invalid derive path'));
        }
        meta.suri = `//${index}`;
        return parentPair.deriveEvm(index, meta);
      } else {
        meta.suri = suri;
        return parentPair.derive(suri, meta);
      }
    };
    const result = [];
    for (const item of items) {
      try {
        const childPair = createChild(item);
        const address = childPair.address;
        _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addPair(childPair, true);
        this._addAddressToAuthList(address, isAllowed);
        result.push(childPair);
      } catch (e) {
        console.log(e);
      }
    }
    if (result.length === 1) {
      this._saveCurrentAccountAddress(result[0].address);
    } else {
      this.#koniState.setCurrentAccount({
        address: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_5__.ALL_ACCOUNT_KEY,
        currentGenesisHash: null
      });
    }
    return true;
  }
  derivationCreateV3({
    address: parentAddress
  }) {
    const parentPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(parentAddress);
    const isEvm = parentPair.type === 'ethereum';
    if (parentPair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockPair(parentPair.address);
    }
    const pairs = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPairs();
    const children = pairs.filter(p => p.meta.parentAddress === parentAddress);
    const name = `Account ${pairs.length}`;
    let index = isEvm ? 1 : 0;
    let valid = false;
    do {
      const exist = children.find(p => p.meta.suri === `//${index}`);
      if (exist) {
        index++;
      } else {
        valid = true;
      }
    } while (!valid);
    const meta = {
      name,
      parentAddress,
      suri: `//${index}`
    };
    const childPair = isEvm ? parentPair.deriveEvm(index, meta) : parentPair.derive(meta.suri, meta);
    const address = childPair.address;
    this._saveCurrentAccountAddress(address, () => {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.addPair(childPair, true);
      this._addAddressToAuthList(address, true);
    });
    if (this.#alwaysLock) {
      this.keyringLock();
    }
    return true;
  }
  validateDerivePath({
    parentAddress,
    suri
  }) {
    const parentPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(parentAddress);
    const isEvm = parentPair.type === 'ethereum';
    if (parentPair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockPair(parentPair.address);
    }
    const meta = {
      parentAddress
    };
    let childPair;
    if (isEvm) {
      let index = 0;
      try {
        const reg = /^\d+$/;
        const path = suri.split('//')[1];
        if (reg.test(path)) {
          index = parseInt(path);
        }
      } catch (e) {}
      if (!index) {
        throw Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Invalid derive path'));
      }
      meta.suri = `//${index}`;
      childPair = parentPair.deriveEvm(index, meta);
    } else {
      meta.suri = suri;
      childPair = parentPair.derive(suri, meta);
    }
    return {
      address: childPair.address,
      suri: meta.suri
    };
  }
  getListDeriveAccounts({
    limit,
    page,
    parentAddress
  }) {
    const parentPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.getPair(parentAddress);
    const isEvm = parentPair.type === 'ethereum';
    if (parentPair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_7__.keyring.unlockPair(parentPair.address);
    }
    const start = (page - 1) * limit + (isEvm ? 1 : 0);
    const end = start + limit;
    const result = [];
    for (let i = start; i < end; i++) {
      const suri = `//${i}`;
      const pair = isEvm ? parentPair.deriveEvm(i, {}) : parentPair.derive(suri, {});
      result.push({
        address: pair.address,
        suri: suri
      });
    }
    return {
      result: result
    };
  }

  // ChainService -------------------------------------------------
  async subscribeChainInfoMap(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    let ready = false;
    const chainInfoMapSubscription = this.#koniState.subscribeChainInfoMap().subscribe({
      next: rs => {
        if (ready) {
          cb(rs);
        }
      }
    });
    this.createUnsubscriptionHandle(id, chainInfoMapSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    await this.#koniState.eventService.waitChainReady;
    ready = true;
    return this.#koniState.getChainInfoMap();
  }
  subscribeChainStateMap(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const chainStateMapSubscription = this.#koniState.subscribeChainStateMap().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, chainStateMapSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.getChainStateMap();
  }
  async subscribeAssetRegistry(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    let ready = false;
    const assetRegistrySubscription = this.#koniState.subscribeAssetRegistry().subscribe({
      next: rs => {
        if (ready) {
          cb(rs);
        }
      }
    });
    this.createUnsubscriptionHandle(id, assetRegistrySubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    await this.#koniState.eventService.waitAssetReady;
    ready = true;
    return this.#koniState.getAssetRegistry();
  }
  subscribeMultiChainAssetMap(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const multiChainAssetSubscription = this.#koniState.subscribeMultiChainAssetMap().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, multiChainAssetSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.getMultiChainAssetMap();
  }
  subscribeXcmRefMap(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const xcmRefSubscription = this.#koniState.subscribeXcmRefMap().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, xcmRefSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.getXcmRefMap();
  }
  getSupportedSmartContractTypes() {
    return this.#koniState.getSupportedSmartContractTypes();
  }
  getTransaction({
    id
  }) {
    const {
      transaction,
      ...transactionResult
    } = this.#koniState.transactionService.getTransaction(id);
    return transactionResult;
  }
  subscribeTransactions(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    function convertRs(rs) {
      return Object.fromEntries(Object.entries(rs).map(([key, value]) => {
        const {
          additionalValidator,
          eventsHandler,
          transaction,
          ...transactionResult
        } = value;
        return [key, transactionResult];
      }));
    }
    const transactionsSubject = this.#koniState.transactionService.getTransactionSubject();
    const transactionsSubscription = transactionsSubject.subscribe(rs => {
      cb(convertRs(rs));
    });
    port.onDisconnect.addListener(() => {
      transactionsSubscription.unsubscribe();
      this.cancelSubscription(id);
    });
    return convertRs(transactionsSubject.getValue());
  }
  subscribeNotifications(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const notificationSubject = this.#koniState.notificationService.getNotificationSubject();
    const notificationSubscription = notificationSubject.subscribe(rs => {
      cb(rs);
    });
    port.onDisconnect.addListener(() => {
      notificationSubscription.unsubscribe();
      this.cancelSubscription(id);
    });
    return notificationSubject.value;
  }
  async reloadCron({
    data
  }) {
    if (data === 'nft') {
      return await this.#koniState.reloadNft();
    } else if (data === 'staking') {
      return await this.#koniState.reloadStaking();
    }
    return Promise.resolve(false);
  }
  async getLogoMap() {
    const [chainLogoMap, assetLogoMap] = await Promise.all([this.#koniState.chainService.getChainLogoMap(), this.#koniState.chainService.getAssetLogoMap()]);
    return {
      chainLogoMap,
      assetLogoMap
    };
  }

  // Phishing detect

  async passPhishingPage({
    url
  }) {
    return await this.#koniState.approvePassPhishingPage(url);
  }

  /// Wallet connect

  // Connect
  async connectWalletConnect({
    uri
  }) {
    await this.#koniState.walletConnectService.connect(uri);
    return true;
  }
  connectWCSubscribe(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = this.#koniState.requestService.connectWCSubject.subscribe(requests => cb(requests));
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
      subscription.unsubscribe();
    });
    return this.#koniState.requestService.allConnectWCRequests;
  }
  async approveWalletConnectSession({
    accounts: selectedAccounts,
    id
  }) {
    const request = this.#koniState.requestService.getConnectWCRequest(id);
    if ((0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_53__.isProposalExpired)(request.request.params)) {
      throw new Error('The proposal has been expired');
    }
    const wcId = request.request.id;
    const params = request.request.params;
    const requiredNamespaces = params.requiredNamespaces;
    const optionalNamespaces = params.optionalNamespaces || {};
    const availableNamespaces = {};
    const namespaces = {};
    const chainInfoMap = this.#koniState.getChainInfoMap();
    Object.entries(requiredNamespaces).forEach(([key, namespace]) => {
      if ((0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_53__.isSupportWalletConnectNamespace)(key)) {
        if (namespace.chains) {
          const unSupportChains = namespace.chains.filter(chain => !(0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_53__.isSupportWalletConnectChain)(chain, chainInfoMap));
          if (unSupportChains.length) {
            throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.getSdkError)('UNSUPPORTED_CHAINS').message + ' ' + unSupportChains.toString());
          }
          availableNamespaces[key] = namespace;
        }
      } else {
        throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.getSdkError)('UNSUPPORTED_NAMESPACE_KEY').message + ' ' + key);
      }
    });
    Object.entries(optionalNamespaces).forEach(([key, namespace]) => {
      if ((0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_53__.isSupportWalletConnectNamespace)(key)) {
        if (namespace.chains) {
          const supportChains = namespace.chains.filter(chain => (0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_53__.isSupportWalletConnectChain)(chain, chainInfoMap)) || [];
          const requiredNameSpace = availableNamespaces[key];
          const defaultChains = [];
          if (requiredNameSpace) {
            availableNamespaces[key] = {
              chains: [...(requiredNameSpace.chains || defaultChains), ...(supportChains || defaultChains)],
              events: requiredNameSpace.events,
              methods: requiredNameSpace.methods
            };
          } else {
            if (supportChains.length) {
              availableNamespaces[key] = {
                chains: supportChains,
                events: namespace.events,
                methods: namespace.methods
              };
            }
          }
        }
      }
    });
    Object.entries(availableNamespaces).forEach(([key, namespace]) => {
      if (namespace.chains) {
        const accounts = [];
        const chains = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_54__.uniqueStringArray)(namespace.chains);
        chains.forEach(chain => {
          accounts.push(...selectedAccounts.filter(address => (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_23__.isEthereumAddress)(address) === (key === _subwallet_extension_base_services_wallet_connect_service_constants__WEBPACK_IMPORTED_MODULE_55__.WALLET_CONNECT_EIP155_NAMESPACE)).map(address => `${chain}:${address}`));
        });
        namespaces[key] = {
          accounts,
          methods: namespace.methods,
          events: namespace.events,
          chains: chains
        };
      }
    });
    const result = {
      id: wcId,
      namespaces: namespaces,
      relayProtocol: params.relays[0].protocol
    };
    await this.#koniState.walletConnectService.approveSession(result);
    request.resolve();
    return true;
  }
  async rejectWalletConnectSession({
    id
  }) {
    const request = this.#koniState.requestService.getConnectWCRequest(id);
    const wcId = request.request.id;
    if ((0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_53__.isProposalExpired)(request.request.params)) {
      request.reject(new Error('The proposal has been expired'));
      return true;
    }
    await this.#koniState.walletConnectService.rejectSession(wcId);
    request.reject(new Error('USER_REJECTED'));
    return true;
  }
  subscribeWalletConnectSessions(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = this.#koniState.walletConnectService.sessionSubject.subscribe(rs => {
      cb(rs);
    });
    port.onDisconnect.addListener(() => {
      subscription.unsubscribe();
      this.cancelSubscription(id);
    });
    return this.#koniState.walletConnectService.sessions;
  }
  async disconnectWalletConnectSession({
    topic
  }) {
    await this.#koniState.walletConnectService.disconnect(topic);
    return true;
  }
  WCNotSupportSubscribe(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const subscription = this.#koniState.requestService.notSupportWCSubject.subscribe(requests => cb(requests));
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
      subscription.unsubscribe();
    });
    return this.#koniState.requestService.allNotSupportWCRequests;
  }
  approveWalletConnectNotSupport({
    id
  }) {
    const request = this.#koniState.requestService.getNotSupportWCRequest(id);
    request.resolve();
    return true;
  }
  rejectWalletConnectNotSupport({
    id
  }) {
    const request = this.#koniState.requestService.getNotSupportWCRequest(id);
    request.reject(new Error('USER_REJECTED'));
    return true;
  }

  /// Manta

  async enableMantaPay({
    address,
    password
  }) {
    // always takes the current account
    function timeout() {
      return new Promise(resolve => setTimeout(resolve, 1500));
    }
    try {
      var _this$koniState$chain, _this$koniState$chain2;
      await this.#koniState.chainService.enableChain(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_38__._DEFAULT_MANTA_ZK_CHAIN);
      this.#koniState.chainService.setMantaZkAssetSettings(true);
      const mnemonic = this.keyringExportMnemonic({
        address,
        password
      });
      const {
        connectionStatus
      } = this.#koniState.chainService.getChainStateByKey(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_38__._DEFAULT_MANTA_ZK_CHAIN);
      if (connectionStatus !== _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_56__._ChainConnectionStatus.CONNECTED) {
        // TODO: do better
        await timeout();
      }
      const result = await this.#koniState.enableMantaPay(true, address, password, mnemonic.result);
      this.#skipAutoLock = true;
      await this.saveCurrentAccountAddress({
        address
      });
      const unsubSyncProgress = await ((_this$koniState$chain = this.#koniState.chainService) === null || _this$koniState$chain === void 0 ? void 0 : (_this$koniState$chain2 = _this$koniState$chain.mantaPay) === null || _this$koniState$chain2 === void 0 ? void 0 : _this$koniState$chain2.subscribeSyncProgress());
      console.debug('Start initial sync for MantaPay');
      this.#koniState.initialSyncMantaPay(address).then(() => {
        console.debug('Finished initial sync for MantaPay');
        this.#skipAutoLock = false;
        unsubSyncProgress && unsubSyncProgress();
      }).catch(e => {
        console.error('Error syncing MantaPay', e);
        this.#skipAutoLock = false;
        unsubSyncProgress && unsubSyncProgress();
      });
      return {
        success: !!result,
        message: result ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.MantaPayEnableMessage.SUCCESS : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.MantaPayEnableMessage.UNKNOWN_ERROR
      };
    } catch (e) {
      // @ts-ignore
      // eslint-disable-next-line @typescript-eslint/no-unsafe-call
      if (e.toString() === 'Error: Unable to decode using the supplied passphrase') {
        return {
          success: false,
          message: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.MantaPayEnableMessage.WRONG_PASSWORD
        };
      }
      return {
        success: false,
        message: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.MantaPayEnableMessage.UNKNOWN_ERROR
      };
    }
  }
  async initSyncMantaPay(address) {
    var _this$koniState$chain3, _this$koniState$chain4, _this$koniState$chain5, _this$koniState$chain6;
    if ((_this$koniState$chain3 = this.#koniState.chainService) !== null && _this$koniState$chain3 !== void 0 && (_this$koniState$chain4 = _this$koniState$chain3.mantaPay) !== null && _this$koniState$chain4 !== void 0 && _this$koniState$chain4.getSyncState().isSyncing) {
      return;
    }
    this.#skipAutoLock = true;
    await this.saveCurrentAccountAddress({
      address
    });
    const unsubSyncProgress = await ((_this$koniState$chain5 = this.#koniState.chainService) === null || _this$koniState$chain5 === void 0 ? void 0 : (_this$koniState$chain6 = _this$koniState$chain5.mantaPay) === null || _this$koniState$chain6 === void 0 ? void 0 : _this$koniState$chain6.subscribeSyncProgress());
    console.debug('Start initial sync for MantaPay');
    this.#koniState.initialSyncMantaPay(address).then(() => {
      var _this$koniState$chain7, _this$koniState$chain8;
      console.debug('Finished initial sync for MantaPay');
      this.#skipAutoLock = false;
      unsubSyncProgress && unsubSyncProgress();
      // make sure the sync state is set, just in case it gets unsubscribed
      (_this$koniState$chain7 = this.#koniState.chainService) === null || _this$koniState$chain7 === void 0 ? void 0 : (_this$koniState$chain8 = _this$koniState$chain7.mantaPay) === null || _this$koniState$chain8 === void 0 ? void 0 : _this$koniState$chain8.setSyncState({
        progress: 100,
        isSyncing: false
      });
    }).catch(e => {
      var _this$koniState$chain9, _this$koniState$chain10;
      console.error('Error syncing MantaPay', e);
      this.#skipAutoLock = false;
      unsubSyncProgress && unsubSyncProgress();
      (_this$koniState$chain9 = this.#koniState.chainService) === null || _this$koniState$chain9 === void 0 ? void 0 : (_this$koniState$chain10 = _this$koniState$chain9.mantaPay) === null || _this$koniState$chain10 === void 0 ? void 0 : _this$koniState$chain10.setSyncState({
        progress: 0,
        isSyncing: false
      });
    });
  }
  async disableMantaPay(address) {
    return this.#koniState.disableMantaPay(address);
  }
  subscribeMantaPayConfig(id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const mantaPayConfigSubscription = this.#koniState.subscribeMantaPayConfig().subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, mantaPayConfigSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return this.#koniState.getMantaPayConfig('calamari');
  }
  subscribeMantaPaySyncState(id, port) {
    var _this$koniState$subsc, _this$koniState$chain11, _this$koniState$chain12;
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_9__.createSubscription)(id, port);
    const syncingStateSubscription = (_this$koniState$subsc = this.#koniState.subscribeMantaPaySyncState()) === null || _this$koniState$subsc === void 0 ? void 0 : _this$koniState$subsc.subscribe({
      next: rs => {
        cb(rs);
      }
    });
    this.createUnsubscriptionHandle(id, syncingStateSubscription.unsubscribe);
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return ((_this$koniState$chain11 = this.#koniState.chainService) === null || _this$koniState$chain11 === void 0 ? void 0 : (_this$koniState$chain12 = _this$koniState$chain11.mantaPay) === null || _this$koniState$chain12 === void 0 ? void 0 : _this$koniState$chain12.getSyncState()) || {
      isSyncing: false,
      progress: 0,
      needManualSync: false
    };
  }

  /// Metadata

  async findRawMetadata({
    genesisHash
  }) {
    const {
      metadata,
      specVersion
    } = await this.#koniState.findMetadata(genesisHash);
    return {
      rawMetadata: metadata,
      specVersion
    };
  }
  async resolveDomainByAddress(request) {
    const chainApi = this.#koniState.getSubstrateApi(request.chain);
    return await (0,_subwallet_extension_base_koni_api_dotsama_domain__WEBPACK_IMPORTED_MODULE_57__.resolveAzeroDomainToAddress)(request.domain, request.chain, chainApi.api);
  }
  async resolveAddressByDomain(request) {
    const chainApi = this.#koniState.getSubstrateApi(request.chain);
    return await (0,_subwallet_extension_base_koni_api_dotsama_domain__WEBPACK_IMPORTED_MODULE_57__.resolveAzeroAddressToDomain)(request.address, request.chain, chainApi.api);
  }

  /// Inject account
  addInjects(request) {
    this.#koniState.keyringService.addInjectAccounts(request.accounts);
    return true;
  }
  removeInjects(request) {
    this.#koniState.keyringService.removeInjectAccounts(request.addresses);
    return true;
  }

  // --------------------------------------------------------------
  // eslint-disable-next-line @typescript-eslint/require-await
  async handle(id, type, request, port) {
    clearTimeout(this.#lockTimeOut);
    if (this.#timeAutoLock > 0) {
      this.#lockTimeOut = setTimeout(() => {
        if (!this.#skipAutoLock) {
          this.keyringLock();
        }
      }, this.#timeAutoLock * 60 * 1000);
    }
    switch (type) {
      /// Clone from PolkadotJs
      case 'pri(accounts.create.external)':
        return this.accountsCreateExternal(request);
      case 'pri(accounts.create.hardware)':
        return this.accountsCreateHardware(request);
      case 'pri(accounts.create.suri)':
        return this.accountsCreateSuri(request);
      case 'pri(accounts.changePassword)':
        return this.accountsChangePassword(request);
      case 'pri(accounts.export)':
        return this.accountsExport(request);
      case 'pri(accounts.show)':
        return this.accountsShow(request);
      case 'pri(accounts.subscribe)':
        return this.accountsSubscribe(id, port);
      case 'pri(accounts.validate)':
        return this.accountsValidate(request);
      case 'pri(metadata.approve)':
        return this.metadataApprove(request);
      case 'pri(metadata.get)':
        return this.metadataGet(request);
      case 'pri(metadata.list)':
        return this.metadataList();
      case 'pri(metadata.reject)':
        return this.metadataReject(request);
      case 'pri(metadata.requests)':
        return this.metadataSubscribe(id, port);
      case 'pri(derivation.create)':
        return this.derivationCreate(request);
      case 'pri(derivation.validate)':
        return this.derivationValidate(request);
      case 'pri(json.restore)':
        return this.jsonRestore(request);
      case 'pri(json.batchRestore)':
        return this.batchRestore(request);
      case 'pri(json.account.info)':
        return this.jsonGetAccountInfo(request);
      case 'pri(seed.create)':
        return this.seedCreate(request);
      case 'pri(seed.validate)':
        return this.seedValidate(request);
      case 'pri(signing.approve.signature)':
        return this.signingApproveSignature(request);
      case 'pri(signing.cancel)':
        return this.signingCancel(request);
      case 'pri(signing.requests)':
        return this.signingSubscribe(id, port);
      case 'pri(window.open)':
        return this.windowOpen(request);

      ///
      case 'pri(authorize.changeSiteAll)':
        return this.changeAuthorizationAll(request, id, port);
      case 'pri(authorize.changeSite)':
        return this.changeAuthorization(request, id, port);
      case 'pri(authorize.changeSitePerAccount)':
        return this.changeAuthorizationPerAcc(request, id, port);
      case 'pri(authorize.changeSitePerSite)':
        return this.changeAuthorizationPerSite(request);
      case 'pri(authorize.changeSiteBlock)':
        return this.changeAuthorizationBlock(request);
      case 'pri(authorize.forgetSite)':
        return this.forgetSite(request, id, port);
      case 'pri(authorize.forgetAllSite)':
        return this.forgetAllSite(id, port);
      case 'pri(authorize.approveV2)':
        return this.authorizeApproveV2(request);
      case 'pri(authorize.rejectV2)':
        return this.authorizeRejectV2(request);
      case 'pri(authorize.cancelV2)':
        return this.authorizeCancelV2(request);
      case 'pri(authorize.requestsV2)':
        return this.authorizeSubscribeV2(id, port);
      case 'pri(authorize.listV2)':
        return this.getAuthListV2();
      case 'pri(authorize.toggle)':
        return this.toggleAuthorization2(request);
      case 'pri(settings.changeBalancesVisibility)':
        return await this.toggleBalancesVisibility();

      // Settings
      case 'pri(settings.subscribe)':
        return await this.subscribeSettings(id, port);
      case 'pri(settings.saveAccountAllLogo)':
        return this.saveAccountAllLogo(request, id, port);
      case 'pri(settings.saveCamera)':
        return this.setCamera(request);
      case 'pri(settings.saveTheme)':
        return this.saveTheme(request);
      case 'pri(settings.saveBrowserConfirmationType)':
        return this.saveBrowserConfirmationType(request);
      case 'pri(settings.saveAutoLockTime)':
        return this.setAutoLockTime(request);
      case 'pri(settings.saveUnlockType)':
        return this.setUnlockType(request);
      case 'pri(settings.saveEnableChainPatrol)':
        return this.setEnableChainPatrol(request);
      case 'pri(settings.saveShowZeroBalance)':
        return this.setShowZeroBalance(request);
      case 'pri(settings.saveLanguage)':
        return this.setLanguage(request);
      case 'pri(settings.saveShowBalance)':
        return this.setShowBalance(request);
      case 'pri(price.getPrice)':
        return await this.getPrice();
      case 'pri(price.getSubscription)':
        return await this.subscribePrice(id, port);
      case 'pri(balance.getBalance)':
        return this.getBalance();
      case 'pri(balance.getSubscription)':
        return this.subscribeBalance(id, port);
      case 'pri(crowdloan.getCrowdloan)':
        return this.getCrowdloan();
      case 'pri(crowdloan.getSubscription)':
        return this.subscribeCrowdloan(id, port);
      case 'pri(derivation.createV2)':
        return this.derivationCreateV2(request);
      case 'pri(json.restoreV2)':
        return this.jsonRestoreV2(request);
      case 'pri(json.batchRestoreV2)':
        return this.batchRestoreV2(request);
      case 'pri(nft.getNft)':
        return await this.getNft();
      case 'pri(nft.getSubscription)':
        return await this.subscribeNft(id, port);
      case 'pri(nftCollection.getNftCollection)':
        return await this.getNftCollection();
      case 'pri(nftCollection.getSubscription)':
        return await this.subscribeNftCollection(id, port);
      case 'pri(staking.getStaking)':
        return this.getStaking();
      case 'pri(staking.getSubscription)':
        return await this.subscribeStaking(id, port);
      case 'pri(stakingReward.getStakingReward)':
        return this.getStakingReward();
      case 'pri(stakingReward.getSubscription)':
        return this.subscribeStakingReward(id, port);
      case 'pri(transaction.history.getSubscription)':
        return await this.subscribeHistory(id, port);

      /* Account management */
      // Add account
      case 'pri(accounts.create.suriV2)':
        return await this.accountsCreateSuriV2(request);
      case 'pri(accounts.create.externalV2)':
        return await this.accountsCreateExternalV2(request);
      case 'pri(accounts.create.hardwareV2)':
        return await this.accountsCreateHardwareV2(request);
      case 'pri(accounts.create.hardwareMultiple)':
        return await this.accountsCreateHardwareMultiple(request);
      case 'pri(accounts.create.withSecret)':
        return await this.accountsCreateWithSecret(request);
      case 'pri(seed.createV2)':
        return this.seedCreateV2(request);

      // Remove account
      case 'pri(accounts.forget)':
        return await this.accountsForgetOverride(request);

      // Validate account
      case 'pri(seed.validateV2)':
        return this.seedValidateV2(request);
      case 'pri(privateKey.validateV2)':
        return this.metamaskPrivateKeyValidateV2(request);
      case 'pri(accounts.checkPublicAndSecretKey)':
        return this.checkPublicAndSecretKey(request);

      // Export account
      case 'pri(accounts.exportPrivateKey)':
        return this.accountExportPrivateKey(request);

      // Subscribe account
      case 'pri(accounts.subscribeWithCurrentAddress)':
        return await this.accountsGetAllWithCurrentAddress(id, port);
      case 'pri(accounts.subscribeAccountsInputAddress)':
        return this.accountsGetAll(id, port);

      // Save current account
      case 'pri(currentAccount.saveAddress)':
        return await this.saveCurrentAccountAddress(request);
      case 'pri(accounts.updateCurrentAddress)':
        return this.updateCurrentAccountAddress(request);

      // Edit account
      case 'pri(accounts.edit)':
        return this.accountsEdit(request);

      // Save contact address
      case 'pri(accounts.saveRecent)':
        return this.saveRecentAccount(request);
      case 'pri(accounts.editContact)':
        return this.editContactAccount(request);
      case 'pri(accounts.deleteContact)':
        return this.deleteContactAccount(request);

      // Subscribe address
      case 'pri(accounts.subscribeAddresses)':
        return this.subscribeAddresses(id, port);
      case 'pri(accounts.resolveDomainToAddress)':
        return await this.resolveDomainByAddress(request);
      case 'pri(accounts.resolveAddressToDomain)':
        return await this.resolveAddressByDomain(request);

      // Inject account
      case 'pri(accounts.inject.add)':
        return this.addInjects(request);
      case 'pri(accounts.inject.remove)':
        return this.removeInjects(request);

      /* Account management */

      // ChainService
      case 'pri(chainService.subscribeChainInfoMap)':
        return this.subscribeChainInfoMap(id, port);
      case 'pri(chainService.subscribeChainStateMap)':
        return this.subscribeChainStateMap(id, port);
      case 'pri(chainService.subscribeXcmRefMap)':
        return this.subscribeXcmRefMap(id, port);
      case 'pri(chainService.getSupportedContractTypes)':
        return this.getSupportedSmartContractTypes();
      case 'pri(chainService.enableChain)':
        return await this.enableChain(request);
      case 'pri(chainService.reconnectChain)':
        return await this.reconnectChain(request);
      case 'pri(chainService.disableChain)':
        return await this.disableChain(request);
      case 'pri(chainService.removeChain)':
        return this.removeCustomChain(request);
      case 'pri(chainService.validateCustomChain)':
        return await this.validateNetwork(request);
      case 'pri(chainService.upsertChain)':
        return await this.upsertChain(request);
      case 'pri(chainService.resetDefaultChains)':
        return this.resetDefaultNetwork();
      case 'pri(chainService.enableChains)':
        return await this.enableChains(request);
      case 'pri(chainService.subscribeAssetRegistry)':
        return this.subscribeAssetRegistry(id, port);
      case 'pri(chainService.subscribeMultiChainAssetMap)':
        return this.subscribeMultiChainAssetMap(id, port);
      case 'pri(chainService.upsertCustomAsset)':
        return await this.upsertCustomToken(request);
      case 'pri(chainService.deleteCustomAsset)':
        return this.deleteCustomAsset(request);
      case 'pri(chainService.validateCustomAsset)':
        return await this.validateCustomAsset(request);
      case 'pri(assetSetting.getSubscription)':
        return this.subscribeAssetSetting(id, port);
      case 'pri(assetSetting.update)':
        return await this.updateAssetSetting(request);
      case 'pri(transfer.checkReferenceCount)':
        return await this.transferCheckReferenceCount(request);
      case 'pri(transfer.checkSupporting)':
        return await this.transferCheckSupporting(request);
      case 'pri(transfer.getExistentialDeposit)':
        return this.transferGetExistentialDeposit(request);
      case 'pri(transfer.getMaxTransferable)':
        return this.transferGetMaxTransferable(request);
      case 'pri(freeBalance.get)':
        return this.getAddressFreeBalance(request);
      case 'pri(freeBalance.subscribe)':
        return this.subscribeAddressFreeBalance(request, id, port);
      case 'pri(subscription.cancel)':
        return this.cancelSubscription(request);
      case 'pri(chainService.recoverSubstrateApi)':
        return this.recoverDotSamaApi(request);
      case 'pri(accounts.get.meta)':
        return this.getAccountMeta(request);

      /// Send NFT
      case 'pri(evmNft.submitTransaction)':
        return this.evmNftSubmitTransaction(request);
      case 'pri(substrateNft.submitTransaction)':
        return this.substrateNftSubmitTransaction(request);

      /// Transfer
      case 'pri(accounts.transfer)':
        return await this.makeTransfer(request);
      case 'pri(accounts.crossChainTransfer)':
        return await this.makeCrossChainTransfer(request);

      /// Sign QR
      case 'pri(qr.transaction.parse.substrate)':
        return this.parseSubstrateTransaction(request);
      case 'pri(qr.transaction.parse.evm)':
        return await this.parseEVMRLP(request);
      case 'pri(qr.sign.substrate)':
        return this.qrSignSubstrate(request);
      case 'pri(qr.sign.evm)':
        return await this.qrSignEVM(request);

      /// External account request
      case 'pri(account.external.reject)':
        return this.rejectExternalRequest(request);
      case 'pri(account.external.resolve)':
        return this.resolveQrTransfer(request);
      case 'pri(accounts.tie)':
        return this.accountsTie2(request);
      case 'pri(confirmations.subscribe)':
        return this.subscribeConfirmations(id, port);
      case 'pri(confirmations.complete)':
        return await this.completeConfirmation(request);

      /// Stake
      case 'pri(bonding.getBondingOptions)':
        return await this.getBondingOptions(request);
      case 'pri(bonding.getNominationPoolOptions)':
        return await this.getNominationPoolOptions(request);
      case 'pri(bonding.subscribeChainStakingMetadata)':
        return await this.subscribeChainStakingMetadata(id, port);
      case 'pri(bonding.subscribeNominatorMetadata)':
        return await this.subscribeStakingNominatorMetadata(id, port);
      case 'pri(bonding.submitBondingTransaction)':
        return await this.submitBonding(request);
      case 'pri(unbonding.submitTransaction)':
        return await this.submitUnbonding(request);
      case 'pri(unbonding.submitWithdrawal)':
        return await this.submitStakeWithdrawal(request);
      case 'pri(staking.submitClaimReward)':
        return await this.submitStakeClaimReward(request);
      case 'pri(staking.submitCancelWithdrawal)':
        return await this.submitCancelStakeWithdrawal(request);
      case 'pri(staking.submitTuringCompound)':
        return await this.submitTuringStakeCompounding(request);
      case 'pri(staking.submitTuringCancelCompound)':
        return await this.submitTuringCancelStakeCompound(request);
      case 'pri(bonding.nominationPool.submitBonding)':
        return await this.submitPoolBonding(request);
      case 'pri(bonding.nominationPool.submitUnbonding)':
        return await this.submitPoolingUnbonding(request);

      // EVM Transaction
      case 'pri(evm.transaction.parse.input)':
        return await this.parseContractInput(request);

      // Auth Url subscribe
      case 'pri(authorize.subscribe)':
        return await this.subscribeAuthUrls(id, port);

      // Phishing page
      case 'pri(phishing.pass)':
        return await this.passPhishingPage(request);

      /// Keyring state
      case 'pri(keyring.subscribe)':
        return this.keyringStateSubscribe(id, port);
      case 'pri(keyring.change)':
        return this.keyringChangeMasterPassword(request);
      case 'pri(keyring.migrate)':
        return this.keyringMigrateMasterPassword(request);
      case 'pri(keyring.unlock)':
        return this.keyringUnlock(request);
      case 'pri(keyring.lock)':
        return this.keyringLock();
      case 'pri(keyring.export.mnemonic)':
        return this.keyringExportMnemonic(request);
      case 'pri(keyring.reset)':
        return await this.resetWallet(request);

      /// Signing external
      case 'pri(signing.approve.passwordV2)':
        return this.signingApprovePasswordV2(request);

      /// Derive account
      case 'pri(derivation.validateV2)':
        return this.validateDerivePath(request);
      case 'pri(derivation.getList)':
        return this.getListDeriveAccounts(request);
      case 'pri(derivation.create.multiple)':
        return this.derivationCreateMultiple(request);
      case 'pri(derivation.createV3)':
        return this.derivationCreateV3(request);

      // Transaction
      case 'pri(transactions.getOne)':
        return this.getTransaction(request);
      case 'pri(transactions.subscribe)':
        return this.subscribeTransactions(id, port);

      // Notification
      case 'pri(notifications.subscribe)':
        return this.subscribeNotifications(id, port);
      case 'pri(cron.reload)':
        return await this.reloadCron(request);
      case 'pri(settings.getLogoMaps)':
        return await this.getLogoMap();

      /// Wallet Connect
      case 'pri(walletConnect.connect)':
        return this.connectWalletConnect(request);
      case 'pri(walletConnect.requests.connect.subscribe)':
        return this.connectWCSubscribe(id, port);
      case 'pri(walletConnect.session.approve)':
        return this.approveWalletConnectSession(request);
      case 'pri(walletConnect.session.reject)':
        return this.rejectWalletConnectSession(request);
      case 'pri(walletConnect.session.subscribe)':
        return this.subscribeWalletConnectSessions(id, port);
      case 'pri(walletConnect.session.disconnect)':
        return this.disconnectWalletConnectSession(request);

      // Not support
      case 'pri(walletConnect.requests.notSupport.subscribe)':
        return this.WCNotSupportSubscribe(id, port);
      case 'pri(walletConnect.notSupport.approve)':
        return this.approveWalletConnectNotSupport(request);
      case 'pri(walletConnect.notSupport.reject)':
        return this.rejectWalletConnectNotSupport(request);

      // Manta
      case 'pri(mantaPay.enable)':
        return await this.enableMantaPay(request);
      case 'pri(mantaPay.initSyncMantaPay)':
        return await this.initSyncMantaPay(request);
      case 'pri(mantaPay.subscribeConfig)':
        return await this.subscribeMantaPayConfig(id, port);
      case 'pri(mantaPay.disable)':
        return await this.disableMantaPay(request);
      case 'pri(mantaPay.subscribeSyncingState)':
        return this.subscribeMantaPaySyncState(id, port);

      // Metadata
      case 'pri(metadata.find)':
        return this.findRawMetadata(request);
      // Default
      default:
        throw new Error(`Unable to handle message of type ${type}`);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/koni/background/handlers/Mobile.ts":
/*!****************************************************************!*\
  !*** ../extension-base/src/koni/background/handlers/Mobile.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Mobile)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0

const DEFAULT_SERVICE_MAP = {
  subscription: {
    chainRegistry: true,
    balance: true,
    crowdloan: true,
    staking: true
  },
  cron: {
    price: true,
    nft: true,
    staking: true,
    history: true,
    recoverApi: true,
    checkApiStatus: true
  }
};
class Mobile {
  // @ts-ignore

  constructor(state) {
    this.state = state;
  }
  ping() {
    return 'mobile:ping';
  }
  initCronAndSubscription({
    cron: {
      activeServices: activeCronServices,
      intervalMap: cronIntervalMap
    },
    subscription: {
      activeServices: activeSubscriptionServices
    }
  }) {
    console.log('initCronAndSubscription');
    return {
      subscription: {
        chainRegistry: true,
        balance: true,
        crowdloan: true,
        staking: true
      },
      cron: {
        price: true,
        nft: true,
        staking: true,
        history: true,
        recoverApi: true,
        checkApiStatus: true
      }
    };
  }
  subscribeActiveCronAndSubscriptionServiceMap(id, port) {
    return DEFAULT_SERVICE_MAP;
  }
  startCronAndSubscriptionServices({
    cronServices,
    subscriptionServices
  }) {
    console.log('startCronAndSubscriptionServices');
  }
  stopCronAndSubscriptionServices({
    cronServices,
    subscriptionServices
  }) {
    console.log('stopCronAndSubscriptionServices');
  }
  restartCronAndSubscriptionServices({
    cronServices,
    subscriptionServices
  }) {
    console.log('restartCronAndSubscriptionServices');
  }
  startCronServices(services) {
    console.log('startCronServices');
  }
  stopCronServices(services) {
    console.log('stopCronServices');
  }
  restartCronServices(services) {
    console.log('stopCronServices');
  }
  startSubscriptionServices(services) {
    console.log('startSubscriptionServices');
  }
  stopSubscriptionServices(services) {
    console.log('stopSubscriptionServices');
  }
  restartSubscriptionServices(services) {
    console.log('restartSubscriptionServices');
  }

  // eslint-disable-next-line @typescript-eslint/require-await
  async handle(id, type, request, port) {
    switch (type) {
      case 'mobile(ping)':
        return this.ping();
      case 'mobile(cronAndSubscription.init)':
        return this.initCronAndSubscription(request);
      case 'mobile(cronAndSubscription.activeService.subscribe)':
        return this.subscribeActiveCronAndSubscriptionServiceMap(id, port);
      case 'mobile(cronAndSubscription.start)':
        return this.startCronAndSubscriptionServices(request);
      case 'mobile(cronAndSubscription.stop)':
        return this.stopCronAndSubscriptionServices(request);
      case 'mobile(cronAndSubscription.restart)':
        return this.restartCronAndSubscriptionServices(request);
      case 'mobile(cron.start)':
        return this.startCronServices(request);
      case 'mobile(cron.stop)':
        return this.stopCronServices(request);
      case 'mobile(cron.restart)':
        return this.restartCronServices(request);
      case 'mobile(subscription.start)':
        return this.startSubscriptionServices(request);
      case 'mobile(subscription.stop)':
        return this.stopSubscriptionServices(request);
      case 'mobile(subscription.restart)':
        return this.restartSubscriptionServices(request);
      default:
        throw new Error(`Unable to handle message of type ${type}`);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/koni/background/handlers/State.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/koni/background/handlers/State.ts ***!
  \***************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ KoniState)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/chain-list */ "../../node_modules/@subwallet/chain-list/index.js");
/* harmony import */ var _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/EvmProviderError */ "../extension-base/src/background/errors/EvmProviderError.ts");
/* harmony import */ var _subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/helpers */ "../extension-base/src/background/handlers/helpers.ts");
/* harmony import */ var _subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/subscriptions */ "../extension-base/src/background/handlers/subscriptions.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_services_balance_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @subwallet/extension-base/services/balance-service */ "../extension-base/src/services/balance-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/base/types */ "../extension-base/src/services/base/types.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service */ "../extension-base/src/services/chain-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_event_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/services/event-service */ "../extension-base/src/services/event-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_history_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @subwallet/extension-base/services/history-service */ "../extension-base/src/services/history-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_keyring_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/services/keyring-service */ "../extension-base/src/services/keyring-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_migration_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service */ "../extension-base/src/services/migration-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_notification_service_NotificationService__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @subwallet/extension-base/services/notification-service/NotificationService */ "../extension-base/src/services/notification-service/NotificationService.ts");
/* harmony import */ var _subwallet_extension_base_services_price_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @subwallet/extension-base/services/price-service */ "../extension-base/src/services/price-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_request_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @subwallet/extension-base/services/request-service */ "../extension-base/src/services/request-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_setting_service_SettingService__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @subwallet/extension-base/services/setting-service/SettingService */ "../extension-base/src/services/setting-service/SettingService.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_DatabaseService__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/DatabaseService */ "../extension-base/src/services/storage-service/DatabaseService.ts");
/* harmony import */ var _subwallet_extension_base_services_subscan_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/services/subscan-service */ "../extension-base/src/services/subscan-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_subscan_service_subscan_chain_map__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @subwallet/extension-base/services/subscan-service/subscan-chain-map */ "../extension-base/src/services/subscan-service/subscan-chain-map.ts");
/* harmony import */ var _subwallet_extension_base_services_transaction_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @subwallet/extension-base/services/transaction-service */ "../extension-base/src/services/transaction-service/index.ts");
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service */ "../extension-base/src/services/wallet-connect-service/index.ts");
/* harmony import */ var _subwallet_extension_base_stores_AccountRef__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/stores/AccountRef */ "../extension-base/src/stores/AccountRef.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth/parseTransaction */ "../extension-base/src/utils/eth/parseTransaction/index.ts");
/* harmony import */ var _subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @subwallet/extension-base/utils/promise */ "../extension-base/src/utils/promise.ts");
/* harmony import */ var _subwallet_keyring_pair_decode__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @subwallet/keyring/pair/decode */ "../../node_modules/@subwallet/keyring/pair/decode.js");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/bundle.js");
/* harmony import */ var eth_simple_keyring__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! eth-simple-keyring */ "../../node_modules/eth-simple-keyring/index.js");
/* harmony import */ var eth_simple_keyring__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(eth_simple_keyring__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/logger.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/assert.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/u8a/toHex.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/hex/stripPrefix.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/is/hex.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/hex/toU8a.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_39___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_39__);
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/base64/bs64.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/key/extractSuri.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
/* harmony import */ var _cron__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../cron */ "../extension-base/src/koni/background/cron.ts");
/* harmony import */ var _subscription__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../subscription */ "../extension-base/src/koni/background/subscription.ts");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_subwallet_extension_base_services_chain_service__WEBPACK_IMPORTED_MODULE_13__, _subwallet_extension_base_services_balance_service__WEBPACK_IMPORTED_MODULE_17__, _subscription__WEBPACK_IMPORTED_MODULE_22__]);
([_subwallet_extension_base_services_chain_service__WEBPACK_IMPORTED_MODULE_13__, _subwallet_extension_base_services_balance_service__WEBPACK_IMPORTED_MODULE_17__, _subscription__WEBPACK_IMPORTED_MODULE_22__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0







































// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const passworder = __webpack_require__(/*! browser-passworder */ "../../node_modules/browser-passworder/index.js");
const ETH_DERIVE_DEFAULT = '/m/44\'/60\'/0\'/0/0';

// List of providers passed into constructor. This is the list of providers
// exposed by the extension.

const getSuri = (seed, type) => {
  return type === 'ethereum' ? `${seed}${ETH_DERIVE_DEFAULT}` : seed;
};
const generateDefaultCrowdloanMap = () => {
  const crowdloanMap = {};
  Object.entries(_subwallet_chain_list__WEBPACK_IMPORTED_MODULE_2__.ChainInfoMap).forEach(([networkKey, chainInfo]) => {
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isSubstrateParaChain)(chainInfo)) {
      crowdloanMap[networkKey] = {
        state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.APIItemState.PENDING,
        contribute: '0'
      };
    }
  });
  return crowdloanMap;
};
class KoniState {
  injectedProviders = new Map();
  unsubscriptionMap = {};
  accountRefStore = new _subwallet_extension_base_stores_AccountRef__WEBPACK_IMPORTED_MODULE_5__["default"]();
  externalRequest = {};
  balanceMap = {};
  balanceSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
  crowdloanMap = generateDefaultCrowdloanMap();
  crowdloanSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
  nftSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
  mantaPayConfigSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
  isMantaPayEnabled = false;
  stakingSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
  chainStakingMetadataSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
  stakingNominatorMetadataSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
  stakingRewardSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
  stakingRewardState = {
    ready: false,
    data: {}
  };
  lazyMap = {};
  // Handle the general status of the extension
  generalStatus = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.INITIALIZING;
  waitSleeping = null;
  waitStarting = null;
  constructor(providers = {}) {
    this.providers = providers;
    this.eventService = new _subwallet_extension_base_services_event_service__WEBPACK_IMPORTED_MODULE_8__.EventService();
    this.dbService = new _subwallet_extension_base_services_storage_service_DatabaseService__WEBPACK_IMPORTED_MODULE_9__["default"](this.eventService);
    this.keyringService = new _subwallet_extension_base_services_keyring_service__WEBPACK_IMPORTED_MODULE_10__.KeyringService(this.eventService);
    this.subscanService = new _subwallet_extension_base_services_subscan_service__WEBPACK_IMPORTED_MODULE_11__.SubscanService();
    this.notificationService = new _subwallet_extension_base_services_notification_service_NotificationService__WEBPACK_IMPORTED_MODULE_12__["default"]();
    this.chainService = new _subwallet_extension_base_services_chain_service__WEBPACK_IMPORTED_MODULE_13__.ChainService(this.dbService, this.eventService);
    this.settingService = new _subwallet_extension_base_services_setting_service_SettingService__WEBPACK_IMPORTED_MODULE_14__["default"]();
    this.requestService = new _subwallet_extension_base_services_request_service__WEBPACK_IMPORTED_MODULE_15__["default"](this.chainService, this.settingService, this.keyringService);
    this.priceService = new _subwallet_extension_base_services_price_service__WEBPACK_IMPORTED_MODULE_16__.PriceService(this.dbService, this.eventService, this.chainService);
    this.balanceService = new _subwallet_extension_base_services_balance_service__WEBPACK_IMPORTED_MODULE_17__.BalanceService(this.chainService);
    this.historyService = new _subwallet_extension_base_services_history_service__WEBPACK_IMPORTED_MODULE_18__.HistoryService(this.dbService, this.chainService, this.eventService, this.keyringService);
    this.transactionService = new _subwallet_extension_base_services_transaction_service__WEBPACK_IMPORTED_MODULE_19__["default"](this.chainService, this.eventService, this.requestService, this.balanceService, this.historyService, this.notificationService, this.dbService);
    this.walletConnectService = new _subwallet_extension_base_services_wallet_connect_service__WEBPACK_IMPORTED_MODULE_20__["default"](this, this.requestService);
    this.migrationService = new _subwallet_extension_base_services_migration_service__WEBPACK_IMPORTED_MODULE_21__["default"](this);
    this.subscription = new _subscription__WEBPACK_IMPORTED_MODULE_22__.KoniSubscription(this, this.dbService);
    this.cron = new _cron__WEBPACK_IMPORTED_MODULE_23__.KoniCron(this, this.subscription, this.dbService);
    this.logger = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_24__.logger)('State');

    // Init state
    this.init().catch(console.error);
  }

  // Clone from polkadot.js
  get knownMetadata() {
    return this.requestService.knownMetadata;
  }
  injectMetadata(url, request) {
    return this.requestService.injectMetadata(url, request);
  }
  getMetaRequest(id) {
    return this.requestService.getMetaRequest(id);
  }
  getSignRequest(id) {
    return this.requestService.getSignRequest(id);
  }

  // List all providers the extension is exposing
  rpcListProviders() {
    return Promise.resolve(Object.keys(this.providers).reduce((acc, key) => {
      acc[key] = this.providers[key].meta;
      return acc;
    }, {}));
  }
  rpcSend(request, port) {
    const provider = this.injectedProviders.get(port);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.assert)(provider, 'Cannot call pub(rpc.subscribe) before provider is set');
    return provider.send(request.method, request.params);
  }

  // Start a provider, return its meta
  rpcStartProvider(key, port) {
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.assert)(Object.keys(this.providers).includes(key), 'Provider cannot be found.');
    if (this.injectedProviders.get(port)) {
      return Promise.resolve(this.providers[key].meta);
    }

    // Instantiate the provider
    this.injectedProviders.set(port, this.providers[key].start());

    // Close provider connection when page is closed
    port.onDisconnect.addListener(() => {
      const provider = this.injectedProviders.get(port);
      if (provider) {
        (0,_subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_26__.withErrorLog)(() => provider.disconnect());
      }
      this.injectedProviders.delete(port);
    });
    return Promise.resolve(this.providers[key].meta);
  }
  rpcSubscribe({
    method,
    params,
    type
  }, cb, port) {
    const provider = this.injectedProviders.get(port);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.assert)(provider, 'Cannot call pub(rpc.subscribe) before provider is set');
    return provider.subscribe(type, method, params, cb);
  }
  rpcSubscribeConnected(_request, cb, port) {
    const provider = this.injectedProviders.get(port);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.assert)(provider, 'Cannot call pub(rpc.subscribeConnected) before provider is set');
    cb(null, provider.isConnected); // Immediately send back current isConnected
    provider.on('connected', () => cb(null, true));
    provider.on('disconnected', () => cb(null, false));
  }
  rpcUnsubscribe(request, port) {
    const provider = this.injectedProviders.get(port);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.assert)(provider, 'Cannot call pub(rpc.unsubscribe) before provider is set');
    return provider.unsubscribe(request.type, request.method, request.subscriptionId);
  }
  saveMetadata(meta) {
    this.requestService.saveMetadata(meta);
  }
  sign(url, request, account) {
    return this.requestService.sign(url, request, account);
  }
  get authSubjectV2() {
    return this.requestService.authSubjectV2;
  }
  generateDefaultBalanceMap() {
    const balanceMap = {};
    const activeChains = this.chainService.getActiveChainInfoMap();
    Object.values(activeChains).forEach(chainInfo => {
      const chainAssetMap = this.chainService.getFungibleTokensByChain(chainInfo.slug);
      Object.keys(chainAssetMap).forEach(assetSlug => {
        balanceMap[assetSlug] = {
          tokenSlug: assetSlug,
          free: '',
          locked: '',
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.APIItemState.PENDING
        };
      });
    });
    return balanceMap;
  }
  async init() {
    await this.eventService.waitCryptoReady;
    await this.chainService.init();
    await this.migrationService.run();
    this.eventService.emit('chain.ready', true);
    this.onReady();
    this.onAccountAdd();
    this.onAccountRemove();
    await this.startSubscription();
  }
  async initMantaPay(password) {
    var _this$chainService, _this$chainService$ma;
    const mantaPayConfig = await ((_this$chainService = this.chainService) === null || _this$chainService === void 0 ? void 0 : (_this$chainService$ma = _this$chainService.mantaPay) === null || _this$chainService$ma === void 0 ? void 0 : _this$chainService$ma.getMantaPayFirstConfig(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN));
    if (mantaPayConfig && mantaPayConfig.enabled && !this.isMantaPayEnabled) {
      // only init the first login
      console.debug('Initiating MantaPay for', mantaPayConfig.address);
      await this.enableMantaPay(false, mantaPayConfig.address, password);
      console.debug('Initiated MantaPay for', mantaPayConfig.address);
      this.isMantaPayEnabled = true;
      this.eventService.emit('mantaPay.enable', mantaPayConfig.address);
    }
  }
  async startSubscription() {
    await this.eventService.waitKeyringReady;
    this.dbService.subscribeChainStakingMetadata([], data => {
      this.chainStakingMetadataSubject.next(data);
    });
    this.dbService.subscribeMantaPayConfig(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN, data => {
      this.mantaPayConfigSubject.next(data);
    });
    let unsub;
    this.keyringService.accountSubject.subscribe(accounts => {
      // TODO: improve this
      unsub && unsub.unsubscribe();
      unsub = this.dbService.subscribeNominatorMetadata(Object.keys(accounts), data => {
        this.stakingNominatorMetadataSubject.next(data);
      });
    });
  }
  onReady() {
    // Todo: Need optimize in the future to, only run important services onetime to save resources
    // Todo: If optimize must check activity of web-runner of mobile
    this._start().catch(console.error);
  }
  updateKeyringState(isReady = true, callback) {
    this.keyringService.updateKeyringState(isReady);
    callback && callback();
  }
  lazyNext = (key, callback) => {
    if (this.lazyMap[key]) {
      // @ts-ignore
      clearTimeout(this.lazyMap[key]);
    }
    const lazy = setTimeout(() => {
      callback();
      clearTimeout(lazy);
    }, 300);
    this.lazyMap[key] = lazy;
  };
  getAuthRequestV2(id) {
    return this.requestService.getAuthRequestV2(id);
  }
  setAuthorize(data, callback) {
    this.requestService.setAuthorize(data, callback);
  }
  getAuthorize(update) {
    this.requestService.getAuthorize(update);
  }
  subscribeEvmChainChange() {
    return this.requestService.subscribeEvmChainChange;
  }
  subscribeAuthorizeUrlSubject() {
    return this.requestService.subscribeAuthorizeUrlSubject;
  }
  getAuthList() {
    return this.requestService.getAuthList();
  }
  getAddressList(value = false) {
    const addressList = Object.keys(this.keyringService.accounts);
    return addressList.reduce((addressList, v) => ({
      ...addressList,
      [v]: value
    }), {});
  }
  async authorizeUrlV2(url, request) {
    return this.requestService.authorizeUrlV2(url, request);
  }
  getNativeTokenInfo(networkKey) {
    return this.chainService.getNativeTokenInfo(networkKey);
  }
  getChainInfo(networkKey) {
    return this.chainService.getChainInfoByKey(networkKey);
  }
  async getChainStakingMetadata() {
    return this.dbService.getChainStakingMetadata();
  }
  async getStakingMetadataByChain(chain, type) {
    return this.dbService.getStakingMetadataByChain(chain, type);
  }
  async getNominatorMetadata() {
    return this.dbService.getNominatorMetadata();
  }
  async getMantaPayConfig(chain) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-return
    return this.dbService.getMantaPayConfig(chain);
  }
  async getStaking() {
    const addresses = this.getDecodedAddresses();
    const stakings = await this.dbService.getStakings(addresses, this.activeChainSlugs);
    return {
      ready: true,
      details: stakings
    };
  }
  async getStakingOwnersByChains(chains) {
    const stakings = await this.dbService.getStakingsByChains(chains);
    const addresses = [];
    stakings.forEach(staking => {
      if (!addresses.includes(staking.address)) {
        addresses.push(staking.address);
      }
    });
    return addresses;
  }
  async getPooledStakingRecordsByAddress(addresses) {
    return this.dbService.getPooledStakings(addresses, this.activeChainSlugs);
  }
  subscribeMantaPayConfig() {
    return this.mantaPayConfigSubject;
  }
  subscribeStaking() {
    return this.stakingSubject;
  }
  subscribeChainStakingMetadata() {
    return this.chainStakingMetadataSubject;
  }
  subscribeNominatorMetadata() {
    return this.stakingNominatorMetadataSubject;
  }
  ensureUrlAuthorizedV2(url) {
    return this.requestService.ensureUrlAuthorizedV2(url);
  }
  setStakingItem(networkKey, item) {
    this.dbService.updateStaking(networkKey, item.address, item).catch(e => this.logger.warn(e));
  }
  updateChainStakingMetadata(item, changes) {
    this.dbService.updateChainStakingMetadata(item, changes).catch(e => this.logger.warn(e));
  }
  updateStakingNominatorMetadata(item) {
    this.dbService.updateNominatorMetadata(item).catch(e => this.logger.warn(e));
  }
  setNftCollection(network, data, callback) {
    this.dbService.addNftCollection(data).catch(e => this.logger.warn(e));
    callback && callback(data);
  }
  getNftCollection() {
    return this.dbService.getAllNftCollection(this.activeChainSlugs);
  }
  subscribeNftCollection() {
    return this.dbService.stores.nftCollection.subscribeNftCollection(this.activeChainSlugs);
  }
  resetNft(newAddress) {
    this.getNft().then(data => this.nftSubject.next(data || {
      nftList: [],
      total: 0
    })).catch(e => this.logger.warn(e));
    const addresses = this.getDecodedAddresses(newAddress);
    this.dbService.subscribeNft(addresses, this.activeChainSlugs, nfts => {
      this.nftSubject.next({
        nftList: nfts,
        total: nfts.length
      });
    });
  }
  updateNftData(network, nftData, address, callback) {
    this.dbService.addNft(address, nftData).catch(e => this.logger.warn(e));
    callback && callback(nftData);
  }
  deleteNftCollection(chain, collectionId) {
    return this.dbService.deleteNftCollection(chain, collectionId);
  }
  cleanUpNfts(chain, owner, collectionId, nftIds, ownNothing) {
    this.dbService.cleanUpNft(chain, owner, collectionId, nftIds, ownNothing).catch(e => this.logger.warn(e));
  }
  async getNft() {
    const addresses = this.getDecodedAddresses();
    if (!addresses.length) {
      return;
    }
    const nfts = await this.dbService.getNft(addresses, this.activeChainSlugs);
    return {
      nftList: nfts,
      total: nfts.length
    };
  }
  subscribeNft() {
    return this.nftSubject;
  }
  resetStakingReward() {
    this.stakingRewardState.data = {};
    this.stakingRewardSubject.next(this.stakingRewardState);
  }
  updateStakingReward(stakingRewardData, callback) {
    this.stakingRewardState.ready = true;
    const key = `${stakingRewardData.chain}___${stakingRewardData.address}___${stakingRewardData.type}`;
    this.stakingRewardState.data[key] = stakingRewardData;
    if (callback) {
      callback(this.stakingRewardState);
    }
    this.stakingRewardSubject.next(this.stakingRewardState);
  }
  updateStakingRewardReady(ready) {
    this.stakingRewardState.ready = ready;
    this.stakingRewardSubject.next(this.stakingRewardState);
  }
  getAccountRefMap(callback) {
    const refMap = {};
    this.accountRefStore.get('refList', refList => {
      if (refList) {
        refList.forEach(accRef => {
          accRef.forEach(acc => {
            refMap[acc] = [...accRef].filter(r => !(r === acc));
          });
        });
      }
      callback(refMap);
    });
  }
  addAccountRef(addresses, callback) {
    this.accountRefStore.get('refList', refList => {
      const newList = refList ? [...refList] : [];
      newList.push(addresses);
      this.accountRefStore.set('refList', newList, callback);
    });
  }
  removeAccountRef(address, callback) {
    this.accountRefStore.get('refList', refList => {
      if (refList) {
        refList.forEach(accRef => {
          if (accRef.indexOf(address) > -1) {
            accRef.splice(accRef.indexOf(address), 1);
          }
          if (accRef.length < 2) {
            refList.splice(refList.indexOf(accRef), 1);
          }
        });
        this.accountRefStore.set('refList', refList, () => {
          callback();
        });
      } else {
        callback();
      }
    });
  }
  getStakingReward(update) {
    update(this.stakingRewardState);
  }
  subscribeStakingReward() {
    return this.stakingRewardSubject;
  }
  setCurrentAccount(data, callback, preventOneAccount) {
    const {
      address,
      currentGenesisHash
    } = data;
    const result = {
      ...data
    };
    if (address === _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_28__.ALL_ACCOUNT_KEY) {
      const pairs = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.getAccounts();
      const pair = pairs[0];
      const pairGenesisHash = (pair === null || pair === void 0 ? void 0 : pair.meta.genesisHash) || '';
      if (pairs.length > 1 || !pair) {
        result.allGenesisHash = currentGenesisHash || undefined;
      } else {
        if (!preventOneAccount) {
          result.address = pair.address;
          result.currentGenesisHash = pairGenesisHash || '';
          result.allGenesisHash = pairGenesisHash || undefined;
        } else {
          result.allGenesisHash = currentGenesisHash || undefined;
        }
      }
    }
    this.keyringService.setCurrentAccount(result);
    callback && callback();
  }
  setAccountTie(address, genesisHash) {
    if (address !== _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_28__.ALL_ACCOUNT_KEY) {
      const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.getPair(address);
      (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.assert)(pair, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Unable to find account'));
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.saveAccountMeta(pair, {
        ...pair.meta,
        genesisHash
      });
    }
    const accountInfo = this.keyringService.currentAccount;
    if (address === accountInfo.address) {
      accountInfo.currentGenesisHash = genesisHash || _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_28__.ALL_GENESIS_HASH;
      this.setCurrentAccount(accountInfo);
    }
    return true;
  }
  async switchEvmNetworkByUrl(shortenUrl, networkKey) {
    const authUrls = await this.getAuthList();
    const chainInfo = this.chainService.getChainInfoByKey(networkKey);
    const chainState = this.chainService.getChainStateByKey(networkKey);
    if (authUrls[shortenUrl]) {
      if (chainInfo && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isChainEnabled)(chainState)) {
        await this.enableChain(networkKey);
      }
      authUrls[shortenUrl].currentEvmNetworkKey = networkKey;
      this.setAuthorize(authUrls);
    } else {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INTERNAL_ERROR, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Not found {{shortenUrl}} in auth list', {
        replace: {
          shortenUrl
        }
      }));
    }
  }
  async switchNetworkAccount(id, url, networkKey, changeAddress) {
    const chainInfo = this.chainService.getChainInfoByKey(networkKey);
    const chainState = this.chainService.getChainStateByKey(networkKey);
    const {
      address,
      currentGenesisHash
    } = this.keyringService.currentAccount;
    return this.requestService.addConfirmation(id, url, 'switchNetworkRequest', {
      networkKey,
      address: changeAddress
    }, {
      address: changeAddress
    }).then(({
      isApproved
    }) => {
      if (isApproved) {
        const useAddress = changeAddress || address;
        if (chainInfo && !(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isChainEnabled)(chainState)) {
          this.enableChain(networkKey).catch(console.error);
        }
        if (useAddress !== _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_28__.ALL_ACCOUNT_KEY) {
          const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.getPair(useAddress);
          (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_25__.assert)(pair, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Unable to find account'));
          _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.saveAccountMeta(pair, {
            ...pair.meta,
            genesisHash: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getSubstrateGenesisHash)(chainInfo)
          });
        }
        if (address !== changeAddress || (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getSubstrateGenesisHash)(chainInfo) !== currentGenesisHash || isApproved) {
          this.setCurrentAccount({
            address: useAddress,
            currentGenesisHash: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getSubstrateGenesisHash)(chainInfo)
          });
        }
      }
      return isApproved;
    });
  }
  async addNetworkConfirm(id, url, networkData) {
    return this.requestService.addConfirmation(id, url, 'addNetworkRequest', networkData).then(async ({
      isApproved
    }) => {
      if (isApproved) {
        if (networkData.mode === 'insert') {
          await this.upsertChainInfo(networkData);
        } else {
          // TODO: update existed network (need more discussion)
        }
        return null;
      } else {
        throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.USER_REJECTED_REQUEST);
      }
    });
  }
  async addTokenConfirm(id, url, tokenInfo) {
    return this.requestService.addConfirmation(id, url, 'addTokenRequest', tokenInfo).then(async ({
      isApproved
    }) => {
      if (isApproved) {
        await this.upsertCustomToken({
          originChain: tokenInfo.originChain,
          slug: '',
          name: tokenInfo.name,
          symbol: tokenInfo.symbol,
          decimals: tokenInfo.decimals,
          priceId: null,
          minAmount: null,
          assetType: tokenInfo.type,
          metadata: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._parseMetadataForSmartContractAsset)(tokenInfo.contractAddress),
          multiChainAsset: null,
          hasValue: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isChainTestNet)(this.chainService.getChainInfoByKey(tokenInfo.originChain)),
          icon: ''
        });
        return isApproved;
      } else {
        throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.USER_REJECTED_REQUEST);
      }
    });
  }
  get metaSubject() {
    return this.requestService.metaSubject;
  }
  get signSubject() {
    return this.requestService.signSubject;
  }
  getSettings(callback) {
    this.settingService.getSettings(callback);
  }
  setSettings(settings, callback) {
    this.settingService.setSettings(settings, callback);
  }
  updateSetting(key, value) {
    this.settingService.getSettings(settings => {
      const newSettings = {
        ...settings,
        [key]: value
      };
      this.settingService.setSettings(newSettings);
    });
  }
  setShowBalance(value) {
    this.settingService.getSettings(settings => {
      const newSettings = {
        ...settings,
        isShowBalance: value
      };
      this.settingService.setSettings(newSettings);
    });
  }
  subscribeSettingsSubject() {
    return this.settingService.getSubject();
  }
  getAccountAddress() {
    const address = this.keyringService.currentAccount.address;
    if (address === '') {
      return null;
    }
    return address;
  }
  getDecodedAddresses(address) {
    let checkingAddress = address;
    if (!address) {
      checkingAddress = this.getAccountAddress();
    }
    if (!checkingAddress) {
      return [];
    }
    if (checkingAddress === _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_28__.ALL_ACCOUNT_KEY) {
      return this.getAllAddresses();
    }
    return [checkingAddress];
  }
  getAllAddresses() {
    return _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.getAccounts().map(account => account.address);
  }
  removeInactiveChainBalances(balanceMap) {
    const activeBalanceMap = {};
    Object.entries(balanceMap).forEach(([tokenSlug, balanceItem]) => {
      const tokenInfo = this.chainService.getAssetBySlug(tokenSlug);
      if (tokenInfo) {
        const chainInfo = this.chainService.getChainInfoByKey(tokenInfo.originChain);
        if (chainInfo && this.getChainStateByKey(chainInfo.slug).active) {
          activeBalanceMap[tokenSlug] = balanceItem;
        }
      }
    });
    return activeBalanceMap;
  }
  getBalance(reset) {
    const activeData = this.removeInactiveChainBalances(this.balanceMap);
    return {
      details: activeData,
      reset
    };
  }
  async getStoredBalance(address) {
    const items = await this.dbService.stores.balance.getBalanceMapByAddress(address);
    return items || {};
  }
  async handleSwitchAccount(newAddress) {
    await Promise.all([this.resetBalanceMap(newAddress), this.resetCrowdloanMap(newAddress)]);
  }
  async resetBalanceMap(newAddress) {
    const defaultData = this.generateDefaultBalanceMap();
    let storedData = await this.getStoredBalance(newAddress);
    storedData = this.removeInactiveChainBalances(storedData);
    this.balanceMap = {
      ...defaultData,
      ...storedData
    };
    this.publishBalance(true);
  }
  async resetCrowdloanMap(newAddress) {
    const defaultData = generateDefaultCrowdloanMap();
    const storedData = await this.getStoredCrowdloan(newAddress);
    this.crowdloanMap = {
      ...defaultData,
      ...storedData
    };
    this.publishCrowdloan(true);
  }
  resetStaking(newAddress) {
    this.getStaking().then(data => {
      this.stakingSubject.next(data);
    }).catch(e => this.logger.warn(e));
    const addresses = this.getDecodedAddresses(newAddress);
    this.dbService.subscribeStaking(addresses, this.activeChainSlugs, stakings => {
      this.stakingSubject.next({
        ready: true,
        details: stakings
      });
    });
  }
  setBalanceItem(tokenSlug, item) {
    this.balanceMap[tokenSlug] = {
      timestamp: +new Date(),
      ...item
    };
    this.updateBalanceStore(item);
    this.lazyNext('setBalanceItem', () => {
      this.publishBalance();
    });
  }
  updateBalanceStore(item) {
    const currentAccountInfo = this.keyringService.currentAccount;
    this.dbService.updateBalanceStore(currentAccountInfo.address, item).catch(e => this.logger.warn(e));
  }
  subscribeBalance() {
    return this.balanceSubject;
  }
  getCrowdloan(reset) {
    return {
      details: this.crowdloanMap,
      reset
    };
  }
  async getStoredCrowdloan(address) {
    const items = await this.dbService.stores.crowdloan.getDataByAddressAsObject(address);
    return items || {};
  }
  setCrowdloanItem(networkKey, item) {
    const itemData = {
      ...item,
      timestamp: +new Date()
    };

    // Update crowdloan map
    this.crowdloanMap[networkKey] = itemData;
    this.updateCrowdloanStore(networkKey, itemData);
    this.lazyNext('setCrowdloanItem', () => {
      this.publishCrowdloan();
    });
  }
  updateCrowdloanStore(networkKey, item) {
    const currentAccountInfo = this.keyringService.currentAccount;
    this.dbService.updateCrowdloanStore(networkKey, currentAccountInfo.address, item).catch(e => this.logger.warn(e));
  }
  subscribeCrowdloan() {
    return this.crowdloanSubject;
  }
  getSmartContractNfts() {
    return this.chainService.getSmartContractNfts();
  }

  // ChainService ------------------------------------------------

  getChainInfoMap() {
    return this.chainService.getChainInfoMap();
  }
  getChainStateMap() {
    return this.chainService.getChainStateMap();
  }
  getAssetRefMap() {
    return this.chainService.getAssetRefMap();
  }
  getChainStateByKey(key) {
    return this.chainService.getChainStateByKey(key);
  }
  getAssetRegistry() {
    return this.chainService.getAssetRegistry();
  }
  getMultiChainAssetMap() {
    return this.chainService.getMultiChainAssetMap();
  }
  getXcmRefMap() {
    return this.chainService.getXcmRefMap();
  }
  getAssetByChainAndAsset(chain, assetTypes) {
    return this.chainService.getAssetByChainAndType(chain, assetTypes);
  }
  getAssetBySlug(slug) {
    return this.chainService.getAssetBySlug(slug);
  }
  getXcmEqualAssetByChain(destinationChain, originTokenSlug) {
    return this.chainService.getXcmEqualAssetByChain(destinationChain, originTokenSlug);
  }
  subscribeChainInfoMap() {
    return this.chainService.subscribeChainInfoMap();
  }
  subscribeChainStateMap() {
    return this.chainService.subscribeChainStateMap();
  }
  subscribeAssetRegistry() {
    return this.chainService.subscribeAssetRegistry();
  }
  subscribeMultiChainAssetMap() {
    return this.chainService.subscribeMultiChainAssetMap();
  }
  subscribeXcmRefMap() {
    return this.chainService.subscribeXcmRefMap();
  }
  async upsertCustomToken(data) {
    const tokenSlug = this.chainService.upsertCustomToken(data);
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isAssetFungibleToken)(data)) {
      await this.chainService.updateAssetSetting(tokenSlug, {
        visible: true
      });
      this.eventService.emit('asset.updateState', tokenSlug);
    } else {
      this.eventService.emit('asset.updateState', tokenSlug);
    }
  }
  deleteCustomAssets(targetTokens) {
    this.chainService.deleteCustomAssets(targetTokens);
  }
  async validateCustomChain(provider, existedChainSlug) {
    return await this.chainService.validateCustomChain(provider, existedChainSlug);
  }
  getSupportedSmartContractTypes() {
    return this.chainService.getSupportedSmartContractTypes();
  }
  async validateCustomAsset(data) {
    return await this.chainService.validateCustomToken(data);
  }

  // ------------------------------------------------

  getActiveChainInfoMap() {
    return this.chainService.getActiveChainInfoMap();
  }
  async upsertChainInfo(data) {
    const newNativeTokenSlug = await this.chainService.upsertChain(data);
    if (newNativeTokenSlug) {
      await this.chainService.updateAssetSetting(newNativeTokenSlug, {
        visible: true
      });
      this.eventService.emit('asset.updateState', newNativeTokenSlug);
    }
    return true;
  }
  removeCustomChain(networkKey) {
    return this.chainService.removeCustomChain(networkKey);
  }
  forceRemoveChain(networkKey) {
    this.chainService.forceRemoveChain(networkKey);
  }

  // TODO: avoids turning off chains related to ledger account
  getDefaultNetworkKeys = () => {
    const genesisHashes = {};
    const pairs = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.getPairs();
    pairs.forEach(pair => {
      const originGenesisHash = pair.meta.originGenesisHash;
      if (originGenesisHash && typeof originGenesisHash === 'string') {
        genesisHashes[originGenesisHash] = originGenesisHash;
      }
    });
    const hashes = Object.keys(genesisHashes);
    const result = [];
    for (const [key, network] of Object.entries(this.chainService.getChainInfoMap())) {
      const condition = hashes.includes((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getSubstrateGenesisHash)(network) || '');
      if (condition) {
        result.push(key);
      }
    }
    return result;
  };
  async disableChain(chainSlug) {
    await this.chainService.updateAssetSettingByChain(chainSlug, false);
    if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._MANTA_ZK_CHAIN_GROUP.includes(chainSlug)) {
      var _this$chainService2, _this$chainService2$m;
      const mantaPayConfig = await ((_this$chainService2 = this.chainService) === null || _this$chainService2 === void 0 ? void 0 : (_this$chainService2$m = _this$chainService2.mantaPay) === null || _this$chainService2$m === void 0 ? void 0 : _this$chainService2$m.getMantaPayFirstConfig(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN));
      if (mantaPayConfig && mantaPayConfig.enabled && this.isMantaPayEnabled) {
        await this.disableMantaPay(mantaPayConfig.address);
      }
    }
    return this.chainService.disableChain(chainSlug);
  }
  async enableChain(chainSlug, enableTokens = true) {
    if (enableTokens) {
      await this.chainService.updateAssetSettingByChain(chainSlug, true);
    }
    return this.chainService.enableChain(chainSlug);
  }
  resetDefaultChains() {
    const defaultChains = this.getDefaultNetworkKeys();
    return this.chainService.resetChainInfoMap(defaultChains);
  }
  getSubstrateApiMap() {
    return this.chainService.getSubstrateApiMap();
  }
  getSubstrateApi(networkKey) {
    return this.chainService.getSubstrateApi(networkKey);
  }
  getEvmApiMap() {
    return this.chainService.getEvmApiMap();
  }
  getEvmApi(networkKey) {
    return this.chainService.getEvmApi(networkKey);
  }
  getApiMap() {
    return {
      substrate: this.chainService.getSubstrateApiMap(),
      evm: this.chainService.getEvmApiMap()
    };
  }
  refreshSubstrateApi(key) {
    this.chainService.refreshSubstrateApi(key);
    return true;
  }
  refreshWeb3Api(key) {
    this.chainService.refreshEvmApi(key);
  }
  getServiceInfo() {
    return {
      chainInfoMap: this.chainService.getChainInfoMap(),
      chainApiMap: this.getApiMap(),
      currentAccountInfo: this.keyringService.currentAccount,
      assetRegistry: this.chainService.getAssetRegistry(),
      chainStateMap: this.chainService.getChainStateMap()
    };
  }
  getExternalRequestMap() {
    return this.externalRequest;
  }
  setExternalRequestMap(id, value) {
    this.externalRequest[id] = value;
  }
  getExternalRequest(id) {
    return this.externalRequest[id];
  }
  updateExternalRequest(id, value) {
    const rs = this.externalRequest[id];
    if (rs) {
      for (const [_key, _value] of Object.entries(value)) {
        // @ts-ignore
        rs[_key] = _value;
      }
    }
  }
  cleanExternalRequest() {
    const now = new Date().getTime();
    const map = this.externalRequest;
    const arr = [];
    const handlerPushToDelete = (key, value) => {
      arr.push(key);
      value.resolve = undefined;
      value.reject = undefined;
    };
    for (const [key, value] of Object.entries(map)) {
      if (value.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.ExternalRequestPromiseStatus.COMPLETED || value.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.ExternalRequestPromiseStatus.REJECTED) {
        handlerPushToDelete(key, value);
      } else {
        if (now - value.createdAt > 15 * 60 * 60) {
          handlerPushToDelete(key, value);
        }
      }
    }
    for (const key of arr) {
      delete map[key];
    }
  }
  pauseAllNetworks(code, reason) {
    return this.chainService.stopAllChainApis();
  }
  async resumeAllNetworks() {
    return this.chainService.resumeAllChainApis();
  }
  publishBalance(reset) {
    this.balanceSubject.next(this.getBalance(reset));
  }
  publishCrowdloan(reset) {
    this.crowdloanSubject.next(this.getCrowdloan(reset));
  }

  // private publishHistory () {
  //   this.historySubject.next(this.getHistoryMap());
  // }

  // private removeInactiveDataByChain<T> (data: Record<string, T>) {
  //   const activeData: Record<string, T> = {};
  //
  //   Object.entries(data).forEach(([networkKey, items]) => {
  //     if (this.chainService.getChainStateByKey(networkKey).active) {
  //       activeData[networkKey] = items;
  //     }
  //   });
  //
  //   return activeData;
  // }

  findNetworkKeyByGenesisHash(genesisHash) {
    if (!genesisHash) {
      return [undefined, undefined];
    }
    const rs = Object.entries(this.chainService.getChainInfoMap()).find(([networkKey, chainInfo]) => (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getSubstrateGenesisHash)(chainInfo) === genesisHash);
    if (rs) {
      return rs;
    } else {
      return [undefined, undefined];
    }
  }
  findChainIdGenesisHash(genesisHash) {
    const chainInfo = this.findNetworkKeyByGenesisHash(genesisHash)[1];
    return chainInfo ? (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getEvmChainId)(chainInfo) : undefined;
  }
  findNetworkKeyByChainId(chainId) {
    if (!chainId) {
      return [undefined, undefined];
    }
    const rs = Object.entries(this.chainService.getChainInfoMap()).find(([networkKey, chainInfo]) => {
      var _chainInfo$evmInfo;
      return (chainInfo === null || chainInfo === void 0 ? void 0 : (_chainInfo$evmInfo = chainInfo.evmInfo) === null || _chainInfo$evmInfo === void 0 ? void 0 : _chainInfo$evmInfo.evmChainId) === chainId;
    });
    if (rs) {
      return rs;
    } else {
      return [undefined, undefined];
    }
  }
  findSingleMode(genesisHash) {
    const [networkKey] = this.findNetworkKeyByGenesisHash(genesisHash);
    if (!networkKey) {
      return undefined;
    }
    return Object.values(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._PREDEFINED_SINGLE_MODES).find(item => item.networkKeys.includes(networkKey));
  }
  accountExportPrivateKey({
    address,
    password
  }) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
    const exportedJson = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.backupAccount(_subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.getPair(address), password);
    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
    const decoded = (0,_subwallet_keyring_pair_decode__WEBPACK_IMPORTED_MODULE_31__.decodePair)(password, (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_32__.base64Decode)(exportedJson.encoded), exportedJson.encoding.type);
    return {
      privateKey: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_33__.u8aToHex)(decoded.secretKey),
      publicKey: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_33__.u8aToHex)(decoded.publicKey)
    };
  }
  checkPublicAndSecretKey({
    publicKey,
    secretKey
  }) {
    try {
      const _secret = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_34__.hexStripPrefix)(secretKey);
      if (_secret.length === 64) {
        const suri = `0x${_secret}`;
        const {
          phrase
        } = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_35__.keyExtractSuri)(suri);
        if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_36__.isHex)(phrase) && (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_36__.isHex)(phrase, 256)) {
          const type = 'ethereum';
          const address = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.createFromUri(getSuri(suri, type), {}, type).address;
          return {
            address: address,
            isValid: true,
            isEthereum: true
          };
        } else {
          return {
            address: '',
            isValid: false,
            isEthereum: true
          };
        }
      }
      const keyPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.keyring.addFromPair({
        publicKey: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_37__.hexToU8a)(publicKey),
        secretKey: (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_37__.hexToU8a)(secretKey)
      });
      return {
        address: keyPair.address,
        isValid: true,
        isEthereum: false
      };
    } catch (e) {
      console.error(e);
      return {
        address: '',
        isValid: false,
        isEthereum: false
      };
    }
  }
  getEthKeyring(address, password) {
    return new Promise(resolve => {
      const {
        privateKey
      } = this.accountExportPrivateKey({
        address,
        password: password
      });
      const ethKeyring = new (eth_simple_keyring__WEBPACK_IMPORTED_MODULE_0___default())([privateKey]);
      resolve(ethKeyring);
    });
  }
  async evmSign(id, url, method, params, allowedAccounts) {
    let address = '';
    let payload;
    const [p1, p2] = params;
    if (typeof p1 === 'string' && (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_38__.isEthereumAddress)(p1)) {
      address = p1;
      payload = p2;
    } else if (typeof p2 === 'string' && (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_38__.isEthereumAddress)(p2)) {
      address = p2;
      payload = p1;
    }
    if (address === '' || !payload) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Not found address or payload to sign'));
    }
    if (['eth_sign', 'personal_sign', 'eth_signTypedData', 'eth_signTypedData_v1', 'eth_signTypedData_v3', 'eth_signTypedData_v4'].indexOf(method) < 0) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Unsupported action'));
    }
    if (['eth_signTypedData_v3', 'eth_signTypedData_v4'].indexOf(method) > -1) {
      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-assignment
      payload = JSON.parse(payload);
    }

    // Check sign abiblity
    if (!allowedAccounts.find(acc => acc.toLowerCase() === address.toLowerCase())) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('You have rescinded allowance for this account in wallet'));
    }
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.getPair(address);
    if (!pair) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Unable to find account'));
    }
    const account = {
      address: pair.address,
      ...pair.meta
    };
    let hashPayload = '';
    let canSign = false;
    switch (method) {
      case 'personal_sign':
        canSign = true;
        hashPayload = payload;
        break;
      case 'eth_sign':
      case 'eth_signTypedData':
      case 'eth_signTypedData_v1':
      case 'eth_signTypedData_v3':
      case 'eth_signTypedData_v4':
        if (!account.isExternal) {
          canSign = true;
        }
        break;
      default:
        throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Unsupported action'));
    }
    const signPayload = {
      account: account,
      type: method,
      payload: payload,
      hashPayload: hashPayload,
      canSign: canSign,
      id
    };
    return this.requestService.addConfirmation(id, url, 'evmSignatureRequest', signPayload, {
      requiredPassword: false,
      address
    }).then(({
      isApproved,
      payload
    }) => {
      if (isApproved) {
        if (payload) {
          return payload;
        } else {
          throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Not found signature'));
        }
      } else {
        throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.USER_REJECTED_REQUEST);
      }
    });
  }
  async evmSendTransaction(id, url, networkKey, allowedAccounts, transactionParams) {
    const evmApi = this.getEvmApi(networkKey);
    const evmNetwork = this.getChainInfo(networkKey);
    const web3 = evmApi.api;
    const autoFormatNumber = val => {
      if (typeof val === 'string' && val.startsWith('0x')) {
        return new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())(val.replace('0x', ''), 16).toString();
      } else if (typeof val === 'number') {
        return val.toString();
      }
      return val;
    };
    if (transactionParams.from === transactionParams.to) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Receiving address must be different from sending address'));
    }
    const transaction = {
      from: transactionParams.from,
      to: transactionParams.to,
      value: autoFormatNumber(transactionParams.value),
      gasPrice: autoFormatNumber(transactionParams.gasPrice),
      maxPriorityFeePerGas: autoFormatNumber(transactionParams.maxPriorityFeePerGas),
      maxFeePerGas: autoFormatNumber(transactionParams.maxFeePerGas),
      data: transactionParams.data
    };

    // Calculate transaction data
    try {
      transaction.gas = await web3.eth.estimateGas({
        ...transaction
      });
    } catch (e) {
      // @ts-ignore
      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, e === null || e === void 0 ? void 0 : e.message);
    }
    const gasPrice = await web3.eth.getGasPrice();
    transaction.gasPrice = gasPrice;
    const estimateGas = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())(gasPrice.toString()).mul(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())(transaction.gas)).toString();

    // Address is validated in before step
    const fromAddress = allowedAccounts.find(account => account.toLowerCase() === transaction.from.toLowerCase());
    if (!fromAddress) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('You have rescinded allowance for this account in wallet'));
    }
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_29__.keyring.getPair(fromAddress);
    if (!pair) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Unable to find account'));
    }
    const account = {
      address: pair.address,
      ...pair.meta
    };

    // Validate balance
    const balance = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())((await web3.eth.getBalance(fromAddress)) || 0);
    if (balance.lt(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())(gasPrice.toString()).mul(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())(transaction.gas)).add(new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())(autoFormatNumber(transactionParams.value) || '0')))) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Insufficient balance'));
    }
    transaction.nonce = await web3.eth.getTransactionCount(fromAddress);
    const hashPayload = this.transactionService.generateHashPayload(networkKey, transaction);
    const isToContract = await (0,_subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_40__.isContractAddress)(transaction.to || '', evmApi);
    const parseData = isToContract ? transaction.data ? (await (0,_subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_40__.parseContractInput)(transaction.data, transaction.to || '', evmNetwork)).result : '' : transaction.data || '';
    const requestPayload = {
      ...transaction,
      estimateGas,
      hashPayload,
      isToContract,
      parseData: parseData,
      account: account,
      canSign: true
    };
    const eType = transaction.value ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.ExtrinsicType.TRANSFER_BALANCE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.ExtrinsicType.EVM_EXECUTE;
    const transactionData = {
      ...transaction
    };
    const token = this.chainService.getNativeTokenInfo(networkKey);
    if (eType === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.ExtrinsicType.TRANSFER_BALANCE) {
      // @ts-ignore
      transactionData.tokenSlug = token.slug;
    }

    // Custom handle this instead of general handler transaction
    const transactionEmitter = await this.transactionService.addTransaction({
      transaction: requestPayload,
      address: requestPayload.from,
      chain: networkKey,
      url,
      data: transactionData,
      extrinsicType: eType,
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.ChainType.EVM,
      estimateFee: {
        value: estimateGas,
        symbol: token.symbol,
        decimals: token.decimals || 18
      },
      id
    });

    // Wait extrinsic hash
    return new Promise((resolve, reject) => {
      transactionEmitter.on('extrinsicHash', rs => {
        resolve(rs.extrinsicHash);
      });

      // Mapping error for evmProvider
      transactionEmitter.on('error', rs => {
        var _rs$errors$;
        let evmProviderError = new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INTERNAL_ERROR);
        const errorType = ((_rs$errors$ = rs.errors[0]) === null || _rs$errors$ === void 0 ? void 0 : _rs$errors$.errorType) || _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.BasicTxErrorType.INTERNAL_ERROR;
        if (errorType === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.BasicTxErrorType.USER_REJECT_REQUEST || errorType === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.BasicTxErrorType.UNABLE_TO_SIGN) {
          evmProviderError = new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.USER_REJECTED_REQUEST);
        } else if (errorType === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.BasicTxErrorType.UNABLE_TO_SEND) {
          var _rs$errors$2;
          evmProviderError = new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_30__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.EvmProviderErrorType.INTERNAL_ERROR, (_rs$errors$2 = rs.errors[0]) === null || _rs$errors$2 === void 0 ? void 0 : _rs$errors$2.message);
        }
        reject(evmProviderError);
      });
    });
  }
  getConfirmationsQueueSubject() {
    return this.requestService.confirmationsQueueSubject;
  }
  async completeConfirmation(request) {
    return await this.requestService.completeConfirmation(request);
  }
  onInstall() {
    // const singleModes = Object.values(_PREDEFINED_SINGLE_MODES);

    // This logic is moved to installation.ts
    // try {
    //   // Open expand page
    //   const url = `${chrome.extension.getURL('index.html')}#/`;
    //
    //   withErrorLog(() => chrome.tabs.create({ url }));
    // } catch (e) {
    //   console.error(e);
    // }

    // const setUpSingleMode = ({ networkKeys, theme }: SingleModeJson) => {
    //   networkKeys.forEach((key) => {
    //     this.enableChain(key).catch(console.error);
    //   });
    //
    //   const chainInfo = this.chainService.getChainInfoByKey(networkKeys[0]);
    //   const genesisHash = _getSubstrateGenesisHash(chainInfo);
    //
    //   this.setCurrentAccount({
    //     address: ALL_ACCOUNT_KEY,
    //     currentGenesisHash: genesisHash.length > 0 ? genesisHash : null
    //   });
    //   this.setTheme(theme);
    // };
    //
    // chrome.tabs.query({}, function (tabs) {
    //   const openingUrls = tabs.map((t) => t.url);
    //
    //   const singleMode = singleModes.find(({ autoTriggerDomain }) => {
    //     const urlRegex = new RegExp(autoTriggerDomain);
    //
    //     return Boolean(openingUrls.find((url) => {
    //       return url && urlRegex.test(url);
    //     }));
    //   });
    //
    //   if (singleMode) {
    //     // Wait for everything is ready before enable single mode
    //     setTimeout(() => {
    //       setUpSingleMode(singleMode);
    //     }, 999);
    //   }
    // });
  }
  get activeNetworks() {
    return this.chainService.getActiveChainInfos();
  }
  get activeChainSlugs() {
    return Object.values(this.activeNetworks).map(chainInfo => {
      return chainInfo.slug;
    });
  }
  async sleep() {
    // Wait starting finish before sleep to avoid conflict
    this.generalStatus === _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STARTING && this.waitStarting && (await this.waitStarting);
    this.eventService.emit('general.sleep', true);

    // Avoid sleep multiple times
    if (this.generalStatus === _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STOPPED) {
      return;
    }

    // Continue wait existed stopping process
    if (this.generalStatus === _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STOPPING) {
      await this.waitSleeping;
      return;
    }
    const sleeping = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_41__.createPromiseHandler)();
    this.generalStatus = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STOPPING;
    this.waitSleeping = sleeping.promise;

    // Stopping services
    await Promise.all([this.cron.stop(), this.subscription.stop()]);
    await this.pauseAllNetworks(undefined, 'IDLE mode');
    await Promise.all([this.historyService.stop(), this.priceService.stop()]);

    // Complete sleeping
    sleeping.resolve();
    this.generalStatus = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STOPPED;
    this.waitSleeping = null;
  }
  async _start(isWakeup = false) {
    // Wait sleep finish before start to avoid conflict
    this.generalStatus === _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STOPPING && this.waitSleeping && (await this.waitSleeping);

    // Avoid start multiple times
    if (this.generalStatus === _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STARTED) {
      return;
    }

    // Continue wait existed starting process
    if (this.generalStatus === _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STARTING) {
      await this.waitStarting;
      return;
    }
    const starting = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_41__.createPromiseHandler)();
    this.generalStatus = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STARTING;
    this.waitStarting = starting.promise;

    // Resume all networks if wakeup from sleep
    if (isWakeup) {
      await this.resumeAllNetworks();
      this.eventService.emit('general.wakeup', true);
    }

    // Start services
    await Promise.all([this.cron.start(), this.subscription.start(), this.historyService.start(), this.priceService.start()]);

    // Complete starting
    starting.resolve();
    this.waitStarting = null;
    this.generalStatus = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_7__.ServiceStatus.STARTED;
  }
  async wakeup() {
    await this._start(true);
  }
  cancelSubscription(id) {
    if ((0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_42__.isSubscriptionRunning)(id)) {
      (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_42__.unsubscribe)(id);
    }
    if (this.unsubscriptionMap[id]) {
      this.unsubscriptionMap[id]();
      delete this.unsubscriptionMap[id];
    }
    return true;
  }
  createUnsubscriptionHandle(id, unsubscribe) {
    this.unsubscriptionMap[id] = unsubscribe;
  }
  async autoEnableChains(addresses) {
    const assetMap = this.chainService.getAssetRegistry();
    const promiseList = addresses.map(address => {
      return this.subscanService.getMultiChainBalance(address).catch(e => {
        console.error(e);
        return null;
      });
    });
    const needEnableChains = [];
    const needActiveTokens = [];
    const currentAssetSettings = await this.chainService.getAssetSettings();
    const chainMap = this.chainService.getChainInfoMap();
    const balanceDataList = await Promise.all(promiseList);
    balanceDataList.forEach(balanceData => {
      balanceData && balanceData.forEach(({
        balance,
        bonded,
        category,
        locked,
        network,
        symbol
      }) => {
        var _currentAssetSettings;
        const chain = _subwallet_extension_base_services_subscan_service_subscan_chain_map__WEBPACK_IMPORTED_MODULE_43__.SUBSCAN_CHAIN_MAP_REVERSE[network];
        const chainInfo = chain ? chainMap[chain] : null;
        const balanceIsEmpty = (!balance || balance === '0') && (!locked || locked === '0') && (!bonded || bonded === '0');

        // Cancel if chain is not supported or is testnet or balance is 0
        if (!chainInfo || chainInfo.isTestnet || balanceIsEmpty) {
          return;
        }
        const tokenKey = `${chain}-${category === 'native' ? 'NATIVE' : 'LOCAL'}-${symbol.toUpperCase()}`;
        if (assetMap[tokenKey] && !((_currentAssetSettings = currentAssetSettings[tokenKey]) !== null && _currentAssetSettings !== void 0 && _currentAssetSettings.visible)) {
          needEnableChains.push(chain);
          needActiveTokens.push(tokenKey);
          currentAssetSettings[tokenKey] = {
            visible: true
          };
        }
      });
    });
    if (needActiveTokens.length) {
      await this.chainService.enableChains(needEnableChains);
      this.chainService.setAssetSettings({
        ...currentAssetSettings
      });
    }
  }
  onAccountAdd() {
    this.eventService.on('account.add', address => {
      this.autoEnableChains([address]).catch(this.logger.error);
    });
  }
  onAccountRemove() {
    this.eventService.on('account.remove', address => {
      // Some separate service like historyService will listen to this event and remove inside that service

      const stores = this.dbService.stores;

      // Remove Balance
      stores.balance.removeAllByAddress(address).catch(console.error);
      stores.balance.removeAllByAddress(_subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_28__.ALL_ACCOUNT_KEY).catch(console.error);

      // Remove NFT
      stores.nft.deleteNftByAddress([address]).catch(console.error);

      // Remove Staking Data
      stores.staking.removeAllByAddress(address).catch(console.error);
    });
  }
  async reloadNft() {
    const currentAddress = this.keyringService.currentAccount.address;
    await this.dbService.removeNftsByAddress(currentAddress);
    return await this.cron.reloadNft();
  }
  async reloadStaking() {
    await this.subscription.reloadStaking();
    return true;
  }
  async approvePassPhishingPage(_url) {
    return new Promise(resolve => {
      this.settingService.getPassPhishingList(value => {
        const result = {
          ...value
        };
        const url = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_44__.stripUrl)(_url);
        result[url] = {
          pass: true
        };
        this.settingService.setPassPhishing(result, () => {
          resolve(true);
        });
      });
    });
  }
  async resetWallet(resetAll) {
    await this.keyringService.resetWallet(resetAll);
    this.requestService.resetWallet();
    this.transactionService.resetWallet();
    await this.dbService.resetWallet(resetAll);
    this.accountRefStore.set('refList', []);
    if (resetAll) {
      this.settingService.resetWallet();
    }
    this.chainService.resetWallet(resetAll);
    await this.walletConnectService.resetWallet(resetAll);
    await this.chainService.init();
  }
  async enableMantaPay(updateStore, address, password, seedPhrase) {
    var _this$chainService3, _this$chainService3$m, _this$chainService4, _this$chainService4$m, _this$chainService4$m2, _this$chainService11, _this$chainService11$, _this$chainService11$2;
    if (!address || (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_38__.isEthereumAddress)(address)) {
      return;
    }
    (_this$chainService3 = this.chainService) === null || _this$chainService3 === void 0 ? void 0 : (_this$chainService3$m = _this$chainService3.mantaPay) === null || _this$chainService3$m === void 0 ? void 0 : _this$chainService3$m.setCurrentAddress(address);
    await ((_this$chainService4 = this.chainService) === null || _this$chainService4 === void 0 ? void 0 : (_this$chainService4$m = _this$chainService4.mantaPay) === null || _this$chainService4$m === void 0 ? void 0 : (_this$chainService4$m2 = _this$chainService4$m.privateWallet) === null || _this$chainService4$m2 === void 0 ? void 0 : _this$chainService4$m2.initialSigner());
    if (updateStore && seedPhrase) {
      var _this$chainService5, _this$chainService5$m, _this$chainService5$m2, _this$chainService6, _this$chainService6$m, _this$chainService6$m2, _this$chainService7, _this$chainService7$m, _this$chainService7$m2, _this$chainService8, _this$chainService8$m;
      // first time initiation
      await ((_this$chainService5 = this.chainService) === null || _this$chainService5 === void 0 ? void 0 : (_this$chainService5$m = _this$chainService5.mantaPay) === null || _this$chainService5$m === void 0 ? void 0 : (_this$chainService5$m2 = _this$chainService5$m.privateWallet) === null || _this$chainService5$m2 === void 0 ? void 0 : _this$chainService5$m2.loadUserSeedPhrase(seedPhrase));
      const authContext = await ((_this$chainService6 = this.chainService) === null || _this$chainService6 === void 0 ? void 0 : (_this$chainService6$m = _this$chainService6.mantaPay) === null || _this$chainService6$m === void 0 ? void 0 : (_this$chainService6$m2 = _this$chainService6$m.privateWallet) === null || _this$chainService6$m2 === void 0 ? void 0 : _this$chainService6$m2.getAuthorizationContext());
      await ((_this$chainService7 = this.chainService) === null || _this$chainService7 === void 0 ? void 0 : (_this$chainService7$m = _this$chainService7.mantaPay) === null || _this$chainService7$m === void 0 ? void 0 : (_this$chainService7$m2 = _this$chainService7$m.privateWallet) === null || _this$chainService7$m2 === void 0 ? void 0 : _this$chainService7$m2.loadAuthorizationContext(authContext));
      // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
      const encryptedData = await passworder.encrypt(password, authContext);
      await ((_this$chainService8 = this.chainService) === null || _this$chainService8 === void 0 ? void 0 : (_this$chainService8$m = _this$chainService8.mantaPay) === null || _this$chainService8$m === void 0 ? void 0 : _this$chainService8$m.saveMantaAuthContext({
        chain: _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN,
        address,
        data: encryptedData
      }));
    } else {
      var _this$chainService9, _this$chainService9$m, _this$chainService10, _this$chainService10$, _this$chainService10$2;
      const authContext = await ((_this$chainService9 = this.chainService) === null || _this$chainService9 === void 0 ? void 0 : (_this$chainService9$m = _this$chainService9.mantaPay) === null || _this$chainService9$m === void 0 ? void 0 : _this$chainService9$m.getMantaAuthContext(address, _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN));

      // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
      const decryptedData = await passworder.decrypt(password, authContext.data);

      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-member-access
      const proofAuthKey = new Uint8Array(Object.values(decryptedData.proof_authorization_key));
      await ((_this$chainService10 = this.chainService) === null || _this$chainService10 === void 0 ? void 0 : (_this$chainService10$ = _this$chainService10.mantaPay) === null || _this$chainService10$ === void 0 ? void 0 : (_this$chainService10$2 = _this$chainService10$.privateWallet) === null || _this$chainService10$2 === void 0 ? void 0 : _this$chainService10$2.loadAuthorizationContext({
        proof_authorization_key: proofAuthKey
      }));
    }
    const zkAddress = await ((_this$chainService11 = this.chainService) === null || _this$chainService11 === void 0 ? void 0 : (_this$chainService11$ = _this$chainService11.mantaPay) === null || _this$chainService11$ === void 0 ? void 0 : (_this$chainService11$2 = _this$chainService11$.privateWallet) === null || _this$chainService11$2 === void 0 ? void 0 : _this$chainService11$2.getZkAddress());
    if (updateStore) {
      var _this$chainService12, _this$chainService12$, _this$chainService13, _this$chainService13$, _this$chainService13$2, _this$chainService13$3;
      await ((_this$chainService12 = this.chainService) === null || _this$chainService12 === void 0 ? void 0 : (_this$chainService12$ = _this$chainService12.mantaPay) === null || _this$chainService12$ === void 0 ? void 0 : _this$chainService12$.saveMantaPayConfig({
        address,
        zkAddress: zkAddress,
        enabled: true,
        chain: (_this$chainService13 = this.chainService) === null || _this$chainService13 === void 0 ? void 0 : (_this$chainService13$ = _this$chainService13.mantaPay) === null || _this$chainService13$ === void 0 ? void 0 : (_this$chainService13$2 = _this$chainService13$.privateWallet) === null || _this$chainService13$2 === void 0 ? void 0 : (_this$chainService13$3 = _this$chainService13$2.network) === null || _this$chainService13$3 === void 0 ? void 0 : _this$chainService13$3.toLowerCase(),
        isInitialSync: false
      }));
    }
    this.isMantaPayEnabled = true;
    return zkAddress;
  }
  async disableMantaPay(address) {
    var _this$chainService14, _this$chainService14$, _this$chainService15, _this$chainService15$, _this$chainService15$2, _this$chainService16, _this$chainService16$, _this$chainService16$2, _this$chainService17, _this$chainService17$, _this$chainService18, _this$chainService18$;
    const config = await ((_this$chainService14 = this.chainService) === null || _this$chainService14 === void 0 ? void 0 : (_this$chainService14$ = _this$chainService14.mantaPay) === null || _this$chainService14$ === void 0 ? void 0 : _this$chainService14$.getMantaPayConfig(address, _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN));
    if (!config) {
      return false;
    }
    await ((_this$chainService15 = this.chainService) === null || _this$chainService15 === void 0 ? void 0 : (_this$chainService15$ = _this$chainService15.mantaPay) === null || _this$chainService15$ === void 0 ? void 0 : (_this$chainService15$2 = _this$chainService15$.privateWallet) === null || _this$chainService15$2 === void 0 ? void 0 : _this$chainService15$2.dropAuthorizationContext());
    await ((_this$chainService16 = this.chainService) === null || _this$chainService16 === void 0 ? void 0 : (_this$chainService16$ = _this$chainService16.mantaPay) === null || _this$chainService16$ === void 0 ? void 0 : (_this$chainService16$2 = _this$chainService16$.privateWallet) === null || _this$chainService16$2 === void 0 ? void 0 : _this$chainService16$2.dropUserSeedPhrase());
    // await this.chainService?.mantaPay?.privateWallet?.resetState();
    await ((_this$chainService17 = this.chainService) === null || _this$chainService17 === void 0 ? void 0 : (_this$chainService17$ = _this$chainService17.mantaPay) === null || _this$chainService17$ === void 0 ? void 0 : _this$chainService17$.deleteMantaPayConfig(address, _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN));
    await ((_this$chainService18 = this.chainService) === null || _this$chainService18 === void 0 ? void 0 : (_this$chainService18$ = _this$chainService18.mantaPay) === null || _this$chainService18$ === void 0 ? void 0 : _this$chainService18$.deleteMantaAuthContext(address, _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN));
    this.chainService.setMantaZkAssetSettings(false);
    this.isMantaPayEnabled = false;
    return true;
  }
  async initialSyncMantaPay(address) {
    var _this$chainService19, _this$chainService19$, _this$chainService20, _this$chainService20$, _this$chainService20$2, _this$chainService20$3, _this$chainService21, _this$chainService21$, _this$chainService21$2, _this$chainService22, _this$chainService22$;
    if (!address || (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_38__.isEthereumAddress)(address)) {
      return;
    }
    (_this$chainService19 = this.chainService) === null || _this$chainService19 === void 0 ? void 0 : (_this$chainService19$ = _this$chainService19.mantaPay) === null || _this$chainService19$ === void 0 ? void 0 : _this$chainService19$.setCurrentAddress(address);
    await ((_this$chainService20 = this.chainService) === null || _this$chainService20 === void 0 ? void 0 : (_this$chainService20$ = _this$chainService20.mantaPay) === null || _this$chainService20$ === void 0 ? void 0 : (_this$chainService20$2 = _this$chainService20$.privateWallet) === null || _this$chainService20$2 === void 0 ? void 0 : (_this$chainService20$3 = _this$chainService20$2.baseWallet) === null || _this$chainService20$3 === void 0 ? void 0 : _this$chainService20$3.isApiReady());
    const syncResult = await ((_this$chainService21 = this.chainService) === null || _this$chainService21 === void 0 ? void 0 : (_this$chainService21$ = _this$chainService21.mantaPay) === null || _this$chainService21$ === void 0 ? void 0 : (_this$chainService21$2 = _this$chainService21$.privateWallet) === null || _this$chainService21$2 === void 0 ? void 0 : _this$chainService21$2.initialWalletSync());
    await ((_this$chainService22 = this.chainService) === null || _this$chainService22 === void 0 ? void 0 : (_this$chainService22$ = _this$chainService22.mantaPay) === null || _this$chainService22$ === void 0 ? void 0 : _this$chainService22$.updateMantaPayConfig(address, _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN, {
      isInitialSync: true
    }));
    this.eventService.emit('mantaPay.initSync', undefined);
    return syncResult;
  }
  getMantaZkBalance() {
    var _this$chainService23, _this$chainService24, _this$chainService24$, _this$chainService24$2, _this$chainService25, _this$chainService25$, _this$chainService26, _this$chainService26$, _this$chainService26$2;
    if (!this.chainService || !((_this$chainService23 = this.chainService) !== null && _this$chainService23 !== void 0 && _this$chainService23.mantaPay)) {
      return;
    }
    if (!((_this$chainService24 = this.chainService) !== null && _this$chainService24 !== void 0 && (_this$chainService24$ = _this$chainService24.mantaPay) !== null && _this$chainService24$ !== void 0 && (_this$chainService24$2 = _this$chainService24$.privateWallet) !== null && _this$chainService24$2 !== void 0 && _this$chainService24$2.initialSyncIsFinished)) {
      return;
    }
    const chain = (_this$chainService25 = this.chainService) === null || _this$chainService25 === void 0 ? void 0 : (_this$chainService25$ = _this$chainService25.mantaPay.privateWallet) === null || _this$chainService25$ === void 0 ? void 0 : _this$chainService25$.network;
    if (!chain) {
      return;
    }
    const assetMap = this.chainService.getMantaZkAssets(chain === null || chain === void 0 ? void 0 : chain.toLowerCase());
    (_this$chainService26 = this.chainService) === null || _this$chainService26 === void 0 ? void 0 : (_this$chainService26$ = _this$chainService26.mantaPay) === null || _this$chainService26$ === void 0 ? void 0 : (_this$chainService26$2 = _this$chainService26$.privateWallet) === null || _this$chainService26$2 === void 0 ? void 0 : _this$chainService26$2.getMultiZkBalance(Object.values(assetMap).map(tokenInfo => new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getTokenOnChainAssetId)(tokenInfo)))).then(zkBalances => {
      const assetList = Object.values(assetMap);
      for (let i = 0; i < assetList.length; i++) {
        var _zkBalances$i;
        const balanceItem = {
          tokenSlug: assetList[i].slug,
          state: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.APIItemState.PENDING,
          free: '0',
          locked: '0'
        };
        balanceItem.free = ((_zkBalances$i = zkBalances[i]) === null || _zkBalances$i === void 0 ? void 0 : _zkBalances$i.toString()) || '0';
        balanceItem.state = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_4__.APIItemState.READY;
        this.setBalanceItem(balanceItem.tokenSlug, balanceItem);
      }
    }).catch(console.warn);
  }
  subscribeMantaPayBalance() {
    var _this$chainService27, _this$chainService27$;
    let interval;
    (_this$chainService27 = this.chainService) === null || _this$chainService27 === void 0 ? void 0 : (_this$chainService27$ = _this$chainService27.mantaPay) === null || _this$chainService27$ === void 0 ? void 0 : _this$chainService27$.getMantaPayConfig(this.keyringService.currentAccount.address, _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN).then(config => {
      if (config && config.enabled && config.isInitialSync) {
        this.getMantaZkBalance();
        interval = setInterval(this.getMantaZkBalance, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_28__.MANTA_PAY_BALANCE_INTERVAL);
      }
    }).catch(console.warn);
    return () => {
      interval && clearInterval(interval);
    };
  }
  async syncMantaPay() {
    var _this$chainService28, _this$chainService28$, _this$chainService29, _this$chainService29$, _this$chainService29$2;
    const config = await ((_this$chainService28 = this.chainService) === null || _this$chainService28 === void 0 ? void 0 : (_this$chainService28$ = _this$chainService28.mantaPay) === null || _this$chainService28$ === void 0 ? void 0 : _this$chainService28$.getMantaPayFirstConfig(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_27__._DEFAULT_MANTA_ZK_CHAIN));
    if (!config.isInitialSync) {
      return;
    }
    if ((_this$chainService29 = this.chainService) !== null && _this$chainService29 !== void 0 && (_this$chainService29$ = _this$chainService29.mantaPay) !== null && _this$chainService29$ !== void 0 && (_this$chainService29$2 = _this$chainService29$.privateWallet) !== null && _this$chainService29$2 !== void 0 && _this$chainService29$2.initialSyncIsFinished) {
      var _this$chainService30, _this$chainService30$, _this$chainService30$2;
      await ((_this$chainService30 = this.chainService) === null || _this$chainService30 === void 0 ? void 0 : (_this$chainService30$ = _this$chainService30.mantaPay) === null || _this$chainService30$ === void 0 ? void 0 : (_this$chainService30$2 = _this$chainService30$.privateWallet) === null || _this$chainService30$2 === void 0 ? void 0 : _this$chainService30$2.walletSync());
    } else {
      var _this$chainService31, _this$chainService31$, _this$chainService31$2;
      await ((_this$chainService31 = this.chainService) === null || _this$chainService31 === void 0 ? void 0 : (_this$chainService31$ = _this$chainService31.mantaPay) === null || _this$chainService31$ === void 0 ? void 0 : (_this$chainService31$2 = _this$chainService31$.privateWallet) === null || _this$chainService31$2 === void 0 ? void 0 : _this$chainService31$2.initialWalletSync());
    }
  }
  async getMantaPayZkBalance(address, tokenInfo) {
    var _this$chainService32, _this$chainService32$, _this$chainService32$2;
    const bnAssetId = new (_polkadot_util__WEBPACK_IMPORTED_MODULE_39___default())((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getTokenOnChainAssetId)(tokenInfo));
    const balance = await ((_this$chainService32 = this.chainService) === null || _this$chainService32 === void 0 ? void 0 : (_this$chainService32$ = _this$chainService32.mantaPay) === null || _this$chainService32$ === void 0 ? void 0 : (_this$chainService32$2 = _this$chainService32$.privateWallet) === null || _this$chainService32$2 === void 0 ? void 0 : _this$chainService32$2.getZkBalance(bnAssetId));
    return {
      decimals: tokenInfo.decimals || 0,
      symbol: tokenInfo.symbol,
      value: (balance === null || balance === void 0 ? void 0 : balance.toString()) || '0'
    };
  }
  subscribeMantaPaySyncState() {
    var _this$chainService33, _this$chainService34, _this$chainService34$;
    if (!((_this$chainService33 = this.chainService) !== null && _this$chainService33 !== void 0 && _this$chainService33.mantaPay)) {
      return new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
    }
    return (_this$chainService34 = this.chainService) === null || _this$chainService34 === void 0 ? void 0 : (_this$chainService34$ = _this$chainService34.mantaPay) === null || _this$chainService34$ === void 0 ? void 0 : _this$chainService34$.subscribeSyncState();
  }

  // Metadata
  async findMetadata(hash) {
    const metadata = await this.chainService.getMetadataByHash(hash);
    return {
      metadata: (metadata === null || metadata === void 0 ? void 0 : metadata.hexValue) || '',
      specVersion: parseInt((metadata === null || metadata === void 0 ? void 0 : metadata.specVersion) || '0')
    };
  }
}
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "../extension-base/src/koni/background/handlers/Tabs.ts":
/*!**************************************************************!*\
  !*** ../extension-base/src/koni/background/handlers/Tabs.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "chainPatrolCheckUrl": () => (/* binding */ chainPatrolCheckUrl),
/* harmony export */   "default": () => (/* binding */ KoniTabs)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/EvmProviderError */ "../extension-base/src/background/errors/EvmProviderError.ts");
/* harmony import */ var _subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/helpers */ "../extension-base/src/background/handlers/helpers.ts");
/* harmony import */ var _subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/subscriptions */ "../extension-base/src/background/handlers/subscriptions.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_background_RequestBytesSign__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/background/RequestBytesSign */ "../extension-base/src/background/RequestBytesSign.ts");
/* harmony import */ var _subwallet_extension_base_background_RequestExtrinsicSign__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/background/RequestExtrinsicSign */ "../extension-base/src/background/RequestExtrinsicSign.ts");
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/types */ "../extension-base/src/services/chain-service/handler/types.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/setting-service/constants */ "../extension-base/src/services/setting-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/canDerive.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/index.js");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! web3 */ "../../node_modules/web3/dist/web3.min.js");
/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(web3__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _polkadot_phishing__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @polkadot/phishing */ "../../node_modules/@polkadot/phishing/bundle.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/assert.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/is/number.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



















function transformAccountsV2(accounts, anyType = false, authInfo, accountAuthType) {
  const accountSelected = authInfo ? authInfo.isAllowed ? Object.keys(authInfo.isAllowedMap).filter(address => authInfo.isAllowedMap[address]) : [] : [];
  let authTypeFilter = ({
    type
  }) => true;
  if (accountAuthType === 'substrate') {
    authTypeFilter = ({
      type
    }) => type !== 'ethereum';
  } else if (accountAuthType === 'evm') {
    authTypeFilter = ({
      type
    }) => type === 'ethereum';
  }
  return Object.values(accounts).filter(({
    json: {
      meta: {
        isHidden
      }
    }
  }) => !isHidden).filter(({
    type
  }) => anyType ? true : (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.canDerive)(type)).filter(authTypeFilter).filter(({
    json: {
      address
    }
  }) => accountSelected.includes(address)).sort((a, b) => (a.json.meta.whenCreated || 0) - (b.json.meta.whenCreated || 0)).map(({
    json: {
      address,
      meta: {
        genesisHash,
        name
      }
    },
    type
  }) => ({
    address,
    genesisHash,
    name,
    type
  }));
}
// check if a URL is blocked
const chainPatrolCheckUrl = async url => {
  const response = await fetch('https://app.chainpatrol.io/api/v2/asset/check', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-API-KEY': 'e5e88cd0-7994-4667-9071-bab849c2ba71'
    },
    body: JSON.stringify({
      type: 'URL',
      content: url
    })
  });
  const data = await response.json();
  return data.status === 'BLOCKED';
};
class KoniTabs {
  #accountSubs = {};
  #koniState;
  evmEventEmitterMap = {};
  #chainPatrolService = _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_CHAIN_PATROL_ENABLE;
  #passPhishing = {};
  constructor(koniState) {
    this.#koniState = koniState;
    const updateChainPatrolService = rs => {
      this.#chainPatrolService = rs.enableChainPatrol;
    };
    this.#koniState.settingService.getSettings(updateChainPatrolService);
    this.#koniState.settingService.getSubject().subscribe({
      next: updateChainPatrolService
    });
    const updatePassPhishing = rs => {
      this.#passPhishing = rs;
    };
    this.#koniState.settingService.getPassPhishingList(updatePassPhishing);
    this.#koniState.settingService.passPhishingSubject().subscribe({
      next: updatePassPhishing
    });
  }

  /// Clone from Polkadot.js
  getSigningPair(address) {
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_4__["default"].getPair(address);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_5__.assert)(pair, (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)('Unable to find account'));
    return pair;
  }
  async bytesSign(url, request) {
    const address = request.address;
    const pair = this.getSigningPair(address);
    const authInfo = await this.getAuthInfo(url);
    if (!authInfo || !authInfo.isAllowed || !authInfo.isAllowedMap[pair.address]) {
      throw new Error('Account {{address}} not in allowed list'.replace('{{address}}', address));
    }
    return this.#koniState.sign(url, new _subwallet_extension_base_background_RequestBytesSign__WEBPACK_IMPORTED_MODULE_6__["default"](request), {
      address,
      ...pair.meta
    });
  }
  async extrinsicSign(url, request) {
    const address = request.address;
    const pair = this.getSigningPair(address);
    const authInfo = await this.getAuthInfo(url);
    if (!authInfo || !authInfo.isAllowed || !authInfo.isAllowedMap[pair.address]) {
      throw new Error('Account {{address}} not in allowed list'.replace('{{address}}', address));
    }
    return this.#koniState.sign(url, new _subwallet_extension_base_background_RequestExtrinsicSign__WEBPACK_IMPORTED_MODULE_7__["default"](request), {
      address,
      ...pair.meta
    });
  }
  metadataProvide(url, request) {
    return this.#koniState.injectMetadata(url, request);
  }

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  metadataList(url) {
    return this.#koniState.knownMetadata.map(({
      genesisHash,
      specVersion
    }) => ({
      genesisHash,
      specVersion
    }));
  }
  rpcListProviders() {
    return this.#koniState.rpcListProviders();
  }
  rpcSend(request, port) {
    return this.#koniState.rpcSend(request, port);
  }
  rpcStartProvider(key, port) {
    return this.#koniState.rpcStartProvider(key, port);
  }
  async rpcSubscribe(request, id, port) {
    const innerCb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__.createSubscription)(id, port);
    const cb = (_error, data) => innerCb(data);
    const subscriptionId = await this.#koniState.rpcSubscribe(request, cb, port);
    port.onDisconnect.addListener(() => {
      (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__.unsubscribe)(id);
      (0,_subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_9__.withErrorLog)(() => this.rpcUnsubscribe({
        ...request,
        subscriptionId
      }, port));
    });
    return true;
  }
  rpcSubscribeConnected(request, id, port) {
    const innerCb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__.createSubscription)(id, port);
    const cb = (_error, data) => innerCb(data);
    this.#koniState.rpcSubscribeConnected(request, cb, port);
    port.onDisconnect.addListener(() => {
      (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__.unsubscribe)(id);
    });
    return Promise.resolve(true);
  }
  async rpcUnsubscribe(request, port) {
    return this.#koniState.rpcUnsubscribe(request, port);
  }
  redirectPhishingLanding(phishingWebsite) {
    const nonFragment = phishingWebsite.split('#')[0];
    const encodedWebsite = encodeURIComponent(nonFragment);
    const url = `${chrome.extension.getURL('index.html')}#${_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_10__.PHISHING_PAGE_REDIRECT}/${encodedWebsite}`;
    chrome.tabs.query({
      url: nonFragment
    }, tabs => {
      tabs.map(({
        id
      }) => id).filter(id => (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_11__.isNumber)(id)).forEach(id => (0,_subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_9__.withErrorLog)(() => chrome.tabs.update(id, {
        url
      })));
    });
  }
  checkPassList(_url) {
    const url = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_12__.stripUrl)(_url);
    const result = this.#passPhishing[url];
    return result ? !result.pass : true;
  }
  async checkPhishing(url) {
    const isInDenyList = await (0,_polkadot_phishing__WEBPACK_IMPORTED_MODULE_13__.checkIfDenied)(url);
    if (isInDenyList) {
      return this.checkPassList(url);
    }
    if (this.#chainPatrolService) {
      const isInChainPatrolDenyList = await chainPatrolCheckUrl(url);
      if (isInChainPatrolDenyList) {
        return this.checkPassList(url);
      }
    }
    return false;
  }
  async redirectIfPhishing(url) {
    const result = await this.checkPhishing(url);
    if (result) {
      this.redirectPhishingLanding(url);
    }
    return result;
  }

  ///

  cancelSubscription(id) {
    return this.#koniState.cancelSubscription(id);
  }
  createUnsubscriptionHandle(id, unsubscribe) {
    this.#koniState.createUnsubscriptionHandle(id, unsubscribe);
  }
  async getAuthInfo(url, fromList) {
    const authList = fromList || (await this.#koniState.getAuthList());
    const shortenUrl = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_12__.stripUrl)(url);
    return authList[shortenUrl];
  }
  async accountsListV2(url, {
    accountAuthType,
    anyType
  }) {
    const authInfo = await this.getAuthInfo(url);
    return transformAccountsV2(this.#koniState.keyringService.accounts, anyType, authInfo, accountAuthType);
  }
  accountsSubscribeV2(url, {
    accountAuthType
  }, id, port) {
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__.createSubscription)(id, port);
    const authInfoSubject = this.#koniState.requestService.subscribeAuthorizeUrlSubject;

    // Update unsubscribe from @polkadot/extension-base
    this.#accountSubs[id] = {
      subscription: authInfoSubject.subscribe(infos => {
        this.getAuthInfo(url, infos).then(authInfo => {
          const accounts = this.#koniState.keyringService.accounts;
          return cb(transformAccountsV2(accounts, false, authInfo, accountAuthType));
        }).catch(console.error);
      }),
      url
    };
    port.onDisconnect.addListener(() => {
      this.accountsUnsubscribe(url, {
        id
      });
    });
    return id;
  }
  accountsUnsubscribe(url, {
    id
  }) {
    const sub = this.#accountSubs[id];
    if (!sub || sub.url !== url) {
      return false;
    }
    delete this.#accountSubs[id];
    (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__.unsubscribe)(id);
    sub.subscription.unsubscribe();
    return true;
  }
  authorizeV2(url, request) {
    if (request.accountAuthType === 'evm') {
      return new Promise((resolve, reject) => {
        this.#koniState.authorizeUrlV2(url, request).then(resolve).catch(e => {
          reject(new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.USER_REJECTED_REQUEST));
        });
      });
    } else {
      return this.#koniState.authorizeUrlV2(url, request);
    }
  }
  async getEvmCurrentAccount(url, getAll = false) {
    return await new Promise(resolve => {
      this.getAuthInfo(url).then(authInfo => {
        const allAccounts = this.#koniState.keyringService.accounts;
        const accountList = transformAccountsV2(allAccounts, false, authInfo, 'evm').map(a => a.address);
        let accounts = [];
        const address = this.#koniState.keyringService.currentAccount.address;
        if (address === _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_16__.ALL_ACCOUNT_KEY || !accountList.includes(address) || getAll) {
          accounts = accountList;
        } else if (address && accountList.includes(address)) {
          accounts = [address];
        }
        resolve(accounts);
      }).catch(console.error);
    });
  }
  async getEvmState(url) {
    let currentChain;
    let autoActiveChain = false;
    if (url) {
      const authInfo = await this.getAuthInfo(url);
      if (authInfo !== null && authInfo !== void 0 && authInfo.currentEvmNetworkKey) {
        currentChain = authInfo === null || authInfo === void 0 ? void 0 : authInfo.currentEvmNetworkKey;
      }
      if (authInfo !== null && authInfo !== void 0 && authInfo.isAllowed) {
        autoActiveChain = true;
      }
    }
    const currentEvmNetwork = this.#koniState.requestService.getDAppChainInfo({
      autoActive: autoActiveChain,
      accessType: 'evm',
      defaultChain: currentChain,
      url
    });
    if (currentEvmNetwork) {
      const {
        evmInfo,
        slug
      } = currentEvmNetwork;
      const evmApi = this.#koniState.getEvmApi(slug);
      const web3 = evmApi === null || evmApi === void 0 ? void 0 : evmApi.api;
      if ((web3 === null || web3 === void 0 ? void 0 : web3.currentProvider) instanceof (web3__WEBPACK_IMPORTED_MODULE_1___default().providers.WebsocketProvider)) {
        if (!web3.currentProvider.connected) {
          console.log(`${slug} is disconnected, trying to connect...`);
          this.#koniState.refreshWeb3Api(slug);
          let checkingNum = 0;
          const poll = resolve => {
            checkingNum += 1;
            if (web3.currentProvider.connected) {
              console.log(`${slug} is connected.`);
              resolve(true);
            } else {
              console.log(`Connecting to network [${slug}]`);
              if (checkingNum < 10) {
                setTimeout(() => poll(resolve), 900);
              } else {
                console.log(`Max retry, stop checking [${slug}]`);
                resolve(false);
              }
            }
          };
          await new Promise(poll);
        }
      }
      return {
        networkKey: slug,
        chainId: `0x${((evmInfo === null || evmInfo === void 0 ? void 0 : evmInfo.evmChainId) || 0).toString(16)}`,
        web3
      };
    } else {
      return {};
    }
  }
  async getEvmPermission(url, id) {
    const accounts = await this.getEvmCurrentAccount(url, true);
    return [{
      id: id,
      invoker: url,
      parentCapability: 'eth_accounts',
      caveats: [{
        type: 'restrictReturnedAccounts',
        value: accounts
      }],
      date: new Date().getTime()
    }];
  }
  async switchEvmChain(id, url, {
    params
  }) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
    const chainId = params[0].chainId;
    const evmState = await this.getEvmState(url);
    if (evmState.chainId === chainId) {
      return null;
    }
    const [networkKey] = this.#koniState.findNetworkKeyByChainId(parseInt(chainId, 16));
    if (networkKey) {
      await this.#koniState.switchEvmNetworkByUrl((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_12__.stripUrl)(url), networkKey);
    } else {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INVALID_PARAMS, 'This network is currently not supported');
    }
    return null;
  }
  async addEvmToken(id, url, {
    params
  }) {
    var _input$type, _input$options, _input$options2, _input$options3, _input$options4, _input$options5;
    const input = params;
    const _tokenType = (input === null || input === void 0 ? void 0 : (_input$type = input.type) === null || _input$type === void 0 ? void 0 : _input$type.toLowerCase()) || '';
    if (_tokenType !== 'erc20' && _tokenType !== 'erc721') {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INVALID_PARAMS, 'Assets type {{tokenType}} is not supported'.replace('{{tokenType}}', _tokenType));
    }
    if (!(input !== null && input !== void 0 && (_input$options = input.options) !== null && _input$options !== void 0 && _input$options.address) || !(input !== null && input !== void 0 && (_input$options2 = input.options) !== null && _input$options2 !== void 0 && _input$options2.symbol)) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INVALID_PARAMS, 'Unable to get contract address and token symbol');
    }
    const evmState = await this.getEvmState(url);
    const chain = evmState.networkKey;
    if (!chain) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INTERNAL_ERROR, 'The network on dApp is not supported in wallet. Please manually add the network to wallet');
    }
    const tokenType = _tokenType === 'erc20' ? _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_17__._AssetType.ERC20 : _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_17__._AssetType.ERC721;
    const tokenInfo = {
      slug: '',
      type: tokenType,
      name: (input === null || input === void 0 ? void 0 : (_input$options3 = input.options) === null || _input$options3 === void 0 ? void 0 : _input$options3.symbol) || '',
      contractAddress: input.options.address,
      symbol: (input === null || input === void 0 ? void 0 : (_input$options4 = input.options) === null || _input$options4 === void 0 ? void 0 : _input$options4.symbol) || '',
      decimals: (input === null || input === void 0 ? void 0 : (_input$options5 = input.options) === null || _input$options5 === void 0 ? void 0 : _input$options5.decimals) || 0,
      originChain: chain,
      contractError: false,
      validated: false
    };
    this.#koniState.validateCustomAsset({
      type: tokenType,
      contractAddress: input.options.address,
      originChain: chain
    }).then(validate => {
      if (validate.contractError) {
        tokenInfo.contractError = true;
      } else {
        tokenInfo.slug = validate === null || validate === void 0 ? void 0 : validate.existedSlug;
        tokenInfo.name = validate.name || tokenInfo.name;
        tokenInfo.symbol = validate.symbol;
        tokenInfo.decimals = validate.decimals;
      }
    }).catch(() => {
      tokenInfo.contractError = true;
    }).finally(() => {
      tokenInfo.validated = true;
      this.#koniState.requestService.updateConfirmation(id, 'addTokenRequest', tokenInfo);
    });

    // Below code is comment because we will handle exited token in the ui-view
    // if (validate.isExist) {
    //   throw new EvmProviderError(EvmProviderErrorType.INTERNAL_ERROR, 'Current token is existed');
    // } else

    return await this.#koniState.addTokenConfirm(id, url, tokenInfo);
  }
  async addEvmChain(id, url, {
    params
  }) {
    const input = params;
    if (input && input.length > 0) {
      const {
        blockExplorerUrls,
        chainId,
        chainName,
        nativeCurrency: {
          decimals,
          symbol
        },
        rpcUrls
      } = input[0];
      if (chainId) {
        const chainIdNum = parseInt(chainId, 16);
        const [existedNetworkSlug, existedChainInfo] = this.#koniState.findNetworkKeyByChainId(chainIdNum);
        if (existedNetworkSlug && existedChainInfo && existedChainInfo !== null && existedChainInfo !== void 0 && existedChainInfo.evmInfo) {
          return await this.switchEvmChain(id, url, {
            method: 'wallet_switchEthereumChain',
            params: [{
              chainId
            }]
          });
          // const evmInfo = existedChainInfo.evmInfo;
          // const substrateInfo = existedChainInfo.substrateInfo;
          // const chainState = this.#koniState.getChainStateByKey(existedNetworkSlug);
          //
          // return await this.#koniState.addNetworkConfirm(id, url, {
          //   mode: 'update',
          //   chainSpec: {
          //     evmChainId: evmInfo.evmChainId,
          //     decimals: evmInfo.decimals,
          //     existentialDeposit: evmInfo.existentialDeposit,
          //     genesisHash: substrateInfo?.genesisHash || '',
          //     paraId: substrateInfo?.paraId || null,
          //     addressPrefix: substrateInfo?.addressPrefix || 0
          //   },
          //   chainEditInfo: {
          //     blockExplorer: blockExplorerUrls?.[0],
          //     slug: existedNetworkSlug,
          //     currentProvider: chainState.currentProvider,
          //     providers: existedChainInfo.providers,
          //     symbol: evmInfo.symbol,
          //     chainType: 'EVM',
          //     name: existedChainInfo.name
          //   }
          // });
        } else if (rpcUrls && chainName) {
          const filteredUrls = rpcUrls.filter(targetString => {
            let url;
            try {
              url = new URL(targetString);
            } catch (_) {
              return false;
            }
            return url.protocol === 'http:' || url.protocol === 'https:';
          });
          if (!filteredUrls.length) {
            throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INTERNAL_ERROR, 'Currently support WSS provider for Substrate networks and HTTP provider for EVM network');
          }
          const provider = filteredUrls[0];
          const chainInfo = {
            existentialDeposit: '0',
            genesisHash: '',
            success: true,
            addressPrefix: '',
            evmChainId: chainIdNum,
            decimals: decimals,
            symbol: symbol,
            paraId: null,
            name: chainName
          };
          const newProviderKey = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_18__._generateCustomProviderKey)(0);
          const networkData = {
            mode: 'insert',
            chainSpec: {
              evmChainId: chainInfo.evmChainId,
              decimals: chainInfo.decimals,
              existentialDeposit: chainInfo.existentialDeposit,
              genesisHash: chainInfo.genesisHash,
              paraId: chainInfo.paraId,
              addressPrefix: chainInfo.addressPrefix ? parseInt(chainInfo.addressPrefix) : 0
            },
            chainEditInfo: {
              blockExplorer: blockExplorerUrls === null || blockExplorerUrls === void 0 ? void 0 : blockExplorerUrls[0],
              slug: '',
              currentProvider: newProviderKey,
              providers: {
                [newProviderKey]: provider
              },
              symbol: chainInfo.symbol,
              chainType: 'EVM',
              name: chainInfo.name
            },
            unconfirmed: true
          };
          this.#koniState.validateCustomChain(provider).then(res => {
            if (!res.success) {
              networkData.providerError = res.error;
            } else {
              networkData.chainSpec = {
                evmChainId: res.evmChainId,
                decimals: res.decimals,
                existentialDeposit: res.existentialDeposit,
                genesisHash: res.genesisHash,
                paraId: res.paraId,
                addressPrefix: res.addressPrefix ? parseInt(res.addressPrefix) : 0
              };
              networkData.chainEditInfo.symbol = res.symbol;
              networkData.chainEditInfo.name = res.name;
            }
          }).catch(() => {
            networkData.providerError = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_19__._CHAIN_VALIDATION_ERROR.NONE;
          }).finally(() => {
            networkData.unconfirmed = false;
            this.#koniState.requestService.updateConfirmation(id, 'addNetworkRequest', networkData);
          });
          return await this.#koniState.addNetworkConfirm(id, url, networkData);
        } else {
          throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INVALID_PARAMS, 'Invalid provider');
        }
      }
    }
    return null;
  }
  async getEvmCurrentChainId(url) {
    const evmState = await this.getEvmState(url);
    return evmState.chainId || '0x0';
  }
  async evmSubscribeEvents(url, id, port) {
    // This method will be called after DApp request connect to extension
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__.createSubscription)(id, port);
    let isConnected = false;
    const emitEvent = (eventName, payload) => {
      // eslint-disable-next-line node/no-callback-literal
      cb({
        type: eventName,
        payload: payload
      });
    };

    // Detect accounts changed
    let currentAccountList = await this.getEvmCurrentAccount(url);
    const onCurrentAccountChanged = async () => {
      const newAccountList = await this.getEvmCurrentAccount(url);

      // Compare to void looping reload
      if (JSON.stringify(currentAccountList) !== JSON.stringify(newAccountList)) {
        // eslint-disable-next-line node/no-callback-literal
        emitEvent('accountsChanged', newAccountList);
        currentAccountList = newAccountList;
      }
    };
    const accountListSubscription = this.#koniState.keyringService.currentAccountSubject.subscribe(() => {
      onCurrentAccountChanged().catch(console.error);
    });

    // Detect network chain
    const evmState = await this.getEvmState(url);
    let currentChainId = evmState.chainId;
    const _onAuthChanged = async () => {
      // Detect network
      const {
        chainId
      } = await this.getEvmState(url);
      if (chainId !== currentChainId) {
        emitEvent('chainChanged', chainId);
        currentChainId = chainId;
      }

      // Detect account
      const newAccountList = await this.getEvmCurrentAccount(url);

      // Compare to void looping reload
      if (JSON.stringify(currentAccountList) !== JSON.stringify(newAccountList)) {
        // eslint-disable-next-line node/no-callback-literal
        emitEvent('accountsChanged', newAccountList);
        currentAccountList = newAccountList;
      }
    };
    const authUrlSubscription = this.#koniState.subscribeEvmChainChange().subscribe(rs => {
      _onAuthChanged().catch(console.error);
    });

    // Detect network connection
    const networkCheck = () => {
      this.getEvmState(url).then(evmState => {
        var _evmState$web;
        (_evmState$web = evmState.web3) === null || _evmState$web === void 0 ? void 0 : _evmState$web.eth.net.isListening().then(connecting => {
          if (connecting && !isConnected) {
            emitEvent('connect', {
              chainId: evmState.chainId
            });
          } else if (!connecting && isConnected) {
            emitEvent('disconnect', new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.CHAIN_DISCONNECTED));
          }
          isConnected = connecting;
        }).catch(console.error);
      }).catch(console.error);
    };
    const networkCheckInterval = setInterval(networkCheck, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_16__.CRON_GET_API_MAP_STATUS);
    const provider = await this.getEvmProvider(url);
    const eventMap = {};
    eventMap.data = ({
      method,
      params
    }) => {
      emitEvent('message', {
        type: method,
        data: params
      });
    };
    eventMap.error = rs => {
      emitEvent('error', rs);
    };
    Object.entries(eventMap).forEach(([event, callback]) => {
      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
      (provider === null || provider === void 0 ? void 0 : provider.on) && (provider === null || provider === void 0 ? void 0 : provider.on(event, callback));
    });

    // Add event emitter
    if (!this.evmEventEmitterMap[url]) {
      this.evmEventEmitterMap[url] = {};
    }
    this.evmEventEmitterMap[url][id] = emitEvent;
    this.createUnsubscriptionHandle(id, () => {
      if (this.evmEventEmitterMap[url][id]) {
        delete this.evmEventEmitterMap[url][id];
      }
      Object.entries(eventMap).forEach(([event, callback]) => {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
        (provider === null || provider === void 0 ? void 0 : provider.removeListener) && (provider === null || provider === void 0 ? void 0 : provider.removeListener(event, callback));
      });
      accountListSubscription.unsubscribe();
      authUrlSubscription.unsubscribe();
      clearInterval(networkCheckInterval);
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return true;
  }
  checkAndHandleProviderStatus(provider) {
    if ((!provider || !(provider !== null && provider !== void 0 && provider.connected)) && provider !== null && provider !== void 0 && provider.supportsSubscriptions()) {
      // excludes HttpProvider
      Object.values(this.evmEventEmitterMap).forEach(m => {
        Object.values(m).forEach(emitter => {
          emitter('disconnect', new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.CHAIN_DISCONNECTED));
        });
      });
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.CHAIN_DISCONNECTED);
    }
  }
  async getEvmProvider(url) {
    var _evmState$web2;
    const evmState = await this.getEvmState(url);
    let provider = (_evmState$web2 = evmState.web3) === null || _evmState$web2 === void 0 ? void 0 : _evmState$web2.currentProvider;
    if (!provider) {
      var _evmState$web3;
      await this.getEvmCurrentChainId(url);
      provider = (_evmState$web3 = evmState.web3) === null || _evmState$web3 === void 0 ? void 0 : _evmState$web3.currentProvider;
    }
    return provider;
  }
  async performWeb3Method(id, url, {
    method,
    params
  }, callback) {
    const provider = await this.getEvmProvider(url);
    this.checkAndHandleProviderStatus(provider);
    return new Promise((resolve, reject) => {
      provider === null || provider === void 0 ? void 0 : provider.send({
        jsonrpc: '2.0',
        method: method,
        params: params,
        id
      }, (error, result) => {
        const err = (result === null || result === void 0 ? void 0 : result.error) || error;
        if (err) {
          reject(err);
        } else {
          const rs = result === null || result === void 0 ? void 0 : result.result;
          callback && callback(rs);
          resolve(rs);
        }
      });
    });
  }
  async canUseAccount(address, url) {
    const allowedAccounts = await this.getEvmCurrentAccount(url, true);
    return !!allowedAccounts.find(acc => acc.toLowerCase() === address.toLowerCase());
  }
  async evmSign(id, url, {
    method,
    params
  }) {
    const allowedAccounts = await this.getEvmCurrentAccount(url, true);
    const signResult = await this.#koniState.evmSign(id, url, method, params, allowedAccounts);
    if (signResult) {
      return signResult;
    } else {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INVALID_PARAMS, 'Failed to sign message');
    }
  }
  async evmSendTransaction(id, url, {
    params
  }) {
    const transactionParams = params[0];
    const canUseAccount = transactionParams.from && this.canUseAccount(transactionParams.from, url);
    const evmState = await this.getEvmState(url);
    const networkKey = evmState.networkKey;
    if (!canUseAccount) {
      throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)('You have rescinded allowance for this account in wallet'));
    }
    if (!networkKey) {
      throw new Error('Network unavailable. Please switch network or manually add network to wallet');
    }
    const allowedAccounts = await this.getEvmCurrentAccount(url, true);
    const transactionHash = await this.#koniState.evmSendTransaction(id, url, networkKey, allowedAccounts, transactionParams);
    if (!transactionHash) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.USER_REJECTED_REQUEST);
    }
    return transactionHash;
  }
  async handleEvmRequest(id, url, request) {
    const {
      method
    } = request;
    try {
      switch (method) {
        case 'eth_chainId':
          return await this.getEvmCurrentChainId(url);
        case 'net_version':
          return parseInt(await this.getEvmCurrentChainId(url), 16);
        case 'eth_accounts':
          return await this.getEvmCurrentAccount(url);
        case 'eth_sendTransaction':
          return await this.evmSendTransaction(id, url, request);
        case 'eth_sign':
          return await this.evmSign(id, url, request);
        case 'personal_sign':
          return await this.evmSign(id, url, request);
        case 'eth_signTypedData':
          return await this.evmSign(id, url, request);
        case 'eth_signTypedData_v1':
          return await this.evmSign(id, url, request);
        case 'eth_signTypedData_v3':
          return await this.evmSign(id, url, request);
        case 'eth_signTypedData_v4':
          return await this.evmSign(id, url, request);
        case 'wallet_requestPermissions':
          await this.authorizeV2(url, {
            origin: '',
            accountAuthType: 'evm',
            reConfirm: true
          });
          return await this.getEvmPermission(url, id);
        case 'wallet_getPermissions':
          return await this.getEvmPermission(url, id);
        case 'wallet_addEthereumChain':
          return await this.addEvmChain(id, url, request);
        case 'wallet_switchEthereumChain':
          return await this.switchEvmChain(id, url, request);
        case 'wallet_watchAsset':
          return await this.addEvmToken(id, url, request);
        default:
          return this.performWeb3Method(id, url, request);
      }
    } catch (e) {
      // @ts-ignore
      if (e.code) {
        throw e;
      } else {
        console.error(e);
        throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INTERNAL_ERROR, e === null || e === void 0 ? void 0 : e.toString());
      }
    }
  }
  async handleEvmSend(id, url, port, request) {
    var _evmState$web4;
    const cb = (0,_subwallet_extension_base_background_handlers_subscriptions__WEBPACK_IMPORTED_MODULE_8__.createSubscription)(id, port);
    const evmState = await this.getEvmState(url);
    const provider = (_evmState$web4 = evmState.web3) === null || _evmState$web4 === void 0 ? void 0 : _evmState$web4.currentProvider;
    this.checkAndHandleProviderStatus(provider);
    provider.send(request, (error, result) => {
      // eslint-disable-next-line node/no-callback-literal
      cb({
        error,
        result
      });
      this.cancelSubscription(id);
    });
    port.onDisconnect.addListener(() => {
      this.cancelSubscription(id);
    });
    return true;
  }
  isEvmPublicRequest(type, request) {
    return type === 'evm(request)' && ['eth_chainId', 'net_version'].includes(request === null || request === void 0 ? void 0 : request.method);
  }
  async addPspToken(id, url, {
    genesisHash,
    tokenInfo: input
  }) {
    const _tokenType = input.type;
    if (_tokenType !== 'psp22' && _tokenType !== 'psp34') {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INVALID_PARAMS, 'Assets type {{tokenType}} is not supported'.replace('{{tokenType}}', _tokenType));
    }
    if (!input.address || !input.symbol) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INVALID_PARAMS, 'Unable to get contract address and token symbol');
    }
    const [chain] = this.#koniState.findNetworkKeyByGenesisHash(genesisHash);
    if (!chain) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INTERNAL_ERROR, 'The network on dApp is not supported in wallet. Please manually add the network to wallet');
    }
    const state = this.#koniState.getChainStateByKey(chain);
    if (!state.active) {
      await this.#koniState.enableChain(chain, false);
      const api = this.#koniState.getSubstrateApi(chain);
      await api.isReady;
    }
    const tokenType = _tokenType === 'psp22' ? _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_17__._AssetType.PSP22 : _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_17__._AssetType.PSP34;
    const tokenInfo = {
      slug: '',
      type: tokenType,
      name: input.symbol || '',
      contractAddress: input.address,
      symbol: input.symbol || '',
      decimals: input.decimals || 0,
      originChain: chain,
      contractError: false,
      validated: false
    };
    this.#koniState.validateCustomAsset({
      type: tokenType,
      contractAddress: input.address,
      originChain: chain
    }).then(validate => {
      if (validate.contractError) {
        tokenInfo.contractError = true;
      } else {
        tokenInfo.slug = validate === null || validate === void 0 ? void 0 : validate.existedSlug;
        tokenInfo.name = validate.name || tokenInfo.name;
        tokenInfo.symbol = validate.symbol;
        tokenInfo.decimals = validate.decimals;
      }
    }).catch(() => {
      tokenInfo.contractError = true;
    }).finally(() => {
      tokenInfo.validated = true;
      this.#koniState.requestService.updateConfirmation(id, 'addTokenRequest', tokenInfo);
    });
    return await this.#koniState.addTokenConfirm(id, url, tokenInfo);
  }
  async handle(id, type, request, url, port) {
    if (type === 'pub(phishing.redirectIfDenied)') {
      return this.redirectIfPhishing(url);
    }
    if (type !== 'pub(authorize.tabV2)' && !this.isEvmPublicRequest(type, request)) {
      await this.#koniState.ensureUrlAuthorizedV2(url).catch(e => {
        if (type.startsWith('evm')) {
          throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_14__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_15__.EvmProviderErrorType.INTERNAL_ERROR, e.message);
        } else {
          throw e;
        }
      });
    }
    switch (type) {
      /// Clone from PolkadotJs
      case 'pub(bytes.sign)':
        return this.bytesSign(url, request);
      case 'pub(extrinsic.sign)':
        return this.extrinsicSign(url, request);
      case 'pub(metadata.list)':
        return this.metadataList(url);
      case 'pub(metadata.provide)':
        return this.metadataProvide(url, request);
      case 'pub(ping)':
        return Promise.resolve(true);
      case 'pub(rpc.listProviders)':
        return this.rpcListProviders();
      case 'pub(rpc.send)':
        return this.rpcSend(request, port);
      case 'pub(rpc.startProvider)':
        return this.rpcStartProvider(request, port);
      case 'pub(rpc.subscribe)':
        return this.rpcSubscribe(request, id, port);
      case 'pub(rpc.subscribeConnected)':
        return this.rpcSubscribeConnected(request, id, port);
      case 'pub(rpc.unsubscribe)':
        return this.rpcUnsubscribe(request, port);
      case 'pub(token.add)':
        return this.addPspToken(id, url, request);

      ///
      case 'pub(authorize.tabV2)':
        return this.authorizeV2(url, request);
      case 'pub(accounts.listV2)':
        return this.accountsListV2(url, request);
      case 'pub(accounts.subscribeV2)':
        return this.accountsSubscribeV2(url, request, id, port);
      case 'pub(accounts.unsubscribe)':
        return this.accountsUnsubscribe(url, request);
      case 'evm(events.subscribe)':
        return await this.evmSubscribeEvents(url, id, port);
      case 'evm(request)':
        return await this.handleEvmRequest(id, url, request);
      case 'evm(provider.send)':
        return await this.handleEvmSend(id, url, port, request);
      default:
        throw new Error(`Unable to handle message of type ${type}`);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/koni/background/handlers/index.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/koni/background/handlers/index.ts ***!
  \***************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ handlers),
/* harmony export */   "extension": () => (/* binding */ extension),
/* harmony export */   "mobile": () => (/* binding */ mobile),
/* harmony export */   "nftHandler": () => (/* binding */ nftHandler),
/* harmony export */   "state": () => (/* binding */ state),
/* harmony export */   "tabs": () => (/* binding */ tabs)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_nft__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/nft */ "../extension-base/src/koni/api/nft/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/koni/background/handlers/Extension */ "../extension-base/src/koni/background/handlers/Extension.ts");
/* harmony import */ var _subwallet_extension_base_koni_background_handlers_Mobile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/background/handlers/Mobile */ "../extension-base/src/koni/background/handlers/Mobile.ts");
/* harmony import */ var _subwallet_extension_base_koni_background_handlers_State__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/koni/background/handlers/State */ "../extension-base/src/koni/background/handlers/State.ts");
/* harmony import */ var _subwallet_extension_base_koni_background_handlers_Tabs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/background/handlers/Tabs */ "../extension-base/src/koni/background/handlers/Tabs.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/assert.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_subwallet_extension_base_koni_background_handlers_State__WEBPACK_IMPORTED_MODULE_0__]);
_subwallet_extension_base_koni_background_handlers_State__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0








// import Migration from '@subwallet/extension-base/koni/migration';

const state = new _subwallet_extension_base_koni_background_handlers_State__WEBPACK_IMPORTED_MODULE_0__["default"]();
const extension = new _subwallet_extension_base_koni_background_handlers_Extension__WEBPACK_IMPORTED_MODULE_1__["default"](state);
const tabs = new _subwallet_extension_base_koni_background_handlers_Tabs__WEBPACK_IMPORTED_MODULE_2__["default"](state);
const mobile = new _subwallet_extension_base_koni_background_handlers_Mobile__WEBPACK_IMPORTED_MODULE_3__["default"](state);
const nftHandler = new _subwallet_extension_base_koni_api_nft__WEBPACK_IMPORTED_MODULE_4__.NftHandler();

// Migration
// async function makeSureStateReady () {
//   const poll = (resolve: (value: unknown) => void) => {
//     if (state.isReady()) {
//       resolve(true);
//     } else {
//       console.log('Waiting for State is ready...');
//       setTimeout(() => poll(resolve), 400);
//     }
//   };
//
//   return new Promise(poll);
// }

// makeSureStateReady().then(() => {
//   const migration = new Migration(state);
//
//   migration.run().catch((err) => console.warn(err));
// }).catch((e) => console.warn(e));

function handlers({
  id,
  message,
  request
}, port, extensionPortName = _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_5__.PORT_EXTENSION) {
  const isMobile = port.name === _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_5__.PORT_MOBILE;
  const isExtension = port.name === extensionPortName;
  const sender = port.sender;
  const from = isExtension ? 'extension' : sender.tab && sender.tab.url || sender.url || '<unknown>';
  const source = `${from}: ${id}: ${message}`;

  // console.log(` [in] ${source}`); // :: ${JSON.stringify(request)}`);

  const promise = isMobile ? mobile.handle(id, message, request, port) : isExtension ? extension.handle(id, message, request, port) : tabs.handle(id, message, request, from, port);
  promise.then(response => {
    // console.log(`[out] ${source}`); // :: ${JSON.stringify(response)}`);

    // between the start and the end of the promise, the user may have closed
    // the tab, in which case port will be undefined
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_6__.assert)(port, 'Port has been disconnected');
    port.postMessage({
      id,
      response
    });
  }).catch(error => {
    console.error(error);
    console.log(`[err] ${source}:: ${error.message}`);

    // only send message back to port if it's still connected
    if (port) {
      port.postMessage({
        error: error.message,
        errorCode: error.code,
        errorData: error.data,
        id
      });
    }
  });
}
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "../extension-base/src/koni/background/subscription.ts":
/*!*************************************************************!*\
  !*** ../extension-base/src/koni/background/subscription.ts ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KoniSubscription": () => (/* binding */ KoniSubscription)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/dotsama/balance */ "../extension-base/src/koni/api/dotsama/balance.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_dotsama_crowdloan__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/dotsama/crowdloan */ "../extension-base/src/koni/api/dotsama/crowdloan.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking */ "../extension-base/src/koni/api/staking/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/bonding */ "../extension-base/src/koni/api/staking/bonding/index.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_staking_paraChain__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/staking/paraChain */ "../extension-base/src/koni/api/staking/paraChain.ts");
/* harmony import */ var _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/koni/background/handlers */ "../extension-base/src/koni/background/handlers/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_event_service_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/event-service/types */ "../extension-base/src/services/event-service/types.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/logger.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_4__, _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_6__]);
([_subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_4__, _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0











class KoniSubscription {
  subscriptionMap = {
    crowdloan: undefined,
    balance: undefined,
    stakingOnChain: undefined,
    essentialChainStakingMetadata: undefined
  };
  constructor(state, dbService) {
    this.dbService = dbService;
    this.state = state;
    this.logger = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_0__.logger)('Subscription');
  }
  getSubscriptionMap() {
    return this.subscriptionMap;
  }
  getSubscription(name) {
    return this.subscriptionMap[name];
  }
  updateSubscription(name, func) {
    const oldFunc = this.subscriptionMap[name];
    oldFunc && oldFunc();
    func && (this.subscriptionMap[name] = func);
  }
  stopAllSubscription() {
    if (this.subscriptionMap.balance) {
      this.subscriptionMap.balance();
      delete this.subscriptionMap.balance;
    }
    if (this.subscriptionMap.crowdloan) {
      this.subscriptionMap.crowdloan();
      delete this.subscriptionMap.crowdloan;
    }
    if (this.subscriptionMap.stakingOnChain) {
      this.subscriptionMap.stakingOnChain();
      delete this.subscriptionMap.stakingOnChain;
    }
  }
  async start() {
    var _this$state$keyringSe;
    await Promise.all([this.state.eventService.waitKeyringReady, this.state.eventService.waitAssetReady]);
    const currentAddress = (_this$state$keyringSe = this.state.keyringService.currentAccount) === null || _this$state$keyringSe === void 0 ? void 0 : _this$state$keyringSe.address;
    if (currentAddress) {
      this.subscribeBalancesAndCrowdloans(currentAddress, this.state.getChainInfoMap(), this.state.getChainStateMap(), this.state.getSubstrateApiMap(), this.state.getEvmApiMap());
      this.subscribeStakingOnChain(currentAddress, this.state.getSubstrateApiMap());
    }
    this.eventHandler = (events, eventTypes) => {
      var _serviceInfo$currentA;
      const serviceInfo = this.state.getServiceInfo();
      const needReload = eventTypes.some(eventType => _subwallet_extension_base_services_event_service_types__WEBPACK_IMPORTED_MODULE_1__.COMMON_RELOAD_EVENTS.includes(eventType));
      if (!needReload) {
        return;
      }
      const address = (_serviceInfo$currentA = serviceInfo.currentAccountInfo) === null || _serviceInfo$currentA === void 0 ? void 0 : _serviceInfo$currentA.address;
      if (!address) {
        return;
      }
      this.subscribeBalancesAndCrowdloans(address, serviceInfo.chainInfoMap, serviceInfo.chainStateMap, serviceInfo.chainApiMap.substrate, serviceInfo.chainApiMap.evm);
      this.subscribeStakingOnChain(address, serviceInfo.chainApiMap.substrate);
    };
    this.state.eventService.onLazy(this.eventHandler);
  }
  async stop() {
    if (this.eventHandler) {
      this.state.eventService.offLazy(this.eventHandler);
      this.eventHandler = undefined;
    }
    this.stopAllSubscription();
    return Promise.resolve();
  }
  subscribeBalancesAndCrowdloans(address, chainInfoMap, chainStateMap, substrateApiMap, web3ApiMap, onlyRunOnFirstTime) {
    this.state.handleSwitchAccount(address).then(() => {
      const addresses = this.state.getDecodedAddresses(address);
      if (!addresses.length) {
        return;
      }
      this.updateSubscription('balance', this.initBalanceSubscription(addresses, chainInfoMap, chainStateMap, substrateApiMap, web3ApiMap, onlyRunOnFirstTime));
      this.updateSubscription('crowdloan', this.initCrowdloanSubscription(addresses, substrateApiMap, onlyRunOnFirstTime));
    }).catch(err => this.logger.warn(err));
  }
  subscribeStakingOnChain(address, substrateApiMap, onlyRunOnFirstTime) {
    this.state.resetStaking(address);
    const addresses = this.state.getDecodedAddresses(address);
    if (!addresses.length) {
      return;
    }
    this.updateSubscription('stakingOnChain', this.initStakingOnChainSubscription(addresses, substrateApiMap, onlyRunOnFirstTime));
    this.updateSubscription('essentialChainStakingMetadata', this.initEssentialChainStakingMetadataSubscription(substrateApiMap, onlyRunOnFirstTime)); // TODO: might not need to re-subscribe on changing account
  }

  initStakingOnChainSubscription(addresses, substrateApiMap, onlyRunOnFirstTime) {
    const stakingCallback = (networkKey, rs) => {
      this.state.setStakingItem(networkKey, rs);
    };
    const nominatorStateCallback = nominatorMetadata => {
      this.state.updateStakingNominatorMetadata(nominatorMetadata);
    };
    const unsub = (0,_subwallet_extension_base_koni_api_staking__WEBPACK_IMPORTED_MODULE_2__.stakingOnChainApi)(addresses, substrateApiMap, this.state.getActiveChainInfoMap(), stakingCallback, nominatorStateCallback);
    if (onlyRunOnFirstTime) {
      unsub && unsub();
      return;
    }
    return () => {
      unsub && unsub();
    };
  }
  initEssentialChainStakingMetadataSubscription(substrateApiMap, onlyRunOnFirstTime) {
    const unsub = (0,_subwallet_extension_base_koni_api_staking_bonding__WEBPACK_IMPORTED_MODULE_3__.subscribeEssentialChainStakingMetadata)(substrateApiMap, this.state.getActiveChainInfoMap(), (networkKey, rs) => {
      this.state.updateChainStakingMetadata(rs, {
        era: rs.era,
        minStake: rs.minStake,
        maxValidatorPerNominator: rs.maxValidatorPerNominator,
        // temporary fix for Astar, there's no limit for now
        maxWithdrawalRequestPerValidator: rs.maxWithdrawalRequestPerValidator,
        // by default
        allowCancelUnstaking: rs.allowCancelUnstaking,
        unstakingPeriod: rs.unstakingPeriod,
        expectedReturn: rs.expectedReturn,
        inflation: rs.inflation
      });
    });
    if (onlyRunOnFirstTime) {
      unsub && unsub();
      return;
    }
    return () => {
      unsub && unsub();
    };
  }
  initBalanceSubscription(addresses, chainInfoMap, chainStateMap, substrateApiMap, evmApiMap, onlyRunOnFirstTime) {
    const filteredChainInfoMap = {};
    Object.values(chainStateMap).forEach(chainState => {
      if (chainState.active) {
        filteredChainInfoMap[chainState.slug] = chainInfoMap[chainState.slug];
      }
    });
    const unsub = (0,_subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_4__.subscribeBalance)(addresses, filteredChainInfoMap, substrateApiMap, evmApiMap, result => {
      this.state.setBalanceItem(result.tokenSlug, result);
    });
    const unsub2 = this.state.subscribeMantaPayBalance();
    if (onlyRunOnFirstTime) {
      unsub && unsub();
      unsub2 && unsub2();
      return;
    }
    return () => {
      unsub && unsub();
      unsub2 && unsub2();
    };
  }
  initCrowdloanSubscription(addresses, substrateApiMap, onlyRunOnFirstTime) {
    const subscriptionPromise = (0,_subwallet_extension_base_koni_api_dotsama_crowdloan__WEBPACK_IMPORTED_MODULE_5__.subscribeCrowdloan)(addresses, substrateApiMap, (networkKey, rs) => {
      this.state.setCrowdloanItem(networkKey, rs);
    }, this.state.getChainInfoMap());
    if (onlyRunOnFirstTime) {
      subscriptionPromise.then(unsub => unsub()).catch(this.logger.warn);
      return;
    }
    return () => {
      subscriptionPromise.then(unsub => unsub()).catch(this.logger.warn);
    };
  }
  subscribeNft(address, substrateApiMap, evmApiMap, smartContractNfts, chainInfoMap) {
    const addresses = this.state.getDecodedAddresses(address);
    if (!addresses.length) {
      return;
    }
    this.initNftSubscription(addresses, substrateApiMap, evmApiMap, smartContractNfts, chainInfoMap);
  }
  initNftSubscription(addresses, substrateApiMap, evmApiMap, smartContractNfts, chainInfoMap) {
    _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_6__.nftHandler.setChainInfoMap(chainInfoMap);
    _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_6__.nftHandler.setDotSamaApiMap(substrateApiMap);
    _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_6__.nftHandler.setWeb3ApiMap(evmApiMap);
    _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_6__.nftHandler.setAddresses(addresses);
    _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_6__.nftHandler.handleNfts(smartContractNfts, (...args) => this.state.updateNftData(...args), (...args) => this.state.setNftCollection(...args)).catch(this.logger.log);
  }
  async subscribeStakingReward(address) {
    const addresses = this.state.getDecodedAddresses(address);
    if (!addresses.length) {
      return;
    }
    const chainInfoMap = this.state.getChainInfoMap();
    const targetNetworkMap = {};
    Object.entries(chainInfoMap).forEach(([key, network]) => {
      const chainState = this.state.getChainStateByKey(key);
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._isChainEnabled)(chainState) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._isChainSupportSubstrateStaking)(network)) {
        targetNetworkMap[key] = network;
      }
    });
    await (0,_subwallet_extension_base_koni_api_staking__WEBPACK_IMPORTED_MODULE_2__.getNominationStakingRewardData)(addresses, targetNetworkMap, rewardItem => {
      this.state.updateStakingReward(rewardItem);
    });
  }
  async subscribeStakingRewardFastInterval(address) {
    const addresses = this.state.getDecodedAddresses(address);
    if (!addresses.length) {
      return;
    }
    const pooledStakingItems = await this.state.getPooledStakingRecordsByAddress(addresses);
    const pooledAddresses = [];
    pooledStakingItems.forEach(pooledItem => {
      if (!pooledAddresses.includes(pooledItem.address)) {
        pooledAddresses.push(pooledItem.address);
      }
    });
    const chainInfoMap = this.state.getChainInfoMap();
    const targetChainMap = {};
    Object.entries(chainInfoMap).forEach(([key, network]) => {
      const chainState = this.state.getChainStateByKey(key);
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._isChainEnabled)(chainState) && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._isChainSupportSubstrateStaking)(network)) {
        targetChainMap[key] = network;
      }
    });
    const activeNetworks = [];
    Object.keys(targetChainMap).forEach(key => {
      activeNetworks.push(key);
    });
    const updateState = result => {
      this.state.updateStakingReward(result);
    };
    await Promise.all([(0,_subwallet_extension_base_koni_api_staking__WEBPACK_IMPORTED_MODULE_2__.getPoolingStakingRewardData)(pooledAddresses, targetChainMap, this.state.getSubstrateApiMap(), updateState), (0,_subwallet_extension_base_koni_api_staking_paraChain__WEBPACK_IMPORTED_MODULE_8__.getAmplitudeUnclaimedStakingReward)(this.state.getSubstrateApiMap(), addresses, chainInfoMap, activeNetworks, updateState)]);
  }
  async reloadStaking() {
    var _this$state$keyringSe2;
    const currentAddress = (_this$state$keyringSe2 = this.state.keyringService.currentAccount) === null || _this$state$keyringSe2 === void 0 ? void 0 : _this$state$keyringSe2.address;
    this.subscribeStakingOnChain(currentAddress, this.state.getSubstrateApiMap());
    await (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_9__.waitTimeout)(1800);
  }
}
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "../extension-base/src/services/balance-service/index.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/services/balance-service/index.ts ***!
  \***************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BalanceService": () => (/* binding */ BalanceService)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_errors_BalanceError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/BalanceError */ "../extension-base/src/background/errors/BalanceError.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/dotsama/balance */ "../extension-base/src/koni/api/dotsama/balance.ts");
/* harmony import */ var _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/koni/background/handlers */ "../extension-base/src/koni/background/handlers/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_5__, _subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_6__]);
([_subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_5__, _subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0









class BalanceService {
  constructor(chainService) {
    this.chainService = chainService;

    // Todo: Load data from db to balanceSubject
    // Todo: Start  subscribe balance and data
    // Todo: Listen change and apply to balanceSubject
    // Todo: Active/Chain
    // Todo: Add/remove account
    // Todo: Add new account
    // Todo: Optimize get balance for single account and chain with cache
    // Todo: Move everything of fetching balance to this service
  }

  async subscribeTokenFreeBalance(address, chain, tokenSlug, callback) {
    const chainInfo = this.chainService.getChainInfoByKey(chain);
    const chainState = this.chainService.getChainStateByKey(chain);
    if (!chainInfo || !chainState || !chainState.active) {
      return Promise.reject(new _subwallet_extension_base_background_errors_BalanceError__WEBPACK_IMPORTED_MODULE_1__.BalanceError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.BalanceErrorType.NETWORK_ERROR, (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)('{{chain}} is inactive. Please enable network', {
        replace: {
          chain
        }
      })));
    }
    const tSlug = tokenSlug || (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getChainNativeTokenSlug)(chainInfo);
    const tokenInfo = this.chainService.getAssetBySlug(tSlug);
    if (!tokenInfo) {
      return Promise.reject(new _subwallet_extension_base_background_errors_BalanceError__WEBPACK_IMPORTED_MODULE_1__.BalanceError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.BalanceErrorType.TOKEN_ERROR, (0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)('Transfer is currently not available for this token: {{tSlug}}', {
        replace: {
          slug: tSlug
        }
      })));
    }
    return new Promise((resolve, reject) => {
      let hasError = true;
      const unsub = this.subscribeBalance([address], [chain], rs => {
        if (rs.tokenSlug === tSlug) {
          hasError = false;
          const balance = {
            value: rs.free,
            decimals: tokenInfo.decimals || 0,
            symbol: tokenInfo.symbol
          };
          if (callback) {
            callback(balance);
          } else {
            // Auto unsubscribe if no callback
            unsub();
          }
          resolve([unsub, balance]);
        }
      });
      setTimeout(() => {
        if (hasError) {
          unsub();
          reject(new Error((0,i18next__WEBPACK_IMPORTED_MODULE_0__.t)('Failed to get balance. Please check your internet connection or change your network endpoint')));
        }
      }, 9999);
    });
  }
  async getTokenFreeBalance(address, chain, tokenSlug) {
    const [, balance] = await this.subscribeTokenFreeBalance(address, chain, tokenSlug);
    return balance;
  }
  subscribeBalance(addresses, chains, callback) {
    const [substrateAddresses, evmAddresses] = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_4__.categoryAddresses)(addresses);
    const chainInfoMap = this.chainService.getChainInfoMap();
    const chainStateMap = this.chainService.getChainStateMap();
    const substrateApiMap = this.chainService.getSubstrateApiMap();
    const evmApiMap = this.chainService.getEvmApiMap();

    // Get data from chain or all chains
    const chainList = chains || Object.keys(chainInfoMap);
    // Filter active chain only
    const useChainInfos = chainList.filter(c => chainStateMap[c] && chainStateMap[c].active).map(c => chainInfoMap[c]);

    // Looping over each chain
    const unsubList = useChainInfos.map(async chainInfo => {
      const chainSlug = chainInfo.slug;
      const useAddresses = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isChainEvmCompatible)(chainInfo) ? evmAddresses : substrateAddresses;
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._isPureEvmChain)(chainInfo)) {
        const nativeTokenInfo = _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_5__.state.getNativeTokenInfo(chainSlug);
        return (0,_subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_6__.subscribeEVMBalance)(chainSlug, useAddresses, evmApiMap, callback, nativeTokenInfo);
      }
      if (!useAddresses || useAddresses.length === 0 || _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__._PURE_EVM_CHAINS.indexOf(chainSlug) > -1) {
        return undefined;
      }
      const networkAPI = await substrateApiMap[chainSlug].isReady;
      return (0,_subwallet_extension_base_koni_api_dotsama_balance__WEBPACK_IMPORTED_MODULE_6__.subscribeSubstrateBalance)(useAddresses, chainInfo, chainSlug, networkAPI, evmApiMap, callback);
    });
    return () => {
      unsubList.forEach(subProm => {
        subProm.then(unsub => {
          unsub && unsub();
        }).catch(console.error);
      });
    };
  }
}
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "../extension-base/src/services/base/types.ts":
/*!****************************************************!*\
  !*** ../extension-base/src/services/base/types.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ServiceStatus": () => (/* binding */ ServiceStatus)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0

// 'init' | 'started' | 'starting' | 'stopped' | 'stopping'

let ServiceStatus;
(function (ServiceStatus) {
  ServiceStatus["NOT_INITIALIZED"] = "not_initialized";
  ServiceStatus["INITIALIZING"] = "initializing";
  ServiceStatus["INITIALIZED"] = "initialized";
  ServiceStatus["STARTED"] = "started";
  ServiceStatus["STARTING"] = "starting";
  ServiceStatus["STOPPED"] = "stopped";
  ServiceStatus["STOPPING"] = "stopping";
})(ServiceStatus || (ServiceStatus = {}));

/***/ }),

/***/ "../extension-base/src/services/chain-service/custom-tokens/AssetLogoMap.ts":
/*!**********************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/custom-tokens/AssetLogoMap.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AssetLogoMap": () => (/* binding */ AssetLogoMap)
/* harmony export */ });
/* eslint-disable header/header */
const AssetLogoMap = {
  default: 'https://gfxvsstorage.blob.core.windows.net/gfxvscontainer/aigent-logo.png',
  // 'kusama-native-ksm': 'https://chain-list-assets.subwallet.app/assets/chain-assets/kusama-native-ksm.png',
  aigent: 'https://gfxvsstorage.blob.core.windows.net/gfxvscontainer/aigent-logo.png',
  'ethereum-native-eth': 'https://dev.sw-chain-list-assets.pages.dev/assets/chain-assets/ethereum-native-eth.png',
  'sora_substrate-native-xor': 'https://dev.sw-chain-list-assets.pages.dev/assets/chain-assets/sora_substrate-native-xor.png'
};

/***/ }),

/***/ "../extension-base/src/services/chain-service/custom-tokens/AssetRef.ts":
/*!******************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/custom-tokens/AssetRef.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AssetRefMap": () => (/* binding */ AssetRefMap)
/* harmony export */ });
/* eslint-disable header/header */
const AssetRefMap = {
  'aigent-NATIVE-AIGENT': {
    srcAsset: 'aigent-NATIVE-AIGENT',
    destAsset: 'aigent-LOCAL-xcAIGENT',
    srcChain: 'aigent',
    destChain: 'aigent',
    path: 'AIGENT'
  }
  // 'kusama-NATIVE-KSM___statemine-NATIVE-KSM': {
  //   srcAsset: 'kusama-NATIVE-KSM',
  //   destAsset: 'statemine-NATIVE-KSM',
  //   srcChain: 'kusama',
  //   destChain: 'statemine',
  //   path: 'XCM'
  // }
};

/***/ }),

/***/ "../extension-base/src/services/chain-service/custom-tokens/ChainAsset.ts":
/*!********************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/custom-tokens/ChainAsset.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ChainAssetMap": () => (/* binding */ ChainAssetMap)
/* harmony export */ });
/* eslint-disable header/header */
const ChainAssetMap = {
  // 'kusama-NATIVE-KSM': {
  //   originChain: 'kusama',
  //   slug: 'kusama-NATIVE-KSM',
  //   name: 'Kusama',
  //   symbol: 'KSM',
  //   decimals: 12,
  //   priceId: 'kusama',
  //   minAmount: '333333333',
  //   assetType: 'NATIVE',
  //   metadata: {
  //     multilocation: {
  //       parents: 0,
  //       interior: 'Here'
  //     }
  //   },
  //   multiChainAsset: 'KSM-Kusama',
  //   hasValue: true,
  //   icon: 'https://chain-list-assets.subwallet.app/assets/chain-assets/kusama-native-ksm.png'
  // },
  'aigent-NATIVE-AIGENT': {
    originChain: 'aigent',
    slug: 'aigent-NATIVE-AIGENT',
    name: 'AIGENT',
    symbol: 'AIGENT',
    decimals: 18,
    priceId: 'aigent',
    minAmount: '500',
    assetType: 'NATIVE',
    metadata: null,
    multiChainAsset: null,
    hasValue: true,
    icon: 'https://gfxvsstorage.blob.core.windows.net/gfxvscontainer/aigent-logo.png'
  }
};

/***/ }),

/***/ "../extension-base/src/services/chain-service/custom-tokens/ChainInfo.ts":
/*!*******************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/custom-tokens/ChainInfo.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ChainInfoMap": () => (/* binding */ ChainInfoMap)
/* harmony export */ });
/* eslint-disable header/header */
const ChainInfoMap = {
  // kusama: {
  //   slug: 'kusama',
  //   name: 'Kusama',
  //   isTestnet: false,
  //   chainStatus: 'ACTIVE',
  //   icon: 'https://chain-list-assets.subwallet.app/assets/chains/kusama.png',
  //   providers: {
  //     RadiumBlock: 'wss://kusama.public.curie.radiumblock.co/ws',
  //     LuckyFriday: 'wss://rpc-kusama.luckyfriday.io',
  //     Stakeworld: 'wss://ksm-rpc.stakeworld.io',
  //     'IBP-GeoDNS1': 'wss://rpc.ibp.network/kusama',
  //     'Light Client': 'light://substrate-connect/kusama'
  //   },
  //   evmInfo: null,
  //   substrateInfo: {
  //     relaySlug: null,
  //     paraId: null,
  //     genesisHash: '0xb0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe',
  //     addressPrefix: 2,
  //     chainType: 'RELAYCHAIN',
  //     crowdloanUrl: null,
  //     blockExplorer: 'https://kusama.subscan.io/',
  //     existentialDeposit: '333333333',
  //     symbol: 'KSM',
  //     decimals: 12,
  //     hasNativeNft: true,
  //     supportStaking: true,
  //     supportSmartContract: null,
  //     crowdloanParaId: null,
  //     crowdloanFunds: []
  //   },
  //   extraInfo: {
  //     subscanSlug: 'kusama',
  //     chainBalanceSlug: 'kusama'
  //   },
  //   bitcoinInfo: null,
  //   tonInfo: null
  // },
  aigent: {
    slug: 'aigent',
    name: 'AIGENT',
    isTestnet: false,
    chainStatus: 'ACTIVE',
    icon: 'https://gfxvsstorage.blob.core.windows.net/gfxvscontainer/aigent-logo.png',
    providers: {
      aigent: 'wss://backend.ai-gents.io'
    },
    evmInfo: null,
    substrateInfo: {
      relaySlug: null,
      paraId: 0,
      genesisHash: '0x917813c36c7b1346d6895458dda04f24c0ff771ec7cd676fc5fe93fbc223e098',
      addressPrefix: 42,
      chainType: 'RELAYCHAIN',
      crowdloanUrl: null,
      blockExplorer: 'https://testnet.ai-gents.io/#/explorer',
      existentialDeposit: '500',
      symbol: 'AIGENT',
      decimals: 18,
      hasNativeNft: false,
      supportStaking: true,
      supportSmartContract: null,
      crowdloanParaId: null,
      crowdloanFunds: []
    },
    extraInfo: {
      subscanSlug: 'aigent'
    },
    bitcoinInfo: null,
    tonInfo: null
  }
};

/***/ }),

/***/ "../extension-base/src/services/chain-service/custom-tokens/ChainLogoMap.ts":
/*!**********************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/custom-tokens/ChainLogoMap.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ChainLogoMap": () => (/* binding */ ChainLogoMap)
/* harmony export */ });
/* eslint-disable header/header */
const ChainLogoMap = {
  default: 'https://gfxvsstorage.blob.core.windows.net/gfxvscontainer/aigent-logo.png',
  // kusama: 'https://chain-list-assets.subwallet.app/assets/chains/kusama.png',
  aigent: 'https://gfxvsstorage.blob.core.windows.net/gfxvscontainer/aigent-logo.png'
};

/***/ }),

/***/ "../extension-base/src/services/chain-service/custom-tokens/MultiChainAsset.ts":
/*!*************************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/custom-tokens/MultiChainAsset.ts ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MultiChainAssetMap": () => (/* binding */ MultiChainAssetMap)
/* harmony export */ });
/* eslint-disable header/header */
const MultiChainAssetMap = {
  aigent: {
    slug: 'aigent',
    originChainAsset: 'aigent',
    name: 'AIGENT',
    symbol: 'AIGENT',
    priceId: 'aigent',
    hasValue: true,
    icon: 'https://gfxvsstorage.blob.core.windows.net/gfxvscontainer/aigent-logo.png'
  }
  // 'KSM-Kusama': {
  //   slug: 'KSM-Kusama',
  //   originChainAsset: 'kusama-NATIVE-KSM',
  //   name: 'Kusama',
  //   symbol: 'KSM',
  //   priceId: 'kusama',
  //   hasValue: true,
  //   icon: 'https://chain-list-assets.subwallet.app/assets/multi-chain-assets/ksm-kusama.png'
  // }
};

/***/ }),

/***/ "../extension-base/src/services/chain-service/handler/AbstractChainHandler.ts":
/*!************************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/handler/AbstractChainHandler.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractChainHandler": () => (/* binding */ AbstractChainHandler),
/* harmony export */   "FIRST_RECONNECT_TIME": () => (/* binding */ FIRST_RECONNECT_TIME),
/* harmony export */   "SHORT_RETRY_TIME": () => (/* binding */ SHORT_RETRY_TIME)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/types */ "../extension-base/src/services/chain-service/types.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



const MAX_RECOVER_RETRY = 6;
const FIRST_RECONNECT_TIME = 3000;
const SHORT_RETRY_TIME = 20000;
// export const LONG_RETRY_TIME = 60000;

class AbstractChainHandler {
  apiStateMapSubject = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject({});
  // Recover retry times

  isSleeping = false;
  constructor(parent) {
    this.parent = parent;
    this.recoverMap = {};
  }
  handleConnection(chain, newStatus, forceRecover = false) {
    const currentMap = this.apiStateMapSubject.getValue();
    const oldStatus = currentMap[chain];

    // Update api state
    if (oldStatus !== newStatus) {
      this.apiStateMapSubject.next({
        ...currentMap,
        [chain]: newStatus
      });
    }

    // Reset retry when connected is successful
    if (newStatus === _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_1__._ChainConnectionStatus.CONNECTED) {
      this.cancelRecover(chain);
    }

    // Handle connection change
    if ((!this.isRecovering(chain) || forceRecover) && newStatus === _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_1__._ChainConnectionStatus.DISCONNECTED) {
      this.handleRecover(chain);
    }
  }

  // Recover api if it is disconnected
  handleRecover(chain) {
    var _this$parent, _this$parent$getChain;
    // Not recover inactive chain
    if (!((_this$parent = this.parent) !== null && _this$parent !== void 0 && (_this$parent$getChain = _this$parent.getChainStateByKey(chain)) !== null && _this$parent$getChain !== void 0 && _this$parent$getChain.active)) {
      this.cancelRecover(chain);
      return;
    }

    // Get retry record
    const retryRecord = this.recoverMap[chain] || {
      retryTimes: 0
    };
    clearTimeout(retryRecord.timeout);
    const retryTimes = retryRecord.retryTimes;
    if (retryTimes >= MAX_RECOVER_RETRY) {
      this.handleConnection(chain, _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_1__._ChainConnectionStatus.UNSTABLE);
      this.cancelRecover(chain); // Need manual recover
    }

    // Slow down recover frequency if increasing recover times
    const retryTimeout = retryTimes === 0 ? FIRST_RECONNECT_TIME : SHORT_RETRY_TIME;

    // Recover api after retry timeout
    const timeout = setTimeout(() => {
      var _this$getApiByChain;
      if ((_this$getApiByChain = this.getApiByChain(chain)) !== null && _this$getApiByChain !== void 0 && _this$getApiByChain.isApiConnected || this.isSleeping) {
        // Cancel recover if api is connected
        this.cancelRecover(chain);
      } else {
        this.recoverApi(chain);
        this.handleRecover(chain); // This will be cancel if api is connected
      }
    }, retryTimeout);
    this.recoverMap[chain] = {
      ...retryRecord,
      retryTimes: retryTimes + 1,
      timeout
    };
  }
  isRecovering(chain) {
    return !!this.recoverMap[chain];
  }
  cancelRecover(chain) {
    const retryRecord = this.recoverMap[chain];
    if (retryRecord) {
      clearTimeout(retryRecord.timeout);
      delete this.recoverMap[chain];
    }
  }
  cancelAllRecover() {
    Object.keys(this.recoverMap).forEach(chain => {
      this.cancelRecover(chain);
    });
  }
}

/***/ }),

/***/ "../extension-base/src/services/chain-service/handler/EvmApi.ts":
/*!**********************************************************************!*\
  !*** ../extension-base/src/services/chain-service/handler/EvmApi.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EvmApi": () => (/* binding */ EvmApi)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/types */ "../extension-base/src/services/chain-service/types.ts");
/* harmony import */ var _subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/utils/promise */ "../extension-base/src/utils/promise.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! web3 */ "../../node_modules/web3/dist/web3.min.js");
/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(web3__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0







const acalaEvmNetworks = _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_1__.EVM_PASS_CONNECT_STATUS.acala;
class EvmApi {
  apiRetry = 0;
  isApiConnectedSubject = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(false);
  connectionStatusSubject = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_3__._ChainConnectionStatus.DISCONNECTED);
  isApiReady = false;
  isApiReadyOnce = false;
  get isApiConnected() {
    return this.isApiConnectedSubject.getValue();
  }
  get connectionStatus() {
    return this.connectionStatusSubject.getValue();
  }
  updateConnectionStatus(status) {
    const isConnected = status === _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_3__._ChainConnectionStatus.CONNECTED;
    if (isConnected !== this.isApiConnectedSubject.value) {
      this.isApiConnectedSubject.next(isConnected);
    }
    if (status !== this.connectionStatusSubject.value) {
      this.connectionStatusSubject.next(status);
    }
  }
  get isReady() {
    return this.isReadyHandler.promise;
  }
  async updateApiUrl(apiUrl) {
    this.apiUrl = apiUrl;
    await this.disconnect();
    this.api.setProvider(this.createProvider(apiUrl));
    this.connect();
  }
  async recoverConnect() {
    const wsProvider = this.provider;
    if (wsProvider.reconnect) {
      wsProvider.reconnect();
    }
    await this.isReadyHandler.promise;
  }
  createProvider(apiUrl) {
    if (apiUrl.startsWith('http')) {
      return new (web3__WEBPACK_IMPORTED_MODULE_0___default().providers.HttpProvider)(apiUrl);
    } else {
      return new (web3__WEBPACK_IMPORTED_MODULE_0___default().providers.WebsocketProvider)(apiUrl);
    }
  }
  constructor(chainSlug, apiUrl, {
    providerName
  } = {}) {
    this.chainSlug = chainSlug;
    this.apiUrl = apiUrl;
    this.providerName = providerName || 'unknown';
    this.provider = this.createProvider(apiUrl);
    this.api = new (web3__WEBPACK_IMPORTED_MODULE_0___default())(this.provider);
    this.isReadyHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_4__.createPromiseHandler)();

    // Create it only to avoid undefined error, it will be overwrite in connect()
    this.intervalCheckApi = this.createIntervalCheckApi();
    this.connect();
  }
  createIntervalCheckApi() {
    this.clearIntervalCheckApi();
    return setInterval(() => {
      if (!acalaEvmNetworks.includes(this.chainSlug)) {
        this.api.eth.net.isListening().then(() => {
          this.onConnect();
        }).catch(() => {
          this.onDisconnect();
        });
      } else {
        this.onConnect();
      }
    }, 10000);
  }
  clearIntervalCheckApi() {
    clearInterval(this.intervalCheckApi);
  }
  connect() {
    // For websocket provider, connect it
    const wsProvider = this.provider;
    wsProvider.connect && wsProvider.connect();
    this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_3__._ChainConnectionStatus.CONNECTING);

    // Check if api is ready
    if (!acalaEvmNetworks.includes(this.chainSlug)) {
      this.api.eth.net.isListening().then(() => {
        this.isApiReadyOnce = true;
        this.onConnect();
      }).catch(error => {
        this.isApiReadyOnce = false;
        this.isApiReady = false;
        this.isReadyHandler.reject(error);
        this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_3__._ChainConnectionStatus.DISCONNECTED);
        console.warn(`Can not connect to ${this.chainSlug} (EVM) at ${this.apiUrl}`);
      });
    } else {
      this.isApiReadyOnce = true;
      this.onConnect();
    }

    // Interval to check connecting status
    this.intervalCheckApi = this.createIntervalCheckApi();
  }
  async disconnect() {
    this.clearIntervalCheckApi();
    this.onDisconnect();

    // For websocket provider, disconnect it
    const wsProvider = this.provider;
    wsProvider.disconnect && wsProvider.disconnect();
    this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_3__._ChainConnectionStatus.DISCONNECTED);
    return Promise.resolve();
  }
  destroy() {
    // Todo: implement this in the future
    return this.disconnect();
  }
  onConnect() {
    if (!this.isApiConnected) {
      console.log(`Connected to ${this.chainSlug} at ${this.apiUrl}`);
      this.isApiReady = true;
      if (this.isApiReadyOnce) {
        this.isReadyHandler.resolve(this);
      }
    }
    this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_3__._ChainConnectionStatus.CONNECTED);
  }
  onDisconnect() {
    this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_3__._ChainConnectionStatus.DISCONNECTED);
    if (this.isApiConnected) {
      console.warn(`Disconnected from ${this.chainSlug} of ${this.apiUrl} (EVM)`);
      this.isApiReady = false;
      this.isReadyHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_4__.createPromiseHandler)();
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/chain-service/handler/EvmChainHandler.ts":
/*!*******************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/handler/EvmChainHandler.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EvmChainHandler": () => (/* binding */ EvmChainHandler)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_AbstractChainHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/AbstractChainHandler */ "../extension-base/src/services/chain-service/handler/AbstractChainHandler.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_EvmApi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/EvmApi */ "../extension-base/src/services/chain-service/handler/EvmApi.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/helper */ "../extension-base/src/services/chain-service/helper/index.ts");
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bignumber.js */ "../../node_modules/bignumber.js/bignumber.mjs");
/* harmony import */ var _polkadot_util_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polkadot/util/logger */ "../../node_modules/@polkadot/util/logger.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0







class EvmChainHandler extends _subwallet_extension_base_services_chain_service_handler_AbstractChainHandler__WEBPACK_IMPORTED_MODULE_1__.AbstractChainHandler {
  evmApiMap = {};
  constructor(parent) {
    super(parent);
    this.logger = (0,_polkadot_util_logger__WEBPACK_IMPORTED_MODULE_2__.logger)('evm-chain-handler');
  }
  getEvmApiMap() {
    return this.evmApiMap;
  }
  getEvmApiByChain(chainSlug) {
    return this.evmApiMap[chainSlug];
  }
  getApiByChain(chain) {
    return this.getEvmApiByChain(chain);
  }
  setEvmApi(chainSlug, evmApi) {
    this.evmApiMap[chainSlug] = evmApi;
  }
  async initApi(chainSlug, apiUrl, {
    onUpdateStatus,
    providerName
  } = {}) {
    const existed = this.getEvmApiByChain(chainSlug);
    if (existed) {
      existed.connect();
      if (apiUrl !== existed.apiUrl) {
        existed.updateApiUrl(apiUrl).catch(console.error);
      }
      return existed;
    }
    const apiObject = new _subwallet_extension_base_services_chain_service_handler_EvmApi__WEBPACK_IMPORTED_MODULE_3__.EvmApi(chainSlug, apiUrl, {
      providerName
    });
    apiObject.connectionStatusSubject.subscribe(this.handleConnection.bind(this, chainSlug));
    apiObject.connectionStatusSubject.subscribe(onUpdateStatus);
    return Promise.resolve(apiObject);
  }
  async recoverApi(chainSlug) {
    const existed = this.getEvmApiByChain(chainSlug);
    if (existed && !existed.isApiReadyOnce) {
      console.log(`Reconnect ${existed.providerName || existed.chainSlug} at ${existed.apiUrl}`);
      return existed.recoverConnect();
    }
  }
  destroyEvmApi(chain) {
    const evmApi = this.getEvmApiByChain(chain);
    evmApi === null || evmApi === void 0 ? void 0 : evmApi.destroy().catch(console.error);
  }
  async sleep() {
    this.isSleeping = true;
    this.cancelAllRecover();
    await Promise.all(Object.values(this.getEvmApiMap()).map(evmApi => {
      return evmApi.disconnect().catch(console.error);
    }));
    return Promise.resolve();
  }
  wakeUp() {
    var _this$parent;
    this.isSleeping = false;
    const activeChains = ((_this$parent = this.parent) === null || _this$parent === void 0 ? void 0 : _this$parent.getActiveChains()) || [];
    for (const chain of activeChains) {
      const evmApi = this.getEvmApiByChain(chain);

      // Not found evmApi mean it active with substrate interface
      evmApi === null || evmApi === void 0 ? void 0 : evmApi.connect();
    }
    return Promise.resolve();
  }
  async getChainSpec(evmApi) {
    const chainId = await evmApi.api.eth.getChainId();
    let chainInfoList;
    const result = {
      evmChainId: chainId,
      name: '',
      symbol: '',
      decimals: 18,
      // by default, might change
      existentialDeposit: '0'
    };
    await fetch('https://chainid.network/chains.json').then(resp => resp.json()).then(data => {
      chainInfoList = data;
    });
    if (chainInfoList) {
      chainInfoList.forEach(_chainInfo => {
        const _chainId = _chainInfo.chainId;
        if (chainId === _chainId) {
          result.name = _chainInfo.name;
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
          result.symbol = _chainInfo.nativeCurrency.symbol;
        }
      });
    }
    return result;
  }
  async getSmartContractTokenInfo(contractAddress, tokenType, originChain) {
    let tokenContract;
    let name = '';
    let decimals = -1;
    let symbol = '';
    let contractError = false;
    const evmApi = this.getEvmApiByChain(originChain);
    try {
      if (tokenType === _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_4__._AssetType.ERC721) {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-member-access
        tokenContract = new evmApi.api.eth.Contract(_subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_5__._ERC721_ABI, contractAddress);
        const [_name, _symbol] = await Promise.all([
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
        tokenContract.methods.name().call(),
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
        tokenContract.methods.symbol().call()]);
        name = _name;
        symbol = _symbol;
      } else {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-member-access
        tokenContract = new evmApi.api.eth.Contract(_subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_5__._ERC20_ABI, contractAddress);
        const [_decimals, _symbol] = await Promise.all([
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
        tokenContract.methods.decimals().call(),
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access
        tokenContract.methods.symbol().call()]);
        name = _symbol;
        decimals = new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["default"](_decimals).toNumber();
        symbol = _symbol;
      }
      if (name === '' || symbol === '') {
        contractError = true;
      }
      return {
        name,
        decimals,
        symbol,
        contractError
      };
    } catch (e) {
      this.logger.error(e);
      return {
        name,
        decimals,
        symbol,
        contractError: true
      };
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/chain-service/handler/SubstrateApi.ts":
/*!****************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/handler/SubstrateApi.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SubstrateApi": () => (/* binding */ SubstrateApi)
/* harmony export */ });
/* harmony import */ var _acala_network_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @acala-network/api */ "../../node_modules/@acala-network/api/index.js");
/* harmony import */ var _oak_foundation_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @oak-foundation/types */ "../../node_modules/@oak-foundation/types/index.js");
/* harmony import */ var _oak_foundation_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_oak_foundation_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_light_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/light-client */ "../extension-base/src/services/chain-service/handler/light-client/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_SubstrateChainHandler__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/SubstrateChainHandler */ "../extension-base/src/services/chain-service/handler/SubstrateChainHandler.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/types */ "../extension-base/src/services/chain-service/types.ts");
/* harmony import */ var _subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/utils/promise */ "../extension-base/src/utils/promise.ts");
/* harmony import */ var avail_js_sdk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! avail-js-sdk */ "../../node_modules/avail-js-sdk/index.js");
/* harmony import */ var avail_js_sdk__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(avail_js_sdk__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var _polkadot_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/api */ "../../node_modules/@polkadot/rpc-provider/ws/index.js");
/* harmony import */ var _polkadot_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @polkadot/api */ "../../node_modules/@polkadot/api/promise/Api.js");
/* harmony import */ var _polkadot_apps_config_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polkadot/apps-config/api */ "../../node_modules/@polkadot/apps-config/api/index.js");
/* harmony import */ var _polkadot_types_create__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @polkadot/types/create */ "../../node_modules/@polkadot/types/create/registry.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/format/formatBalance.js");
/* harmony import */ var _polkadot_util_crypto_address_defaults__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @polkadot/util-crypto/address/defaults */ "../../node_modules/@polkadot/util-crypto/address/defaults.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0
















class SubstrateApi {
  useLightClient = false;
  isApiReady = false;
  isApiReadyOnce = false;
  isApiConnectedSubject = new rxjs__WEBPACK_IMPORTED_MODULE_3__.BehaviorSubject(false);
  connectionStatusSubject = new rxjs__WEBPACK_IMPORTED_MODULE_3__.BehaviorSubject(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.DISCONNECTED);
  get isApiConnected() {
    return this.isApiConnectedSubject.getValue();
  }
  substrateRetry = 0;
  get connectionStatus() {
    return this.connectionStatusSubject.getValue();
  }
  updateConnectionStatus(status) {
    const isConnected = status === _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.CONNECTED;
    if (isConnected !== this.isApiConnectedSubject.value) {
      this.isApiConnectedSubject.next(isConnected);
    }
    if (status !== this.connectionStatusSubject.value) {
      this.connectionStatusSubject.next(status);
    }
  }
  specName = '';
  specVersion = '';
  systemChain = '';
  systemName = '';
  systemVersion = '';
  createProvider(apiUrl) {
    if (apiUrl.startsWith('light://')) {
      this.useLightClient = true;
      return (0,_subwallet_extension_base_services_chain_service_handler_light_client__WEBPACK_IMPORTED_MODULE_5__.getSubstrateConnectProvider)(apiUrl.replace('light://substrate-connect/', ''));
    } else {
      this.useLightClient = true;
      return new _polkadot_api__WEBPACK_IMPORTED_MODULE_6__.WsProvider(apiUrl, _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__.API_AUTO_CONNECT_MS, {}, _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__.API_CONNECT_TIMEOUT);
    }
  }
  createApi(provider, externalApiPromise) {
    const apiOption = {
      provider,
      typesBundle: _polkadot_apps_config_api__WEBPACK_IMPORTED_MODULE_8__.typesBundle,
      registry: this.registry
    };
    if (this.metadata) {
      const metadata = this.metadata;
      apiOption.metadata = {
        [`${metadata.genesisHash}-${metadata.specVersion}`]: metadata.hexValue
      };
    }
    this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.CONNECTING);
    let api;
    if (externalApiPromise) {
      api = externalApiPromise;
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__._API_OPTIONS_CHAIN_GROUP.acala.includes(this.chainSlug)) {
      api = new _polkadot_api__WEBPACK_IMPORTED_MODULE_9__.ApiPromise((0,_acala_network_api__WEBPACK_IMPORTED_MODULE_0__.options)({
        provider
      }));
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__._API_OPTIONS_CHAIN_GROUP.turing.includes(this.chainSlug)) {
      api = new _polkadot_api__WEBPACK_IMPORTED_MODULE_9__.ApiPromise({
        provider,
        rpc: _oak_foundation_types__WEBPACK_IMPORTED_MODULE_1__.rpc,
        types: _oak_foundation_types__WEBPACK_IMPORTED_MODULE_1__.types
      });
    } else if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_7__._API_OPTIONS_CHAIN_GROUP.avail.includes(this.chainSlug)) {
      api = new _polkadot_api__WEBPACK_IMPORTED_MODULE_9__.ApiPromise({
        provider,
        rpc: avail_js_sdk__WEBPACK_IMPORTED_MODULE_2__.spec.rpc,
        types: avail_js_sdk__WEBPACK_IMPORTED_MODULE_2__.spec.types,
        signedExtensions: avail_js_sdk__WEBPACK_IMPORTED_MODULE_2__.spec.signedExtensions
      });
    } else {
      api = new _polkadot_api__WEBPACK_IMPORTED_MODULE_9__.ApiPromise(apiOption);
    }
    api.on('ready', this.onReady.bind(this));
    api.on('connected', this.onConnect.bind(this));
    api.on('disconnected', this.onDisconnect.bind(this));
    api.on('error', this.onError.bind(this));
    return api;
  }
  constructor(chainSlug, apiUrl, {
    externalApiPromise,
    metadata,
    providerName
  } = {}) {
    this.chainSlug = chainSlug;
    this.apiUrl = apiUrl;
    this.providerName = providerName;
    this.registry = new _polkadot_types_create__WEBPACK_IMPORTED_MODULE_10__.TypeRegistry();
    this.metadata = metadata;
    this.provider = this.createProvider(apiUrl);
    this.api = this.createApi(this.provider, externalApiPromise);
    this.handleApiReady = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_11__.createPromiseHandler)();
  }
  get isReady() {
    return this.handleApiReady.promise;
  }
  async updateApiUrl(apiUrl) {
    if (this.apiUrl === apiUrl) {
      return;
    }

    // Disconnect with old provider
    await this.disconnect();
    this.isApiReadyOnce = false;
    this.api.off('ready', this.onReady.bind(this));
    this.api.off('connected', this.onConnect.bind(this));
    this.api.off('disconnected', this.onDisconnect.bind(this));
    this.api.off('error', this.onError.bind(this));

    // Create new provider and api
    this.apiUrl = apiUrl;
    this.provider = this.createProvider(apiUrl);
    this.api = this.createApi(this.provider);
  }
  connect() {
    if (this.api.isConnected) {
      this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.CONNECTED);
    } else {
      this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.CONNECTING);
      this.api.connect().then(() => {
        this.api.isReady.then(() => {
          this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.CONNECTED);
        }).catch(console.error);
      }).catch(console.error);
    }
  }
  async disconnect() {
    try {
      await this.api.disconnect();
    } catch (e) {
      console.error(e);
    }
    this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.DISCONNECTED);
  }
  async recoverConnect() {
    await this.disconnect();
    this.connect();
    await this.handleApiReady.promise;
  }
  destroy() {
    // Todo: implement this in the future
    return this.disconnect();
  }
  onReady() {
    this.fillApiInfo().then(() => {
      this.handleApiReady.resolve(this);
      this.isApiReady = true;
      this.isApiReadyOnce = true;
    }).catch(error => {
      this.apiError = error === null || error === void 0 ? void 0 : error.message;
      this.handleApiReady.reject(error);
    });
  }
  onConnect() {
    this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.CONNECTED);
    this.substrateRetry = 0;
    console.log(`Connected to ${this.chainSlug || ''} at ${this.apiUrl}`);
    if (this.isApiReadyOnce) {
      this.handleApiReady.resolve(this);
    }
  }
  onDisconnect() {
    this.isApiReady = false;
    console.log(`Disconnected from ${this.chainSlug} at ${this.apiUrl}`);
    this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.DISCONNECTED);
    this.handleApiReady = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_11__.createPromiseHandler)();
    this.substrateRetry += 1;
    if (this.substrateRetry > 9) {
      this.disconnect().then(() => {
        this.updateConnectionStatus(_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_4__._ChainConnectionStatus.UNSTABLE);
      }).catch(console.error);
    }
  }
  onError(e) {
    console.warn(`${this.chainSlug} connection got error`, e);
  }
  async fillApiInfo() {
    var _api$rpc$system, _api$rpc$system2, _api$rpc$system3;
    const {
      api,
      registry
    } = this;
    const DEFAULT_DECIMALS = registry.createType('u32', 12);
    const DEFAULT_SS58 = registry.createType('u32', _polkadot_util_crypto_address_defaults__WEBPACK_IMPORTED_MODULE_12__.defaults.prefix);
    this.specName = this.api.runtimeVersion.specName.toString();
    this.specVersion = this.api.runtimeVersion.specVersion.toString();
    const [systemChain, systemName, systemVersion] = await Promise.all([(_api$rpc$system = api.rpc.system) === null || _api$rpc$system === void 0 ? void 0 : _api$rpc$system.chain(), (_api$rpc$system2 = api.rpc.system) === null || _api$rpc$system2 === void 0 ? void 0 : _api$rpc$system2.name(), (_api$rpc$system3 = api.rpc.system) === null || _api$rpc$system3 === void 0 ? void 0 : _api$rpc$system3.version()]);
    this.systemChain = systemChain.toString();
    this.systemName = systemName.toString();
    this.systemVersion = systemVersion.toString();
    const properties = registry.createType('ChainProperties', {
      ss58Format: api.registry.chainSS58,
      tokenDecimals: api.registry.chainDecimals,
      tokenSymbol: api.registry.chainTokens
    });
    const ss58Format = properties.ss58Format.unwrapOr(DEFAULT_SS58).toNumber();
    const tokenSymbol = properties.tokenSymbol.unwrapOr([_polkadot_util__WEBPACK_IMPORTED_MODULE_13__.formatBalance.getDefaults().unit, ..._subwallet_extension_base_services_chain_service_handler_SubstrateChainHandler__WEBPACK_IMPORTED_MODULE_14__.DEFAULT_AUX]);
    const tokenDecimals = properties.tokenDecimals.unwrapOr([DEFAULT_DECIMALS]);
    registry.setChainProperties(registry.createType('ChainProperties', {
      ss58Format,
      tokenDecimals,
      tokenSymbol
    }));

    // first set up the UI helpers
    this.defaultFormatBalance = {
      decimals: tokenDecimals.map(b => {
        return b.toNumber();
      }),
      unit: tokenSymbol[0].toString()
    };
    const defaultSection = Object.keys(api.tx)[0];
    const defaultMethod = Object.keys(api.tx[defaultSection])[0];
    this.apiDefaultTx = api.tx[defaultSection][defaultMethod];
    this.apiDefaultTxSudo = api.tx.system && api.tx.system.setCode || this.apiDefaultTx;
  }
}

/***/ }),

/***/ "../extension-base/src/services/chain-service/handler/SubstrateChainHandler.ts":
/*!*************************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/handler/SubstrateChainHandler.ts ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DEFAULT_AUX": () => (/* binding */ DEFAULT_AUX),
/* harmony export */   "SubstrateChainHandler": () => (/* binding */ SubstrateChainHandler)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/koni/api/tokens/wasm/utils */ "../extension-base/src/koni/api/tokens/wasm/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_AbstractChainHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/AbstractChainHandler */ "../extension-base/src/services/chain-service/handler/AbstractChainHandler.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_SubstrateApi__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/SubstrateApi */ "../extension-base/src/services/chain-service/handler/SubstrateApi.ts");
/* harmony import */ var _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polkadot/api-contract */ "../../node_modules/@polkadot/api-contract/promise/index.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_polkadot_util__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _polkadot_util_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/util/logger */ "../../node_modules/@polkadot/util/logger.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helper */ "../extension-base/src/services/chain-service/helper/index.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0









const DEFAULT_AUX = ['Aux1', 'Aux2', 'Aux3', 'Aux4', 'Aux5', 'Aux6', 'Aux7', 'Aux8', 'Aux9'];
class SubstrateChainHandler extends _subwallet_extension_base_services_chain_service_handler_AbstractChainHandler__WEBPACK_IMPORTED_MODULE_0__.AbstractChainHandler {
  substrateApiMap = {};
  constructor(parent) {
    super(parent);
    this.logger = (0,_polkadot_util_logger__WEBPACK_IMPORTED_MODULE_1__.logger)('substrate-chain-handler');
  }
  getSubstrateApiMap() {
    return this.substrateApiMap;
  }
  getSubstrateApiByChain(chainSlug) {
    return this.substrateApiMap[chainSlug];
  }
  getApiByChain(chain) {
    return this.getSubstrateApiByChain(chain);
  }
  async wakeUp() {
    var _this$parent;
    this.isSleeping = false;
    const activeChains = ((_this$parent = this.parent) === null || _this$parent === void 0 ? void 0 : _this$parent.getActiveChains()) || [];
    for (const chain of activeChains) {
      const api = this.getSubstrateApiByChain(chain);

      // Not found substrateInterface mean it active with evm interface
      if (api) {
        api.connect();
        if (!api.useLightClient) {
          // Manual fire handle connect to avoid some chain can not reconnect
          setTimeout(() => {
            this.handleConnection(chain, api.connectionStatus);
          }, 10000);
        }
      }
    }
    return Promise.resolve();
  }
  async sleep() {
    this.isSleeping = true;
    this.cancelAllRecover();
    await Promise.all(Object.values(this.getSubstrateApiMap()).map(substrateApi => {
      return substrateApi.disconnect().catch(console.error);
    }));
  }
  async recoverApi(chainSlug) {
    const existed = this.getSubstrateApiByChain(chainSlug);
    if (existed && !existed.isApiReadyOnce) {
      console.log(`Reconnect ${existed.providerName || existed.chainSlug} at ${existed.apiUrl}`);
      return existed.recoverConnect();
    }
  }
  async getChainSpec(substrateApi) {
    var _substrateApi$api$gen, _substrateApi$api, _substrateApi$api$con, _substrateApi$api$con2, _substrateApi$api$con3;
    const result = {
      addressPrefix: -1,
      decimals: 0,
      existentialDeposit: '',
      genesisHash: (_substrateApi$api$gen = substrateApi.api.genesisHash) === null || _substrateApi$api$gen === void 0 ? void 0 : _substrateApi$api$gen.toHex(),
      name: '',
      symbol: '',
      paraId: null
    };
    const {
      chainDecimals,
      chainTokens
    } = substrateApi.api.registry;
    if (substrateApi.api.query.parachainInfo) {
      result.paraId = (await substrateApi.api.query.parachainInfo.parachainId()).toPrimitive();
    }

    // get first token by default, might change
    result.name = (await substrateApi.api.rpc.system.chain()).toPrimitive();
    result.symbol = chainTokens[0];
    result.decimals = chainDecimals[0];
    result.addressPrefix = (_substrateApi$api = substrateApi.api) === null || _substrateApi$api === void 0 ? void 0 : (_substrateApi$api$con = _substrateApi$api.consts) === null || _substrateApi$api$con === void 0 ? void 0 : (_substrateApi$api$con2 = _substrateApi$api$con.system) === null || _substrateApi$api$con2 === void 0 ? void 0 : (_substrateApi$api$con3 = _substrateApi$api$con2.ss58Prefix) === null || _substrateApi$api$con3 === void 0 ? void 0 : _substrateApi$api$con3.toPrimitive();
    result.existentialDeposit = substrateApi.api.consts.balances.existentialDeposit.toString();
    return result;
  }
  async getSmartContractTokenInfo(contractAddress, tokenType, originChain, contractCaller) {
    let tokenContract;
    let name = '';
    let decimals = -1;
    let symbol = '';
    let contractError = false;
    const substrateApi = this.getSubstrateApiByChain(originChain);
    try {
      if (tokenType === _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_2__._AssetType.PSP22) {
        tokenContract = new _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_3__.ContractPromise(substrateApi.api, _helper__WEBPACK_IMPORTED_MODULE_4__._PSP22_ABI, contractAddress);
        const [nameResp, symbolResp, decimalsResp] = await Promise.all([tokenContract.query['psp22Metadata::tokenName'](contractCaller || contractAddress, {
          gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_5__.getDefaultWeightV2)(substrateApi.api)
        }),
        // read-only operation so no gas limit
        tokenContract.query['psp22Metadata::tokenSymbol'](contractCaller || contractAddress, {
          gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_5__.getDefaultWeightV2)(substrateApi.api)
        }), tokenContract.query['psp22Metadata::tokenDecimals'](contractCaller || contractAddress, {
          gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_5__.getDefaultWeightV2)(substrateApi.api)
        })]);
        if (!(nameResp.result.isOk && symbolResp.result.isOk && decimalsResp.result.isOk) || !nameResp.output || !decimalsResp.output || !symbolResp.output) {
          return {
            name: '',
            decimals: -1,
            symbol: '',
            contractError: true
          };
        } else {
          var _symbolResp$output, _decimalsResp$output, _nameResp$output;
          const symbolObj = (_symbolResp$output = symbolResp.output) === null || _symbolResp$output === void 0 ? void 0 : _symbolResp$output.toHuman();
          const decimalsObj = (_decimalsResp$output = decimalsResp.output) === null || _decimalsResp$output === void 0 ? void 0 : _decimalsResp$output.toHuman();
          const nameObj = (_nameResp$output = nameResp.output) === null || _nameResp$output === void 0 ? void 0 : _nameResp$output.toHuman();
          name = nameResp.output ? nameObj.Ok || nameObj.ok : '';
          decimals = decimalsResp.output ? new (_polkadot_util__WEBPACK_IMPORTED_MODULE_6___default())(decimalsObj.Ok || decimalsObj.ok).toNumber() : 0;
          symbol = decimalsResp.output ? symbolObj.Ok || symbolObj.ok : '';
          if (!name || !symbol || typeof name === 'object' || typeof symbol === 'object') {
            contractError = true;
          }
          console.log('validate PSP22', name, symbol, decimals);
        }
      } else {
        tokenContract = new _polkadot_api_contract__WEBPACK_IMPORTED_MODULE_3__.ContractPromise(substrateApi.api, _helper__WEBPACK_IMPORTED_MODULE_4__._PSP34_ABI, contractAddress);
        const collectionIdResp = await tokenContract.query['psp34::collectionId'](contractCaller || contractAddress, {
          gasLimit: (0,_subwallet_extension_base_koni_api_tokens_wasm_utils__WEBPACK_IMPORTED_MODULE_5__.getDefaultWeightV2)(substrateApi.api)
        }); // read-only operation so no gas limit

        if (!collectionIdResp.result.isOk || !collectionIdResp.output) {
          return {
            name: '',
            decimals: -1,
            symbol: '',
            contractError: true
          };
        } else {
          var _collectionIdResp$out;
          const collectionIdDict = (_collectionIdResp$out = collectionIdResp.output) === null || _collectionIdResp$out === void 0 ? void 0 : _collectionIdResp$out.toHuman();
          if (collectionIdDict.Bytes === '') {
            contractError = true;
          } else {
            name = ''; // no function to get collection name, let user manually put in the name
          }
        }
      }

      return {
        name,
        decimals,
        symbol,
        contractError
      };
    } catch (e) {
      this.logger.error(e);
      return {
        name: '',
        decimals: -1,
        symbol: '',
        contractError: true
      };
    }
  }
  setSubstrateApi(chainSlug, substrateApi) {
    this.substrateApiMap[chainSlug] = substrateApi;
  }
  destroySubstrateApi(chainSlug) {
    const substrateAPI = this.substrateApiMap[chainSlug];
    substrateAPI === null || substrateAPI === void 0 ? void 0 : substrateAPI.destroy().catch(console.error);
  }
  async initApi(chainSlug, apiUrl, {
    externalApiPromise,
    onUpdateStatus,
    providerName
  } = {}) {
    var _this$parent2;
    const existed = this.substrateApiMap[chainSlug];

    // Return existed to avoid re-init metadata
    if (existed) {
      existed.connect();
      if (apiUrl !== existed.apiUrl) {
        await existed.updateApiUrl(apiUrl);
      }
      return existed;
    }
    const metadata = await ((_this$parent2 = this.parent) === null || _this$parent2 === void 0 ? void 0 : _this$parent2.getMetadata(chainSlug));
    const apiObject = new _subwallet_extension_base_services_chain_service_handler_SubstrateApi__WEBPACK_IMPORTED_MODULE_7__.SubstrateApi(chainSlug, apiUrl, {
      providerName,
      metadata,
      externalApiPromise
    });
    apiObject.connectionStatusSubject.subscribe(this.handleConnection.bind(this, chainSlug));
    onUpdateStatus && apiObject.connectionStatusSubject.subscribe(onUpdateStatus);

    // Update metadata to database with async methods
    apiObject.isReady.then(api => {
      var _this$parent3;
      // Avoid date existed metadata
      if (metadata && metadata.specVersion === api.specVersion && metadata.genesisHash === api.api.genesisHash.toHex()) {
        return;
      }
      (_this$parent3 = this.parent) === null || _this$parent3 === void 0 ? void 0 : _this$parent3.upsertMetadata(chainSlug, {
        chain: chainSlug,
        genesisHash: api.api.genesisHash.toHex(),
        specVersion: api.specVersion,
        hexValue: api.api.runtimeMetadata.toHex()
      }).catch(console.error);
    }).catch(console.error);
    return apiObject;
  }
}

/***/ }),

/***/ "../extension-base/src/services/chain-service/handler/light-client/index.ts":
/*!**********************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/handler/light-client/index.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getSubstrateConnectProvider": () => (/* binding */ getSubstrateConnectProvider),
/* harmony export */   "paraChainSpecs": () => (/* binding */ paraChainSpecs),
/* harmony export */   "relayChainSpecs": () => (/* binding */ relayChainSpecs)
/* harmony export */ });
/* harmony import */ var _substrate_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @substrate/connect */ "../../node_modules/@substrate/connect/dist/mjs/index.js");
/* harmony import */ var _polkadot_rpc_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/rpc-provider */ "../../node_modules/@polkadot/rpc-provider/substrate-connect/index.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0




const relayChainSpecs = {
  kusama: _substrate_connect__WEBPACK_IMPORTED_MODULE_0__.WellKnownChain.ksmcc3,
  polkadot: _substrate_connect__WEBPACK_IMPORTED_MODULE_0__.WellKnownChain.polkadot,
  rococo: _substrate_connect__WEBPACK_IMPORTED_MODULE_0__.WellKnownChain.rococo_v2_2,
  westend: _substrate_connect__WEBPACK_IMPORTED_MODULE_0__.WellKnownChain.westend2
};

// Direct get spec data from @polkadot/react-api repository
const sourceFolderUrl = 'https://raw.githubusercontent.com/polkadot-js/apps/master/packages/react-api/src/light/';
const paraChainSpecs = {
  'kusama/shiden': `${sourceFolderUrl}kusama/shiden.json`,
  'kusama/tinkernet': `${sourceFolderUrl}kusama/tinkernet.json`,
  'polkadot/astar': `${sourceFolderUrl}polkadot/astar.json`
};
class ProviderPlaceholder {
  constructor(providerPromise) {
    this.providerPromise = providerPromise;
    providerPromise.then(provider => {
      this.provider = provider;
    }).catch(console.error);
  }
  get hasSubscriptions() {
    return true;
  }
  get isClonable() {
    if (this.provider) {
      return this.provider.isClonable;
    } else {
      return false;
    }
  }
  get isConnected() {
    if (this.provider) {
      return this.provider.isConnected;
    } else {
      return false;
    }
  }
  clone() {
    var _this$provider;
    // @ts-ignore
    return (_this$provider = this.provider) === null || _this$provider === void 0 ? void 0 : _this$provider.clone();
  }
  async connect() {
    var _this$provider2;
    await this.providerPromise;
    await ((_this$provider2 = this.provider) === null || _this$provider2 === void 0 ? void 0 : _this$provider2.connect());
  }
  async disconnect() {
    var _this$provider3;
    await this.providerPromise;
    await ((_this$provider3 = this.provider) === null || _this$provider3 === void 0 ? void 0 : _this$provider3.disconnect());
  }
  on(type, sub) {
    let cancel = false;
    let unsub = () => {
      cancel = false;
    };
    this.providerPromise.then(provider => {
      if (!cancel) {
        unsub = provider.on(type, sub);
      }
    }).catch(console.error);
    return () => {
      unsub();
    };
  }
  send(method, params, isCacheable) {
    if (this.provider) {
      return this.provider.send(method, params);
    }
    return this.providerPromise.then(provider => {
      return provider.send(method, params);
    });
  }
  subscribe(type, method, params, cb) {
    if (this.provider) {
      return this.provider.subscribe(type, method, params, cb);
    }
    return this.providerPromise.then(provider => {
      return provider.subscribe(type, method, params, cb);
    });
  }
  unsubscribe(type, method, id) {
    if (this.provider) {
      return this.provider.unsubscribe(type, method, id);
    }
    return this.providerPromise.then(provider => {
      return provider.unsubscribe(type, method, id);
    });
  }
}
function getSubstrateConnectProvider(specLink) {
  const [relayName, paraName] = specLink.split('/');
  const relaySpec = relayChainSpecs[relayName];
  const relayProvider = new _polkadot_rpc_provider__WEBPACK_IMPORTED_MODULE_1__.ScProvider(_substrate_connect__WEBPACK_IMPORTED_MODULE_0__, relaySpec);
  if (!paraName) {
    return relayProvider;
  }
  const paraChainData = paraChainSpecs[specLink];
  let scProvider;
  const scPromise = fetch(paraChainData).then(rs => rs.text()).then(spec => {
    scProvider = new _polkadot_rpc_provider__WEBPACK_IMPORTED_MODULE_1__.ScProvider(_substrate_connect__WEBPACK_IMPORTED_MODULE_0__, spec);
    return scProvider;
  }).catch(console.error);
  return new ProviderPlaceholder(scPromise);
}

/***/ }),

/***/ "../extension-base/src/services/chain-service/handler/manta/MantaPrivateHandler.ts":
/*!*****************************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/handler/manta/MantaPrivateHandler.ts ***!
  \*****************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MantaPrivateHandler": () => (/* binding */ MantaPrivateHandler)
/* harmony export */ });
/* harmony import */ var manta_extension_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! manta-extension-sdk */ "../../node_modules/manta-extension-sdk/dist/browser/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([manta_extension_sdk__WEBPACK_IMPORTED_MODULE_0__]);
manta_extension_sdk__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MantaPrivateHandler {
  _privateWallet = undefined;
  syncStateSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.Subject();
  constructor(dbService) {
    this.dbService = dbService;
    this.syncState = {
      isSyncing: false,
      progress: 0
    };
    this.syncStateSubject.next(this.syncState);
  }
  setCurrentAddress(address) {
    this.currentAddress = address;
  }
  getSyncState() {
    return this.syncState;
  }
  get privateWallet() {
    return this._privateWallet;
  }
  subscribeSyncState() {
    return this.syncStateSubject;
  }
  async updateMantaPayConfig(address, chain, changes) {
    await this.dbService.updateMantaPayData(`config_${chain}_${address}`, changes);
  }
  async saveMantaPayConfig(config) {
    await this.dbService.setMantaPayData({
      key: `config_${config.chain}_${config.address}`,
      ...config
    });
  }
  async getMantaPayConfig(address, chain) {
    return this.dbService.getMantaPayData(`config_${chain}_${address}`);
  }
  async getMantaPayFirstConfig(chain) {
    return this.dbService.getMantaPayFirstConfig(chain);
  }
  async deleteMantaPayConfig(address, chain) {
    return this.dbService.deleteMantaPayConfig(`config_${chain}_${address}`);
  }
  async saveMantaAuthContext(context) {
    await this.dbService.setMantaPayData({
      key: `authContext_${context.chain}_${context.address}`,
      ...context
    });
  }
  async getMantaAuthContext(address, chain) {
    return this.dbService.getMantaPayData(`authContext_${chain}_${address}`);
  }
  async deleteMantaAuthContext(address, chain) {
    return this.dbService.deleteMantaPayConfig(`authContext_${chain}_${address}`);
  }
  async saveLedgerState(palletName, network, data) {
    try {
      const suffix = this.currentAddress ? `_${this.currentAddress}` : '';
      await this.dbService.setMantaPayData({
        key: `storage_state_${palletName}_${network}${suffix}`,
        ...data
      });
    } catch (e) {
      console.error('manta-pay', e);
      return false;
    }
    return true;
  }
  async getLedgerState(palletName, network) {
    let result;
    try {
      const suffix = this.currentAddress ? `_${this.currentAddress}` : '';

      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
      result = await this.dbService.getMantaPayData(`storage_state_${palletName}_${network}${suffix}`);
    } catch (e) {
      console.error(e);
    }

    // eslint-disable-next-line @typescript-eslint/no-unsafe-return
    return result || null;
  }
  async initMantaPay(providerUrl, network) {
    const networkParam = network.charAt(0).toUpperCase() + network.slice(1); // Manta || Calamari || Dolphin

    const baseWallet = await manta_extension_sdk__WEBPACK_IMPORTED_MODULE_0__.BaseWallet.init({
      apiEndpoint: providerUrl,
      loggingEnabled: true,
      provingFilePath: './manta-pay/proving',
      parametersFilePath: './manta-pay/parameters',
      saveStorageStateToLocal: this.saveLedgerState.bind(this),
      getStorageStateFromLocal: this.getLedgerState.bind(this)
    });
    this._privateWallet = manta_extension_sdk__WEBPACK_IMPORTED_MODULE_0__.MantaPayWallet.init(networkParam, baseWallet);
    return this._privateWallet.api;
  }
  async getCurrentLedgerState() {
    var _this$_privateWallet;
    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
    const ledgerState = await this.getLedgerState('mantaPay', 'Calamari');
    if (!ledgerState) {
      return 0;
    }

    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
    return await ((_this$_privateWallet = this._privateWallet) === null || _this$_privateWallet === void 0 ? void 0 : _this$_privateWallet.getLedgerCurrentCount(ledgerState.checkpoint));
  }
  setSyncState(data) {
    this.syncState = data;
    this.syncStateSubject.next(this.syncState);
  }
  async subscribeSyncProgress() {
    var _this$_privateWallet2;
    const ledgerTotalCount = await ((_this$_privateWallet2 = this._privateWallet) === null || _this$_privateWallet2 === void 0 ? void 0 : _this$_privateWallet2.getLedgerTotalCount());
    const interval = setInterval(() => {
      this.getCurrentLedgerState().then(currentCount => {
        const progress = Math.floor(currentCount / ledgerTotalCount * 100);
        if (progress === 100) {
          this.syncState = {
            isSyncing: false,
            progress
          };
          clearInterval(interval);
        } else {
          this.syncState = {
            isSyncing: true,
            progress
          };
        }
        this.syncStateSubject.next(this.syncState);
      }).catch(console.error);
    }, 1000);
    return () => {
      interval && clearInterval(interval);
    };
  }
}
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/index.ts":
/*!********************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/index.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "_AZERO_DOMAIN_REGISTRY_ABI": () => (/* binding */ _AZERO_DOMAIN_REGISTRY_ABI),
/* harmony export */   "_ERC20_ABI": () => (/* binding */ _ERC20_ABI),
/* harmony export */   "_ERC721_ABI": () => (/* binding */ _ERC721_ABI),
/* harmony export */   "_NEUROGUNS_PSP34_ABI": () => (/* binding */ _NEUROGUNS_PSP34_ABI),
/* harmony export */   "_PINK_PSP34_ABI": () => (/* binding */ _PINK_PSP34_ABI),
/* harmony export */   "_PSP22_ABI": () => (/* binding */ _PSP22_ABI),
/* harmony export */   "_PSP34_ABI": () => (/* binding */ _PSP34_ABI),
/* harmony export */   "_TEST_ERC721_ABI": () => (/* binding */ _TEST_ERC721_ABI)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0

// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const _ERC20_ABI = __webpack_require__(/*! ./erc20_abi.json */ "../extension-base/src/services/chain-service/helper/erc20_abi.json");
// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const _ERC721_ABI = __webpack_require__(/*! ./erc721_abi.json */ "../extension-base/src/services/chain-service/helper/erc721_abi.json");
// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const _TEST_ERC721_ABI = __webpack_require__(/*! ./test_erc721_abi.json */ "../extension-base/src/services/chain-service/helper/test_erc721_abi.json");
// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const _PSP22_ABI = __webpack_require__(/*! ./psp22_abi.json */ "../extension-base/src/services/chain-service/helper/psp22_abi.json");
// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const _PSP34_ABI = __webpack_require__(/*! ./psp34_abi.json */ "../extension-base/src/services/chain-service/helper/psp34_abi.json");
// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const _PINK_PSP34_ABI = __webpack_require__(/*! ./pink_psp34_abi.json */ "../extension-base/src/services/chain-service/helper/pink_psp34_abi.json");
// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const _NEUROGUNS_PSP34_ABI = __webpack_require__(/*! ./neuroguns_psp34_abi.json */ "../extension-base/src/services/chain-service/helper/neuroguns_psp34_abi.json");
// eslint-disable-next-line @typescript-eslint/no-var-requires,@typescript-eslint/no-unsafe-assignment
const _AZERO_DOMAIN_REGISTRY_ABI = __webpack_require__(/*! ./azero_domain_registry_abi.json */ "../extension-base/src/services/chain-service/helper/azero_domain_registry_abi.json");

/***/ }),

/***/ "../extension-base/src/services/chain-service/index.ts":
/*!*************************************************************!*\
  !*** ../extension-base/src/services/chain-service/index.ts ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ChainService": () => (/* binding */ ChainService)
/* harmony export */ });
/* harmony import */ var _custom_tokens_AssetLogoMap__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./custom-tokens/AssetLogoMap */ "../extension-base/src/services/chain-service/custom-tokens/AssetLogoMap.ts");
/* harmony import */ var _custom_tokens_AssetRef__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./custom-tokens/AssetRef */ "../extension-base/src/services/chain-service/custom-tokens/AssetRef.ts");
/* harmony import */ var _custom_tokens_ChainAsset__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./custom-tokens/ChainAsset */ "../extension-base/src/services/chain-service/custom-tokens/ChainAsset.ts");
/* harmony import */ var _custom_tokens_ChainInfo__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./custom-tokens/ChainInfo */ "../extension-base/src/services/chain-service/custom-tokens/ChainInfo.ts");
/* harmony import */ var _custom_tokens_ChainLogoMap__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./custom-tokens/ChainLogoMap */ "../extension-base/src/services/chain-service/custom-tokens/ChainLogoMap.ts");
/* harmony import */ var _custom_tokens_MultiChainAsset__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./custom-tokens/MultiChainAsset */ "../extension-base/src/services/chain-service/custom-tokens/MultiChainAsset.ts");
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_EvmChainHandler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/EvmChainHandler */ "../extension-base/src/services/chain-service/handler/EvmChainHandler.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_manta_MantaPrivateHandler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/manta/MantaPrivateHandler */ "../extension-base/src/services/chain-service/handler/manta/MantaPrivateHandler.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_SubstrateChainHandler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/SubstrateChainHandler */ "../extension-base/src/services/chain-service/handler/SubstrateChainHandler.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/handler/types */ "../extension-base/src/services/chain-service/handler/types.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/types */ "../extension-base/src/services/chain-service/types.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_stores_AssetSetting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/stores/AssetSetting */ "../extension-base/src/stores/AssetSetting.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/environment.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! web3 */ "../../node_modules/web3/dist/web3.min.js");
/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(web3__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _polkadot_util_logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polkadot/util/logger */ "../../node_modules/@polkadot/util/logger.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_subwallet_extension_base_services_chain_service_handler_manta_MantaPrivateHandler__WEBPACK_IMPORTED_MODULE_5__]);
_subwallet_extension_base_services_chain_service_handler_manta_MantaPrivateHandler__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0

// import { AssetLogoMap, AssetRefMap, ChainAssetMap, ChainInfoMap, ChainLogoMap, MultiChainAssetMap } from '@subwallet/chain-list';




















class ChainService {
  dataMap = {
    chainInfoMap: {},
    chainStateMap: {},
    assetRegistry: {},
    assetRefMap: {}
  };
  lockChainInfoMap = false; // prevent unwanted changes (edit, enable, disable) to chainInfoMap

  get mantaPay() {
    return this.mantaChainHandler;
  }

  // TODO: consider BehaviorSubject
  chainInfoMapSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.Subject();
  chainStateMapSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.Subject();
  assetRegistrySubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.Subject();
  multiChainAssetMapSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.Subject();
  xcmRefMapSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.Subject();

  // Todo: Update to new store indexed DB
  store = new _subwallet_extension_base_stores_AssetSetting__WEBPACK_IMPORTED_MODULE_2__["default"]();
  assetSettingSubject = new rxjs__WEBPACK_IMPORTED_MODULE_3__.BehaviorSubject({});
  constructor(dbService, eventService) {
    this.dbService = dbService;
    this.eventService = eventService;
    this.chainInfoMapSubject.next(this.dataMap.chainInfoMap);
    this.chainStateMapSubject.next(this.dataMap.chainStateMap);
    this.assetRegistrySubject.next(this.dataMap.assetRegistry);
    this.xcmRefMapSubject.next(this.dataMap.assetRefMap);
    if (_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_4__.MODULE_SUPPORT.MANTA_ZK) {
      console.log('Init Manta ZK');
      this.mantaChainHandler = new _subwallet_extension_base_services_chain_service_handler_manta_MantaPrivateHandler__WEBPACK_IMPORTED_MODULE_5__.MantaPrivateHandler(dbService);
    }
    this.substrateChainHandler = new _subwallet_extension_base_services_chain_service_handler_SubstrateChainHandler__WEBPACK_IMPORTED_MODULE_6__.SubstrateChainHandler(this);
    this.evmChainHandler = new _subwallet_extension_base_services_chain_service_handler_EvmChainHandler__WEBPACK_IMPORTED_MODULE_7__.EvmChainHandler(this);
    this.logger = (0,_polkadot_util_logger__WEBPACK_IMPORTED_MODULE_8__.logger)('chain-service');
  }

  // Getter
  getXcmRefMap() {
    return this.dataMap.assetRefMap;
    // const result: Record<string, _AssetRef> = {};
    //
    // Object.entries(AssetRefMap).forEach(([key, assetRef]) => {
    //   if (assetRef.path === _AssetRefPath.XCM) {
    //     result[key] = assetRef;
    //   }
    // });
    //
    // return result;
  }

  getEvmApi(slug) {
    return this.evmChainHandler.getEvmApiByChain(slug);
  }
  getEvmApiMap() {
    return this.evmChainHandler.getEvmApiMap();
  }
  getSubstrateApiMap() {
    return this.substrateChainHandler.getSubstrateApiMap();
  }
  getSubstrateApi(slug) {
    return this.substrateChainHandler.getSubstrateApiByChain(slug);
  }
  getChainCurrentProviderByKey(slug) {
    const providerName = this.getChainStateByKey(slug).currentProvider;
    const providerMap = this.getChainInfoByKey(slug).providers;
    const endpoint = providerMap[providerName];
    return {
      endpoint,
      providerName
    };
  }
  subscribeChainInfoMap() {
    return this.chainInfoMapSubject;
  }
  subscribeAssetRegistry() {
    return this.assetRegistrySubject;
  }
  subscribeMultiChainAssetMap() {
    return this.multiChainAssetMapSubject;
  }
  subscribeXcmRefMap() {
    return this.xcmRefMapSubject;
  }
  subscribeChainStateMap() {
    return this.chainStateMapSubject;
  }
  getAssetRegistry() {
    return this.dataMap.assetRegistry;
  }
  getMultiChainAssetMap() {
    return _custom_tokens_MultiChainAsset__WEBPACK_IMPORTED_MODULE_9__.MultiChainAssetMap;
  }
  getSmartContractTokens() {
    const filteredAssetRegistry = {};
    Object.values(this.getAssetRegistry()).forEach(asset => {
      if (_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._SMART_CONTRACT_STANDARDS.includes(asset.assetType)) {
        filteredAssetRegistry[asset.slug] = asset;
      }
    });
    return filteredAssetRegistry;
  }
  getChainInfoMap() {
    return this.dataMap.chainInfoMap;
  }
  getEvmChainInfoMap() {
    const result = {};
    Object.values(this.getChainInfoMap()).forEach(chainInfo => {
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isPureEvmChain)(chainInfo)) {
        result[chainInfo.slug] = chainInfo;
      }
    });
    return result;
  }
  getSubstrateChainInfoMap() {
    const result = {};
    Object.values(this.getChainInfoMap()).forEach(chainInfo => {
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isPureSubstrateChain)(chainInfo)) {
        result[chainInfo.slug] = chainInfo;
      }
    });
    return result;
  }
  getAllPriceIds() {
    const result = [];
    Object.values(this.getAssetRegistry()).forEach(assetInfo => {
      if (assetInfo.priceId !== null) {
        result.push(assetInfo.priceId);
      }
    });
    return result;
  }
  getNativeTokenInfo(chainSlug) {
    let nativeTokenInfo = {
      assetType: _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.NATIVE,
      decimals: 0,
      metadata: null,
      minAmount: '',
      multiChainAsset: '',
      name: '',
      originChain: '',
      priceId: '',
      slug: '',
      symbol: '',
      hasValue: true,
      icon: ''
    };
    for (const assetInfo of Object.values(this.getAssetRegistry())) {
      if (assetInfo.assetType === _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.NATIVE && assetInfo.originChain === chainSlug) {
        nativeTokenInfo = assetInfo;
        break;
      }
    }
    return nativeTokenInfo;
  }
  getAssetRefMap() {
    return this.dataMap.assetRefMap;
  }
  getChainStateMap() {
    return this.dataMap.chainStateMap;
  }
  getChainStateByKey(key) {
    return this.dataMap.chainStateMap[key];
  }
  getActiveChains() {
    return Object.entries(this.dataMap.chainStateMap).filter(([, chainState]) => (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isChainEnabled)(chainState)).map(([key]) => key);
  }
  getSupportedSmartContractTypes() {
    return [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.ERC20, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.ERC721, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.PSP22, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.PSP34];
  }
  getActiveChainInfoMap() {
    const result = {};
    Object.values(this.getChainInfoMap()).forEach(chainInfo => {
      const chainState = this.getChainStateByKey(chainInfo.slug);
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isChainEnabled)(chainState)) {
        result[chainInfo.slug] = chainInfo;
      }
    });
    return result;
  }
  getActiveChainSlugs() {
    const result = [];
    Object.values(this.getChainInfoMap()).forEach(chainInfo => {
      const chainState = this.getChainStateByKey(chainInfo.slug);
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isChainEnabled)(chainState)) {
        result.push(chainInfo.slug);
      }
    });
    return result;
  }
  getChainInfoByKey(key) {
    return this.dataMap.chainInfoMap[key];
  }
  getActiveChainInfos() {
    const result = {};
    Object.values(this.getChainStateMap()).forEach(chainState => {
      if (chainState.active) {
        result[chainState.slug] = this.getChainInfoByKey(chainState.slug);
      }
    });
    return result;
  }
  getAssetBySlug(slug) {
    return this.getAssetRegistry()[slug];
  }
  getMantaZkAssets(chain) {
    const result = {};
    Object.values(this.getAssetRegistry()).forEach(chainAsset => {
      if (chainAsset.originChain === chain && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isAssetFungibleToken)(chainAsset) && chainAsset.symbol.startsWith(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._ZK_ASSET_PREFIX)) {
        result[chainAsset.slug] = chainAsset;
      }
    });
    return result;
  }
  getFungibleTokensByChain(chainSlug, checkActive = false) {
    const result = {};
    const assetSettings = this.assetSettingSubject.value;
    Object.values(this.getAssetRegistry()).forEach(chainAsset => {
      var _assetSettings$chainA;
      const _filterActive = !checkActive || ((_assetSettings$chainA = assetSettings[chainAsset.slug]) === null || _assetSettings$chainA === void 0 ? void 0 : _assetSettings$chainA.visible);
      if (chainAsset.originChain === chainSlug && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isAssetFungibleToken)(chainAsset) && _filterActive) {
        result[chainAsset.slug] = chainAsset;
      }
    });
    return result;
  }
  getXcmEqualAssetByChain(destinationChainSlug, originTokenSlug) {
    let destinationTokenInfo;
    for (const asset of Object.values(this.getAssetRegistry())) {
      if (asset.originChain === destinationChainSlug) {
        // check
        const assetRefKey = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._parseAssetRefKey)(originTokenSlug, asset.slug);
        const assetRef = this.getAssetRefMap()[assetRefKey];
        if (assetRef && assetRef.path === _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetRefPath.XCM) {
          // there's only 1 corresponding token on 1 chain
          destinationTokenInfo = asset;
          break;
        }
      }
    }
    return destinationTokenInfo;
  }
  getAssetByChainAndType(chainSlug, assetTypes) {
    const result = {};
    Object.values(this.getAssetRegistry()).forEach(assetInfo => {
      if (assetTypes.includes(assetInfo.assetType) && assetInfo.originChain === chainSlug) {
        result[assetInfo.slug] = assetInfo;
      }
    });
    return result;
  }
  getSmartContractNfts() {
    const result = [];
    Object.values(this.getAssetRegistry()).forEach(assetInfo => {
      if (_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._NFT_CONTRACT_STANDARDS.includes(assetInfo.assetType)) {
        result.push(assetInfo);
      }
    });
    return result;
  }

  // Setter
  forceRemoveChain(slug) {
    if (this.lockChainInfoMap) {
      return false;
    }
    const chainInfoMap = this.getChainInfoMap();
    const chainStateMap = this.getChainStateMap();
    if (!(slug in chainInfoMap)) {
      return false;
    }
    this.lockChainInfoMap = true;
    delete chainStateMap[slug];
    delete chainInfoMap[slug];
    this.deleteAssetsByChain(slug);
    this.dbService.removeFromChainStore([slug]).catch(console.error);
    this.updateChainSubscription();
    this.lockChainInfoMap = false;
    this.eventService.emit('chain.updateState', slug);
    return true;
  }
  removeCustomChain(slug) {
    if (this.lockChainInfoMap) {
      return false;
    }
    const chainInfoMap = this.getChainInfoMap();
    const chainStateMap = this.getChainStateMap();
    if (!(slug in chainInfoMap)) {
      return false;
    }
    if (!(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isCustomChain)(slug)) {
      return false;
    }
    if (chainStateMap[slug].active) {
      return false;
    }
    this.lockChainInfoMap = true;
    delete chainStateMap[slug];
    delete chainInfoMap[slug];
    this.deleteAssetsByChain(slug);
    this.dbService.removeFromChainStore([slug]).catch(console.error);
    this.updateChainSubscription();
    this.lockChainInfoMap = false;
    this.eventService.emit('chain.updateState', slug);
    return true;
  }
  resetChainInfoMap(excludedChains) {
    if (this.lockChainInfoMap) {
      return false;
    }
    this.lockChainInfoMap = true;
    const chainStateMap = this.getChainStateMap();
    for (const [slug, chainState] of Object.entries(chainStateMap)) {
      if (!_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._DEFAULT_ACTIVE_CHAINS.includes(slug) && !(excludedChains !== null && excludedChains !== void 0 && excludedChains.includes(slug))) {
        chainState.active = false;
      }
    }
    this.updateChainStateMapSubscription();
    this.lockChainInfoMap = false;
    return true;
  }
  setChainConnectionStatus(slug, connectionStatus) {
    const chainStateMap = this.getChainStateMap();
    chainStateMap[slug].connectionStatus = connectionStatus;
  }
  upsertCustomToken(token) {
    if (token.slug.length === 0) {
      // new token
      if (token.assetType === _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.NATIVE) {
        const defaultSlug = this.generateSlugForNativeToken(token.originChain, token.assetType, token.symbol);
        token.slug = `${_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._CUSTOM_PREFIX}${defaultSlug}`;
      } else {
        var _token$metadata;
        const defaultSlug = this.generateSlugForSmartContractAsset(token.originChain, token.assetType, token.symbol, (_token$metadata = token.metadata) === null || _token$metadata === void 0 ? void 0 : _token$metadata.contractAddress);
        token.slug = `${_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._CUSTOM_PREFIX}${defaultSlug}`;
      }
    }
    if (token.originChain && (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isAssetFungibleToken)(token)) {
      var _this$getChainInfoByK;
      token.hasValue = !((_this$getChainInfoByK = this.getChainInfoByKey(token.originChain)) !== null && _this$getChainInfoByK !== void 0 && _this$getChainInfoByK.isTestnet);
    }
    const assetRegistry = this.getAssetRegistry();
    assetRegistry[token.slug] = token;
    this.dbService.updateAssetStore(token).catch(e => this.logger.error(e));
    this.assetRegistrySubject.next(assetRegistry);
    return token.slug;
  }
  deleteAssetsByChain(chainSlug) {
    if (!(0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isCustomChain)(chainSlug)) {
      return;
    }
    const targetAssets = [];
    const assetRegistry = this.getAssetRegistry();
    Object.values(assetRegistry).forEach(targetToken => {
      if (targetToken.originChain === chainSlug) {
        targetAssets.push(targetToken.slug);
      }
    });
    this.deleteCustomAssets(targetAssets);
  }
  deleteCustomAssets(targetAssets) {
    const assetRegistry = this.getAssetRegistry();
    targetAssets.forEach(targetToken => {
      delete assetRegistry[targetToken];
    });
    this.dbService.removeFromBalanceStore(targetAssets).catch(e => this.logger.error(e));
    this.dbService.removeFromAssetStore(targetAssets).catch(e => this.logger.error(e));
    this.assetRegistrySubject.next(assetRegistry);
    targetAssets.forEach(assetSlug => {
      this.eventService.emit('asset.updateState', assetSlug);
    });
  }

  // Business logic
  async init() {
    await this.eventService.waitDatabaseReady;

    // TODO: reconsider the flow of initiation
    const [latestAssetRefMap, latestMultiChainAssetMap] = await Promise.all([this.fetchLatestData(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._ASSET_REF_SRC, _custom_tokens_AssetRef__WEBPACK_IMPORTED_MODULE_14__.AssetRefMap), this.fetchLatestData(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._MULTI_CHAIN_ASSET_SRC, _custom_tokens_MultiChainAsset__WEBPACK_IMPORTED_MODULE_9__.MultiChainAssetMap)]);
    this.multiChainAssetMapSubject.next(latestMultiChainAssetMap);
    this.dataMap.assetRefMap = latestAssetRefMap;
    await this.initChains();
    this.chainInfoMapSubject.next(this.getChainInfoMap());
    this.updateChainStateMapSubscription();
    this.assetRegistrySubject.next(this.getAssetRegistry());
    this.xcmRefMapSubject.next(this.dataMap.assetRefMap);
    await this.initApis();
    await this.initAssetSettings();
  }
  async initApis() {
    const chainInfoMap = this.getChainInfoMap();
    const chainStateMap = this.getChainStateMap();
    await Promise.all(Object.entries(chainInfoMap).filter(([slug]) => {
      var _chainStateMap$slug;
      return (_chainStateMap$slug = chainStateMap[slug]) === null || _chainStateMap$slug === void 0 ? void 0 : _chainStateMap$slug.active;
    }).map(([, chainInfo]) => {
      try {
        return this.initApiForChain(chainInfo);
      } catch (e) {
        console.error(e);
        return Promise.resolve();
      }
    }));
  }
  async initApiForChain(chainInfo) {
    const {
      endpoint,
      providerName
    } = this.getChainCurrentProviderByKey(chainInfo.slug);
    const onUpdateStatus = status => {
      const currentStatus = this.getChainStateByKey(chainInfo.slug).connectionStatus;

      // Avoid unnecessary update in case disable chain
      if (currentStatus !== status) {
        this.setChainConnectionStatus(chainInfo.slug, status);
        this.updateChainStateMapSubscription();
      }
    };
    if (chainInfo.substrateInfo !== null && chainInfo.substrateInfo !== undefined) {
      if (_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._MANTA_ZK_CHAIN_GROUP.includes(chainInfo.slug) && _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_4__.MODULE_SUPPORT.MANTA_ZK && this.mantaChainHandler) {
        var _this$mantaChainHandl;
        const apiPromise = await ((_this$mantaChainHandl = this.mantaChainHandler) === null || _this$mantaChainHandl === void 0 ? void 0 : _this$mantaChainHandl.initMantaPay(endpoint, chainInfo.slug));
        const chainApi = await this.substrateChainHandler.initApi(chainInfo.slug, endpoint, {
          providerName,
          externalApiPromise: apiPromise,
          onUpdateStatus
        });
        this.substrateChainHandler.setSubstrateApi(chainInfo.slug, chainApi);
      } else {
        const chainApi = await this.substrateChainHandler.initApi(chainInfo.slug, endpoint, {
          providerName,
          onUpdateStatus
        });
        this.substrateChainHandler.setSubstrateApi(chainInfo.slug, chainApi);
      }
    }
    if (chainInfo.evmInfo !== null && chainInfo.evmInfo !== undefined) {
      const chainApi = await this.evmChainHandler.initApi(chainInfo.slug, endpoint, {
        providerName,
        onUpdateStatus
      });
      this.evmChainHandler.setEvmApi(chainInfo.slug, chainApi);
    }
  }
  destroyApiForChain(chainInfo) {
    if (chainInfo.substrateInfo !== null) {
      this.substrateChainHandler.destroySubstrateApi(chainInfo.slug);
    }
    if (chainInfo.evmInfo !== null) {
      this.evmChainHandler.destroyEvmApi(chainInfo.slug);
    }
  }
  async enableChain(chainSlug) {
    const chainInfo = this.getChainInfoByKey(chainSlug);
    const chainStateMap = this.getChainStateMap();
    if (chainStateMap[chainSlug].active || this.lockChainInfoMap) {
      return false;
    }
    this.lockChainInfoMap = true;
    this.dbService.updateChainStore({
      ...chainInfo,
      active: true,
      currentProvider: chainStateMap[chainSlug].currentProvider
    }).catch(console.error);
    chainStateMap[chainSlug].active = true;
    await this.initApiForChain(chainInfo);
    this.lockChainInfoMap = false;
    this.eventService.emit('chain.updateState', chainSlug);
    this.updateChainStateMapSubscription();
    return true;
  }
  async enableChains(chainSlugs) {
    const chainInfoMap = this.getChainInfoMap();
    const chainStateMap = this.getChainStateMap();
    let needUpdate = false;
    if (this.lockChainInfoMap) {
      return false;
    }
    this.lockChainInfoMap = true;
    const initPromises = chainSlugs.map(async chainSlug => {
      var _chainStateMap$chainS;
      const chainInfo = chainInfoMap[chainSlug];
      const currentState = (_chainStateMap$chainS = chainStateMap[chainSlug]) === null || _chainStateMap$chainS === void 0 ? void 0 : _chainStateMap$chainS.active;
      if (!currentState) {
        this.dbService.updateChainStore({
          ...chainInfo,
          active: true,
          currentProvider: chainStateMap[chainSlug].currentProvider
        }).catch(console.error);
        chainStateMap[chainSlug].active = true;
        await this.initApiForChain(chainInfo);
        this.eventService.emit('chain.updateState', chainSlug);
        needUpdate = true;
      }
    });
    await Promise.all(initPromises);
    this.lockChainInfoMap = false;
    needUpdate && this.updateChainStateMapSubscription();
    return needUpdate;
  }
  async reconnectChain(chain) {
    var _this$getSubstrateApi, _this$getEvmApi;
    await ((_this$getSubstrateApi = this.getSubstrateApi(chain)) === null || _this$getSubstrateApi === void 0 ? void 0 : _this$getSubstrateApi.recoverConnect());
    await ((_this$getEvmApi = this.getEvmApi(chain)) === null || _this$getEvmApi === void 0 ? void 0 : _this$getEvmApi.recoverConnect());
    return true;
  }
  disableChain(chainSlug) {
    const chainInfo = this.getChainInfoByKey(chainSlug);
    const chainStateMap = this.getChainStateMap();
    if (!chainStateMap[chainSlug].active || this.lockChainInfoMap) {
      return false;
    }
    this.lockChainInfoMap = true;
    chainStateMap[chainSlug].active = false;
    // Set disconnect state for inactive chain
    chainStateMap[chainSlug].connectionStatus = _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED;
    this.destroyApiForChain(chainInfo);
    this.dbService.updateChainStore({
      ...chainInfo,
      active: false,
      currentProvider: chainStateMap[chainSlug].currentProvider
    }).catch(console.error);
    this.updateChainStateMapSubscription();
    this.lockChainInfoMap = false;
    this.eventService.emit('chain.updateState', chainSlug);
    return true;
  }
  checkExistedPredefinedChain(latestChainInfoMap, genesisHash, evmChainId) {
    let duplicatedSlug = '';
    if (genesisHash) {
      Object.values(latestChainInfoMap).forEach(chainInfo => {
        if (chainInfo.substrateInfo && chainInfo.substrateInfo.genesisHash === genesisHash) {
          duplicatedSlug = chainInfo.slug;
        }
      });
    } else if (evmChainId) {
      Object.values(latestChainInfoMap).forEach(chainInfo => {
        if (chainInfo.evmInfo && chainInfo.evmInfo.evmChainId === evmChainId) {
          duplicatedSlug = chainInfo.slug;
        }
      });
    }
    return duplicatedSlug;
  }
  async fetchLatestData(src, defaultValue) {
    return Promise.resolve(defaultValue);
    // try {
    //   const timeout = new Promise((resolve) => {
    //     const id = setTimeout(() => {
    //       clearTimeout(id);
    //       resolve(null);
    //     }, 1500);
    //   });
    //   let result = defaultValue;
    //   const resp = await Promise.race([
    //     timeout,
    //     fetch(src)
    //   ]) as Response || null;
    //
    //   if (!resp) {
    //     console.warn('Error fetching latest data', src);
    //
    //     return result;
    //   }
    //
    //   if (resp.ok) {
    //     try {
    //       result = await resp.json();
    //       console.log('Fetched latest data', src);
    //     } catch (err) {
    //       console.warn('Error parsing latest data', src, err);
    //     }
    //   }
    //
    //   return result;
    // } catch (e) {
    //   console.warn('Error fetching latest data', src, e);
    //
    //   return defaultValue;
    // }
  }

  async initChains() {
    const storedChainSettings = await this.dbService.getAllChainStore();
    const latestChainInfoMap = await this.fetchLatestData(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._CHAIN_INFO_SRC, _custom_tokens_ChainInfo__WEBPACK_IMPORTED_MODULE_15__.ChainInfoMap);
    const storedChainSettingMap = {};
    storedChainSettings.forEach(chainStoredSetting => {
      storedChainSettingMap[chainStoredSetting.slug] = chainStoredSetting;
    });
    const newStorageData = [];
    const deprecatedChains = [];
    const deprecatedChainMap = {};
    if (storedChainSettings.length === 0) {
      this.dataMap.chainInfoMap = latestChainInfoMap;
      Object.values(latestChainInfoMap).forEach(chainInfo => {
        this.dataMap.chainStateMap[chainInfo.slug] = {
          currentProvider: Object.keys(chainInfo.providers)[0],
          slug: chainInfo.slug,
          connectionStatus: _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED,
          active: _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._DEFAULT_ACTIVE_CHAINS.includes(chainInfo.slug)
        };

        // create data for storage
        newStorageData.push({
          ...chainInfo,
          active: _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._DEFAULT_ACTIVE_CHAINS.includes(chainInfo.slug),
          currentProvider: Object.keys(chainInfo.providers)[0]
        });
      });
    } else {
      const mergedChainInfoMap = latestChainInfoMap;
      for (const [storedSlug, storedChainInfo] of Object.entries(storedChainSettingMap)) {
        if (storedSlug in latestChainInfoMap) {
          // check predefined chains first, keep setting for providers and currentProvider
          mergedChainInfoMap[storedSlug].providers = {
            ...storedChainInfo.providers,
            ...mergedChainInfoMap[storedSlug].providers
          }; // TODO: review merging providers
          this.dataMap.chainStateMap[storedSlug] = {
            currentProvider: storedChainInfo.currentProvider,
            slug: storedSlug,
            connectionStatus: _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED,
            active: storedChainInfo.active
          };
          newStorageData.push({
            ...mergedChainInfoMap[storedSlug],
            active: storedChainInfo.active,
            currentProvider: storedChainInfo.currentProvider
          });
        } else {
          var _storedChainInfo$subs, _storedChainInfo$evmI;
          // only custom chains are left
          // check custom chain duplicated with predefined chain => merge into predefined chain
          const duplicatedDefaultSlug = this.checkExistedPredefinedChain(latestChainInfoMap, (_storedChainInfo$subs = storedChainInfo.substrateInfo) === null || _storedChainInfo$subs === void 0 ? void 0 : _storedChainInfo$subs.genesisHash, (_storedChainInfo$evmI = storedChainInfo.evmInfo) === null || _storedChainInfo$evmI === void 0 ? void 0 : _storedChainInfo$evmI.evmChainId);
          if (duplicatedDefaultSlug.length > 0) {
            // merge custom chain with existed chain
            mergedChainInfoMap[duplicatedDefaultSlug].providers = {
              ...storedChainInfo.providers,
              ...mergedChainInfoMap[duplicatedDefaultSlug].providers
            };
            this.dataMap.chainStateMap[duplicatedDefaultSlug] = {
              currentProvider: storedChainInfo.currentProvider,
              slug: duplicatedDefaultSlug,
              connectionStatus: _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED,
              active: storedChainInfo.active
            };
            newStorageData.push({
              ...mergedChainInfoMap[duplicatedDefaultSlug],
              active: storedChainInfo.active,
              currentProvider: storedChainInfo.currentProvider
            });
            deprecatedChainMap[storedSlug] = duplicatedDefaultSlug;
            deprecatedChains.push(storedSlug);
          } else {
            mergedChainInfoMap[storedSlug] = {
              slug: storedSlug,
              name: storedChainInfo.name,
              providers: storedChainInfo.providers,
              evmInfo: storedChainInfo.evmInfo,
              substrateInfo: storedChainInfo.substrateInfo,
              isTestnet: storedChainInfo.isTestnet,
              chainStatus: storedChainInfo.chainStatus,
              icon: storedChainInfo.icon
            };
            this.dataMap.chainStateMap[storedSlug] = {
              currentProvider: storedChainInfo.currentProvider,
              slug: storedSlug,
              connectionStatus: _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED,
              active: storedChainInfo.active
            };
            newStorageData.push({
              ...mergedChainInfoMap[storedSlug],
              active: storedChainInfo.active,
              currentProvider: storedChainInfo.currentProvider
            });
          }
        }
      }

      // Fill in the missing chainState and storageData (new chains never before seen)
      Object.entries(mergedChainInfoMap).forEach(([slug, chainInfo]) => {
        if (!(slug in this.dataMap.chainStateMap)) {
          this.dataMap.chainStateMap[slug] = {
            currentProvider: Object.keys(chainInfo.providers)[0],
            slug,
            connectionStatus: _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED,
            active: _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._DEFAULT_ACTIVE_CHAINS.includes(slug)
          };
          newStorageData.push({
            ...mergedChainInfoMap[slug],
            active: _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._DEFAULT_ACTIVE_CHAINS.includes(slug),
            currentProvider: Object.keys(chainInfo.providers)[0]
          });
        }
      });
      this.dataMap.chainInfoMap = mergedChainInfoMap;
    }
    await this.dbService.bulkUpdateChainStore(newStorageData);
    await this.dbService.removeFromChainStore(deprecatedChains); // remove outdated records
    await this.initAssetRegistry(deprecatedChainMap);
  }
  async initAssetRegistry(deprecatedCustomChainMap) {
    const storedAssetRegistry = await this.dbService.getAllAssetStore();
    const latestAssetRegistry = await this.fetchLatestData(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._CHAIN_ASSET_SRC, _custom_tokens_ChainAsset__WEBPACK_IMPORTED_MODULE_16__.ChainAssetMap);

    // Fill out zk assets from latestAssetRegistry if not supported
    if (!_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_4__.MODULE_SUPPORT.MANTA_ZK) {
      Object.keys(latestAssetRegistry).forEach(slug => {
        if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isMantaZkAsset)(latestAssetRegistry[slug])) {
          delete latestAssetRegistry[slug];
        }
      });
    }
    if (storedAssetRegistry.length === 0) {
      this.dataMap.assetRegistry = latestAssetRegistry;
    } else {
      const mergedAssetRegistry = latestAssetRegistry;
      const parsedStoredAssetRegistry = {};
      const deprecatedAssets = [];

      // Update custom assets of merged custom chains
      Object.values(storedAssetRegistry).forEach(storedAsset => {
        if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isCustomAsset)(storedAsset.slug) && Object.keys(deprecatedCustomChainMap).includes(storedAsset.originChain)) {
          var _storedAsset$metadata;
          const newOriginChain = deprecatedCustomChainMap[storedAsset.originChain];
          const newSlug = this.generateSlugForSmartContractAsset(newOriginChain, storedAsset.assetType, storedAsset.symbol, (_storedAsset$metadata = storedAsset.metadata) === null || _storedAsset$metadata === void 0 ? void 0 : _storedAsset$metadata.contractAddress);
          deprecatedAssets.push(storedAsset.slug);
          parsedStoredAssetRegistry[newSlug] = {
            ...storedAsset,
            originChain: newOriginChain,
            slug: newSlug
          };
        } else {
          parsedStoredAssetRegistry[storedAsset.slug] = storedAsset;
        }
      });
      for (const storedAssetInfo of Object.values(parsedStoredAssetRegistry)) {
        let duplicated = false;
        for (const defaultChainAsset of Object.values(latestAssetRegistry)) {
          // case merge custom asset with default asset
          if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isEqualSmartContractAsset)(storedAssetInfo, defaultChainAsset)) {
            duplicated = true;
            break;
          }
        }
        if (!duplicated) {
          mergedAssetRegistry[storedAssetInfo.slug] = storedAssetInfo;
        } else {
          deprecatedAssets.push(storedAssetInfo.slug);
        }
      }
      this.dataMap.assetRegistry = mergedAssetRegistry;
      await this.dbService.removeFromAssetStore(deprecatedAssets);
    }
  }
  updateChainStateMapSubscription() {
    this.chainStateMapSubject.next(this.getChainStateMap());
  }
  updateChainInfoMapSubscription() {
    this.chainInfoMapSubject.next(this.getChainInfoMap());
  }
  updateChainSubscription() {
    this.updateChainInfoMapSubscription();
    this.updateChainStateMapSubscription();
  }

  // Can only update providers or block explorer, crowdloan url
  async updateChain(params) {
    const chainSlug = params.chainEditInfo.slug;
    const targetChainInfo = this.getChainInfoByKey(chainSlug);
    const targetChainState = this.getChainStateByKey(chainSlug);
    const changedProvider = params.chainEditInfo.currentProvider !== targetChainState.currentProvider;
    if (changedProvider) {
      targetChainInfo.providers = params.chainEditInfo.providers;
      targetChainState.currentProvider = params.chainEditInfo.currentProvider;

      // Enable chain if not before
      if (!targetChainState.active) {
        targetChainState.active = true;
      }

      // It auto detects the change of api url to create new instance or reuse existed one
      await this.initApiForChain(targetChainInfo);
      this.updateChainStateMapSubscription();
    }
    if (targetChainInfo.substrateInfo) {
      if (params.chainEditInfo.blockExplorer !== undefined) {
        targetChainInfo.substrateInfo.blockExplorer = params.chainEditInfo.blockExplorer;
      }
      if (params.chainEditInfo.crowdloanUrl !== undefined) {
        targetChainInfo.substrateInfo.crowdloanUrl = params.chainEditInfo.crowdloanUrl;
      }
    }
    if (targetChainInfo.evmInfo) {
      if (params.chainEditInfo.blockExplorer !== undefined) {
        targetChainInfo.evmInfo.blockExplorer = params.chainEditInfo.blockExplorer;
      }
    }
    this.updateChainInfoMapSubscription();
    this.dbService.updateChainStore({
      ...targetChainInfo,
      active: targetChainState.active,
      currentProvider: targetChainState.currentProvider
    }).then(() => {
      this.eventService.emit('chain.updateState', chainSlug);
    }).catch(e => this.logger.error(e));
  }
  async insertChain(params) {
    const chainInfoMap = this.getChainInfoMap();
    if (!params.chainSpec) {
      return;
    }
    const newChainSlug = this.generateSlugForCustomChain(params.chainEditInfo.chainType, params.chainEditInfo.name, params.chainSpec.paraId, params.chainSpec.evmChainId);
    let substrateInfo = null;
    let evmInfo = null;
    if (params.chainSpec.genesisHash !== '') {
      substrateInfo = {
        crowdloanFunds: params.chainSpec.crowdloanFunds || null,
        crowdloanParaId: params.chainSpec.crowdloanParaId || null,
        addressPrefix: params.chainSpec.addressPrefix,
        blockExplorer: params.chainEditInfo.blockExplorer || null,
        chainType: params.chainSpec.paraId !== null ? _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._SubstrateChainType.PARACHAIN : _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._SubstrateChainType.RELAYCHAIN,
        crowdloanUrl: params.chainEditInfo.crowdloanUrl || null,
        decimals: params.chainSpec.decimals,
        existentialDeposit: params.chainSpec.existentialDeposit,
        paraId: params.chainSpec.paraId,
        symbol: params.chainEditInfo.symbol,
        genesisHash: params.chainSpec.genesisHash,
        relaySlug: null,
        hasNativeNft: false,
        supportStaking: params.chainSpec.paraId === null,
        supportSmartContract: null
      };
    } else if (params.chainSpec.evmChainId !== null) {
      evmInfo = {
        supportSmartContract: [_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.ERC20, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.ERC721],
        // set support for ERC token by default
        blockExplorer: params.chainEditInfo.blockExplorer || null,
        decimals: params.chainSpec.decimals,
        evmChainId: params.chainSpec.evmChainId,
        existentialDeposit: params.chainSpec.existentialDeposit,
        symbol: params.chainEditInfo.symbol,
        abiExplorer: null
      };
    }
    const chainInfo = {
      slug: newChainSlug,
      name: params.chainEditInfo.name,
      providers: params.chainEditInfo.providers,
      substrateInfo,
      evmInfo,
      isTestnet: false,
      chainStatus: _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._ChainStatus.ACTIVE,
      icon: '' // Todo: Allow update with custom chain
    };

    // insert new chainInfo
    chainInfoMap[newChainSlug] = chainInfo;

    // insert new chainState
    const chainStateMap = this.getChainStateMap();
    chainStateMap[newChainSlug] = {
      active: true,
      connectionStatus: _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED,
      currentProvider: params.chainEditInfo.currentProvider,
      slug: newChainSlug
    };
    await this.initApiForChain(chainInfo);

    // create a record in assetRegistry for native token and update store/subscription
    const nativeTokenSlug = this.upsertCustomToken({
      assetType: _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.NATIVE,
      decimals: params.chainSpec.decimals,
      metadata: null,
      minAmount: params.chainSpec.existentialDeposit,
      multiChainAsset: null,
      name: params.chainEditInfo.name,
      originChain: newChainSlug,
      priceId: params.chainEditInfo.priceId || null,
      slug: '',
      symbol: params.chainEditInfo.symbol,
      hasValue: true,
      icon: ''
    });

    // update subscription
    this.updateChainSubscription();

    // TODO: add try, catch, move storage update and subject update to somewhere else
    this.dbService.updateChainStore({
      active: true,
      currentProvider: params.chainEditInfo.currentProvider,
      ...chainInfo
    }).then(() => {
      this.eventService.emit('chain.add', newChainSlug);
    }).catch(e => this.logger.error(e));
    return nativeTokenSlug;
  }
  async upsertChain(params) {
    if (this.lockChainInfoMap) {
      return;
    }
    this.lockChainInfoMap = true;
    let result;
    if (params.mode === 'update') {
      // update existing chainInfo
      await this.updateChain(params);
    } else {
      // insert custom network
      result = await this.insertChain(params);
    }
    this.lockChainInfoMap = false;
    return result;
  }
  generateSlugForCustomChain(chainType, name, paraId, evmChainId) {
    const parsedName = name.replaceAll(' ', '').toLowerCase();
    if (evmChainId !== null && evmChainId !== undefined) {
      return `${_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._CUSTOM_PREFIX}${chainType}-${parsedName}-${evmChainId}`;
    } else {
      let slug = `${_subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._CUSTOM_PREFIX}${chainType}-${parsedName}`;
      if (paraId !== null && paraId !== undefined) {
        slug = slug.concat(`-${paraId}`);
      }
      return slug;
    }
  }
  async validateCustomChain(provider, existingChainSlug) {
    // currently only supports WS provider for Substrate and HTTP provider for EVM
    let result = {
      decimals: 0,
      existentialDeposit: '',
      paraId: null,
      symbol: '',
      success: false,
      genesisHash: '',
      addressPrefix: '',
      name: '',
      evmChainId: null
    };
    try {
      const {
        conflictChainName: providerConflictChainName,
        conflictChainSlug: providerConflictChainSlug,
        error: providerError
      } = this.validateProvider(provider, existingChainSlug);
      if (providerError === _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.NONE) {
        let api;

        // TODO: EVM chain might have WS provider
        if (provider.startsWith('http')) {
          // HTTP provider is EVM by default
          api = await this.evmChainHandler.initApi('custom', provider);
        } else {
          api = await this.substrateChainHandler.initApi('custom', provider);
        }
        const connectionTimeout = new Promise(resolve => {
          const id = setTimeout(() => {
            clearTimeout(id);
            resolve(null);
          }, 5000);
        });
        const connectionTrial = await Promise.race([connectionTimeout, api.isReady]); // check connection

        if (connectionTrial !== null) {
          let _api = connectionTrial;
          const chainSpec = await this.getChainSpecByProvider(_api);
          result = Object.assign(result, chainSpec);

          // TODO: disconnect and destroy API
          // @ts-ignore
          // eslint-disable-next-line @typescript-eslint/no-unsafe-call
          // _api?.api?.disconnect && await _api?.api?.disconnect();
          _api = null;
          if (existingChainSlug) {
            // check if same network (with existingChainSlug)
            const existedChainInfo = this.getChainInfoByKey(existingChainSlug);
            if (existedChainInfo.evmInfo !== null) {
              if (result.evmChainId !== existedChainInfo.evmInfo.evmChainId) {
                result.error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.PROVIDER_NOT_SAME_CHAIN;
              }
            } else if (existedChainInfo.substrateInfo !== null) {
              if (result.genesisHash !== existedChainInfo.substrateInfo.genesisHash) {
                result.error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.PROVIDER_NOT_SAME_CHAIN;
              }
            }
          } else {
            // check if network existed
            if (result.evmChainId !== null) {
              for (const chainInfo of Object.values(this.getEvmChainInfoMap())) {
                var _chainInfo$evmInfo;
                if ((chainInfo === null || chainInfo === void 0 ? void 0 : (_chainInfo$evmInfo = chainInfo.evmInfo) === null || _chainInfo$evmInfo === void 0 ? void 0 : _chainInfo$evmInfo.evmChainId) === result.evmChainId) {
                  result.error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.EXISTED_CHAIN;
                  result.conflictChain = chainInfo.name;
                  result.conflictKey = chainInfo.slug;
                  break;
                }
              }
            } else if (result.genesisHash !== '') {
              for (const chainInfo of Object.values(this.getSubstrateChainInfoMap())) {
                var _chainInfo$substrateI;
                if ((chainInfo === null || chainInfo === void 0 ? void 0 : (_chainInfo$substrateI = chainInfo.substrateInfo) === null || _chainInfo$substrateI === void 0 ? void 0 : _chainInfo$substrateI.genesisHash) === result.genesisHash) {
                  result.error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.EXISTED_CHAIN;
                  result.conflictChain = chainInfo.name;
                  result.conflictKey = chainInfo.slug;
                  break;
                }
              }
            }
          }
        } else {
          result.error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.CONNECTION_FAILURE;
          result.success = false;
        }
      } else {
        result.success = false;
        result.error = providerError;
        result.conflictChain = providerConflictChainName;
        result.conflictKey = providerConflictChainSlug;
      }
      if (!result.error && (result.evmChainId !== null || result.genesisHash !== '')) {
        result.success = true;
      }
      return result;
    } catch (e) {
      console.error('Error connecting to provider', e);
      result.success = false;
      result.error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.CONNECTION_FAILURE;
      return result;
    }
  }
  async getChainSpecByProvider(api) {
    if (api.api instanceof (web3__WEBPACK_IMPORTED_MODULE_0___default())) {
      return await this.evmChainHandler.getChainSpec(api);
    }
    return await this.substrateChainHandler.getChainSpec(api);
  }
  validateProvider(targetProvider, existingChainSlug) {
    let error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.NONE;
    const chainInfoMap = this.getChainInfoMap();
    const allExistedProviders = [];
    let conflictChainSlug = '';
    let conflictChainName = '';
    if (existingChainSlug) {
      const chainInfo = chainInfoMap[existingChainSlug];
      if (Object.values(chainInfo.providers).includes(targetProvider)) {
        error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.EXISTED_PROVIDER;
        conflictChainSlug = chainInfo.slug;
        conflictChainName = chainInfo.name;
      }
      return {
        error,
        conflictChainSlug,
        conflictChainName
      };
    }

    // get all providers
    for (const [key, value] of Object.entries(chainInfoMap)) {
      Object.values(value.providers).forEach(provider => {
        allExistedProviders.push({
          key,
          provider
        });
      });
    }
    for (const {
      key,
      provider
    } of allExistedProviders) {
      if (provider === targetProvider) {
        error = _subwallet_extension_base_services_chain_service_handler_types__WEBPACK_IMPORTED_MODULE_17__._CHAIN_VALIDATION_ERROR.EXISTED_PROVIDER;
        conflictChainSlug = key;
        conflictChainName = chainInfoMap[key].name;
        break;
      }
    }
    return {
      error,
      conflictChainSlug,
      conflictChainName
    };
  }
  async getSmartContractTokenInfo(contractAddress, tokenType, originChain, contractCaller) {
    if ([_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.ERC721, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.ERC20].includes(tokenType)) {
      return await this.evmChainHandler.getSmartContractTokenInfo(contractAddress, tokenType, originChain);
    } else if ([_subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.PSP34, _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_12__._AssetType.PSP22].includes(tokenType)) {
      return await this.substrateChainHandler.getSmartContractTokenInfo(contractAddress, tokenType, originChain, contractCaller);
    }
    return {
      decimals: -1,
      name: '',
      symbol: '',
      contractError: false
    };
  }
  async validateCustomToken(data) {
    const assetRegistry = this.getSmartContractTokens();
    let existedToken;
    for (const token of Object.values(assetRegistry)) {
      var _token$metadata2;
      const contractAddress = token === null || token === void 0 ? void 0 : (_token$metadata2 = token.metadata) === null || _token$metadata2 === void 0 ? void 0 : _token$metadata2.contractAddress;
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isEqualContractAddress)(contractAddress, data.contractAddress) && token.assetType === data.type && token.originChain === data.originChain) {
        existedToken = token;
        break;
      }
    }
    if (existedToken) {
      var _existedToken;
      return {
        decimals: existedToken.decimals || 0,
        name: existedToken.name,
        symbol: existedToken.symbol,
        isExist: !!existedToken,
        existedSlug: (_existedToken = existedToken) === null || _existedToken === void 0 ? void 0 : _existedToken.slug,
        contractError: false
      };
    }
    const {
      contractError,
      decimals,
      name,
      symbol
    } = await this.getSmartContractTokenInfo(data.contractAddress, data.type, data.originChain, data.contractCaller);
    return {
      name,
      decimals,
      symbol,
      isExist: !!existedToken,
      contractError
    };
  }
  generateSlugForSmartContractAsset(originChain, assetType, symbol, contractAddress) {
    return `${originChain}-${assetType}-${symbol}-${contractAddress}`;
  }
  generateSlugForNativeToken(originChain, assetType, symbol) {
    return `${originChain}-${assetType}-${symbol}`;
  }
  refreshSubstrateApi(slug) {
    this.substrateChainHandler.recoverApi(slug).catch(console.error);
  }
  refreshEvmApi(slug) {
    this.evmChainHandler.recoverApi(slug).catch(console.error);
  }
  async stopAllChainApis() {
    await Promise.all([this.substrateChainHandler.sleep(), this.evmChainHandler.sleep()]);
  }
  async resumeAllChainApis() {
    await Promise.all([this.substrateChainHandler.wakeUp(), this.evmChainHandler.wakeUp()]);
  }
  checkAndUpdateStatusMapForChain(chainSlug) {
    const substrateApiMap = this.getSubstrateApiMap();
    const evmApiMap = this.getEvmApiMap();
    const chainState = this.getChainStateByKey(chainSlug);
    let update = false;
    function updateState(current, status) {
      if (current.connectionStatus !== status) {
        current.connectionStatus = status;
        update = true;
      }
    }
    if (chainState.active) {
      const api = substrateApiMap[chainSlug] || evmApiMap[chainSlug];
      if (api) {
        updateState(chainState, api.isApiConnected ? _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.CONNECTED : _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED);
      }
    } else {
      updateState(chainState, _subwallet_extension_base_services_chain_service_types__WEBPACK_IMPORTED_MODULE_10__._ChainConnectionStatus.DISCONNECTED);
    }
    if (update) {
      this.dataMap.chainStateMap[chainSlug] = chainState;
    }
  }
  async initAssetSettings() {
    const assetSettings = await this.getAssetSettings();
    const activeChainSlugs = this.getActiveChainSlugs();
    const assetRegistry = this.getAssetRegistry();
    if (Object.keys(assetSettings).length === 0) {
      // only initiate the first time
      Object.values(assetRegistry).forEach(assetInfo => {
        const isSettingExisted = (assetInfo.slug in assetSettings);

        // Set visible for every enabled chains
        if (activeChainSlugs.includes(assetInfo.originChain) && !isSettingExisted) {
          // Setting only exist when set either by chain settings or user
          assetSettings[assetInfo.slug] = {
            visible: true
          };
        }
      });
      this.setAssetSettings(assetSettings, false);
    }
    this.eventService.emit('asset.ready', true);
  }
  setAssetSettings(assetSettings, emitEvent = true) {
    const updateAssets = [];
    if (emitEvent) {
      Object.keys(assetSettings).forEach(slug => {
        var _this$assetSettingSub;
        if (((_this$assetSettingSub = this.assetSettingSubject.value[slug]) === null || _this$assetSettingSub === void 0 ? void 0 : _this$assetSettingSub.visible) !== assetSettings[slug].visible) {
          updateAssets.push(slug);
        }
      });
    }
    this.assetSettingSubject.next(assetSettings);
    updateAssets.forEach(slug => {
      this.eventService.emit('asset.updateState', slug);
    });
    this.store.set('AssetSetting', assetSettings);
  }
  setMantaZkAssetSettings(visible) {
    const zkAssetSettings = {};
    Object.values(this.dataMap.assetRegistry).forEach(asset => {
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isMantaZkAsset)(asset)) {
        zkAssetSettings[asset.slug] = {
          visible
        };
      }
    });
    this.store.get('AssetSetting', storedAssetSettings => {
      const newAssetSettings = {
        ...storedAssetSettings,
        ...zkAssetSettings
      };
      this.store.set('AssetSetting', newAssetSettings);
      this.assetSettingSubject.next(newAssetSettings);
      Object.keys(zkAssetSettings).forEach(slug => {
        this.eventService.emit('asset.updateState', slug);
      });
    });
  }
  async getStoreAssetSettings() {
    return new Promise(resolve => {
      this.store.get('AssetSetting', resolve);
    });
  }
  async getAssetSettings() {
    if (Object.keys(this.assetSettingSubject.value).length === 0) {
      const assetSettings = (await this.getStoreAssetSettings()) || {};
      this.assetSettingSubject.next(assetSettings);
    }
    return this.assetSettingSubject.value;
  }
  async updateAssetSetting(assetSlug, assetSetting, autoEnableNativeToken) {
    const currentAssetSettings = await this.getAssetSettings();
    let needUpdateSubject;

    // Update settings
    currentAssetSettings[assetSlug] = assetSetting;
    if (assetSetting.visible) {
      const assetInfo = this.getAssetBySlug(assetSlug);
      const chainState = this.getChainStateByKey(assetInfo.originChain);

      // if chain not enabled, then automatically enable
      if (chainState && !chainState.active) {
        await this.enableChain(chainState.slug);
        needUpdateSubject = true;
        if (autoEnableNativeToken) {
          const nativeAsset = this.getNativeTokenInfo(assetInfo.originChain);
          currentAssetSettings[nativeAsset.slug] = {
            visible: true
          };
        }
      }
    }
    this.setAssetSettings(currentAssetSettings);
    return needUpdateSubject;
  }
  async updateAssetSettingByChain(chainSlug, visible) {
    const storedAssetSettings = await this.getAssetSettings();
    const assetsByChain = this.getFungibleTokensByChain(chainSlug);
    const assetSettings = storedAssetSettings || {};
    Object.values(assetsByChain).forEach(assetInfo => {
      assetSettings[assetInfo.slug] = {
        visible
      };
    });
    this.setAssetSettings(assetSettings);
  }
  subscribeAssetSettings() {
    return this.assetSettingSubject;
  }
  async getChainLogoMap() {
    return await this.fetchLatestData(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._CHAIN_LOGO_MAP_SRC, _custom_tokens_ChainLogoMap__WEBPACK_IMPORTED_MODULE_18__.ChainLogoMap);
  }
  async getAssetLogoMap() {
    return await this.fetchLatestData(_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._ASSET_LOGO_MAP_SRC, _custom_tokens_AssetLogoMap__WEBPACK_IMPORTED_MODULE_19__.AssetLogoMap);
  }
  resetWallet(resetAll) {
    if (resetAll) {
      this.setAssetSettings({});

      // Disconnect chain
      const activeChains = this.getActiveChainInfos();
      for (const chain of Object.keys(activeChains)) {
        if (!_subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_13__._DEFAULT_ACTIVE_CHAINS.includes(chain)) {
          this.disableChain(chain);
        }
      }

      // Remove custom chain
      const allChains = this.getChainInfoMap();
      for (const chain of Object.keys(allChains)) {
        if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isCustomChain)(chain)) {
          this.removeCustomChain(chain);
        }
      }

      // Remove custom asset
      const assetSettings = this.getAssetSettings();
      const customToken = [];
      for (const asset of Object.keys(assetSettings)) {
        if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_11__._isCustomAsset)(asset)) {
          customToken.push(asset);
        }
      }
      this.deleteCustomAssets(customToken);
    }
  }
  getMetadata(chain) {
    return this.dbService.stores.metadata.getMetadata(chain);
  }
  upsertMetadata(chain, metadata) {
    return this.dbService.stores.metadata.upsertMetadata(chain, metadata);
  }
  getMetadataByHash(hash) {
    return this.dbService.stores.metadata.getMetadataByGenesisHash(hash);
  }
}
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "../extension-base/src/services/event-service/index.ts":
/*!*************************************************************!*\
  !*** ../extension-base/src/services/event-service/index.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EventService": () => (/* binding */ EventService)
/* harmony export */ });
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! eventemitter3 */ "../../node_modules/eventemitter3/index.mjs");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0

// Stateless service handle runtime event on background


class EventService extends eventemitter3__WEBPACK_IMPORTED_MODULE_0__["default"] {
  pendingEvents = [];
  lazyEmitter = new eventemitter3__WEBPACK_IMPORTED_MODULE_0__["default"]();
  constructor(options = {
    lazyTime: 300
  }) {
    super();
    this.lazyTime = options.lazyTime;
    this.timeoutId = null;
    this.waitCryptoReady = this.generateWaitPromise('crypto.ready');
    this.waitDatabaseReady = this.generateWaitPromise('database.ready');
    this.waitKeyringReady = this.generateWaitPromise('keyring.ready');
    this.waitAccountReady = this.generateWaitPromise('account.ready');
    this.waitChainReady = this.generateWaitPromise('chain.ready');
    this.waitAssetReady = this.generateWaitPromise('asset.ready');
  }
  generateWaitPromise(eventType) {
    return new Promise(resolve => {
      this.once(eventType, isReady => {
        resolve(isReady);
      });
    });
  }
  setLazyTimeout() {
    if (this.timeoutId) {
      clearTimeout(this.timeoutId);
    }
    this.timeoutId = setTimeout(() => {
      this.emitLazy();
    }, this.lazyTime);
  }
  emitLazy() {
    try {
      this.lazyEmitter.emit('lazy', this.pendingEvents, this.pendingEvents.map(e => e.type));
    } catch (e) {
      console.error('Get error in some listener of lazy event', e);
    }
    this.pendingEvents = [];
    this.timeoutId = null;
  }
  onLazy(callback) {
    this.lazyEmitter.on('lazy', callback);
  }
  offLazy(callback) {
    this.lazyEmitter.off('lazy', callback);
  }
  onceLazy(callback) {
    this.lazyEmitter.once('lazy', callback);
  }
  emit(eventType, ...args) {
    console.debug('Emit event: ', eventType, ...args);
    this.pendingEvents.push({
      type: eventType,
      data: args
    });
    this.setLazyTimeout();
    return super.emit(eventType, ...args);
  }
}

/***/ }),

/***/ "../extension-base/src/services/event-service/types.ts":
/*!*************************************************************!*\
  !*** ../extension-base/src/services/event-service/types.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "COMMON_RELOAD_EVENTS": () => (/* binding */ COMMON_RELOAD_EVENTS)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0

const COMMON_RELOAD_EVENTS = ['account.updateCurrent', 'asset.updateState', 'account.add', 'chain.updateState', 'account.remove', 'chain.add', 'mantaPay.initSync',
// TODO: re-check this
'mantaPay.enable'];

/***/ }),

/***/ "../extension-base/src/services/history-service/constants/index.ts":
/*!*************************************************************************!*\
  !*** ../extension-base/src/services/history-service/constants/index.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MAX_FETCH_PAGE_PER_SESSION": () => (/* binding */ MAX_FETCH_PAGE_PER_SESSION),
/* harmony export */   "MIN__NUM_HISTORY_PER_ACCOUNT": () => (/* binding */ MIN__NUM_HISTORY_PER_ACCOUNT)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0

const MAX_FETCH_PAGE_PER_SESSION = 25;
const MIN__NUM_HISTORY_PER_ACCOUNT = 50;

/***/ }),

/***/ "../extension-base/src/services/history-service/helpers/recoverHistoryStatus.ts":
/*!**************************************************************************************!*\
  !*** ../extension-base/src/services/history-service/helpers/recoverHistoryStatus.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HistoryRecoverStatus": () => (/* binding */ HistoryRecoverStatus),
/* harmony export */   "historyRecover": () => (/* binding */ historyRecover)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


let HistoryRecoverStatus;
(function (HistoryRecoverStatus) {
  HistoryRecoverStatus["SUCCESS"] = "SUCCESS";
  HistoryRecoverStatus["FAILED"] = "FAILED";
  HistoryRecoverStatus["API_INACTIVE"] = "API_INACTIVE";
  HistoryRecoverStatus["LACK_INFO"] = "LACK_INFO";
  HistoryRecoverStatus["FAIL_DETECT"] = "FAIL_DETECT";
  HistoryRecoverStatus["UNKNOWN"] = "UNKNOWN";
})(HistoryRecoverStatus || (HistoryRecoverStatus = {}));
const BLOCK_LIMIT = 6;
const substrateRecover = async (history, chainService) => {
  const {
    address,
    blockHash,
    chain,
    extrinsicHash,
    from,
    nonce,
    startBlock
  } = history;
  const result = {
    status: HistoryRecoverStatus.UNKNOWN
  };
  try {
    const substrateApi = chainService.getSubstrateApi(chain);
    if (substrateApi) {
      const _api = await substrateApi.isReady;
      const api = _api.api;
      if (!blockHash) {
        if (!nonce || !startBlock) {
          console.log(`Fail to find extrinsic for ${address} on ${chain}: With nonce ${nonce || 'undefined'} from block ${startBlock || 'undefined'}`);
          return {
            status: HistoryRecoverStatus.LACK_INFO
          };
        }
        const currentBlock = (await api.query.system.number()).toPrimitive();
        for (let i = 1, found = false; i < BLOCK_LIMIT && !found && startBlock + i <= currentBlock; i++) {
          const blockHash = (await api.rpc.chain.getBlockHash(startBlock + i)).toHex();
          const block = await api.rpc.chain.getBlock(blockHash);
          const extrinsics = block.block.extrinsics;
          let index;
          for (const [idx, extrinsic] of Object.entries(extrinsics)) {
            if (extrinsic.signer && (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.isSameAddress)(from, extrinsic.signer.toString()) && nonce === extrinsic.nonce.toNumber()) {
              index = parseInt(idx);
              found = true;
              result.extrinsicHash = extrinsic.hash.toHex();
              result.blockHash = block.block.hash.toHex();
              result.blockNumber = block.block.header.number.toNumber();
              break;
            }
          }
          if (index !== undefined) {
            const allEvents = await api.query.system.events.at(blockHash);
            const events = allEvents.filter(({
              phase
            }) => phase.isApplyExtrinsic && phase.asApplyExtrinsic.eq(index));
            for (const {
              event
            } of events) {
              if (api.events.system.ExtrinsicSuccess.is(event)) {
                return {
                  ...result,
                  status: HistoryRecoverStatus.SUCCESS
                };
              } else if (api.events.system.ExtrinsicFailed.is(event)) {
                return {
                  ...result,
                  status: HistoryRecoverStatus.FAILED
                };
              }
            }
          }
        }
      } else {
        const block = await api.rpc.chain.getBlock(blockHash);
        const allEvents = await api.query.system.events.at(blockHash);
        const extrinsics = block.block.extrinsics;
        let index;
        for (const [idx, extrinsic] of Object.entries(extrinsics)) {
          if (extrinsicHash === extrinsic.hash.toHex()) {
            index = parseInt(idx);
            break;
          }
        }
        if (index === undefined) {
          console.log(`Fail to find extrinsic ${extrinsicHash} on ${chain}`);
          return {
            status: HistoryRecoverStatus.FAIL_DETECT
          };
        }
        const events = allEvents.filter(({
          phase
        }) => phase.isApplyExtrinsic && phase.asApplyExtrinsic.eq(index));
        for (const {
          event
        } of events) {
          if (api.events.system.ExtrinsicSuccess.is(event)) {
            return {
              ...result,
              status: HistoryRecoverStatus.SUCCESS
            };
          } else if (api.events.system.ExtrinsicFailed.is(event)) {
            return {
              ...result,
              status: HistoryRecoverStatus.FAILED
            };
          }
        }
      }
      return {
        status: HistoryRecoverStatus.FAIL_DETECT
      };
    } else {
      console.error(`Fail to update history ${chain}-${extrinsicHash}: Api not active`);
      return {
        status: HistoryRecoverStatus.API_INACTIVE
      };
    }
  } catch (e) {
    console.error(`Fail to update history ${chain}-${extrinsicHash}:`, e.message);
    return {
      status: HistoryRecoverStatus.UNKNOWN
    };
  }
};
const evmRecover = async (history, chainService) => {
  const {
    address,
    chain,
    extrinsicHash,
    from,
    nonce,
    startBlock
  } = history;
  const result = {
    status: HistoryRecoverStatus.UNKNOWN
  };
  try {
    const evmApi = chainService.getEvmApi(chain);
    if (evmApi) {
      const _api = await evmApi.isReady;
      const api = _api.api;
      if (extrinsicHash) {
        const transactionReceipt = await api.eth.getTransactionReceipt(extrinsicHash);
        return {
          ...result,
          status: transactionReceipt.status ? HistoryRecoverStatus.SUCCESS : HistoryRecoverStatus.FAILED
        };
      } else {
        if (!nonce || !startBlock) {
          console.log(`Fail to find extrinsic for ${address} on ${chain}: With nonce ${nonce || 'undefined'} from block ${startBlock || 'undefined'}`);
          return {
            ...result,
            status: HistoryRecoverStatus.LACK_INFO
          };
        }
        const currentBlock = await api.eth.getBlockNumber();
        for (let i = 1, found = false; i < BLOCK_LIMIT && !found && startBlock + i <= currentBlock; i++) {
          const block = await api.eth.getBlock(startBlock + i, true);
          for (const transaction of block.transactions) {
            if ((0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.isSameAddress)(transaction.from, from) && nonce === transaction.nonce) {
              result.extrinsicHash = transaction.hash;
              result.blockHash = block.hash;
              result.blockNumber = block.number;
              found = true;
              break;
            }
          }
          if (result.extrinsicHash) {
            const transactionReceipt = await api.eth.getTransactionReceipt(result.extrinsicHash);
            return {
              ...result,
              status: transactionReceipt.status ? HistoryRecoverStatus.SUCCESS : HistoryRecoverStatus.FAILED
            };
          }
        }
      }
      return {
        status: HistoryRecoverStatus.FAIL_DETECT
      };
    } else {
      console.error(`Fail to update history ${chain}-${extrinsicHash}: Api not active`);
      return {
        status: HistoryRecoverStatus.API_INACTIVE
      };
    }
  } catch (e) {
    console.error(`Fail to update history ${chain}-${extrinsicHash}:`, e.message);
    return {
      status: HistoryRecoverStatus.UNKNOWN
    };
  }
};

// undefined: Cannot check status
// true: Transaction success
// false: Transaction failed
const historyRecover = async (history, chainService) => {
  const {
    chainType
  } = history;
  if (chainType) {
    const checkFunction = chainType === 'substrate' ? substrateRecover : evmRecover;
    return await checkFunction(history, chainService);
  } else {
    return {
      status: HistoryRecoverStatus.LACK_INFO
    };
  }
};

/***/ }),

/***/ "../extension-base/src/services/history-service/index.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/services/history-service/index.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HistoryService": () => (/* binding */ HistoryService)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/base/types */ "../extension-base/src/services/base/types.ts");
/* harmony import */ var _subwallet_extension_base_services_history_service_helpers_recoverHistoryStatus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/history-service/helpers/recoverHistoryStatus */ "../extension-base/src/services/history-service/helpers/recoverHistoryStatus.ts");
/* harmony import */ var _subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/utils/promise */ "../extension-base/src/utils/promise.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/bundle.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var _subsquid_multi_chain_history__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./subsquid-multi-chain-history */ "../extension-base/src/services/history-service/subsquid-multi-chain-history.ts");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0









class HistoryService {
  historySubject = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject([]);
  #needRecoveryHistories = {};
  constructor(dbService, chainService, eventService, keyringService) {
    this.dbService = dbService;
    this.chainService = chainService;
    this.eventService = eventService;
    this.keyringService = keyringService;
    this.init().catch(console.error);
  }
  fetchPromise = null;
  interval = undefined;
  recoverInterval = undefined;
  async fetchAndLoadHistories(addresses) {
    if (!addresses || addresses.length === 0) {
      return [];
    }
    const chainMap = this.chainService.getChainInfoMap();

    // Query data from subscan or any indexer
    const historyRecords = await (0,_subsquid_multi_chain_history__WEBPACK_IMPORTED_MODULE_1__.fetchMultiChainHistories)(addresses, chainMap);

    // Fill additional info
    const accountMap = Object.entries(this.keyringService.accounts).reduce((map, [address, account]) => {
      map[address.toLowerCase()] = account.json.meta.name || address;
      return map;
    }, {});
    historyRecords.forEach(record => {
      var _record$from, _record$to;
      record.fromName = accountMap[(_record$from = record.from) === null || _record$from === void 0 ? void 0 : _record$from.toLowerCase()];
      record.toName = accountMap[(_record$to = record.to) === null || _record$to === void 0 ? void 0 : _record$to.toLowerCase()];
    });
    await this.addHistoryItems(historyRecords);
    return historyRecords;
  }
  async getHistories() {
    const addressList = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.getAccounts().map(a => a.address);
    if (!this.fetchPromise) {
      this.fetchPromise = (async () => {
        await this.fetchAndLoadHistories(addressList);
        const histories = await this.dbService.getHistories();
        this.historySubject.next(histories);
      })();
    }
    return Promise.resolve(this.historySubject.getValue());
  }
  async getHistorySubject() {
    await this.getHistories();
    return this.historySubject;
  }
  async updateHistories(chain, extrinsicHash, updateData) {
    const existedRecords = await this.dbService.getHistories({
      chain,
      extrinsicHash
    });
    const updatedRecords = existedRecords.map(r => {
      return {
        ...r,
        ...updateData
      };
    });
    await this.addHistoryItems(updatedRecords);
  }
  async updateHistoryByExtrinsicHash(extrinsicHash, updateData) {
    await this.dbService.updateHistoryByExtrinsicHash(extrinsicHash, updateData);
    this.historySubject.next(await this.dbService.getHistories());
  }

  // Insert history without check override origin 'app'
  async insertHistories(historyItems) {
    await this.dbService.upsertHistory(historyItems);
    this.historySubject.next(await this.dbService.getHistories());
  }

  // Insert history with check override origin 'app'
  async addHistoryItems(historyItems) {
    // Prevent override record with original is 'app'
    const appRecords = this.historySubject.value.filter(item => item.origin === 'app');
    const excludeKeys = appRecords.map(item => {
      return `${item.chain}-${item.extrinsicHash}`;
    });
    const updateRecords = historyItems.filter(item => {
      const key = `${item.chain}-${item.extrinsicHash}`;
      return item.origin === 'app' || !excludeKeys.includes(key);
    });
    await this.dbService.upsertHistory(updateRecords);
    this.historySubject.next(await this.dbService.getHistories());
  }
  async removeHistoryByAddress(address) {
    await this.dbService.stores.transaction.removeAllByAddress(address);
    this.historySubject.next(await this.dbService.getHistories());
  }
  status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__.ServiceStatus.NOT_INITIALIZED;
  async loadData() {
    const histories = await this.dbService.getHistories();
    this.historySubject.next(histories);
  }
  async persistData() {
    await this.dbService.upsertHistory(this.historySubject.value);
  }
  async startCron() {
    await this.getHistories();
    this.interval = setInterval(() => {
      this.getHistories().catch(console.error);
    }, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_4__.CRON_REFRESH_HISTORY_INTERVAL);
  }
  stopCron() {
    clearTimeout(this.interval);
    this.fetchPromise = null;
    return Promise.resolve();
  }
  async startRecoverHistories() {
    await this.recoverHistories();
    this.recoverInterval = setInterval(() => {
      this.recoverHistories().catch(console.error);
    }, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_4__.CRON_RECOVER_HISTORY_INTERVAL);
  }
  stopRecoverHistories() {
    clearInterval(this.recoverInterval);
    return Promise.resolve();
  }
  async recoverHistories() {
    const list = [];
    for (const processingHistory of Object.values(this.#needRecoveryHistories)) {
      const chainState = this.chainService.getChainStateByKey(processingHistory.chain);
      if (chainState.active) {
        list.push(processingHistory);
      }
      if (list.length >= 10) {
        break;
      }
    }
    const promises = list.map(history => (0,_subwallet_extension_base_services_history_service_helpers_recoverHistoryStatus__WEBPACK_IMPORTED_MODULE_5__.historyRecover)(history, this.chainService));
    const results = await Promise.all(promises);
    results.forEach((recoverResult, index) => {
      const currentExtrinsicHash = list[index].extrinsicHash;
      const updateData = {
        ...recoverResult,
        status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_6__.ExtrinsicStatus.UNKNOWN
      };
      switch (recoverResult.status) {
        case _subwallet_extension_base_services_history_service_helpers_recoverHistoryStatus__WEBPACK_IMPORTED_MODULE_5__.HistoryRecoverStatus.API_INACTIVE:
          break;
        case _subwallet_extension_base_services_history_service_helpers_recoverHistoryStatus__WEBPACK_IMPORTED_MODULE_5__.HistoryRecoverStatus.FAILED:
        case _subwallet_extension_base_services_history_service_helpers_recoverHistoryStatus__WEBPACK_IMPORTED_MODULE_5__.HistoryRecoverStatus.SUCCESS:
          updateData.status = recoverResult.status === _subwallet_extension_base_services_history_service_helpers_recoverHistoryStatus__WEBPACK_IMPORTED_MODULE_5__.HistoryRecoverStatus.SUCCESS ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_6__.ExtrinsicStatus.SUCCESS : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_6__.ExtrinsicStatus.FAIL;
          this.updateHistoryByExtrinsicHash(currentExtrinsicHash, updateData).catch(console.error);
          delete this.#needRecoveryHistories[currentExtrinsicHash];
          break;
        default:
          this.updateHistoryByExtrinsicHash(currentExtrinsicHash, updateData).catch(console.error);
          delete this.#needRecoveryHistories[currentExtrinsicHash];
      }
    });
    if (!Object.keys(this.#needRecoveryHistories).length) {
      await this.stopRecoverHistories();
    }
  }
  startPromiseHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_7__.createPromiseHandler)();
  async init() {
    this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__.ServiceStatus.INITIALIZING;
    await this.loadData();
    Promise.all([this.eventService.waitKeyringReady, this.eventService.waitChainReady]).then(() => {
      this.getHistories().catch(console.log);
      this.recoverProcessingHistory().catch(console.error);
      this.eventService.on('account.add', () => {
        (async () => {
          await this.stopCron();
          await this.startCron();
        })().catch(console.error);
      });
      this.eventService.on('account.remove', address => {
        this.removeHistoryByAddress(address).catch(console.error);
      });
    }).catch(console.error);
    this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__.ServiceStatus.INITIALIZED;
  }
  async recoverProcessingHistory() {
    const histories = await this.dbService.getHistories();
    this.#needRecoveryHistories = {};
    histories.filter(history => {
      return [_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_6__.ExtrinsicStatus.PROCESSING, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_6__.ExtrinsicStatus.SUBMITTING].includes(history.status);
    }).forEach(history => {
      this.#needRecoveryHistories[history.extrinsicHash] = history;
    });
    const recoverNumber = Object.keys(this.#needRecoveryHistories).length;
    if (recoverNumber > 0) {
      console.log(`Recover ${recoverNumber} processing history`);
    }
    this.startRecoverHistories().catch(console.error);
  }
  async start() {
    if (this.status === _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__.ServiceStatus.STARTED) {
      return;
    }
    try {
      await Promise.all([this.eventService.waitKeyringReady, this.eventService.waitChainReady]);
      this.startPromiseHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_7__.createPromiseHandler)();
      this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__.ServiceStatus.STARTING;
      await this.startCron();
      this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__.ServiceStatus.STARTED;
      this.startPromiseHandler.resolve();
    } catch (e) {
      this.startPromiseHandler.reject(e);
    }
  }
  waitForStarted() {
    return this.startPromiseHandler.promise;
  }
  stopPromiseHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_7__.createPromiseHandler)();
  async stop() {
    try {
      this.stopPromiseHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_7__.createPromiseHandler)();
      this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__.ServiceStatus.STOPPING;
      await this.persistData();
      await this.stopCron();
      await this.stopRecoverHistories();
      this.stopPromiseHandler.resolve();
      this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_3__.ServiceStatus.STOPPED;
    } catch (e) {
      this.stopPromiseHandler.reject(e);
    }
  }
  waitForStopped() {
    return this.stopPromiseHandler.promise;
  }
}

/***/ }),

/***/ "../extension-base/src/services/history-service/subsquid-multi-chain-history.ts":
/*!**************************************************************************************!*\
  !*** ../extension-base/src/services/history-service/subsquid-multi-chain-history.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SubsquidTransactionType": () => (/* binding */ SubsquidTransactionType),
/* harmony export */   "fetchMultiChainHistories": () => (/* binding */ fetchMultiChainHistories),
/* harmony export */   "parseSubsquidTransactionData": () => (/* binding */ parseSubsquidTransactionData)
/* harmony export */ });
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @apollo/client */ "../../node_modules/@apollo/client/core/ApolloClient.js");
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @apollo/client */ "../../node_modules/@apollo/client/cache/inmemory/inMemoryCache.js");
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @apollo/client */ "../../node_modules/@apollo/client/link/http/createHttpLink.js");
/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @apollo/client */ "../../node_modules/graphql-tag/lib/index.js");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_services_history_service_constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/services/history-service/constants */ "../extension-base/src/services/history-service/constants/index.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/is/array.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/decode.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/encode.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0







const MULTI_CHAIN_URL = 'https://squid.subsquid.io/multi-chain-tx/v/v1/graphql';
const MultiChainTxClient = new _apollo_client__WEBPACK_IMPORTED_MODULE_1__.ApolloClient({
  cache: new _apollo_client__WEBPACK_IMPORTED_MODULE_2__.InMemoryCache(),
  link: (0,_apollo_client__WEBPACK_IMPORTED_MODULE_3__.createHttpLink)({
    uri: MULTI_CHAIN_URL,
    fetch: (cross_fetch__WEBPACK_IMPORTED_MODULE_0___default())
  })
});
const query = _apollo_client__WEBPACK_IMPORTED_MODULE_4__.gql`query transactionQuery($addresses: [String!], $olderThanId: String) {
  transactionsByAddress(addresses: $addresses, olderThanId: $olderThanId) {
    _data
    args
    chainId
    id
    name
    signer
    blockNumber
    blockHash
    timestamp
    relatedAddresses
  }
}`;
let SubsquidTransactionType;
(function (SubsquidTransactionType) {
  SubsquidTransactionType["BalanceTransfer"] = "Balances.Transfer";
  SubsquidTransactionType["EthereumExecuted"] = "Ethereum.Executed";
  SubsquidTransactionType["StakingBonded"] = "Staking.Bonded";
  SubsquidTransactionType["CrowdloanContributed"] = "Crowdloan.Contributed";
})(SubsquidTransactionType || (SubsquidTransactionType = {}));
const HISTORY_SUPPORT_TYPES = [SubsquidTransactionType.BalanceTransfer, SubsquidTransactionType.EthereumExecuted, SubsquidTransactionType.StakingBonded
// SubsquidTransactionType.CrowdloanContributed // Not support because data indexer not enough data
];

function parseData(anyData) {
  try {
    return JSON.parse(anyData);
  } catch (e) {
    return undefined;
  }
}
function autoFormatAddress(address) {
  try {
    if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__.isEthereumAddress)(address)) {
      return address;
    } else {
      const decoded = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_6__.decodeAddress)(address);
      return (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_7__.encodeAddress)(decoded, 42);
    }
  } catch (e) {
    return '';
  }
}
function generateSignature(input) {
  if (!input) {
    return '';
  }
  const {
    r,
    s,
    v
  } = input;
  const rHex = r.startsWith('0x') ? r.slice(2) : r;
  const sHex = s.startsWith('0x') ? s.slice(2) : s;
  const vHex = parseInt(v).toString(16);
  return `0x${rHex}${sHex}${vHex}`;
}
const parseArgs = args => {
  if ((0,_polkadot_util__WEBPACK_IMPORTED_MODULE_8__.isArray)(args)) {
    return {
      from: args[0],
      to: args[1],
      amount: args[2]
    };
  } else {
    return args;
  }
};
function parseSubsquidTransactionData(address, type, historyItem, chainInfo, args, data) {
  var _chainInfo$substrateI, _chainInfo$evmInfo, _chainInfo$substrateI2, _chainInfo$evmInfo2;
  const chainType = chainInfo.substrateInfo ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ChainType.SUBSTRATE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ChainType.EVM;
  const nativeDecimals = ((_chainInfo$substrateI = chainInfo.substrateInfo) === null || _chainInfo$substrateI === void 0 ? void 0 : _chainInfo$substrateI.decimals) || ((_chainInfo$evmInfo = chainInfo.evmInfo) === null || _chainInfo$evmInfo === void 0 ? void 0 : _chainInfo$evmInfo.decimals) || 18;
  const nativeSymbol = ((_chainInfo$substrateI2 = chainInfo.substrateInfo) === null || _chainInfo$substrateI2 === void 0 ? void 0 : _chainInfo$substrateI2.symbol) || ((_chainInfo$evmInfo2 = chainInfo.evmInfo) === null || _chainInfo$evmInfo2 === void 0 ? void 0 : _chainInfo$evmInfo2.symbol) || '';
  let from = historyItem.signer;
  let to = address === historyItem.signer ? historyItem.relatedAddresses.find(a => a !== historyItem.signer) || '' : address;
  let amount = '0';
  let fee = '0';
  let tip = '0';
  let transactionType = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ExtrinsicType.UNKNOWN;
  let extrinsicHash = '';
  let signature = '';
  let success = false;
  switch (type) {
    // Parsed Transfer
    case SubsquidTransactionType.BalanceTransfer:
      {
        transactionType = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ExtrinsicType.TRANSFER_BALANCE;
        const extrinsic = data.extrinsic;
        const parsedArgs = parseArgs(args);
        to = autoFormatAddress(parsedArgs.to);
        from = autoFormatAddress(parsedArgs.from);
        amount = parsedArgs.amount;
        fee = extrinsic.fee;
        tip = extrinsic.tip;
        extrinsicHash = extrinsic.hash;
        signature = extrinsic.signature;
        success = extrinsic.success;
        break;
      }
    case SubsquidTransactionType.EthereumExecuted:
      {
        // Parsed EVM Transaction
        transactionType = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ExtrinsicType.EVM_EXECUTE;
        const extrinsic = data.extrinsic;
        const parsedArgs = args;
        const transaction = data.call.data.args.transaction.value;
        to = autoFormatAddress(parsedArgs.to);
        from = autoFormatAddress(parsedArgs.from || address);
        extrinsicHash = parsedArgs.transactionHash || extrinsic.hash;
        amount = transaction.value || '0';
        fee = (parseInt(transaction.gasPrice) * parseInt(transaction.gasLimit)).toString();
        signature = generateSignature(transaction.signature);
        success = extrinsic.success;

        // Special fix for moonbeam
        if ((historyItem.chainId === 'moonbeam' || historyItem.chainId === 'moonriver') && typeof amount === 'object') {
          amount = amount[0];
        }
        break;
      }

    // Parsed Stake
    case SubsquidTransactionType.CrowdloanContributed:
      {
        transactionType = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ExtrinsicType.CROWDLOAN;
        const callData = data.call.data.args;
        const extrinsic = data.extrinsic;
        to = autoFormatAddress('');
        extrinsicHash = extrinsic.hash;
        amount = callData.value;
        fee = extrinsic.fee;
        signature = extrinsic.signature;
        success = extrinsic.success;
        break;
      }
    case SubsquidTransactionType.StakingBonded:
      {
        transactionType = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ExtrinsicType.STAKING_BOND;
        const callData = data.call.data.args;
        const extrinsic = data.extrinsic;
        to = autoFormatAddress('');
        extrinsicHash = extrinsic.hash;
        amount = callData.value;
        fee = extrinsic.fee;
        signature = extrinsic.signature;
        success = extrinsic.success;
        break;
      }
  }
  function toTimestamp(input) {
    try {
      if (typeof input === 'string') {
        return new Date(input).getTime();
      } else {
        return input;
      }
    } catch (e) {
      return 0;
    }
  }
  return {
    address,
    origin: 'subsquid',
    time: toTimestamp(historyItem.timestamp),
    chainType,
    from,
    direction: address === from ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.TransactionDirection.SEND : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.TransactionDirection.RECEIVED,
    blockNumber: historyItem.blockNumber,
    blockHash: historyItem.blockHash,
    chain: historyItem.chainId,
    data: historyItem._data,
    type: transactionType,
    to,
    signature,
    extrinsicHash,
    amount: {
      value: amount,
      decimals: nativeDecimals,
      symbol: nativeSymbol
    },
    fee: {
      value: fee,
      decimals: nativeDecimals,
      symbol: nativeSymbol
    },
    tip: {
      value: tip,
      decimals: nativeDecimals,
      symbol: nativeSymbol
    },
    status: success ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ExtrinsicStatus.SUCCESS : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.ExtrinsicStatus.FAIL
  };
}
async function fetchMultiChainHistories(addresses, chainMap, maxPage = _subwallet_extension_base_services_history_service_constants__WEBPACK_IMPORTED_MODULE_10__.MAX_FETCH_PAGE_PER_SESSION, countMap = {}, _lastId) {
  const responseData = [];
  let currentPage = 0;
  let lastId = _lastId;
  while (true) {
    try {
      if (maxPage) {
        if (currentPage >= maxPage) {
          break;
        }
        currentPage++;
      }
      const response = await MultiChainTxClient.query({
        query,
        variables: {
          addresses,
          olderThanId: lastId
        }
      });
      const needProcessedData = response.data.transactionsByAddress || [];
      if (needProcessedData.length > 0) {
        lastId = response.data.transactionsByAddress[needProcessedData.length - 1].id;
        responseData.push(...needProcessedData);
      } else {
        break;
      }
    } catch (e) {
      break;
    }
  }
  const histories = [];
  const lowerAddresses = addresses.map(a => a.toLowerCase());
  for (const lowerAddress of lowerAddresses) {
    countMap[lowerAddress] = countMap[lowerAddress] || 0;
  }
  responseData.forEach(historyItem => {
    const {
      _data,
      args,
      chainId,
      name,
      relatedAddresses
    } = historyItem;

    // Ignore not support type
    if (!HISTORY_SUPPORT_TYPES.includes(name)) {
      return;
    }
    const usedAddresses = relatedAddresses.filter(a => lowerAddresses.includes(a.toLowerCase()));
    const chainInfo = chainMap[chainId];
    if (chainInfo === undefined) {
      console.debug(`Not found chain info for chain id: ${chainId}`); // TODO: resolve conflicting chainId

      return;
    }
    usedAddresses.forEach(address => {
      const adr = address.toLowerCase();
      countMap[adr] = (countMap[adr] || 0) + 1;
    });
    usedAddresses.forEach(address => {
      try {
        const transactionData = parseSubsquidTransactionData(address, name, historyItem, chainInfo, parseData(args), parseData(_data));
        histories.push(transactionData);
      } catch (e) {
        console.debug('Parse transaction data failed', address, e);
      }
    });
  });
  if (currentPage > 1) {
    const retryAddresses = [];
    for (const [address, number] of Object.entries(countMap)) {
      if (number < _subwallet_extension_base_services_history_service_constants__WEBPACK_IMPORTED_MODULE_10__.MIN__NUM_HISTORY_PER_ACCOUNT) {
        retryAddresses.push(address);
      }
    }
    const _addresses = addresses.filter(add => retryAddresses.includes(add.toLowerCase()));
    if (_addresses.length > 0) {
      const retryHistories = await fetchMultiChainHistories(_addresses, chainMap, maxPage, countMap, lastId);
      histories.push(...retryHistories);
    }
  }
  return histories;
}

/***/ }),

/***/ "../extension-base/src/services/keyring-service/index.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/services/keyring-service/index.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KeyringService": () => (/* binding */ KeyringService)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_stores__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores */ "../extension-base/src/stores/CurrentAccountStore.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/bundle.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/string/shorten.js");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0






class KeyringService {
  currentAccountStore = new _subwallet_extension_base_stores__WEBPACK_IMPORTED_MODULE_0__["default"]();
  currentAccountSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject({
    address: '',
    currentGenesisHash: null
  });
  addressesSubject = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.addresses.subject;
  accountSubject = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.accounts.subject;
  beforeAccount = this.accountSubject.value;
  keyringStateSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject({
    isReady: false,
    hasMasterPassword: false,
    isLocked: false
  });
  constructor(eventService) {
    this.eventService = eventService;
    this.currentAccountStore.get('CurrentAccountInfo', rs => {
      rs && this.currentAccountSubject.next(rs);
    });
    this.subscribeAccounts().catch(console.error);
  }
  async subscribeAccounts() {
    // Wait until account ready
    await this.eventService.waitAccountReady;
    this.beforeAccount = {
      ...this.accountSubject.value
    };
    this.accountSubject.subscribe(subjectInfo => {
      // Check if accounts changed
      const beforeAddresses = Object.keys(this.beforeAccount);
      const afterAddresses = Object.keys(subjectInfo);
      if (beforeAddresses.length > afterAddresses.length) {
        const removedAddresses = beforeAddresses.filter(address => !afterAddresses.includes(address));

        // Remove account
        removedAddresses.forEach(address => {
          this.eventService.emit('account.remove', address);
        });
      } else if (beforeAddresses.length < afterAddresses.length) {
        const addedAddresses = afterAddresses.filter(address => !beforeAddresses.includes(address));

        // Add account
        addedAddresses.forEach(address => {
          this.eventService.emit('account.add', address);
        });
      } else {
        // Handle case update later
      }
      this.beforeAccount = {
        ...subjectInfo
      };
    });
  }
  get keyringState() {
    return this.keyringStateSubject.value;
  }
  updateKeyringState(isReady = true) {
    var _keyring$keyring, _keyring$keyring2;
    if (!this.keyringState.isReady && isReady) {
      this.eventService.emit('keyring.ready', true);
      this.eventService.emit('account.ready', true);
    }
    this.keyringStateSubject.next({
      hasMasterPassword: !!((_keyring$keyring = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.keyring) !== null && _keyring$keyring !== void 0 && _keyring$keyring.hasMasterPassword),
      isLocked: !!((_keyring$keyring2 = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.keyring) !== null && _keyring$keyring2 !== void 0 && _keyring$keyring2.isLocked),
      isReady: isReady
    });
  }
  get accounts() {
    return this.accountSubject.value;
  }
  get addresses() {
    return this.addressesSubject.value;
  }
  get currentAccount() {
    return this.currentAccountSubject.value;
  }
  setCurrentAccount(currentAccountData) {
    this.currentAccountSubject.next(currentAccountData);
    this.eventService.emit('account.updateCurrent', currentAccountData);
    this.currentAccountStore.set('CurrentAccountInfo', currentAccountData);
  }
  lock() {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.lockAll();
    this.updateKeyringState();
  }

  /* Inject */

  addInjectAccounts(accounts) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.addInjects(accounts.map(account => {
      const name = account.meta.name || (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_3__.stringShorten)(account.address);

      // TODO: Add if need
      // name = name.concat(' (', account.meta.source, ')');

      return {
        ...account,
        meta: {
          ...account.meta,
          name: name
        }
      };
    }));
    const currentAddress = this.currentAccountSubject.value.address;
    const afterAccounts = {};
    Object.keys(this.accounts).forEach(adr => {
      afterAccounts[adr] = true;
    });
    accounts.forEach(value => {
      afterAccounts[value.address] = true;
    });
    if (Object.keys(afterAccounts).length === 1) {
      this.currentAccountSubject.next({
        address: Object.keys(afterAccounts)[0],
        currentGenesisHash: null
      });
    } else if (Object.keys(afterAccounts).indexOf(currentAddress) === -1) {
      this.currentAccountSubject.next({
        address: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_4__.ALL_ACCOUNT_KEY,
        currentGenesisHash: null
      });
    }
  }
  removeInjectAccounts(addresses) {
    const currentAddress = this.currentAccountSubject.value.address;
    const afterAccounts = Object.keys(this.accounts).filter(address => addresses.indexOf(address) < 0);
    if (afterAccounts.length === 1) {
      this.currentAccountSubject.next({
        address: afterAccounts[0],
        currentGenesisHash: null
      });
    } else if (addresses.indexOf(currentAddress) === -1) {
      this.currentAccountSubject.next({
        address: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_4__.ALL_ACCOUNT_KEY,
        currentGenesisHash: null
      });
    }
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.removeInjects(addresses);
  }

  /* Inject */

  /* Reset */
  async resetWallet(resetAll) {
    _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_2__.keyring.resetWallet(resetAll);
    await new Promise(resolve => {
      setTimeout(() => {
        resolve();
      }, 500);
    });
    this.updateKeyringState();
    this.currentAccountSubject.next({
      address: _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_4__.ALL_ACCOUNT_KEY,
      currentGenesisHash: null
    });
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/Base.ts":
/*!****************************************************************!*\
  !*** ../extension-base/src/services/migration-service/Base.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BaseMigrationJob)
/* harmony export */ });
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/logger.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class BaseMigrationJob {
  constructor(state) {
    this.state = state;
    this.logger = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_0__.logger)(this.constructor.name);
  }
  run() {
    return Promise.resolve(console.warn('Need to override function run from base.'));
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/index.ts":
/*!*****************************************************************!*\
  !*** ../extension-base/src/services/migration-service/index.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrationService)
/* harmony export */ });
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/logger.js");
/* harmony import */ var _scripts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scripts */ "../extension-base/src/services/migration-service/scripts/index.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MigrationService {
  constructor(state) {
    this.state = state;
    this.logger = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_0__.logger)('Migration');
  }
  async run() {
    const keys = Object.keys(_scripts__WEBPACK_IMPORTED_MODULE_1__["default"]).sort((a, b) => a.localeCompare(b));
    for (let i = 0; i < keys.length; i++) {
      try {
        const JobClass = _scripts__WEBPACK_IMPORTED_MODULE_1__["default"][keys[i]];
        const key = keys[i];
        const name = JobClass.name;
        const check = await this.state.dbService.stores.migration.table.where({
          name,
          key
        }).first();
        if (!check || key.startsWith(_scripts__WEBPACK_IMPORTED_MODULE_1__.EVERYTIME)) {
          const job = new JobClass(this.state);
          await job.run();
          await this.state.dbService.stores.migration.table.put({
            key,
            name,
            timestamp: new Date().getTime()
          });
        }
      } catch (error) {
        this.logger.error('Migration error: ', _scripts__WEBPACK_IMPORTED_MODULE_1__["default"][keys[i]].name, error);
      }
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/AutoEnableChainsTokens.ts":
/*!******************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/AutoEnableChainsTokens.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AutoEnableChainsTokens)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/bundle.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class AutoEnableChainsTokens extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    const accounts = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_1__.keyring.getAccounts();
    await this.state.autoEnableChains(accounts.map(({
      address
    }) => address));
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/DeleteChain.ts":
/*!*******************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/DeleteChain.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DeleteChain)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class DeleteChain extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  // eslint-disable-next-line @typescript-eslint/require-await
  async run() {
    ['snow', 'snow_evm', 'arctic_testnet'].forEach(chain => {
      this.state.forceRemoveChain(chain);
    });
    console.log('done job');
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/EnableChain.ts":
/*!*******************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/EnableChain.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EnableChain)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class EnableChain extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    const state = this.state;
    await state.enableChain(this.slug, true);
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/EnableVaraChain.ts":
/*!***********************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/EnableVaraChain.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EnableVaraChain)
/* harmony export */ });
/* harmony import */ var _EnableChain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EnableChain */ "../extension-base/src/services/migration-service/scripts/EnableChain.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class EnableVaraChain extends _EnableChain__WEBPACK_IMPORTED_MODULE_0__["default"] {
  slug = 'vara_network';
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateAuthUrls.ts":
/*!***********************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateAuthUrls.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateSettings)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class MigrateSettings extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    try {
      return new Promise(resolve => {
        this.state.getAuthorize(value => {
          if (value) {
            const key = 'app.stellaswap.com';
            const stellaSwap = value[key];
            if (stellaSwap) {
              stellaSwap.currentEvmNetworkKey = 'moonbeam';
              value[key] = stellaSwap;
              this.state.setAuthorize(value, () => {
                resolve();
              });
            } else {
              resolve();
            }
          } else {
            resolve();
          }
        });
      });
    } catch (e) {
      console.error(e);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateAutoLock.ts":
/*!***********************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateAutoLock.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateAutoLock)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
/* harmony import */ var _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/setting-service/constants */ "../extension-base/src/services/setting-service/constants.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MigrateAutoLock extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    try {
      return new Promise(resolve => {
        this.state.settingService.getSettings(currentSettings => {
          this.state.settingService.setSettings({
            ...currentSettings,
            timeAutoLock: _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_AUTO_LOCK_TIME
          });
          resolve();
        });
      });
    } catch (e) {
      console.error(e);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateChainPatrol.ts":
/*!**************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateChainPatrol.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateChainPatrol)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
/* harmony import */ var _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/setting-service/constants */ "../extension-base/src/services/setting-service/constants.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MigrateChainPatrol extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    try {
      return new Promise(resolve => {
        this.state.settingService.getSettings(currentSettings => {
          this.state.settingService.setSettings({
            ...currentSettings,
            enableChainPatrol: _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_CHAIN_PATROL_ENABLE
          });
          resolve();
        });
      });
    } catch (e) {
      console.error(e);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateEthProvider.ts":
/*!**************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateEthProvider.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateEthProvider)
/* harmony export */ });
/* harmony import */ var _MigrateProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MigrateProvider */ "../extension-base/src/services/migration-service/scripts/MigrateProvider.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class MigrateEthProvider extends _MigrateProvider__WEBPACK_IMPORTED_MODULE_0__["default"] {
  newProvider = 'ethereum';
  oldProvider = 'Cloudflare';
  slug = 'Llamarpc';
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateImportedToken.ts":
/*!****************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateImportedToken.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateImportedToken)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class MigrateImportedToken extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    const state = this.state;
    return new Promise((resolve, reject) => {
      chrome.storage.local.get('EvmToken', function (items) {
        if (items && items.EvmToken) {
          const tokenMap = items.EvmToken;
          Object.entries(tokenMap).forEach(([t, tokenList]) => {
            tokenList.forEach(item => {
              try {
                item.isCustom && state.chainService.upsertCustomToken({
                  assetType: t.toUpperCase(),
                  decimals: item.decimals ? parseInt(item.decimals.toString()) : null,
                  hasValue: true,
                  metadata: {
                    contractAddress: item.smartContract
                  },
                  minAmount: '0',
                  multiChainAsset: null,
                  name: item.name,
                  originChain: item.chain,
                  priceId: null,
                  slug: '',
                  symbol: item.symbol || '',
                  icon: ''
                });
              } catch (e) {
                console.log(e);
              }
            });
          });
        }
        resolve();
      });
    });
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateLedgerAccount.ts":
/*!****************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateLedgerAccount.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateLedgerAccount)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
/* harmony import */ var _subwallet_extension_base_stores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/stores */ "../extension-base/src/stores/Accounts.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/is/string.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0




class MigrateLedgerAccount extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    try {
      return new Promise(resolve => {
        const store = new _subwallet_extension_base_stores__WEBPACK_IMPORTED_MODULE_1__["default"]();
        const update = (key, value) => {
          var _value$meta;
          if (key.startsWith('account:') && value.meta && (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_2__.isString)((_value$meta = value.meta) === null || _value$meta === void 0 ? void 0 : _value$meta.originGenesisHash)) {
            const newValue = {
              ...value
            };
            newValue.meta.availableGenesisHashes = [value.meta.originGenesisHash];
            store.set(key, newValue);
          }
        };
        store.allMap(map => {
          Object.entries(map).forEach(([key, value]) => {
            update(key, value);
          });
          resolve();
        });
      });
    } catch (e) {
      console.error(e);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateNetworkSettings.ts":
/*!******************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateNetworkSettings.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateNetworkSettings)
/* harmony export */ });
/* harmony import */ var _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/chain-list/types */ "../../node_modules/@subwallet/chain-list/types.js");
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MigrateNetworkSettings extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    const state = this.state;
    const items = await new Promise(resolve => {
      chrome.storage.local.get('NetworkMap', items => {
        resolve(items);
      });
    });
    const oldNetworkMap = items.NetworkMap;
    const enableList = [];
    const stateMap = state.getChainStateMap();
    if (!oldNetworkMap) {
      return;
    }
    Object.entries(oldNetworkMap).forEach(([slug, chain]) => {
      if (chain.active) {
        const currentState = stateMap[slug];

        // Ensure chain in the list and is not active
        currentState && enableList.push(slug);
      }
    });
    if (enableList.length > 0) {
      await state.chainService.enableChains(enableList);

      // Enable native token of these chains
      const currentAssetSettings = await state.chainService.getAssetSettings();
      const assetInfoMap = state.chainService.getAssetRegistry();
      Object.entries(assetInfoMap).forEach(([slug, assetInfo]) => {
        const assetSetting = currentAssetSettings[slug] || {};

        // Enable native token of these chains
        if (assetInfo.name && assetInfo.assetType === _subwallet_chain_list_types__WEBPACK_IMPORTED_MODULE_1__._AssetType.NATIVE && enableList.includes(assetInfo.originChain) && !assetSetting.visible) {
          currentAssetSettings[slug] = {
            visible: true
          };
        }
      });
      state.chainService.setAssetSettings({
        ...currentAssetSettings
      });
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigratePioneerProvider.ts":
/*!******************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigratePioneerProvider.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigratePioneerProvider)
/* harmony export */ });
/* harmony import */ var _MigrateProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MigrateProvider */ "../extension-base/src/services/migration-service/scripts/MigrateProvider.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class MigratePioneerProvider extends _MigrateProvider__WEBPACK_IMPORTED_MODULE_0__["default"] {
  slug = 'pioneer';
  oldProvider = 'OnFinality';
  newProvider = 'Pioneer';
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateProvider.ts":
/*!***********************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateProvider.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateProvider)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


class MigrateProvider extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    const state = this.state;
    const chainState = state.getChainStateByKey(this.slug);
    const chainInfo = state.getChainInfo(this.slug);
    if (chainState.active && chainState.currentProvider === this.oldProvider) {
      await state.upsertChainInfo({
        mode: 'update',
        chainEditInfo: {
          currentProvider: this.newProvider,
          slug: this.slug,
          providers: chainInfo.providers
        }
      });
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateSettings.ts":
/*!***********************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateSettings.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateSettings)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
/* harmony import */ var _polkadot_ui_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/ui-settings */ "../../node_modules/@polkadot/ui-settings/index.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MigrateSettings extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    try {
      return new Promise(resolve => {
        this.state.settingService.getSettings(currentSettings => {
          const isAccessCamera = _polkadot_ui_settings__WEBPACK_IMPORTED_MODULE_1__["default"].camera === 'on';
          this.state.settingService.setSettings({
            ...currentSettings,
            camera: isAccessCamera
          });
          resolve();
        });
      });
    } catch (e) {
      console.error(e);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateTokenDecimals.ts":
/*!****************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateTokenDecimals.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateTokenDecimals)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MigrateTokenDecimals extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    const state = this.state;
    return new Promise(resolve => {
      const assetMap = state.getAssetRegistry();
      for (const [slug, info] of Object.entries(assetMap)) {
        if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_1__._isCustomAsset)(slug)) {
          state.chainService.upsertCustomToken({
            ...info,
            decimals: info.decimals ? parseInt(info.decimals.toString()) : info.decimals
          });
        }
      }
      resolve();
    });
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateTransactionHistory.ts":
/*!*********************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateTransactionHistory.ts ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateTransactionHistory)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
/* harmony import */ var dexie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dexie */ "../../node_modules/dexie/dist/modern/dexie.mjs");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0






class MigrateTransactionHistory extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_1__["default"] {
  async run() {
    const state = this.state;
    const chainInfoMap = state.getChainInfoMap();
    const assetList = Object.values(state.getAssetRegistry());
    try {
      const db = new dexie__WEBPACK_IMPORTED_MODULE_0__["default"]('SubWalletDB');
      const dexieDB = await db.open();
      const transactionTable = dexieDB.table('transactions');
      const oldTransactionData = await transactionTable.toArray();
      const newTransactionItems = [];
      oldTransactionData.forEach(item => {
        const chainInfo = chainInfoMap[item.networkKey];
        if (!chainInfo) {
          return;
        }
        const direction = item.action === 'send' ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.TransactionDirection.SEND : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.TransactionDirection.RECEIVED;
        const extrinsicType = item.changeSymbol === item.feeSymbol ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.ExtrinsicType.TRANSFER_BALANCE : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.ExtrinsicType.TRANSFER_TOKEN;
        const nativeAsset = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_3__._getChainNativeTokenBasicInfo)(chainInfo);
        const transferAsset = assetList.find(a => a.originChain === item.networkKey && a.symbol === item.changeSymbol) || nativeAsset;
        const newItem = {
          chain: item.networkKey,
          origin: 'migration',
          type: extrinsicType,
          address: item.address,
          extrinsicHash: item.extrinsicHash,
          time: item.time,
          status: item.isSuccess ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.ExtrinsicStatus.SUCCESS : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.ExtrinsicStatus.FAIL,
          from: direction === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.TransactionDirection.SEND ? item.address : '',
          to: direction === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.TransactionDirection.RECEIVED ? item.address : '',
          amount: {
            value: item.change,
            decimals: transferAsset.decimals || 18,
            symbol: transferAsset.symbol
          },
          fee: {
            value: item.fee,
            decimals: nativeAsset.decimals,
            symbol: nativeAsset.symbol
          },
          direction: direction,
          chainType: (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_4__.isEthereumAddress)(item.address) ? _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.ChainType.EVM : _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.ChainType.SUBSTRATE,
          chainName: chainInfo.name,
          blockNumber: 0,
          blockHash: '',
          data: '',
          signature: ''
        };
        newTransactionItems.push(newItem);
      });
      await state.historyService.addHistoryItems(newTransactionItems);
    } catch (e) {
      this.logger.error(e);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/MigrateWalletReference.ts":
/*!******************************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/MigrateWalletReference.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrateWalletReference)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/Base */ "../extension-base/src/services/migration-service/Base.ts");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ "../../node_modules/uuid/dist/esm-browser/v4.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MigrateWalletReference extends _subwallet_extension_base_services_migration_service_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async run() {
    try {
      return new Promise(resolve => {
        this.state.settingService.getSettings(currentSettings => {
          const walletReference = (0,uuid__WEBPACK_IMPORTED_MODULE_1__["default"])();
          this.state.settingService.setSettings({
            ...currentSettings,
            walletReference: walletReference
          });
          resolve();
        });
      });
    } catch (e) {
      console.error(e);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/migration-service/scripts/index.ts":
/*!*************************************************************************!*\
  !*** ../extension-base/src/services/migration-service/scripts/index.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EVERYTIME": () => (/* binding */ EVERYTIME),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_migration_service_scripts_DeleteChain__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/services/migration-service/scripts/DeleteChain */ "../extension-base/src/services/migration-service/scripts/DeleteChain.ts");
/* harmony import */ var _AutoEnableChainsTokens__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AutoEnableChainsTokens */ "../extension-base/src/services/migration-service/scripts/AutoEnableChainsTokens.ts");
/* harmony import */ var _EnableVaraChain__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./EnableVaraChain */ "../extension-base/src/services/migration-service/scripts/EnableVaraChain.ts");
/* harmony import */ var _MigrateAuthUrls__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MigrateAuthUrls */ "../extension-base/src/services/migration-service/scripts/MigrateAuthUrls.ts");
/* harmony import */ var _MigrateAutoLock__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MigrateAutoLock */ "../extension-base/src/services/migration-service/scripts/MigrateAutoLock.ts");
/* harmony import */ var _MigrateChainPatrol__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MigrateChainPatrol */ "../extension-base/src/services/migration-service/scripts/MigrateChainPatrol.ts");
/* harmony import */ var _MigrateEthProvider__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MigrateEthProvider */ "../extension-base/src/services/migration-service/scripts/MigrateEthProvider.ts");
/* harmony import */ var _MigrateImportedToken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MigrateImportedToken */ "../extension-base/src/services/migration-service/scripts/MigrateImportedToken.ts");
/* harmony import */ var _MigrateLedgerAccount__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MigrateLedgerAccount */ "../extension-base/src/services/migration-service/scripts/MigrateLedgerAccount.ts");
/* harmony import */ var _MigrateNetworkSettings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MigrateNetworkSettings */ "../extension-base/src/services/migration-service/scripts/MigrateNetworkSettings.ts");
/* harmony import */ var _MigratePioneerProvider__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MigratePioneerProvider */ "../extension-base/src/services/migration-service/scripts/MigratePioneerProvider.ts");
/* harmony import */ var _MigrateSettings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MigrateSettings */ "../extension-base/src/services/migration-service/scripts/MigrateSettings.ts");
/* harmony import */ var _MigrateTokenDecimals__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./MigrateTokenDecimals */ "../extension-base/src/services/migration-service/scripts/MigrateTokenDecimals.ts");
/* harmony import */ var _MigrateTransactionHistory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MigrateTransactionHistory */ "../extension-base/src/services/migration-service/scripts/MigrateTransactionHistory.ts");
/* harmony import */ var _MigrateWalletReference__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MigrateWalletReference */ "../extension-base/src/services/migration-service/scripts/MigrateWalletReference.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0
















const EVERYTIME = '__everytime__';
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  '1.0.1-11': _MigrateNetworkSettings__WEBPACK_IMPORTED_MODULE_0__["default"],
  '1.0.1-20': _MigrateImportedToken__WEBPACK_IMPORTED_MODULE_1__["default"],
  '1.0.1-30': _MigrateTransactionHistory__WEBPACK_IMPORTED_MODULE_2__["default"],
  '1.0.1-40': _AutoEnableChainsTokens__WEBPACK_IMPORTED_MODULE_3__["default"],
  '1.0.1-50': _MigrateSettings__WEBPACK_IMPORTED_MODULE_4__["default"],
  '1.0.1-60': _MigrateAuthUrls__WEBPACK_IMPORTED_MODULE_5__["default"],
  '1.0.3-01': _MigrateAutoLock__WEBPACK_IMPORTED_MODULE_6__["default"],
  '1.0.3-02': _MigrateChainPatrol__WEBPACK_IMPORTED_MODULE_7__["default"],
  '1.0.9-01': _MigrateLedgerAccount__WEBPACK_IMPORTED_MODULE_8__["default"],
  '1.0.12-02': _MigrateEthProvider__WEBPACK_IMPORTED_MODULE_9__["default"],
  '1.1.6-01': _MigrateWalletReference__WEBPACK_IMPORTED_MODULE_10__["default"],
  '1.1.7': _subwallet_extension_base_services_migration_service_scripts_DeleteChain__WEBPACK_IMPORTED_MODULE_11__["default"],
  '1.1.13-01': _MigrateTokenDecimals__WEBPACK_IMPORTED_MODULE_12__["default"],
  '1.1.17-01': _MigratePioneerProvider__WEBPACK_IMPORTED_MODULE_13__["default"],
  '1.1.17-03': _EnableVaraChain__WEBPACK_IMPORTED_MODULE_14__["default"]
  // [`${EVERYTIME}-1`]: AutoEnableChainsTokens
});

/***/ }),

/***/ "../extension-base/src/services/notification-service/NotificationService.ts":
/*!**********************************************************************************!*\
  !*** ../extension-base/src/services/notification-service/NotificationService.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ NotificationService)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class NotificationService {
  notificationSubject = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject([]);
  getNotificationSubject() {
    return this.notificationSubject;
  }
  notify(notification) {
    const now = new Date().getTime();
    // Get values in last 30 seconds only
    const notifications = this.notificationSubject.value.filter(n => n.id < now - 30000);

    // Push notification
    notifications.push({
      ...notification,
      id: now
    });
    this.notificationSubject.next(notifications);
    if (notification.notifyViaBrowser) {
      var _notification$action;
      NotificationService.createBrowserNotification(notification.title, notification.message, notification === null || notification === void 0 ? void 0 : (_notification$action = notification.action) === null || _notification$action === void 0 ? void 0 : _notification$action.url);
    }
  }

  // Create a new chrome notification with link
  static createBrowserNotification(title, message, link) {
    var _chrome, _chrome$notifications;
    (_chrome = chrome) === null || _chrome === void 0 ? void 0 : (_chrome$notifications = _chrome.notifications) === null || _chrome$notifications === void 0 ? void 0 : _chrome$notifications.create({
      type: 'basic',
      title,
      message,
      iconUrl: './images/icon-128.png',
      priority: 2,
      isClickable: !!link
    }, notificationId => {
      if (link) {
        chrome.notifications.onClicked.addListener(nId => {
          if (nId === notificationId) {
            window.open(link);
          }
        });
      }
    });
  }
}

/***/ }),

/***/ "../extension-base/src/services/price-service/coingecko.ts":
/*!*****************************************************************!*\
  !*** ../extension-base/src/services/price-service/coingecko.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTokenPrice": () => (/* binding */ getTokenPrice)
/* harmony export */ });
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ "../../node_modules/axios/lib/axios.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


let useBackupApi = false;
const getTokenPrice = async (priceIds, currency = 'usd') => {
  try {
    var _res;
    const idStr = Array.from(priceIds).join(',');
    let res;
    if (!useBackupApi) {
      try {
        res = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=${currency}&per_page=250&ids=${idStr}`);
      } catch (err) {
        useBackupApi = true;
      }
    }
    if (useBackupApi || ((_res = res) === null || _res === void 0 ? void 0 : _res.status) !== 200) {
      useBackupApi = true;
      res = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`https://chain-data.subwallet.app/api/price/get?ids=${idStr}`);
    }
    if (res.status !== 200) {
      console.warn('Failed to get token price');
    }
    const responseData = res.data || [];
    const priceMap = {};
    const price24hMap = {};
    responseData.forEach(val => {
      const currentPrice = val.current_price || 0;
      const price24h = currentPrice - (val.price_change_24h || 0);
      priceMap[val.id] = currentPrice;
      price24hMap[val.id] = price24h;
    });
    return {
      currency,
      priceMap,
      price24hMap
    };
  } catch (err) {
    console.error(err);
    throw err;
  }
};

/***/ }),

/***/ "../extension-base/src/services/price-service/index.ts":
/*!*************************************************************!*\
  !*** ../extension-base/src/services/price-service/index.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PriceService": () => (/* binding */ PriceService)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/base/types */ "../extension-base/src/services/base/types.ts");
/* harmony import */ var _subwallet_extension_base_services_price_service_coingecko__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/services/price-service/coingecko */ "../extension-base/src/services/price-service/coingecko.ts");
/* harmony import */ var _subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/utils/promise */ "../extension-base/src/utils/promise.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0






const DEFAULT_PRICE_SUBJECT = {
  ready: false,
  currency: 'usd',
  priceMap: {},
  price24hMap: {}
};
class PriceService {
  priceSubject = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(DEFAULT_PRICE_SUBJECT);
  priceIds = new Set();
  constructor(dbService, eventService, chainService) {
    this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__.ServiceStatus.NOT_INITIALIZED;
    this.dbService = dbService;
    this.eventService = eventService;
    this.chainService = chainService;
    this.init().catch(console.error);
  }
  async getPrice() {
    return Promise.resolve(this.priceSubject.value);
  }
  getPriceSubject() {
    return this.priceSubject;
  }
  getPriceIds() {
    const priceIdList = Object.values(this.chainService.getAssetRegistry()).map(a => a.priceId).filter(a => a);
    return new Set(priceIdList);
  }
  refreshPriceData(priceIds) {
    clearTimeout(this.refreshTimeout);
    this.priceIds = priceIds || this.getPriceIds();

    // Update for tokens price
    (0,_subwallet_extension_base_services_price_service_coingecko__WEBPACK_IMPORTED_MODULE_2__.getTokenPrice)(this.priceIds).then(rs => {
      this.priceSubject.next({
        ...rs,
        ready: true
      });
      this.dbService.updatePriceStore(rs).catch(console.error);
    }).catch(console.error);
    this.refreshTimeout = setTimeout(this.refreshPriceData.bind(this), _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_3__.CRON_REFRESH_PRICE_INTERVAL);
  }
  async init() {
    this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__.ServiceStatus.INITIALIZING;
    // Fetch data from storage
    await this.loadData();
    const eventHandler = () => {
      const newPriceIds = this.getPriceIds();

      // Compare two set newPriceIds and this.priceIds
      if (newPriceIds.size !== this.priceIds.size || !Array.from(newPriceIds).every(v => this.priceIds.has(v))) {
        this.priceIds = newPriceIds;
        this.refreshPriceData(this.priceIds);
      }
    };
    this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__.ServiceStatus.INITIALIZED;
    this.eventService.on('asset.updateState', eventHandler);
  }
  async loadData() {
    const data = await this.dbService.getPriceStore();
    this.priceSubject.next(data || DEFAULT_PRICE_SUBJECT);
  }
  async persistData() {
    await this.dbService.updatePriceStore(this.priceSubject.value).catch(console.error);
  }
  startPromiseHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_4__.createPromiseHandler)();
  async start() {
    if (this.status === _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__.ServiceStatus.STARTED) {
      return;
    }
    try {
      await this.eventService.waitAssetReady;
      this.startPromiseHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_4__.createPromiseHandler)();
      this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__.ServiceStatus.STARTING;
      await this.startCron();
      this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__.ServiceStatus.STARTED;
      this.startPromiseHandler.resolve();
    } catch (e) {
      this.startPromiseHandler.reject(e);
    }
  }
  async startCron() {
    this.refreshPriceData();
    return Promise.resolve();
  }
  stopPromiseHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_4__.createPromiseHandler)();
  async stop() {
    try {
      this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__.ServiceStatus.STOPPING;
      this.stopPromiseHandler = (0,_subwallet_extension_base_utils_promise__WEBPACK_IMPORTED_MODULE_4__.createPromiseHandler)();
      await this.stopCron();
      await this.persistData();
      this.status = _subwallet_extension_base_services_base_types__WEBPACK_IMPORTED_MODULE_1__.ServiceStatus.STOPPED;
      this.stopPromiseHandler.resolve();
    } catch (e) {
      this.stopPromiseHandler.reject(e);
    }
  }
  stopCron() {
    clearTimeout(this.refreshTimeout);
    return Promise.resolve(undefined);
  }
  waitForStarted() {
    return this.startPromiseHandler.promise;
  }
  waitForStopped() {
    return this.stopPromiseHandler.promise;
  }
}

/***/ }),

/***/ "../extension-base/src/services/request-service/constants.ts":
/*!*******************************************************************!*\
  !*** ../extension-base/src/services/request-service/constants.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EXTENSION_REQUEST_URL": () => (/* binding */ EXTENSION_REQUEST_URL),
/* harmony export */   "PREDEFINED_CHAIN_DAPP_CHAIN_MAP": () => (/* binding */ PREDEFINED_CHAIN_DAPP_CHAIN_MAP),
/* harmony export */   "WEB_APP_URL": () => (/* binding */ WEB_APP_URL)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0

const EXTENSION_REQUEST_URL = 'extension';
const PREDEFINED_CHAIN_DAPP_CHAIN_MAP = {
  'portal.astar.network': ['astar', 'astarEvm'],
  'apps.moonbeam.network': ['moonbeam', 'moonriver'],
  'app.stellaswap.com': ['moonbeam']
};
const WEB_APP_URL = [
/// Web app
'localhost:9000',
// Local
'subwallet-webapp.pages.dev',
// Pull request build
'web.subwallet.app' // Production
];

/***/ }),

/***/ "../extension-base/src/services/request-service/handler/AuthRequestHandler.ts":
/*!************************************************************************************!*\
  !*** ../extension-base/src/services/request-service/handler/AuthRequestHandler.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AuthRequestHandler)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/request-service/constants */ "../extension-base/src/services/request-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_stores_Authorize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/Authorize */ "../extension-base/src/stores/Authorize.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _subwallet_extension_base_utils_getId__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/utils/getId */ "../extension-base/src/utils/getId.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/assert.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0









const AUTH_URLS_KEY = 'authUrls';
class AuthRequestHandler {
  #requestService;
  #chainService;
  authorizeStore = new _subwallet_extension_base_stores_Authorize__WEBPACK_IMPORTED_MODULE_0__["default"]();
  #authRequestsV2 = {};
  authorizeCached = undefined;
  authorizeUrlSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject({});
  evmChainSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject({});
  authSubjectV2 = new rxjs__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject([]);
  constructor(requestService, chainService, keyringService) {
    this.keyringService = keyringService;
    this.#requestService = requestService;
    this.#chainService = chainService;
  }
  getAddressList(value = false) {
    const addressList = Object.keys(this.keyringService.accounts);
    return addressList.reduce((addressList, v) => ({
      ...addressList,
      [v]: value
    }), {});
  }
  get numAuthRequestsV2() {
    return Object.keys(this.#authRequestsV2).length;
  }
  get allAuthRequestsV2() {
    return Object.values(this.#authRequestsV2).map(({
      id,
      request,
      url
    }) => ({
      id,
      request,
      url
    }));
  }
  updateIconAuthV2(shouldClose) {
    this.authSubjectV2.next(this.allAuthRequestsV2);
    this.#requestService.updateIconV2(shouldClose);
  }
  setAuthorize(data, callback) {
    this.authorizeStore.set(AUTH_URLS_KEY, data, () => {
      this.authorizeCached = data;
      this.evmChainSubject.next(this.authorizeCached);
      this.authorizeUrlSubject.next(this.authorizeCached);
      callback && callback();
    });
  }
  getAuthorize(update) {
    // This action can be use many by DApp interaction => caching it in memory
    if (this.authorizeCached) {
      update(this.authorizeCached);
    } else {
      this.authorizeStore.get('authUrls', data => {
        this.authorizeCached = data || {};
        this.evmChainSubject.next(this.authorizeCached);
        this.authorizeUrlSubject.next(this.authorizeCached);
        update(this.authorizeCached);
      });
    }
  }
  getAuthList() {
    return new Promise((resolve, reject) => {
      this.getAuthorize(rs => {
        resolve(rs);
      });
    });
  }
  getDAppChainInfo(options) {
    const chainInfoMaps = this.#chainService.getChainInfoMap();
    const chainStateMap = this.#chainService.getChainStateMap();
    let defaultChain = options.defaultChain;
    let needEnableChains = [];
    if (options.url) {
      const domain = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.getDomainFromUrl)(options.url);
      const predefinedSupportChains = _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_3__.PREDEFINED_CHAIN_DAPP_CHAIN_MAP[domain];
      if (!defaultChain && predefinedSupportChains) {
        defaultChain = predefinedSupportChains[0];
        options.autoActive && needEnableChains.push(...predefinedSupportChains);
      }
    }
    let chainInfo;
    if (['both', 'evm'].includes(options.accessType)) {
      const evmChains = Object.values(chainInfoMaps).filter(_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._isChainEvmCompatible);
      chainInfo = (defaultChain ? chainInfoMaps[defaultChain] : evmChains.find(chain => {
        var _chainStateMap$chain$;
        return (_chainStateMap$chain$ = chainStateMap[chain.slug]) === null || _chainStateMap$chain$ === void 0 ? void 0 : _chainStateMap$chain$.active;
      })) || evmChains[0];
      if (options.autoActive) {
        var _chainInfo;
        if (!needEnableChains.includes((_chainInfo = chainInfo) === null || _chainInfo === void 0 ? void 0 : _chainInfo.slug)) {
          var _chainInfo2;
          needEnableChains.push((_chainInfo2 = chainInfo) === null || _chainInfo2 === void 0 ? void 0 : _chainInfo2.slug);
        }
      }
    }
    needEnableChains = needEnableChains.filter(slug => {
      var _chainStateMap$slug;
      return !((_chainStateMap$slug = chainStateMap[slug]) !== null && _chainStateMap$slug !== void 0 && _chainStateMap$slug.active);
    });
    needEnableChains.length > 0 && this.#chainService.enableChains(needEnableChains);
    return chainInfo;
  }
  authCompleteV2 = (id, url, resolve, reject) => {
    const isAllowedMap = this.getAddressList();
    const complete = (result, cb, accounts) => {
      var _this$getDAppChainInf;
      const isAllowed = result === true;
      let isCancelled = false;
      if (!isAllowed && typeof result === 'object' && result.message === 'Cancelled') {
        isCancelled = true;
      }
      if (accounts && accounts.length) {
        accounts.forEach(acc => {
          isAllowedMap[acc] = true;
        });
      } else {
        // eslint-disable-next-line no-return-assign
        Object.keys(isAllowedMap).forEach(address => isAllowedMap[address] = false);
      }
      const {
        accountAuthType,
        idStr,
        request: {
          allowedAccounts,
          origin
        },
        url
      } = this.#authRequestsV2[id];
      if (accountAuthType !== 'both') {
        const isEvmType = accountAuthType === 'evm';
        const backupAllowed = [...(allowedAccounts || [])].filter(a => {
          const isEth = (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__.isEthereumAddress)(a);
          return isEvmType ? !isEth : isEth;
        });
        backupAllowed.forEach(acc => {
          isAllowedMap[acc] = true;
        });
      }
      const defaultEvmNetworkKey = (_this$getDAppChainInf = this.getDAppChainInfo({
        accessType: accountAuthType,
        url,
        autoActive: !isCancelled && isAllowed
      })) === null || _this$getDAppChainInf === void 0 ? void 0 : _this$getDAppChainInf.slug;
      this.getAuthorize(value => {
        let authorizeList = {};
        if (value) {
          authorizeList = value;
        }
        const existed = authorizeList[(0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.stripUrl)(url)];

        // On cancel don't save anything
        if (isCancelled) {
          delete this.#authRequestsV2[id];
          this.updateIconAuthV2(true);
          cb();
          return;
        }
        authorizeList[(0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.stripUrl)(url)] = {
          count: 0,
          id: idStr,
          isAllowed,
          isAllowedMap,
          origin,
          url,
          accountAuthType: existed && existed.accountAuthType !== accountAuthType ? 'both' : accountAuthType,
          currentEvmNetworkKey: existed ? existed.currentEvmNetworkKey : defaultEvmNetworkKey
        };
        this.setAuthorize(authorizeList, () => {
          cb();
          delete this.#authRequestsV2[id];
          this.updateIconAuthV2(true);
        });
      });
    };
    return {
      reject: error => {
        complete(error, () => {
          reject(error);
        });
      },
      resolve: ({
        accounts,
        result
      }) => {
        complete(result, () => {
          resolve(result);
        }, accounts);
      }
    };
  };
  async authorizeUrlV2(url, request) {
    let authList = await this.getAuthList();
    const accountAuthType = request.accountAuthType || 'substrate';
    request.accountAuthType = accountAuthType;
    if (!authList) {
      authList = {};
    }
    const idStr = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.stripUrl)(url);
    // Do not enqueue duplicate authorization requests.
    const isDuplicate = Object.values(this.#authRequestsV2).some(_request => _request.idStr === idStr && _request.accountAuthType === request.accountAuthType);
    (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_6__.assert)(!isDuplicate, 'The source {{url}} has a pending authorization request'.replace('{{url}}', url));
    const existedAuth = authList[idStr];
    const existedAccountAuthType = existedAuth === null || existedAuth === void 0 ? void 0 : existedAuth.accountAuthType;
    const confirmAnotherType = existedAccountAuthType !== 'both' && existedAccountAuthType !== request.accountAuthType;
    if (request.reConfirm && existedAuth) {
      request.origin = existedAuth.origin;
    }

    // Reconfirm if check auth for empty list
    if (existedAuth) {
      const inBlackList = existedAuth && !existedAuth.isAllowed;
      if (inBlackList) {
        throw new Error('The source {{url}} is not allowed to interact with this extension'.replace('{{url}}', url));
      }
      request.allowedAccounts = Object.entries(existedAuth.isAllowedMap).map(([address, allowed]) => allowed ? address : '').filter(item => item !== '');
      let allowedListByRequestType = [...request.allowedAccounts];
      if (accountAuthType === 'evm') {
        allowedListByRequestType = allowedListByRequestType.filter(a => (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__.isEthereumAddress)(a));
      } else if (accountAuthType === 'substrate') {
        allowedListByRequestType = allowedListByRequestType.filter(a => !(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__.isEthereumAddress)(a));
      }
      if (!confirmAnotherType && !request.reConfirm && allowedListByRequestType.length !== 0) {
        // Prevent appear confirmation popup
        return false;
      }
    } else {
      // Auto auth for web app

      // Ignore white list
      const isWhiteList = _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_3__.WEB_APP_URL.some(url => idStr.includes(url)) && false;
      if (isWhiteList) {
        const isAllowedMap = this.getAddressList(true);
        authList[(0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.stripUrl)(url)] = {
          count: 0,
          id: idStr,
          isAllowed: true,
          isAllowedMap,
          origin,
          url,
          accountAuthType: 'both'
        };
        this.setAuthorize(authList);
        return true;
      }
    }
    return new Promise((resolve, reject) => {
      const id = (0,_subwallet_extension_base_utils_getId__WEBPACK_IMPORTED_MODULE_7__.getId)();
      this.#authRequestsV2[id] = {
        ...this.authCompleteV2(id, url, resolve, reject),
        id,
        idStr,
        request,
        url,
        accountAuthType: accountAuthType
      };
      this.updateIconAuthV2();
      if (Object.keys(this.#authRequestsV2).length < 2) {
        this.#requestService.popupOpen();
      }
    });
  }
  getAuthRequestV2(id) {
    return this.#authRequestsV2[id];
  }
  get subscribeEvmChainChange() {
    return this.evmChainSubject;
  }
  get subscribeAuthorizeUrlSubject() {
    return this.authorizeUrlSubject;
  }
  ensureUrlAuthorizedV2(url) {
    const idStr = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_2__.stripUrl)(url);
    return new Promise((resolve, reject) => {
      this.getAuthorize(value => {
        if (!value) {
          value = {};
        }
        const entry = Object.keys(value).includes(idStr);
        if (!entry) {
          reject(new Error('The source {{url}} has not been authorized yet'.replace('{{url}}', url)));
        }
        const isConnected = value[idStr] && Object.keys(value[idStr].isAllowedMap).some(address => value[idStr].isAllowedMap[address]);
        if (!isConnected) {
          reject(new Error('The source {{url}} is not allowed to interact with this extension'.replace('{{url}}', url)));
        }
        resolve(true);
      });
    });
  }
  resetWallet() {
    for (const request of Object.values(this.#authRequestsV2)) {
      request.reject(new Error('Reset wallet'));
    }
    this.authSubjectV2.next([]);
    this.setAuthorize({});
  }
}

/***/ }),

/***/ "../extension-base/src/services/request-service/handler/ConnectWCRequestHandler.ts":
/*!*****************************************************************************************!*\
  !*** ../extension-base/src/services/request-service/handler/ConnectWCRequestHandler.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ConnectWCRequestHandler)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



// WC = WalletConnect
class ConnectWCRequestHandler {
  #requestService;
  #connectWCRequests = {};
  connectWCSubject = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject([]);
  constructor(requestService) {
    this.#requestService = requestService;
  }
  get allConnectWCRequests() {
    return Object.values(this.#connectWCRequests)
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    .map(({
      reject,
      resolve,
      ...data
    }) => data);
  }
  get numConnectWCRequests() {
    return Object.keys(this.#connectWCRequests).length;
  }
  getConnectWCRequest(id) {
    return this.#connectWCRequests[id];
  }
  updateIconConnectWC(shouldClose) {
    this.connectWCSubject.next(this.allConnectWCRequests);
    this.#requestService.updateIconV2(shouldClose);
  }
  connectWCComplete = id => {
    const complete = shouldClose => {
      delete this.#connectWCRequests[id];
      this.updateIconConnectWC(shouldClose);
    };
    return {
      reject: () => {
        complete(true);
      },
      resolve: () => {
        complete(true);
      }
    };
  };
  addConnectWCRequest(request) {
    const id = request.id;
    this.#connectWCRequests[id] = {
      ...this.connectWCComplete(id),
      ...request
    };
    this.updateIconConnectWC();
    this.#requestService.popupOpen();
  }
  resetWallet() {
    for (const request of Object.values(this.#connectWCRequests)) {
      request.reject(new Error('Reset wallet'));
    }
    this.connectWCSubject.next([]);
  }
}

/***/ }),

/***/ "../extension-base/src/services/request-service/handler/EvmRequestHandler.ts":
/*!***********************************************************************************!*\
  !*** ../extension-base/src/services/request-service/handler/EvmRequestHandler.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EvmRequestHandler)
/* harmony export */ });
/* harmony import */ var _ethereumjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ethereumjs/common */ "../../node_modules/@ethereumjs/common/dist.browser/index.js");
/* harmony import */ var _ethereumjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_ethereumjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/EvmProviderError */ "../extension-base/src/background/errors/EvmProviderError.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth */ "../extension-base/src/utils/eth.ts");
/* harmony import */ var _subwallet_extension_base_utils_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/utils/request */ "../extension-base/src/utils/request.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/index.js");
/* harmony import */ var bn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bn.js */ "../../node_modules/bn.js/lib/bn.js");
/* harmony import */ var bn_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bn_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ethereumjs_tx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ethereumjs-tx */ "../../node_modules/ethereumjs-tx/dist/index.js");
/* harmony import */ var ethereumjs_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ethereumjs-util */ "../../node_modules/ethereumjs-util/dist.browser/index.js");
/* harmony import */ var ethereumjs_util__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ethereumjs_util__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/logger.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0













class EvmRequestHandler {
  #requestService;
  #logger;
  confirmationsQueueSubject = new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject({
    addNetworkRequest: {},
    addTokenRequest: {},
    switchNetworkRequest: {},
    evmSignatureRequest: {},
    evmSendTransactionRequest: {},
    evmWatchTransactionRequest: {}
  });
  confirmationsPromiseMap = {};
  constructor(requestService) {
    this.#requestService = requestService;
    this.#logger = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_6__.logger)('EvmRequestHandler');
  }
  get numEvmRequests() {
    let count = 0;
    Object.values(this.confirmationsQueueSubject.getValue()).forEach(x => {
      count += Object.keys(x).length;
    });
    return count;
  }
  getConfirmationsQueueSubject() {
    return this.confirmationsQueueSubject;
  }
  async addConfirmation(id, url, type, payload, options = {}, validator) {
    const confirmations = this.confirmationsQueueSubject.getValue();
    const confirmationType = confirmations[type];
    const payloadJson = JSON.stringify(payload);
    const isInternal = (0,_subwallet_extension_base_utils_request__WEBPACK_IMPORTED_MODULE_7__.isInternalRequest)(url);
    if (['evmSignatureRequest', 'evmSendTransactionRequest'].includes(type)) {
      const isAlwaysRequired = await this.#requestService.settingService.isAlwaysRequired;
      if (isAlwaysRequired) {
        this.#requestService.keyringService.lock();
      }
    }

    // Check duplicate request
    const duplicated = Object.values(confirmationType).find(c => c.url === url && c.payloadJson === payloadJson);
    if (duplicated) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_8__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Duplicate request'));
    }
    confirmationType[id] = {
      id,
      url,
      isInternal,
      payload,
      payloadJson,
      ...options
    };
    const promise = new Promise((resolve, reject) => {
      this.confirmationsPromiseMap[id] = {
        validator: validator,
        resolver: {
          resolve: resolve,
          reject: reject
        }
      };
    });
    this.confirmationsQueueSubject.next(confirmations);
    if (!isInternal) {
      this.#requestService.popupOpen();
    }
    this.#requestService.updateIconV2();
    return promise;
  }
  updateConfirmation(id, type, payload, options = {}, validator) {
    const confirmations = this.confirmationsQueueSubject.getValue();
    const confirmationType = confirmations[type];

    // Check duplicate request
    const exists = confirmationType[id];
    if (!exists) {
      throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_8__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Request does not exist'));
    }
    const payloadJson = JSON.stringify(payload);
    confirmationType[id] = {
      ...exists,
      payload,
      payloadJson,
      ...options
    };
    if (validator) {
      this.confirmationsPromiseMap[id].validator = validator;
    }
    this.confirmationsQueueSubject.next(confirmations);
  }
  async signMessage(confirmation) {
    const {
      account,
      payload,
      type
    } = confirmation.payload;
    const address = account.address;
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_10__["default"].getPair(address);
    if (pair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_10__["default"].unlockPair(pair.address);
    }
    switch (type) {
      case 'eth_sign':
      case 'personal_sign':
      case 'eth_signTypedData':
      case 'eth_signTypedData_v1':
      case 'eth_signTypedData_v3':
      case 'eth_signTypedData_v4':
        return await pair.evmSigner.signMessage(payload, type);
      default:
        throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_8__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_9__.EvmProviderErrorType.INVALID_PARAMS, (0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unsupported action'));
    }
  }
  configToTransaction(config) {
    function formatField(input) {
      if (typeof input === 'string') {
        if (input.startsWith('0x')) {
          return input;
        } else {
          return new (bn_js__WEBPACK_IMPORTED_MODULE_1___default())(input);
        }
      }
      return input;
    }

    // Convert any string, number to number with BigN exclude hex string
    const txData = {
      from: config.from,
      nonce: formatField(config.nonce),
      gasPrice: formatField(config.gasPrice),
      gasLimit: formatField(config.gas),
      to: config.to,
      value: formatField(config.value),
      data: (0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_3__.toBuffer)(config.data)
    };
    const common = _ethereumjs_common__WEBPACK_IMPORTED_MODULE_0___default().custom({
      chainId: config.chainId,
      defaultHardfork: 'petersburg'
    });

    // @ts-ignore
    return new ethereumjs_tx__WEBPACK_IMPORTED_MODULE_2__.Transaction(txData, {
      common
    });
  }
  async signTransaction(confirmation) {
    const transaction = confirmation.payload;
    const {
      estimateGas,
      from,
      gas,
      gasPrice,
      value
    } = transaction;
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_10__["default"].getPair(from);
    const params = {
      ...transaction,
      gas: (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_11__.anyNumberToBN)(gas).toNumber(),
      value: (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_11__.anyNumberToBN)(value).toNumber(),
      gasPrice: (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_11__.anyNumberToBN)(gasPrice).toNumber(),
      gasLimit: (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_11__.anyNumberToBN)(estimateGas).toNumber()
      // nonce: await web3.eth.getTransactionCount(from) // Todo: fill this value from transaction service
    };

    const tx = this.configToTransaction(params);
    await Promise.resolve();
    if (pair.isLocked) {
      _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_10__["default"].unlockPair(pair.address);
    }
    return pair.evmSigner.signTransaction(tx);
  }
  async decorateResult(t, request, result) {
    if (result.payload === '') {
      if (t === 'evmSignatureRequest') {
        result.payload = await this.signMessage(request);
      } else if (t === 'evmSendTransactionRequest') {
        result.payload = await this.signTransaction(request);
      }
      if (t === 'evmSignatureRequest' || t === 'evmSendTransactionRequest') {
        const isAlwaysRequired = await this.#requestService.settingService.isAlwaysRequired;
        if (isAlwaysRequired) {
          this.#requestService.keyringService.lock();
        }
      }
    }
  }
  async completeConfirmation(request) {
    const confirmations = this.confirmationsQueueSubject.getValue();
    for (const ct in request) {
      const type = ct;
      const result = request[type];
      const {
        id
      } = result;
      const {
        resolver,
        validator
      } = this.confirmationsPromiseMap[id];
      const confirmation = confirmations[type][id];
      if (!resolver || !confirmation) {
        this.#logger.error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'), type, id);
        throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_4__.t)('Unable to proceed. Please try again'));
      }

      // Fill signature for some special type
      await this.decorateResult(type, confirmation, result);

      // Validate response from confirmation popup some info like password, response format....
      const error = validator && validator(result);
      if (error) {
        resolver.reject(error);
      }

      // Delete confirmations from queue
      delete this.confirmationsPromiseMap[id];
      delete confirmations[type][id];
      this.confirmationsQueueSubject.next(confirmations);

      // Update icon, and close queue
      this.#requestService.updateIconV2(this.#requestService.numAllRequests === 0);
      resolver.resolve(result);
    }
    return true;
  }
  resetWallet() {
    const confirmations = this.confirmationsQueueSubject.getValue();
    for (const [type, requests] of Object.entries(confirmations)) {
      for (const confirmation of Object.values(requests)) {
        const {
          id
        } = confirmation;
        const {
          resolver
        } = this.confirmationsPromiseMap[id];
        if (!resolver || !confirmation) {
          console.error('Not found confirmation', type, id);
        } else {
          resolver.reject(new Error('Reset wallet'));
        }
        delete this.confirmationsPromiseMap[id];
        delete confirmations[type][id];
      }
    }
    this.confirmationsQueueSubject.next(confirmations);
  }
}

/***/ }),

/***/ "../extension-base/src/services/request-service/handler/MetadataRequestHandler.ts":
/*!****************************************************************************************!*\
  !*** ../extension-base/src/services/request-service/handler/MetadataRequestHandler.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MetadataRequestHandler)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_request_service_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/services/request-service/helper */ "../extension-base/src/services/request-service/helper/index.ts");
/* harmony import */ var _subwallet_extension_base_stores__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores */ "../extension-base/src/stores/Metadata.ts");
/* harmony import */ var _subwallet_extension_base_utils_getId__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/utils/getId */ "../extension-base/src/utils/getId.ts");
/* harmony import */ var _subwallet_extension_chains__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-chains */ "../extension-chains/src/bundle.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0






class MetadataRequestHandler {
  #requestService;
  #metaStore = new _subwallet_extension_base_stores__WEBPACK_IMPORTED_MODULE_0__["default"]();
  #metaRequests = {};
  metaSubject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject([]);
  constructor(requestService) {
    this.#requestService = requestService;
    (0,_subwallet_extension_base_services_request_service_helper__WEBPACK_IMPORTED_MODULE_2__.extractMetadata)(this.#metaStore);
  }
  get knownMetadata() {
    return (0,_subwallet_extension_chains__WEBPACK_IMPORTED_MODULE_3__.knownMetadata)();
  }
  get allMetaRequests() {
    return Object.values(this.#metaRequests).map(({
      id,
      request,
      url
    }) => ({
      id,
      request,
      url
    }));
  }
  get numMetaRequests() {
    return Object.keys(this.#metaRequests).length;
  }
  getMetaRequest(id) {
    return this.#metaRequests[id];
  }
  saveMetadata(meta) {
    this.#metaStore.set(meta.genesisHash, meta);
    (0,_subwallet_extension_chains__WEBPACK_IMPORTED_MODULE_3__.addMetadata)(meta);
  }
  updateIconMeta(shouldClose) {
    this.metaSubject.next(this.allMetaRequests);
    this.#requestService.updateIconV2(shouldClose);
  }
  metaComplete = (id, resolve, reject) => {
    const complete = () => {
      delete this.#metaRequests[id];
      this.updateIconMeta(true);
    };
    return {
      reject: error => {
        complete();
        reject(error);
      },
      resolve: result => {
        complete();
        resolve(result);
      }
    };
  };
  injectMetadata(url, request) {
    return new Promise((resolve, reject) => {
      const id = (0,_subwallet_extension_base_utils_getId__WEBPACK_IMPORTED_MODULE_4__.getId)();
      this.#metaRequests[id] = {
        ...this.metaComplete(id, resolve, reject),
        id,
        request,
        url
      };
      this.updateIconMeta();
      this.#requestService.popupOpen();
    });
  }
  resetWallet() {
    for (const request of Object.values(this.#metaRequests)) {
      request.reject(new Error('Reset wallet'));
    }
    this.metaSubject.next([]);
  }
}

/***/ }),

/***/ "../extension-base/src/services/request-service/handler/NotSupportWCRequestHandler.ts":
/*!********************************************************************************************!*\
  !*** ../extension-base/src/services/request-service/handler/NotSupportWCRequestHandler.ts ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ NotSupportWCRequestHandler)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



// WC = WalletConnect
class NotSupportWCRequestHandler {
  #requestService;
  #notSupportWCRequests = {};
  notSupportWCSubject = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject([]);
  constructor(requestService) {
    this.#requestService = requestService;
  }
  get allNotSupportWCRequests() {
    return Object.values(this.#notSupportWCRequests)
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    .map(({
      reject,
      resolve,
      ...data
    }) => data);
  }
  get numNotSupportWCRequests() {
    return Object.keys(this.#notSupportWCRequests).length;
  }
  getNotSupportWCRequest(id) {
    return this.#notSupportWCRequests[id];
  }
  updateIconNotSupportWC(shouldClose) {
    this.notSupportWCSubject.next(this.allNotSupportWCRequests);
    this.#requestService.updateIconV2(shouldClose);
  }
  notSupportWCComplete = id => {
    const complete = shouldClose => {
      delete this.#notSupportWCRequests[id];
      this.updateIconNotSupportWC(shouldClose);
    };
    return {
      reject: () => {
        complete(true);
      },
      resolve: () => {
        complete(true);
      }
    };
  };
  addNotSupportWCRequest(request) {
    const id = request.id;
    this.#notSupportWCRequests[id] = {
      ...this.notSupportWCComplete(id),
      ...request
    };
    this.updateIconNotSupportWC();
    this.#requestService.popupOpen();
  }
  resetWallet() {
    for (const request of Object.values(this.#notSupportWCRequests)) {
      request.reject(new Error('Reset wallet'));
    }
    this.notSupportWCSubject.next([]);
  }
}

/***/ }),

/***/ "../extension-base/src/services/request-service/handler/PopupHandler.ts":
/*!******************************************************************************!*\
  !*** ../extension-base/src/services/request-service/handler/PopupHandler.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PopupHandler)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/helpers */ "../extension-base/src/background/handlers/helpers.ts");
/* harmony import */ var _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/setting-service/constants */ "../extension-base/src/services/setting-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/environment.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0




const NOTIFICATION_URL = chrome.extension.getURL('notification.html');
const OS = (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_0__.getOS)();
const extraHeight = OS === 'Linux' ? 0 : 28;
const extraWidth = OS === 'Windows' ? 16 : 0;
const POPUP_WINDOW_OPTS = {
  focused: true,
  height: 600 + extraHeight,
  type: 'popup',
  url: NOTIFICATION_URL,
  width: 390 + extraWidth
};
const NORMAL_WINDOW_OPTS = {
  focused: true,
  type: 'normal',
  url: NOTIFICATION_URL
};
class PopupHandler {
  #requestService;
  #notification = _subwallet_extension_base_services_setting_service_constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_NOTIFICATION_TYPE;
  #windows = [];
  constructor(requestService) {
    this.#requestService = requestService;
    const updateNotification = rs => {
      this.#notification = rs.browserConfirmationType;
    };
    requestService.settingService.getSettings(updateNotification);
    requestService.settingService.getSubject().subscribe({
      next: updateNotification
    });
  }
  updateIconV2(shouldClose) {
    const numRequests = this.#requestService.numRequests;
    const text = numRequests > 0 ? numRequests.toString() : '';
    (0,_subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_2__.withErrorLog)(() => {
      var _chrome$browserAction;
      return (_chrome$browserAction = chrome.browserAction) === null || _chrome$browserAction === void 0 ? void 0 : _chrome$browserAction.setBadgeText({
        text
      });
    });
    if (shouldClose && text === '') {
      this.popupClose();
    }
  }
  get popup() {
    return this.#windows;
  }
  popupClose() {
    this.#windows.forEach(id => (0,_subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_2__.withErrorLog)(() => chrome.windows.remove(id)));
    this.#windows = [];
  }
  popupOpen() {
    if (this.#notification !== 'extension') {
      chrome.windows.getCurrent(win => {
        const popupOptions = {
          ...(this.#notification === 'window' ? {
            ...NORMAL_WINDOW_OPTS,
            width: win.width,
            height: win.height
          } : POPUP_WINDOW_OPTS)
        };
        if (win) {
          popupOptions.left = (win.left || 0) + (win.width || 0) - (popupOptions.width || 0) - 20;
          popupOptions.top = (win.top || 0) + 80;
        }
        chrome.windows.create(popupOptions, window => {
          if (window) {
            this.#windows.push(window.id || 0);
          }
        });
      });
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/request-service/handler/SubstrateRequestHandler.ts":
/*!*****************************************************************************************!*\
  !*** ../extension-base/src/services/request-service/handler/SubstrateRequestHandler.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SubstrateRequestHandler)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_RequestExtrinsicSign__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/background/RequestExtrinsicSign */ "../extension-base/src/background/RequestExtrinsicSign.ts");
/* harmony import */ var _subwallet_extension_base_utils_getId__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/utils/getId */ "../extension-base/src/utils/getId.ts");
/* harmony import */ var _subwallet_extension_base_utils_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/utils/request */ "../extension-base/src/utils/request.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var _polkadot_util_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/util/logger */ "../../node_modules/@polkadot/util/logger.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0







class SubstrateRequestHandler {
  #logger;
  #requestService;
  #substrateRequests = {};
  signSubject = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject([]);
  constructor(requestService) {
    this.#requestService = requestService;
    this.#logger = (0,_polkadot_util_logger__WEBPACK_IMPORTED_MODULE_1__.logger)('SubstrateRequestHandler');
  }
  getSignRequest(id) {
    return this.#substrateRequests[id];
  }
  get allSubstrateRequests() {
    return Object.values(this.#substrateRequests).map(({
      account,
      id,
      request,
      url
    }) => ({
      account,
      id,
      request,
      url,
      isInternal: (0,_subwallet_extension_base_utils_request__WEBPACK_IMPORTED_MODULE_2__.isInternalRequest)(url)
    }));
  }
  updateIconSign(shouldClose) {
    this.signSubject.next(this.allSubstrateRequests);
    this.#requestService.updateIconV2(shouldClose);
  }
  signComplete = (id, resolve, reject) => {
    const complete = () => {
      delete this.#substrateRequests[id];
      this.updateIconSign(true);
    };
    return {
      reject: error => {
        complete();
        this.#logger.log(error);
        reject(error);
      },
      resolve: result => {
        complete();
        resolve(result);
      }
    };
  };
  get numSubstrateRequests() {
    return Object.keys(this.#substrateRequests).length;
  }
  async sign(url, request, account, _id) {
    const id = _id || (0,_subwallet_extension_base_utils_getId__WEBPACK_IMPORTED_MODULE_3__.getId)();
    const isAlwaysRequired = await this.#requestService.settingService.isAlwaysRequired;
    if (isAlwaysRequired) {
      this.#requestService.keyringService.lock();
    }
    return new Promise((resolve, reject) => {
      this.#substrateRequests[id] = {
        ...this.signComplete(id, resolve, reject),
        account,
        id,
        request,
        url
      };
      this.updateIconSign();
      this.#requestService.popupOpen();
    });
  }
  async signTransaction(id, address, url, payload) {
    const isAlwaysRequired = await this.#requestService.settingService.isAlwaysRequired;
    if (isAlwaysRequired) {
      this.#requestService.keyringService.lock();
    }
    return new Promise((resolve, reject) => {
      const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_4__["default"].getPair(address);
      const account = {
        address: pair.address,
        ...pair.meta
      };
      this.#substrateRequests[id] = {
        ...this.signComplete(id, resolve, reject),
        account,
        id,
        request: new _subwallet_extension_base_background_RequestExtrinsicSign__WEBPACK_IMPORTED_MODULE_5__["default"](payload),
        url: url
      };
      this.updateIconSign();
      if (!(0,_subwallet_extension_base_utils_request__WEBPACK_IMPORTED_MODULE_2__.isInternalRequest)(url)) {
        this.#requestService.popupOpen();
      }
    });
  }
  resetWallet() {
    for (const request of Object.values(this.#substrateRequests)) {
      request.reject(new Error('Reset wallet'));
    }
    this.signSubject.next([]);
  }
}

/***/ }),

/***/ "../extension-base/src/services/request-service/helper/index.ts":
/*!**********************************************************************!*\
  !*** ../extension-base/src/services/request-service/helper/index.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "extractMetadata": () => (/* binding */ extractMetadata)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_chains__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-chains */ "../extension-chains/src/bundle.ts");
/* harmony import */ var _polkadot_networks_defaults__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/networks/defaults */ "../../node_modules/@polkadot/networks/defaults/genesis.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



const extractMetadata = store => {
  store.allMap(map => {
    const knownEntries = Object.entries(_polkadot_networks_defaults__WEBPACK_IMPORTED_MODULE_0__.knownGenesis);
    const defs = {};
    const removals = [];
    Object.entries(map).forEach(([key, def]) => {
      const entry = knownEntries.find(([, hashes]) => hashes.includes(def.genesisHash));
      if (entry) {
        const [name, hashes] = entry;
        const index = hashes.indexOf(def.genesisHash);

        // flatten the known metadata based on the genesis index
        // (lower is better/newer)
        if (!defs[name] || defs[name].index > index) {
          if (defs[name]) {
            // remove the old version of the metadata
            removals.push(defs[name].key);
          }
          defs[name] = {
            def,
            index,
            key
          };
        }
      } else {
        // this is not a known entry, so we will just apply it
        defs[key] = {
          def,
          index: 0,
          key
        };
      }
    });
    removals.forEach(key => store.remove(key));
    Object.values(defs).forEach(({
      def
    }) => (0,_subwallet_extension_chains__WEBPACK_IMPORTED_MODULE_1__.addMetadata)(def));
  });
};

/***/ }),

/***/ "../extension-base/src/services/request-service/index.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/services/request-service/index.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RequestService)
/* harmony export */ });
/* harmony import */ var _handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./handler */ "../extension-base/src/services/request-service/handler/PopupHandler.ts");
/* harmony import */ var _handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handler */ "../extension-base/src/services/request-service/handler/MetadataRequestHandler.ts");
/* harmony import */ var _handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./handler */ "../extension-base/src/services/request-service/handler/AuthRequestHandler.ts");
/* harmony import */ var _handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./handler */ "../extension-base/src/services/request-service/handler/SubstrateRequestHandler.ts");
/* harmony import */ var _handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./handler */ "../extension-base/src/services/request-service/handler/EvmRequestHandler.ts");
/* harmony import */ var _handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./handler */ "../extension-base/src/services/request-service/handler/ConnectWCRequestHandler.ts");
/* harmony import */ var _handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./handler */ "../extension-base/src/services/request-service/handler/NotSupportWCRequestHandler.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class RequestService {
  // Common
  #chainService;
  #popupHandler;
  #metadataRequestHandler;
  #authRequestHandler;
  #substrateRequestHandler;
  #evmRequestHandler;
  #connectWCRequestHandler;
  #notSupportWCRequestHandler;

  // Common
  constructor(chainService, settingService, keyringService) {
    this.#chainService = chainService;
    this.settingService = settingService;
    this.keyringService = keyringService;
    this.#popupHandler = new _handler__WEBPACK_IMPORTED_MODULE_0__["default"](this);
    this.#metadataRequestHandler = new _handler__WEBPACK_IMPORTED_MODULE_1__["default"](this);
    this.#authRequestHandler = new _handler__WEBPACK_IMPORTED_MODULE_2__["default"](this, this.#chainService, this.keyringService);
    this.#substrateRequestHandler = new _handler__WEBPACK_IMPORTED_MODULE_3__["default"](this);
    this.#evmRequestHandler = new _handler__WEBPACK_IMPORTED_MODULE_4__["default"](this);
    this.#connectWCRequestHandler = new _handler__WEBPACK_IMPORTED_MODULE_5__["default"](this);
    this.#notSupportWCRequestHandler = new _handler__WEBPACK_IMPORTED_MODULE_6__["default"](this);

    // Reset icon on start service
    this.updateIconV2();
  }
  get numAllRequests() {
    return this.allSubstrateRequests.length + this.numEvmRequests;
  }
  updateIconV2(shouldClose) {
    this.#popupHandler.updateIconV2(shouldClose);
  }
  getAddressList(value = false) {
    const addressList = Object.keys(this.keyringService.accounts);
    return addressList.reduce((addressList, v) => ({
      ...addressList,
      [v]: value
    }), {});
  }

  // Popup
  get popup() {
    return this.#popupHandler.popup;
  }
  popupClose() {
    this.#popupHandler.popupClose();
  }
  popupOpen() {
    // Not open new popup and use existed
    const popupList = this.#popupHandler.popup;
    if (popupList && popupList.length > 0) {
      var _chrome$windows$updat;
      (_chrome$windows$updat = chrome.windows.update(popupList[0], {
        focused: true
      })) === null || _chrome$windows$updat === void 0 ? void 0 : _chrome$windows$updat.catch(console.error);
    } else {
      this.#popupHandler.popupOpen();
    }
  }

  // Metadata
  get metaSubject() {
    return this.#metadataRequestHandler.metaSubject;
  }
  get knownMetadata() {
    return this.#metadataRequestHandler.knownMetadata;
  }
  get numMetaRequests() {
    return this.#metadataRequestHandler.numMetaRequests;
  }
  injectMetadata(url, request) {
    return this.#metadataRequestHandler.injectMetadata(url, request);
  }
  getMetaRequest(id) {
    return this.#metadataRequestHandler.getMetaRequest(id);
  }
  saveMetadata(meta) {
    this.#metadataRequestHandler.saveMetadata(meta);
  }

  // Auth
  get authSubjectV2() {
    return this.#authRequestHandler.authSubjectV2;
  }
  get numAuthRequests() {
    return this.#authRequestHandler.numAuthRequestsV2;
  }
  setAuthorize(data, callback) {
    this.#authRequestHandler.setAuthorize(data, callback);
  }
  getAuthorize(update) {
    this.#authRequestHandler.getAuthorize(update);
  }
  getAuthList() {
    return this.#authRequestHandler.getAuthList();
  }
  async authorizeUrlV2(url, request) {
    return this.#authRequestHandler.authorizeUrlV2(url, request);
  }
  getAuthRequestV2(id) {
    return this.#authRequestHandler.getAuthRequestV2(id);
  }
  getDAppChainInfo(options) {
    return this.#authRequestHandler.getDAppChainInfo(options);
  }
  get subscribeEvmChainChange() {
    return this.#authRequestHandler.subscribeEvmChainChange;
  }
  get subscribeAuthorizeUrlSubject() {
    return this.#authRequestHandler.subscribeAuthorizeUrlSubject;
  }
  ensureUrlAuthorizedV2(url) {
    return this.#authRequestHandler.ensureUrlAuthorizedV2(url);
  }

  // Substrate requests
  get signSubject() {
    return this.#substrateRequestHandler.signSubject;
  }
  get allSubstrateRequests() {
    return this.#substrateRequestHandler.allSubstrateRequests;
  }
  sign(url, request, account, id) {
    return this.#substrateRequestHandler.sign(url, request, account, id);
  }
  get numSubstrateRequests() {
    return this.#substrateRequestHandler.numSubstrateRequests;
  }

  // Evm requests
  get numEvmRequests() {
    return this.#evmRequestHandler.numEvmRequests;
  }
  get confirmationsQueueSubject() {
    return this.#evmRequestHandler.getConfirmationsQueueSubject();
  }
  getSignRequest(id) {
    return this.#substrateRequestHandler.getSignRequest(id);
  }
  async signInternalTransaction(id, address, url, payload) {
    return this.#substrateRequestHandler.signTransaction(id, address, url, payload);
  }
  addConfirmation(id, url, type, payload, options = {}, validator) {
    return this.#evmRequestHandler.addConfirmation(id, url, type, payload, options, validator);
  }
  async completeConfirmation(request) {
    return await this.#evmRequestHandler.completeConfirmation(request);
  }
  updateConfirmation(id, type, payload, options = {}, validator) {
    return this.#evmRequestHandler.updateConfirmation(id, type, payload, options, validator);
  }

  // WalletConnect Connect requests
  getConnectWCRequest(id) {
    return this.#connectWCRequestHandler.getConnectWCRequest(id);
  }
  get connectWCSubject() {
    return this.#connectWCRequestHandler.connectWCSubject;
  }
  get allConnectWCRequests() {
    return this.#connectWCRequestHandler.allConnectWCRequests;
  }
  get numConnectWCRequests() {
    return this.#connectWCRequestHandler.numConnectWCRequests;
  }
  addConnectWCRequest(request) {
    return this.#connectWCRequestHandler.addConnectWCRequest(request);
  }

  // WalletConnect not support requests
  getNotSupportWCRequest(id) {
    return this.#notSupportWCRequestHandler.getNotSupportWCRequest(id);
  }
  get notSupportWCSubject() {
    return this.#notSupportWCRequestHandler.notSupportWCSubject;
  }
  get allNotSupportWCRequests() {
    return this.#notSupportWCRequestHandler.allNotSupportWCRequests;
  }
  get numNotSupportWCRequests() {
    return this.#notSupportWCRequestHandler.numNotSupportWCRequests;
  }
  addNotSupportWCRequest(request) {
    return this.#notSupportWCRequestHandler.addNotSupportWCRequest(request);
  }

  // General methods
  get numRequests() {
    return this.numMetaRequests + this.numAuthRequests + this.numSubstrateRequests + this.numEvmRequests + this.numConnectWCRequests + this.numNotSupportWCRequests;
  }
  resetWallet() {
    this.#authRequestHandler.resetWallet();
    this.#substrateRequestHandler.resetWallet();
    this.#evmRequestHandler.resetWallet();
    this.#metadataRequestHandler.resetWallet();
    this.#connectWCRequestHandler.resetWallet();
    this.#notSupportWCRequestHandler.resetWallet();
  }
}

/***/ }),

/***/ "../extension-base/src/services/setting-service/SettingService.ts":
/*!************************************************************************!*\
  !*** ../extension-base/src/services/setting-service/SettingService.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SettingService)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/storage.ts");
/* harmony import */ var _subwallet_extension_base_stores_PassPhishingStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/stores/PassPhishingStore */ "../extension-base/src/stores/PassPhishingStore.ts");
/* harmony import */ var _subwallet_extension_base_stores_Settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/Settings */ "../extension-base/src/stores/Settings.ts");
/* harmony import */ var _i18n_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./i18n/i18n */ "../extension-base/src/services/setting-service/i18n/i18n.ts");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ "../extension-base/src/services/setting-service/constants.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0






class SettingService {
  settingsStore = new _subwallet_extension_base_stores_Settings__WEBPACK_IMPORTED_MODULE_0__["default"]();
  passPhishingStore = new _subwallet_extension_base_stores_PassPhishingStore__WEBPACK_IMPORTED_MODULE_1__["default"]();
  constructor() {
    let old = localStorage.getItem(_subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.LANGUAGE) || 'en';
    const updateLanguage = ({
      language
    }) => {
      if (language !== old) {
        old = language;
        _i18n_i18n__WEBPACK_IMPORTED_MODULE_3__["default"].changeLanguage(language).catch(console.error);
      }
    };
    this.getSettings(updateLanguage);
    this.settingsStore.getSubject().subscribe({
      next: updateLanguage
    });
  }
  getSubject() {
    return this.settingsStore.getSubject();
  }
  getSettings(update) {
    this.settingsStore.get('Settings', value => {
      update({
        ..._constants__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SETTING,
        ...(value || {})
      });
    });
  }
  setSettings(data, callback) {
    this.settingsStore.set('Settings', data, callback);
  }
  passPhishingSubject() {
    return this.passPhishingStore.getSubject();
  }
  getPassPhishingList(update) {
    this.passPhishingStore.get('PassPhishing', value => {
      update(value || {});
    });
  }
  setPassPhishing(data, callback) {
    this.passPhishingStore.set('PassPhishing', data, callback);
  }

  // Use for mobile only
  get isAlwaysRequired() {
    return new Promise(resolve => {
      this.settingsStore.get('Settings', value => {
        resolve(!value.timeAutoLock);
      });
    });
  }
  resetWallet() {
    this.settingsStore.set('Settings', _constants__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SETTING);
    this.passPhishingStore.set('PassPhishing', {});
  }
}

/***/ }),

/***/ "../extension-base/src/services/setting-service/i18n/Backend.ts":
/*!**********************************************************************!*\
  !*** ../extension-base/src/services/setting-service/i18n/Backend.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Backend)
/* harmony export */ });
/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cache */ "../extension-base/src/services/setting-service/i18n/cache.ts");
// Copyright 2017-2022 @polkadot/react-components authors & contributors
// SPDX-License-Identifier: Apache-2.0


const loaders = {};
class Backend {
  type = 'backend';
  static type = 'backend';
  async read(lng, _namespace, responder) {
    if (_cache__WEBPACK_IMPORTED_MODULE_0__["default"][lng]) {
      return responder(null, _cache__WEBPACK_IMPORTED_MODULE_0__["default"][lng]);
    }

    // eslint-disable-next-line @typescript-eslint/no-misused-promises
    if (!loaders[lng]) {
      loaders[lng] = this.createLoader(lng);
    }
    const [error, data] = await loaders[lng];
    return responder(error, data);
  }
  async createLoader(lng) {
    try {
      const response = await fetch(`locales/${lng}/translation.json`, {});
      if (!response.ok) {
        return [`i18n: failed loading ${lng}`, response.status >= 500 && response.status < 600];
      } else {
        _cache__WEBPACK_IMPORTED_MODULE_0__["default"][lng] = await response.json();
        return [null, _cache__WEBPACK_IMPORTED_MODULE_0__["default"][lng]];
      }
    } catch (error) {
      return [error.message, false];
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/setting-service/i18n/cache.ts":
/*!********************************************************************!*\
  !*** ../extension-base/src/services/setting-service/i18n/cache.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// Copyright 2017-2022 @polkadot/react-components authors & contributors
// SPDX-License-Identifier: Apache-2.0

const languageCache = {};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (languageCache);

/***/ }),

/***/ "../extension-base/src/services/setting-service/i18n/i18n.ts":
/*!*******************************************************************!*\
  !*** ../extension-base/src/services/setting-service/i18n/i18n.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/storage.ts");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
/* harmony import */ var _Backend__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Backend */ "../extension-base/src/services/setting-service/i18n/Backend.ts");
// Copyright 2019-2022 @polkadot/extension-ui authors & contributors
// SPDX-License-Identifier: Apache-2.0




i18next__WEBPACK_IMPORTED_MODULE_0__["default"].use(_Backend__WEBPACK_IMPORTED_MODULE_1__["default"]).init({
  backend: {},
  debug: false,
  fallbackLng: 'en',
  interpolation: {
    escapeValue: false
  },
  keySeparator: false,
  lng: localStorage.getItem(_subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_2__.LANGUAGE) || 'en',
  load: 'languageOnly',
  nsSeparator: false,
  returnEmptyString: false,
  returnNull: false
}).catch(error => console.log('i18n: failure', error));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (i18next__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "../extension-base/src/services/storage-service/DatabaseService.ts":
/*!*************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/DatabaseService.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DatabaseService)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_databases__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/databases */ "../extension-base/src/services/storage-service/databases/index.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Price.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Balance.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Nft.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/NftCollection.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Crowdloan.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Staking.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Transaction.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Migration.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Metadata.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Chain.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores */ "../extension-base/src/services/storage-service/db-stores/Asset.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_ChainStakingMetadata__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/ChainStakingMetadata */ "../extension-base/src/services/storage-service/db-stores/ChainStakingMetadata.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_MantaPay__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/MantaPay */ "../extension-base/src/services/storage-service/db-stores/MantaPay.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_NominatorMetadata__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/NominatorMetadata */ "../extension-base/src/services/storage-service/db-stores/NominatorMetadata.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/logger.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0









class DatabaseService {
  // TODO: might remove this

  constructor(eventService) {
    this.eventService = eventService;
    this.logger = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_0__.logger)('DB-Service');
    this._db = new _subwallet_extension_base_services_storage_service_databases__WEBPACK_IMPORTED_MODULE_1__["default"]();
    this._db.on('ready', () => {
      this.eventService.emit('database.ready', true);
    });
    this.stores = {
      price: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_2__["default"](this._db.price),
      balance: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_3__["default"](this._db.balances),
      nft: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_4__["default"](this._db.nfts),
      nftCollection: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_5__["default"](this._db.nftCollections),
      crowdloan: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_6__["default"](this._db.crowdloans),
      staking: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_7__["default"](this._db.stakings),
      transaction: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_8__["default"](this._db.transactions),
      migration: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_9__["default"](this._db.migrations),
      metadata: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_10__["default"](this._db.metadata),
      chain: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_11__["default"](this._db.chain),
      asset: new _subwallet_extension_base_services_storage_service_db_stores__WEBPACK_IMPORTED_MODULE_12__["default"](this._db.asset),
      // staking
      chainStakingMetadata: new _subwallet_extension_base_services_storage_service_db_stores_ChainStakingMetadata__WEBPACK_IMPORTED_MODULE_13__["default"](this._db.chainStakingMetadata),
      nominatorMetadata: new _subwallet_extension_base_services_storage_service_db_stores_NominatorMetadata__WEBPACK_IMPORTED_MODULE_14__["default"](this._db.nominatorMetadata),
      mantaPay: new _subwallet_extension_base_services_storage_service_db_stores_MantaPay__WEBPACK_IMPORTED_MODULE_15__["default"](this._db.mantaPay)
    };
  }
  async updatePriceStore(priceData) {
    await this.stores.price.table.put(priceData);
  }
  async getPriceStore() {
    try {
      const rs = await this.stores.price.table.get('usd');
      return rs;
    } catch (e) {
      this.logger.error(e);
      return undefined;
    }
  }

  // Balance
  async getStoredBalance() {
    return this.stores.balance.table.toArray();
  }
  async updateBalanceStore(address, item) {
    if (item.state === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.APIItemState.READY) {
      return this.stores.balance.upsert({
        address,
        ...item
      });
    }
  }
  async removeFromBalanceStore(assets) {
    return this.stores.balance.removeBySlugs(assets);
  }

  // Crowdloan
  async updateCrowdloanStore(chain, address, item) {
    if (item.state === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.APIItemState.READY && item.contribute !== '0') {
      return this.stores.crowdloan.upsert({
        chain,
        address,
        ...item
      });
    } else {
      return this.stores.crowdloan.deleteByChainAndAddress(chain, address);
    }
  }

  // Staking
  async updateStaking(chain, address, item) {
    if (item.state === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.APIItemState.READY) {
      return this.stores.staking.upsert(item);
    }
  }
  async getStakings(addresses, chains) {
    return this.stores.staking.getStakings(addresses, chains);
  }
  async getStakingsByChains(chains) {
    return this.stores.staking.getStakingsByChains(chains);
  }
  async getPooledStakings(addresses, chainHashes) {
    return this.stores.staking.getPooledStakings(addresses, chainHashes);
  }
  subscribeStaking(addresses, chainList, callback) {
    this.stakingSubscription && this.stakingSubscription.unsubscribe();
    this.stakingSubscription = this.stores.staking.subscribeStaking(addresses, chainList).subscribe({
      next: stakings => callback && callback(stakings)
    });
    return this.stakingSubscription;
  }
  subscribeChainStakingMetadata(chains, callback) {
    this.stores.chainStakingMetadata.subscribeByChain(chains).subscribe({
      next: data => callback && callback(data)
    });
  }
  subscribeNominatorMetadata(addresses, callback) {
    return this.stores.nominatorMetadata.subscribeByAddresses(addresses).subscribe({
      next: data => callback && callback(data)
    });
  }

  // Transaction histories
  async getHistories(query) {
    return this.stores.transaction.queryHistory(query);
  }
  async upsertHistory(histories) {
    const cleanedHistory = histories.filter(x => x && x.address && x.chain && x.extrinsicHash);
    return this.stores.transaction.bulkUpsert(cleanedHistory);
  }
  async updateHistoryByExtrinsicHash(extrinsicHash, updateData) {
    const canUpdate = updateData && extrinsicHash;
    if (!canUpdate) {
      return;
    }
    return this.stores.transaction.updateWithQuery({
      extrinsicHash
    }, updateData);
  }

  // NFT Collection
  async addNftCollection(collection) {
    return this.stores.nftCollection.upsert(collection);
  }
  async deleteNftCollection(chain, collectionId) {
    await this.stores.nftCollection.removeCollection(chain, collectionId);
    await this.stores.nft.deleteNftsByCollection(chain, collectionId);
  }
  getAllNftCollection(chainHashes) {
    return this.stores.nftCollection.getNftCollection(chainHashes);
  }

  // NFT
  subscribeNft(addresses, chainHashes, callback) {
    this.nftSubscription && this.nftSubscription.unsubscribe();
    this.nftSubscription = this.stores.nft.subscribeNft(addresses, chainHashes).subscribe({
      next: nfts => callback && callback(nfts)
    });
    return this.nftSubscription;
  }
  async cleanUpNft(chain, owner, collectionIds, nftIds, ownNothing) {
    if (ownNothing) {
      return this.stores.nft.deleteNftsByChainAndOwner(chain, (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_17__.reformatAddress)(owner, 42), collectionIds);
    }
    return this.stores.nft.cleanUpNfts(chain, (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_17__.reformatAddress)(owner, 42), collectionIds, nftIds);
  }
  async getNft(addresses, chainHashes) {
    return this.stores.nft.getNft(addresses, chainHashes);
  }
  async addNft(address, nft) {
    return this.stores.nft.upsert({
      ...nft,
      address
    });
  }
  handleNftTransfer(chain, addresses, nftItem) {
    return this.stores.nft.deleteNftItem(chain, addresses, nftItem);
  }
  removeNfts(chain, address, collectionId, nftIds) {
    return this.stores.nft.removeNfts(chain, address, collectionId, nftIds);
  }
  removeNftsByAddress(address) {
    return this.stores.nft.removeNftsByAddress([address]);
  }

  // Chain
  async updateChainStore(item) {
    return this.stores.chain.upsert(item);
  }
  async bulkUpdateChainStore(data) {
    return this.stores.chain.bulkUpsert(data);
  }
  async removeFromChainStore(chains) {
    return this.stores.chain.removeChains(chains);
  }
  async getAllChainStore() {
    return this.stores.chain.getAll();
  }

  // Asset
  async updateAssetStore(item) {
    return this.stores.asset.upsert(item);
  }
  async getAllAssetStore() {
    return this.stores.asset.getAll();
  }
  async removeFromAssetStore(items) {
    return this.stores.asset.removeAssets(items);
  }

  // Staking
  async updateChainStakingMetadata(item, changes) {
    const existingRecord = await this.stores.chainStakingMetadata.getByChainAndType(item.chain, item.type);
    if (existingRecord && changes) {
      return this.stores.chainStakingMetadata.updateByChainAndType(item.chain, item.type, changes);
    }
    return this.stores.chainStakingMetadata.upsert(item);
  }
  async getChainStakingMetadata() {
    return this.stores.chainStakingMetadata.getAll();
  }
  async getStakingMetadataByChain(chain, type = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_16__.StakingType.NOMINATED) {
    return this.stores.chainStakingMetadata.getByChainAndType(chain, type);
  }
  async updateNominatorMetadata(item) {
    return this.stores.nominatorMetadata.upsert(item);
  }
  async getNominatorMetadata() {
    return this.stores.nominatorMetadata.getAll();
  }
  async resetWallet(resetAll) {
    return new Promise((resolve, reject) => {
      const stores = [this.stores.balance, this.stores.nft, this.stores.nftCollection, this.stores.crowdloan, this.stores.staking, this.stores.transaction, this.stores.nominatorMetadata];
      if (resetAll) {
        stores.push(this.stores.chain, this.stores.asset);
      }
      const promises = stores.map(store => store.clear());
      Promise.all(promises).then(() => {
        resolve();
      }).catch(e => {
        reject(e);
      });
    });
  }
  async setMantaPayData(data) {
    await this._db.mantaPay.put(data); // just override if exist
  }

  async updateMantaPayData(key, data) {
    await this._db.mantaPay.update(key, data); // just override if exist
  }

  async getMantaPayData(key) {
    return this._db.mantaPay.get({
      key
    });
  }
  async deleteMantaPayConfig(key) {
    return this.stores.mantaPay.deleteRecord(key);
  }
  subscribeMantaPayConfig(chain, callback) {
    this.stores.mantaPay.subscribeMantaPayConfig(chain).subscribe({
      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
      next: data => callback && callback(data)
    });
  }
  async getMantaPayConfig(chain) {
    return this.stores.mantaPay.getConfig(chain);
  }
  async getMantaPayFirstConfig(chain) {
    return this.stores.mantaPay.getFirstConfig(chain);
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/databases/index.ts":
/*!*************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/databases/index.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ KoniDatabase)
/* harmony export */ });
/* harmony import */ var dexie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dexie */ "../../node_modules/dexie/dist/modern/dexie.mjs");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0


const DEFAULT_DATABASE = 'SubWalletDB_v2';
class KoniDatabase extends dexie__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor(name = DEFAULT_DATABASE, schemaVersion = 11) {
    super(name);
    this.schemaVersion = schemaVersion;
    this.conditionalVersion(1, {
      // DO NOT declare all columns, only declare properties to be indexed
      // Read more: https://dexie.org/docs/Version/Version.stores()
      // Primary key is always the first entry
      chain: 'slug',
      asset: 'slug',
      price: 'currency',
      balances: '[tokenSlug+address], tokenSlug, address',
      nfts: '[chain+address+collectionId+id], [address+chain], chain, id, address, collectionId, name',
      nftCollections: '[chain+collectionId], chain, collectionId, collectionName',
      crowdloans: '[chain+address], chain, address',
      stakings: '[chain+address+type], [chain+address], chain, address, type',
      transactions: '[chain+address+extrinsicHash], &[chain+address+extrinsicHash], chain, address, extrinsicHash, action',
      migrations: '[key+name]',
      chainStakingMetadata: '[chain+type], chain, type',
      nominatorMetadata: '[chain+address+type], [chain+address], chain, address, type'
    });
    this.conditionalVersion(2, {
      metadata: 'genesisHash, chain'
    });
    this.conditionalVersion(3, {
      mantaPay: 'key, chain'
    });
  }
  conditionalVersion(version, schema, upgrade) {
    if (this.schemaVersion != null && this.schemaVersion < version) {
      return;
    }
    const dexieVersion = this.version(version).stores(schema);
    if (upgrade != null) {
      dexieVersion.upgrade(upgrade);
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Asset.ts":
/*!*************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Asset.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AssetStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStore */ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class AssetStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async getAll() {
    return this.table.toArray();
  }
  async removeAssets(keys) {
    return this.table.where('slug').anyOfIgnoreCase(keys).delete();
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Balance.ts":
/*!***************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Balance.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BalanceStore)
/* harmony export */ });
/* harmony import */ var _db_stores_BaseStoreWithAddress__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db-stores/BaseStoreWithAddress */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddress.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class BalanceStore extends _db_stores_BaseStoreWithAddress__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async getBalanceMapByAddress(address) {
    const data = await this.table.where('address').equals(address).toArray();
    const balanceMap = {};
    data.forEach(storedBalance => {
      balanceMap[storedBalance.tokenSlug] = {
        tokenSlug: storedBalance.tokenSlug,
        state: storedBalance.state,
        free: storedBalance.free,
        locked: storedBalance.locked,
        substrateInfo: storedBalance.substrateInfo,
        timestamp: storedBalance.timestamp
      };
    });
    return balanceMap;
  }
  async removeBySlugs(tokenSlugs) {
    return this.table.where('tokenSlug').anyOfIgnoreCase(tokenSlugs).delete();
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts":
/*!*****************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/BaseStore.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BaseStore)
/* harmony export */ });
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/logger.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class BaseStore {
  constructor(table) {
    this._table = table;
    this.logger = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_0__.logger)(this.constructor.name);
  }
  get table() {
    return this._table;
  }
  upsert(record) {
    return this.table.put(record);
  }
  bulkUpsert(records) {
    return this.table.bulkPut(records);
  }
  remove(record) {
    return this.table.delete(record);
  }
  clear() {
    return this.table.clear();
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddress.ts":
/*!****************************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddress.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BaseStoreWithAddress)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStore */ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class BaseStoreWithAddress extends _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  removeAllByAddress(address) {
    const conditions = {
      address
    };
    return this.table.where(conditions).delete();
  }

  // async getDataByAddressAsObject (address: string) {
  //   const data = await this.table.where('address').equals(address).toArray();
  //
  //   console.log('from store', data);
  //
  //   return {};
  // }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddressAndChain.ts":
/*!************************************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddressAndChain.ts ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BaseStoreWithAddressAndChain)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStore */ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class BaseStoreWithAddressAndChain extends _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  convertToJsonObject(items) {
    return items.reduce((a, v) => ({
      ...a,
      [v.chain]: v
    }), {});
  }
  removeAllByAddress(address) {
    return this.table.where('address').equalsIgnoreCase(address).delete();
  }
  async getDataByAddressAsObject(address) {
    const data = await this.table.where('address').equals(address).toArray();
    return this.convertToJsonObject(data);
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithChain.ts":
/*!**************************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/BaseStoreWithChain.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BaseStoreWithChain)
/* harmony export */ });
/* harmony import */ var _BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseStore */ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class BaseStoreWithChain extends _BaseStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  convertToJsonObject(items) {
    return items.reduce((a, v) => ({
      ...a,
      [v.chain]: v
    }), {});
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Chain.ts":
/*!*************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Chain.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ChainStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStore */ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class ChainStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async getAll() {
    return this.table.toArray();
  }
  async removeChains(chains) {
    return this.table.where('slug').anyOfIgnoreCase(chains).delete();
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/ChainStakingMetadata.ts":
/*!****************************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/ChainStakingMetadata.ts ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ChainStakingMetadataStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithChain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStoreWithChain */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithChain.ts");
/* harmony import */ var dexie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dexie */ "../../node_modules/dexie/dist/modern/dexie.mjs");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0




class ChainStakingMetadataStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithChain__WEBPACK_IMPORTED_MODULE_1__["default"] {
  async getAll() {
    return this.table.toArray();
  }
  subscribeByChain(chains) {
    return (0,dexie__WEBPACK_IMPORTED_MODULE_0__.liveQuery)(() => this.getByChains(chains));
  }
  getByChains(chains) {
    if (chains.length === 0) {
      return this.getAll();
    }
    return this.table.where('chain').anyOfIgnoreCase(chains).toArray();
  }
  getByChainAndType(chain, type = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED) {
    return this.table.where({
      chain,
      type
    }).first();
  }
  async removeByChains(chains) {
    return this.table.where('chain').anyOfIgnoreCase(chains).delete();
  }
  updateByChainAndType(chain, type = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.NOMINATED, changes) {
    return this.table.update([chain, type], changes);
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Crowdloan.ts":
/*!*****************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Crowdloan.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ CrowdloanStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStoreWithAddressAndChain */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddressAndChain.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class CrowdloanStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_0__["default"] {
  getCrowdloan(address) {
    return this.table.where('address').equals(address).toArray();
  }
  deleteByChainAndAddress(chain, address) {
    return this.table.where({
      chain,
      address
    }).delete();
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/MantaPay.ts":
/*!****************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/MantaPay.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MantaPayStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStore */ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts");
/* harmony import */ var dexie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dexie */ "../../node_modules/dexie/dist/modern/dexie.mjs");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MantaPayStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStore__WEBPACK_IMPORTED_MODULE_1__["default"] {
  async getAll() {
    return this.table.toArray();
  }
  subscribeMantaPayConfig(chain) {
    return (0,dexie__WEBPACK_IMPORTED_MODULE_0__.liveQuery)(
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-return
    () => this.table.where({
      chain
    }).filter(data => (data === null || data === void 0 ? void 0 : data.key) && (data === null || data === void 0 ? void 0 : data.key.startsWith('config'))).toArray());
  }
  getConfig(chain) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-return
    return this.table.where({
      chain
    }).filter(data => (data === null || data === void 0 ? void 0 : data.key) && (data === null || data === void 0 ? void 0 : data.key.startsWith('config'))).toArray();
  }
  getFirstConfig(chain) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-return
    return this.table.where({
      chain
    }).filter(data => (data === null || data === void 0 ? void 0 : data.key) && (data === null || data === void 0 ? void 0 : data.key.startsWith('config'))).first();
  }
  deleteRecord(key) {
    return this.table.where('key').equals(key).delete();
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Metadata.ts":
/*!****************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Metadata.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MetadataStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithChain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStoreWithChain */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithChain.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class MetadataStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithChain__WEBPACK_IMPORTED_MODULE_0__["default"] {
  getMetadata(chain) {
    return this.table.where('chain').equals(chain).first();
  }
  upsertMetadata(chain, metadata) {
    return this.table.put(metadata, chain);
  }
  getMetadataByGenesisHash(genesisHash) {
    return this.table.get(genesisHash);
  }
  updateMetadataByGenesisHash(genesisHash, metadata) {
    return this.table.put(metadata, genesisHash);
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Migration.ts":
/*!*****************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Migration.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MigrationStore)
/* harmony export */ });
/* harmony import */ var _BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseStore */ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class MigrationStore extends _BaseStore__WEBPACK_IMPORTED_MODULE_0__["default"] {}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Nft.ts":
/*!***********************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Nft.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ NftStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStoreWithAddressAndChain */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddressAndChain.ts");
/* harmony import */ var dexie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dexie */ "../../node_modules/dexie/dist/modern/dexie.mjs");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class NftStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_1__["default"] {
  getNft(addresses, chainList = []) {
    if (addresses.length) {
      return this.table.where('address').anyOfIgnoreCase(addresses).and(item => chainList && chainList.includes(item.chain)).toArray();
    }

    // return this.table.filter((item) => !chainHashes.length || chainHashes.includes(item.chainHash)).toArray();
    return this.table.filter(item => chainList && chainList.includes(item.chain)).toArray();
  }
  subscribeNft(addresses, chainList = []) {
    return (0,dexie__WEBPACK_IMPORTED_MODULE_0__.liveQuery)(() => this.getNft(addresses, chainList));
  }
  cleanUpNfts(chain, address, collectionIds, nftIds) {
    return this.table.where({
      address,
      chain
    }).and(nft => collectionIds.includes(nft.collectionId) && !nftIds.includes(nft.id)).delete();
  }
  deleteNftsByChainAndOwner(chain, address, collectionIds) {
    return this.table.where({
      address,
      chain
    }).and(nft => collectionIds.includes(nft.collectionId)).delete();
  }
  deleteNftByAddress(addresses) {
    return this.table.where('address').anyOfIgnoreCase(addresses).delete();
  }
  deleteNftItem(chain, addresses, nftItem) {
    return this.table.where('address').anyOfIgnoreCase(addresses).filter(storedItem => storedItem.chain === chain && storedItem.collectionId === nftItem.collectionId && storedItem.id === nftItem.id).delete();
  }
  deleteNftsByCollection(chain, collectionId) {
    return this.table.where({
      chain,
      collectionId
    }).delete();
  }
  removeNfts(chain, address, collectionId, nftIds) {
    return this.table.where({
      chain,
      address,
      collectionId
    }).filter(item => nftIds.includes(item.id || '')).delete();
  }
  removeNftsByAddress(addresses) {
    return this.table.where('address').anyOfIgnoreCase(addresses).delete();
  }

  // reformatCollectionIds (items: INft[]) {
  //   return items.map((item) => {
  //     item.collectionId = item.collectionId?.toLowerCase();

  //     return item;
  //   });
  // }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/NftCollection.ts":
/*!*********************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/NftCollection.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ NftCollectionStore)
/* harmony export */ });
/* harmony import */ var dexie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dexie */ "../../node_modules/dexie/dist/modern/dexie.mjs");
/* harmony import */ var _BaseStoreWithChain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BaseStoreWithChain */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithChain.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class NftCollectionStore extends _BaseStoreWithChain__WEBPACK_IMPORTED_MODULE_1__["default"] {
  subscribeNftCollection(chains) {
    return (0,dexie__WEBPACK_IMPORTED_MODULE_0__.liveQuery)(() => this.getNftCollection(chains));
  }
  getNftCollection(chainList) {
    if (chainList && chainList.length > 0) {
      return this.table.where('chain').anyOfIgnoreCase(chainList).toArray();
    }
    return this.table.toArray();
  }
  removeCollection(chain, collectionId) {
    return this.table.where({
      chain,
      collectionId
    }).delete();
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/NominatorMetadata.ts":
/*!*************************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/NominatorMetadata.ts ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ NominatorMetadataStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStoreWithAddressAndChain */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddressAndChain.ts");
/* harmony import */ var dexie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dexie */ "../../node_modules/dexie/dist/modern/dexie.mjs");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0




class NominatorMetadataStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_1__["default"] {
  async getAll() {
    return this.table.filter(item => item.status !== _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING).toArray();
  }
  subscribeByAddresses(addresses) {
    return (0,dexie__WEBPACK_IMPORTED_MODULE_0__.liveQuery)(() => this.getByAddress(addresses));
  }
  subscribeAll() {
    return (0,dexie__WEBPACK_IMPORTED_MODULE_0__.liveQuery)(() => this.getAll());
  }
  getByAddress(addresses) {
    return this.table.where('address').anyOfIgnoreCase(addresses).and(item => item.status !== _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingStatus.NOT_STAKING).toArray();
  }
  async removeByAddress(address) {
    return this.table.where('address').anyOfIgnoreCase(address).delete();
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Price.ts":
/*!*************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Price.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Price)
/* harmony export */ });
/* harmony import */ var _BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseStore */ "../extension-base/src/services/storage-service/db-stores/BaseStore.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class Price extends _BaseStore__WEBPACK_IMPORTED_MODULE_0__["default"] {}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Staking.ts":
/*!***************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Staking.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ StakingStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStoreWithAddressAndChain */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddressAndChain.ts");
/* harmony import */ var dexie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dexie */ "../../node_modules/dexie/dist/modern/dexie.mjs");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0




class StakingStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_1__["default"] {
  getSingleRecord(chain, address, type) {
    return this.table.where('[chain+address+type]').equals([chain, address, type]).first();
  }
  getStakings(addresses, chainList = []) {
    if (addresses.length) {
      return this.table.where('address').anyOfIgnoreCase(addresses).and(item => chainList && chainList.includes(item.chain) && parseFloat(item.balance) > 0).toArray();
    }
    return this.table.filter(item => chainList && chainList.includes(item.chain) && parseFloat(item.balance) > 0).toArray();
  }
  getStakingsByChains(chainList) {
    return this.table.filter(item => chainList.includes(item.chain) && parseFloat(item.balance) > 0).toArray();
  }
  getPooledStakings(addresses, chainList = []) {
    if (addresses.length) {
      return this.table.where('address').anyOfIgnoreCase(addresses).and(item => (!chainList.length || chainList.includes(item.chain)) && parseFloat(item.balance) > 0 && item.type === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.POOLED).toArray();
    }
    return this.table.filter(item => (!chainList.length || chainList.includes(item.chain)) && parseFloat(item.balance) > 0 && item.type === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_2__.StakingType.POOLED).toArray();
  }
  subscribeStaking(addresses, chainList = []) {
    return (0,dexie__WEBPACK_IMPORTED_MODULE_0__.liveQuery)(() => this.getStakings(addresses, chainList));
  }
}

/***/ }),

/***/ "../extension-base/src/services/storage-service/db-stores/Transaction.ts":
/*!*******************************************************************************!*\
  !*** ../extension-base/src/services/storage-service/db-stores/Transaction.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TransactionStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/storage-service/db-stores/BaseStoreWithAddressAndChain */ "../extension-base/src/services/storage-service/db-stores/BaseStoreWithAddressAndChain.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


class TransactionStore extends _subwallet_extension_base_services_storage_service_db_stores_BaseStoreWithAddressAndChain__WEBPACK_IMPORTED_MODULE_0__["default"] {
  async getHistoryByAddressAsObject(address) {
    if (address === 'ALL') {
      // Todo: Migrate to all account key
      return this.table.toArray();
    }
    return this.table.where('address').equals(address).toArray();
  }
  async queryHistory(query) {
    if (!(query !== null && query !== void 0 && query.address) && !(query !== null && query !== void 0 && query.chain)) {
      return this.table.toArray();
    } else {
      const queryObject = {};
      if (query !== null && query !== void 0 && query.chain) {
        queryObject.chain = query === null || query === void 0 ? void 0 : query.chain;
      }
      if (query !== null && query !== void 0 && query.extrinsicHash) {
        queryObject.extrinsicHash = query === null || query === void 0 ? void 0 : query.extrinsicHash;
      }
      if (query !== null && query !== void 0 && query.address) {
        queryObject.address = query === null || query === void 0 ? void 0 : query.address;
      }
      return this.table.where(queryObject).toArray();
    }
  }
  async bulkUpsert(records) {
    await this.table.bulkPut(records);
    return true;
  }
  async updateWithQuery(query, update) {
    await this.table.where(query).modify(record => {
      return Object.assign(record, update);
    });
    return true;
  }
}

/***/ }),

/***/ "../extension-base/src/services/subscan-service/index.ts":
/*!***************************************************************!*\
  !*** ../extension-base/src/services/subscan-service/index.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SubscanService": () => (/* binding */ SubscanService)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/SWError */ "../extension-base/src/background/errors/SWError.ts");
/* harmony import */ var _subwallet_extension_base_services_subscan_service_subscan_chain_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/services/subscan-service/subscan-chain-map */ "../extension-base/src/services/subscan-service/subscan-chain-map.ts");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cross-fetch */ "../../node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0




class SubscanService {
  limitRate = 2; // limit per interval check
  intervalCheck = 1000; // interval check in ms
  maxRetry = 9; // interval check in ms
  requestMap = {};
  nextId = 0;
  isRunning = false;
  getId() {
    return this.nextId++;
  }
  constructor(options) {
    this.limitRate = (options === null || options === void 0 ? void 0 : options.limitRate) || this.limitRate;
    this.intervalCheck = (options === null || options === void 0 ? void 0 : options.intervalCheck) || this.intervalCheck;
    this.maxRetry = (options === null || options === void 0 ? void 0 : options.maxRetry) || this.maxRetry;
  }
  getApiUrl(chain, path) {
    const subscanChain = _subwallet_extension_base_services_subscan_service_subscan_chain_map__WEBPACK_IMPORTED_MODULE_1__["default"][chain];
    if (!subscanChain) {
      throw new _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_2__.SWError('NOT_SUPPORTED', 'Chain is not supported');
    }
    return `https://${chain}.api.subscan.io/${path}`;
  }
  postRequest(url, body) {
    return cross_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(body)
    });
  }
  addRequest(run) {
    const newId = this.getId();
    return new Promise((resolve, reject) => {
      this.requestMap[newId] = {
        id: newId,
        status: 'pending',
        retry: -1,
        run,
        resolve,
        reject
      };
      if (!this.isRunning) {
        this.process();
      }
    });
  }
  process() {
    this.isRunning = true;
    const maxRetry = this.maxRetry;
    const interval = setInterval(() => {
      const remainingRequests = Object.values(this.requestMap);
      if (remainingRequests.length === 0) {
        this.isRunning = false;
        clearInterval(interval);
        return;
      }

      // Get first this.limit requests base on id
      const requests = remainingRequests.filter(request => request.status !== 'running').sort((a, b) => a.id - b.id).slice(0, this.limitRate);

      // Start requests
      requests.forEach(request => {
        request.status = 'running';
        request.run().then(rs => {
          request.resolve(rs);
        }).catch(e => {
          if (request.retry < maxRetry) {
            request.status = 'pending';
            request.retry++;
          } else {
            // Reject request
            request.reject(new _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_2__.SWError('MAX_RETRY', String(e)));
          }
        });
      });
    }, this.intervalCheck);
  }

  // Implement Subscan API
  getMultiChainBalance(address) {
    return this.addRequest(async () => {
      const rs = await this.postRequest(this.getApiUrl('polkadot', 'api/scan/multiChain/account'), {
        address
      });
      if (rs.status !== 200) {
        throw new _subwallet_extension_base_background_errors_SWError__WEBPACK_IMPORTED_MODULE_2__.SWError('SubscanService.getMultiChainBalance', await rs.text());
      }
      const jsonData = await rs.json();
      return jsonData.data;
    });
  }
}

/***/ }),

/***/ "../extension-base/src/services/subscan-service/subscan-chain-map.ts":
/*!***************************************************************************!*\
  !*** ../extension-base/src/services/subscan-service/subscan-chain-map.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SUBSCAN_CHAIN_MAP_REVERSE": () => (/* binding */ SUBSCAN_CHAIN_MAP_REVERSE),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0

const SUBSCAN_CHAIN_MAP = {
  polkadot: 'polkadot',
  kusama: 'kusama',
  moonbeam: 'moonbeam',
  acala: 'acala',
  astar: 'astar',
  shiden: 'shiden',
  shibuya: 'shibuya',
  westend: 'westend',
  moonbase: 'moonbase',
  moonriver: 'moonriver',
  turing: 'turing',
  bifrost_testnet: 'bifrost-testnet',
  calamari: 'calamari',
  statemint: 'statemint',
  pioneer: 'pioneer',
  parallel: 'parallel',
  clover: 'clover',
  hydradx_main: 'hydradx',
  edgeware: 'edgeware',
  centrifuge: 'centrifuge',
  interlay: 'interlay',
  nodle: 'nodle',
  darwinia: 'darwinia',
  polkadex: 'polkadex',
  aleph: 'alephzero',
  dolphin: 'dolphin',
  efinity: 'efinity',
  composableFinance: 'composable',
  phala: 'phala',
  crust: 'crust',
  statemine: 'statemine',
  karura: 'karura',
  khala: 'khala',
  kilt: 'spiritnet',
  basilisk: 'basilisk',
  altair: 'altair',
  heiko: 'parallel-heiko',
  kintsugi: 'kintsugi',
  picasso: 'picasso',
  quartz: 'quartz',
  unique_network: 'unique',
  genshiro: 'genshiro',
  zeitgeist: 'zeitgeist',
  sakura: 'sakura',
  shadow: 'shadow',
  robonomics: 'robonomics',
  integritee: 'integritee',
  acala_testnet: 'acala-testnet',
  mangatax: 'mangatax',
  encointer: 'encointer',
  subspace_gemini_2a: 'subspace',
  origintrail: 'origintrail',
  bajun: 'bajun',
  snow: 'snow',
  kilt_peregrine: 'kilt-testnet',
  polymesh: 'polymesh'
};
const SUBSCAN_CHAIN_MAP_REVERSE = Object.fromEntries(Object.entries(SUBSCAN_CHAIN_MAP).map(([k, v]) => [v, k]));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SUBSCAN_CHAIN_MAP);

/***/ }),

/***/ "../extension-base/src/services/transaction-service/constants.ts":
/*!***********************************************************************!*\
  !*** ../extension-base/src/services/transaction-service/constants.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TRANSACTION_TIMEOUT": () => (/* binding */ TRANSACTION_TIMEOUT)
/* harmony export */ });
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0

const TRANSACTION_TIMEOUT = 2 * 60 * 1000;

/***/ }),

/***/ "../extension-base/src/services/transaction-service/event-parser/index.ts":
/*!********************************************************************************!*\
  !*** ../extension-base/src/services/transaction-service/event-parser/index.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "parseTransferEventLogs": () => (/* binding */ parseTransferEventLogs),
/* harmony export */   "parseXcmEventLogs": () => (/* binding */ parseXcmEventLogs)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


function parseXcmEventLogs(historyItem, eventLogs, chain, sendingTokenInfo, chainInfo) {
  for (let index = 0; index < eventLogs.length; index++) {
    const record = eventLogs[index];
    const {
      decimals: nativeDecimals,
      symbol: nativeSymbol
    } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainNativeTokenBasicInfo)(chainInfo);
    if (record.event.section === 'balances' && record.event.method.toLowerCase() === 'withdraw') {
      var _record$event$data$;
      if ((_record$event$data$ = record.event.data[1]) !== null && _record$event$data$ !== void 0 && _record$event$data$.toString()) {
        var _record$event$data$2;
        historyItem.fee = {
          value: (_record$event$data$2 = record.event.data[1]) === null || _record$event$data$2 === void 0 ? void 0 : _record$event$data$2.toString(),
          symbol: nativeSymbol,
          decimals: nativeDecimals
        };
      }
    } else if (record.event.section === 'tokens' && record.event.method.toLowerCase() === 'withdrawn') {
      var _record$event$data$3;
      if (!historyItem.fee && (_record$event$data$3 = record.event.data[2]) !== null && _record$event$data$3 !== void 0 && _record$event$data$3.toString()) {
        var _record$event$data$4;
        historyItem.fee = {
          value: (_record$event$data$4 = record.event.data[2]) === null || _record$event$data$4 === void 0 ? void 0 : _record$event$data$4.toString(),
          symbol: nativeSymbol,
          decimals: nativeDecimals
        };
      }
    }
  }
}
function parseTransferEventLogs(historyItem, eventLogs, chain, sendingTokenInfo, chainInfo) {
  for (let index = 0; index < eventLogs.length; index++) {
    const record = eventLogs[index];
    if (['genshiro_testnet', 'genshiro', 'equilibrium_parachain'].includes(chain) && sendingTokenInfo) {
      if (record.event.section === 'transactionPayment' && record.event.method.toLowerCase() === 'transactionfeepaid') {
        var _record$event$data$5;
        if ((_record$event$data$5 = record.event.data[1]) !== null && _record$event$data$5 !== void 0 && _record$event$data$5.toString()) {
          var _record$event$data$6;
          historyItem.fee = {
            value: ((_record$event$data$6 = record.event.data[1]) === null || _record$event$data$6 === void 0 ? void 0 : _record$event$data$6.toString()) || '0',
            symbol: sendingTokenInfo.symbol,
            decimals: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getAssetDecimals)(sendingTokenInfo)
          };
        }
      }
    }
    const {
      decimals: nativeDecimals,
      symbol: nativeSymbol
    } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_0__._getChainNativeTokenBasicInfo)(chainInfo);
    if (record.event.section === 'balances' && record.event.method.toLowerCase() === 'withdraw') {
      var _record$event$data$7;
      if ((_record$event$data$7 = record.event.data[1]) !== null && _record$event$data$7 !== void 0 && _record$event$data$7.toString()) {
        var _record$event$data$8;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        historyItem.fee = {
          value: ((_record$event$data$8 = record.event.data[1]) === null || _record$event$data$8 === void 0 ? void 0 : _record$event$data$8.toString()) || '0',
          symbol: nativeSymbol,
          decimals: nativeDecimals
        };
      }
    }
  }
}

/***/ }),

/***/ "../extension-base/src/services/transaction-service/helpers/index.ts":
/*!***************************************************************************!*\
  !*** ../extension-base/src/services/transaction-service/helpers/index.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getBaseTransactionInfo": () => (/* binding */ getBaseTransactionInfo),
/* harmony export */   "getTransactionId": () => (/* binding */ getTransactionId),
/* harmony export */   "getValidationId": () => (/* binding */ getValidationId),
/* harmony export */   "isSubstrateTransaction": () => (/* binding */ isSubstrateTransaction)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


let transactionCount = 0;
let validationCount = 0;
const getTransactionId = (chainType, chain, isInternal, isWalletConnect = false) => {
  return `${isInternal ? 'internal' : !isWalletConnect ? 'external' : 'wallet-connect'}.${chainType}.${chain}.${Date.now()}.${++transactionCount}`;
};
const getValidationId = (chainType, chain) => {
  return `${chainType}.${chain}.${Date.now()}.${++validationCount}`;
};
const isSubstrateTransaction = tx => {
  return !!tx.send;
};
const typeName = type => {
  switch (type) {
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.TRANSFER_BALANCE:
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.TRANSFER_TOKEN:
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.TRANSFER_XCM:
      return 'Transfer';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.SEND_NFT:
      return 'Send NFT';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.CROWDLOAN:
      return 'Crowdloan contribution';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_JOIN_POOL:
      return 'Join pool';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_LEAVE_POOL:
      return 'Leave pool';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_BOND:
      return 'Bond';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_UNBOND:
      return 'Unbond';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_CLAIM_REWARD:
      return 'Claim reward';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_WITHDRAW:
      return 'Withdraw';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_CANCEL_UNSTAKE:
      return 'Cancel unstake';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_COMPOUNDING:
      return 'Stake compound';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.EVM_EXECUTE:
      return 'EVM execute';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_CANCEL_COMPOUNDING:
      return 'Cancel compounding';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.STAKING_POOL_WITHDRAW:
      return 'Withdraw pool';
    case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_0__.ExtrinsicType.UNKNOWN:
    default:
      return 'unknown';
  }
};
const getBaseTransactionInfo = (transaction, chainInfoMap) => {
  var _chainInfoMap$transac;
  return `${typeName(transaction.extrinsicType)} on ${((_chainInfoMap$transac = chainInfoMap[transaction.chain]) === null || _chainInfoMap$transac === void 0 ? void 0 : _chainInfoMap$transac.name) || 'unknown network'}`;
};

/***/ }),

/***/ "../extension-base/src/services/transaction-service/index.ts":
/*!*******************************************************************!*\
  !*** ../extension-base/src/services/transaction-service/index.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TransactionService)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/EvmProviderError */ "../extension-base/src/background/errors/EvmProviderError.ts");
/* harmony import */ var _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/background/errors/TransactionError */ "../extension-base/src/background/errors/TransactionError.ts");
/* harmony import */ var _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/background/KoniTypes */ "../extension-base/src/background/KoniTypes.ts");
/* harmony import */ var _subwallet_extension_base_background_warnings_TransactionWarning__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @subwallet/extension-base/background/warnings/TransactionWarning */ "../extension-base/src/background/warnings/TransactionWarning.ts");
/* harmony import */ var _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @subwallet/extension-base/constants */ "../extension-base/src/constants/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/constants */ "../extension-base/src/services/chain-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @subwallet/extension-base/services/request-service/constants */ "../extension-base/src/services/request-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_transaction_service_constants__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @subwallet/extension-base/services/transaction-service/constants */ "../extension-base/src/services/transaction-service/constants.ts");
/* harmony import */ var _subwallet_extension_base_services_transaction_service_event_parser__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @subwallet/extension-base/services/transaction-service/event-parser */ "../extension-base/src/services/transaction-service/event-parser/index.ts");
/* harmony import */ var _subwallet_extension_base_services_transaction_service_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/services/transaction-service/helpers */ "../extension-base/src/services/transaction-service/helpers/index.ts");
/* harmony import */ var _subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @subwallet/extension-base/services/transaction-service/utils */ "../extension-base/src/services/transaction-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service/helpers */ "../extension-base/src/services/wallet-connect-service/helpers.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth */ "../extension-base/src/utils/eth.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth_mergeTransactionAndSignature__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth/mergeTransactionAndSignature */ "../extension-base/src/utils/eth/mergeTransactionAndSignature.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth/parseTransaction */ "../extension-base/src/utils/eth/parseTransaction/index.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/index.js");
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bignumber.js */ "../../node_modules/bignumber.js/bignumber.mjs");
/* harmony import */ var ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethereumjs-util */ "../../node_modules/ethereumjs-util/dist.browser/index.js");
/* harmony import */ var ethereumjs_util__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ethers */ "../../node_modules/ethers/lib.esm/transaction/transaction.js");
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! eventemitter3 */ "../../node_modules/eventemitter3/index.mjs");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/is/hex.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0

























class TransactionService {
  transactionSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject({});
  watchTransactionSubscribes = {};
  get transactions() {
    return this.transactionSubject.getValue();
  }
  constructor(chainService, eventService, requestService, balanceService, historyService, notificationService, databaseService) {
    this.chainService = chainService;
    this.eventService = eventService;
    this.requestService = requestService;
    this.balanceService = balanceService;
    this.historyService = historyService;
    this.notificationService = notificationService;
    this.databaseService = databaseService;
  }
  get allTransactions() {
    return Object.values(this.transactions);
  }
  get processingTransactions() {
    return this.allTransactions.filter(t => t.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.QUEUED || t.status === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.SUBMITTING);
  }
  getTransaction(id) {
    return this.transactions[id];
  }
  checkDuplicate(transaction) {
    // Check duplicated transaction
    const existed = this.processingTransactions.filter(item => item.address === transaction.address && item.chain === transaction.chain);
    if (existed.length > 0) {
      return [new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.DUPLICATE_TRANSACTION)];
    }
    return [];
  }
  async generalValidate(validationInput) {
    const validation = {
      ...validationInput,
      errors: validationInput.errors || [],
      warnings: validationInput.warnings || []
    };
    const {
      additionalValidator,
      address,
      chain,
      edAsWarning,
      extrinsicType,
      isTransferAll,
      transaction
    } = validation;

    // Check duplicate transaction
    validation.errors.push(...this.checkDuplicate(validationInput));

    // Return unsupported error if not found transaction
    if (!transaction) {
      if (extrinsicType === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.SEND_NFT) {
        validation.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.UNSUPPORTED, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('This feature is not yet available for this NFT')));
      } else {
        validation.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.UNSUPPORTED));
      }
    }
    const validationResponse = {
      status: undefined,
      ...validation
    };

    // Estimate fee
    const estimateFee = {
      symbol: '',
      decimals: 0,
      value: ''
    };
    const chainInfo = this.chainService.getChainInfoByKey(chain);
    if (!chainInfo) {
      validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.INTERNAL_ERROR, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Cannot find network')));
    } else {
      const {
        decimals,
        symbol
      } = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainNativeTokenBasicInfo)(chainInfo);
      estimateFee.decimals = decimals;
      estimateFee.symbol = symbol;
      if (transaction) {
        try {
          if ((0,_subwallet_extension_base_services_transaction_service_helpers__WEBPACK_IMPORTED_MODULE_8__.isSubstrateTransaction)(transaction)) {
            estimateFee.value = (await transaction.paymentInfo(address)).partialFee.toString();
          } else {
            const web3 = this.chainService.getEvmApi(chain);
            if (!web3) {
              validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.CHAIN_DISCONNECTED, undefined));
            } else {
              const gasPrice = await web3.api.eth.getGasPrice();
              const gasLimit = await web3.api.eth.estimateGas(transaction);
              estimateFee.value = (gasLimit * parseInt(gasPrice)).toString();
            }
          }
        } catch (e) {
          const error = e;
          if (error.message.includes('gas required exceeds allowance') && error.message.includes('insufficient funds')) {
            validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.NOT_ENOUGH_BALANCE));
          }
          estimateFee.value = '0';
        }
      }
    }
    validationResponse.estimateFee = estimateFee;

    // Read-only account
    const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_9__["default"].getPair(address);
    if (!pair) {
      validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.INTERNAL_ERROR, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Unable to find account')));
    } else {
      var _pair$meta;
      if ((_pair$meta = pair.meta) !== null && _pair$meta !== void 0 && _pair$meta.isReadOnly) {
        validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.INTERNAL_ERROR, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('This account is watch-only')));
      }
    }

    // Balance
    const transferNative = validationResponse.transferNativeAmount || '0';
    const nativeTokenInfo = this.chainService.getNativeTokenInfo(chain);
    const balance = await this.balanceService.getTokenFreeBalance(address, chain, nativeTokenInfo.slug);
    const existentialDeposit = nativeTokenInfo.minAmount || '0';
    const feeNum = parseInt(estimateFee.value);
    const balanceNum = parseInt(balance.value);
    const edNum = parseInt(existentialDeposit);
    const transferNativeNum = parseInt(transferNative);
    if (!new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["default"](balance.value).gt(0)) {
      validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.NOT_ENOUGH_BALANCE));
    }
    if (transferNativeNum + feeNum > balanceNum) {
      if (!isTransferAll) {
        validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.NOT_ENOUGH_BALANCE));
      } else {
        if ([..._subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_10__._TRANSFER_CHAIN_GROUP.acala, ..._subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_10__._TRANSFER_CHAIN_GROUP.genshiro, ..._subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_10__._TRANSFER_CHAIN_GROUP.bitcountry, ..._subwallet_extension_base_services_chain_service_constants__WEBPACK_IMPORTED_MODULE_10__._TRANSFER_CHAIN_GROUP.statemine].includes(chain)) {
          // Chain not have transfer all function
          validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.NOT_ENOUGH_BALANCE));
        }
      }
    }
    if (!isTransferAll) {
      if (balanceNum - (transferNativeNum + feeNum) < edNum) {
        if (edAsWarning) {
          validationResponse.warnings.push(new _subwallet_extension_base_background_warnings_TransactionWarning__WEBPACK_IMPORTED_MODULE_11__.TransactionWarning(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxWarningCode.NOT_ENOUGH_EXISTENTIAL_DEPOSIT));
        } else {
          validationResponse.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.NOT_ENOUGH_EXISTENTIAL_DEPOSIT));
        }
      }
    }

    // Validate transaction with additionalValidator method
    additionalValidator && (await additionalValidator(validationResponse));
    return validationResponse;
  }
  getTransactionSubject() {
    return this.transactionSubject;
  }
  fillTransactionDefaultInfo(transaction) {
    const isInternal = !transaction.url;
    const transactionId = (0,_subwallet_extension_base_services_transaction_service_helpers__WEBPACK_IMPORTED_MODULE_8__.getTransactionId)(transaction.chainType, transaction.chain, isInternal, (0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_12__.isWalletConnectRequest)(transaction.id));
    return {
      ...transaction,
      createdAt: new Date().getTime(),
      updatedAt: new Date().getTime(),
      errors: transaction.errors || [],
      warnings: transaction.warnings || [],
      url: transaction.url || _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_13__.EXTENSION_REQUEST_URL,
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.QUEUED,
      isInternal,
      id: transactionId,
      extrinsicHash: transactionId
    };
  }
  async addTransaction(inputTransaction) {
    const transactions = this.transactions;
    // Fill transaction default info
    const transaction = this.fillTransactionDefaultInfo(inputTransaction);

    // Add Transaction
    transactions[transaction.id] = transaction;
    this.transactionSubject.next({
      ...transactions
    });
    return await this.sendTransaction(transaction);
  }
  generateBeforeHandleResponseErrors(errors) {
    return {
      errors,
      additionalValidator: undefined,
      address: '',
      chain: '',
      chainType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ChainType.SUBSTRATE,
      data: undefined,
      extrinsicType: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.UNKNOWN,
      transferNativeAmount: undefined,
      url: undefined,
      warnings: []
    };
  }
  async handleTransaction(transaction) {
    const validatedTransaction = await this.generalValidate(transaction);
    const stopByErrors = validatedTransaction.errors.length > 0;
    const stopByWarnings = validatedTransaction.warnings.length > 0 && !validatedTransaction.ignoreWarnings;
    if (stopByErrors || stopByWarnings) {
      // @ts-ignore
      'transaction' in validatedTransaction && delete validatedTransaction.transaction;
      'additionalValidator' in validatedTransaction && delete validatedTransaction.additionalValidator;
      'eventsHandler' in validatedTransaction && delete validatedTransaction.eventsHandler;
      return validatedTransaction;
    }
    validatedTransaction.warnings = [];
    const emitter = await this.addTransaction(validatedTransaction);
    await new Promise(resolve => {
      emitter.on('signed', data => {
        validatedTransaction.id = data.id;
        validatedTransaction.extrinsicHash = data.extrinsicHash;
        resolve();
      });
      emitter.on('error', data => {
        if (data.errors.length > 0) {
          validatedTransaction.errors.push(...data.errors);
          resolve();
        }
      });
    });

    // @ts-ignore
    'transaction' in validatedTransaction && delete validatedTransaction.transaction;
    'additionalValidator' in validatedTransaction && delete validatedTransaction.additionalValidator;
    'eventsHandler' in validatedTransaction && delete validatedTransaction.eventsHandler;
    return validatedTransaction;
  }
  async sendTransaction(transaction) {
    // Send Transaction
    const emitter = transaction.chainType === 'substrate' ? this.signAndSendSubstrateTransaction(transaction) : await this.signAndSendEvmTransaction(transaction);
    const {
      eventsHandler
    } = transaction;
    emitter.on('signed', data => {
      this.onSigned(data);
    });
    emitter.on('send', data => {
      this.onSend(data);
    });
    emitter.on('extrinsicHash', data => {
      this.onHasTransactionHash(data);
    });
    emitter.on('success', data => {
      this.handlePostProcessing(data.id);
      this.onSuccess(data);
    });
    emitter.on('error', data => {
      // this.handlePostProcessing(data.id); // might enable this later
      this.onFailed({
        ...data,
        errors: [...data.errors, new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.INTERNAL_ERROR)]
      });
    });

    // Todo: handle any event with transaction.eventsHandler

    eventsHandler === null || eventsHandler === void 0 ? void 0 : eventsHandler(emitter);
    return emitter;
  }
  removeTransaction(id) {
    if (this.transactions[id]) {
      delete this.transactions[id];
      this.transactionSubject.next({
        ...this.transactions
      });
    }
  }
  updateTransaction(id, data) {
    const transaction = this.transactions[id];
    if (transaction) {
      this.transactions[id] = {
        ...transaction,
        ...data
      };
    }
  }
  getTransactionLink(id) {
    const transaction = this.getTransaction(id);
    const chainInfo = this.chainService.getChainInfoByKey(transaction.chain);
    return (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.getExplorerLink)(chainInfo, transaction.extrinsicHash, 'tx');
  }
  transactionToHistories(id, startBlock, nonce, eventLogs) {
    const transaction = this.getTransaction(id);
    const extrinsicType = transaction.extrinsicType;
    const historyItem = {
      origin: 'app',
      chain: transaction.chain,
      direction: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.TransactionDirection.SEND,
      type: transaction.extrinsicType,
      from: transaction.address,
      to: '',
      chainType: transaction.chainType,
      address: transaction.address,
      status: transaction.status,
      transactionId: transaction.id,
      extrinsicHash: transaction.extrinsicHash,
      time: transaction.createdAt,
      fee: transaction.estimateFee,
      blockNumber: 0,
      // Will be added in next step
      blockHash: '',
      // Will be added in next step
      nonce: nonce !== null && nonce !== void 0 ? nonce : 0,
      startBlock: startBlock || 0
    };
    const chainInfo = this.chainService.getChainInfoByKey(transaction.chain);
    const nativeAsset = (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getChainNativeTokenBasicInfo)(chainInfo);
    const baseNativeAmount = {
      value: '0',
      decimals: nativeAsset.decimals,
      symbol: nativeAsset.symbol
    };

    // Fill data by extrinsicType
    switch (extrinsicType) {
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.TRANSFER_BALANCE:
        {
          const inputData = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.to = inputData.to;
          const sendingTokenInfo = this.chainService.getAssetBySlug(inputData.tokenSlug);
          historyItem.amount = {
            value: inputData.value || '0',
            decimals: sendingTokenInfo.decimals || 0,
            symbol: sendingTokenInfo.symbol
          };
          eventLogs && (0,_subwallet_extension_base_services_transaction_service_event_parser__WEBPACK_IMPORTED_MODULE_15__.parseTransferEventLogs)(historyItem, eventLogs, transaction.chain, sendingTokenInfo, chainInfo);
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.TRANSFER_TOKEN:
        {
          const inputData = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.to = inputData.to;
          const sendingTokenInfo = this.chainService.getAssetBySlug(inputData.tokenSlug);
          historyItem.amount = {
            value: inputData.value || '0',
            decimals: sendingTokenInfo.decimals || 0,
            symbol: sendingTokenInfo.symbol
          };
          eventLogs && (0,_subwallet_extension_base_services_transaction_service_event_parser__WEBPACK_IMPORTED_MODULE_15__.parseTransferEventLogs)(historyItem, eventLogs, transaction.chain, sendingTokenInfo, chainInfo);
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.TRANSFER_XCM:
        {
          const inputData = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.to = inputData.to;
          const sendingTokenInfo = this.chainService.getAssetBySlug(inputData.tokenSlug);
          historyItem.amount = {
            value: inputData.value || '0',
            decimals: sendingTokenInfo.decimals || 0,
            symbol: sendingTokenInfo.symbol
          };

          // @ts-ignore
          historyItem.additionalInfo = {
            destinationChain: (inputData === null || inputData === void 0 ? void 0 : inputData.destinationNetworkKey) || '',
            originalChain: inputData.originNetworkKey || '',
            fee: transaction.estimateFee
          };
          eventLogs && (0,_subwallet_extension_base_services_transaction_service_event_parser__WEBPACK_IMPORTED_MODULE_15__.parseXcmEventLogs)(historyItem, eventLogs, transaction.chain, sendingTokenInfo, chainInfo);
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.SEND_NFT:
        {
          const inputData = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.to = inputData.recipientAddress;
          historyItem.amount = {
            decimals: 0,
            symbol: 'NFT',
            value: '1'
          };
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_BOND:
        {
          const data = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.amount = {
            ...baseNativeAmount,
            value: data.amount || '0'
          };
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_JOIN_POOL:
        {
          const data = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.amount = {
            ...baseNativeAmount,
            value: data.amount || '0'
          };
          historyItem.to = data.selectedPool.name || data.selectedPool.id.toString();
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_UNBOND:
        {
          const data = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.to = data.validatorAddress || '';
          historyItem.amount = {
            ...baseNativeAmount,
            value: data.amount || '0'
          };
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_LEAVE_POOL:
        {
          const data = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.to = data.nominatorMetadata.address || '';
          historyItem.amount = {
            ...baseNativeAmount,
            value: data.amount || '0'
          };
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_CLAIM_REWARD:
        {
          const data = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.amount = {
            ...baseNativeAmount,
            value: data.unclaimedReward || '0'
          };
        }
        break;
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_WITHDRAW:
        {
          const data = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.to = data.validatorAddress || '';
          historyItem.amount = {
            ...baseNativeAmount,
            value: data.unstakingInfo.claimable || '0'
          };
          break;
        }
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_CANCEL_UNSTAKE:
        {
          const data = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
          historyItem.amount = {
            ...baseNativeAmount,
            value: data.selectedUnstaking.claimable || '0'
          };
          break;
        }
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.EVM_EXECUTE:
        {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
          const data = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);

          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access
          historyItem.to = (data === null || data === void 0 ? void 0 : data.to) || '';
          break;
        }
      case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.UNKNOWN:
        break;
    }
    try {
      // Return one more history record if transaction send to account in the wallets
      const toAccount = (historyItem === null || historyItem === void 0 ? void 0 : historyItem.to) && _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_9__["default"].getPair(historyItem.to);
      if (toAccount) {
        const receiverHistory = {
          ...historyItem,
          address: toAccount.address,
          direction: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.TransactionDirection.RECEIVED
        };
        switch (extrinsicType) {
          case _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.TRANSFER_XCM:
            {
              const inputData = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
              receiverHistory.chain = inputData.destinationNetworkKey;
              break;
            }
          default:
            break;
        }
        return [historyItem, receiverHistory];
      }
    } catch (e) {
      console.warn(e);
    }
    return [historyItem];
  }
  onSigned({
    id
  }) {
    console.debug(`Transaction "${id}" is signed`);
  }
  onSend({
    id,
    nonce,
    startBlock
  }) {
    // Update transaction status
    this.updateTransaction(id, {
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.SUBMITTING
    });

    // Create Input History Transaction History
    this.historyService.insertHistories(this.transactionToHistories(id, startBlock, nonce)).catch(console.error);
    console.debug(`Transaction "${id}" is sent`);
  }
  onHasTransactionHash({
    blockHash,
    extrinsicHash,
    id
  }) {
    // Write processing transaction history
    const updateData = {
      extrinsicHash,
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.PROCESSING,
      blockHash: blockHash || ''
    };
    this.updateTransaction(id, updateData);

    // In this case transaction id is the same as extrinsic hash and will change after below update
    this.historyService.updateHistoryByExtrinsicHash(id, updateData).catch(console.error);
    console.debug(`Transaction "${id}" is submitted with hash ${extrinsicHash || ''}`);
  }
  handlePostProcessing(id) {
    // must be done after success/failure to make sure the transaction is finalized
    const transaction = this.getTransaction(id);
    if (transaction.extrinsicType === _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.SEND_NFT) {
      const inputData = (0,_subwallet_extension_base_services_transaction_service_utils__WEBPACK_IMPORTED_MODULE_14__.parseTransactionData)(transaction.data);
      try {
        const sender = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_9__["default"].getPair(inputData.senderAddress);
        sender && this.databaseService.handleNftTransfer(transaction.chain, [sender.address, _subwallet_extension_base_constants__WEBPACK_IMPORTED_MODULE_16__.ALL_ACCOUNT_KEY], inputData.nftItem).then(() => {
          this.eventService.emit('transaction.transferNft', undefined);
        }).catch(console.error);
      } catch (e) {
        console.error(e);
      }
      try {
        const recipient = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_9__["default"].getPair(inputData.recipientAddress);
        recipient && this.databaseService.addNft(recipient.address, {
          ...inputData.nftItem,
          owner: recipient.address
        }).catch(console.error);
      } catch (e) {
        console.error(e);
      }
    } else if ([_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_BOND, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_UNBOND, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_WITHDRAW, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_CANCEL_UNSTAKE, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_CLAIM_REWARD, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_JOIN_POOL, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_POOL_WITHDRAW, _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicType.STAKING_LEAVE_POOL].includes(transaction.extrinsicType)) {
      this.eventService.emit('transaction.submitStaking', transaction.chain);
    }
  }
  onSuccess({
    blockHash,
    blockNumber,
    extrinsicHash,
    id
  }) {
    const transaction = this.getTransaction(id);
    this.updateTransaction(id, {
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.SUCCESS,
      extrinsicHash
    });

    // Write success transaction history
    this.historyService.updateHistoryByExtrinsicHash(transaction.extrinsicHash, {
      extrinsicHash,
      status: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.SUCCESS,
      blockNumber: blockNumber || 0,
      blockHash: blockHash || ''
    }).catch(console.error);
    const info = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_17__.isHex)(extrinsicHash) ? extrinsicHash : (0,_subwallet_extension_base_services_transaction_service_helpers__WEBPACK_IMPORTED_MODULE_8__.getBaseTransactionInfo)(transaction, this.chainService.getChainInfoMap());
    this.notificationService.notify({
      type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.NotificationType.SUCCESS,
      title: (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Transaction completed'),
      message: (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Transaction {{info}} completed', {
        replace: {
          info
        }
      }),
      action: {
        url: this.getTransactionLink(id)
      },
      notifyViaBrowser: true
    });
    this.eventService.emit('transaction.done', transaction);
  }
  onFailed({
    blockHash,
    blockNumber,
    errors,
    extrinsicHash,
    id
  }) {
    const transaction = this.getTransaction(id);
    const nextStatus = _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.FAIL;
    if (transaction) {
      this.updateTransaction(id, {
        status: nextStatus,
        errors,
        extrinsicHash
      });

      // Write failed transaction history
      this.historyService.updateHistoryByExtrinsicHash(transaction.extrinsicHash, {
        extrinsicHash: extrinsicHash || transaction.extrinsicHash,
        status: nextStatus,
        blockNumber: blockNumber || 0,
        blockHash: blockHash || ''
      }).catch(console.error);
      const info = (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_17__.isHex)(transaction === null || transaction === void 0 ? void 0 : transaction.extrinsicHash) ? transaction === null || transaction === void 0 ? void 0 : transaction.extrinsicHash : (0,_subwallet_extension_base_services_transaction_service_helpers__WEBPACK_IMPORTED_MODULE_8__.getBaseTransactionInfo)(transaction, this.chainService.getChainInfoMap());
      this.notificationService.notify({
        type: _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.NotificationType.ERROR,
        title: (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Transaction failed'),
        message: (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Transaction {{info}} failed', {
          replace: {
            info
          }
        }),
        action: {
          url: this.getTransactionLink(id)
        },
        notifyViaBrowser: true
      });
    }
    this.eventService.emit('transaction.failed', transaction);
  }
  generateHashPayload(chain, transaction) {
    var _transaction$nonce;
    const chainInfo = this.chainService.getChainInfoByKey(chain);
    const txObject = {
      nonce: (_transaction$nonce = transaction.nonce) !== null && _transaction$nonce !== void 0 ? _transaction$nonce : 0,
      gasPrice: (0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__.addHexPrefix)((0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_18__.anyNumberToBN)(transaction.gasPrice).toString(16)),
      gasLimit: (0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__.addHexPrefix)((0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_18__.anyNumberToBN)(transaction.gas).toString(16)),
      to: transaction.to !== undefined ? transaction.to : '',
      value: (0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__.addHexPrefix)((0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_18__.anyNumberToBN)(transaction.value).toString(16)),
      data: transaction.data,
      chainId: (0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_7__._getEvmChainId)(chainInfo)
    };
    return ethers__WEBPACK_IMPORTED_MODULE_19__.Transaction.from(txObject).unsignedSerialized;
  }
  async signAndSendEvmTransaction({
    address,
    chain,
    id,
    transaction,
    url
  }) {
    var _payload$nonce;
    const payload = transaction;
    const evmApi = this.chainService.getEvmApi(chain);
    const chainInfo = this.chainService.getChainInfoByKey(chain);
    const accountPair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_9__["default"].getPair(address);
    const account = {
      address,
      ...accountPair.meta
    };
    if (!payload.account) {
      payload.account = account;
    }

    // Allow sign transaction
    payload.canSign = true;

    // Fill contract info
    if (!payload.parseData) {
      const isToContract = await (0,_subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_20__.isContractAddress)(payload.to || '', evmApi);
      payload.isToContract = isToContract;
      try {
        payload.parseData = isToContract ? payload.data ? (await (0,_subwallet_extension_base_utils_eth_parseTransaction__WEBPACK_IMPORTED_MODULE_20__.parseContractInput)(payload.data || '', payload.to || '', chainInfo)).result : '' : payload.data || '';
      } catch (e) {
        console.warn('Unable to parse contract input data');
        payload.parseData = payload.data;
      }
    }
    if ('data' in payload && payload.data === undefined) {
      delete payload.data;
    }

    // Set unique nonce to avoid transaction errors
    if (!payload.nonce) {
      const evmApi = this.chainService.getEvmApi(chain);
      payload.nonce = await evmApi.api.eth.getTransactionCount(address);
    }
    if (!payload.chainId) {
      var _chainInfo$evmInfo$ev, _chainInfo$evmInfo;
      payload.chainId = (_chainInfo$evmInfo$ev = (_chainInfo$evmInfo = chainInfo.evmInfo) === null || _chainInfo$evmInfo === void 0 ? void 0 : _chainInfo$evmInfo.evmChainId) !== null && _chainInfo$evmInfo$ev !== void 0 ? _chainInfo$evmInfo$ev : 1;
    }

    // Autofill from
    if (!payload.from) {
      payload.from = address;
    }
    const isExternal = !!account.isExternal;
    const isInjected = !!account.isInjected;

    // generate hashPayload for EVM transaction
    payload.hashPayload = this.generateHashPayload(chain, payload);
    const emitter = new eventemitter3__WEBPACK_IMPORTED_MODULE_2__["default"]();
    const txObject = {
      nonce: (_payload$nonce = payload.nonce) !== null && _payload$nonce !== void 0 ? _payload$nonce : 0,
      from: payload.from,
      gasPrice: (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_18__.anyNumberToBN)(payload.gasPrice).toNumber(),
      gasLimit: (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_18__.anyNumberToBN)(payload.gas).toNumber(),
      to: payload.to !== undefined ? payload.to : '',
      value: (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_18__.anyNumberToBN)(payload.value).toNumber(),
      data: payload.data,
      chainId: payload.chainId
    };
    const eventData = {
      id,
      errors: [],
      warnings: [],
      extrinsicHash: id
    };
    if (isInjected) {
      this.requestService.addConfirmation(id, url || _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_13__.EXTENSION_REQUEST_URL, 'evmWatchTransactionRequest', payload, {}).then(async ({
        isApproved,
        payload
      }) => {
        if (isApproved) {
          if (!payload) {
            throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_21__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.EvmProviderErrorType.UNAUTHORIZED, 'Bad signature');
          }
          const web3Api = this.chainService.getEvmApi(chain).api;

          // Emit signed event
          emitter.emit('signed', eventData);
          eventData.nonce = txObject.nonce;
          eventData.startBlock = (await web3Api.eth.getBlockNumber()) - 3;
          // Add start info
          emitter.emit('send', eventData); // This event is needed after sending transaction with queue

          const txHash = payload;
          eventData.extrinsicHash = txHash;
          emitter.emit('extrinsicHash', eventData);
          this.watchTransactionSubscribes[id] = new Promise((resolve, reject) => {
            // eslint-disable-next-line prefer-const
            let subscribe;
            const onComplete = () => {
              var _subscribe, _subscribe$unsubscrib, _subscribe$unsubscrib2;
              (_subscribe = subscribe) === null || _subscribe === void 0 ? void 0 : (_subscribe$unsubscrib = _subscribe.unsubscribe) === null || _subscribe$unsubscrib === void 0 ? void 0 : (_subscribe$unsubscrib2 = _subscribe$unsubscrib.call(_subscribe)) === null || _subscribe$unsubscrib2 === void 0 ? void 0 : _subscribe$unsubscrib2.then(console.debug).catch(console.debug);
              delete this.watchTransactionSubscribes[id];
            };
            const onSuccess = rs => {
              if (rs) {
                eventData.extrinsicHash = rs.transactionHash;
                eventData.blockHash = rs.blockHash;
                eventData.blockNumber = rs.blockNumber;
                emitter.emit('success', eventData);
                onComplete();
                resolve();
              }
            };
            const onError = error => {
              if (error) {
                // TODO: Change type and message
                eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.UNABLE_TO_SEND, error.message));
                emitter.emit('error', eventData);
                onComplete();
                reject(error);
              }
            };
            const onCheck = () => {
              web3Api.eth.getTransactionReceipt(txHash).then(onSuccess).catch(onError);
            };
            subscribe = web3Api.eth.subscribe('newBlockHeaders', onCheck);
          });
        } else {
          this.removeTransaction(id);
          eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.USER_REJECT_REQUEST));
          emitter.emit('error', eventData);
        }
      }).catch(e => {
        this.removeTransaction(id);
        // TODO: Change type
        eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.UNABLE_TO_SIGN, e.message));
        emitter.emit('error', eventData);
      });
    } else {
      this.requestService.addConfirmation(id, url || _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_13__.EXTENSION_REQUEST_URL, 'evmSendTransactionRequest', payload, {}).then(async ({
        isApproved,
        payload
      }) => {
        if (isApproved) {
          let signedTransaction;
          if (!payload) {
            throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_21__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.EvmProviderErrorType.UNAUTHORIZED, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Failed to sign'));
          }
          const web3Api = this.chainService.getEvmApi(chain).api;
          if (!isExternal) {
            signedTransaction = payload;
          } else {
            const signed = (0,_subwallet_extension_base_utils_eth_mergeTransactionAndSignature__WEBPACK_IMPORTED_MODULE_22__.mergeTransactionAndSignature)(txObject, payload);
            const recover = web3Api.eth.accounts.recoverTransaction(signed);
            if (recover.toLowerCase() !== account.address.toLowerCase()) {
              throw new _subwallet_extension_base_background_errors_EvmProviderError__WEBPACK_IMPORTED_MODULE_21__.EvmProviderError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.EvmProviderErrorType.UNAUTHORIZED, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Wrong signature. Please sign with the account you use in dApp'));
            }
            signedTransaction = signed;
          }

          // Emit signed event
          emitter.emit('signed', eventData);

          // Send transaction
          this.handleTransactionTimeout(emitter, eventData);

          // Add start info
          eventData.nonce = txObject.nonce;
          eventData.startBlock = await web3Api.eth.getBlockNumber();
          emitter.emit('send', eventData); // This event is needed after sending transaction with queue
          signedTransaction && web3Api.eth.sendSignedTransaction(signedTransaction).once('transactionHash', hash => {
            eventData.extrinsicHash = hash;
            emitter.emit('extrinsicHash', eventData);
          }).once('receipt', rs => {
            eventData.extrinsicHash = rs.transactionHash;
            eventData.blockHash = rs.blockHash;
            eventData.blockNumber = rs.blockNumber;
            emitter.emit('success', eventData);
          }).once('error', e => {
            eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.SEND_TRANSACTION_FAILED, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)(e.message)));
            emitter.emit('error', eventData);
          }).catch(e => {
            eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.UNABLE_TO_SEND, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)(e.message)));
            emitter.emit('error', eventData);
          });
        } else {
          this.removeTransaction(id);
          eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.USER_REJECT_REQUEST));
          emitter.emit('error', eventData);
        }
      }).catch(e => {
        this.removeTransaction(id);
        eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.UNABLE_TO_SIGN, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)(e.message)));
        emitter.emit('error', eventData);
      });
    }
    return emitter;
  }
  signAndSendSubstrateTransaction({
    address,
    chain,
    id,
    transaction,
    url
  }) {
    const emitter = new eventemitter3__WEBPACK_IMPORTED_MODULE_2__["default"]();
    const eventData = {
      id,
      errors: [],
      warnings: [],
      extrinsicHash: id
    };
    transaction.signAsync(address, {
      signer: {
        signPayload: async payload => {
          const signing = await this.requestService.signInternalTransaction(id, address, url || _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_13__.EXTENSION_REQUEST_URL, payload);
          return {
            id: new Date().getTime(),
            signature: signing.signature
          };
        }
      }
    }).then(async rs => {
      // Emit signed event
      emitter.emit('signed', eventData);

      // Send transaction
      const api = this.chainService.getSubstrateApi(chain);
      eventData.nonce = rs.nonce.toNumber();
      eventData.startBlock = (await api.api.query.system.number()).toPrimitive();
      this.handleTransactionTimeout(emitter, eventData);
      emitter.emit('send', eventData); // This event is needed after sending transaction with queue

      rs.send(txState => {
        // handle events, logs, history
        if (!txState || !txState.status) {
          return;
        }
        if (txState.status.isInBlock) {
          eventData.eventLogs = txState.events;
          if (!eventData.extrinsicHash || eventData.extrinsicHash === '' || !(0,_polkadot_util__WEBPACK_IMPORTED_MODULE_17__.isHex)(eventData.extrinsicHash)) {
            eventData.extrinsicHash = txState.txHash.toHex();
            eventData.blockHash = txState.status.asInBlock.toHex();
            emitter.emit('extrinsicHash', eventData);
          }
        }
        if (txState.status.isFinalized) {
          eventData.extrinsicHash = txState.txHash.toHex();
          eventData.eventLogs = txState.events;
          // TODO: push block hash and block number into eventData
          txState.events.filter(({
            event: {
              section
            }
          }) => section === 'system').forEach(({
            event: {
              method,
              data: [error]
            }
          }) => {
            if (method === 'ExtrinsicFailed') {
              eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.SEND_TRANSACTION_FAILED, error.toString()));
              emitter.emit('error', eventData);
            } else if (method === 'ExtrinsicSuccess') {
              emitter.emit('success', eventData);
            }
          });
        }
      }).catch(e => {
        eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.SEND_TRANSACTION_FAILED, e.message));
        emitter.emit('error', eventData);
      });
    }).catch(e => {
      this.removeTransaction(id);
      eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.UNABLE_TO_SIGN, e.message));
      emitter.emit('error', eventData);
    });
    return emitter;
  }
  handleTransactionTimeout(emitter, eventData) {
    const timeout = setTimeout(() => {
      const transaction = this.getTransaction(eventData.id);
      if (transaction.status !== _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.SUCCESS && transaction.status !== _subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.ExtrinsicStatus.FAIL) {
        eventData.errors.push(new _subwallet_extension_base_background_errors_TransactionError__WEBPACK_IMPORTED_MODULE_6__.TransactionError(_subwallet_extension_base_background_KoniTypes__WEBPACK_IMPORTED_MODULE_5__.BasicTxErrorType.TIMEOUT, (0,i18next__WEBPACK_IMPORTED_MODULE_3__.t)('Transaction timeout')));
        emitter.emit('error', eventData);
        clearTimeout(timeout);
      }
    }, _subwallet_extension_base_services_transaction_service_constants__WEBPACK_IMPORTED_MODULE_23__.TRANSACTION_TIMEOUT);
    emitter.once('success', () => {
      clearTimeout(timeout);
    });
    emitter.once('error', () => {
      clearTimeout(timeout);
    });
  }
  resetWallet() {
    this.transactionSubject.next({});
  }
}

/***/ }),

/***/ "../extension-base/src/services/wallet-connect-service/handler/Eip155RequestHandler.ts":
/*!*********************************************************************************************!*\
  !*** ../extension-base/src/services/wallet-connect-service/handler/Eip155RequestHandler.ts ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Eip155RequestHandler)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classPrivateFieldLooseBase */ "../../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js");
/* harmony import */ var _babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classPrivateFieldLooseKey */ "../../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js");
/* harmony import */ var _json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @json-rpc-tools/utils */ "../../node_modules/@json-rpc-tools/utils/dist/cjs/index.js");
/* harmony import */ var _json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service/helpers */ "../extension-base/src/services/wallet-connect-service/helpers.ts");
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service/types */ "../extension-base/src/services/wallet-connect-service/types.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/utils */ "../../node_modules/@walletconnect/utils/dist/index.es.js");


// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0






var _walletConnectService = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("walletConnectService");
var _koniState = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("koniState");
var _checkAccount = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("checkAccount");
var _handleError = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("handleError");
class Eip155RequestHandler {
  constructor(koniState, walletConnectService) {
    Object.defineProperty(this, _handleError, {
      value: _handleError2
    });
    Object.defineProperty(this, _checkAccount, {
      value: _checkAccount2
    });
    Object.defineProperty(this, _walletConnectService, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, _koniState, {
      writable: true,
      value: void 0
    });
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState] = koniState;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService] = walletConnectService;
  }
  handleRequest(requestEvent) {
    const {
      id,
      params,
      topic
    } = requestEvent;
    const {
      chainId: _chainId,
      request
    } = params;
    const method = request.method;
    const requestSession = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService].getSession(topic);
    const url = requestSession.peer.metadata.url;
    const sessionAccounts = requestSession.namespaces.eip155.accounts.map(account => account.split(':')[2]);
    if ([_subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.EIP155_SIGNING_METHODS.PERSONAL_SIGN, _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.EIP155_SIGNING_METHODS.ETH_SIGN, _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.EIP155_SIGNING_METHODS.ETH_SIGN_TYPED_DATA, _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.EIP155_SIGNING_METHODS.ETH_SIGN_TYPED_DATA_V3, _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.EIP155_SIGNING_METHODS.ETH_SIGN_TYPED_DATA_V4].includes(method)) {
      const address = (0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__.getEip155MessageAddress)(method, request.params);
      (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkAccount)[_checkAccount](address, sessionAccounts);
      (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState].evmSign((0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__.getWCId)(id), url, method === _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.EIP155_SIGNING_METHODS.ETH_SIGN_TYPED_DATA ? _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.EIP155_SIGNING_METHODS.ETH_SIGN_TYPED_DATA_V4 : method, request.params, sessionAccounts).then(async signature => {
        await (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService].responseRequest({
          topic: topic,
          response: (0,_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__.formatJsonRpcResult)(id, signature)
        });
      }).catch(e => {
        (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _handleError)[_handleError](topic, id, e);
      });
    } else if (method === _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.EIP155_SIGNING_METHODS.ETH_SEND_TRANSACTION) {
      const [tx] = (0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__.parseRequestParams)(request.params);
      const address = tx.from;
      (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkAccount)[_checkAccount](address, sessionAccounts);
      const chainId = parseInt(_chainId.split(':')[1]);
      const [networkKey, chainInfo] = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState].findNetworkKeyByChainId(chainId);
      if (!networkKey || !chainInfo) {
        throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('UNSUPPORTED_CHAINS').message + ' ' + address);
      }
      const chainState = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState].getChainStateByKey(networkKey);
      const createRequest = () => {
        (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState].evmSendTransaction((0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__.getWCId)(id), url, networkKey, sessionAccounts, tx).then(async signature => {
          await (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService].responseRequest({
            topic: topic,
            response: (0,_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__.formatJsonRpcResult)(id, signature)
          });
        }).catch(e => {
          (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _handleError)[_handleError](topic, id, e);
        });
      };
      if (!chainState.active) {
        (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState].chainService.enableChain(networkKey).then(createRequest).catch(() => {
          throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('USER_REJECTED').message + ' Can not active chain: ' + chainInfo.name);
        });
      } else {
        createRequest();
      }
    } else {
      throw Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('INVALID_METHOD').message + ' ' + method);
    }
  }
}
function _checkAccount2(address, accounts) {
  if (!accounts.find(account => (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_6__.isSameAddress)(account, address))) {
    throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('UNSUPPORTED_ACCOUNTS').message + ' ' + address);
  }
}
function _handleError2(topic, id, e) {
  console.log(e);
  let message = e.message;
  if (message.includes('User Rejected Request')) {
    message = (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('USER_REJECTED').message;
  }
  (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService].responseRequest({
    topic: topic,
    response: (0,_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__.formatJsonRpcError)(id, message)
  }).catch(console.error);
}

/***/ }),

/***/ "../extension-base/src/services/wallet-connect-service/handler/PolkadotRequestHandler.ts":
/*!***********************************************************************************************!*\
  !*** ../extension-base/src/services/wallet-connect-service/handler/PolkadotRequestHandler.ts ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PolkadotRequestHandler)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classPrivateFieldLooseBase */ "../../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js");
/* harmony import */ var _babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classPrivateFieldLooseKey */ "../../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js");
/* harmony import */ var _json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @json-rpc-tools/utils */ "../../node_modules/@json-rpc-tools/utils/dist/cjs/index.js");
/* harmony import */ var _json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _subwallet_extension_base_background_RequestBytesSign__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/background/RequestBytesSign */ "../extension-base/src/background/RequestBytesSign.ts");
/* harmony import */ var _subwallet_extension_base_background_RequestExtrinsicSign__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/background/RequestExtrinsicSign */ "../extension-base/src/background/RequestExtrinsicSign.ts");
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service/helpers */ "../extension-base/src/services/wallet-connect-service/helpers.ts");
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service/types */ "../extension-base/src/services/wallet-connect-service/types.ts");
/* harmony import */ var _subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @subwallet/extension-base/utils */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/index.js");
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/utils */ "../../node_modules/@walletconnect/utils/dist/index.es.js");


// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0









var _walletConnectService = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("walletConnectService");
var _requestService = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("requestService");
var _checkAccount = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("checkAccount");
var _handleError = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("handleError");
class PolkadotRequestHandler {
  constructor(walletConnectService, requestService) {
    Object.defineProperty(this, _handleError, {
      value: _handleError2
    });
    Object.defineProperty(this, _checkAccount, {
      value: _checkAccount2
    });
    Object.defineProperty(this, _walletConnectService, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, _requestService, {
      writable: true,
      value: void 0
    });
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService] = walletConnectService;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _requestService)[_requestService] = requestService;
  }
  handleRequest(requestEvent) {
    const {
      id,
      params,
      topic
    } = requestEvent;
    const {
      request
    } = params;
    const method = request.method;
    const requestSession = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService].getSession(topic);
    const url = requestSession.peer.metadata.url;
    const sessionAccounts = requestSession.namespaces.polkadot.accounts.map(account => account.split(':')[2]);
    if (method === _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.POLKADOT_SIGNING_METHODS.POLKADOT_SIGN_MESSAGE) {
      const param = (0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__.parseRequestParams)(request.params);
      (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkAccount)[_checkAccount](param.address, sessionAccounts);
      const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_6__["default"].getPair(param.address);
      const address = pair.address;
      (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _requestService)[_requestService].sign(url, new _subwallet_extension_base_background_RequestBytesSign__WEBPACK_IMPORTED_MODULE_7__["default"]({
        address: address,
        data: param.message,
        type: 'bytes'
      }), {
        address,
        ...pair.meta
      }, (0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__.getWCId)(id)).then(async ({
        signature
      }) => {
        await (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService].responseRequest({
          topic: topic,
          response: (0,_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__.formatJsonRpcResult)(id, {
            signature
          })
        });
      }).catch(e => {
        (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _handleError)[_handleError](topic, id, e);
      });
    } else if (method === _subwallet_extension_base_services_wallet_connect_service_types__WEBPACK_IMPORTED_MODULE_4__.POLKADOT_SIGNING_METHODS.POLKADOT_SIGN_TRANSACTION) {
      const param = (0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__.parseRequestParams)(request.params);
      (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkAccount)[_checkAccount](param.address, sessionAccounts);
      const pair = _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_6__["default"].getPair(param.address);
      const address = pair.address;
      (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _requestService)[_requestService].sign(url, new _subwallet_extension_base_background_RequestExtrinsicSign__WEBPACK_IMPORTED_MODULE_8__["default"](param.transactionPayload), {
        address,
        ...pair.meta
      }, (0,_subwallet_extension_base_services_wallet_connect_service_helpers__WEBPACK_IMPORTED_MODULE_5__.getWCId)(id)).then(async ({
        signature
      }) => {
        await (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService].responseRequest({
          topic: topic,
          response: (0,_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__.formatJsonRpcResult)(id, {
            signature
          })
        });
      }).catch(e => {
        (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _handleError)[_handleError](topic, id, e);
      });
    } else {
      throw Error(`${(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('INVALID_METHOD').message} ${method}`);
    }
  }
}
function _checkAccount2(address, accounts) {
  if (!accounts.find(account => (0,_subwallet_extension_base_utils__WEBPACK_IMPORTED_MODULE_9__.isSameAddress)(account, address))) {
    throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('UNSUPPORTED_ACCOUNTS').message + ' ' + address);
  }
}
function _handleError2(topic, id, e) {
  let message = e.message;
  if (message.includes('User Rejected Request')) {
    message = (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('USER_REJECTED').message;
  }
  (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _walletConnectService)[_walletConnectService].responseRequest({
    topic: topic,
    response: (0,_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__.formatJsonRpcError)(id, message)
  }).catch(console.error);
}

/***/ }),

/***/ "../extension-base/src/services/wallet-connect-service/index.ts":
/*!**********************************************************************!*\
  !*** ../extension-base/src/services/wallet-connect-service/index.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ WalletConnectService)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classPrivateFieldLooseBase */ "../../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js");
/* harmony import */ var _babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classPrivateFieldLooseKey */ "../../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js");
/* harmony import */ var _json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @json-rpc-tools/utils */ "../../node_modules/@json-rpc-tools/utils/dist/cjs/index.js");
/* harmony import */ var _json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _subwallet_extension_base_services_wallet_connect_service_handler_Eip155RequestHandler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/services/wallet-connect-service/handler/Eip155RequestHandler */ "../extension-base/src/services/wallet-connect-service/handler/Eip155RequestHandler.ts");
/* harmony import */ var _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @walletconnect/sign-client */ "../../node_modules/@walletconnect/sign-client/dist/index.es.js");
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/utils */ "../../node_modules/@walletconnect/utils/dist/index.es.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var _handler_PolkadotRequestHandler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./handler/PolkadotRequestHandler */ "../extension-base/src/services/wallet-connect-service/handler/PolkadotRequestHandler.ts");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ "../extension-base/src/services/wallet-connect-service/constants.ts");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./helpers */ "../extension-base/src/services/wallet-connect-service/helpers.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./types */ "../extension-base/src/services/wallet-connect-service/types.ts");


// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0










var _requestService = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("requestService");
var _polkadotRequestHandler = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("polkadotRequestHandler");
var _eip155RequestHandler = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("eip155RequestHandler");
var _koniState = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("koniState");
var _client = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("client");
var _option = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("option");
var _haveData = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("haveData");
var _initClient = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("initClient");
var _updateSessions = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("updateSessions");
var _onSessionProposal = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("onSessionProposal");
var _onSessionRequest = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("onSessionRequest");
var _createListener = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("createListener");
var _removeListener = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("removeListener");
var _checkClient = /*#__PURE__*/(0,_babel_runtime_helpers_esm_classPrivateFieldLooseKey__WEBPACK_IMPORTED_MODULE_1__["default"])("checkClient");
class WalletConnectService {
  constructor(koniState, requestService, option = _constants__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_WALLET_CONNECT_OPTIONS) {
    Object.defineProperty(this, _checkClient, {
      value: _checkClient2
    });
    Object.defineProperty(this, _removeListener, {
      value: _removeListener2
    });
    Object.defineProperty(this, _createListener, {
      value: _createListener2
    });
    Object.defineProperty(this, _onSessionRequest, {
      value: _onSessionRequest2
    });
    Object.defineProperty(this, _onSessionProposal, {
      value: _onSessionProposal2
    });
    Object.defineProperty(this, _updateSessions, {
      value: _updateSessions2
    });
    Object.defineProperty(this, _initClient, {
      value: _initClient2
    });
    Object.defineProperty(this, _haveData, {
      get: _get_haveData,
      set: void 0
    });
    Object.defineProperty(this, _requestService, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, _polkadotRequestHandler, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, _eip155RequestHandler, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, _koniState, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, _client, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, _option, {
      writable: true,
      value: void 0
    });
    this.sessionSubject = new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject([]);
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState] = koniState;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _requestService)[_requestService] = requestService;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _option)[_option] = option;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _polkadotRequestHandler)[_polkadotRequestHandler] = new _handler_PolkadotRequestHandler__WEBPACK_IMPORTED_MODULE_6__["default"](this, requestService);
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _eip155RequestHandler)[_eip155RequestHandler] = new _subwallet_extension_base_services_wallet_connect_service_handler_Eip155RequestHandler__WEBPACK_IMPORTED_MODULE_7__["default"]((0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState], this);
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _initClient)[_initClient]().catch(console.error);
  }
  get sessions() {
    var _classPrivateFieldLoo;
    return ((_classPrivateFieldLoo = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo === void 0 ? void 0 : _classPrivateFieldLoo.session.values) || [];
  }
  getSession(topic) {
    var _classPrivateFieldLoo2;
    const session = (_classPrivateFieldLoo2 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo2 === void 0 ? void 0 : _classPrivateFieldLoo2.session.get(topic);
    if (!session) {
      throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getInternalError)('MISMATCHED_TOPIC').message);
    } else {
      return session;
    }
  }
  async changeOption(newOption) {
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _option)[_option] = Object.assign({}, (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _option)[_option], newOption);
    await (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _initClient)[_initClient]();
  }
  async connect(uri) {
    var _classPrivateFieldLoo3;
    if (!(0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _haveData)[_haveData]) {
      await (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _initClient)[_initClient](true);
    }
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkClient)[_checkClient]();
    await ((_classPrivateFieldLoo3 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo3 === void 0 ? void 0 : _classPrivateFieldLoo3.pair({
      uri
    }));
  }
  async approveSession(result) {
    var _classPrivateFieldLoo4;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkClient)[_checkClient]();
    await ((_classPrivateFieldLoo4 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo4 === void 0 ? void 0 : _classPrivateFieldLoo4.approve(result));
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _updateSessions)[_updateSessions]();
  }
  async rejectSession(id) {
    var _classPrivateFieldLoo5;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkClient)[_checkClient]();
    await ((_classPrivateFieldLoo5 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo5 === void 0 ? void 0 : _classPrivateFieldLoo5.reject({
      id: id,
      reason: (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('USER_REJECTED')
    }));
  }
  async responseRequest(response) {
    var _classPrivateFieldLoo6;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkClient)[_checkClient]();
    await ((_classPrivateFieldLoo6 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo6 === void 0 ? void 0 : _classPrivateFieldLoo6.respond(response));
  }
  async resetWallet(resetAll) {
    var _classPrivateFieldLoo7, _classPrivateFieldLoo9, _classPrivateFieldLoo11;
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _removeListener)[_removeListener]();

    // Disconnect session
    const sessions = ((_classPrivateFieldLoo7 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo7 === void 0 ? void 0 : _classPrivateFieldLoo7.session.values) || [];
    for (const session of sessions) {
      try {
        var _classPrivateFieldLoo8;
        await ((_classPrivateFieldLoo8 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo8 === void 0 ? void 0 : _classPrivateFieldLoo8.disconnect({
          topic: session.topic,
          reason: (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('USER_DISCONNECTED')
        }));
      } catch (e) {
        console.error(e);
      }
    }

    // Disconnect pair
    const pairs = ((_classPrivateFieldLoo9 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo9 === void 0 ? void 0 : _classPrivateFieldLoo9.pairing.values) || [];
    for (const pair of pairs) {
      try {
        var _classPrivateFieldLoo10;
        await ((_classPrivateFieldLoo10 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo10 === void 0 ? void 0 : _classPrivateFieldLoo10.disconnect({
          topic: pair.topic,
          reason: (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('USER_DISCONNECTED')
        }));
      } catch (e) {
        console.error(e);
      }
    }
    const keys = (await ((_classPrivateFieldLoo11 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo11 === void 0 ? void 0 : _classPrivateFieldLoo11.core.storage.getKeys())) || [];
    const deleteKeys = resetAll ? keys : keys.filter(key => key.startsWith('wc@'));
    for (const key of deleteKeys) {
      try {
        var _classPrivateFieldLoo12;
        await ((_classPrivateFieldLoo12 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo12 === void 0 ? void 0 : _classPrivateFieldLoo12.core.storage.removeItem(key));
      } catch (e) {
        console.error(e);
      }
    }
    await (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _initClient)[_initClient]();
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _updateSessions)[_updateSessions]();
  }
  async disconnect(topic) {
    var _classPrivateFieldLoo13;
    await ((_classPrivateFieldLoo13 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo13 === void 0 ? void 0 : _classPrivateFieldLoo13.disconnect({
      topic: topic,
      reason: (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('USER_DISCONNECTED')
    }));
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _updateSessions)[_updateSessions]();
  }
}
function _get_haveData() {
  const sessionStorage = localStorage.getItem('wc@2:client:0.3//session');
  const pairingStorage = localStorage.getItem('wc@2:core:0.3//pairing');
  const subscriptionStorage = localStorage.getItem('wc@2:core:0.3//subscription');
  const sessions = sessionStorage ? JSON.parse(sessionStorage) : [];
  const pairings = pairingStorage ? JSON.parse(pairingStorage) : [];
  const subscriptions = subscriptionStorage ? JSON.parse(subscriptionStorage) : [];
  return !!sessions.length || !!pairings.length || !!subscriptions.length;
}
async function _initClient2(force) {
  (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _removeListener)[_removeListener]();
  if (force || (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _haveData)[_haveData]) {
    (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client] = await _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_8__["default"].init((0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _option)[_option]);
  }
  (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _updateSessions)[_updateSessions]();
  (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _createListener)[_createListener]();
}
function _updateSessions2() {
  this.sessionSubject.next(this.sessions);
}
function _onSessionProposal2(proposal) {
  (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkClient)[_checkClient]();
  (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _requestService)[_requestService].addConnectWCRequest((0,_helpers__WEBPACK_IMPORTED_MODULE_9__.convertConnectRequest)(proposal));
}
function _onSessionRequest2(requestEvent) {
  (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _checkClient)[_checkClient]();
  const {
    id,
    params,
    topic
  } = requestEvent;
  const {
    chainId,
    request
  } = params;
  const method = request.method;
  try {
    const requestSession = this.getSession(topic);
    const namespaces = Object.keys(requestSession.namespaces);
    const chains = Object.values(requestSession.namespaces).map(namespace => namespace.chains).flat();
    const methods = Object.values(requestSession.namespaces).map(namespace => namespace.methods).flat();
    const chainInfoMap = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _koniState)[_koniState].getChainInfoMap();
    const [requestNamespace] = chainId.split(':');
    if (!namespaces.includes(requestNamespace)) {
      throw Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('UNSUPPORTED_NAMESPACE_KEY').message);
    }
    if (!chains.includes(chainId)) {
      throw Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('UNSUPPORTED_CHAINS').message + ' ' + chainId);
    }
    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_9__.isSupportWalletConnectChain)(chainId, chainInfoMap)) {
      throw Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('UNSUPPORTED_CHAINS').message + ' ' + chainId);
    }
    if (!methods.includes(method)) {
      throw Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('UNAUTHORIZED_METHOD').message + ' ' + method);
    }
    if (!_constants__WEBPACK_IMPORTED_MODULE_4__.WALLET_CONNECT_SUPPORTED_METHODS.includes(method)) {
      throw Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('UNSUPPORTED_METHODS').message + ' ' + method);
    }
    switch (method) {
      case _types__WEBPACK_IMPORTED_MODULE_10__.POLKADOT_SIGNING_METHODS.POLKADOT_SIGN_MESSAGE:
      case _types__WEBPACK_IMPORTED_MODULE_10__.POLKADOT_SIGNING_METHODS.POLKADOT_SIGN_TRANSACTION:
        (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _polkadotRequestHandler)[_polkadotRequestHandler].handleRequest(requestEvent);
        break;
      case _types__WEBPACK_IMPORTED_MODULE_10__.EIP155_SIGNING_METHODS.ETH_SEND_TRANSACTION:
      case _types__WEBPACK_IMPORTED_MODULE_10__.EIP155_SIGNING_METHODS.PERSONAL_SIGN:
      case _types__WEBPACK_IMPORTED_MODULE_10__.EIP155_SIGNING_METHODS.ETH_SIGN_TYPED_DATA:
      case _types__WEBPACK_IMPORTED_MODULE_10__.EIP155_SIGNING_METHODS.ETH_SIGN_TYPED_DATA_V3:
      case _types__WEBPACK_IMPORTED_MODULE_10__.EIP155_SIGNING_METHODS.ETH_SIGN_TYPED_DATA_V4:
      case _types__WEBPACK_IMPORTED_MODULE_10__.EIP155_SIGNING_METHODS.ETH_SIGN:
        (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _eip155RequestHandler)[_eip155RequestHandler].handleRequest(requestEvent);
        break;
      default:
        throw Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getSdkError)('INVALID_METHOD').message + ' ' + method);
    }
  } catch (e) {
    console.log(e);
    try {
      const requestSession = this.getSession(topic);
      const notSupportRequest = (0,_helpers__WEBPACK_IMPORTED_MODULE_9__.convertNotSupportRequest)(requestEvent, requestSession.peer.metadata.url);
      (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _requestService)[_requestService].addNotSupportWCRequest(notSupportRequest);
    } catch (e) {}
    this.responseRequest({
      topic: topic,
      response: (0,_json_rpc_tools_utils__WEBPACK_IMPORTED_MODULE_2__.formatJsonRpcError)(id, e.message)
    }).catch(console.error);
  }
}
function _createListener2() {
  var _classPrivateFieldLoo14, _classPrivateFieldLoo15, _classPrivateFieldLoo16, _classPrivateFieldLoo17, _classPrivateFieldLoo18, _classPrivateFieldLoo19;
  (_classPrivateFieldLoo14 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo14 === void 0 ? void 0 : _classPrivateFieldLoo14.on('session_proposal', (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _onSessionProposal)[_onSessionProposal].bind(this));
  (_classPrivateFieldLoo15 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo15 === void 0 ? void 0 : _classPrivateFieldLoo15.on('session_request', (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _onSessionRequest)[_onSessionRequest].bind(this));
  (_classPrivateFieldLoo16 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo16 === void 0 ? void 0 : _classPrivateFieldLoo16.on('session_ping', data => console.log('ping', data));
  (_classPrivateFieldLoo17 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo17 === void 0 ? void 0 : _classPrivateFieldLoo17.on('session_event', data => console.log('event', data));
  (_classPrivateFieldLoo18 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo18 === void 0 ? void 0 : _classPrivateFieldLoo18.on('session_update', data => console.log('update', data));
  (_classPrivateFieldLoo19 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo19 === void 0 ? void 0 : _classPrivateFieldLoo19.on('session_delete', (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _updateSessions)[_updateSessions].bind(this));
}
function _removeListener2() {
  _constants__WEBPACK_IMPORTED_MODULE_4__.ALL_WALLET_CONNECT_EVENT.forEach(event => {
    var _classPrivateFieldLoo20;
    (_classPrivateFieldLoo20 = (0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) === null || _classPrivateFieldLoo20 === void 0 ? void 0 : _classPrivateFieldLoo20.removeAllListeners(event);
  });
}
function _checkClient2() {
  if (!(0,_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_0__["default"])(this, _client)[_client]) {
    throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_3__.getInternalError)('NOT_INITIALIZED').message);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/AccountRef.ts":
/*!**************************************************!*\
  !*** ../extension-base/src/stores/AccountRef.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AccountRefStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/SubscribableStore */ "../extension-base/src/stores/SubscribableStore.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class AccountRefStore extends _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super(_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX ? `${_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX}account_link` : null);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/Accounts.ts":
/*!************************************************!*\
  !*** ../extension-base/src/stores/Accounts.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AccountsStore)
/* harmony export */ });
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base */ "../extension-base/src/stores/Base.ts");
// Copyright 2019-2022 @polkadot/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class AccountsStore extends _Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super(_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX ? `${_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX}accounts` : null);
  }
  set(key, value, update) {
    // shortcut, don't save testing accounts in extension storage
    if (key.startsWith('account:') && value.meta && value.meta.isTesting) {
      update && update();
      return;
    }
    super.set(key, value, update);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/AssetSetting.ts":
/*!****************************************************!*\
  !*** ../extension-base/src/stores/AssetSetting.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AssetSettingStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/SubscribableStore */ "../extension-base/src/stores/SubscribableStore.ts");
// Copyright 2019-2022 @polkadot/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0




// Not every asset has its setting stored, if not in store then it has default value (visible = false)
class AssetSettingStore extends _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super(_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX ? `${_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX}asset-setting` : null);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/Authorize.ts":
/*!*************************************************!*\
  !*** ../extension-base/src/stores/Authorize.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AuthorizeStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/SubscribableStore */ "../extension-base/src/stores/SubscribableStore.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class AuthorizeStore extends _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super(_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX ? `${_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX}authorize` : null);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/Base.ts":
/*!********************************************!*\
  !*** ../extension-base/src/stores/Base.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BaseStore)
/* harmony export */ });
// Copyright 2019-2022 @polkadot/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0

const lastError = type => {
  const error = chrome.runtime.lastError;
  if (error) {
    console.error(`BaseStore.${type}:: runtime.lastError:`, error);
  }
};
class BaseStore {
  #prefix;
  constructor(prefix) {
    this.#prefix = prefix ? `${prefix}:` : '';
  }
  getPrefix() {
    return this.#prefix;
  }
  all(update) {
    this.allMap(map => {
      Object.entries(map).forEach(([key, value]) => {
        update(key, value);
      });
    });
  }
  allMap(update) {
    chrome.storage.local.get(null, result => {
      lastError('all');
      const entries = Object.entries(result);
      const map = {};
      for (let i = 0; i < entries.length; i++) {
        const [key, value] = entries[i];
        if (key.startsWith(this.#prefix)) {
          map[key.replace(this.#prefix, '')] = value;
        }
      }
      update(map);
    });
  }
  get(_key, update) {
    const key = `${this.#prefix}${_key}`;
    chrome.storage.local.get([key], result => {
      lastError('get');
      update(result[key]);
    });
  }
  remove(_key, update) {
    const key = `${this.#prefix}${_key}`;
    chrome.storage.local.remove(key, () => {
      lastError('remove');
      update && update();
    });
  }
  set(_key, value, update) {
    const key = `${this.#prefix}${_key}`;
    chrome.storage.local.set({
      [key]: value
    }, () => {
      lastError('set');
      update && update();
    });
  }
}

/***/ }),

/***/ "../extension-base/src/stores/CurrentAccountStore.ts":
/*!***********************************************************!*\
  !*** ../extension-base/src/stores/CurrentAccountStore.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ CurrentAccountStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/SubscribableStore */ "../extension-base/src/stores/SubscribableStore.ts");
// Copyright 2019-2022 @subwallet/extension-koni-ui authors & contributors
// SPDX-License-Identifier: Apache-2.0



class CurrentAccountStore extends _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super(_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX ? `${_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX}current_account` : null);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/Keyring.ts":
/*!***********************************************!*\
  !*** ../extension-base/src/stores/Keyring.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ KeyringStore)
/* harmony export */ });
/* harmony import */ var _subwallet_ui_keyring_defaults__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/ui-keyring/defaults */ "../../node_modules/@subwallet/ui-keyring/defaults.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0


const lastError = type => {
  const error = chrome.runtime.lastError;
  if (error) {
    console.error(`KeyringStore.${type}:: runtime.lastError:`, error);
  }
};
class KeyringStore {
  get(update) {
    chrome.storage.local.get([_subwallet_ui_keyring_defaults__WEBPACK_IMPORTED_MODULE_0__.SUBWALLET_KEYRING], result => {
      lastError('get');
      update(result[_subwallet_ui_keyring_defaults__WEBPACK_IMPORTED_MODULE_0__.SUBWALLET_KEYRING]);
    });
  }
  remove(update) {
    chrome.storage.local.remove(_subwallet_ui_keyring_defaults__WEBPACK_IMPORTED_MODULE_0__.SUBWALLET_KEYRING, () => {
      lastError('remove');
      update && update();
    });
  }
  set(value, update) {
    chrome.storage.local.set({
      [_subwallet_ui_keyring_defaults__WEBPACK_IMPORTED_MODULE_0__.SUBWALLET_KEYRING]: value
    }, () => {
      lastError('set');
      update && update();
    });
  }
}

/***/ }),

/***/ "../extension-base/src/stores/Metadata.ts":
/*!************************************************!*\
  !*** ../extension-base/src/stores/Metadata.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MetadataStore)
/* harmony export */ });
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base */ "../extension-base/src/stores/Base.ts");
// Copyright 2019-2022 @polkadot/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class MetadataStore extends _Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super(`${_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX}metadata`);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/PassPhishingStore.ts":
/*!*********************************************************!*\
  !*** ../extension-base/src/stores/PassPhishingStore.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PassPhishingStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/SubscribableStore */ "../extension-base/src/stores/SubscribableStore.ts");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0



class PassPhishingStore extends _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super(_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX ? `${_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX}subwallet-pass-phishing-list` : null);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/Settings.ts":
/*!************************************************!*\
  !*** ../extension-base/src/stores/Settings.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SettingsStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/SubscribableStore */ "../extension-base/src/stores/SubscribableStore.ts");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class SettingsStore extends _subwallet_extension_base_stores_SubscribableStore__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super(_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX ? `${_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_1__.EXTENSION_PREFIX}settings` : null);
  }
}

/***/ }),

/***/ "../extension-base/src/stores/SubscribableStore.ts":
/*!*********************************************************!*\
  !*** ../extension-base/src/stores/SubscribableStore.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SubscribableStore)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_stores_Base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/stores/Base */ "../extension-base/src/stores/Base.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



class SubscribableStore extends _subwallet_extension_base_stores_Base__WEBPACK_IMPORTED_MODULE_0__["default"] {
  subject = new rxjs__WEBPACK_IMPORTED_MODULE_1__.Subject();
  getSubject() {
    return this.subject;
  }
  set(_key, value, update) {
    super.set(_key, value, () => {
      this.subject.next(value);
      update && update();
    });
  }
  asyncGet = async key => {
    return new Promise(resolve => {
      this.get(key, resolve);
    });
  };
  removeAll() {
    return this.all(key => this.remove(key));
  }
}

/***/ }),

/***/ "../extension-base/src/utils/address.ts":
/*!**********************************************!*\
  !*** ../extension-base/src/utils/address.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "convertSubjectInfoToAddresses": () => (/* binding */ convertSubjectInfoToAddresses),
/* harmony export */   "quickFormatAddressToCompare": () => (/* binding */ quickFormatAddressToCompare),
/* harmony export */   "simpleAddress": () => (/* binding */ simpleAddress)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_utils_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/utils/index */ "../extension-base/src/utils/index.ts");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/ethereum/isAddress.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/encode.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/decode.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/address/is.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



const simpleAddress = address => {
  if ((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_0__.isEthereumAddress)(address)) {
    return address;
  }
  return (0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_1__.encodeAddress)((0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_2__.decodeAddress)(address));
};
function quickFormatAddressToCompare(address) {
  if (!(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_3__.isAddress)(address)) {
    return address;
  }
  return (0,_subwallet_extension_base_utils_index__WEBPACK_IMPORTED_MODULE_4__.reformatAddress)(address, 42).toLowerCase();
}
const convertSubjectInfoToAddresses = subjectInfo => {
  return Object.values(subjectInfo).map(info => ({
    address: info.json.address,
    type: info.type,
    ...info.json.meta
  }));
};

/***/ }),

/***/ "../extension-base/src/utils/eth/mergeTransactionAndSignature.ts":
/*!***********************************************************************!*\
  !*** ../extension-base/src/utils/eth/mergeTransactionAndSignature.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "mergeTransactionAndSignature": () => (/* binding */ mergeTransactionAndSignature)
/* harmony export */ });
/* harmony import */ var ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ethereumjs-util */ "../../node_modules/ethereumjs-util/dist.browser/index.js");
/* harmony import */ var ethereumjs_util__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethers */ "../../node_modules/ethers/lib.esm/transaction/transaction.js");
// Copyright 2019-2022 @subwallet/extension-base authors & contributors
// SPDX-License-Identifier: Apache-2.0



const mergeTransactionAndSignature = (tx, _rawSignature) => {
  const _signature = _rawSignature.slice(2);
  const signature = {
    r: `0x${_signature.substring(0, 64)}`,
    s: `0x${_signature.substring(64, 128)}`,
    v: parseInt(`0x${_signature.substring(128)}`)
  };
  const transaction = {
    nonce: tx.nonce,
    gasPrice: (0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.addHexPrefix)(tx.gasPrice.toString(16)),
    gasLimit: (0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.addHexPrefix)(tx.gasLimit.toString(16)),
    to: tx.to,
    value: (0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.addHexPrefix)(tx.value.toString(16)),
    data: tx.data,
    chainId: tx.chainId,
    signature: signature
  };
  return ethers__WEBPACK_IMPORTED_MODULE_1__.Transaction.from(transaction).serialized;
};

/***/ }),

/***/ "../extension-base/src/utils/eth/parseTransaction/base.ts":
/*!****************************************************************!*\
  !*** ../extension-base/src/utils/eth/parseTransaction/base.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "InputDataDecoder": () => (/* binding */ InputDataDecoder)
/* harmony export */ });
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! buffer */ "../../node_modules/buffer/index.js");
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ethers */ "../../node_modules/ethers/lib.esm/abi/abi-coder.js");
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ethers */ "../../node_modules/ethers/lib.esm/abi/interface.js");
/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ethers */ "../../node_modules/ethers/lib.esm/abi/fragments.js");
/* harmony import */ var is_buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! is-buffer */ "../../node_modules/is-buffer/index.js");
/* harmony import */ var is_buffer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(is_buffer__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var web3_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! web3-utils */ "../../node_modules/web3-utils/lib/index.js");
/* harmony import */ var web3_utils__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(web3_utils__WEBPACK_IMPORTED_MODULE_2__);
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0




// @ts-ignore

const ABI_TYPES = ['function', 'constructor', 'event', 'fallback'];
const instanceOfAbiItem = object => {
  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-member-access
  return 'type' in object && ABI_TYPES.includes(object.type);
};
const checkArrayAbiItems = data => {
  if (Array.isArray(data)) {
    return data.length > 0 && data.every(value => instanceOfAbiItem(value));
  } else {
    return false;
  }
};
const genType = type => {
  if (typeof type === 'string') {
    return type;
  } else {
    if (type.components) {
      var _type$components;
      const arr = (_type$components = type.components) === null || _type$components === void 0 ? void 0 : _type$components.map(genType);
      const tupleStr = `(${arr.join(',')})`;
      if (type.type === 'tuple[]') {
        return tupleStr + '[]';
      } else {
        return tupleStr;
      }
    } else {
      return type.type;
    }
  }
};
const getMethodId = abi => {
  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-call
  return (0,web3_utils__WEBPACK_IMPORTED_MODULE_2__.keccak256)((0,web3_utils__WEBPACK_IMPORTED_MODULE_2__._jsonInterfaceMethodToString)(abi)).slice(2, 10);
};
const getMethodName = abi => {
  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-call
  return (0,web3_utils__WEBPACK_IMPORTED_MODULE_2__._jsonInterfaceMethodToString)(abi);
};
const deepRemoveUnwantedArrayProperties = arr => {
  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-return
  return [...arr.map(item => {
    if (Array.isArray(item)) {
      // eslint-disable-next-line @typescript-eslint/no-unsafe-return
      return deepRemoveUnwantedArrayProperties(item);
    }

    // eslint-disable-next-line @typescript-eslint/no-unsafe-return
    return item;
  })];
};

// remove 0x from addresses
const deepStripTupleAddresses = (input, tupleTypes) => input.map((item, i) => {
  // We find tupleTypes to not be an array where internalType is present in the ABI indicating item is a structure
  const type = tupleTypes[i] ? tupleTypes[i].type : null;
  if (type === 'address' && typeof item === 'string') {
    return item;
  }
  if (type === 'address[]' && Array.isArray(item)) {
    return item.map(a => a);
  }
  if (Array.isArray(item)) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-return
    return deepStripTupleAddresses(item, tupleTypes);
  }

  // eslint-disable-next-line @typescript-eslint/no-unsafe-return
  return item;
});
const toHexString = byteArray => {
  return Array.from(byteArray, function (byte) {
    return ('0' + (byte & 0xFF).toString(16)).slice(-2);
  }).join('');
};
class InputDataDecoder {
  constructor(prop) {
    this.abi = [];
    if (typeof prop === 'string') {
      try {
        this.abi = JSON.parse(prop);
      } catch (err) {
        throw new Error('Invalid ABI: ' + err.message);
      }
    } else if (checkArrayAbiItems(prop)) {
      this.abi = prop;
    } else {
      throw new TypeError('Must pass ABI array object or file path to constructor');
    }
  }
  decodeConstructor(data) {
    if (is_buffer__WEBPACK_IMPORTED_MODULE_1___default()(data)) {
      data = data.toString('utf8');
    }
    if (typeof data !== 'string') {
      data = '';
    }
    data = data.trim();
    for (let i = 0; i < this.abi.length; i++) {
      const obj = this.abi[i];
      if (obj.type !== 'constructor') {
        continue;
      }
      const method = obj.name || null;
      const methodName = getMethodName(obj);
      const types = obj.inputs ? obj.inputs.map(x => x.type) : [];
      const names = obj.inputs ? obj.inputs.map(x => x.name) : [];

      // take last 32 bytes
      data = data.slice(-256);
      if (data.length !== 256) {
        throw new Error('fail');
      }
      if (data.indexOf('0x') !== 0) {
        data = `0x${data}`;
      }
      const _inputs = ethers__WEBPACK_IMPORTED_MODULE_3__.AbiCoder.defaultAbiCoder().decode(types, data);
      const inputs = deepRemoveUnwantedArrayProperties(_inputs);
      return {
        methodName,
        method,
        types,
        inputs,
        names
      };
    }
    throw new Error('not found');
  }
  decodeData(data) {
    if (is_buffer__WEBPACK_IMPORTED_MODULE_1___default()(data)) {
      data = data.toString('utf8');
    }
    if (typeof data !== 'string') {
      data = '';
    }
    data = data.trim();
    const dataBuf = buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from(data.replace(/^0x/, ''), 'hex');
    const methodId = toHexString(dataBuf.subarray(0, 4));
    const inputsBuf = dataBuf.subarray(4);
    let result = {
      method: null,
      methodName: null,
      types: [],
      inputs: [],
      names: []
    };
    for (const abi of this.abi) {
      try {
        if (abi.type === 'constructor') {
          continue;
        }
        if (abi.type === 'event') {
          continue;
        }
        const method = abi.name || null;
        const methodName = getMethodName(abi);
        const types = abi.inputs ? abi.inputs.map(x => {
          if (x.type.includes('tuple')) {
            return x;
          } else {
            return x.type;
          }
        }) : [];
        const names = abi.inputs ? abi.inputs.map(x => {
          if (x.type.includes('tuple') && x.components) {
            return [x.name, x.components.map(a => a.name)];
          } else {
            return x.name;
          }
        }) : [];
        const hash = getMethodId(abi);
        if (hash === methodId) {
          let inputs = [];
          try {
            // @ts-ignore
            inputs = ethers__WEBPACK_IMPORTED_MODULE_3__.AbiCoder.defaultAbiCoder().decode(types, inputsBuf);
          } catch (err) {
            try {
              const ifc = new ethers__WEBPACK_IMPORTED_MODULE_4__.Interface([]);
              inputs = ifc.decodeFunctionData(ethers__WEBPACK_IMPORTED_MODULE_5__.FunctionFragment.from(abi), data);
            } catch (err) {}
          }

          // TODO: do this normalization into normalizeAddresses
          let _inputs = [];
          _inputs = inputs.map((input, i) => {
            if (types[i].components) {
              const tupleTypes = types[i].components;

              // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/no-unsafe-argument
              return deepStripTupleAddresses(input, tupleTypes);
            }
            if (types[i] === 'address' && typeof input === 'string') {
              return input;
            }
            if (types[i] === 'address[]' && Array.isArray(input)) {
              return input.map(address => address);
            }

            // eslint-disable-next-line @typescript-eslint/no-unsafe-return
            return input;
          });

          // Map any tuple types into arrays
          const typesToReturn = types.map(genType);

          // defaultAbiCoder attaches some unwanted properties to the list object
          _inputs = deepRemoveUnwantedArrayProperties(_inputs);
          result = {
            methodName,
            method,
            types: typesToReturn,
            inputs: _inputs,
            names
          };
        }
      } catch (err) {
        console.log(err);
      }
    }
    if (!result.method) {
      for (const obj of this.abi) {
        if (obj.type === 'constructor') {
          continue;
        }
        if (obj.type === 'event') {
          continue;
        }
        const method = obj.name || null;
        try {
          const ifc = new ethers__WEBPACK_IMPORTED_MODULE_4__.Interface([]);
          const _result = ifc.decodeFunctionData(ethers__WEBPACK_IMPORTED_MODULE_5__.FunctionFragment.from(obj), data);
          const inputs = deepRemoveUnwantedArrayProperties(_result);
          result.method = method;
          result.methodName = getMethodName(obj);
          result.inputs = inputs;
          result.names = obj.inputs ? obj.inputs.map(x => {
            if (x.type.includes('tuple')) {
              var _x$components;
              return [x.name, ((_x$components = x.components) === null || _x$components === void 0 ? void 0 : _x$components.map(a => a.name)) || ''];
            } else {
              return x.name;
            }
          }) : [];
          const types = obj.inputs ? obj.inputs.map(x => {
            if (x.type.includes('tuple')) {
              return x;
            } else {
              return x.type;
            }
          }) : [];
          result.types = types.map(genType);
        } catch (err) {}
      }
    }
    if (!result.method) {
      try {
        const decoded = this.decodeConstructor(data);
        if (decoded) {
          return decoded;
        }
      } catch (err) {}
    }
    return result;
  }
}

/***/ }),

/***/ "../extension-base/src/utils/eth/parseTransaction/index.ts":
/*!*****************************************************************!*\
  !*** ../extension-base/src/utils/eth/parseTransaction/index.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isContractAddress": () => (/* binding */ isContractAddress),
/* harmony export */   "parseContractInput": () => (/* binding */ parseContractInput),
/* harmony export */   "parseEvmRlp": () => (/* binding */ parseEvmRlp)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/helper */ "../extension-base/src/services/chain-service/helper/index.ts");
/* harmony import */ var _subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/services/chain-service/utils */ "../extension-base/src/services/chain-service/utils.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth */ "../extension-base/src/utils/eth.ts");
/* harmony import */ var _subwallet_extension_base_utils_eth_parseTransaction_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @subwallet/extension-base/utils/eth/parseTransaction/base */ "../extension-base/src/utils/eth/parseTransaction/base.ts");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ "../../node_modules/axios/lib/axios.js");
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bignumber.js */ "../../node_modules/bignumber.js/bignumber.mjs");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/esm/i18next.js");
// Copyright 2019-2022 @subwallet/extension-koni authors & contributors
// SPDX-License-Identifier: Apache-2.0









// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
const ABIs = [_subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_2__._ERC20_ABI, _subwallet_extension_base_services_chain_service_helper__WEBPACK_IMPORTED_MODULE_2__._ERC721_ABI];
const genName = name => {
  if (typeof name === 'string') {
    return name;
  } else {
    if (Array.isArray(name[1])) {
      const _name = name[0];
      const children = genName(name[1]);
      return `${_name}(${children})`;
    } else {
      return name.join(', ');
    }
  }
};
const genInput = input => {
  if (Array.isArray(input)) {
    const arr = input.map(genInput);
    return `[${arr.join(', ')}]`;
  } else {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-return
    return input.toString();
  }
};
const parseType = _types => {
  const types = _types.trim();
  if (types.indexOf('(') !== 0) {
    if (!types.includes(',')) {
      return types.trim();
    } else {
      const arr = [];
      let s = types;
      do {
        if (s.indexOf('(') === 0) {
          const start = s.indexOf('(');
          const end = s.lastIndexOf(')');
          const _new = s.slice(start, end + 1);
          arr.push(_new);
          s = s.replace(_new, '');
        } else {
          const start = s.indexOf(',');
          if (start !== -1) {
            const str = s.slice(0, start);
            arr.push(str);
            s = s.slice(start + 1).trim();
          } else {
            arr.push(s);
            s = '';
          }
        }
      } while (s.length);
      return arr.map(s => s.trim());
    }
  } else {
    const start = types.indexOf('(');
    const end = types.lastIndexOf(')');
    const _new = types.slice(start + 1, end);
    return parseType(_new);
  }
};
const parseResult = (type, input, name) => {
  const types = parseType(type);
  if (Array.isArray(types)) {
    const inputs = input;
    const _name = name[0];
    const names = name[1];
    const children = [];
    types.forEach((type, index) => {
      children.push(parseResult(type, inputs[index], names[index]));
    });
    return {
      type: type,
      name: _name,
      value: genInput(input),
      children: children
    };
  } else {
    return {
      type: types,
      name: genName(name),
      value: genInput(input)
    };
  }
};
const isContractAddress = async (address, evmApi) => {
  if (!evmApi) {
    return false;
  } else {
    const code = await evmApi.api.eth.getCode(address);
    return code !== '0x';
  }
};
const parseInputWithAbi = (input, abi) => {
  const decoder = new _subwallet_extension_base_utils_eth_parseTransaction_base__WEBPACK_IMPORTED_MODULE_3__.InputDataDecoder(abi);
  const raw = decoder.decodeData(input);
  if (raw.method && raw.methodName) {
    const temp = {
      method: raw.method,
      methodName: raw.methodName,
      args: []
    };
    raw.types.forEach((type, index) => {
      temp.args.push(parseResult(type, raw.inputs[index], raw.names[index]));
    });
    return temp;
  } else {
    return null;
  }
};
const parseContractInput = async (input, contractAddress, network) => {
  for (const abi of ABIs) {
    const temp = parseInputWithAbi(input, abi);
    if (temp) {
      return {
        result: temp
      };
    }
  }
  if (contractAddress && network) {
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._getEvmAbiExplorer)(network)) {
      try {
        const res = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].get((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._getEvmAbiExplorer)(network), {
          params: {
            address: contractAddress
          },
          timeout: 3000
        });

        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        if (res.status === 200 && res.data.status === '1') {
          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
          const abi = res.data.result;
          const temp = parseInputWithAbi(input, abi);
          if (temp) {
            return {
              result: temp
            };
          }
        }
      } catch (e) {}
    }
  }
  return {
    result: input
  };
};
const getChainInfoByChainId = (networkMap, chainId) => {
  if (!chainId) {
    for (const n in networkMap) {
      if (!Object.prototype.hasOwnProperty.call(networkMap, n)) {
        continue;
      }
      const networkInfo = networkMap[n];
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._isChainEvmCompatible)(networkInfo)) {
        return networkInfo;
      }
    }
    return null;
  }
  for (const n in networkMap) {
    if (!Object.prototype.hasOwnProperty.call(networkMap, n)) {
      continue;
    }
    const networkInfo = networkMap[n];
    if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._getEvmChainId)(networkInfo) === chainId) {
      return networkInfo;
    }
  }
  return null;
};
const parseEvmRlp = async (data, networkMap, evmApiMap) => {
  const tx = (0,_subwallet_extension_base_utils_eth__WEBPACK_IMPORTED_MODULE_6__.createTransactionFromRLP)(data);
  if (!tx) {
    throw new Error((0,i18next__WEBPACK_IMPORTED_MODULE_1__.t)('Failed to decode data. Please use a valid QR code'));
  }
  const result = {
    input: tx.data,
    data: tx.data,
    gasPrice: new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["default"](tx.gasPrice).toNumber(),
    gas: new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["default"](tx.gas).toNumber(),
    to: tx.to,
    value: new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["default"](tx.value).toNumber(),
    nonce: new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["default"](tx.nonce).toNumber()
  };
  const network = getChainInfoByChainId(networkMap, parseInt(tx.ethereumChainId));
  for (const abi of ABIs) {
    const temp = parseInputWithAbi(tx.data, abi);
    if (temp) {
      result.data = temp;
      return result;
    }
  }
  if (tx.to && network) {
    if (await isContractAddress(tx.to, evmApiMap[network.slug])) {
      if ((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._getEvmAbiExplorer)(network) !== '') {
        try {
          const res = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].get((0,_subwallet_extension_base_services_chain_service_utils__WEBPACK_IMPORTED_MODULE_4__._getEvmAbiExplorer)(network), {
            params: {
              address: tx.to
            },
            timeout: 2000
          });

          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
          if (res.status === 200 && res.data.status === '1') {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment
            const abi = res.data.result;
            const temp = parseInputWithAbi(tx.data, abi);
            if (temp) {
              result.data = temp;
              return result;
            }
          }
        } catch (e) {}
      }
    }
  }
  return result;
};

/***/ }),

/***/ "../extension-base/src/utils/request.ts":
/*!**********************************************!*\
  !*** ../extension-base/src/utils/request.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isInternalRequest": () => (/* binding */ isInternalRequest)
/* harmony export */ });
/* harmony import */ var _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/services/request-service/constants */ "../extension-base/src/services/request-service/constants.ts");
// Copyright 2019-2022 @subwallet/extension-base
// SPDX-License-Identifier: Apache-2.0


function isInternalRequest(url) {
  return url === _subwallet_extension_base_services_request_service_constants__WEBPACK_IMPORTED_MODULE_0__.EXTENSION_REQUEST_URL;
}

/***/ }),

/***/ "./src/background.ts":
/*!***************************!*\
  !*** ./src/background.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _subwallet_extension_inject_crossenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-inject/crossenv */ "../extension-inject/src/crossenv.ts");
/* harmony import */ var _subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/helpers */ "../extension-base/src/background/handlers/helpers.ts");
/* harmony import */ var _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @subwallet/extension-base/defaults */ "../extension-base/src/defaults.ts");
/* harmony import */ var _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @subwallet/extension-base/koni/background/handlers */ "../extension-base/src/koni/background/handlers/index.ts");
/* harmony import */ var _subwallet_extension_base_stores__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @subwallet/extension-base/stores */ "../extension-base/src/stores/Accounts.ts");
/* harmony import */ var _subwallet_extension_base_stores_Keyring__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @subwallet/extension-base/stores/Keyring */ "../extension-base/src/stores/Keyring.ts");
/* harmony import */ var _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @subwallet/ui-keyring */ "../../node_modules/@subwallet/ui-keyring/index.js");
/* harmony import */ var _polkadot_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polkadot/util */ "../../node_modules/@polkadot/util/assert.js");
/* harmony import */ var _polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polkadot/util-crypto */ "../../node_modules/@polkadot/util-crypto/crypto.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__]);
_subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
// Copyright 2019-2022 @polkadot/extension authors & contributors
// SPDX-License-Identifier: Apache-2.0

// Runs in the extension background, handling all keyring access









const IDLE_TIME = 60000 * 2; // 2 minutes

let idleTimer;
let waitingToStop = false;
let openCount = 0;

// setup the notification (same a FF default background, white text)
(0,_subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_1__.withErrorLog)(() => chrome.browserAction.setBadgeBackgroundColor({
  color: '#d90000'
}));
function handleExtensionIdling() {
  // handle extension being idle since the init of the extension/browser
  waitingToStop = true;
  idleTimer = setTimeout(() => {
    if (openCount <= 0) {
      _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__.state.sleep().then(() => {
        waitingToStop = false;
      }).catch(err => console.warn(err));
    }
  }, IDLE_TIME);
}

// listen to all messages and handle appropriately
chrome.runtime.onConnect.addListener(port => {
  // shouldn't happen, however... only listen to what we know about
  (0,_polkadot_util__WEBPACK_IMPORTED_MODULE_3__.assert)([_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_4__.PORT_CONTENT, _subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_4__.PORT_EXTENSION].includes(port.name), `Unknown connection from ${port.name}`);
  if (_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_4__.PORT_EXTENSION === port.name) {
    openCount += 1;
    _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__.state.wakeup().catch(err => console.warn(err));
    if (waitingToStop) {
      clearTimeout(idleTimer);
      waitingToStop = false;
    }
  }

  // message and disconnect handlers
  port.onMessage.addListener(data => (0,_subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__["default"])(data, port));
  port.onDisconnect.addListener(() => {
    if (_subwallet_extension_base_defaults__WEBPACK_IMPORTED_MODULE_4__.PORT_EXTENSION === port.name) {
      openCount -= 1;
      if (openCount <= 0) {
        waitingToStop = true;
        idleTimer = setTimeout(() => {
          _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__.state.sleep().then(() => {
            waitingToStop = false;
          }).catch(err => console.warn(err));
        }, IDLE_TIME);
      }
    }
  });
});

// Trigger single mode
// chrome.runtime.onInstalled.addListener(function (details) {
//   if (details.reason === 'install') {
//     onExtensionInstall();
//   }
// });

// Setup uninstall URL every background start
chrome.runtime.setUninstallURL('https://slink.subwallet.app/uninstall-feedback');
chrome.runtime.onStartup.addListener(function () {
  handleExtensionIdling();
});

// initial setup
(0,_polkadot_util_crypto__WEBPACK_IMPORTED_MODULE_5__.cryptoWaitReady)().then(() => {
  // load all the keyring data
  _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_6__["default"].loadAll({
    store: new _subwallet_extension_base_stores__WEBPACK_IMPORTED_MODULE_7__["default"](),
    type: 'sr25519',
    password_store: new _subwallet_extension_base_stores_Keyring__WEBPACK_IMPORTED_MODULE_8__["default"]()
  });
  _subwallet_ui_keyring__WEBPACK_IMPORTED_MODULE_6__["default"].restoreKeyringPassword().finally(() => {
    _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__.state.updateKeyringState();
  });
  _subwallet_extension_base_koni_background_handlers__WEBPACK_IMPORTED_MODULE_2__.state.eventService.emit('crypto.ready', true);

  // Sleep extension after 2 minutes of inactivity or without any action
  handleExtensionIdling();
}).catch(error => {
  console.error('initialization failed', error);
});
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ "./src/installation.ts":
/*!*****************************!*\
  !*** ./src/installation.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @subwallet/extension-base/background/handlers/helpers */ "../extension-base/src/background/handlers/helpers.ts");
// Copyright 2019-2022 @subwallet/extension authors & contributors
// SPDX-License-Identifier: Apache-2.0


chrome.runtime.onInstalled.addListener(function (details) {
  if (details.reason === 'install') {
    // Add small timeout to avoid unwanted problems with the extension popup in the first time loaded
    setTimeout(() => {
      try {
        // Open expand page
        const url = `${chrome.extension.getURL('index.html')}#/`;
        (0,_subwallet_extension_base_background_handlers_helpers__WEBPACK_IMPORTED_MODULE_0__.withErrorLog)(() => chrome.tabs.create({
          url
        }));
      } catch (e) {
        console.error(e);
      }
    }, 900);
  }
});

/***/ }),

/***/ "?98fd":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?0749":
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?e376":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?7dc1":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?f84f":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?777e":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?8740":
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?f54d":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?fa5e":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?4c42":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?c86f":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?1dff":
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?983a":
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?109b":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/azero_domain_registry_abi.json":
/*!******************************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/azero_domain_registry_abi.json ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('{"source":{"hash":"0x60863fb70e2f5f55ba58c96eb4bea9e8d1ee9066d130f99cd6ff76e2f4e8624b","language":"ink! 4.2.1","compiler":"rustc 1.68.0-nightly","build_info":{"build_mode":"Release","cargo_contract_version":"3.0.1","rust_toolchain":"nightly-aarch64-apple-darwin","wasm_opt_settings":{"keep_debug_symbols":false,"optimization_passes":"Z"}}},"contract":{"name":"azns_registry","version":"1.0.0","authors":["AZERO.ID <hello@azero.id>"]},"spec":{"constructors":[{"args":[{"label":"admin","type":{"displayName":["AccountId"],"type":0}},{"label":"name_checker_addr","type":{"displayName":["Option"],"type":9}},{"label":"fee_calculator_addr","type":{"displayName":["Option"],"type":9}},{"label":"merkle_verifier_addr","type":{"displayName":["Option"],"type":9}},{"label":"tld","type":{"displayName":["String"],"type":3}},{"label":"base_uri","type":{"displayName":["String"],"type":3}}],"default":false,"docs":["Creates a new AZNS contract."],"label":"new","payable":false,"returnType":{"displayName":["ink_primitives","ConstructorResult"],"type":10},"selector":"0x9bae9d5e"}],"docs":[],"environment":{"accountId":{"displayName":["AccountId"],"type":0},"balance":{"displayName":["Balance"],"type":4},"blockNumber":{"displayName":["BlockNumber"],"type":5},"chainExtension":{"displayName":["ChainExtension"],"type":72},"hash":{"displayName":["Hash"],"type":71},"maxEventTopics":4,"timestamp":{"displayName":["Timestamp"],"type":6}},"events":[{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}},{"docs":[],"indexed":true,"label":"from","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":false,"label":"registration_timestamp","type":{"displayName":["u64"],"type":6}},{"docs":[],"indexed":false,"label":"expiration_timestamp","type":{"displayName":["u64"],"type":6}}],"docs":["Emitted whenever a new name is registered."],"label":"Register"},{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}},{"docs":[],"indexed":true,"label":"from","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"referrer","type":{"displayName":["Option"],"type":13}},{"docs":[],"indexed":false,"label":"referrer_addr","type":{"displayName":["Option"],"type":9}},{"docs":[],"indexed":false,"label":"received_fee","type":{"displayName":["Balance"],"type":4}},{"docs":[],"indexed":false,"label":"forwarded_referrer_fee","type":{"displayName":["Balance"],"type":4}}],"docs":[],"label":"FeeReceived"},{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}},{"docs":[],"indexed":true,"label":"from","type":{"displayName":["AccountId"],"type":0}}],"docs":["Emitted whenever a name is released"],"label":"Release"},{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}},{"docs":[],"indexed":false,"label":"from","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"old_address","type":{"displayName":["Option"],"type":9}},{"docs":[],"indexed":true,"label":"new_address","type":{"displayName":["AccountId"],"type":0}}],"docs":["Emitted whenever an address changes."],"label":"SetAddress"},{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}},{"docs":[],"indexed":false,"label":"from","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"old_controller","type":{"displayName":["Option"],"type":9}},{"docs":[],"indexed":true,"label":"new_controller","type":{"displayName":["AccountId"],"type":0}}],"docs":["Emitted whenever controller changes."],"label":"SetController"},{"args":[{"docs":[],"indexed":true,"label":"account","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"primary_name","type":{"displayName":["Option"],"type":13}}],"docs":[],"label":"SetPrimaryName"},{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}},{"docs":[],"indexed":false,"label":"from","type":{"displayName":["AccountId"],"type":0}}],"docs":[],"label":"RecordsUpdated"},{"args":[{"docs":[],"indexed":true,"label":"from","type":{"displayName":["Option"],"type":9}},{"docs":[],"indexed":true,"label":"to","type":{"displayName":["Option"],"type":9}},{"docs":[],"indexed":true,"label":"id","type":{"displayName":["Id"],"type":60}}],"docs":["Event emitted when a token transfer occurs."],"label":"Transfer"},{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}},{"docs":[],"indexed":true,"label":"caller","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"unlocker","type":{"displayName":["AccountId"],"type":0}}],"docs":["Event emitted when a token is locked."],"label":"Lock"},{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}}],"docs":["Event emitted when a token is unlocked."],"label":"Unlock"},{"args":[{"docs":[],"indexed":true,"label":"owner","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"operator","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"id","type":{"displayName":["Option"],"type":63}},{"docs":[],"indexed":false,"label":"approved","type":{"displayName":["bool"],"type":20}}],"docs":["Event emitted when a token approve occurs."],"label":"Approval"},{"args":[],"docs":["Emitted when switching from whitelist-phase to public-phase"],"label":"PublicPhaseActivated"},{"args":[{"docs":[],"indexed":true,"label":"name","type":{"displayName":["String"],"type":3}},{"docs":[],"indexed":true,"label":"account_id","type":{"displayName":["Option"],"type":9}},{"docs":[],"indexed":false,"label":"action","type":{"displayName":["bool"],"type":20}}],"docs":["Emitted when a name is reserved or removed from the reservation list"],"label":"Reserve"}],"lang_error":{"displayName":["ink","LangError"],"type":12},"messages":[{"args":[{"label":"name","type":{"displayName":["String"],"type":3}},{"label":"recipient","type":{"displayName":["AccountId"],"type":0}},{"label":"years_to_register","type":{"displayName":["u8"],"type":2}},{"label":"referrer","type":{"displayName":["Option"],"type":13}},{"label":"merkle_proof","type":{"displayName":["Option"],"type":14}}],"default":false,"docs":[" Register specific name on behalf of some other address."," Pay the fee, but forward the ownership of the name to the provided recipient",""," NOTE: During the whitelist phase, use `register()` method instead."],"label":"register_on_behalf_of","mutates":true,"payable":true,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x7aa26a96"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}},{"label":"years_to_register","type":{"displayName":["u8"],"type":2}},{"label":"referrer","type":{"displayName":["Option"],"type":13}},{"label":"merkle_proof","type":{"displayName":["Option"],"type":14}},{"label":"set_as_primary_name","type":{"displayName":["bool"],"type":20}}],"default":false,"docs":[" Register specific name with caller as owner.",""," NOTE: Whitelisted addresses can buy one name during the whitelist phase by submitting its proof"],"label":"register","mutates":true,"payable":true,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x229b553f"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[" Allows users to claim their reserved name at zero cost"],"label":"claim_reserved_name","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x2251f2bc"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[" Release name from registration."],"label":"release","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x3f2be152"},{"args":[{"label":"to","type":{"displayName":["AccountId"],"type":0}},{"label":"name","type":{"displayName":["String"],"type":3}},{"label":"keep_records","type":{"displayName":["bool"],"type":20}},{"label":"keep_controller","type":{"displayName":["bool"],"type":20}},{"label":"keep_resolving","type":{"displayName":["bool"],"type":20}},{"label":"data","type":{"displayName":["Vec"],"type":21}}],"default":false,"docs":[" Transfer owner to another address."],"label":"transfer","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":22},"selector":"0x84a15da1"},{"args":[{"label":"names","type":{"displayName":["Vec"],"type":25}}],"default":false,"docs":[" Removes the associated state of expired-names from storage"],"label":"clear_expired_names","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":26},"selector":"0xd00a53e5"},{"args":[{"label":"primary_name","type":{"displayName":["Option"],"type":13}}],"default":false,"docs":[" Set primary name of an address (reverse record)"," @note if name is set to None then the primary-name for the caller will be removed (if exists)"],"label":"set_primary_name","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0xad11843c"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}},{"label":"new_address","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[" Set resolved address for specific name."],"label":"set_address","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0xb8a4d3d9"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}},{"label":"new_controller","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"set_controller","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0xc5e161ea"},{"args":[{"label":"names","type":{"displayName":["Vec"],"type":25}}],"default":false,"docs":[],"label":"reset_resolved_address","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x955299c9"},{"args":[{"label":"names","type":{"displayName":["Vec"],"type":25}}],"default":false,"docs":[],"label":"reset_controller","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x1dffd33a"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}},{"label":"records","type":{"displayName":["Vec"],"type":28}},{"label":"remove_rest","type":{"displayName":["bool"],"type":20}}],"default":false,"docs":[],"label":"update_records","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0xde84a1ba"},{"args":[{"label":"names","type":{"displayName":["Vec"],"type":25}}],"default":false,"docs":[" Returns the current status of the name"],"label":"get_name_status","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":30},"selector":"0x964d7612"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[" Get the addresses related to specific name"],"label":"get_address_dict","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":34},"selector":"0xf069dff3"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[" Get owner of specific name."],"label":"get_owner","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":36},"selector":"0x07fcd0b1"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[" Get controller of specific name."],"label":"get_controller","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":36},"selector":"0x0abf0e97"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[" Get address for specific name."],"label":"get_address","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":36},"selector":"0xd259f7ba"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[],"label":"get_registration_period","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":38},"selector":"0x61437185"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[" Gets all records"],"label":"get_all_records","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":41},"selector":"0x528be9f1"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}},{"label":"key","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[" Gets an arbitrary record by key"],"label":"get_record","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":42},"selector":"0x7e6cb4ce"},{"args":[{"label":"owner","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[" Returns all names the address owns"],"label":"get_owned_names_of_address","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":44},"selector":"0xe413b13a"},{"args":[{"label":"controller","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"get_controlled_names_of_address","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":44},"selector":"0x9f25301e"},{"args":[{"label":"address","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"get_resolving_names_of_address","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":44},"selector":"0xadd2f457"},{"args":[{"label":"address","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"get_primary_name","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":42},"selector":"0x404f1d73"},{"args":[{"label":"address","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"get_primary_domain","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":45},"selector":"0xbf5b5677"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[],"label":"get_lock_info","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":46},"selector":"0x5974dd04"},{"args":[{"label":"address","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"get_names_of_address","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":44},"selector":"0xf82caf60"},{"args":[{"label":"user","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"get_owner_to_name_count","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":47},"selector":"0xb779edfe"},{"args":[{"label":"user","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"get_controller_to_name_count","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":47},"selector":"0xf5e0d676"},{"args":[{"label":"user","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"get_resolving_to_name_count","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":47},"selector":"0x28610555"},{"args":[],"default":false,"docs":[],"label":"get_records_size_limit","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":48},"selector":"0x8405efa0"},{"args":[],"default":false,"docs":[],"label":"get_tld","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":50},"selector":"0xd61daed4"},{"args":[],"default":false,"docs":[],"label":"get_base_uri","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":50},"selector":"0x6e06617c"},{"args":[],"default":false,"docs":[" Returns `true` when contract is in whitelist-phase"," and `false` when it is in public-phase"],"label":"is_whitelist_phase","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":51},"selector":"0x59d8255b"},{"args":[{"label":"account","type":{"displayName":["AccountId"],"type":0}},{"label":"merkle_proof","type":{"displayName":["Option"],"type":14}}],"default":false,"docs":[],"label":"verify_proof","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":51},"selector":"0x71c9d9ba"},{"args":[{"label":"beneficiary","type":{"displayName":["Option"],"type":9}},{"label":"value","type":{"displayName":["Option"],"type":52}}],"default":false,"docs":[" (ADMIN-OPERATION)"," Transfers `value` amount of tokens to the caller."],"label":"withdraw","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x410fcc9d"},{"args":[],"default":false,"docs":[" (ADMIN-OPERATION)"," Switch from whitelist-phase to public-phase"],"label":"switch_to_public_phase","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x17257477"},{"args":[{"label":"set","type":{"displayName":["Vec"],"type":53}}],"default":false,"docs":[" (ADMIN-OPERATION)"," Reserve name name for specific addresses"],"label":"add_reserved_names","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x6e0d3fa8"},{"args":[{"label":"set","type":{"displayName":["Vec"],"type":25}}],"default":false,"docs":[" (ADMIN-OPERATION)"," Remove given names from the list of reserved names"],"label":"remove_reserved_name","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x9ccff6c5"},{"args":[{"label":"limit","type":{"displayName":["Option"],"type":49}}],"default":false,"docs":[" (ADMIN-OPERATION)"," Update the limit of records allowed to store per name"],"label":"set_records_size_limit","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x7c9baef6"},{"args":[{"label":"name","type":{"displayName":["String"],"type":3}},{"label":"recipient","type":{"displayName":["AccountId"],"type":0}},{"label":"years_to_register","type":{"displayName":["u8"],"type":2}},{"label":"referrer","type":{"displayName":["Option"],"type":13}}],"default":false,"docs":[],"label":"get_name_price","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":55},"selector":"0xb565be46"},{"args":[{"label":"recipient","type":{"displayName":["AccountId"],"type":0}},{"label":"referrer_name","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[],"label":"validate_referrer","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":51},"selector":"0x30fc989d"},{"args":[],"default":false,"docs":[],"label":"get_admin","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":58},"selector":"0x57b8a8a7"},{"args":[],"default":false,"docs":[],"label":"get_pending_admin","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":46},"selector":"0xbcd31d76"},{"args":[{"label":"account","type":{"displayName":["Option"],"type":9}}],"default":false,"docs":[],"label":"transfer_ownership","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x107e33ea"},{"args":[],"default":false,"docs":[],"label":"accept_ownership","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0xb55be9f0"},{"args":[{"label":"code_hash","type":{"displayName":[],"type":1}}],"default":false,"docs":[],"label":"upgrade_contract","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":10},"selector":"0x1345543d"},{"args":[],"default":false,"docs":[],"label":"PSP34::collection_id","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":59},"selector":"0xffa27a5f"},{"args":[{"label":"owner","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"PSP34::balance_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":62},"selector":"0xcde7e55f"},{"args":[{"label":"id","type":{"displayName":["Id"],"type":60}}],"default":false,"docs":[],"label":"PSP34::owner_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":46},"selector":"0x1168624d"},{"args":[{"label":"owner","type":{"displayName":["AccountId"],"type":0}},{"label":"operator","type":{"displayName":["AccountId"],"type":0}},{"label":"id","type":{"displayName":["Option"],"type":63}}],"default":false,"docs":[],"label":"PSP34::allowance","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":51},"selector":"0x4790f55a"},{"args":[{"label":"operator","type":{"displayName":["AccountId"],"type":0}},{"label":"id","type":{"displayName":["Option"],"type":63}},{"label":"approved","type":{"displayName":["bool"],"type":20}}],"default":false,"docs":[],"label":"PSP34::approve","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":22},"selector":"0x1932a8b0"},{"args":[{"label":"to","type":{"displayName":["AccountId"],"type":0}},{"label":"id","type":{"displayName":["Id"],"type":60}},{"label":"data","type":{"displayName":["Vec"],"type":21}}],"default":false,"docs":[],"label":"PSP34::transfer","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":22},"selector":"0x3128d61b"},{"args":[],"default":false,"docs":[],"label":"PSP34::total_supply","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":47},"selector":"0x628413fe"},{"args":[{"label":"owner","type":{"displayName":["AccountId"],"type":0}},{"label":"index","type":{"displayName":["u128"],"type":4}}],"default":false,"docs":[],"label":"PSP34Enumerable::owners_token_by_index","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":64},"selector":"0x3bcfb511"},{"args":[{"label":"_index","type":{"displayName":["u128"],"type":4}}],"default":false,"docs":[],"label":"PSP34Enumerable::token_by_index","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":64},"selector":"0xcd0340d0"},{"args":[{"label":"id","type":{"displayName":["Id"],"type":60}},{"label":"key","type":{"displayName":["Vec"],"type":21}}],"default":false,"docs":[],"label":"PSP34Metadata::get_attribute","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":66},"selector":"0xf19d48d1"},{"args":[],"default":false,"docs":[],"label":"Psp34Traits::get_owner","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":58},"selector":"0x8e1d8d71"},{"args":[{"label":"token_id","type":{"displayName":["Id"],"type":60}}],"default":false,"docs":[],"label":"Psp34Traits::token_uri","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":50},"selector":"0x249dfd4f"},{"args":[{"label":"uri","type":{"displayName":["String"],"type":3}}],"default":false,"docs":[],"label":"Psp34Traits::set_base_uri","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":68},"selector":"0x4de6850b"},{"args":[],"default":false,"docs":[],"label":"Psp34Traits::get_attribute_count","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":62},"selector":"0x61c50d69"},{"args":[{"label":"index","type":{"displayName":["u32"],"type":5}}],"default":false,"docs":[],"label":"Psp34Traits::get_attribute_name","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":50},"selector":"0xfcfe34de"},{"args":[{"label":"token_id","type":{"displayName":["Id"],"type":60}},{"label":"attributes","type":{"displayName":["Vec"],"type":25}}],"default":false,"docs":[],"label":"Psp34Traits::get_attributes","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":44},"selector":"0x18209102"},{"args":[{"label":"_token_id","type":{"displayName":["Id"],"type":60}},{"label":"_metadata","type":{"displayName":["Vec"],"type":7}}],"default":false,"docs":[],"label":"Psp34Traits::set_multiple_attributes","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":68},"selector":"0x5bf8416b"}]},"storage":{"root":{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":0}},"name":"admin"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":0}},"name":"0"}],"name":"Some"}}}},"name":"pending_admin"},{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"tld"},{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"base_uri"},{"layout":{"leaf":{"key":"0x00000000","ty":4}},"name":"total_supply"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":5}},"name":"0"}],"name":"Some"}}}},"name":"records_size_limit"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":0}},"name":"account_id"}],"name":"CallBuilder"}},"name":"inner"}],"name":"NameCheckerRef"}},"name":"0"}],"name":"Some"}}}},"name":"name_checker"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":0}},"name":"account_id"}],"name":"CallBuilder"}},"name":"inner"}],"name":"FeeCalculatorRef"}},"name":"0"}],"name":"Some"}}}},"name":"fee_calculator"},{"layout":{"root":{"layout":{"enum":{"dispatchKey":"0x00000064","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000064","ty":0}},"name":"0"}],"name":"Some"}}}},"root_key":"0x00000064"}},"name":"reserved_names"},{"layout":{"root":{"layout":{"leaf":{"key":"0x00000065","ty":6}},"root_key":"0x00000065"}},"name":"operator_approvals"},{"layout":{"root":{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x000000c8","ty":0}},"name":"owner"},{"layout":{"leaf":{"key":"0x000000c8","ty":0}},"name":"controller"},{"layout":{"leaf":{"key":"0x000000c8","ty":0}},"name":"resolved"}],"name":"AddressDict"}},"root_key":"0x000000c8"}},"name":"name_to_address_dict"},{"layout":{"root":{"layout":{"leaf":{"key":"0x000000c9","ty":0}},"root_key":"0x000000c9"}},"name":"name_to_lock"},{"layout":{"root":{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x000000ca","ty":6}},"name":"0"},{"layout":{"leaf":{"key":"0x000000ca","ty":6}},"name":"1"}],"name":"(A, B)"}},"root_key":"0x000000ca"}},"name":"name_to_period"},{"layout":{"root":{"layout":{"leaf":{"key":"0x000000cb","ty":7}},"root_key":"0x000000cb"}},"name":"records"},{"layout":{"root":{"layout":{"leaf":{"key":"0x0000012c","ty":4}},"root_key":"0x0000012c"}},"name":"owner_to_name_count"},{"layout":{"root":{"layout":{"leaf":{"key":"0x0000012d","ty":3}},"root_key":"0x0000012d"}},"name":"owner_to_names"},{"layout":{"root":{"layout":{"leaf":{"key":"0x0000012e","ty":4}},"root_key":"0x0000012e"}},"name":"name_to_owner_index"},{"layout":{"root":{"layout":{"leaf":{"key":"0x00000136","ty":4}},"root_key":"0x00000136"}},"name":"controller_to_name_count"},{"layout":{"root":{"layout":{"leaf":{"key":"0x00000137","ty":3}},"root_key":"0x00000137"}},"name":"controller_to_names"},{"layout":{"root":{"layout":{"leaf":{"key":"0x00000138","ty":4}},"root_key":"0x00000138"}},"name":"name_to_controller_index"},{"layout":{"root":{"layout":{"leaf":{"key":"0x00000140","ty":4}},"root_key":"0x00000140"}},"name":"resolving_to_name_count"},{"layout":{"root":{"layout":{"leaf":{"key":"0x00000141","ty":3}},"root_key":"0x00000141"}},"name":"resolving_to_names"},{"layout":{"root":{"layout":{"leaf":{"key":"0x00000143","ty":4}},"root_key":"0x00000143"}},"name":"name_to_resolving_index"},{"layout":{"root":{"layout":{"leaf":{"key":"0x0000018f","ty":3}},"root_key":"0x0000018f"}},"name":"address_to_primary_name"},{"layout":{"root":{"layout":{"enum":{"dispatchKey":"0x000003e7","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x000003e7","ty":0}},"name":"account_id"}],"name":"CallBuilder"}},"name":"inner"}],"name":"MerkleVerifierRef"}},"name":"0"}],"name":"Some"}}}},"root_key":"0x000003e7"}},"name":"whitelisted_address_verifier"}],"name":"Registry"}},"root_key":"0x00000000"}},"types":[{"id":0,"type":{"def":{"composite":{"fields":[{"type":1,"typeName":"[u8; 32]"}]}},"path":["ink_primitives","types","AccountId"]}},{"id":1,"type":{"def":{"array":{"len":32,"type":2}}}},{"id":2,"type":{"def":{"primitive":"u8"}}},{"id":3,"type":{"def":{"primitive":"str"}}},{"id":4,"type":{"def":{"primitive":"u128"}}},{"id":5,"type":{"def":{"primitive":"u32"}}},{"id":6,"type":{"def":{"primitive":"u64"}}},{"id":7,"type":{"def":{"sequence":{"type":8}}}},{"id":8,"type":{"def":{"tuple":[3,3]}}},{"id":9,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":0}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":0}],"path":["Option"]}},{"id":10,"type":{"def":{"variant":{"variants":[{"fields":[{"type":11}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":11},{"name":"E","type":12}],"path":["Result"]}},{"id":11,"type":{"def":{"tuple":[]}}},{"id":12,"type":{"def":{"variant":{"variants":[{"index":1,"name":"CouldNotReadInput"}]}},"path":["ink_primitives","LangError"]}},{"id":13,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":3}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":3}],"path":["Option"]}},{"id":14,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":15}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":15}],"path":["Option"]}},{"id":15,"type":{"def":{"sequence":{"type":1}}}},{"id":16,"type":{"def":{"variant":{"variants":[{"fields":[{"type":17}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":17},{"name":"E","type":12}],"path":["Result"]}},{"id":17,"type":{"def":{"variant":{"variants":[{"fields":[{"type":11}],"index":0,"name":"Ok"},{"fields":[{"type":18}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":11},{"name":"E","type":18}],"path":["Result"]}},{"id":18,"type":{"def":{"variant":{"variants":[{"index":0,"name":"NotAdmin"},{"index":1,"name":"NameAlreadyExists"},{"index":2,"name":"NameDoesntExist"},{"index":3,"name":"NameNotAllowed"},{"index":4,"name":"CallerIsNotOwner"},{"index":5,"name":"CallerIsNotController"},{"index":6,"name":"FeeNotPaid"},{"index":7,"name":"NameEmpty"},{"index":8,"name":"RecordNotFound"},{"index":9,"name":"WithdrawFailed"},{"index":10,"name":"InsufficientBalance"},{"index":11,"name":"NoResolvedAddress"},{"index":12,"name":"AlreadyClaimed"},{"index":13,"name":"InvalidMerkleProof"},{"index":14,"name":"CannotBuyReservedName"},{"index":15,"name":"NotReservedName"},{"index":16,"name":"NotAuthorised"},{"index":17,"name":"ZeroAddress"},{"index":18,"name":"RecordsOverflow"},{"fields":[{"type":19,"typeName":"azns_fee_calculator::Error"}],"index":19,"name":"FeeError"},{"index":20,"name":"OnlyDuringWhitelistPhase"},{"index":21,"name":"RestrictedDuringWhitelistPhase"}]}},"path":["azns_registry","azns_registry","Error"]}},{"id":19,"type":{"def":{"variant":{"variants":[{"index":0,"name":"NotAdmin"},{"index":1,"name":"InvalidDuration"},{"index":2,"name":"ZeroLength"},{"index":3,"name":"ZeroPrice"}]}},"path":["azns_fee_calculator","Error"]}},{"id":20,"type":{"def":{"primitive":"bool"}}},{"id":21,"type":{"def":{"sequence":{"type":2}}}},{"id":22,"type":{"def":{"variant":{"variants":[{"fields":[{"type":23}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":23},{"name":"E","type":12}],"path":["Result"]}},{"id":23,"type":{"def":{"variant":{"variants":[{"fields":[{"type":11}],"index":0,"name":"Ok"},{"fields":[{"type":24}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":11},{"name":"E","type":24}],"path":["Result"]}},{"id":24,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3,"typeName":"String"}],"index":0,"name":"Custom"},{"index":1,"name":"SelfApprove"},{"index":2,"name":"NotApproved"},{"index":3,"name":"TokenExists"},{"index":4,"name":"TokenNotExists"},{"fields":[{"type":3,"typeName":"String"}],"index":5,"name":"SafeTransferCheckFailed"}]}},"path":["interfaces","psp34_standard","PSP34Error"]}},{"id":25,"type":{"def":{"sequence":{"type":3}}}},{"id":26,"type":{"def":{"variant":{"variants":[{"fields":[{"type":27}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":27},{"name":"E","type":12}],"path":["Result"]}},{"id":27,"type":{"def":{"variant":{"variants":[{"fields":[{"type":4}],"index":0,"name":"Ok"},{"fields":[{"type":18}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":4},{"name":"E","type":18}],"path":["Result"]}},{"id":28,"type":{"def":{"sequence":{"type":29}}}},{"id":29,"type":{"def":{"tuple":[3,13]}}},{"id":30,"type":{"def":{"variant":{"variants":[{"fields":[{"type":31}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":31},{"name":"E","type":12}],"path":["Result"]}},{"id":31,"type":{"def":{"sequence":{"type":32}}}},{"id":32,"type":{"def":{"variant":{"variants":[{"fields":[{"type":33,"typeName":"AddressDict"},{"type":9,"typeName":"Option<AccountId>"}],"index":0,"name":"Registered"},{"fields":[{"type":9,"typeName":"Option<AccountId>"}],"index":1,"name":"Reserved"},{"index":2,"name":"Available"},{"index":3,"name":"Unavailable"}]}},"path":["azns_registry","azns_registry","NameStatus"]}},{"id":33,"type":{"def":{"composite":{"fields":[{"name":"owner","type":0,"typeName":"AccountId"},{"name":"controller","type":0,"typeName":"AccountId"},{"name":"resolved","type":0,"typeName":"AccountId"}]}},"path":["azns_registry","address_dict","AddressDict"]}},{"id":34,"type":{"def":{"variant":{"variants":[{"fields":[{"type":35}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":35},{"name":"E","type":12}],"path":["Result"]}},{"id":35,"type":{"def":{"variant":{"variants":[{"fields":[{"type":33}],"index":0,"name":"Ok"},{"fields":[{"type":18}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":33},{"name":"E","type":18}],"path":["Result"]}},{"id":36,"type":{"def":{"variant":{"variants":[{"fields":[{"type":37}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":37},{"name":"E","type":12}],"path":["Result"]}},{"id":37,"type":{"def":{"variant":{"variants":[{"fields":[{"type":0}],"index":0,"name":"Ok"},{"fields":[{"type":18}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":0},{"name":"E","type":18}],"path":["Result"]}},{"id":38,"type":{"def":{"variant":{"variants":[{"fields":[{"type":39}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":39},{"name":"E","type":12}],"path":["Result"]}},{"id":39,"type":{"def":{"variant":{"variants":[{"fields":[{"type":40}],"index":0,"name":"Ok"},{"fields":[{"type":18}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":40},{"name":"E","type":18}],"path":["Result"]}},{"id":40,"type":{"def":{"tuple":[6,6]}}},{"id":41,"type":{"def":{"variant":{"variants":[{"fields":[{"type":7}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":7},{"name":"E","type":12}],"path":["Result"]}},{"id":42,"type":{"def":{"variant":{"variants":[{"fields":[{"type":43}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":43},{"name":"E","type":12}],"path":["Result"]}},{"id":43,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":18}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":18}],"path":["Result"]}},{"id":44,"type":{"def":{"variant":{"variants":[{"fields":[{"type":25}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":25},{"name":"E","type":12}],"path":["Result"]}},{"id":45,"type":{"def":{"variant":{"variants":[{"fields":[{"type":13}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":13},{"name":"E","type":12}],"path":["Result"]}},{"id":46,"type":{"def":{"variant":{"variants":[{"fields":[{"type":9}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":9},{"name":"E","type":12}],"path":["Result"]}},{"id":47,"type":{"def":{"variant":{"variants":[{"fields":[{"type":4}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":4},{"name":"E","type":12}],"path":["Result"]}},{"id":48,"type":{"def":{"variant":{"variants":[{"fields":[{"type":49}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":49},{"name":"E","type":12}],"path":["Result"]}},{"id":49,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":5}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":5}],"path":["Option"]}},{"id":50,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":12}],"path":["Result"]}},{"id":51,"type":{"def":{"variant":{"variants":[{"fields":[{"type":20}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":20},{"name":"E","type":12}],"path":["Result"]}},{"id":52,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":4}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":4}],"path":["Option"]}},{"id":53,"type":{"def":{"sequence":{"type":54}}}},{"id":54,"type":{"def":{"tuple":[3,9]}}},{"id":55,"type":{"def":{"variant":{"variants":[{"fields":[{"type":56}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":56},{"name":"E","type":12}],"path":["Result"]}},{"id":56,"type":{"def":{"variant":{"variants":[{"fields":[{"type":57}],"index":0,"name":"Ok"},{"fields":[{"type":18}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":57},{"name":"E","type":18}],"path":["Result"]}},{"id":57,"type":{"def":{"tuple":[4,4,4,9]}}},{"id":58,"type":{"def":{"variant":{"variants":[{"fields":[{"type":0}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":0},{"name":"E","type":12}],"path":["Result"]}},{"id":59,"type":{"def":{"variant":{"variants":[{"fields":[{"type":60}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":60},{"name":"E","type":12}],"path":["Result"]}},{"id":60,"type":{"def":{"variant":{"variants":[{"fields":[{"type":2,"typeName":"u8"}],"index":0,"name":"U8"},{"fields":[{"type":61,"typeName":"u16"}],"index":1,"name":"U16"},{"fields":[{"type":5,"typeName":"u32"}],"index":2,"name":"U32"},{"fields":[{"type":6,"typeName":"u64"}],"index":3,"name":"U64"},{"fields":[{"type":4,"typeName":"u128"}],"index":4,"name":"U128"},{"fields":[{"type":21,"typeName":"Vec<u8>"}],"index":5,"name":"Bytes"}]}},"path":["interfaces","psp34_standard","Id"]}},{"id":61,"type":{"def":{"primitive":"u16"}}},{"id":62,"type":{"def":{"variant":{"variants":[{"fields":[{"type":5}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":5},{"name":"E","type":12}],"path":["Result"]}},{"id":63,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":60}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":60}],"path":["Option"]}},{"id":64,"type":{"def":{"variant":{"variants":[{"fields":[{"type":65}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":65},{"name":"E","type":12}],"path":["Result"]}},{"id":65,"type":{"def":{"variant":{"variants":[{"fields":[{"type":60}],"index":0,"name":"Ok"},{"fields":[{"type":24}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":60},{"name":"E","type":24}],"path":["Result"]}},{"id":66,"type":{"def":{"variant":{"variants":[{"fields":[{"type":67}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":67},{"name":"E","type":12}],"path":["Result"]}},{"id":67,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":21}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":21}],"path":["Option"]}},{"id":68,"type":{"def":{"variant":{"variants":[{"fields":[{"type":69}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":69},{"name":"E","type":12}],"path":["Result"]}},{"id":69,"type":{"def":{"variant":{"variants":[{"fields":[{"type":11}],"index":0,"name":"Ok"},{"fields":[{"type":70}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":11},{"name":"E","type":70}],"path":["Result"]}},{"id":70,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3,"typeName":"String"}],"index":0,"name":"Custom"}]}},"path":["interfaces","art_zero_traits","ArtZeroError"]}},{"id":71,"type":{"def":{"composite":{"fields":[{"type":1,"typeName":"[u8; 32]"}]}},"path":["ink_primitives","types","Hash"]}},{"id":72,"type":{"def":{"variant":{}},"path":["ink_env","types","NoChainExtension"]}}],"version":"4"}');

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/erc20_abi.json":
/*!**************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/erc20_abi.json ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]');

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/erc721_abi.json":
/*!***************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/erc721_abi.json ***!
  \***************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('[{"constant":true,"inputs":[{"name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":true,"anonymous":true,"inputs":[{"indexed":true,"name":"tokenId","type":"uint256"}],"outputs":[{"name":"","type":"string"}],"name":"tokenURI","payable":false,"stateMutability":"view","type":"function"},{"constant":true,"anonymous":true,"inputs":[],"outputs":[{"name":"","type":"uint256"}],"name":"totalSupply","payable":false,"stateMutability":"view","type":"function"},{"anonymous":true,"inputs":[],"outputs":[{"name":"_name","type":"string"}],"name":"name","payable":false,"stateMutability":"view","type":"function"},{"anonymous":true,"inputs":[],"outputs":[{"name":"_symbol","type":"string"}],"name":"symbol","payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"approved","type":"address"},{"indexed":true,"name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"operator","type":"address"},{"indexed":false,"name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"}],"name":"transfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"},{"name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]');

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/neuroguns_psp34_abi.json":
/*!************************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/neuroguns_psp34_abi.json ***!
  \************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('{"source":{"hash":"0x80f9d65ac1c9eb4f4c515ccad19453d742da69121ddfaac06b4eee98225f7ff7","language":"ink! 4.2.1","compiler":"rustc 1.69.0","build_info":{"build_mode":"Release","cargo_contract_version":"3.0.1","rust_toolchain":"stable-x86_64-pc-windows-msvc","wasm_opt_settings":{"keep_debug_symbols":false,"optimization_passes":"Z"}}},"contract":{"name":"neuroguns","version":"3.1.0","authors":["Wolfer"]},"spec":{"constructors":[{"args":[{"label":"base_uri","type":{"displayName":["String"],"type":6}}],"default":false,"docs":[],"label":"new","payable":false,"returnType":{"displayName":["ink_primitives","ConstructorResult"],"type":10},"selector":"0x9bae9d5e"}],"docs":[],"environment":{"accountId":{"displayName":["AccountId"],"type":0},"balance":{"displayName":["Balance"],"type":5},"blockNumber":{"displayName":["BlockNumber"],"type":4},"chainExtension":{"displayName":["ChainExtension"],"type":33},"hash":{"displayName":["Hash"],"type":32},"maxEventTopics":4,"timestamp":{"displayName":["Timestamp"],"type":8}},"events":[],"lang_error":{"displayName":["ink","LangError"],"type":11},"messages":[{"args":[{"label":"new_base_uri","type":{"displayName":["String"],"type":6}}],"default":false,"docs":[],"label":"set_base_uri","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":12},"selector":"0xec403dee"},{"args":[{"label":"token_id","type":{"displayName":["u64"],"type":8}}],"default":false,"docs":[],"label":"token_uri","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":15},"selector":"0x5b64e66a"},{"args":[{"label":"operator","type":{"displayName":["psp34_external","ApproveInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","ApproveInput2"],"type":16}},{"label":"approved","type":{"displayName":["psp34_external","ApproveInput3"],"type":18}}],"default":false,"docs":[],"label":"PSP34::approve","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":12},"selector":"0x1932a8b0"},{"args":[{"label":"owner","type":{"displayName":["psp34_external","AllowanceInput1"],"type":0}},{"label":"operator","type":{"displayName":["psp34_external","AllowanceInput2"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","AllowanceInput3"],"type":16}}],"default":false,"docs":[],"label":"PSP34::allowance","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":19},"selector":"0x4790f55a"},{"args":[],"default":false,"docs":[],"label":"PSP34::collection_id","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":20},"selector":"0xffa27a5f"},{"args":[{"label":"to","type":{"displayName":["psp34_external","TransferInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","TransferInput2"],"type":17}},{"label":"data","type":{"displayName":["psp34_external","TransferInput3"],"type":9}}],"default":false,"docs":[],"label":"PSP34::transfer","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":12},"selector":"0x3128d61b"},{"args":[],"default":false,"docs":[],"label":"PSP34::total_supply","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":21},"selector":"0x628413fe"},{"args":[{"label":"owner","type":{"displayName":["psp34_external","BalanceOfInput1"],"type":0}}],"default":false,"docs":[],"label":"PSP34::balance_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":22},"selector":"0xcde7e55f"},{"args":[{"label":"id","type":{"displayName":["psp34_external","OwnerOfInput1"],"type":17}}],"default":false,"docs":[],"label":"PSP34::owner_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":23},"selector":"0x1168624d"},{"args":[],"default":false,"docs":[],"label":"Ownable::owner","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":23},"selector":"0x4fa43c8c"},{"args":[],"default":false,"docs":[],"label":"Ownable::renounce_ownership","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":25},"selector":"0x5e228753"},{"args":[{"label":"new_owner","type":{"displayName":["ownable_external","TransferOwnershipInput1"],"type":0}}],"default":false,"docs":[],"label":"Ownable::transfer_ownership","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":25},"selector":"0x11f43efd"},{"args":[{"label":"owner","type":{"displayName":["psp34enumerable_external","OwnersTokenByIndexInput1"],"type":0}},{"label":"index","type":{"displayName":["psp34enumerable_external","OwnersTokenByIndexInput2"],"type":5}}],"default":false,"docs":[],"label":"PSP34Enumerable::owners_token_by_index","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":28},"selector":"0x3bcfb511"},{"args":[{"label":"index","type":{"displayName":["psp34enumerable_external","TokenByIndexInput1"],"type":5}}],"default":false,"docs":[],"label":"PSP34Enumerable::token_by_index","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":28},"selector":"0xcd0340d0"},{"args":[{"label":"id","type":{"displayName":["psp34metadata_external","GetAttributeInput1"],"type":17}},{"label":"key","type":{"displayName":["psp34metadata_external","GetAttributeInput2"],"type":6}}],"default":false,"docs":[],"label":"PSP34Metadata::get_attribute","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":30},"selector":"0xf19d48d1"},{"args":[{"label":"account","type":{"displayName":["psp34mintable_external","MintInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34mintable_external","MintInput2"],"type":17}}],"default":false,"docs":[],"label":"PSP34Mintable::mint","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":12},"selector":"0x6c41f2ec"}]},"storage":{"root":{"layout":{"struct":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"leaf":{"key":"0x252d8eda","ty":0}},"root_key":"0x252d8eda"}},"name":"token_owner"},{"layout":{"root":{"layout":{"leaf":{"key":"0xcb1393da","ty":3}},"root_key":"0xcb1393da"}},"name":"operator_approvals"},{"layout":{"root":{"layout":{"leaf":{"key":"0xf957bbd8","ty":4}},"root_key":"0xf957bbd8"}},"name":"owned_tokens_count"},{"layout":{"root":{"layout":{"leaf":{"key":"0xe3d7d04e","ty":5}},"root_key":"0xe3d7d04e"}},"name":"total_supply"}],"name":"Data"}},"name":"psp34"},{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"enum":{"dispatchKey":"0x6f713913","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x6f713913","ty":0}},"name":"0"}],"name":"Some"}}}},"root_key":"0x6f713913"}},"name":"owner"}],"name":"Data"}},"name":"ownable"},{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"leaf":{"key":"0xdc803caf","ty":6}},"root_key":"0xdc803caf"}},"name":"attributes"}],"name":"Data"}},"name":"metadata"},{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"leaf":{"key":"0x2d2b79f3","ty":0}},"root_key":"0x2d2b79f3"}},"name":"token_owner"},{"layout":{"root":{"layout":{"leaf":{"key":"0x5b0030d8","ty":3}},"root_key":"0x5b0030d8"}},"name":"operator_approvals"},{"layout":{"root":{"layout":{"enum":{"dispatchKey":"0x1bd7db1e","name":"Id","variants":{"0":{"fields":[{"layout":{"leaf":{"key":"0x1bd7db1e","ty":2}},"name":"0"}],"name":"U8"},"1":{"fields":[{"layout":{"leaf":{"key":"0x1bd7db1e","ty":7}},"name":"0"}],"name":"U16"},"2":{"fields":[{"layout":{"leaf":{"key":"0x1bd7db1e","ty":4}},"name":"0"}],"name":"U32"},"3":{"fields":[{"layout":{"leaf":{"key":"0x1bd7db1e","ty":8}},"name":"0"}],"name":"U64"},"4":{"fields":[{"layout":{"leaf":{"key":"0x1bd7db1e","ty":5}},"name":"0"}],"name":"U128"},"5":{"fields":[{"layout":{"leaf":{"key":"0x1bd7db1e","ty":9}},"name":"0"}],"name":"Bytes"}}}},"root_key":"0x1bd7db1e"}},"name":"balances"}],"name":"Data"}},"name":"enumerable"}],"name":"NeuroGuns"}},"root_key":"0x00000000"}},"types":[{"id":0,"type":{"def":{"composite":{"fields":[{"type":1,"typeName":"[u8; 32]"}]}},"path":["ink_primitives","types","AccountId"]}},{"id":1,"type":{"def":{"array":{"len":32,"type":2}}}},{"id":2,"type":{"def":{"primitive":"u8"}}},{"id":3,"type":{"def":{"tuple":[]}}},{"id":4,"type":{"def":{"primitive":"u32"}}},{"id":5,"type":{"def":{"primitive":"u128"}}},{"id":6,"type":{"def":{"primitive":"str"}}},{"id":7,"type":{"def":{"primitive":"u16"}}},{"id":8,"type":{"def":{"primitive":"u64"}}},{"id":9,"type":{"def":{"sequence":{"type":2}}}},{"id":10,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":11}],"path":["Result"]}},{"id":11,"type":{"def":{"variant":{"variants":[{"index":1,"name":"CouldNotReadInput"}]}},"path":["ink_primitives","LangError"]}},{"id":12,"type":{"def":{"variant":{"variants":[{"fields":[{"type":13}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":13},{"name":"E","type":11}],"path":["Result"]}},{"id":13,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":14}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":14}],"path":["Result"]}},{"id":14,"type":{"def":{"variant":{"variants":[{"fields":[{"type":6,"typeName":"String"}],"index":0,"name":"Custom"},{"index":1,"name":"SelfApprove"},{"index":2,"name":"NotApproved"},{"index":3,"name":"TokenExists"},{"index":4,"name":"TokenNotExists"},{"fields":[{"type":6,"typeName":"String"}],"index":5,"name":"SafeTransferCheckFailed"}]}},"path":["openbrush_contracts","traits","errors","psp34","PSP34Error"]}},{"id":15,"type":{"def":{"variant":{"variants":[{"fields":[{"type":6}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":6},{"name":"E","type":11}],"path":["Result"]}},{"id":16,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":17}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":17}],"path":["Option"]}},{"id":17,"type":{"def":{"variant":{"variants":[{"fields":[{"type":2,"typeName":"u8"}],"index":0,"name":"U8"},{"fields":[{"type":7,"typeName":"u16"}],"index":1,"name":"U16"},{"fields":[{"type":4,"typeName":"u32"}],"index":2,"name":"U32"},{"fields":[{"type":8,"typeName":"u64"}],"index":3,"name":"U64"},{"fields":[{"type":5,"typeName":"u128"}],"index":4,"name":"U128"},{"fields":[{"type":9,"typeName":"Vec<u8>"}],"index":5,"name":"Bytes"}]}},"path":["openbrush_contracts","traits","types","Id"]}},{"id":18,"type":{"def":{"primitive":"bool"}}},{"id":19,"type":{"def":{"variant":{"variants":[{"fields":[{"type":18}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":18},{"name":"E","type":11}],"path":["Result"]}},{"id":20,"type":{"def":{"variant":{"variants":[{"fields":[{"type":17}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":17},{"name":"E","type":11}],"path":["Result"]}},{"id":21,"type":{"def":{"variant":{"variants":[{"fields":[{"type":5}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":5},{"name":"E","type":11}],"path":["Result"]}},{"id":22,"type":{"def":{"variant":{"variants":[{"fields":[{"type":4}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":4},{"name":"E","type":11}],"path":["Result"]}},{"id":23,"type":{"def":{"variant":{"variants":[{"fields":[{"type":24}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":24},{"name":"E","type":11}],"path":["Result"]}},{"id":24,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":0}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":0}],"path":["Option"]}},{"id":25,"type":{"def":{"variant":{"variants":[{"fields":[{"type":26}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":26},{"name":"E","type":11}],"path":["Result"]}},{"id":26,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":27}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":27}],"path":["Result"]}},{"id":27,"type":{"def":{"variant":{"variants":[{"index":0,"name":"CallerIsNotOwner"},{"index":1,"name":"NewOwnerIsZero"}]}},"path":["openbrush_contracts","traits","errors","ownable","OwnableError"]}},{"id":28,"type":{"def":{"variant":{"variants":[{"fields":[{"type":29}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":29},{"name":"E","type":11}],"path":["Result"]}},{"id":29,"type":{"def":{"variant":{"variants":[{"fields":[{"type":17}],"index":0,"name":"Ok"},{"fields":[{"type":14}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":17},{"name":"E","type":14}],"path":["Result"]}},{"id":30,"type":{"def":{"variant":{"variants":[{"fields":[{"type":31}],"index":0,"name":"Ok"},{"fields":[{"type":11}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":31},{"name":"E","type":11}],"path":["Result"]}},{"id":31,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":6}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":6}],"path":["Option"]}},{"id":32,"type":{"def":{"composite":{"fields":[{"type":1,"typeName":"[u8; 32]"}]}},"path":["ink_primitives","types","Hash"]}},{"id":33,"type":{"def":{"variant":{}},"path":["ink_env","types","NoChainExtension"]}}],"version":"4"}');

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/pink_psp34_abi.json":
/*!*******************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/pink_psp34_abi.json ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('{"source":{"hash":"0xd9678c9068ae65df331f084be77e9efd059493e99a26e0ce28d81cf5c5edf9db","language":"ink! 4.2.0","compiler":"rustc 1.68.0-nightly","build_info":{"build_mode":"Release","cargo_contract_version":"2.2.1","rust_toolchain":"nightly-aarch64-apple-darwin","wasm_opt_settings":{"keep_debug_symbols":false,"optimization_passes":"Z"}}},"contract":{"name":"pinkpsp34","version":"0.1.0","authors":["[Mario] <[mario@arrakis.com]>"]},"spec":{"constructors":[{"args":[{"label":"name","type":{"displayName":["String"],"type":8}},{"label":"symbol","type":{"displayName":["String"],"type":8}},{"label":"max_supply","type":{"displayName":["u64"],"type":6}},{"label":"owner","type":{"displayName":["Option"],"type":11}}],"default":false,"docs":[],"label":"new","payable":false,"returnType":{"displayName":["ink_primitives","ConstructorResult"],"type":12},"selector":"0x9bae9d5e"}],"docs":[],"environment":{"accountId":{"displayName":["AccountId"],"type":0},"balance":{"displayName":["Balance"],"type":7},"blockNumber":{"displayName":["BlockNumber"],"type":5},"chainExtension":{"displayName":["ChainExtension"],"type":45},"hash":{"displayName":["Hash"],"type":44},"maxEventTopics":4,"timestamp":{"displayName":["Timestamp"],"type":6}},"events":[{"args":[{"docs":[],"indexed":true,"label":"from","type":{"displayName":["Option"],"type":11}},{"docs":[],"indexed":true,"label":"to","type":{"displayName":["Option"],"type":11}},{"docs":[],"indexed":true,"label":"id","type":{"displayName":["Id"],"type":10}}],"docs":["Event emitted when a token transfer occurs."],"label":"Transfer"},{"args":[{"docs":[],"indexed":true,"label":"from","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"to","type":{"displayName":["AccountId"],"type":0}},{"docs":[],"indexed":true,"label":"id","type":{"displayName":["Option"],"type":18}},{"docs":[],"indexed":false,"label":"approved","type":{"displayName":["bool"],"type":20}}],"docs":["Event emitted when a token approve occurs."],"label":"Approval"}],"lang_error":{"displayName":["ink","LangError"],"type":13},"messages":[{"args":[{"label":"holder","type":{"displayName":["AccountId"],"type":0}}],"default":false,"docs":[],"label":"total_balance","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":14},"selector":"0xf3361760"},{"args":[{"label":"code_hash","type":{"displayName":[],"type":1}}],"default":false,"docs":[" Modifies the code which is used to execute calls to this contract address (`AccountId`).",""," We use this to upgrade the contract logic. We don\'t do any authorization here, any caller"," can execute this method. In a production contract you would do some authorization here."],"label":"set_code","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":12},"selector":"0x694fb50f"},{"args":[],"default":false,"docs":[" Returns the collection `Id` of the NFT token.",""," This can represents the relationship between tokens/contracts/pallets."],"label":"PSP34::collection_id","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":15},"selector":"0xffa27a5f"},{"args":[],"default":false,"docs":[" Returns current NFT total supply."],"label":"PSP34::total_supply","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":16},"selector":"0x628413fe"},{"args":[{"label":"id","type":{"displayName":["psp34_external","OwnerOfInput1"],"type":10}}],"default":false,"docs":[" Returns the owner of the token if any."],"label":"PSP34::owner_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":17},"selector":"0x1168624d"},{"args":[{"label":"owner","type":{"displayName":["psp34_external","AllowanceInput1"],"type":0}},{"label":"operator","type":{"displayName":["psp34_external","AllowanceInput2"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","AllowanceInput3"],"type":18}}],"default":false,"docs":[" Returns `true` if the operator is approved by the owner to withdraw `id` token."," If `id` is `None`, returns `true` if the operator is approved to withdraw all owner\'s tokens."],"label":"PSP34::allowance","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":19},"selector":"0x4790f55a"},{"args":[{"label":"operator","type":{"displayName":["psp34_external","ApproveInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","ApproveInput2"],"type":18}},{"label":"approved","type":{"displayName":["psp34_external","ApproveInput3"],"type":20}}],"default":false,"docs":[" Approves `operator` to withdraw the `id` token from the caller\'s account."," If `id` is `None` approves or disapproves the operator for all tokens of the caller.",""," On success a `Approval` event is emitted.",""," # Errors",""," Returns `SelfApprove` error if it is self approve.",""," Returns `NotApproved` error if caller is not owner of `id`."],"label":"PSP34::approve","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":21},"selector":"0x1932a8b0"},{"args":[{"label":"owner","type":{"displayName":["psp34_external","BalanceOfInput1"],"type":0}}],"default":false,"docs":[" Returns the balance of the owner.",""," This represents the amount of unique tokens the owner has."],"label":"PSP34::balance_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":24},"selector":"0xcde7e55f"},{"args":[{"label":"to","type":{"displayName":["psp34_external","TransferInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","TransferInput2"],"type":10}},{"label":"data","type":{"displayName":["psp34_external","TransferInput3"],"type":8}}],"default":false,"docs":[" Transfer approved or owned token from caller.",""," On success a `Transfer` event is emitted.",""," # Errors",""," Returns `TokenNotExists` error if `id` does not exist.",""," Returns `NotApproved` error if `from` doesn\'t have allowance for transferring.",""," Returns `SafeTransferCheckFailed` error if `to` doesn\'t accept transfer."],"label":"PSP34::transfer","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":21},"selector":"0x3128d61b"},{"args":[{"label":"account","type":{"displayName":["psp34burnable_external","BurnInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34burnable_external","BurnInput2"],"type":10}}],"default":false,"docs":[" Destroys token with id equal to `id` from `account`",""," Caller must be approved to transfer tokens from `account`"," or to transfer token with `id`"],"label":"PSP34Burnable::burn","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":21},"selector":"0x63c9877a"},{"args":[{"label":"index","type":{"displayName":["psp34enumerable_external","TokenByIndexInput1"],"type":7}}],"default":false,"docs":[" Returns a token `Id` at a given `index` of all the tokens stored by the contract."," Use along with `total_supply` to enumerate all tokens.",""," The start index is zero."],"label":"PSP34Enumerable::token_by_index","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":25},"selector":"0xcd0340d0"},{"args":[{"label":"owner","type":{"displayName":["psp34enumerable_external","OwnersTokenByIndexInput1"],"type":0}},{"label":"index","type":{"displayName":["psp34enumerable_external","OwnersTokenByIndexInput2"],"type":7}}],"default":false,"docs":[" Returns a token `Id` owned by `owner` at a given `index` of its token list."," Use along with `balance_of` to enumerate all of ``owner``\'s tokens.",""," The start index is zero."],"label":"PSP34Enumerable::owners_token_by_index","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":25},"selector":"0x3bcfb511"},{"args":[{"label":"new_owner","type":{"displayName":["ownable_external","TransferOwnershipInput1"],"type":0}}],"default":false,"docs":[" Transfers ownership of the contract to a `new_owner`."," Can only be called by the current owner.",""," On success a `OwnershipTransferred` event is emitted.",""," # Errors",""," Panics with `CallerIsNotOwner` error if caller is not owner.",""," Panics with `NewOwnerIsZero` error if new owner\'s address is zero."],"label":"Ownable::transfer_ownership","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":27},"selector":"0x11f43efd"},{"args":[],"default":false,"docs":[" Returns the address of the current owner."],"label":"Ownable::owner","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":30},"selector":"0x4fa43c8c"},{"args":[],"default":false,"docs":[" Leaves the contract without owner. It will not be possible to call"," owner\'s functions anymore. Can only be called by the current owner.",""," NOTE: Renouncing ownership will leave the contract without an owner,"," thereby removing any functionality that is only available to the owner.",""," On success a `OwnershipTransferred` event is emitted.",""," # Errors",""," Panics with `CallerIsNotOwner` error if caller is not owner"],"label":"Ownable::renounce_ownership","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":27},"selector":"0x5e228753"},{"args":[{"label":"id","type":{"displayName":["psp34metadata_external","GetAttributeInput1"],"type":10}},{"label":"key","type":{"displayName":["psp34metadata_external","GetAttributeInput2"],"type":8}}],"default":false,"docs":[" Returns the attribute of `id` for the given `key`.",""," If `id` is a collection id of the token, it returns attributes for collection."],"label":"PSP34Metadata::get_attribute","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":31},"selector":"0xf19d48d1"},{"args":[{"label":"token_id","type":{"displayName":["pinkmint_external","TokenUriInput1"],"type":6}}],"default":false,"docs":[" Get URI for the token Id."],"label":"PinkMint::token_uri","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":33},"selector":"0x5b903a36"},{"args":[{"label":"to","type":{"displayName":["pinkmint_external","MintInput1"],"type":0}},{"label":"metadata","type":{"displayName":["pinkmint_external","MintInput2"],"type":8}}],"default":false,"docs":[" Mint one or more tokens."],"label":"PinkMint::mint","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":38},"selector":"0x5efd98d7"},{"args":[{"label":"max_supply","type":{"displayName":["pinkmint_external","SetMaxSupplyInput1"],"type":40}}],"default":false,"docs":[" Set max supply of tokens."],"label":"PinkMint::set_max_supply","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":41},"selector":"0x4f50f3ce"},{"args":[],"default":false,"docs":[" Get max supply of tokens."],"label":"PinkMint::max_supply","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":43},"selector":"0x667a6c97"}]},"storage":{"root":{"layout":{"struct":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"leaf":{"key":"0x1cc80634","ty":0}},"root_key":"0x1cc80634"}},"name":"token_owner"},{"layout":{"root":{"layout":{"leaf":{"key":"0x7e3fae6b","ty":3}},"root_key":"0x7e3fae6b"}},"name":"operator_approvals"},{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"enum":{"dispatchKey":"0xca32a240","name":"Id","variants":{"0":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":2}},"name":"0"}],"name":"U8"},"1":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":4}},"name":"0"}],"name":"U16"},"2":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":5}},"name":"0"}],"name":"U32"},"3":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":6}},"name":"0"}],"name":"U64"},"4":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":7}},"name":"0"}],"name":"U128"},"5":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":8}},"name":"0"}],"name":"Bytes"}}}},"root_key":"0xca32a240"}},"name":"enumerable"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Balances"}},"name":"balances"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"psp34"},{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":0}},"name":"owner"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"ownable"},{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"leaf":{"key":"0x9b2d2382","ty":8}},"root_key":"0x9b2d2382"}},"name":"attributes"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"metadata"},{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":6}},"name":"last_token_id"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":6}},"name":"0"}],"name":"Some"}}}},"name":"max_supply"},{"layout":{"leaf":{"key":"0x00000000","ty":7}},"name":"price_per_mint"},{"layout":{"root":{"layout":{"leaf":{"key":"0x63eb77ea","ty":8}},"root_key":"0x63eb77ea"}},"name":"nft_metadata"}],"name":"MintingData"}},"name":"pinkmint"},{"layout":{"root":{"layout":{"leaf":{"key":"0x5ce6c6c4","ty":9}},"root_key":"0x5ce6c6c4"}},"name":"holders"}],"name":"PinkPsp34"}},"root_key":"0x00000000"}},"types":[{"id":0,"type":{"def":{"composite":{"fields":[{"type":1,"typeName":"[u8; 32]"}]}},"path":["ink_primitives","types","AccountId"]}},{"id":1,"type":{"def":{"array":{"len":32,"type":2}}}},{"id":2,"type":{"def":{"primitive":"u8"}}},{"id":3,"type":{"def":{"tuple":[]}}},{"id":4,"type":{"def":{"primitive":"u16"}}},{"id":5,"type":{"def":{"primitive":"u32"}}},{"id":6,"type":{"def":{"primitive":"u64"}}},{"id":7,"type":{"def":{"primitive":"u128"}}},{"id":8,"type":{"def":{"sequence":{"type":2}}}},{"id":9,"type":{"def":{"sequence":{"type":10}}}},{"id":10,"type":{"def":{"variant":{"variants":[{"fields":[{"type":2,"typeName":"u8"}],"index":0,"name":"U8"},{"fields":[{"type":4,"typeName":"u16"}],"index":1,"name":"U16"},{"fields":[{"type":5,"typeName":"u32"}],"index":2,"name":"U32"},{"fields":[{"type":6,"typeName":"u64"}],"index":3,"name":"U64"},{"fields":[{"type":7,"typeName":"u128"}],"index":4,"name":"U128"},{"fields":[{"type":8,"typeName":"Vec<u8>"}],"index":5,"name":"Bytes"}]}},"path":["openbrush_contracts","traits","types","Id"]}},{"id":11,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":0}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":0}],"path":["Option"]}},{"id":12,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":13}],"path":["Result"]}},{"id":13,"type":{"def":{"variant":{"variants":[{"index":1,"name":"CouldNotReadInput"}]}},"path":["ink_primitives","LangError"]}},{"id":14,"type":{"def":{"variant":{"variants":[{"fields":[{"type":9}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":9},{"name":"E","type":13}],"path":["Result"]}},{"id":15,"type":{"def":{"variant":{"variants":[{"fields":[{"type":10}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":10},{"name":"E","type":13}],"path":["Result"]}},{"id":16,"type":{"def":{"variant":{"variants":[{"fields":[{"type":7}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":7},{"name":"E","type":13}],"path":["Result"]}},{"id":17,"type":{"def":{"variant":{"variants":[{"fields":[{"type":11}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":11},{"name":"E","type":13}],"path":["Result"]}},{"id":18,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":10}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":10}],"path":["Option"]}},{"id":19,"type":{"def":{"variant":{"variants":[{"fields":[{"type":20}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":20},{"name":"E","type":13}],"path":["Result"]}},{"id":20,"type":{"def":{"primitive":"bool"}}},{"id":21,"type":{"def":{"variant":{"variants":[{"fields":[{"type":22}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":22},{"name":"E","type":13}],"path":["Result"]}},{"id":22,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":23}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":23}],"path":["Result"]}},{"id":23,"type":{"def":{"variant":{"variants":[{"fields":[{"type":8,"typeName":"String"}],"index":0,"name":"Custom"},{"index":1,"name":"SelfApprove"},{"index":2,"name":"NotApproved"},{"index":3,"name":"TokenExists"},{"index":4,"name":"TokenNotExists"},{"fields":[{"type":8,"typeName":"String"}],"index":5,"name":"SafeTransferCheckFailed"}]}},"path":["openbrush_contracts","traits","errors","psp34","PSP34Error"]}},{"id":24,"type":{"def":{"variant":{"variants":[{"fields":[{"type":5}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":5},{"name":"E","type":13}],"path":["Result"]}},{"id":25,"type":{"def":{"variant":{"variants":[{"fields":[{"type":26}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":26},{"name":"E","type":13}],"path":["Result"]}},{"id":26,"type":{"def":{"variant":{"variants":[{"fields":[{"type":10}],"index":0,"name":"Ok"},{"fields":[{"type":23}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":10},{"name":"E","type":23}],"path":["Result"]}},{"id":27,"type":{"def":{"variant":{"variants":[{"fields":[{"type":28}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":28},{"name":"E","type":13}],"path":["Result"]}},{"id":28,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":29}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":29}],"path":["Result"]}},{"id":29,"type":{"def":{"variant":{"variants":[{"index":0,"name":"CallerIsNotOwner"},{"index":1,"name":"NewOwnerIsZero"}]}},"path":["openbrush_contracts","traits","errors","ownable","OwnableError"]}},{"id":30,"type":{"def":{"variant":{"variants":[{"fields":[{"type":0}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":0},{"name":"E","type":13}],"path":["Result"]}},{"id":31,"type":{"def":{"variant":{"variants":[{"fields":[{"type":32}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":32},{"name":"E","type":13}],"path":["Result"]}},{"id":32,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":8}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":8}],"path":["Option"]}},{"id":33,"type":{"def":{"variant":{"variants":[{"fields":[{"type":34}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":34},{"name":"E","type":13}],"path":["Result"]}},{"id":34,"type":{"def":{"variant":{"variants":[{"fields":[{"type":35}],"index":0,"name":"Ok"},{"fields":[{"type":36}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":35},{"name":"E","type":36}],"path":["Result"]}},{"id":35,"type":{"def":{"primitive":"str"}}},{"id":36,"type":{"def":{"variant":{"variants":[{"fields":[{"type":37,"typeName":"PinkError"}],"index":0,"name":"Pink"},{"fields":[{"type":29,"typeName":"OwnableError"}],"index":1,"name":"Ownable"}]}},"path":["psp34_minting","internal","Error"]}},{"id":37,"type":{"def":{"variant":{"variants":[{"index":0,"name":"CannotMintZeroTokens"},{"index":1,"name":"CollectionIsFull"},{"index":2,"name":"UriNotFound"},{"index":3,"name":"TokenExists"},{"index":4,"name":"TokenNotFound"}]}},"path":["psp34_minting","internal","PinkError"]}},{"id":38,"type":{"def":{"variant":{"variants":[{"fields":[{"type":39}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":39},{"name":"E","type":13}],"path":["Result"]}},{"id":39,"type":{"def":{"variant":{"variants":[{"fields":[{"type":10}],"index":0,"name":"Ok"},{"fields":[{"type":36}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":10},{"name":"E","type":36}],"path":["Result"]}},{"id":40,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":6}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":6}],"path":["Option"]}},{"id":41,"type":{"def":{"variant":{"variants":[{"fields":[{"type":42}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":42},{"name":"E","type":13}],"path":["Result"]}},{"id":42,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":36}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":36}],"path":["Result"]}},{"id":43,"type":{"def":{"variant":{"variants":[{"fields":[{"type":40}],"index":0,"name":"Ok"},{"fields":[{"type":13}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":40},{"name":"E","type":13}],"path":["Result"]}},{"id":44,"type":{"def":{"composite":{"fields":[{"type":1,"typeName":"[u8; 32]"}]}},"path":["ink_primitives","types","Hash"]}},{"id":45,"type":{"def":{"variant":{}},"path":["ink_env","types","NoChainExtension"]}}],"version":"4"}');

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/psp22_abi.json":
/*!**************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/psp22_abi.json ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('{"source":{"hash":"0xdb433067f226daf1542d03cfb9fb40560381fee51ac41a1fe2344cef297f18e9","language":"ink! 4.0.0","compiler":"rustc 1.65.0","build_info":{"build_mode":"Debug","cargo_contract_version":"2.0.0-beta","rust_toolchain":"stable-aarch64-apple-darwin","wasm_opt_settings":{"keep_debug_symbols":false,"optimization_passes":"Z"}}},"contract":{"name":"psp22","version":"0.9.6","authors":["Yonatan Hornstein <yonatan@panoramaswap.com>"]},"spec":{"constructors":[{"args":[{"label":"total_supply","type":{"displayName":["Balance"],"type":0}},{"label":"name","type":{"displayName":["Option"],"type":4}},{"label":"symbol","type":{"displayName":["Option"],"type":4}},{"label":"decimal","type":{"displayName":["u8"],"type":3}}],"docs":[],"label":"new","payable":false,"returnType":{"displayName":["ink_primitives","ConstructorResult"],"type":5},"selector":"0x9bae9d5e"}],"docs":[],"events":[],"lang_error":{"displayName":["ink","LangError"],"type":6},"messages":[{"args":[{"label":"owner","type":{"displayName":["psp22_external","BalanceOfInput1"],"type":7}}],"docs":[" Returns the account Balance for the specified `owner`.",""," Returns `0` if the account is non-existent."],"label":"PSP22::balance_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":9},"selector":"0x6568382f"},{"args":[{"label":"from","type":{"displayName":["psp22_external","TransferFromInput1"],"type":7}},{"label":"to","type":{"displayName":["psp22_external","TransferFromInput2"],"type":7}},{"label":"value","type":{"displayName":["psp22_external","TransferFromInput3"],"type":0}},{"label":"data","type":{"displayName":["psp22_external","TransferFromInput4"],"type":2}}],"docs":[" Transfers `value` tokens on the behalf of `from` to the account `to`"," with additional `data` in unspecified format.",""," This can be used to allow a contract to transfer tokens on ones behalf and/or"," to charge fees in sub-currencies, for example.",""," On success a `Transfer` and `Approval` events are emitted.",""," # Errors",""," Returns `InsufficientAllowance` error if there are not enough tokens allowed"," for the caller to withdraw from `from`.",""," Returns `InsufficientBalance` error if there are not enough tokens on"," the the account Balance of `from`.",""," Returns `ZeroSenderAddress` error if sender\'s address is zero.",""," Returns `ZeroRecipientAddress` error if recipient\'s address is zero."],"label":"PSP22::transfer_from","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":10},"selector":"0x54b3c76e"},{"args":[{"label":"to","type":{"displayName":["psp22_external","TransferInput1"],"type":7}},{"label":"value","type":{"displayName":["psp22_external","TransferInput2"],"type":0}},{"label":"data","type":{"displayName":["psp22_external","TransferInput3"],"type":2}}],"docs":[" Transfers `value` amount of tokens from the caller\'s account to account `to`"," with additional `data` in unspecified format.",""," On success a `Transfer` event is emitted.",""," # Errors",""," Returns `InsufficientBalance` error if there are not enough tokens on"," the caller\'s account Balance.",""," Returns `ZeroSenderAddress` error if sender\'s address is zero.",""," Returns `ZeroRecipientAddress` error if recipient\'s address is zero."],"label":"PSP22::transfer","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":10},"selector":"0xdb20f9f5"},{"args":[{"label":"spender","type":{"displayName":["psp22_external","ApproveInput1"],"type":7}},{"label":"value","type":{"displayName":["psp22_external","ApproveInput2"],"type":0}}],"docs":[" Allows `spender` to withdraw from the caller\'s account multiple times, up to"," the `value` amount.",""," If this function is called again it overwrites the current allowance with `value`.",""," An `Approval` event is emitted.",""," # Errors",""," Returns `ZeroSenderAddress` error if sender\'s address is zero.",""," Returns `ZeroRecipientAddress` error if recipient\'s address is zero."],"label":"PSP22::approve","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":10},"selector":"0xb20f1bbd"},{"args":[],"docs":[" Returns the total token supply."],"label":"PSP22::total_supply","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":9},"selector":"0x162df8c2"},{"args":[{"label":"spender","type":{"displayName":["psp22_external","IncreaseAllowanceInput1"],"type":7}},{"label":"delta_value","type":{"displayName":["psp22_external","IncreaseAllowanceInput2"],"type":0}}],"docs":[" Atomically increases the allowance granted to `spender` by the caller.",""," An `Approval` event is emitted.",""," # Errors",""," Returns `ZeroSenderAddress` error if sender\'s address is zero.",""," Returns `ZeroRecipientAddress` error if recipient\'s address is zero."],"label":"PSP22::increase_allowance","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":10},"selector":"0x96d6b57a"},{"args":[{"label":"spender","type":{"displayName":["psp22_external","DecreaseAllowanceInput1"],"type":7}},{"label":"delta_value","type":{"displayName":["psp22_external","DecreaseAllowanceInput2"],"type":0}}],"docs":[" Atomically decreases the allowance granted to `spender` by the caller.",""," An `Approval` event is emitted.",""," # Errors",""," Returns `InsufficientAllowance` error if there are not enough tokens allowed"," by owner for `spender`.",""," Returns `ZeroSenderAddress` error if sender\'s address is zero.",""," Returns `ZeroRecipientAddress` error if recipient\'s address is zero."],"label":"PSP22::decrease_allowance","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":10},"selector":"0xfecb57d5"},{"args":[{"label":"owner","type":{"displayName":["psp22_external","AllowanceInput1"],"type":7}},{"label":"spender","type":{"displayName":["psp22_external","AllowanceInput2"],"type":7}}],"docs":[" Returns the amount which `spender` is still allowed to withdraw from `owner`.",""," Returns `0` if no allowance has been set `0`."],"label":"PSP22::allowance","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":9},"selector":"0x4d47d921"},{"args":[],"docs":[" Returns the token decimals."],"label":"PSP22Metadata::token_decimals","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0x7271b782"},{"args":[],"docs":[" Returns the token name."],"label":"PSP22Metadata::token_name","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":14},"selector":"0x3d261bd4"},{"args":[],"docs":[" Returns the token symbol."],"label":"PSP22Metadata::token_symbol","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":14},"selector":"0x34205be5"}]},"storage":{"root":{"layout":{"struct":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":0}},"name":"supply"},{"layout":{"root":{"layout":{"leaf":{"key":"0x1d458d3b","ty":0}},"root_key":"0x1d458d3b"}},"name":"balances"},{"layout":{"root":{"layout":{"leaf":{"key":"0x0abd72fb","ty":0}},"root_key":"0x0abd72fb"}},"name":"allowances"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":1}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"psp22"},{"layout":{"struct":{"fields":[{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":2}},"name":"0"}],"name":"Some"}}}},"name":"name"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":2}},"name":"0"}],"name":"Some"}}}},"name":"symbol"},{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"decimals"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":1}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"metadata"}],"name":"Contract"}},"root_key":"0x00000000"}},"types":[{"id":0,"type":{"def":{"primitive":"u128"}}},{"id":1,"type":{"def":{"tuple":[]}}},{"id":2,"type":{"def":{"sequence":{"type":3}}}},{"id":3,"type":{"def":{"primitive":"u8"}}},{"id":4,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":2}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":2}],"path":["Option"]}},{"id":5,"type":{"def":{"variant":{"variants":[{"fields":[{"type":1}],"index":0,"name":"Ok"},{"fields":[{"type":6}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":1},{"name":"E","type":6}],"path":["Result"]}},{"id":6,"type":{"def":{"variant":{"variants":[{"index":1,"name":"CouldNotReadInput"}]}},"path":["ink_primitives","LangError"]}},{"id":7,"type":{"def":{"composite":{"fields":[{"type":8,"typeName":"[u8; 32]"}]}},"path":["ink_primitives","types","AccountId"]}},{"id":8,"type":{"def":{"array":{"len":32,"type":3}}}},{"id":9,"type":{"def":{"variant":{"variants":[{"fields":[{"type":0}],"index":0,"name":"Ok"},{"fields":[{"type":6}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":0},{"name":"E","type":6}],"path":["Result"]}},{"id":10,"type":{"def":{"variant":{"variants":[{"fields":[{"type":11}],"index":0,"name":"Ok"},{"fields":[{"type":6}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":11},{"name":"E","type":6}],"path":["Result"]}},{"id":11,"type":{"def":{"variant":{"variants":[{"fields":[{"type":1}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":1},{"name":"E","type":12}],"path":["Result"]}},{"id":12,"type":{"def":{"variant":{"variants":[{"fields":[{"type":2,"typeName":"String"}],"index":0,"name":"Custom"},{"index":1,"name":"InsufficientBalance"},{"index":2,"name":"InsufficientAllowance"},{"index":3,"name":"ZeroRecipientAddress"},{"index":4,"name":"ZeroSenderAddress"},{"fields":[{"type":2,"typeName":"String"}],"index":5,"name":"SafeTransferCheckFailed"}]}},"path":["openbrush_contracts","traits","errors","psp22","PSP22Error"]}},{"id":13,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":6}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":6}],"path":["Result"]}},{"id":14,"type":{"def":{"variant":{"variants":[{"fields":[{"type":4}],"index":0,"name":"Ok"},{"fields":[{"type":6}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":4},{"name":"E","type":6}],"path":["Result"]}}],"version":"4"}');

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/psp34_abi.json":
/*!**************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/psp34_abi.json ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('{"source":{"hash":"0x7b5a055c557dbac5743e7c70a6cda0db33c9e92fd566d47fce63cad5244363d8","language":"ink! 4.0.1","compiler":"rustc 1.70.0-nightly","build_info":{"build_mode":"Debug","cargo_contract_version":"2.0.0-rc","rust_toolchain":"nightly-x86_64-unknown-linux-gnu","wasm_opt_settings":{"keep_debug_symbols":false,"optimization_passes":"Z"}}},"contract":{"name":"psp34_nft","version":"1.0.0","authors":["ArtZero <admin@artzero.io>"]},"spec":{"constructors":[{"args":[{"label":"contract_owner","type":{"displayName":["AccountId"],"type":0}},{"label":"name","type":{"displayName":["String"],"type":10}},{"label":"symbol","type":{"displayName":["String"],"type":10}}],"docs":[],"label":"new","payable":false,"returnType":{"displayName":["ink_primitives","ConstructorResult"],"type":11},"selector":"0x9bae9d5e"}],"docs":[],"events":[{"args":[{"docs":[],"indexed":true,"label":"from","type":{"displayName":["Option"],"type":31}},{"docs":[],"indexed":true,"label":"to","type":{"displayName":["Option"],"type":31}},{"docs":[],"indexed":false,"label":"id","type":{"displayName":["Id"],"type":26}}],"docs":[" - Specify transfer event."],"label":"Transfer"},{"args":[{"docs":[],"indexed":true,"label":"from","type":{"displayName":["Option"],"type":31}},{"docs":[],"indexed":true,"label":"to","type":{"displayName":["Option"],"type":31}},{"docs":[],"indexed":false,"label":"id","type":{"displayName":["Id"],"type":26}},{"docs":[],"indexed":false,"label":"approved","type":{"displayName":["bool"],"type":9}}],"docs":[" - Specify approval event."],"label":"Approval"}],"lang_error":{"displayName":["ink","LangError"],"type":12},"messages":[{"args":[],"docs":[" This function let NFT Contract Owner to mint a new NFT without providing NFT Traits/Attributes"],"label":"mint","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0xcfdd9aa2"},{"args":[{"label":"metadata","type":{"displayName":["Vec"],"type":20}}],"docs":[" This function let NFT Contract Owner to mint a new NFT with NFT Traits/Attributes"],"label":"mint_with_attributes","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0xf90b8f61"},{"args":[{"label":"new_owner","type":{"displayName":["ownable_external","TransferOwnershipInput1"],"type":0}}],"docs":[" Transfers ownership of the contract to a `new_owner`."," Can only be called by the current owner.",""," On success a `OwnershipTransferred` event is emitted.",""," # Errors",""," Panics with `CallerIsNotOwner` error if caller is not owner.",""," Panics with `NewOwnerIsZero` error if new owner\'s address is zero."],"label":"Ownable::transfer_ownership","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":22},"selector":"0x11f43efd"},{"args":[],"docs":[" Leaves the contract without owner. It will not be possible to call"," owner\'s functions anymore. Can only be called by the current owner.",""," NOTE: Renouncing ownership will leave the contract without an owner,"," thereby removing any functionality that is only available to the owner.",""," On success a `OwnershipTransferred` event is emitted.",""," # Errors",""," Panics with `CallerIsNotOwner` error if caller is not owner"],"label":"Ownable::renounce_ownership","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":22},"selector":"0x5e228753"},{"args":[],"docs":[" Returns the address of the current owner."],"label":"Ownable::owner","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":24},"selector":"0x4fa43c8c"},{"args":[],"docs":[" Returns the collection `Id` of the NFT token.",""," This can represents the relationship between tokens/contracts/pallets."],"label":"PSP34::collection_id","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":25},"selector":"0xffa27a5f"},{"args":[{"label":"to","type":{"displayName":["psp34_external","TransferInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","TransferInput2"],"type":26}},{"label":"data","type":{"displayName":["psp34_external","TransferInput3"],"type":8}}],"docs":[" Transfer approved or owned token from caller.",""," On success a `Transfer` event is emitted.",""," # Errors",""," Returns `TokenNotExists` error if `id` does not exist.",""," Returns `NotApproved` error if `from` doesn\'t have allowance for transferring.",""," Returns `SafeTransferCheckFailed` error if `to` doesn\'t accept transfer."],"label":"PSP34::transfer","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":27},"selector":"0x3128d61b"},{"args":[{"label":"operator","type":{"displayName":["psp34_external","ApproveInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","ApproveInput2"],"type":29}},{"label":"approved","type":{"displayName":["psp34_external","ApproveInput3"],"type":9}}],"docs":[" Approves `operator` to withdraw the `id` token from the caller\'s account."," If `id` is `None` approves or disapproves the operator for all tokens of the caller.",""," On success a `Approval` event is emitted.",""," # Errors",""," Returns `SelfApprove` error if it is self approve.",""," Returns `NotApproved` error if caller is not owner of `id`."],"label":"PSP34::approve","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":27},"selector":"0x1932a8b0"},{"args":[{"label":"id","type":{"displayName":["psp34_external","OwnerOfInput1"],"type":26}}],"docs":[" Returns the owner of the token if any."],"label":"PSP34::owner_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":30},"selector":"0x1168624d"},{"args":[{"label":"owner","type":{"displayName":["psp34_external","AllowanceInput1"],"type":0}},{"label":"operator","type":{"displayName":["psp34_external","AllowanceInput2"],"type":0}},{"label":"id","type":{"displayName":["psp34_external","AllowanceInput3"],"type":29}}],"docs":[" Returns `true` if the operator is approved by the owner to withdraw `id` token."," If `id` is `None`, returns `true` if the operator is approved to withdraw all owner\'s tokens."],"label":"PSP34::allowance","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":32},"selector":"0x4790f55a"},{"args":[],"docs":[" Returns current NFT total supply."],"label":"PSP34::total_supply","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":33},"selector":"0x628413fe"},{"args":[{"label":"owner","type":{"displayName":["psp34_external","BalanceOfInput1"],"type":0}}],"docs":[" Returns the balance of the owner.",""," This represents the amount of unique tokens the owner has."],"label":"PSP34::balance_of","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":34},"selector":"0xcde7e55f"},{"args":[{"label":"id","type":{"displayName":["psp34metadata_external","GetAttributeInput1"],"type":26}},{"label":"key","type":{"displayName":["psp34metadata_external","GetAttributeInput2"],"type":8}}],"docs":[" Returns the attribute of `id` for the given `key`.",""," If `id` is a collection id of the token, it returns attributes for collection."],"label":"PSP34Metadata::get_attribute","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":35},"selector":"0xf19d48d1"},{"args":[{"label":"owner","type":{"displayName":["psp34enumerable_external","OwnersTokenByIndexInput1"],"type":0}},{"label":"index","type":{"displayName":["psp34enumerable_external","OwnersTokenByIndexInput2"],"type":7}}],"docs":[" Returns a token `Id` owned by `owner` at a given `index` of its token list."," Use along with `balance_of` to enumerate all of ``owner``\'s tokens.",""," The start index is zero."],"label":"PSP34Enumerable::owners_token_by_index","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":37},"selector":"0x3bcfb511"},{"args":[{"label":"index","type":{"displayName":["psp34enumerable_external","TokenByIndexInput1"],"type":7}}],"docs":[" Returns a token `Id` at a given `index` of all the tokens stored by the contract."," Use along with `total_supply` to enumerate all tokens.",""," The start index is zero."],"label":"PSP34Enumerable::token_by_index","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":37},"selector":"0xcd0340d0"},{"args":[{"label":"token_id","type":{"displayName":["psp34traits_external","LockInput1"],"type":26}}],"docs":[" This function lets NFT owner to lock their NFT. Once locked, the NFT traits (attributes) can not be changed"],"label":"Psp34Traits::lock","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0xa7245b9b"},{"args":[{"label":"uri","type":{"displayName":["psp34traits_external","SetBaseUriInput1"],"type":10}}],"docs":[" This function sets the baseURI for the NFT contract. Only Contract Owner can perform this function. baseURI is the location of the metadata files if the NFT collection use external source to keep their NFT artwork. ArtZero uses IPFS by default, the baseURI can have format like this: ipfs://<hash_ID>/"],"label":"Psp34Traits::set_base_uri","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0x4de6850b"},{"args":[],"docs":[" This function returns how many NFTs have been locked by its owners"],"label":"Psp34Traits::get_locked_token_count","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":39},"selector":"0x8fe2ce73"},{"args":[{"label":"token_id","type":{"displayName":["psp34traits_external","TokenUriInput1"],"type":6}}],"docs":[" This function return the metadata location of an NFT. The format is baseURI/<token_id>.json"],"label":"Psp34Traits::token_uri","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":40},"selector":"0x249dfd4f"},{"args":[{"label":"token_id","type":{"displayName":["psp34traits_external","SetMultipleAttributesInput1"],"type":26}},{"label":"metadata","type":{"displayName":["psp34traits_external","SetMultipleAttributesInput2"],"type":20}}],"docs":[" This function set the attributes to each NFT. Only Contract Owner can perform this function. The metadata input is an array of [(attribute, value)]. The attributes in ArtZero platform are the NFT traits."],"label":"Psp34Traits::set_multiple_attributes","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0x5bf8416b"},{"args":[{"label":"index","type":{"displayName":["psp34traits_external","GetAttributeNameInput1"],"type":5}}],"docs":[" This function return the attribute name using attribute index. Beacause attributes of an NFT can be set to anything by Contract Owner, AztZero uses this function to get all attributes of an NFT"],"label":"Psp34Traits::get_attribute_name","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":40},"selector":"0xfcfe34de"},{"args":[],"docs":[" This function return the owner of the NFT Contract"],"label":"Psp34Traits::get_owner","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":24},"selector":"0x8e1d8d71"},{"args":[{"label":"token_id","type":{"displayName":["psp34traits_external","GetAttributesInput1"],"type":26}},{"label":"attributes","type":{"displayName":["psp34traits_external","GetAttributesInput2"],"type":41}}],"docs":[" This function returns all available attributes of each NFT"],"label":"Psp34Traits::get_attributes","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":42},"selector":"0x18209102"},{"args":[{"label":"token_id","type":{"displayName":["psp34traits_external","IsLockedNftInput1"],"type":26}}],"docs":[" This function check if an NFT is locked or not"],"label":"Psp34Traits::is_locked_nft","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":32},"selector":"0x59271420"},{"args":[],"docs":[" This function return how many unique attributes in the contract"],"label":"Psp34Traits::get_attribute_count","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":34},"selector":"0x61c50d69"},{"args":[],"docs":[" This function return the latest token ID, everytime new NFT is mint, last_token_id is increased by 1 in mint function. Note: This is not the same as the total supply return by the psp34 function as NFT can be burnt."],"label":"Psp34Traits::get_last_token_id","mutates":false,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":39},"selector":"0x6f315836"},{"args":[{"label":"nft_contract_address","type":{"displayName":["admintrait_external","TranferNftInput1"],"type":0}},{"label":"token_id","type":{"displayName":["admintrait_external","TranferNftInput2"],"type":26}},{"label":"receiver","type":{"displayName":["admintrait_external","TranferNftInput3"],"type":0}}],"docs":[" This function allow contract owner withdraw NFT to an account in case there is any NFT sent to contract by mistake"],"label":"AdminTrait::tranfer_nft","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0xed1e1dfa"},{"args":[{"label":"value","type":{"displayName":["admintrait_external","WithdrawFeeInput1"],"type":7}},{"label":"receiver","type":{"displayName":["admintrait_external","WithdrawFeeInput2"],"type":0}}],"docs":[" This function allows contract owner to withdraw contract balance to his account."],"label":"AdminTrait::withdraw_fee","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0x07573e99"},{"args":[{"label":"psp22_contract_address","type":{"displayName":["admintrait_external","TranferPsp22Input1"],"type":0}},{"label":"amount","type":{"displayName":["admintrait_external","TranferPsp22Input2"],"type":7}},{"label":"receiver","type":{"displayName":["admintrait_external","TranferPsp22Input3"],"type":0}}],"docs":[" This function allow contract owner withdraw PSP22 to an account in case there is any token sent to contract by mistake"],"label":"AdminTrait::tranfer_psp22","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":13},"selector":"0xd9aad284"},{"args":[{"label":"account","type":{"displayName":["psp34burnable_external","BurnInput1"],"type":0}},{"label":"id","type":{"displayName":["psp34burnable_external","BurnInput2"],"type":26}}],"docs":[],"label":"PSP34Burnable::burn","mutates":true,"payable":false,"returnType":{"displayName":["ink","MessageResult"],"type":27},"selector":"0x63c9877a"}]},"storage":{"root":{"layout":{"struct":{"fields":[{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"leaf":{"key":"0x1cc80634","ty":0}},"root_key":"0x1cc80634"}},"name":"token_owner"},{"layout":{"root":{"layout":{"leaf":{"key":"0x7e3fae6b","ty":3}},"root_key":"0x7e3fae6b"}},"name":"operator_approvals"},{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"enum":{"dispatchKey":"0xca32a240","name":"Id","variants":{"0":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":2}},"name":"0"}],"name":"U8"},"1":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":4}},"name":"0"}],"name":"U16"},"2":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":5}},"name":"0"}],"name":"U32"},"3":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":6}},"name":"0"}],"name":"U64"},"4":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":7}},"name":"0"}],"name":"U128"},"5":{"fields":[{"layout":{"leaf":{"key":"0xca32a240","ty":8}},"name":"0"}],"name":"Bytes"}}}},"root_key":"0xca32a240"}},"name":"enumerable"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Balances"}},"name":"balances"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"psp34"},{"layout":{"struct":{"fields":[{"layout":{"root":{"layout":{"leaf":{"key":"0x9b2d2382","ty":8}},"root_key":"0x9b2d2382"}},"name":"attributes"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"metadata"},{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":0}},"name":"owner"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"ownable"},{"layout":{"struct":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":6}},"name":"last_token_id"},{"layout":{"leaf":{"key":"0x00000000","ty":5}},"name":"attribute_count"},{"layout":{"root":{"layout":{"leaf":{"key":"0x90fe8c00","ty":8}},"root_key":"0x90fe8c00"}},"name":"attribute_names"},{"layout":{"root":{"layout":{"leaf":{"key":"0x385e99c1","ty":9}},"root_key":"0x385e99c1"}},"name":"is_attribute"},{"layout":{"root":{"layout":{"leaf":{"key":"0x89dbb226","ty":9}},"root_key":"0x89dbb226"}},"name":"locked_tokens"},{"layout":{"leaf":{"key":"0x00000000","ty":6}},"name":"locked_token_count"},{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Manager"}},"name":"manager"},{"layout":{"struct":{"fields":[{"layout":{"enum":{"dispatchKey":"0x00000000","name":"Option","variants":{"0":{"fields":[],"name":"None"},"1":{"fields":[{"layout":{"leaf":{"key":"0x00000000","ty":3}},"name":"0"}],"name":"Some"}}}},"name":"_reserved"}],"name":"Data"}},"name":"admin_data"}],"name":"Psp34Nft"}},"root_key":"0x00000000"}},"types":[{"id":0,"type":{"def":{"composite":{"fields":[{"type":1,"typeName":"[u8; 32]"}]}},"path":["ink_primitives","types","AccountId"]}},{"id":1,"type":{"def":{"array":{"len":32,"type":2}}}},{"id":2,"type":{"def":{"primitive":"u8"}}},{"id":3,"type":{"def":{"tuple":[]}}},{"id":4,"type":{"def":{"primitive":"u16"}}},{"id":5,"type":{"def":{"primitive":"u32"}}},{"id":6,"type":{"def":{"primitive":"u64"}}},{"id":7,"type":{"def":{"primitive":"u128"}}},{"id":8,"type":{"def":{"sequence":{"type":2}}}},{"id":9,"type":{"def":{"primitive":"bool"}}},{"id":10,"type":{"def":{"primitive":"str"}}},{"id":11,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":12}],"path":["Result"]}},{"id":12,"type":{"def":{"variant":{"variants":[{"index":1,"name":"CouldNotReadInput"}]}},"path":["ink_primitives","LangError"]}},{"id":13,"type":{"def":{"variant":{"variants":[{"fields":[{"type":14}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":14},{"name":"E","type":12}],"path":["Result"]}},{"id":14,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":15}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":15}],"path":["Result"]}},{"id":15,"type":{"def":{"variant":{"variants":[{"fields":[{"type":10,"typeName":"String"}],"index":0,"name":"Custom"},{"index":1,"name":"OnlyOwner"},{"index":2,"name":"OnlyAdmin"},{"index":3,"name":"InvalidCaller"},{"index":4,"name":"InvalidFee"},{"index":5,"name":"TokenOwnerNotMatch"},{"index":6,"name":"NotApproved"},{"index":7,"name":"CannotTransfer"},{"index":8,"name":"CannotMint"},{"index":9,"name":"NotPublicMint"},{"index":10,"name":"NotEnoughBalance"},{"index":11,"name":"MaxSupply"},{"index":12,"name":"AlreadyInit"},{"index":13,"name":"NotOwner"},{"index":14,"name":"NotTokenOwner"},{"index":15,"name":"ProjectNotExist"},{"index":16,"name":"ProjectOwnerAndAdmin"},{"index":17,"name":"InvalidStartTimeAndEndTime"},{"index":18,"name":"InvalidPhaseCount"},{"index":19,"name":"CollectionOwnerAndAdmin"},{"index":20,"name":"CollectionNotActive"},{"index":21,"name":"CollectionNotExist"},{"index":22,"name":"InvalidInput"},{"index":23,"name":"InvalidType"},{"index":24,"name":"ClaimedAll"},{"index":25,"name":"TokenLimitReached"},{"index":26,"name":"UpdatePhase"},{"index":27,"name":"PhaseNotExist"},{"index":28,"name":"PhaseExpired"},{"index":29,"name":"PhaseDeactivate"},{"index":30,"name":"WhitelistNotExist"},{"index":31,"name":"WithdrawFeeError"},{"index":32,"name":"WithdrawNFTError"},{"index":33,"name":"WithdrawPSP22Error"},{"index":34,"name":"NotListed"},{"index":35,"name":"BidAlreadyExist"},{"index":36,"name":"BidNotExist"},{"index":37,"name":"NotInMarket"},{"index":38,"name":"NotForSale"},{"index":39,"name":"NotInSaleList"},{"index":40,"name":"InvalidBidLength"},{"index":41,"name":"InvalidCollectionOwner"},{"index":42,"name":"InvalidTime"},{"index":43,"name":"RewardStarted"},{"index":44,"name":"RewardNotStarted"},{"index":45,"name":"RewardNotAdded"},{"index":46,"name":"ClaimMustBeFalse"},{"index":47,"name":"HoldAmountBidderNotExist"},{"fields":[{"type":16,"typeName":"OwnableError"}],"index":48,"name":"OwnableError"},{"fields":[{"type":17,"typeName":"AccessControlError"}],"index":49,"name":"AccessControlError"},{"fields":[{"type":18,"typeName":"PSP22Error"}],"index":50,"name":"PSP22Error"},{"fields":[{"type":19,"typeName":"PSP34Error"}],"index":51,"name":"PSP34Error"},{"index":52,"name":"CheckedOperations"}]}},"path":["artzero_project","traits","error","Error"]}},{"id":16,"type":{"def":{"variant":{"variants":[{"index":0,"name":"CallerIsNotOwner"},{"index":1,"name":"NewOwnerIsZero"}]}},"path":["openbrush_contracts","traits","errors","ownable","OwnableError"]}},{"id":17,"type":{"def":{"variant":{"variants":[{"index":0,"name":"InvalidCaller"},{"index":1,"name":"MissingRole"},{"index":2,"name":"RoleRedundant"}]}},"path":["openbrush_contracts","traits","errors","access_control","AccessControlError"]}},{"id":18,"type":{"def":{"variant":{"variants":[{"fields":[{"type":8,"typeName":"String"}],"index":0,"name":"Custom"},{"index":1,"name":"InsufficientBalance"},{"index":2,"name":"InsufficientAllowance"},{"index":3,"name":"ZeroRecipientAddress"},{"index":4,"name":"ZeroSenderAddress"},{"fields":[{"type":8,"typeName":"String"}],"index":5,"name":"SafeTransferCheckFailed"}]}},"path":["openbrush_contracts","traits","errors","psp22","PSP22Error"]}},{"id":19,"type":{"def":{"variant":{"variants":[{"fields":[{"type":8,"typeName":"String"}],"index":0,"name":"Custom"},{"index":1,"name":"SelfApprove"},{"index":2,"name":"NotApproved"},{"index":3,"name":"TokenExists"},{"index":4,"name":"TokenNotExists"},{"fields":[{"type":8,"typeName":"String"}],"index":5,"name":"SafeTransferCheckFailed"}]}},"path":["openbrush_contracts","traits","errors","psp34","PSP34Error"]}},{"id":20,"type":{"def":{"sequence":{"type":21}}}},{"id":21,"type":{"def":{"tuple":[10,10]}}},{"id":22,"type":{"def":{"variant":{"variants":[{"fields":[{"type":23}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":23},{"name":"E","type":12}],"path":["Result"]}},{"id":23,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":16}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":16}],"path":["Result"]}},{"id":24,"type":{"def":{"variant":{"variants":[{"fields":[{"type":0}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":0},{"name":"E","type":12}],"path":["Result"]}},{"id":25,"type":{"def":{"variant":{"variants":[{"fields":[{"type":26}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":26},{"name":"E","type":12}],"path":["Result"]}},{"id":26,"type":{"def":{"variant":{"variants":[{"fields":[{"type":2,"typeName":"u8"}],"index":0,"name":"U8"},{"fields":[{"type":4,"typeName":"u16"}],"index":1,"name":"U16"},{"fields":[{"type":5,"typeName":"u32"}],"index":2,"name":"U32"},{"fields":[{"type":6,"typeName":"u64"}],"index":3,"name":"U64"},{"fields":[{"type":7,"typeName":"u128"}],"index":4,"name":"U128"},{"fields":[{"type":8,"typeName":"Vec<u8>"}],"index":5,"name":"Bytes"}]}},"path":["openbrush_contracts","traits","types","Id"]}},{"id":27,"type":{"def":{"variant":{"variants":[{"fields":[{"type":28}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":28},{"name":"E","type":12}],"path":["Result"]}},{"id":28,"type":{"def":{"variant":{"variants":[{"fields":[{"type":3}],"index":0,"name":"Ok"},{"fields":[{"type":19}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":3},{"name":"E","type":19}],"path":["Result"]}},{"id":29,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":26}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":26}],"path":["Option"]}},{"id":30,"type":{"def":{"variant":{"variants":[{"fields":[{"type":31}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":31},{"name":"E","type":12}],"path":["Result"]}},{"id":31,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":0}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":0}],"path":["Option"]}},{"id":32,"type":{"def":{"variant":{"variants":[{"fields":[{"type":9}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":9},{"name":"E","type":12}],"path":["Result"]}},{"id":33,"type":{"def":{"variant":{"variants":[{"fields":[{"type":7}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":7},{"name":"E","type":12}],"path":["Result"]}},{"id":34,"type":{"def":{"variant":{"variants":[{"fields":[{"type":5}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":5},{"name":"E","type":12}],"path":["Result"]}},{"id":35,"type":{"def":{"variant":{"variants":[{"fields":[{"type":36}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":36},{"name":"E","type":12}],"path":["Result"]}},{"id":36,"type":{"def":{"variant":{"variants":[{"index":0,"name":"None"},{"fields":[{"type":8}],"index":1,"name":"Some"}]}},"params":[{"name":"T","type":8}],"path":["Option"]}},{"id":37,"type":{"def":{"variant":{"variants":[{"fields":[{"type":38}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":38},{"name":"E","type":12}],"path":["Result"]}},{"id":38,"type":{"def":{"variant":{"variants":[{"fields":[{"type":26}],"index":0,"name":"Ok"},{"fields":[{"type":19}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":26},{"name":"E","type":19}],"path":["Result"]}},{"id":39,"type":{"def":{"variant":{"variants":[{"fields":[{"type":6}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":6},{"name":"E","type":12}],"path":["Result"]}},{"id":40,"type":{"def":{"variant":{"variants":[{"fields":[{"type":10}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":10},{"name":"E","type":12}],"path":["Result"]}},{"id":41,"type":{"def":{"sequence":{"type":10}}}},{"id":42,"type":{"def":{"variant":{"variants":[{"fields":[{"type":41}],"index":0,"name":"Ok"},{"fields":[{"type":12}],"index":1,"name":"Err"}]}},"params":[{"name":"T","type":41},{"name":"E","type":12}],"path":["Result"]}}],"version":"4"}');

/***/ }),

/***/ "../extension-base/src/services/chain-service/helper/test_erc721_abi.json":
/*!********************************************************************************!*\
  !*** ../extension-base/src/services/chain-service/helper/test_erc721_abi.json ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_owner","type":"address"},{"indexed":true,"internalType":"address","name":"_approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_owner","type":"address"},{"indexed":true,"internalType":"address","name":"_operator","type":"address"},{"indexed":false,"internalType":"bool","name":"_approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_from","type":"address"},{"indexed":true,"internalType":"address","name":"_to","type":"address"},{"indexed":true,"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"_approved","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"},{"internalType":"address","name":"_operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_operator","type":"address"},{"internalType":"bool","name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"_interfaceID","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"_symbol","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"},{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]');

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/amd options */
/******/ 	(() => {
/******/ 		__webpack_require__.amdO = {};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/async module */
/******/ 	(() => {
/******/ 		var webpackQueues = typeof Symbol === "function" ? Symbol("webpack queues") : "__webpack_queues__";
/******/ 		var webpackExports = typeof Symbol === "function" ? Symbol("webpack exports") : "__webpack_exports__";
/******/ 		var webpackError = typeof Symbol === "function" ? Symbol("webpack error") : "__webpack_error__";
/******/ 		var resolveQueue = (queue) => {
/******/ 			if(queue && !queue.d) {
/******/ 				queue.d = 1;
/******/ 				queue.forEach((fn) => (fn.r--));
/******/ 				queue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));
/******/ 			}
/******/ 		}
/******/ 		var wrapDeps = (deps) => (deps.map((dep) => {
/******/ 			if(dep !== null && typeof dep === "object") {
/******/ 				if(dep[webpackQueues]) return dep;
/******/ 				if(dep.then) {
/******/ 					var queue = [];
/******/ 					queue.d = 0;
/******/ 					dep.then((r) => {
/******/ 						obj[webpackExports] = r;
/******/ 						resolveQueue(queue);
/******/ 					}, (e) => {
/******/ 						obj[webpackError] = e;
/******/ 						resolveQueue(queue);
/******/ 					});
/******/ 					var obj = {};
/******/ 					obj[webpackQueues] = (fn) => (fn(queue));
/******/ 					return obj;
/******/ 				}
/******/ 			}
/******/ 			var ret = {};
/******/ 			ret[webpackQueues] = x => {};
/******/ 			ret[webpackExports] = dep;
/******/ 			return ret;
/******/ 		}));
/******/ 		__webpack_require__.a = (module, body, hasAwait) => {
/******/ 			var queue;
/******/ 			hasAwait && ((queue = []).d = 1);
/******/ 			var depQueues = new Set();
/******/ 			var exports = module.exports;
/******/ 			var currentDeps;
/******/ 			var outerResolve;
/******/ 			var reject;
/******/ 			var promise = new Promise((resolve, rej) => {
/******/ 				reject = rej;
/******/ 				outerResolve = resolve;
/******/ 			});
/******/ 			promise[webpackExports] = exports;
/******/ 			promise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise["catch"](x => {}));
/******/ 			module.exports = promise;
/******/ 			body((deps) => {
/******/ 				currentDeps = wrapDeps(deps);
/******/ 				var fn;
/******/ 				var getResult = () => (currentDeps.map((d) => {
/******/ 					if(d[webpackError]) throw d[webpackError];
/******/ 					return d[webpackExports];
/******/ 				}))
/******/ 				var promise = new Promise((resolve) => {
/******/ 					fn = () => (resolve(getResult));
/******/ 					fn.r = 0;
/******/ 					var fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));
/******/ 					currentDeps.map((dep) => (dep[webpackQueues](fnQueue)));
/******/ 				});
/******/ 				return fn.r ? promise : getResult();
/******/ 			}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));
/******/ 			queue && (queue.d = 0);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/harmony module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.hmd = (module) => {
/******/ 			module = Object.create(module);
/******/ 			if (!module.children) module.children = [];
/******/ 			Object.defineProperty(module, 'exports', {
/******/ 				enumerable: true,
/******/ 				set: () => {
/******/ 					throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);
/******/ 				}
/******/ 			});
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/wasm loading */
/******/ 	(() => {
/******/ 		__webpack_require__.v = (exports, wasmModuleId, wasmModuleHash, importsObj) => {
/******/ 			var req = fetch(__webpack_require__.p + "" + wasmModuleHash + ".module.wasm");
/******/ 			if (typeof WebAssembly.instantiateStreaming === 'function') {
/******/ 				return WebAssembly.instantiateStreaming(req, importsObj)
/******/ 					.then((res) => (Object.assign(exports, res.instance.exports)));
/******/ 			}
/******/ 			return req
/******/ 				.then((x) => (x.arrayBuffer()))
/******/ 				.then((bytes) => (WebAssembly.instantiate(bytes, importsObj)))
/******/ 				.then((res) => (Object.assign(exports, res.instance.exports)));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"background": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = (typeof self !== 'undefined' ? self : this)["webpackChunk_subwallet_extension_koni"] = (typeof self !== 'undefined' ? self : this)["webpackChunk_subwallet_extension_koni"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	__webpack_require__.O(undefined, ["vendors-node_modules_base64-js_index_js-node_modules_azns_resolver-core_dist_index_js-node_mo-96d1be","vendors-node_modules_bn_js_lib_bn_js-node_modules_buffer_index_js-node_modules_cross-fetch_di-144390","vendors-node_modules_ieee754_index_js-node_modules_js-sha3_src_sha3_js-node_modules_i18next_d-05ffb7","vendors-node_modules_lodash_isequal_index_js-node_modules_loglevel_lib_loglevel_js-node_modul-320412","vendors-node_modules_rxjs_dist_esm5_internal_BehaviorSubject_js-node_modules_rxjs_dist_esm5_i-aed42a","vendors-node_modules_walletconnect_utils_dist_index_es_js-node_modules_split-on-first_index_j-cebd78","vendors-node_modules_acala-network_api_index_js-node_modules_asn1_js_lib_asn1_js-node_modules-6f2e08","vendors-node_modules_crc-32_crc32_js-node_modules_create-ecdh_browser_js-node_modules_create--5f5b34","vendors-node_modules_crypto-browserify_index_js-node_modules_define-properties_index_js-node_-66cdbd","vendors-node_modules_diffie-hellman_browser_js-node_modules_elliptic_lib_elliptic_js","vendors-node_modules_ethereumjs_common_dist_browser_index_js-node_modules_es6-object-assign_i-a299a8","vendors-node_modules_evp_bytestokey_index_js-node_modules_for-each_index_js-node_modules_even-a24417","vendors-node_modules_gopd_index_js","vendors-node_modules_interlay_interbtc-types_build_index_js-node_modules_json-rpc-tools_utils-80db67","vendors-node_modules_keccak_js_js-node_modules_lodash_merge_index_js","vendors-node_modules_oak-foundation_types_index_js-node_modules_open-web3_orml-api-derive_ind-1a0e73","vendors-node_modules_protobufjs_index_js-node_modules_public-encrypt_browser_js-node_modules_-af6330","vendors-node_modules_polkadot_apps-config_api_typesBundle_js","vendors-node_modules_smoldot_dist_mjs_base64_js-node_modules_smoldot_dist_mjs_client_js","vendors-node_modules_smoldot_dist_mjs_index-browser_js","vendors-node_modules_smoldot_dist_mjs_instance_autogen_wasm0_js","vendors-node_modules_smoldot_dist_mjs_instance_autogen_wasm_js","vendors-node_modules_smoldot_dist_mjs_instance_bindings-smoldot-light_js-node_modules_smoldot-c899be","vendors-node_modules_smoldot_dist_mjs_instance_instance_js","vendors-node_modules_stablelib_ed25519_lib_ed25519_js-node_modules_stream-browserify_index_js-316b51","vendors-node_modules_tweetnacl-util_nacl-util_js-node_modules_utf8_utf8_js-node_modules_subst-84f193","vendors-node_modules_walletconnect_sign-client_dist_index_es_js-node_modules_wry_context_lib_-d74596","default-extension-base_src_koni_api_dotsama_domain_ts-extension-base_src_koni_api_staking_bon-7a7103"], () => (__webpack_require__("./src/installation.ts")))
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendors-node_modules_base64-js_index_js-node_modules_azns_resolver-core_dist_index_js-node_mo-96d1be","vendors-node_modules_bn_js_lib_bn_js-node_modules_buffer_index_js-node_modules_cross-fetch_di-144390","vendors-node_modules_ieee754_index_js-node_modules_js-sha3_src_sha3_js-node_modules_i18next_d-05ffb7","vendors-node_modules_lodash_isequal_index_js-node_modules_loglevel_lib_loglevel_js-node_modul-320412","vendors-node_modules_rxjs_dist_esm5_internal_BehaviorSubject_js-node_modules_rxjs_dist_esm5_i-aed42a","vendors-node_modules_walletconnect_utils_dist_index_es_js-node_modules_split-on-first_index_j-cebd78","vendors-node_modules_acala-network_api_index_js-node_modules_asn1_js_lib_asn1_js-node_modules-6f2e08","vendors-node_modules_crc-32_crc32_js-node_modules_create-ecdh_browser_js-node_modules_create--5f5b34","vendors-node_modules_crypto-browserify_index_js-node_modules_define-properties_index_js-node_-66cdbd","vendors-node_modules_diffie-hellman_browser_js-node_modules_elliptic_lib_elliptic_js","vendors-node_modules_ethereumjs_common_dist_browser_index_js-node_modules_es6-object-assign_i-a299a8","vendors-node_modules_evp_bytestokey_index_js-node_modules_for-each_index_js-node_modules_even-a24417","vendors-node_modules_gopd_index_js","vendors-node_modules_interlay_interbtc-types_build_index_js-node_modules_json-rpc-tools_utils-80db67","vendors-node_modules_keccak_js_js-node_modules_lodash_merge_index_js","vendors-node_modules_oak-foundation_types_index_js-node_modules_open-web3_orml-api-derive_ind-1a0e73","vendors-node_modules_protobufjs_index_js-node_modules_public-encrypt_browser_js-node_modules_-af6330","vendors-node_modules_polkadot_apps-config_api_typesBundle_js","vendors-node_modules_smoldot_dist_mjs_base64_js-node_modules_smoldot_dist_mjs_client_js","vendors-node_modules_smoldot_dist_mjs_index-browser_js","vendors-node_modules_smoldot_dist_mjs_instance_autogen_wasm0_js","vendors-node_modules_smoldot_dist_mjs_instance_autogen_wasm_js","vendors-node_modules_smoldot_dist_mjs_instance_bindings-smoldot-light_js-node_modules_smoldot-c899be","vendors-node_modules_smoldot_dist_mjs_instance_instance_js","vendors-node_modules_stablelib_ed25519_lib_ed25519_js-node_modules_stream-browserify_index_js-316b51","vendors-node_modules_tweetnacl-util_nacl-util_js-node_modules_utf8_utf8_js-node_modules_subst-84f193","vendors-node_modules_walletconnect_sign-client_dist_index_es_js-node_modules_wry_context_lib_-d74596","default-extension-base_src_koni_api_dotsama_domain_ts-extension-base_src_koni_api_staking_bon-7a7103"], () => (__webpack_require__("./src/background.ts")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OztXQUVBOztXQUVBOztXQUVBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLE1BQU0scUJBQXFCO1dBQzNCO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7V0FDQTtXQUNBOzs7OztVRWhEQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9iYWNrZ3JvdW5kL1JlcXVlc3RCeXRlc1NpZ24udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvYmFja2dyb3VuZC9SZXF1ZXN0RXh0cmluc2ljU2lnbi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9iYWNrZ3JvdW5kL2Vycm9ycy9CYWxhbmNlRXJyb3IudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvYmFja2dyb3VuZC9lcnJvcnMvRXZtUHJvdmlkZXJFcnJvci50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9iYWNrZ3JvdW5kL2Vycm9ycy9TV0Vycm9yLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2JhY2tncm91bmQvZXJyb3JzL1RyYW5zYWN0aW9uRXJyb3IudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvYmFja2dyb3VuZC9oYW5kbGVycy9FeHRlbnNpb24udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvYmFja2dyb3VuZC9oYW5kbGVycy9oZWxwZXJzLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2JhY2tncm91bmQvaGFuZGxlcnMvc3Vic2NyaXB0aW9ucy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9iYWNrZ3JvdW5kL3dhcm5pbmdzL1NXV2FybmluZy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9iYWNrZ3JvdW5kL3dhcm5pbmdzL1RyYW5zYWN0aW9uV2FybmluZy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS9kb3RzYW1hL2JhbGFuY2UudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvZG90c2FtYS9jcm93ZGxvYW4udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvZG90c2FtYS9wYXJzZVRyYW5zYWN0aW9uLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL2RvdHNhbWEvdHJhbnNmZXIudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvZG90c2FtYS90eXBlUmVnaXN0cnkudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvbmZ0L2FjYWxhX25mdC9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS9uZnQvYml0LmNvdW50cnkvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvbmZ0L2NvbmZpZy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS9uZnQvZXZtX25mdC9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS9uZnQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvbmZ0L2thcnVyYV9uZnQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvbmZ0L25mdC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS9uZnQvcm1ya19uZnQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvbmZ0L3N0YXRlbWluZV9uZnQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvbmZ0L3N0YXRlbWludF9uZnQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvbmZ0L3RyYW5zZmVyLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL25mdC91bmlxdWVfbmZ0L2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL25mdC91bmlxdWVfbmZ0L3Byb3RvYnVmLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL25mdC92YXJhX25mdC9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS9uZnQvd2FzbV9uZnQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvbmZ0L3dhc21fbmZ0L3V0aWxzLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL3N0YWtpbmcvYm9uZGluZy9hbXBsaXR1ZGUudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvc3Rha2luZy9ib25kaW5nL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL3N0YWtpbmcvYm9uZGluZy9wYXJhQ2hhaW4udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvc3Rha2luZy9ib25kaW5nL3JlbGF5Q2hhaW4udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvc3Rha2luZy9jb25maWcudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvc3Rha2luZy9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS9zdGFraW5nL3BhcmFDaGFpbi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS9zdGFraW5nL3JlbGF5Q2hhaW4udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvc3Rha2luZy9zdWJzcXVpZFN0YWtpbmcudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvdG9rZW5zL2V2bS9iYWxhbmNlLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL3Rva2Vucy9ldm0vdHJhbnNmZXIudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkvdG9rZW5zL2V2bS93ZWIzLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL3Rva2Vucy93YXNtL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL3Rva2Vucy93YXNtL3V0aWxzLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL3hjbS9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2FwaS94Y20vcG9sa2Fkb3RYY20udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9hcGkveGNtL3V0aWxzLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL3hjbS94VG9rZW5zLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYXBpL3hjbS94Y21QYWxsZXQudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9iYWNrZ3JvdW5kL2Nyb24udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9iYWNrZ3JvdW5kL2hhbmRsZXJzL0V4dGVuc2lvbi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMvTW9iaWxlLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL2tvbmkvYmFja2dyb3VuZC9oYW5kbGVycy9TdGF0ZS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMvVGFicy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMva29uaS9iYWNrZ3JvdW5kL3N1YnNjcmlwdGlvbi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9iYWxhbmNlLXNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvYmFzZS90eXBlcy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2N1c3RvbS10b2tlbnMvQXNzZXRMb2dvTWFwLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY3VzdG9tLXRva2Vucy9Bc3NldFJlZi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2N1c3RvbS10b2tlbnMvQ2hhaW5Bc3NldC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2N1c3RvbS10b2tlbnMvQ2hhaW5JbmZvLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY3VzdG9tLXRva2Vucy9DaGFpbkxvZ29NYXAudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvY2hhaW4tc2VydmljZS9jdXN0b20tdG9rZW5zL011bHRpQ2hhaW5Bc3NldC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2hhbmRsZXIvQWJzdHJhY3RDaGFpbkhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL0V2bUFwaS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2hhbmRsZXIvRXZtQ2hhaW5IYW5kbGVyLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaGFuZGxlci9TdWJzdHJhdGVBcGkudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL1N1YnN0cmF0ZUNoYWluSGFuZGxlci50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2hhbmRsZXIvbGlnaHQtY2xpZW50L2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaGFuZGxlci9tYW50YS9NYW50YVByaXZhdGVIYW5kbGVyLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaGVscGVyL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvZXZlbnQtc2VydmljZS9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9ldmVudC1zZXJ2aWNlL3R5cGVzLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2hpc3Rvcnktc2VydmljZS9jb25zdGFudHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvaGlzdG9yeS1zZXJ2aWNlL2hlbHBlcnMvcmVjb3Zlckhpc3RvcnlTdGF0dXMudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvaGlzdG9yeS1zZXJ2aWNlL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2hpc3Rvcnktc2VydmljZS9zdWJzcXVpZC1tdWx0aS1jaGFpbi1oaXN0b3J5LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL2tleXJpbmctc2VydmljZS9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9taWdyYXRpb24tc2VydmljZS9CYXNlLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL3NjcmlwdHMvQXV0b0VuYWJsZUNoYWluc1Rva2Vucy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9taWdyYXRpb24tc2VydmljZS9zY3JpcHRzL0RlbGV0ZUNoYWluLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL3NjcmlwdHMvRW5hYmxlQ2hhaW4udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9FbmFibGVWYXJhQ2hhaW4udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlQXV0aFVybHMudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlQXV0b0xvY2sudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlQ2hhaW5QYXRyb2wudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlRXRoUHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlSW1wb3J0ZWRUb2tlbi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9taWdyYXRpb24tc2VydmljZS9zY3JpcHRzL01pZ3JhdGVMZWRnZXJBY2NvdW50LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL3NjcmlwdHMvTWlncmF0ZU5ldHdvcmtTZXR0aW5ncy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9taWdyYXRpb24tc2VydmljZS9zY3JpcHRzL01pZ3JhdGVQaW9uZWVyUHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlUHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlU2V0dGluZ3MudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlVG9rZW5EZWNpbWFscy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9taWdyYXRpb24tc2VydmljZS9zY3JpcHRzL01pZ3JhdGVUcmFuc2FjdGlvbkhpc3RvcnkudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2Uvc2NyaXB0cy9NaWdyYXRlV2FsbGV0UmVmZXJlbmNlLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL3NjcmlwdHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvbm90aWZpY2F0aW9uLXNlcnZpY2UvTm90aWZpY2F0aW9uU2VydmljZS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9wcmljZS1zZXJ2aWNlL2NvaW5nZWNrby50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9wcmljZS1zZXJ2aWNlL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlL2hhbmRsZXIvQXV0aFJlcXVlc3RIYW5kbGVyLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS9oYW5kbGVyL0Nvbm5lY3RXQ1JlcXVlc3RIYW5kbGVyLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS9oYW5kbGVyL0V2bVJlcXVlc3RIYW5kbGVyLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS9oYW5kbGVyL01ldGFkYXRhUmVxdWVzdEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlL2hhbmRsZXIvTm90U3VwcG9ydFdDUmVxdWVzdEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlL2hhbmRsZXIvUG9wdXBIYW5kbGVyLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS9oYW5kbGVyL1N1YnN0cmF0ZVJlcXVlc3RIYW5kbGVyLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS9oZWxwZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3NldHRpbmctc2VydmljZS9TZXR0aW5nU2VydmljZS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9zZXR0aW5nLXNlcnZpY2UvaTE4bi9CYWNrZW5kLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3NldHRpbmctc2VydmljZS9pMThuL2NhY2hlLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3NldHRpbmctc2VydmljZS9pMThuL2kxOG4udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL0RhdGFiYXNlU2VydmljZS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UvZGF0YWJhc2VzL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvQXNzZXQudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYWxhbmNlLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvQmFzZVN0b3JlLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvQmFzZVN0b3JlV2l0aEFkZHJlc3MudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvQmFzZVN0b3JlV2l0aENoYWluLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvQ2hhaW4udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9DaGFpblN0YWtpbmdNZXRhZGF0YS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UvZGItc3RvcmVzL0Nyb3dkbG9hbi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UvZGItc3RvcmVzL01hbnRhUGF5LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvTWV0YWRhdGEudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9NaWdyYXRpb24udHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9OZnQudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9OZnRDb2xsZWN0aW9uLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvTm9taW5hdG9yTWV0YWRhdGEudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9QcmljZS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UvZGItc3RvcmVzL1N0YWtpbmcudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9UcmFuc2FjdGlvbi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy9zdWJzY2FuLXNlcnZpY2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc2VydmljZXMvc3Vic2Nhbi1zZXJ2aWNlL3N1YnNjYW4tY2hhaW4tbWFwLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3RyYW5zYWN0aW9uLXNlcnZpY2UvY29uc3RhbnRzLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3RyYW5zYWN0aW9uLXNlcnZpY2UvZXZlbnQtcGFyc2VyL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3RyYW5zYWN0aW9uLXNlcnZpY2UvaGVscGVycy9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy90cmFuc2FjdGlvbi1zZXJ2aWNlL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3NlcnZpY2VzL3dhbGxldC1jb25uZWN0LXNlcnZpY2UvaGFuZGxlci9FaXAxNTVSZXF1ZXN0SGFuZGxlci50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy93YWxsZXQtY29ubmVjdC1zZXJ2aWNlL2hhbmRsZXIvUG9sa2Fkb3RSZXF1ZXN0SGFuZGxlci50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zZXJ2aWNlcy93YWxsZXQtY29ubmVjdC1zZXJ2aWNlL2luZGV4LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3N0b3Jlcy9BY2NvdW50UmVmLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3N0b3Jlcy9BY2NvdW50cy50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zdG9yZXMvQXNzZXRTZXR0aW5nLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3N0b3Jlcy9BdXRob3JpemUudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc3RvcmVzL0Jhc2UudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc3RvcmVzL0N1cnJlbnRBY2NvdW50U3RvcmUudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc3RvcmVzL0tleXJpbmcudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc3RvcmVzL01ldGFkYXRhLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3N0b3Jlcy9QYXNzUGhpc2hpbmdTdG9yZS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy9zdG9yZXMvU2V0dGluZ3MudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvc3RvcmVzL1N1YnNjcmliYWJsZVN0b3JlLnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi4vZXh0ZW5zaW9uLWJhc2Uvc3JjL3V0aWxzL2FkZHJlc3MudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvdXRpbHMvZXRoL21lcmdlVHJhbnNhY3Rpb25BbmRTaWduYXR1cmUudHMiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS8uLi9leHRlbnNpb24tYmFzZS9zcmMvdXRpbHMvZXRoL3BhcnNlVHJhbnNhY3Rpb24vYmFzZS50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy91dGlscy9ldGgvcGFyc2VUcmFuc2FjdGlvbi9pbmRleC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4uL2V4dGVuc2lvbi1iYXNlL3NyYy91dGlscy9yZXF1ZXN0LnRzIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvLi9zcmMvYmFja2dyb3VuZC50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pLy4vc3JjL2luc3RhbGxhdGlvbi50cyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL2lnbm9yZWR8QzpcXFVzZXJzXFxzaGFybVxcRG93bmxvYWRzXFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxub2RlX21vZHVsZXNcXGFzbjEuanNcXG5vZGVfbW9kdWxlc1xcYm4uanNcXGxpYnxidWZmZXIiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS9pZ25vcmVkfEM6XFxVc2Vyc1xcc2hhcm1cXERvd25sb2Fkc1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcbm9kZV9tb2R1bGVzXFxicm9yYW5kfGNyeXB0byIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL2lnbm9yZWR8QzpcXFVzZXJzXFxzaGFybVxcRG93bmxvYWRzXFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxub2RlX21vZHVsZXNcXGNyZWF0ZS1lY2RoXFxub2RlX21vZHVsZXNcXGJuLmpzXFxsaWJ8YnVmZmVyIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvaWdub3JlZHxDOlxcVXNlcnNcXHNoYXJtXFxEb3dubG9hZHNcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXG5vZGVfbW9kdWxlc1xcZGlmZmllLWhlbGxtYW5cXG5vZGVfbW9kdWxlc1xcYm4uanNcXGxpYnxidWZmZXIiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS9pZ25vcmVkfEM6XFxVc2Vyc1xcc2hhcm1cXERvd25sb2Fkc1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcbm9kZV9tb2R1bGVzXFxlbGxpcHRpY1xcbm9kZV9tb2R1bGVzXFxibi5qc1xcbGlifGJ1ZmZlciIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL2lnbm9yZWR8QzpcXFVzZXJzXFxzaGFybVxcRG93bmxvYWRzXFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxub2RlX21vZHVsZXNcXGV0aC1zaWctdXRpbFxcbm9kZV9tb2R1bGVzXFxibi5qc1xcbGlifGJ1ZmZlciIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL2lnbm9yZWR8QzpcXFVzZXJzXFxzaGFybVxcRG93bmxvYWRzXFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxub2RlX21vZHVsZXNcXGV0aC1zaWctdXRpbFxcbm9kZV9tb2R1bGVzXFx0d2VldG5hY2x8Y3J5cHRvIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvaWdub3JlZHxDOlxcVXNlcnNcXHNoYXJtXFxEb3dubG9hZHNcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXG5vZGVfbW9kdWxlc1xcZXRoZXJldW1qcy1hYmlcXG5vZGVfbW9kdWxlc1xcYm4uanNcXGxpYnxidWZmZXIiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS9pZ25vcmVkfEM6XFxVc2Vyc1xcc2hhcm1cXERvd25sb2Fkc1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcbm9kZV9tb2R1bGVzXFxldGhlcmV1bWpzLXR4XFxub2RlX21vZHVsZXNcXGJuLmpzXFxsaWJ8YnVmZmVyIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvaWdub3JlZHxDOlxcVXNlcnNcXHNoYXJtXFxEb3dubG9hZHNcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXG5vZGVfbW9kdWxlc1xcbWlsbGVyLXJhYmluXFxub2RlX21vZHVsZXNcXGJuLmpzXFxsaWJ8YnVmZmVyIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvaWdub3JlZHxDOlxcVXNlcnNcXHNoYXJtXFxEb3dubG9hZHNcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXG5vZGVfbW9kdWxlc1xccHVibGljLWVuY3J5cHRcXG5vZGVfbW9kdWxlc1xcYm4uanNcXGxpYnxidWZmZXIiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS9pZ25vcmVkfEM6XFxVc2Vyc1xcc2hhcm1cXERvd25sb2Fkc1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcbm9kZV9tb2R1bGVzXFxyZWFkYWJsZS1zdHJlYW1cXGxpYlxcaW50ZXJuYWxcXHN0cmVhbXN8dXRpbCIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL2lnbm9yZWR8QzpcXFVzZXJzXFxzaGFybVxcRG93bmxvYWRzXFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxub2RlX21vZHVsZXNcXHJlYWRhYmxlLXN0cmVhbVxcbGlifHV0aWwiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS9pZ25vcmVkfEM6XFxVc2Vyc1xcc2hhcm1cXERvd25sb2Fkc1xcU3ViV2FsbGV0LUV4dGVuc2lvbi0xLjEuMTdcXFN1YldhbGxldC1FeHRlbnNpb24tMS4xLjE3XFxTdWJXYWxsZXQtRXh0ZW5zaW9uLTEuMS4xN1xcbm9kZV9tb2R1bGVzXFx0d2VldG5hY2wtdXRpbHxidWZmZXIiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL3dlYnBhY2svcnVudGltZS9hbWQgb3B0aW9ucyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL3dlYnBhY2svcnVudGltZS9hc3luYyBtb2R1bGUiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS93ZWJwYWNrL3J1bnRpbWUvY3JlYXRlIGZha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS93ZWJwYWNrL3J1bnRpbWUvaGFybW9ueSBtb2R1bGUgZGVjb3JhdG9yIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS93ZWJwYWNrL3J1bnRpbWUvbm9kZSBtb2R1bGUgZGVjb3JhdG9yIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvd2VicGFjay9ydW50aW1lL3dhc20gbG9hZGluZyIsIndlYnBhY2s6Ly9Ac3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vQHN1YndhbGxldC9leHRlbnNpb24ta29uaS93ZWJwYWNrL2JlZm9yZS1zdGFydHVwIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvd2VicGFjay9zdGFydHVwIiwid2VicGFjazovL0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkvd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHBvbGthZG90L2V4dGVuc2lvbiBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgdHlwZSB7IEtleXJpbmdQYWlyIH0gZnJvbSAnQHN1YndhbGxldC9rZXlyaW5nL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgU2lnbmVyUGF5bG9hZFJhdyB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IEhleFN0cmluZyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgUmVxdWVzdFNpZ24gfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IHsgd3JhcEJ5dGVzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tZGFwcC93cmFwQnl0ZXMnO1xuXG5pbXBvcnQgeyBUeXBlUmVnaXN0cnkgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMnO1xuaW1wb3J0IHsgdThhVG9IZXggfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcXVlc3RCeXRlc1NpZ24gaW1wbGVtZW50cyBSZXF1ZXN0U2lnbiB7XG4gIHB1YmxpYyByZWFkb25seSBwYXlsb2FkOiBTaWduZXJQYXlsb2FkUmF3O1xuXG4gIGNvbnN0cnVjdG9yIChwYXlsb2FkOiBTaWduZXJQYXlsb2FkUmF3KSB7XG4gICAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZDtcbiAgfVxuXG4gIHNpZ24gKF9yZWdpc3RyeTogVHlwZVJlZ2lzdHJ5LCBwYWlyOiBLZXlyaW5nUGFpcik6IHsgc2lnbmF0dXJlOiBIZXhTdHJpbmcgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNpZ25hdHVyZTogdThhVG9IZXgoXG4gICAgICAgIHBhaXIuc2lnbihcbiAgICAgICAgICB3cmFwQnl0ZXModGhpcy5wYXlsb2FkLmRhdGEpXG4gICAgICAgIClcbiAgICAgIClcbiAgICB9O1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBwb2xrYWRvdC9leHRlbnNpb24gYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHR5cGUgeyBLZXlyaW5nUGFpciB9IGZyb20gJ0BzdWJ3YWxsZXQva2V5cmluZy90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFNpZ25lclBheWxvYWRKU09OIH0gZnJvbSAnQHBvbGthZG90L3R5cGVzL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgSGV4U3RyaW5nIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBSZXF1ZXN0U2lnbiB9IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQgeyBUeXBlUmVnaXN0cnkgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1ZXN0RXh0cmluc2ljU2lnbiBpbXBsZW1lbnRzIFJlcXVlc3RTaWduIHtcbiAgcHVibGljIHJlYWRvbmx5IHBheWxvYWQ6IFNpZ25lclBheWxvYWRKU09OO1xuXG4gIGNvbnN0cnVjdG9yIChwYXlsb2FkOiBTaWduZXJQYXlsb2FkSlNPTikge1xuICAgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7XG4gIH1cblxuICBzaWduIChyZWdpc3RyeTogVHlwZVJlZ2lzdHJ5LCBwYWlyOiBLZXlyaW5nUGFpcik6IHsgc2lnbmF0dXJlOiBIZXhTdHJpbmcgfSB7XG4gICAgcmV0dXJuIHJlZ2lzdHJ5XG4gICAgICAuY3JlYXRlVHlwZSgnRXh0cmluc2ljUGF5bG9hZCcsIHRoaXMucGF5bG9hZCwgeyB2ZXJzaW9uOiB0aGlzLnBheWxvYWQudmVyc2lvbiB9KVxuICAgICAgLnNpZ24ocGFpcik7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBTV0Vycm9yIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL2Vycm9ycy9TV0Vycm9yJztcbmltcG9ydCB7IEJhbGFuY2VFcnJvclR5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IGRldGVjdFRyYW5zbGF0ZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuXG4vLyBUb2RvOiBmaW5pc2ggdGhpcyBtYXAgaW4gdGhlIGZ1dHVyZVxuY29uc3QgZGVmYXVsdEVycm9yTWFwOiBSZWNvcmQ8QmFsYW5jZUVycm9yVHlwZSwgeyBtZXNzYWdlOiBzdHJpbmcsIGNvZGU/OiBudW1iZXIgfT4gPSB7XG4gIFtCYWxhbmNlRXJyb3JUeXBlLk5FVFdPUktfRVJST1JdOiB7XG4gICAgbWVzc2FnZTogZGV0ZWN0VHJhbnNsYXRlKCdOZXR3b3JrIGlzIGluYWN0aXZlLiBQbGVhc2UgZW5hYmxlIG5ldHdvcmsnKSxcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfSxcbiAgW0JhbGFuY2VFcnJvclR5cGUuVE9LRU5fRVJST1JdOiB7XG4gICAgbWVzc2FnZTogZGV0ZWN0VHJhbnNsYXRlKCdUb2tlbiBpcyBub3Qgc3VwcG9ydGVkJyksXG4gICAgY29kZTogdW5kZWZpbmVkXG4gIH0sXG4gIFtCYWxhbmNlRXJyb3JUeXBlLlRJTUVPVVRdOiB7XG4gICAgbWVzc2FnZTogZGV0ZWN0VHJhbnNsYXRlKCdVbmFibGUgdG8gZ2V0IGJhbGFuY2UuIFBsZWFzZSByZS1lbmFibGUgdGhlIG5ldHdvcmsnKSxcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfSxcbiAgW0JhbGFuY2VFcnJvclR5cGUuR0VUX0JBTEFOQ0VfRVJST1JdOiB7XG4gICAgbWVzc2FnZTogZGV0ZWN0VHJhbnNsYXRlKCdVbmFibGUgdG8gZ2V0IGJhbGFuY2UuIFBsZWFzZSByZS1lbmFibGUgdGhlIG5ldHdvcmsnKSxcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfVxufTtcblxuZXhwb3J0IGNsYXNzIEJhbGFuY2VFcnJvciBleHRlbmRzIFNXRXJyb3Ige1xuICBvdmVycmlkZSBlcnJvclR5cGU6IEJhbGFuY2VFcnJvclR5cGU7XG5cbiAgY29uc3RydWN0b3IgKGVycm9yVHlwZTogQmFsYW5jZUVycm9yVHlwZSwgZXJyTWVzc2FnZT86IHN0cmluZywgZGF0YT86IHVua25vd24pIHtcbiAgICBjb25zdCBkZWZhdWx0RXJyID0gZGVmYXVsdEVycm9yTWFwW2Vycm9yVHlwZV07XG4gICAgY29uc3QgbWVzc2FnZSA9IGVyck1lc3NhZ2UgfHwgdChkZWZhdWx0RXJyPy5tZXNzYWdlIHx8ICcnKSB8fCBlcnJvclR5cGU7XG5cbiAgICBzdXBlcihlcnJvclR5cGUsIG1lc3NhZ2UsIGRlZmF1bHRFcnI/LmNvZGUsIGRhdGEpO1xuICAgIHRoaXMuZXJyb3JUeXBlID0gZXJyb3JUeXBlO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgU1dFcnJvciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9lcnJvcnMvU1dFcnJvcic7XG5pbXBvcnQgeyBFdm1Qcm92aWRlckVycm9yVHlwZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgZGV0ZWN0VHJhbnNsYXRlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbmNvbnN0IGRlZmF1bHRFcnJvck1hcDogUmVjb3JkPEV2bVByb3ZpZGVyRXJyb3JUeXBlLCB7IG1lc3NhZ2U6IHN0cmluZywgY29kZT86IG51bWJlciB9PiA9IHtcbiAgVVNFUl9SRUpFQ1RFRF9SRVFVRVNUOiB7XG4gICAgbWVzc2FnZTogZGV0ZWN0VHJhbnNsYXRlKCdVc2VyIFJlamVjdGVkIFJlcXVlc3QnKSxcbiAgICBjb2RlOiA0MDAxXG4gIH0sXG4gIFVOQVVUSE9SSVpFRDoge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnRmFpbGVkIHRvIHNpZ24nKSxcbiAgICBjb2RlOiA0MTAwXG4gIH0sXG4gIFVOU1VQUE9SVEVEX01FVEhPRDoge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnVW5zdXBwb3J0ZWQgTWV0aG9kJyksXG4gICAgY29kZTogNDIwMFxuICB9LFxuICBESVNDT05ORUNURUQ6IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ05ldHdvcmsgaXMgZGlzY29ubmVjdGVkJyksXG4gICAgY29kZTogNDkwMFxuICB9LFxuICBDSEFJTl9ESVNDT05ORUNURUQ6IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ05ldHdvcmsgaXMgZGlzY29ubmVjdGVkJyksXG4gICAgY29kZTogNDkwMVxuICB9LFxuICBJTlZBTElEX1BBUkFNUzoge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnVW5kZWZpbmVkIGVycm9yLiBQbGVhc2UgY29udGFjdCBTdWJXYWxsZXQgc3VwcG9ydCcpLFxuICAgIGNvZGU6IC0zMjYwMlxuICB9LFxuICBJTlRFUk5BTF9FUlJPUjoge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnVW5kZWZpbmVkIGVycm9yLiBQbGVhc2UgY29udGFjdCBTdWJXYWxsZXQgc3VwcG9ydCcpLFxuICAgIGNvZGU6IC0zMjYwM1xuICB9XG59O1xuXG5leHBvcnQgY2xhc3MgRXZtUHJvdmlkZXJFcnJvciBleHRlbmRzIFNXRXJyb3Ige1xuICBvdmVycmlkZSBlcnJvclR5cGU6IEV2bVByb3ZpZGVyRXJyb3JUeXBlO1xuXG4gIGNvbnN0cnVjdG9yIChlcnJvclR5cGU6IEV2bVByb3ZpZGVyRXJyb3JUeXBlLCBlcnJNZXNzYWdlPzogc3RyaW5nLCBkYXRhPzogdW5rbm93bikge1xuICAgIGNvbnN0IHsgY29kZSwgbWVzc2FnZSB9ID0gZGVmYXVsdEVycm9yTWFwW2Vycm9yVHlwZV07XG4gICAgY29uc3QgZmluYWxNZXNzYWdlID0gZXJyTWVzc2FnZSB8fCB0KG1lc3NhZ2UgfHwgJycpIHx8IGVycm9yVHlwZTtcblxuICAgIHN1cGVyKGVycm9yVHlwZSwgZmluYWxNZXNzYWdlLCBjb2RlLCBkYXRhKTtcbiAgICB0aGlzLmVycm9yVHlwZSA9IGVycm9yVHlwZTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IFNXRXJyb3IgYXMgU1dFcnJvclR5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcblxuZXhwb3J0IGNsYXNzIFNXRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIFNXRXJyb3JUeXBlIHtcbiAgZXJyb3JUeXBlOiBzdHJpbmc7XG4gIGNvZGU6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgZGF0YTogdW5rbm93biB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvciAoZXJyb3JUeXBlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgY29kZT86IG51bWJlciwgZGF0YT86IHVua25vd24pIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLmVycm9yVHlwZSA9IGVycm9yVHlwZTtcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gIH1cblxuICBwdWJsaWMgdG9KU09OICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgY29kZTogdGhpcy5jb2RlXG4gICAgfTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IFNXRXJyb3IgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvZXJyb3JzL1NXRXJyb3InO1xuaW1wb3J0IHsgQmFzaWNUeEVycm9yVHlwZSwgU3Rha2luZ1R4RXJyb3JUeXBlLCBUcmFuc2FjdGlvbkVycm9yVHlwZSwgVHJhbnNmZXJUeEVycm9yVHlwZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgZGV0ZWN0VHJhbnNsYXRlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbi8vIFRvZG86IGZpbmlzaCB0aGlzIG1hcCBpbiB0aGUgZnV0dXJlXG5jb25zdCBkZWZhdWx0RXJyb3JNYXAgPSB7XG4gIE5PVF9FTk9VR0hfQkFMQU5DRToge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnSW5zdWZmaWNpZW50IGJhbGFuY2UnKSxcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfSxcbiAgQ0hBSU5fRElTQ09OTkVDVEVEOiB7XG4gICAgbWVzc2FnZTogZGV0ZWN0VHJhbnNsYXRlKCdOZXR3b3JrIGlzIGRpc2Nvbm5lY3RlZCcpLFxuICAgIGNvZGU6IHVuZGVmaW5lZFxuICB9LFxuICBJTlZBTElEX1BBUkFNUzoge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnVW5kZWZpbmVkIGVycm9yLiBQbGVhc2UgY29udGFjdCBTdWJXYWxsZXQgc3VwcG9ydCcpLFxuICAgIGNvZGU6IHVuZGVmaW5lZFxuICB9LFxuICBJTlRFUk5BTF9FUlJPUjoge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnVW5kZWZpbmVkIGVycm9yLiBQbGVhc2UgY29udGFjdCBTdWJXYWxsZXQgc3VwcG9ydCcpLFxuICAgIGNvZGU6IHVuZGVmaW5lZFxuICB9LFxuICBEVVBMSUNBVEVfVFJBTlNBQ1RJT046IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ0Fub3RoZXIgdHJhbnNhY3Rpb24gaXMgaW4gcXVldWUuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXInKSxcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfSxcbiAgVU5BQkxFX1RPX1NJR046IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ1VuYWJsZSB0byBzaWduJyksXG4gICAgY29kZTogdW5kZWZpbmVkXG4gIH0sXG4gIFVTRVJfUkVKRUNUX1JFUVVFU1Q6IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ1JlamVjdGVkIGJ5IHVzZXInKSxcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfSxcbiAgVU5BQkxFX1RPX1NFTkQ6IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ1VuYWJsZSB0byBzZW5kJyksXG4gICAgY29kZTogdW5kZWZpbmVkXG4gIH0sXG4gIFNFTkRfVFJBTlNBQ1RJT05fRkFJTEVEOiB7XG4gICAgbWVzc2FnZTogZGV0ZWN0VHJhbnNsYXRlKCdTZW5kIHRyYW5zYWN0aW9uIGZhaWxlZCcpLFxuICAgIGNvZGU6IHVuZGVmaW5lZFxuICB9LFxuICBOT1RfRU5PVUdIX0VYSVNURU5USUFMX0RFUE9TSVQ6IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ0luc3VmZmljaWVudCBiYWxhbmNlIHRvIGNvdmVyIGV4aXN0ZW50aWFsIGRlcG9zaXQuIFBsZWFzZSBkZWNyZWFzZSB0aGUgdHJhbnNhY3Rpb24gYW1vdW50IG9yIGluY3JlYXNlIHlvdXIgY3VycmVudCBiYWxhbmNlJyksXG4gICAgY29kZTogdW5kZWZpbmVkXG4gIH0sXG4gIFtCYXNpY1R4RXJyb3JUeXBlLlVOU1VQUE9SVEVEXToge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnVGhpcyBmZWF0dXJlIGlzIG5vdCBhdmFpbGFibGUgd2l0aCB0aGlzIHRva2VuJyksXG4gICAgY29kZTogdW5kZWZpbmVkXG4gIH0sXG4gIFtCYXNpY1R4RXJyb3JUeXBlLlRJTUVPVVRdOiB7XG4gICAgbWVzc2FnZTogZGV0ZWN0VHJhbnNsYXRlKCdUcmFuc2FjdGlvbiB0aW1lb3V0JyksXG4gICAgY29kZTogdW5kZWZpbmVkXG4gIH0sXG4gIFtTdGFraW5nVHhFcnJvclR5cGUuTk9UX0VOT1VHSF9NSU5fU1RBS0VdOiB7XG4gICAgbWVzc2FnZTogJ05vdCBlbm91Z2ggbWluIHN0YWtlJywgLy8gTWVzc2FnZSBzcGVjaWZpYyB0byBlYWNoIGNhc2VcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfSxcbiAgW1N0YWtpbmdUeEVycm9yVHlwZS5FWENFRURfTUFYX05PTUlOQVRJT05TXToge1xuICAgIG1lc3NhZ2U6ICdFeGNlZWQgbWF4IG5vbWluYXRpb25zJywgLy8gTWVzc2FnZSBzcGVjaWZpYyB0byBlYWNoIGNhc2VcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfSxcbiAgW1N0YWtpbmdUeEVycm9yVHlwZS5FWElTVF9VTlNUQUtJTkdfUkVRVUVTVF06IHtcbiAgICBtZXNzYWdlOiAnRXhpc3QgdW5zdGFraW5nIHJlcXVlc3QnLCAvLyBNZXNzYWdlIHNwZWNpZmljIHRvIGVhY2ggY2FzZVxuICAgIGNvZGU6IHVuZGVmaW5lZFxuICB9LFxuICBbU3Rha2luZ1R4RXJyb3JUeXBlLklOVkFMSURfQUNUSVZFX1NUQUtFXToge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnSW52YWxpZC4gSWYgeW91IHVuc3Rha2UgdGhpcyBhbW91bnQgeW91ciBhY3RpdmUgc3Rha2Ugd291bGQgZmFsbCBiZWxvdyBtaW5pbXVtIGFjdGl2ZSB0aHJlc2hvbGQnKSxcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfSxcbiAgW1N0YWtpbmdUeEVycm9yVHlwZS5FWENFRURfTUFYX1VOU1RBS0lOR106IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ1lvdSByZWFjaGVkIHRoZSBtYXhpbXVtIG51bWJlciBvZiB1bnN0YWtlIHJlcXVlc3RzJyksXG4gICAgY29kZTogdW5kZWZpbmVkXG4gIH0sXG4gIFtTdGFraW5nVHhFcnJvclR5cGUuSU5BQ1RJVkVfTk9NSU5BVElPTl9QT09MXToge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnSW52YWxpZC4gSW5hY3RpdmUgbm9taW5hdGlvbiBwb29sJyksXG4gICAgY29kZTogdW5kZWZpbmVkXG4gIH0sXG4gIFtUcmFuc2ZlclR4RXJyb3JUeXBlLlJFQ0VJVkVSX05PVF9FTk9VR0hfRVhJU1RFTlRJQUxfREVQT1NJVF06IHtcbiAgICBtZXNzYWdlOiBkZXRlY3RUcmFuc2xhdGUoJ1JlY2VpdmVyIGlzIG5vdCBlbm91Z2ggZXhpc3RlbnRpYWwgZGVwb3NpdCcpLFxuICAgIGNvZGU6IHVuZGVmaW5lZFxuICB9XG59IGFzIFJlY29yZDxUcmFuc2FjdGlvbkVycm9yVHlwZSwgeyBtZXNzYWdlOiBzdHJpbmcsIGNvZGU/OiBudW1iZXIgfT47XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2FjdGlvbkVycm9yIGV4dGVuZHMgU1dFcnJvciB7XG4gIG92ZXJyaWRlIGVycm9yVHlwZTogVHJhbnNhY3Rpb25FcnJvclR5cGU7XG5cbiAgY29uc3RydWN0b3IgKGVycm9yVHlwZTogVHJhbnNhY3Rpb25FcnJvclR5cGUsIGVyck1lc3NhZ2U/OiBzdHJpbmcsIGRhdGE/OiB1bmtub3duKSB7XG4gICAgY29uc3QgZGVmYXVsdEVyciA9IGRlZmF1bHRFcnJvck1hcFtlcnJvclR5cGVdO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJNZXNzYWdlIHx8IHQoZGVmYXVsdEVycj8ubWVzc2FnZSB8fCAnJykgfHwgZXJyb3JUeXBlO1xuXG4gICAgc3VwZXIoZXJyb3JUeXBlLCBtZXNzYWdlLCBkZWZhdWx0RXJyPy5jb2RlLCBkYXRhKTtcbiAgICB0aGlzLmVycm9yVHlwZSA9IGVycm9yVHlwZTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAcG9sa2Fkb3QvZXh0ZW5zaW9uIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB0eXBlIHsgTWV0YWRhdGFEZWYgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1pbmplY3QvdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBLZXlyaW5nUGFpciwgS2V5cmluZ1BhaXIkSnNvbiwgS2V5cmluZ1BhaXIkTWV0YSB9IGZyb20gJ0BzdWJ3YWxsZXQva2V5cmluZy90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFN1YmplY3RJbmZvIH0gZnJvbSAnQHN1YndhbGxldC91aS1rZXlyaW5nL29ic2VydmFibGUvdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBTaWduZXJQYXlsb2FkSlNPTiwgU2lnbmVyUGF5bG9hZFJhdyB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IEtleXBhaXJUeXBlIH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgQWNjb3VudEpzb24sIEF1dGhvcml6ZVJlcXVlc3QsIE1lc3NhZ2VUeXBlcywgTWV0YWRhdGFSZXF1ZXN0LCBSZXF1ZXN0QWNjb3VudENoYW5nZVBhc3N3b3JkLCBSZXF1ZXN0QWNjb3VudENyZWF0ZUV4dGVybmFsLCBSZXF1ZXN0QWNjb3VudENyZWF0ZUhhcmR3YXJlLCBSZXF1ZXN0QWNjb3VudENyZWF0ZVN1cmksIFJlcXVlc3RBY2NvdW50RWRpdCwgUmVxdWVzdEFjY291bnRFeHBvcnQsIFJlcXVlc3RBY2NvdW50Rm9yZ2V0LCBSZXF1ZXN0QWNjb3VudFNob3csIFJlcXVlc3RBY2NvdW50VGllLCBSZXF1ZXN0QWNjb3VudFZhbGlkYXRlLCBSZXF1ZXN0QXV0aG9yaXplQXBwcm92ZSwgUmVxdWVzdEF1dGhvcml6ZVJlamVjdCwgUmVxdWVzdEJhdGNoUmVzdG9yZSwgUmVxdWVzdERlcml2ZUNyZWF0ZSwgUmVxdWVzdERlcml2ZVZhbGlkYXRlLCBSZXF1ZXN0SnNvblJlc3RvcmUsIFJlcXVlc3RNZXRhZGF0YUFwcHJvdmUsIFJlcXVlc3RNZXRhZGF0YVJlamVjdCwgUmVxdWVzdFNlZWRDcmVhdGUsIFJlcXVlc3RTZWVkVmFsaWRhdGUsIFJlcXVlc3RTaWduaW5nQXBwcm92ZVBhc3N3b3JkLCBSZXF1ZXN0U2lnbmluZ0FwcHJvdmVTaWduYXR1cmUsIFJlcXVlc3RTaWduaW5nQ2FuY2VsLCBSZXF1ZXN0U2lnbmluZ0lzTG9ja2VkLCBSZXF1ZXN0VHlwZXMsIFJlc3BvbnNlQWNjb3VudEV4cG9ydCwgUmVzcG9uc2VBdXRob3JpemVMaXN0LCBSZXNwb25zZURlcml2ZVZhbGlkYXRlLCBSZXNwb25zZUpzb25HZXRBY2NvdW50SW5mbywgUmVzcG9uc2VTZWVkQ3JlYXRlLCBSZXNwb25zZVNlZWRWYWxpZGF0ZSwgUmVzcG9uc2VTaWduaW5nSXNMb2NrZWQsIFJlc3BvbnNlVHlwZSwgU2lnbmluZ1JlcXVlc3QgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7IEFMTE9XRURfUEFUSCwgUEFTU1dPUkRfRVhQSVJZX01TIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9kZWZhdWx0cyc7XG5pbXBvcnQga2V5cmluZyBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcnO1xuaW1wb3J0IHsgYWNjb3VudHMgYXMgYWNjb3VudHNPYnNlcnZhYmxlIH0gZnJvbSAnQHN1YndhbGxldC91aS1rZXlyaW5nL29ic2VydmFibGUvYWNjb3VudHMnO1xuXG5pbXBvcnQgeyBUeXBlUmVnaXN0cnkgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMnO1xuaW1wb3J0IHsgYXNzZXJ0LCBpc0hleCB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IGtleUV4dHJhY3RTdXJpLCBtbmVtb25pY0dlbmVyYXRlLCBtbmVtb25pY1ZhbGlkYXRlIH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvJztcblxuaW1wb3J0IHsgV2luZG93T3BlblBhcmFtcyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IHdpdGhFcnJvckxvZyB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgU3RhdGUgZnJvbSAnLi9TdGF0ZSc7XG5pbXBvcnQgeyBjcmVhdGVTdWJzY3JpcHRpb24sIHVuc3Vic2NyaWJlIH0gZnJvbSAnLi9zdWJzY3JpcHRpb25zJztcblxudHlwZSBDYWNoZWRVbmxvY2tzID0gUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcblxuZXhwb3J0IGNvbnN0IFNFRURfREVGQVVMVF9MRU5HVEggPSAxMjtcbmV4cG9ydCBjb25zdCBTRUVEX0xFTkdUSFMgPSBbMTIsIDE1LCAxOCwgMjEsIDI0XTtcblxuZXhwb3J0IGNvbnN0IEVUSF9ERVJJVkVfREVGQVVMVCA9ICcvbS80NFxcJy82MFxcJy8wXFwnLzAvMCc7XG5cbi8vIGEgZ2xvYmFsIHJlZ2lzdHJ5IHRvIHVzZSBpbnRlcm5hbGx5XG5jb25zdCByZWdpc3RyeSA9IG5ldyBUeXBlUmVnaXN0cnkoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cmkgKHNlZWQ6IHN0cmluZywgdHlwZT86IEtleXBhaXJUeXBlKTogc3RyaW5nIHtcbiAgcmV0dXJuIHR5cGUgPT09ICdldGhlcmV1bSdcbiAgICA/IGAke3NlZWR9JHtFVEhfREVSSVZFX0RFRkFVTFR9YFxuICAgIDogc2VlZDtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtQWNjb3VudHMgKGFjY291bnRzOiBTdWJqZWN0SW5mbyk6IEFjY291bnRKc29uW10ge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhhY2NvdW50cykubWFwKCh7IGpzb246IHsgYWRkcmVzcywgbWV0YSB9LCB0eXBlIH0pOiBBY2NvdW50SnNvbiA9PiAoe1xuICAgIGFkZHJlc3MsXG4gICAgLi4ubWV0YSxcbiAgICB0eXBlXG4gIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSnNvblBheWxvYWQgKHZhbHVlOiBTaWduZXJQYXlsb2FkSlNPTiB8IFNpZ25lclBheWxvYWRSYXcpOiB2YWx1ZSBpcyBTaWduZXJQYXlsb2FkSlNPTiB7XG4gIHJldHVybiAodmFsdWUgYXMgU2lnbmVyUGF5bG9hZEpTT04pLmdlbmVzaXNIYXNoICE9PSB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4dGVuc2lvbiB7XG4gIHByb3RlY3RlZCByZWFkb25seSBjYWNoZWRVbmxvY2tzOiBDYWNoZWRVbmxvY2tzO1xuXG4gIHJlYWRvbmx5ICNzdGF0ZTogU3RhdGU7XG5cbiAgY29uc3RydWN0b3IgKHN0YXRlOiBTdGF0ZSkge1xuICAgIHRoaXMuY2FjaGVkVW5sb2NrcyA9IHt9O1xuICAgIHRoaXMuI3N0YXRlID0gc3RhdGU7XG4gIH1cblxuICBwcml2YXRlIGFjY291bnRzQ3JlYXRlRXh0ZXJuYWwgKHsgYWRkcmVzcywgZ2VuZXNpc0hhc2gsIG5hbWUgfTogUmVxdWVzdEFjY291bnRDcmVhdGVFeHRlcm5hbCk6IGJvb2xlYW4ge1xuICAgIGtleXJpbmcuYWRkRXh0ZXJuYWwoYWRkcmVzcywgeyBnZW5lc2lzSGFzaCwgbmFtZSB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c0NyZWF0ZUhhcmR3YXJlICh7IGFjY291bnRJbmRleCwgYWRkcmVzcywgYWRkcmVzc09mZnNldCwgZ2VuZXNpc0hhc2gsIGhhcmR3YXJlVHlwZSwgbmFtZSB9OiBSZXF1ZXN0QWNjb3VudENyZWF0ZUhhcmR3YXJlKTogYm9vbGVhbiB7XG4gICAga2V5cmluZy5hZGRIYXJkd2FyZShhZGRyZXNzLCBoYXJkd2FyZVR5cGUsIHsgYWNjb3VudEluZGV4LCBhZGRyZXNzT2Zmc2V0LCBnZW5lc2lzSGFzaCwgbmFtZSB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c0NyZWF0ZVN1cmkgKHsgZ2VuZXNpc0hhc2gsIG5hbWUsIHN1cmksIHR5cGUgfTogUmVxdWVzdEFjY291bnRDcmVhdGVTdXJpKTogYm9vbGVhbiB7XG4gICAga2V5cmluZy5hZGRVcmkoZ2V0U3VyaShzdXJpLCB0eXBlKSwgeyBnZW5lc2lzSGFzaCwgbmFtZSB9LCB0eXBlKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c0NoYW5nZVBhc3N3b3JkICh7IGFkZHJlc3MsIG5ld1Bhc3MsIG9sZFBhc3MgfTogUmVxdWVzdEFjY291bnRDaGFuZ2VQYXNzd29yZCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBhc3NlcnQocGFpciwgJ1VuYWJsZSB0byBmaW5kIGFjY291bnQnKTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIXBhaXIuaXNMb2NrZWQpIHtcbiAgICAgICAgcGFpci5sb2NrKCk7XG4gICAgICB9XG5cbiAgICAgIHBhaXIuZGVjb2RlUGtjczgob2xkUGFzcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgcGFzc3dvcmQnKTtcbiAgICB9XG5cbiAgICBrZXlyaW5nLmVuY3J5cHRBY2NvdW50KHBhaXIsIG5ld1Bhc3MpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFjY291bnRzRWRpdCAoeyBhZGRyZXNzLCBuYW1lIH06IFJlcXVlc3RBY2NvdW50RWRpdCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBhc3NlcnQocGFpciwgJ1VuYWJsZSB0byBmaW5kIGFjY291bnQnKTtcblxuICAgIGtleXJpbmcuc2F2ZUFjY291bnRNZXRhKHBhaXIsIHsgLi4ucGFpci5tZXRhLCBuYW1lIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFjY291bnRzRXhwb3J0ICh7IGFkZHJlc3MsIHBhc3N3b3JkIH06IFJlcXVlc3RBY2NvdW50RXhwb3J0KTogUmVzcG9uc2VBY2NvdW50RXhwb3J0IHtcbiAgICByZXR1cm4geyBleHBvcnRlZEpzb246IGtleXJpbmcuYmFja3VwQWNjb3VudChrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyksIHBhc3N3b3JkKSB9O1xuICB9XG5cbiAgLy8gcHJpdmF0ZSBhc3luYyBhY2NvdW50c0JhdGNoRXhwb3J0ICh7IGFkZHJlc3NlcywgcGFzc3dvcmQgfTogUmVxdWVzdEFjY291bnRCYXRjaEV4cG9ydCk6IFByb21pc2U8UmVzcG9uc2VBY2NvdW50c0V4cG9ydD4ge1xuICAvLyAgIHJldHVybiB7XG4gIC8vICAgICBleHBvcnRlZEpzb246IGF3YWl0IGtleXJpbmcuYmFja3VwQWNjb3VudHMoYWRkcmVzc2VzLCBwYXNzd29yZClcbiAgLy8gICB9O1xuICAvLyB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c0ZvcmdldCAoeyBhZGRyZXNzIH06IFJlcXVlc3RBY2NvdW50Rm9yZ2V0KTogYm9vbGVhbiB7XG4gICAga2V5cmluZy5mb3JnZXRBY2NvdW50KGFkZHJlc3MpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVmcmVzaEFjY291bnRQYXNzd29yZENhY2hlIChwYWlyOiBLZXlyaW5nUGFpcik6IG51bWJlciB7XG4gICAgY29uc3QgeyBhZGRyZXNzIH0gPSBwYWlyO1xuXG4gICAgY29uc3Qgc2F2ZWRFeHBpcnkgPSB0aGlzLmNhY2hlZFVubG9ja3NbYWRkcmVzc10gfHwgMDtcbiAgICBjb25zdCByZW1haW5pbmdUaW1lID0gc2F2ZWRFeHBpcnkgLSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKHJlbWFpbmluZ1RpbWUgPCAwKSB7XG4gICAgICB0aGlzLmNhY2hlZFVubG9ja3NbYWRkcmVzc10gPSAwO1xuICAgICAgcGFpci5sb2NrKCk7XG5cbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiByZW1haW5pbmdUaW1lO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c1Nob3cgKHsgYWRkcmVzcywgaXNTaG93aW5nIH06IFJlcXVlc3RBY2NvdW50U2hvdyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBhc3NlcnQocGFpciwgJ1VuYWJsZSB0byBmaW5kIGFjY291bnQnKTtcblxuICAgIGtleXJpbmcuc2F2ZUFjY291bnRNZXRhKHBhaXIsIHsgLi4ucGFpci5tZXRhLCBpc0hpZGRlbjogIWlzU2hvd2luZyB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c1RpZSAoeyBhZGRyZXNzLCBnZW5lc2lzSGFzaCB9OiBSZXF1ZXN0QWNjb3VudFRpZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBhc3NlcnQocGFpciwgJ1VuYWJsZSB0byBmaW5kIGFjY291bnQnKTtcblxuICAgIGtleXJpbmcuc2F2ZUFjY291bnRNZXRhKHBhaXIsIHsgLi4ucGFpci5tZXRhLCBnZW5lc2lzSGFzaCB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c1ZhbGlkYXRlICh7IGFkZHJlc3MsIHBhc3N3b3JkIH06IFJlcXVlc3RBY2NvdW50VmFsaWRhdGUpOiBib29sZWFuIHtcbiAgICB0cnkge1xuICAgICAga2V5cmluZy5iYWNrdXBBY2NvdW50KGtleXJpbmcuZ2V0UGFpcihhZGRyZXNzKSwgcGFzc3dvcmQpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gRklYTUUgVGhpcyBsb29rcyB2ZXJ5IG11Y2ggbGlrZSB3aGF0IHdlIGhhdmUgaW4gVGFic1xuICBwcml2YXRlIGFjY291bnRzU3Vic2NyaWJlIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogQWNjb3VudEpzb25bXSB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShhY2NvdW50cy5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGFjY291bnRzT2JzZXJ2YWJsZS5zdWJqZWN0LnN1YnNjcmliZSgoYWNjb3VudHM6IFN1YmplY3RJbmZvKTogdm9pZCA9PlxuICAgICAgY2IodHJhbnNmb3JtQWNjb3VudHMoYWNjb3VudHMpKVxuICAgICk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB1bnN1YnNjcmliZShpZCk7XG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cmFuc2Zvcm1BY2NvdW50cyhhY2NvdW50c09ic2VydmFibGUuc3ViamVjdC5nZXRWYWx1ZSgpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXV0aG9yaXplQXBwcm92ZSAoeyBpZCB9OiBSZXF1ZXN0QXV0aG9yaXplQXBwcm92ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHF1ZXVlZCA9IHRoaXMuI3N0YXRlLmdldEF1dGhSZXF1ZXN0KGlkKTtcblxuICAgIGFzc2VydChxdWV1ZWQsICdVbmFibGUgdG8gcHJvY2VlZC4gUGxlYXNlIHRyeSBhZ2FpbicpO1xuXG4gICAgY29uc3QgeyByZXNvbHZlIH0gPSBxdWV1ZWQ7XG5cbiAgICByZXNvbHZlKHRydWUpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGdldEF1dGhMaXN0ICgpOiBSZXNwb25zZUF1dGhvcml6ZUxpc3Qge1xuICAgIHJldHVybiB7IGxpc3Q6IHRoaXMuI3N0YXRlLmF1dGhVcmxzIH07XG4gIH1cblxuICBwcml2YXRlIGF1dGhvcml6ZVJlamVjdCAoeyBpZCB9OiBSZXF1ZXN0QXV0aG9yaXplUmVqZWN0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgcXVldWVkID0gdGhpcy4jc3RhdGUuZ2V0QXV0aFJlcXVlc3QoaWQpO1xuXG4gICAgYXNzZXJ0KHF1ZXVlZCwgJ1VuYWJsZSB0byBwcm9jZWVkLiBQbGVhc2UgdHJ5IGFnYWluJyk7XG5cbiAgICBjb25zdCB7IHJlamVjdCB9ID0gcXVldWVkO1xuXG4gICAgcmVqZWN0KG5ldyBFcnJvcignUmVqZWN0ZWQnKSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIEZJWE1FIFRoaXMgbG9va3MgdmVyeSBtdWNoIGxpa2Ugd2hhdCB3ZSBoYXZlIGluIGFjY291bnRzXG4gIHByaXZhdGUgYXV0aG9yaXplU3Vic2NyaWJlIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShhdXRob3JpemUucmVxdWVzdHMpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuI3N0YXRlLmF1dGhTdWJqZWN0LnN1YnNjcmliZSgocmVxdWVzdHM6IEF1dGhvcml6ZVJlcXVlc3RbXSk6IHZvaWQgPT5cbiAgICAgIGNiKHJlcXVlc3RzKVxuICAgICk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB1bnN1YnNjcmliZShpZCk7XG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXRhZGF0YUFwcHJvdmUgKHsgaWQgfTogUmVxdWVzdE1ldGFkYXRhQXBwcm92ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHF1ZXVlZCA9IHRoaXMuI3N0YXRlLmdldE1ldGFSZXF1ZXN0KGlkKTtcblxuICAgIGFzc2VydChxdWV1ZWQsICdVbmFibGUgdG8gcHJvY2VlZC4gUGxlYXNlIHRyeSBhZ2FpbicpO1xuXG4gICAgY29uc3QgeyByZXF1ZXN0LCByZXNvbHZlIH0gPSBxdWV1ZWQ7XG5cbiAgICB0aGlzLiNzdGF0ZS5zYXZlTWV0YWRhdGEocmVxdWVzdCk7XG5cbiAgICByZXNvbHZlKHRydWUpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIG1ldGFkYXRhR2V0IChnZW5lc2lzSGFzaDogc3RyaW5nIHwgbnVsbCk6IE1ldGFkYXRhRGVmIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuI3N0YXRlLmtub3duTWV0YWRhdGEuZmluZCgocmVzdWx0KSA9PiByZXN1bHQuZ2VuZXNpc0hhc2ggPT09IGdlbmVzaXNIYXNoKSB8fCBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXRhZGF0YUxpc3QgKCk6IE1ldGFkYXRhRGVmW10ge1xuICAgIHJldHVybiB0aGlzLiNzdGF0ZS5rbm93bk1ldGFkYXRhO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXRhZGF0YVJlamVjdCAoeyBpZCB9OiBSZXF1ZXN0TWV0YWRhdGFSZWplY3QpOiBib29sZWFuIHtcbiAgICBjb25zdCBxdWV1ZWQgPSB0aGlzLiNzdGF0ZS5nZXRNZXRhUmVxdWVzdChpZCk7XG5cbiAgICBhc3NlcnQocXVldWVkLCAnVW5hYmxlIHRvIHByb2NlZWQuIFBsZWFzZSB0cnkgYWdhaW4nKTtcblxuICAgIGNvbnN0IHsgcmVqZWN0IH0gPSBxdWV1ZWQ7XG5cbiAgICByZWplY3QobmV3IEVycm9yKCdSZWplY3RlZCcpKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXRhZGF0YVN1YnNjcmliZSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IE1ldGFkYXRhUmVxdWVzdFtdIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKG1ldGFkYXRhLnJlcXVlc3RzKSc+KGlkLCBwb3J0KTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLiNzdGF0ZS5tZXRhU3ViamVjdC5zdWJzY3JpYmUoKHJlcXVlc3RzOiBNZXRhZGF0YVJlcXVlc3RbXSk6IHZvaWQgPT5cbiAgICAgIGNiKHJlcXVlc3RzKVxuICAgICk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB1bnN1YnNjcmliZShpZCk7XG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLiNzdGF0ZS5tZXRhU3ViamVjdC52YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUganNvblJlc3RvcmUgKHsgZmlsZSwgcGFzc3dvcmQgfTogUmVxdWVzdEpzb25SZXN0b3JlKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGtleXJpbmcucmVzdG9yZUFjY291bnQoZmlsZSwgcGFzc3dvcmQsIHRydWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJhdGNoUmVzdG9yZSAoeyBmaWxlLCBwYXNzd29yZCB9OiBSZXF1ZXN0QmF0Y2hSZXN0b3JlKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGtleXJpbmcucmVzdG9yZUFjY291bnRzKGZpbGUsIHBhc3N3b3JkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBqc29uR2V0QWNjb3VudEluZm8gKGpzb246IEtleXJpbmdQYWlyJEpzb24pOiBSZXNwb25zZUpzb25HZXRBY2NvdW50SW5mbyB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgYWRkcmVzcywgbWV0YTogeyBnZW5lc2lzSGFzaCwgbmFtZSB9LCB0eXBlIH0gPSBrZXlyaW5nLmNyZWF0ZUZyb21Kc29uKGpzb24pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhZGRyZXNzLFxuICAgICAgICBnZW5lc2lzSGFzaCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgdHlwZVxuICAgICAgfSBhcyBSZXNwb25zZUpzb25HZXRBY2NvdW50SW5mbztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGFzIEVycm9yKS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNlZWRDcmVhdGUgKHsgbGVuZ3RoID0gU0VFRF9ERUZBVUxUX0xFTkdUSCwgc2VlZDogX3NlZWQsIHR5cGUgfTogUmVxdWVzdFNlZWRDcmVhdGUpOiBSZXNwb25zZVNlZWRDcmVhdGUge1xuICAgIGNvbnN0IHNlZWQgPSBfc2VlZCB8fCBtbmVtb25pY0dlbmVyYXRlKGxlbmd0aCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWRkcmVzczoga2V5cmluZy5jcmVhdGVGcm9tVXJpKGdldFN1cmkoc2VlZCwgdHlwZSksIHt9LCB0eXBlKS5hZGRyZXNzLFxuICAgICAgc2VlZFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHNlZWRWYWxpZGF0ZSAoeyBzdXJpLCB0eXBlIH06IFJlcXVlc3RTZWVkVmFsaWRhdGUpOiBSZXNwb25zZVNlZWRWYWxpZGF0ZSB7XG4gICAgY29uc3QgeyBwaHJhc2UgfSA9IGtleUV4dHJhY3RTdXJpKHN1cmkpO1xuXG4gICAgaWYgKGlzSGV4KHBocmFzZSkpIHtcbiAgICAgIGFzc2VydChpc0hleChwaHJhc2UsIDI1NiksICdJbnZhbGlkIHNlZWQgcGhyYXNlLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzYWRseSBpc0hleCBkZXRlY3RzIGFzIHN0cmluZywgc28gd2UgbmVlZCBhIGNhc3QgaGVyZVxuICAgICAgYXNzZXJ0KFNFRURfTEVOR1RIUy5pbmNsdWRlcygocGhyYXNlKS5zcGxpdCgnICcpLmxlbmd0aCksIGBNbmVtb25pYyBuZWVkcyB0byBjb250YWluICR7U0VFRF9MRU5HVEhTLmpvaW4oJywgJyl9IHdvcmRzYCk7XG4gICAgICBhc3NlcnQobW5lbW9uaWNWYWxpZGF0ZShwaHJhc2UpLCAnSW52YWxpZCBzZWVkIHBocmFzZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWRkcmVzczoga2V5cmluZy5jcmVhdGVGcm9tVXJpKGdldFN1cmkoc3VyaSwgdHlwZSksIHt9LCB0eXBlKS5hZGRyZXNzLFxuICAgICAgc3VyaVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHNpZ25pbmdBcHByb3ZlUGFzc3dvcmQgKHsgaWQsIHBhc3N3b3JkLCBzYXZlUGFzcyB9OiBSZXF1ZXN0U2lnbmluZ0FwcHJvdmVQYXNzd29yZCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHF1ZXVlZCA9IHRoaXMuI3N0YXRlLmdldFNpZ25SZXF1ZXN0KGlkKTtcblxuICAgIGFzc2VydChxdWV1ZWQsICdVbmFibGUgdG8gcHJvY2VlZC4gUGxlYXNlIHRyeSBhZ2FpbicpO1xuXG4gICAgY29uc3QgeyByZWplY3QsIHJlcXVlc3QsIHJlc29sdmUgfSA9IHF1ZXVlZDtcbiAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKHF1ZXVlZC5hY2NvdW50LmFkZHJlc3MpO1xuXG4gICAgLy8gdW5saWtlIHF1ZXVlZC5hY2NvdW50LmFkZHJlc3MgdGhlIGZvbGxvd2luZ1xuICAgIC8vIGFkZHJlc3MgaXMgZW5jb2RlZCB3aXRoIHRoZSBkZWZhdWx0IHByZWZpeFxuICAgIC8vIHdoaWNoIHdoYXQgaXMgdXNlZCBmb3IgcGFzc3dvcmQgY2FjaGluZyBtYXBwaW5nXG4gICAgY29uc3QgeyBhZGRyZXNzIH0gPSBwYWlyO1xuXG4gICAgaWYgKCFwYWlyKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdVbmFibGUgdG8gZmluZCBhY2NvdW50JykpO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5yZWZyZXNoQWNjb3VudFBhc3N3b3JkQ2FjaGUocGFpcik7XG5cbiAgICAvLyBpZiB0aGUga2V5cmluZyBwYWlyIGlzIGxvY2tlZCwgdGhlIHBhc3N3b3JkIGlzIG5lZWRlZFxuICAgIGlmIChwYWlyLmlzTG9ja2VkICYmICFwYXNzd29yZCkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignUGFzc3dvcmQgbmVlZGVkIHRvIHVubG9jayB0aGUgYWNjb3VudCcpKTtcbiAgICB9XG5cbiAgICBpZiAocGFpci5pc0xvY2tlZCkge1xuICAgICAgcGFpci5kZWNvZGVQa2NzOChwYXNzd29yZCk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBwYXlsb2FkIH0gPSByZXF1ZXN0O1xuXG4gICAgaWYgKGlzSnNvblBheWxvYWQocGF5bG9hZCkpIHtcbiAgICAgIC8vIEdldCB0aGUgbWV0YWRhdGEgZm9yIHRoZSBnZW5lc2lzSGFzaFxuICAgICAgY29uc3QgY3VycmVudE1ldGFkYXRhID0gdGhpcy4jc3RhdGUua25vd25NZXRhZGF0YS5maW5kKChtZXRhOiBNZXRhZGF0YURlZikgPT5cbiAgICAgICAgbWV0YS5nZW5lc2lzSGFzaCA9PT0gcGF5bG9hZC5nZW5lc2lzSGFzaCk7XG5cbiAgICAgIC8vIHNldCB0aGUgcmVnaXN0cnkgYmVmb3JlIGNhbGxpbmcgdGhlIHNpZ24gZnVuY3Rpb25cbiAgICAgIHJlZ2lzdHJ5LnNldFNpZ25lZEV4dGVuc2lvbnMocGF5bG9hZC5zaWduZWRFeHRlbnNpb25zLCBjdXJyZW50TWV0YWRhdGE/LnVzZXJFeHRlbnNpb25zKTtcblxuICAgICAgaWYgKGN1cnJlbnRNZXRhZGF0YSkge1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihjdXJyZW50TWV0YWRhdGE/LnR5cGVzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSByZXF1ZXN0LnNpZ24ocmVnaXN0cnksIHBhaXIpO1xuXG4gICAgaWYgKHNhdmVQYXNzKSB7XG4gICAgICB0aGlzLmNhY2hlZFVubG9ja3NbYWRkcmVzc10gPSBEYXRlLm5vdygpICsgUEFTU1dPUkRfRVhQSVJZX01TO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWlyLmxvY2soKTtcbiAgICB9XG5cbiAgICByZXNvbHZlKHtcbiAgICAgIGlkLFxuICAgICAgLi4ucmVzdWx0XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgc2lnbmluZ0FwcHJvdmVTaWduYXR1cmUgKHsgaWQsIHNpZ25hdHVyZSB9OiBSZXF1ZXN0U2lnbmluZ0FwcHJvdmVTaWduYXR1cmUpOiBib29sZWFuIHtcbiAgICBjb25zdCBxdWV1ZWQgPSB0aGlzLiNzdGF0ZS5nZXRTaWduUmVxdWVzdChpZCk7XG5cbiAgICBhc3NlcnQocXVldWVkLCAnVW5hYmxlIHRvIHByb2NlZWQuIFBsZWFzZSB0cnkgYWdhaW4nKTtcblxuICAgIGNvbnN0IHsgcmVzb2x2ZSB9ID0gcXVldWVkO1xuXG4gICAgcmVzb2x2ZSh7IGlkLCBzaWduYXR1cmUgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgc2lnbmluZ0NhbmNlbCAoeyBpZCB9OiBSZXF1ZXN0U2lnbmluZ0NhbmNlbCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHF1ZXVlZCA9IHRoaXMuI3N0YXRlLmdldFNpZ25SZXF1ZXN0KGlkKTtcblxuICAgIGFzc2VydChxdWV1ZWQsICdVbmFibGUgdG8gcHJvY2VlZC4gUGxlYXNlIHRyeSBhZ2FpbicpO1xuXG4gICAgY29uc3QgeyByZWplY3QgfSA9IHF1ZXVlZDtcblxuICAgIHJlamVjdChuZXcgRXJyb3IoJ0NhbmNlbGxlZCcpKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzaWduaW5nSXNMb2NrZWQgKHsgaWQgfTogUmVxdWVzdFNpZ25pbmdJc0xvY2tlZCk6IFJlc3BvbnNlU2lnbmluZ0lzTG9ja2VkIHtcbiAgICBjb25zdCBxdWV1ZWQgPSB0aGlzLiNzdGF0ZS5nZXRTaWduUmVxdWVzdChpZCk7XG5cbiAgICBhc3NlcnQocXVldWVkLCAnVW5hYmxlIHRvIHByb2NlZWQuIFBsZWFzZSB0cnkgYWdhaW4nKTtcblxuICAgIGNvbnN0IGFkZHJlc3MgPSBxdWV1ZWQucmVxdWVzdC5wYXlsb2FkLmFkZHJlc3M7XG4gICAgY29uc3QgcGFpciA9IGtleXJpbmcuZ2V0UGFpcihhZGRyZXNzKTtcblxuICAgIGFzc2VydChwYWlyLCAnVW5hYmxlIHRvIGZpbmQgYWNjb3VudCcpO1xuXG4gICAgY29uc3QgcmVtYWluaW5nVGltZSA9IHRoaXMucmVmcmVzaEFjY291bnRQYXNzd29yZENhY2hlKHBhaXIpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTG9ja2VkOiBwYWlyLmlzTG9ja2VkLFxuICAgICAgcmVtYWluaW5nVGltZVxuICAgIH07XG4gIH1cblxuICAvLyBGSVhNRSBUaGlzIGxvb2tzIHZlcnkgbXVjaCBsaWtlIHdoYXQgd2UgaGF2ZSBpbiBhdXRob3JpemF0aW9uXG4gIHByaXZhdGUgc2lnbmluZ1N1YnNjcmliZSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFNpZ25pbmdSZXF1ZXN0W10ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoc2lnbmluZy5yZXF1ZXN0cyknPihpZCwgcG9ydCk7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy4jc3RhdGUuc2lnblN1YmplY3Quc3Vic2NyaWJlKChyZXF1ZXN0czogU2lnbmluZ1JlcXVlc3RbXSk6IHZvaWQgPT5cbiAgICAgIGNiKHJlcXVlc3RzKVxuICAgICk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB1bnN1YnNjcmliZShpZCk7XG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zaWduU3ViamVjdC52YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgd2luZG93T3BlbiAoeyBhbGxvd2VkUGF0aDogcGF0aCwgcGFyYW1zLCBzdWJQYXRoIH06IFdpbmRvd09wZW5QYXJhbXMpOiBib29sZWFuIHtcbiAgICBsZXQgcGFyYW1TdHJpbmcgPSAnJztcblxuICAgIGlmIChwYXJhbXMpIHtcbiAgICAgIHBhcmFtU3RyaW5nICs9ICc/JztcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IE9iamVjdC5lbnRyaWVzKHBhcmFtcylbaV07XG5cbiAgICAgICAgcGFyYW1TdHJpbmcgKz0gYCR7a2V5fT0ke3ZhbHVlfWA7XG5cbiAgICAgICAgaWYgKGkgIT09IE9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHBhcmFtU3RyaW5nICs9ICcmJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IGAke2Nocm9tZS5leHRlbnNpb24uZ2V0VVJMKCdpbmRleC5odG1sJyl9IyR7cGF0aH0ke3N1YlBhdGggfHwgJyd9JHtwYXJhbVN0cmluZ31gO1xuXG4gICAgaWYgKCFBTExPV0VEX1BBVEguaW5jbHVkZXMocGF0aCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBhbGxvd2VkIHRvIG9wZW4gdGhlIHVybDonLCB1cmwpO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgd2l0aEVycm9yTG9nKCgpID0+IGNocm9tZS50YWJzLmNyZWF0ZSh7IHVybCB9KSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgZGVyaXZlIChwYXJlbnRBZGRyZXNzOiBzdHJpbmcsIHN1cmk6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgbWV0YWRhdGE6IEtleXJpbmdQYWlyJE1ldGEpOiBLZXlyaW5nUGFpciB7XG4gICAgY29uc3QgcGFyZW50UGFpciA9IGtleXJpbmcuZ2V0UGFpcihwYXJlbnRBZGRyZXNzKTtcblxuICAgIHRyeSB7XG4gICAgICBwYXJlbnRQYWlyLmRlY29kZVBrY3M4KHBhc3N3b3JkKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHBhc3N3b3JkJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBwYXJlbnRQYWlyLmRlcml2ZShzdXJpLCBtZXRhZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHtzdXJpfVwiIGlzIG5vdCBhIHZhbGlkIGRlcml2YXRpb24gcGF0aGApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGVyaXZhdGlvblZhbGlkYXRlICh7IHBhcmVudEFkZHJlc3MsIHBhcmVudFBhc3N3b3JkLCBzdXJpIH06IFJlcXVlc3REZXJpdmVWYWxpZGF0ZSk6IFJlc3BvbnNlRGVyaXZlVmFsaWRhdGUge1xuICAgIGNvbnN0IGNoaWxkUGFpciA9IHRoaXMuZGVyaXZlKHBhcmVudEFkZHJlc3MsIHN1cmksIHBhcmVudFBhc3N3b3JkLCB7fSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWRkcmVzczogY2hpbGRQYWlyLmFkZHJlc3MsXG4gICAgICBzdXJpXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZGVyaXZhdGlvbkNyZWF0ZSAoeyBnZW5lc2lzSGFzaCwgbmFtZSwgcGFyZW50QWRkcmVzcywgcGFyZW50UGFzc3dvcmQsIHN1cmkgfTogUmVxdWVzdERlcml2ZUNyZWF0ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNoaWxkUGFpciA9IHRoaXMuZGVyaXZlKHBhcmVudEFkZHJlc3MsIHN1cmksIHBhcmVudFBhc3N3b3JkLCB7XG4gICAgICBnZW5lc2lzSGFzaCxcbiAgICAgIG5hbWUsXG4gICAgICBwYXJlbnRBZGRyZXNzLFxuICAgICAgc3VyaVxuICAgIH0pO1xuXG4gICAga2V5cmluZy5hZGRQYWlyKGNoaWxkUGFpciwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgdG9nZ2xlQXV0aG9yaXphdGlvbiAodXJsOiBzdHJpbmcpOiBSZXNwb25zZUF1dGhvcml6ZUxpc3Qge1xuICAgIHJldHVybiB7IGxpc3Q6IHRoaXMuI3N0YXRlLnRvZ2dsZUF1dGhvcml6YXRpb24odXJsKSB9O1xuICB9XG5cbiAgLy8gV2VpcmQgdGhvdWdodCwgdGhlIGVzbGludCBvdmVycmlkZSBpcyBub3QgbmVlZGVkIGluIFRhYnNcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9yZXF1aXJlLWF3YWl0XG4gIHB1YmxpYyBhc3luYyBoYW5kbGU8VE1lc3NhZ2VUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGVzPiAoaWQ6IHN0cmluZywgdHlwZTogVE1lc3NhZ2VUeXBlLCByZXF1ZXN0OiBSZXF1ZXN0VHlwZXNbVE1lc3NhZ2VUeXBlXSwgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8UmVzcG9uc2VUeXBlPFRNZXNzYWdlVHlwZT4+IHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUuYXBwcm92ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JpemVBcHByb3ZlKHJlcXVlc3QgYXMgUmVxdWVzdEF1dGhvcml6ZUFwcHJvdmUpO1xuXG4gICAgICBjYXNlICdwcmkoYXV0aG9yaXplLmxpc3QpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXV0aExpc3QoKTtcblxuICAgICAgY2FzZSAncHJpKGF1dGhvcml6ZS5yZWplY3QpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aG9yaXplUmVqZWN0KHJlcXVlc3QgYXMgUmVxdWVzdEF1dGhvcml6ZVJlamVjdCk7XG5cbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUudG9nZ2xlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZUF1dGhvcml6YXRpb24ocmVxdWVzdCBhcyBzdHJpbmcpO1xuXG4gICAgICBjYXNlICdwcmkoYXV0aG9yaXplLnJlcXVlc3RzKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhvcml6ZVN1YnNjcmliZShpZCwgcG9ydCk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5jcmVhdGUuZXh0ZXJuYWwpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNDcmVhdGVFeHRlcm5hbChyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50Q3JlYXRlRXh0ZXJuYWwpO1xuXG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMuY3JlYXRlLmhhcmR3YXJlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzQ3JlYXRlSGFyZHdhcmUocmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudENyZWF0ZUhhcmR3YXJlKTtcblxuICAgICAgY2FzZSAncHJpKGFjY291bnRzLmNyZWF0ZS5zdXJpKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzQ3JlYXRlU3VyaShyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50Q3JlYXRlU3VyaSk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5jaGFuZ2VQYXNzd29yZCknOlxuICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50c0NoYW5nZVBhc3N3b3JkKHJlcXVlc3QgYXMgUmVxdWVzdEFjY291bnRDaGFuZ2VQYXNzd29yZCk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5lZGl0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzRWRpdChyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50RWRpdCk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5leHBvcnQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNFeHBvcnQocmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudEV4cG9ydCk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5iYXRjaEV4cG9ydCknOlxuICAgICAgICAvLyByZXR1cm4gdGhpcy5hY2NvdW50c0JhdGNoRXhwb3J0KHJlcXVlc3QgYXMgUmVxdWVzdEFjY291bnRCYXRjaEV4cG9ydCk7XG4gICAgICAgIC8vIERpc2FibGUgZXhwb3J0IGFsbCB1dGlsIHVzZSBtYXN0ZXIgcGFzc3dvcmRcbiAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5mb3JnZXQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNGb3JnZXQocmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudEZvcmdldCk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5zaG93KSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzU2hvdyhyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50U2hvdyk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5zdWJzY3JpYmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNTdWJzY3JpYmUoaWQsIHBvcnQpO1xuXG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMudGllKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzVGllKHJlcXVlc3QgYXMgUmVxdWVzdEFjY291bnRUaWUpO1xuXG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMudmFsaWRhdGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNWYWxpZGF0ZShyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50VmFsaWRhdGUpO1xuXG4gICAgICBjYXNlICdwcmkobWV0YWRhdGEuYXBwcm92ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YUFwcHJvdmUocmVxdWVzdCBhcyBSZXF1ZXN0TWV0YWRhdGFBcHByb3ZlKTtcblxuICAgICAgY2FzZSAncHJpKG1ldGFkYXRhLmdldCknOlxuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YUdldChyZXF1ZXN0IGFzIHN0cmluZyk7XG5cbiAgICAgIGNhc2UgJ3ByaShtZXRhZGF0YS5saXN0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhTGlzdCgpO1xuXG4gICAgICBjYXNlICdwcmkobWV0YWRhdGEucmVqZWN0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhUmVqZWN0KHJlcXVlc3QgYXMgUmVxdWVzdE1ldGFkYXRhUmVqZWN0KTtcblxuICAgICAgY2FzZSAncHJpKG1ldGFkYXRhLnJlcXVlc3RzKSc6XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhU3Vic2NyaWJlKGlkLCBwb3J0KTtcblxuICAgICAgY2FzZSAncHJpKGRlcml2YXRpb24uY3JlYXRlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmRlcml2YXRpb25DcmVhdGUocmVxdWVzdCBhcyBSZXF1ZXN0RGVyaXZlQ3JlYXRlKTtcblxuICAgICAgY2FzZSAncHJpKGRlcml2YXRpb24udmFsaWRhdGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVyaXZhdGlvblZhbGlkYXRlKHJlcXVlc3QgYXMgUmVxdWVzdERlcml2ZVZhbGlkYXRlKTtcblxuICAgICAgY2FzZSAncHJpKGpzb24ucmVzdG9yZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5qc29uUmVzdG9yZShyZXF1ZXN0IGFzIFJlcXVlc3RKc29uUmVzdG9yZSk7XG5cbiAgICAgIGNhc2UgJ3ByaShqc29uLmJhdGNoUmVzdG9yZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaFJlc3RvcmUocmVxdWVzdCBhcyBSZXF1ZXN0QmF0Y2hSZXN0b3JlKTtcblxuICAgICAgY2FzZSAncHJpKGpzb24uYWNjb3VudC5pbmZvKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmpzb25HZXRBY2NvdW50SW5mbyhyZXF1ZXN0IGFzIEtleXJpbmdQYWlyJEpzb24pO1xuXG4gICAgICBjYXNlICdwcmkoc2VlZC5jcmVhdGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VlZENyZWF0ZShyZXF1ZXN0IGFzIFJlcXVlc3RTZWVkQ3JlYXRlKTtcblxuICAgICAgY2FzZSAncHJpKHNlZWQudmFsaWRhdGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VlZFZhbGlkYXRlKHJlcXVlc3QgYXMgUmVxdWVzdFNlZWRWYWxpZGF0ZSk7XG5cbiAgICAgIGNhc2UgJ3ByaShzaWduaW5nLmFwcHJvdmUucGFzc3dvcmQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbmluZ0FwcHJvdmVQYXNzd29yZChyZXF1ZXN0IGFzIFJlcXVlc3RTaWduaW5nQXBwcm92ZVBhc3N3b3JkKTtcblxuICAgICAgY2FzZSAncHJpKHNpZ25pbmcuYXBwcm92ZS5zaWduYXR1cmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbmluZ0FwcHJvdmVTaWduYXR1cmUocmVxdWVzdCBhcyBSZXF1ZXN0U2lnbmluZ0FwcHJvdmVTaWduYXR1cmUpO1xuXG4gICAgICBjYXNlICdwcmkoc2lnbmluZy5jYW5jZWwpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbmluZ0NhbmNlbChyZXF1ZXN0IGFzIFJlcXVlc3RTaWduaW5nQ2FuY2VsKTtcblxuICAgICAgY2FzZSAncHJpKHNpZ25pbmcuaXNMb2NrZWQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbmluZ0lzTG9ja2VkKHJlcXVlc3QgYXMgUmVxdWVzdFNpZ25pbmdJc0xvY2tlZCk7XG5cbiAgICAgIGNhc2UgJ3ByaShzaWduaW5nLnJlcXVlc3RzKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnNpZ25pbmdTdWJzY3JpYmUoaWQsIHBvcnQpO1xuXG4gICAgICBjYXNlICdwcmkod2luZG93Lm9wZW4pJzpcbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93T3BlbihyZXF1ZXN0IGFzIFdpbmRvd09wZW5QYXJhbXMpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBoYW5kbGUgbWVzc2FnZSBvZiB0eXBlICR7dHlwZX1gKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHBvbGthZG90L2V4dGVuc2lvbiBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aEVycm9yTG9nIChmbjogKCkgPT4gdW5rbm93bik6IHZvaWQge1xuICB0cnkge1xuICAgIGNvbnN0IHAgPSBmbigpO1xuXG4gICAgaWYgKHAgJiYgdHlwZW9mIHAgPT09ICdvYmplY3QnICYmIHR5cGVvZiAocCBhcyBQcm9taXNlPHVua25vd24+KS5jYXRjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgKHAgYXMgUHJvbWlzZTx1bmtub3duPikuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAcG9sa2Fkb3QvZXh0ZW5zaW9uIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB0eXBlIHsgTWVzc2FnZVR5cGVzV2l0aFN1YnNjcmlwdGlvbnMsIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlcyB9IGZyb20gJy4uL3R5cGVzJztcblxudHlwZSBTdWJzY3JpcHRpb25zID0gUmVjb3JkPHN0cmluZywgY2hyb21lLnJ1bnRpbWUuUG9ydD47XG5cbmNvbnN0IHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbnMgPSB7fTtcblxuLy8gcmV0dXJuIGEgc3Vic2NyaXB0aW9uIGNhbGxiYWNrLCB0aGF0IHdpbGwgc2VuZCB0aGUgZGF0YSB0byB0aGUgY2FsbGVyIHZpYSB0aGUgcG9ydFxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmlwdGlvbjxUTWVzc2FnZVR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZXNXaXRoU3Vic2NyaXB0aW9ucz4gKGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiAoZGF0YTogU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVzW1RNZXNzYWdlVHlwZV0pID0+IHZvaWQge1xuICBzdWJzY3JpcHRpb25zW2lkXSA9IHBvcnQ7XG5cbiAgcmV0dXJuIChzdWJzY3JpcHRpb246IHVua25vd24pOiB2b2lkID0+IHtcbiAgICBpZiAoc3Vic2NyaXB0aW9uc1tpZF0pIHtcbiAgICAgIHBvcnQucG9zdE1lc3NhZ2UoeyBpZCwgc3Vic2NyaXB0aW9uIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3Vic2NyaXB0aW9uUnVubmluZyAoaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gISFzdWJzY3JpcHRpb25zW2lkXTtcbn1cblxuLy8gY2xlYXIgYSBwcmV2aW91cyBzdWJzY3JpYmVyXG5leHBvcnQgZnVuY3Rpb24gdW5zdWJzY3JpYmUgKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgaWYgKHN1YnNjcmlwdGlvbnNbaWRdKSB7XG4gICAgZGVsZXRlIHN1YnNjcmlwdGlvbnNbaWRdO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byB1bnN1YnNjcmliZSBmcm9tICR7aWR9YCk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5leHBvcnQgY2xhc3MgU1dXYXJuaW5nIHtcbiAgd2FybmluZ1R5cGU6IHN0cmluZztcbiAgY29kZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIGRhdGE6IHVua25vd24gfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IgKHdhcm5pbmdUeXBlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgY29kZT86IG51bWJlciwgZGF0YT86IHVua25vd24pIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMud2FybmluZ1R5cGUgPSB3YXJuaW5nVHlwZTtcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBCYXNpY1R4V2FybmluZ0NvZGUsIFRyYW5zYWN0aW9uV2FybmluZ1R5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IFNXV2FybmluZyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC93YXJuaW5ncy9TV1dhcm5pbmcnO1xuaW1wb3J0IHsgZGV0ZWN0VHJhbnNsYXRlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbmNvbnN0IGRlZmF1bHRXYXJuaW5nTWFwOiBSZWNvcmQ8VHJhbnNhY3Rpb25XYXJuaW5nVHlwZSwgeyBtZXNzYWdlOiBzdHJpbmcsIGNvZGU/OiBudW1iZXIgfT4gPSB7XG4gIFtCYXNpY1R4V2FybmluZ0NvZGUuTk9UX0VOT1VHSF9FWElTVEVOVElBTF9ERVBPU0lUXToge1xuICAgIG1lc3NhZ2U6IGRldGVjdFRyYW5zbGF0ZSgnSW5zdWZmaWNpZW50IGJhbGFuY2UgdG8gY292ZXIgZXhpc3RlbnRpYWwgZGVwb3NpdC4gUGxlYXNlIGRlY3JlYXNlIHRoZSB0cmFuc2FjdGlvbiBhbW91bnQgb3IgaW5jcmVhc2UgeW91ciBjdXJyZW50IGJhbGFuY2UnKSxcbiAgICBjb2RlOiB1bmRlZmluZWRcbiAgfVxufTtcblxuZXhwb3J0IGNsYXNzIFRyYW5zYWN0aW9uV2FybmluZyBleHRlbmRzIFNXV2FybmluZyB7XG4gIG92ZXJyaWRlIHdhcm5pbmdUeXBlOiBUcmFuc2FjdGlvbldhcm5pbmdUeXBlO1xuXG4gIGNvbnN0cnVjdG9yICh3YXJuaW5nVHlwZTogVHJhbnNhY3Rpb25XYXJuaW5nVHlwZSwgbWVzc2FnZT86IHN0cmluZywgY29kZT86IG51bWJlciwgZGF0YT86IHVua25vd24pIHtcbiAgICBjb25zdCB3YXJuaW5nTWVzc2FnZSA9IG1lc3NhZ2UgfHwgdChkZWZhdWx0V2FybmluZ01hcFt3YXJuaW5nVHlwZV0/Lm1lc3NhZ2UgfHwgJycpIHx8IHdhcm5pbmdUeXBlO1xuXG4gICAgc3VwZXIod2FybmluZ1R5cGUsIHdhcm5pbmdNZXNzYWdlLCBkZWZhdWx0V2FybmluZ01hcFt3YXJuaW5nVHlwZV0/LmNvZGUsIGRhdGEpO1xuICAgIHRoaXMud2FybmluZ1R5cGUgPSB3YXJuaW5nVHlwZTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBTaWduZWRCYWxhbmNlIH0gZnJvbSAnQGVxdWlsYWIvYXBpL2dlbnNoaXJvL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgX0Fzc2V0VHlwZSwgX0NoYWluQXNzZXQsIF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgQVBJSXRlbVN0YXRlLCBCYWxhbmNlSXRlbSwgVG9rZW5CYWxhbmNlUmF3IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBBU1RBUl9SRUZSRVNIX0JBTEFOQ0VfSU5URVJWQUwsIFNVQl9UT0tFTl9SRUZSRVNIX0JBTEFOQ0VfSU5URVJWQUwgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBQYWxsZXROb21pbmF0aW9uUG9vbHNQb29sTWVtYmVyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL2JvbmRpbmcvdXRpbHMnO1xuaW1wb3J0IHsgZ2V0RVZNQmFsYW5jZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvdG9rZW5zL2V2bS9iYWxhbmNlJztcbmltcG9ydCB7IGdldEVSQzIwQ29udHJhY3QgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3Rva2Vucy9ldm0vd2ViMyc7XG5pbXBvcnQgeyBnZXRQU1AyMkNvbnRyYWN0UHJvbWlzZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvdG9rZW5zL3dhc20nO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFdlaWdodFYyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS90b2tlbnMvd2FzbS91dGlscyc7XG5pbXBvcnQgeyBzdGF0ZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9iYWNrZ3JvdW5kL2hhbmRsZXJzJztcbmltcG9ydCB7IF9CQUxBTkNFX0NIQUlOX0dST1VQLCBfTUFOVEFfWktfQ0hBSU5fR1JPVVAsIF9QVVJFX0VWTV9DSEFJTlMsIF9aS19BU1NFVF9QUkVGSVggfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9Fdm1BcGksIF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgX2NoZWNrU21hcnRDb250cmFjdFN1cHBvcnRCeUNoYWluLCBfZ2V0Q2hhaW5OYXRpdmVUb2tlblNsdWcsIF9nZXRDb250cmFjdEFkZHJlc3NPZlRva2VuLCBfZ2V0VG9rZW5PbkNoYWluQXNzZXRJZCwgX2dldFRva2VuT25DaGFpbkluZm8sIF9pc0NoYWluRXZtQ29tcGF0aWJsZSwgX2lzUHVyZUV2bUNoYWluLCBfaXNTdWJzdHJhdGVSZWxheUNoYWluIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3V0aWxzJztcbmltcG9ydCB7IGNhdGVnb3J5QWRkcmVzc2VzLCBzdW1CTiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IEJpZ04gZnJvbSAnYmlnbnVtYmVyLmpzJztcbmltcG9ydCB7IENvbnRyYWN0IH0gZnJvbSAnd2ViMy1ldGgtY29udHJhY3QnO1xuXG5pbXBvcnQgeyBBcGlQcm9taXNlIH0gZnJvbSAnQHBvbGthZG90L2FwaSc7XG5pbXBvcnQgeyBDb250cmFjdFByb21pc2UgfSBmcm9tICdAcG9sa2Fkb3QvYXBpLWNvbnRyYWN0JztcbmltcG9ydCB7IEFjY291bnRJbmZvIH0gZnJvbSAnQHBvbGthZG90L3R5cGVzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgQk4sIEJOX1pFUk8gfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5cbnR5cGUgRXFCYWxhbmNlSXRlbSA9IFtudW1iZXIsIHsgcG9zaXRpdmU6IG51bWJlciB9XTtcbnR5cGUgRXFCYWxhbmNlVjAgPSB7XG4gIHYwOiB7XG4gICAgbG9jazogbnVtYmVyLFxuICAgIGJhbGFuY2U6IEVxQmFsYW5jZUl0ZW1bXVxuICB9XG59XG5cbi8vIG1haW4gc3Vic2NyaXB0aW9uXG5leHBvcnQgZnVuY3Rpb24gc3Vic2NyaWJlQmFsYW5jZSAoYWRkcmVzc2VzOiBzdHJpbmdbXSwgY2hhaW5JbmZvTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPiwgc3Vic3RyYXRlQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfU3Vic3RyYXRlQXBpPiwgZXZtQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfRXZtQXBpPiwgY2FsbGJhY2s6IChyczogQmFsYW5jZUl0ZW0pID0+IHZvaWQpIHtcbiAgY29uc3QgW3N1YnN0cmF0ZUFkZHJlc3NlcywgZXZtQWRkcmVzc2VzXSA9IGNhdGVnb3J5QWRkcmVzc2VzKGFkZHJlc3Nlcyk7XG5cbiAgLy8gTG9vcGluZyBvdmVyIGVhY2ggY2hhaW5cbiAgY29uc3QgdW5zdWJMaXN0ID0gT2JqZWN0LmVudHJpZXMoY2hhaW5JbmZvTWFwKS5tYXAoYXN5bmMgKFtjaGFpblNsdWcsIGNoYWluSW5mb10pID0+IHtcbiAgICBjb25zdCB1c2VBZGRyZXNzZXMgPSBfaXNDaGFpbkV2bUNvbXBhdGlibGUoY2hhaW5JbmZvKSA/IGV2bUFkZHJlc3NlcyA6IHN1YnN0cmF0ZUFkZHJlc3NlcztcblxuICAgIGlmIChfaXNQdXJlRXZtQ2hhaW4oY2hhaW5JbmZvKSkge1xuICAgICAgY29uc3QgbmF0aXZlVG9rZW5JbmZvID0gc3RhdGUuZ2V0TmF0aXZlVG9rZW5JbmZvKGNoYWluU2x1Zyk7XG5cbiAgICAgIHJldHVybiBzdWJzY3JpYmVFVk1CYWxhbmNlKGNoYWluU2x1ZywgdXNlQWRkcmVzc2VzLCBldm1BcGlNYXAsIGNhbGxiYWNrLCBuYXRpdmVUb2tlbkluZm8pO1xuICAgIH1cblxuICAgIGlmICghdXNlQWRkcmVzc2VzIHx8IHVzZUFkZHJlc3Nlcy5sZW5ndGggPT09IDAgfHwgX1BVUkVfRVZNX0NIQUlOUy5pbmRleE9mKGNoYWluU2x1ZykgPiAtMSkge1xuICAgICAgY29uc3QgZnVuZ2libGVUb2tlbnNCeUNoYWluID0gc3RhdGUuY2hhaW5TZXJ2aWNlLmdldEZ1bmdpYmxlVG9rZW5zQnlDaGFpbihjaGFpblNsdWcsIHRydWUpO1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgIE9iamVjdC52YWx1ZXMoZnVuZ2libGVUb2tlbnNCeUNoYWluKS5tYXAoKHRva2VuKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdG9rZW5TbHVnOiB0b2tlbi5zbHVnLFxuICAgICAgICAgIGZyZWU6ICcwJyxcbiAgICAgICAgICBsb2NrZWQ6ICcwJyxcbiAgICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZLFxuICAgICAgICAgIHRpbWVzdGFtcDogbm93XG4gICAgICAgIH0gYXMgQmFsYW5jZUl0ZW07XG4gICAgICB9KS5mb3JFYWNoKGNhbGxiYWNrKTtcblxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBuZXR3b3JrQVBJID0gYXdhaXQgc3Vic3RyYXRlQXBpTWFwW2NoYWluU2x1Z10uaXNSZWFkeTtcblxuICAgIHJldHVybiBzdWJzY3JpYmVTdWJzdHJhdGVCYWxhbmNlKHVzZUFkZHJlc3NlcywgY2hhaW5JbmZvLCBjaGFpblNsdWcsIG5ldHdvcmtBUEksIGV2bUFwaU1hcCwgY2FsbGJhY2spO1xuICB9KTtcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIHVuc3ViTGlzdC5mb3JFYWNoKChzdWJQcm9tKSA9PiB7XG4gICAgICBzdWJQcm9tLnRoZW4oKHVuc3ViKSA9PiB7XG4gICAgICAgIHVuc3ViICYmIHVuc3ViKCk7XG4gICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1YnNjcmliZVN1YnN0cmF0ZUJhbGFuY2UgKGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluSW5mbzogX0NoYWluSW5mbywgY2hhaW46IHN0cmluZywgbmV0d29ya0FQSTogX1N1YnN0cmF0ZUFwaSwgZXZtQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfRXZtQXBpPiwgY2FsbEJhY2s6IChyczogQmFsYW5jZUl0ZW0pID0+IHZvaWQpIHtcbiAgbGV0IHVuc3ViTmF0aXZlVG9rZW46ICgpID0+IHZvaWQ7XG5cbiAgaWYgKCFfQkFMQU5DRV9DSEFJTl9HUk9VUC5raW50c3VnaS5pbmNsdWRlcyhjaGFpbikgJiYgIV9CQUxBTkNFX0NIQUlOX0dST1VQLmdlbnNoaXJvLmluY2x1ZGVzKGNoYWluKSAmJiAhX0JBTEFOQ0VfQ0hBSU5fR1JPVVAuZXF1aWxpYnJpdW1fcGFyYWNoYWluLmluY2x1ZGVzKGNoYWluKSkge1xuICAgIHVuc3ViTmF0aXZlVG9rZW4gPSBhd2FpdCBzdWJzY3JpYmVXaXRoU3lzdGVtQWNjb3VudFBhbGxldChhZGRyZXNzZXMsIGNoYWluSW5mbywgbmV0d29ya0FQSS5hcGksIGNhbGxCYWNrKTtcbiAgfVxuXG4gIGxldCB1bnN1YkxvY2FsVG9rZW46ICgpID0+IHZvaWQ7XG4gIGxldCB1bnN1YkV2bUNvbnRyYWN0VG9rZW46ICgpID0+IHZvaWQ7XG4gIGxldCB1bnN1Yldhc21Db250cmFjdFRva2VuOiAoKSA9PiB2b2lkO1xuXG4gIHRyeSB7XG4gICAgaWYgKF9CQUxBTkNFX0NIQUlOX0dST1VQLmJpZnJvc3QuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgICB1bnN1YkxvY2FsVG9rZW4gPSBhd2FpdCBzdWJzY3JpYmVUb2tlbnNBY2NvdW50c1BhbGxldChhZGRyZXNzZXMsIGNoYWluLCBuZXR3b3JrQVBJLmFwaSwgY2FsbEJhY2spO1xuICAgIH0gZWxzZSBpZiAoX0JBTEFOQ0VfQ0hBSU5fR1JPVVAua2ludHN1Z2kuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgICB1bnN1YkxvY2FsVG9rZW4gPSBhd2FpdCBzdWJzY3JpYmVUb2tlbnNBY2NvdW50c1BhbGxldChhZGRyZXNzZXMsIGNoYWluLCBuZXR3b3JrQVBJLmFwaSwgY2FsbEJhY2ssIHRydWUpO1xuICAgIH0gZWxzZSBpZiAoX0JBTEFOQ0VfQ0hBSU5fR1JPVVAuc3RhdGVtaW5lLmluY2x1ZGVzKGNoYWluKSkge1xuICAgICAgdW5zdWJMb2NhbFRva2VuID0gYXdhaXQgc3Vic2NyaWJlQXNzZXRzQWNjb3VudFBhbGxldChhZGRyZXNzZXMsIGNoYWluLCBuZXR3b3JrQVBJLmFwaSwgY2FsbEJhY2spO1xuICAgIH0gZWxzZSBpZiAoX0JBTEFOQ0VfQ0hBSU5fR1JPVVAuZ2Vuc2hpcm8uaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgICB1bnN1YkxvY2FsVG9rZW4gPSBhd2FpdCBzdWJzY3JpYmVFcUJhbGFuY2VBY2NvdW50UGFsbGV0KGFkZHJlc3NlcywgY2hhaW4sIG5ldHdvcmtBUEkuYXBpLCBjYWxsQmFjaywgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChfQkFMQU5DRV9DSEFJTl9HUk9VUC5lcXVpbGlicml1bV9wYXJhY2hhaW4uaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgICB1bnN1YkxvY2FsVG9rZW4gPSBhd2FpdCBzdWJzY3JpYmVFcXVpbGlicml1bVRva2VuQmFsYW5jZShhZGRyZXNzZXMsIGNoYWluLCBuZXR3b3JrQVBJLmFwaSwgY2FsbEJhY2ssIHRydWUpO1xuICAgIH1cblxuICAgIGlmIChfaXNDaGFpbkV2bUNvbXBhdGlibGUoY2hhaW5JbmZvKSkge1xuICAgICAgdW5zdWJFdm1Db250cmFjdFRva2VuID0gc3Vic2NyaWJlRVJDMjBJbnRlcnZhbChhZGRyZXNzZXMsIGNoYWluLCBldm1BcGlNYXAsIGNhbGxCYWNrKTtcbiAgICB9XG5cbiAgICBpZiAoX2NoZWNrU21hcnRDb250cmFjdFN1cHBvcnRCeUNoYWluKGNoYWluSW5mbywgX0Fzc2V0VHlwZS5QU1AyMikpIHsgLy8gR2V0IHN1Yi10b2tlbiBmb3Igc3Vic3RyYXRlLWJhc2VkIGNoYWluc1xuICAgICAgdW5zdWJXYXNtQ29udHJhY3RUb2tlbiA9IHN1YnNjcmliZVBTUDIyQmFsYW5jZShhZGRyZXNzZXMsIGNoYWluLCBuZXR3b3JrQVBJLmFwaSwgY2FsbEJhY2spO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS53YXJuKGVycik7XG4gIH1cblxuICByZXR1cm4gKCkgPT4ge1xuICAgIHVuc3ViTmF0aXZlVG9rZW4gJiYgdW5zdWJOYXRpdmVUb2tlbigpO1xuICAgIHVuc3ViTG9jYWxUb2tlbiAmJiB1bnN1YkxvY2FsVG9rZW4oKTtcbiAgICB1bnN1YkV2bUNvbnRyYWN0VG9rZW4gJiYgdW5zdWJFdm1Db250cmFjdFRva2VuKCk7XG4gICAgdW5zdWJXYXNtQ29udHJhY3RUb2tlbiAmJiB1bnN1Yldhc21Db250cmFjdFRva2VuKCk7XG4gIH07XG59XG5cbi8vIGhhbmRsZXIgYWNjb3JkaW5nIHRvIGRpZmZlcmVudCBsb2dpY1xuYXN5bmMgZnVuY3Rpb24gc3Vic2NyaWJlV2l0aFN5c3RlbUFjY291bnRQYWxsZXQgKGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluSW5mbzogX0NoYWluSW5mbywgbmV0d29ya0FQSTogQXBpUHJvbWlzZSwgY2FsbEJhY2s6IChyczogQmFsYW5jZUl0ZW0pID0+IHZvaWQpIHtcbiAgY29uc3QgY2hhaW5OYXRpdmVUb2tlblNsdWcgPSBfZ2V0Q2hhaW5OYXRpdmVUb2tlblNsdWcoY2hhaW5JbmZvKTtcblxuICBjb25zdCB1bnN1YiA9IGF3YWl0IG5ldHdvcmtBUEkucXVlcnkuc3lzdGVtLmFjY291bnQubXVsdGkoYWRkcmVzc2VzLCBhc3luYyAoYmFsYW5jZXM6IEFjY291bnRJbmZvW10pID0+IHtcbiAgICBsZXQgW3RvdGFsLCByZXNlcnZlZCwgbWlzY0Zyb3plbiwgZmVlRnJvemVuXSA9IFtuZXcgQk4oMCksIG5ldyBCTigwKSwgbmV3IEJOKDApLCBuZXcgQk4oMCldO1xuXG4gICAgbGV0IHBvb2xlZFN0YWtpbmdCYWxhbmNlID0gQk5fWkVSTztcblxuICAgIGlmIChfaXNTdWJzdHJhdGVSZWxheUNoYWluKGNoYWluSW5mbykgJiYgbmV0d29ya0FQSS5xdWVyeS5ub21pbmF0aW9uUG9vbHMpIHtcbiAgICAgIGNvbnN0IHBvb2xNZW1iZXJEYXRhcyA9IGF3YWl0IG5ldHdvcmtBUEkucXVlcnkubm9taW5hdGlvblBvb2xzLnBvb2xNZW1iZXJzLm11bHRpKGFkZHJlc3Nlcyk7XG5cbiAgICAgIGlmIChwb29sTWVtYmVyRGF0YXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBfcG9vbE1lbWJlckRhdGEgb2YgcG9vbE1lbWJlckRhdGFzKSB7XG4gICAgICAgICAgY29uc3QgcG9vbE1lbWJlckRhdGEgPSBfcG9vbE1lbWJlckRhdGEudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldE5vbWluYXRpb25Qb29sc1Bvb2xNZW1iZXI7XG5cbiAgICAgICAgICBpZiAocG9vbE1lbWJlckRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvb2xlZEJhbGFuY2UgPSBuZXcgQk4ocG9vbE1lbWJlckRhdGEucG9pbnRzLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICBwb29sZWRTdGFraW5nQmFsYW5jZSA9IHBvb2xlZFN0YWtpbmdCYWxhbmNlLmFkZChwb29sZWRCYWxhbmNlKTtcblxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMocG9vbE1lbWJlckRhdGEudW5ib25kaW5nRXJhcykuZm9yRWFjaCgoWywgYW1vdW50XSkgPT4ge1xuICAgICAgICAgICAgICBwb29sZWRTdGFraW5nQmFsYW5jZSA9IHBvb2xlZFN0YWtpbmdCYWxhbmNlLmFkZChuZXcgQk4oYW1vdW50KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBiYWxhbmNlcy5mb3JFYWNoKChiYWxhbmNlOiBBY2NvdW50SW5mbykgPT4ge1xuICAgICAgdG90YWwgPSB0b3RhbC5hZGQoYmFsYW5jZS5kYXRhPy5mcmVlPy50b0JuKCkgfHwgbmV3IEJOKDApKTsgLy8gcmVzZXJ2ZWQgaXMgc2VwZXJhdGVkXG4gICAgICByZXNlcnZlZCA9IHJlc2VydmVkLmFkZChiYWxhbmNlLmRhdGE/LnJlc2VydmVkPy50b0JuKCkgfHwgbmV3IEJOKDApKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICBtaXNjRnJvemVuID0gbWlzY0Zyb3plbi5hZGQoYmFsYW5jZS5kYXRhPy5taXNjRnJvemVuPy50b0JuKCkgfHwgYmFsYW5jZT8uZGF0YT8uZnJvemVuPy50b0JuKCkgfHwgbmV3IEJOKDApKTsgLy8gVE9ETzogdXBkYXRlIGZyb3plblxuICAgICAgZmVlRnJvemVuID0gZmVlRnJvemVuLmFkZChiYWxhbmNlLmRhdGE/LmZlZUZyb3plbj8udG9CbigpIHx8IG5ldyBCTigwKSk7XG4gICAgfSk7XG5cbiAgICBsZXQgbG9ja2VkID0gcmVzZXJ2ZWQuYWRkKG1pc2NGcm96ZW4pO1xuXG4gICAgdG90YWwgPSB0b3RhbC5hZGQocmVzZXJ2ZWQpOyAvLyB0b3RhbCA9IGZyZWUgKyByZXNlcnZlZFxuXG4gICAgaWYgKHBvb2xlZFN0YWtpbmdCYWxhbmNlLmd0KEJOX1pFUk8pKSB7XG4gICAgICB0b3RhbCA9IHRvdGFsLmFkZChwb29sZWRTdGFraW5nQmFsYW5jZSk7XG4gICAgICBsb2NrZWQgPSBsb2NrZWQuYWRkKHBvb2xlZFN0YWtpbmdCYWxhbmNlKTtcbiAgICB9XG5cbiAgICBjb25zdCBmcmVlID0gdG90YWwuc3ViKGxvY2tlZCk7XG5cbiAgICBjYWxsQmFjayh7XG4gICAgICB0b2tlblNsdWc6IGNoYWluTmF0aXZlVG9rZW5TbHVnLFxuICAgICAgZnJlZTogZnJlZS5ndGUoQk5fWkVSTykgPyBmcmVlLnRvU3RyaW5nKCkgOiAnMCcsXG4gICAgICBsb2NrZWQ6IGxvY2tlZC50b1N0cmluZygpLFxuICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgIHN1YnN0cmF0ZUluZm86IHtcbiAgICAgICAgbWlzY0Zyb3plbjogbWlzY0Zyb3plbi50b1N0cmluZygpLFxuICAgICAgICByZXNlcnZlZDogcmVzZXJ2ZWQudG9TdHJpbmcoKSxcbiAgICAgICAgZmVlRnJvemVuOiBmZWVGcm96ZW4udG9TdHJpbmcoKVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIHVuc3ViKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZUVSQzIwSW50ZXJ2YWwgKGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluOiBzdHJpbmcsIGV2bUFwaU1hcDogUmVjb3JkPHN0cmluZywgX0V2bUFwaT4sIGNhbGxCYWNrOiAocmVzdWx0OiBCYWxhbmNlSXRlbSkgPT4gdm9pZCk6ICgpID0+IHZvaWQge1xuICBsZXQgdG9rZW5MaXN0ID0ge30gYXMgUmVjb3JkPHN0cmluZywgX0NoYWluQXNzZXQ+O1xuICBjb25zdCBlcmMyMENvbnRyYWN0TWFwID0ge30gYXMgUmVjb3JkPHN0cmluZywgQ29udHJhY3Q+O1xuXG4gIGNvbnN0IGdldFRva2VuQmFsYW5jZXMgPSAoKSA9PiB7XG4gICAgT2JqZWN0LnZhbHVlcyh0b2tlbkxpc3QpLm1hcChhc3luYyAodG9rZW5JbmZvKSA9PiB7XG4gICAgICBsZXQgZnJlZSA9IG5ldyBCTigwKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udHJhY3QgPSBlcmMyMENvbnRyYWN0TWFwW3Rva2VuSW5mby5zbHVnXTtcbiAgICAgICAgY29uc3QgYmFsYW5jZUxpc3QgPSBhd2FpdCBQcm9taXNlLmFsbChhZGRyZXNzZXMubWFwKChhZGRyZXNzKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1yZXR1cm4sQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIHJldHVybiBjb250cmFjdC5tZXRob2RzLmJhbGFuY2VPZihhZGRyZXNzKS5jYWxsKCk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBmcmVlID0gc3VtQk4oYmFsYW5jZUxpc3QubWFwKChiYWxhbmNlKSA9PiBuZXcgQk4oYmFsYW5jZSB8fCAwKSkpO1xuXG4gICAgICAgIGNhbGxCYWNrKHtcbiAgICAgICAgICB0b2tlblNsdWc6IHRva2VuSW5mby5zbHVnLFxuICAgICAgICAgIGZyZWU6IGZyZWUudG9TdHJpbmcoKSxcbiAgICAgICAgICBsb2NrZWQ6ICcwJyxcbiAgICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZXG4gICAgICAgIH0gYXMgQmFsYW5jZUl0ZW0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRva2VuSW5mby5zbHVnLCBlcnIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHRva2VuTGlzdCA9IHN0YXRlLmdldEFzc2V0QnlDaGFpbkFuZEFzc2V0KGNoYWluLCBbX0Fzc2V0VHlwZS5FUkMyMF0pO1xuXG4gIE9iamVjdC5lbnRyaWVzKHRva2VuTGlzdCkuZm9yRWFjaCgoW3NsdWcsIHRva2VuSW5mb10pID0+IHtcbiAgICBlcmMyMENvbnRyYWN0TWFwW3NsdWddID0gZ2V0RVJDMjBDb250cmFjdChjaGFpbiwgX2dldENvbnRyYWN0QWRkcmVzc09mVG9rZW4odG9rZW5JbmZvKSwgZXZtQXBpTWFwKTtcbiAgfSk7XG5cbiAgZ2V0VG9rZW5CYWxhbmNlcygpO1xuXG4gIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoZ2V0VG9rZW5CYWxhbmNlcywgU1VCX1RPS0VOX1JFRlJFU0hfQkFMQU5DRV9JTlRFUlZBTCk7XG5cbiAgcmV0dXJuICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlUFNQMjJCYWxhbmNlIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nLCBhcGk6IEFwaVByb21pc2UsIGNhbGxCYWNrOiAocmVzdWx0OiBCYWxhbmNlSXRlbSkgPT4gdm9pZCkge1xuICBsZXQgdG9rZW5MaXN0ID0ge30gYXMgUmVjb3JkPHN0cmluZywgX0NoYWluQXNzZXQ+O1xuICBjb25zdCBwc3AyMkNvbnRyYWN0TWFwID0ge30gYXMgUmVjb3JkPHN0cmluZywgQ29udHJhY3RQcm9taXNlPjtcblxuICBjb25zdCBnZXRUb2tlbkJhbGFuY2VzID0gKCkgPT4ge1xuICAgIE9iamVjdC52YWx1ZXModG9rZW5MaXN0KS5tYXAoYXN5bmMgKHRva2VuSW5mbykgPT4ge1xuICAgICAgbGV0IGZyZWUgPSBuZXcgQk4oMCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnRyYWN0ID0gcHNwMjJDb250cmFjdE1hcFt0b2tlbkluZm8uc2x1Z107XG4gICAgICAgIGNvbnN0IGJhbGFuY2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoYWRkcmVzc2VzLm1hcChhc3luYyAoYWRkcmVzcyk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgICAgICAgY29uc3QgX2JhbGFuY2VPZiA9IGF3YWl0IGNvbnRyYWN0LnF1ZXJ5Wydwc3AyMjo6YmFsYW5jZU9mJ10oYWRkcmVzcywgeyBnYXNMaW1pdDogZ2V0RGVmYXVsdFdlaWdodFYyKGFwaSkgfSwgYWRkcmVzcyk7XG4gICAgICAgICAgY29uc3QgYmFsYW5jZU9iaiA9IF9iYWxhbmNlT2Y/Lm91dHB1dD8udG9QcmltaXRpdmUoKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gICAgICAgICAgcmV0dXJuIF9iYWxhbmNlT2Yub3V0cHV0ID8gKGJhbGFuY2VPYmoub2sgYXMgc3RyaW5nIHx8IGJhbGFuY2VPYmouT2sgYXMgc3RyaW5nKSA6ICcwJztcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGZyZWUgPSBzdW1CTihiYWxhbmNlcy5tYXAoKGJhbCkgPT4gbmV3IEJOKGJhbCB8fCAwKSkpO1xuXG4gICAgICAgIGNhbGxCYWNrKHtcbiAgICAgICAgICB0b2tlblNsdWc6IHRva2VuSW5mby5zbHVnLFxuICAgICAgICAgIGZyZWU6IGZyZWUudG9TdHJpbmcoKSxcbiAgICAgICAgICBsb2NrZWQ6ICcwJyxcbiAgICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZXG4gICAgICAgIH0gYXMgQmFsYW5jZUl0ZW0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybih0b2tlbkluZm8uc2x1ZywgZXJyKTsgLy8gVE9ETzogZXJyb3IgY3JlYXRlVHlwZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHRva2VuTGlzdCA9IHN0YXRlLmdldEFzc2V0QnlDaGFpbkFuZEFzc2V0KGNoYWluLCBbX0Fzc2V0VHlwZS5QU1AyMl0pO1xuICBPYmplY3QuZW50cmllcyh0b2tlbkxpc3QpLmZvckVhY2goKFtzbHVnLCB0b2tlbkluZm9dKSA9PiB7XG4gICAgcHNwMjJDb250cmFjdE1hcFtzbHVnXSA9IGdldFBTUDIyQ29udHJhY3RQcm9taXNlKGFwaSwgX2dldENvbnRyYWN0QWRkcmVzc09mVG9rZW4odG9rZW5JbmZvKSk7XG4gIH0pO1xuXG4gIGdldFRva2VuQmFsYW5jZXMoKTtcblxuICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKGdldFRva2VuQmFsYW5jZXMsIFNVQl9UT0tFTl9SRUZSRVNIX0JBTEFOQ0VfSU5URVJWQUwpO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHN1YnNjcmliZUVxdWlsaWJyaXVtVG9rZW5CYWxhbmNlIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nLCBhcGk6IEFwaVByb21pc2UsIGNhbGxCYWNrOiAocnM6IEJhbGFuY2VJdGVtKSA9PiB2b2lkLCBpbmNsdWRlTmF0aXZlVG9rZW4/OiBib29sZWFuKTogUHJvbWlzZTwoKSA9PiB2b2lkPiB7XG4gIGNvbnN0IHRva2VuVHlwZXMgPSBpbmNsdWRlTmF0aXZlVG9rZW4gPyBbX0Fzc2V0VHlwZS5OQVRJVkUsIF9Bc3NldFR5cGUuTE9DQUxdIDogW19Bc3NldFR5cGUuTE9DQUxdO1xuICBjb25zdCB0b2tlbk1hcCA9IHN0YXRlLmdldEFzc2V0QnlDaGFpbkFuZEFzc2V0KGNoYWluLCB0b2tlblR5cGVzKTtcblxuICBjb25zdCB1bnN1YiA9IGF3YWl0IGFwaS5xdWVyeS5zeXN0ZW0uYWNjb3VudC5tdWx0aShhZGRyZXNzZXMsIChiYWxhbmNlczogUmVjb3JkPHN0cmluZywgYW55PltdKSA9PiB7IC8vIEVxdWlsaWJyaXVtIGN1c3RvbWl6ZXMgdGhlIFN5c3RlbUFjY291bnQgcGFsbGV0XG4gICAgT2JqZWN0LnZhbHVlcyh0b2tlbk1hcCkuZm9yRWFjaCgodG9rZW5JbmZvKSA9PiB7XG4gICAgICBjb25zdCBhc3NldElkID0gX2dldFRva2VuT25DaGFpbkFzc2V0SWQodG9rZW5JbmZvKTtcbiAgICAgIGxldCB0b2tlbkZyZWVCYWxhbmNlID0gQk5fWkVSTztcblxuICAgICAgZm9yIChjb25zdCBiYWxhbmNlIG9mIGJhbGFuY2VzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgY29uc3QgYmFsYW5jZXNEYXRhID0gSlNPTi5wYXJzZShiYWxhbmNlLmRhdGEudG9TdHJpbmcoKSkgYXMgRXFCYWxhbmNlVjA7XG4gICAgICAgIGNvbnN0IGJhbGFuY2VMaXN0ID0gYmFsYW5jZXNEYXRhLnYwLmJhbGFuY2U7XG5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBmcmVlVG9rZW5CYWxhbmNlID0gYmFsYW5jZUxpc3QuZmluZCgoZGF0YTogRXFCYWxhbmNlSXRlbSkgPT4gZGF0YVswXSA9PT0gcGFyc2VJbnQoYXNzZXRJZCkpO1xuICAgICAgICBjb25zdCBibkZyZWVUb2tlbkJhbGFuY2UgPSBmcmVlVG9rZW5CYWxhbmNlID8gbmV3IEJOKG5ldyBCaWdOKGZyZWVUb2tlbkJhbGFuY2VbMV0ucG9zaXRpdmUpLnRvU3RyaW5nKCkpIDogQk5fWkVSTztcblxuICAgICAgICB0b2tlbkZyZWVCYWxhbmNlID0gdG9rZW5GcmVlQmFsYW5jZS5hZGQoYm5GcmVlVG9rZW5CYWxhbmNlKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdG9rZW5CYWxhbmNlOiBCYWxhbmNlSXRlbSA9IHtcbiAgICAgICAgZnJlZTogdG9rZW5GcmVlQmFsYW5jZS50b1N0cmluZygpLFxuICAgICAgICBsb2NrZWQ6ICcwJywgLy8gRXF1aWxpYnJpdW0gZG9lc24ndCBzaG93IGxvY2tlZCBiYWxhbmNlXG4gICAgICAgIHN0YXRlOiBBUElJdGVtU3RhdGUuUkVBRFksXG4gICAgICAgIHRva2VuU2x1ZzogdG9rZW5JbmZvLnNsdWdcbiAgICAgIH07XG5cbiAgICAgIGNhbGxCYWNrKHRva2VuQmFsYW5jZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgdW5zdWIoKTtcbiAgfTtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9yZXF1aXJlLWF3YWl0XG5hc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVFcUJhbGFuY2VBY2NvdW50UGFsbGV0IChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nLCBhcGk6IEFwaVByb21pc2UsIGNhbGxCYWNrOiAocnM6IEJhbGFuY2VJdGVtKSA9PiB2b2lkLCBpbmNsdWRlTmF0aXZlVG9rZW4/OiBib29sZWFuKTogUHJvbWlzZTwoKSA9PiB2b2lkPiB7XG4gIGNvbnN0IHRva2VuVHlwZXMgPSBpbmNsdWRlTmF0aXZlVG9rZW4gPyBbX0Fzc2V0VHlwZS5OQVRJVkUsIF9Bc3NldFR5cGUuTE9DQUxdIDogW19Bc3NldFR5cGUuTE9DQUxdO1xuICBjb25zdCB0b2tlbk1hcCA9IHN0YXRlLmdldEFzc2V0QnlDaGFpbkFuZEFzc2V0KGNoYWluLCB0b2tlblR5cGVzKTtcblxuICBjb25zdCB1bnN1Ykxpc3QgPSBPYmplY3QudmFsdWVzKHRva2VuTWFwKS5tYXAoYXN5bmMgKHRva2VuSW5mbykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhc3NldElkID0gX2dldFRva2VuT25DaGFpbkFzc2V0SWQodG9rZW5JbmZvKTtcbiAgICAgIGNvbnN0IHVuc3ViID0gYXdhaXQgYXBpLnF1ZXJ5LmVxQmFsYW5jZXMuYWNjb3VudC5tdWx0aShhZGRyZXNzZXMubWFwKChhZGRyZXNzKSA9PiBbYWRkcmVzcywgW2Fzc2V0SWRdXSksIChiYWxhbmNlczogU2lnbmVkQmFsYW5jZVtdKSA9PiB7XG4gICAgICAgIGNvbnN0IHRva2VuQmFsYW5jZSA9IHtcbiAgICAgICAgICBmcmVlOiBzdW1CTihiYWxhbmNlcy5tYXAoKGIpID0+IChiLmFzUG9zaXRpdmUpKSkudG9TdHJpbmcoKSxcbiAgICAgICAgICBsb2NrZWQ6ICcwJywgLy8gRXF1aWxpYnJpdW0gZG9lc24ndCBzaG93IGxvY2tlZCBiYWxhbmNlXG4gICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgICB0b2tlblNsdWc6IHRva2VuSW5mby5zbHVnXG4gICAgICAgIH07XG5cbiAgICAgICAgY2FsbEJhY2sodG9rZW5CYWxhbmNlKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdW5zdWI7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLndhcm4oZXJyKTtcblxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgdW5zdWJMaXN0LmZvckVhY2goKHN1YlByb20pID0+IHtcbiAgICAgIHN1YlByb20udGhlbigodW5zdWIpID0+IHtcbiAgICAgICAgdW5zdWIgJiYgdW5zdWIoKTtcbiAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0pO1xuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVUb2tlbnNBY2NvdW50c1BhbGxldCAoYWRkcmVzc2VzOiBzdHJpbmdbXSwgY2hhaW46IHN0cmluZywgYXBpOiBBcGlQcm9taXNlLCBjYWxsQmFjazogKHJzOiBCYWxhbmNlSXRlbSkgPT4gdm9pZCwgaW5jbHVkZU5hdGl2ZVRva2VuPzogYm9vbGVhbikge1xuICBjb25zdCB0b2tlblR5cGVzID0gaW5jbHVkZU5hdGl2ZVRva2VuID8gW19Bc3NldFR5cGUuTkFUSVZFLCBfQXNzZXRUeXBlLkxPQ0FMXSA6IFtfQXNzZXRUeXBlLkxPQ0FMXTtcbiAgY29uc3QgdG9rZW5NYXAgPSBzdGF0ZS5nZXRBc3NldEJ5Q2hhaW5BbmRBc3NldChjaGFpbiwgdG9rZW5UeXBlcyk7XG5cbiAgY29uc3QgdW5zdWJMaXN0ID0gYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LnZhbHVlcyh0b2tlbk1hcCkubWFwKGFzeW5jICh0b2tlbkluZm8pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb25DaGFpbkluZm8gPSBfZ2V0VG9rZW5PbkNoYWluSW5mbyh0b2tlbkluZm8pO1xuICAgICAgY29uc3QgYXNzZXRJZCA9IF9nZXRUb2tlbk9uQ2hhaW5Bc3NldElkKHRva2VuSW5mbyk7XG5cbiAgICAgIC8vIEdldCBUb2tlbiBCYWxhbmNlXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICByZXR1cm4gYXdhaXQgYXBpLnF1ZXJ5LnRva2Vucy5hY2NvdW50cy5tdWx0aShhZGRyZXNzZXMubWFwKChhZGRyZXNzKSA9PiBbYWRkcmVzcywgb25DaGFpbkluZm8gfHwgYXNzZXRJZF0pLCAoYmFsYW5jZXM6IFRva2VuQmFsYW5jZVJhd1tdKSA9PiB7XG4gICAgICAgIGNvbnN0IHRva2VuQmFsYW5jZSA9IHtcbiAgICAgICAgICByZXNlcnZlZDogc3VtQk4oYmFsYW5jZXMubWFwKChiKSA9PiAoYi5yZXNlcnZlZCB8fCBuZXcgQk4oMCkpKSksXG4gICAgICAgICAgZnJvemVuOiBzdW1CTihiYWxhbmNlcy5tYXAoKGIpID0+IChiLmZyb3plbiB8fCBuZXcgQk4oMCkpKSksXG4gICAgICAgICAgZnJlZTogc3VtQk4oYmFsYW5jZXMubWFwKChiKSA9PiAoYi5mcmVlIHx8IG5ldyBCTigwKSkpKSAvLyBmcmVlIGlzIGFjdHVhbGx5IHRvdGFsIGJhbGFuY2VcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBmcmVlIGJhbGFuY2UgPSB0b3RhbCBiYWxhbmNlIC0gZnJvemVuIG1pc2NcbiAgICAgICAgLy8gbG9ja2VkIGJhbGFuY2UgPSByZXNlcnZlZCArIGZyb3plbiBtaXNjXG4gICAgICAgIGNvbnN0IGZyZWVCYWxhbmNlID0gdG9rZW5CYWxhbmNlLmZyZWUuc3ViKHRva2VuQmFsYW5jZS5mcm96ZW4pO1xuICAgICAgICBjb25zdCBsb2NrZWRCYWxhbmNlID0gdG9rZW5CYWxhbmNlLmZyb3plbi5hZGQodG9rZW5CYWxhbmNlLnJlc2VydmVkKTtcblxuICAgICAgICBjYWxsQmFjayh7XG4gICAgICAgICAgdG9rZW5TbHVnOiB0b2tlbkluZm8uc2x1ZyxcbiAgICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZLFxuICAgICAgICAgIGZyZWU6IGZyZWVCYWxhbmNlLnRvU3RyaW5nKCksXG4gICAgICAgICAgbG9ja2VkOiBsb2NrZWRCYWxhbmNlLnRvU3RyaW5nKCksXG4gICAgICAgICAgc3Vic3RyYXRlSW5mbzoge1xuICAgICAgICAgICAgcmVzZXJ2ZWQ6IHRva2VuQmFsYW5jZS5yZXNlcnZlZC50b1N0cmluZygpLFxuICAgICAgICAgICAgbWlzY0Zyb3plbjogdG9rZW5CYWxhbmNlLmZyb3plbi50b1N0cmluZygpXG4gICAgICAgICAgfVxuICAgICAgICB9IGFzIEJhbGFuY2VJdGVtKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKGVycik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSkpO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgdW5zdWJMaXN0LmZvckVhY2goKHVuc3ViKSA9PiB7XG4gICAgICB1bnN1YiAmJiB1bnN1YigpO1xuICAgIH0pO1xuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVBc3NldHNBY2NvdW50UGFsbGV0IChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nLCBhcGk6IEFwaVByb21pc2UsIGNhbGxCYWNrOiAocnM6IEJhbGFuY2VJdGVtKSA9PiB2b2lkKSB7XG4gIGNvbnN0IHRva2VuTWFwID0gc3RhdGUuZ2V0QXNzZXRCeUNoYWluQW5kQXNzZXQoY2hhaW4sIFtfQXNzZXRUeXBlLkxPQ0FMXSk7XG5cbiAgT2JqZWN0LnZhbHVlcyh0b2tlbk1hcCkuZm9yRWFjaCgodG9rZW4pID0+IHtcbiAgICBpZiAoX01BTlRBX1pLX0NIQUlOX0dST1VQLmluY2x1ZGVzKHRva2VuLm9yaWdpbkNoYWluKSAmJiB0b2tlbi5zeW1ib2wuc3RhcnRzV2l0aChfWktfQVNTRVRfUFJFRklYKSkge1xuICAgICAgZGVsZXRlIHRva2VuTWFwW3Rva2VuLnNsdWddO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgdW5zdWJMaXN0ID0gYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LnZhbHVlcyh0b2tlbk1hcCkubWFwKGFzeW5jICh0b2tlbkluZm8pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXNzZXRJbmRleCA9IF9nZXRUb2tlbk9uQ2hhaW5Bc3NldElkKHRva2VuSW5mbyk7XG5cbiAgICAgIC8vIEdldCBUb2tlbiBCYWxhbmNlXG4gICAgICByZXR1cm4gYXdhaXQgYXBpLnF1ZXJ5LmFzc2V0cy5hY2NvdW50Lm11bHRpKGFkZHJlc3Nlcy5tYXAoKGFkZHJlc3MpID0+IFthc3NldEluZGV4LCBhZGRyZXNzXSksIChiYWxhbmNlcykgPT4ge1xuICAgICAgICBsZXQgdG90YWwgPSBuZXcgQk4oMCk7XG4gICAgICAgIGxldCBmcm96ZW4gPSBuZXcgQk4oMCk7XG5cbiAgICAgICAgYmFsYW5jZXMuZm9yRWFjaCgoYikgPT4ge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICAgIGNvbnN0IGJkYXRhID0gYj8udG9IdW1hbigpO1xuXG4gICAgICAgICAgaWYgKGJkYXRhKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NCYWxhbmNlID0gbmV3IEJOKFN0cmluZyhiZGF0YT8uYmFsYW5jZSkucmVwbGFjZUFsbCgnLCcsICcnKSB8fCAnMCcpO1xuXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBpZiAoYmRhdGE/LmlzRnJvemVuKSB7XG4gICAgICAgICAgICAgIGZyb3plbiA9IGZyb3plbi5hZGQoYWRkcmVzc0JhbGFuY2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdG90YWwgPSB0b3RhbC5hZGQoYWRkcmVzc0JhbGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZnJlZSA9IHRvdGFsLnN1Yihmcm96ZW4pO1xuXG4gICAgICAgIGNhbGxCYWNrKHtcbiAgICAgICAgICB0b2tlblNsdWc6IHRva2VuSW5mby5zbHVnLFxuICAgICAgICAgIGZyZWU6IGZyZWUudG9TdHJpbmcoKSxcbiAgICAgICAgICBsb2NrZWQ6IGZyb3plbi50b1N0cmluZygpLFxuICAgICAgICAgIHN0YXRlOiBBUElJdGVtU3RhdGUuUkVBRFksXG4gICAgICAgICAgc3Vic3RyYXRlSW5mbzoge1xuICAgICAgICAgICAgbWlzY0Zyb3plbjogZnJvemVuLnRvU3RyaW5nKCksXG4gICAgICAgICAgICByZXNlcnZlZDogJzAnXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKGVycik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSkpO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgdW5zdWJMaXN0LmZvckVhY2goKHVuc3ViKSA9PiB7XG4gICAgICB1bnN1YiAmJiB1bnN1YigpO1xuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3Vic2NyaWJlRVZNQmFsYW5jZSAoY2hhaW46IHN0cmluZywgYWRkcmVzc2VzOiBzdHJpbmdbXSwgZXZtQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfRXZtQXBpPiwgY2FsbGJhY2s6IChyczogQmFsYW5jZUl0ZW0pID0+IHZvaWQsIHRva2VuSW5mbzogX0NoYWluQXNzZXQpIHtcbiAgY29uc3QgYmFsYW5jZUl0ZW0gPSB7XG4gICAgdG9rZW5TbHVnOiB0b2tlbkluZm8uc2x1ZyxcbiAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlBFTkRJTkcsXG4gICAgZnJlZTogJzAnLFxuICAgIGxvY2tlZDogJzAnXG4gIH0gYXMgQmFsYW5jZUl0ZW07XG5cbiAgZnVuY3Rpb24gZ2V0QmFsYW5jZSAoKSB7XG4gICAgZ2V0RVZNQmFsYW5jZShjaGFpbiwgYWRkcmVzc2VzLCBldm1BcGlNYXApXG4gICAgICAudGhlbigoYmFsYW5jZXMpID0+IHtcbiAgICAgICAgYmFsYW5jZUl0ZW0uZnJlZSA9IHN1bUJOKGJhbGFuY2VzLm1hcCgoYikgPT4gKG5ldyBCTihiIHx8ICcwJykpKSkudG9TdHJpbmcoKTtcbiAgICAgICAgYmFsYW5jZUl0ZW0uc3RhdGUgPSBBUElJdGVtU3RhdGUuUkVBRFk7XG4gICAgICAgIGNhbGxiYWNrKGJhbGFuY2VJdGVtKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS53YXJuKTtcbiAgfVxuXG4gIGdldEJhbGFuY2UoKTtcbiAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChnZXRCYWxhbmNlLCBBU1RBUl9SRUZSRVNIX0JBTEFOQ0VfSU5URVJWQUwpO1xuICBjb25zdCB1bnN1YjIgPSBzdWJzY3JpYmVFUkMyMEludGVydmFsKGFkZHJlc3NlcywgY2hhaW4sIGV2bUFwaU1hcCwgY2FsbGJhY2spO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgdW5zdWIyICYmIHVuc3ViMigpO1xuICB9O1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBDT01NT05fQ0hBSU5fU0xVR1MgfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QnO1xuaW1wb3J0IHsgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBBUElJdGVtU3RhdGUsIENyb3dkbG9hbkl0ZW0sIENyb3dkbG9hblBhcmFTdGF0ZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgQUNBTEFfUkVGUkVTSF9DUk9XRExPQU5fSU5URVJWQUwgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2NvbnN0YW50cyc7XG5pbXBvcnQgcmVnaXN0cnkgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9kb3RzYW1hL3R5cGVSZWdpc3RyeSc7XG5pbXBvcnQgeyBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IF9nZXRDaGFpblN1YnN0cmF0ZUFkZHJlc3NQcmVmaXgsIF9nZXRTdWJzdHJhdGVQYXJhSWQsIF9nZXRTdWJzdHJhdGVSZWxheVBhcmVudCwgX2lzQ2hhaW5Fdm1Db21wYXRpYmxlLCBfaXNTdWJzdHJhdGVQYXJhQ2hhaW4gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgY2F0ZWdvcnlBZGRyZXNzZXMsIHJlZm9ybWF0QWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuaW1wb3J0IHsgQXBpUHJvbWlzZSB9IGZyb20gJ0Bwb2xrYWRvdC9hcGknO1xuaW1wb3J0IHsgRGVyaXZlT3duQ29udHJpYnV0aW9ucyB9IGZyb20gJ0Bwb2xrYWRvdC9hcGktZGVyaXZlL3R5cGVzJztcbmltcG9ydCB7IE9wdGlvbiwgdTMyLCBWZWMgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMnO1xuaW1wb3J0IHsgUGFyYUlkIH0gZnJvbSAnQHBvbGthZG90L3R5cGVzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgQk4gfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5cbmZ1bmN0aW9uIGdldFJQQ0Nyb3dkbG9hbiAocGFyZW50QVBJOiBfU3Vic3RyYXRlQXBpLCBwYXJhSWQ6IG51bWJlciwgaGV4QWRkcmVzc2VzOiBzdHJpbmdbXSwgcGFyYVN0YXRlOiBDcm93ZGxvYW5QYXJhU3RhdGUsIGNhbGxiYWNrOiAocnM6IENyb3dkbG9hbkl0ZW0pID0+IHZvaWQpIHtcbiAgY29uc3QgdW5zdWJQcm9taXNlID0gcGFyZW50QVBJLmFwaS5kZXJpdmUuY3Jvd2Rsb2FuLm93bkNvbnRyaWJ1dGlvbnMocGFyYUlkLCBoZXhBZGRyZXNzZXMsIChyZXN1bHQ6IERlcml2ZU93bkNvbnRyaWJ1dGlvbnMpID0+IHtcbiAgICBsZXQgY29udHJpYnV0ZSA9IG5ldyBCTigwKTtcblxuICAgIE9iamVjdC52YWx1ZXMocmVzdWx0KS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBjb250cmlidXRlID0gY29udHJpYnV0ZS5hZGQoaXRlbS50b0JuKCkpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcnM6IENyb3dkbG9hbkl0ZW0gPSB7XG4gICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZLFxuICAgICAgcGFyYVN0YXRlLFxuICAgICAgY29udHJpYnV0ZTogY29udHJpYnV0ZS50b1N0cmluZygpXG4gICAgfTtcblxuICAgIGNhbGxiYWNrKHJzKTtcbiAgfSk7XG5cbiAgcmV0dXJuICgpID0+IHtcbiAgICB1bnN1YlByb21pc2VcbiAgICAgIC50aGVuKCh1bnN1YikgPT4ge1xuICAgICAgICB1bnN1YigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZUFjYWxhQ29udHJpYnV0ZUludGVydmFsID0gKHBvbGthZG90QWRkcmVzc2VzOiBzdHJpbmdbXSwgcGFyYVN0YXRlOiBDcm93ZGxvYW5QYXJhU3RhdGUsIGNhbGxiYWNrOiAocnM6IENyb3dkbG9hbkl0ZW0pID0+IHZvaWQpID0+IHtcbiAgY29uc3QgYWNhbGFDb250cmlidXRpb25BcGkgPSAnaHR0cHM6Ly9hcGkucG9sa2F3YWxsZXQuaW8vYWNhbGEtZGlzdHJpYnV0aW9uLXYyL2Nyb3dkbG9hbj9hY2NvdW50PSc7XG5cbiAgY29uc3QgZ2V0Q29udHJpYnV0ZUluZm8gPSAoKSA9PiB7XG4gICAgUHJvbWlzZS5hbGwocG9sa2Fkb3RBZGRyZXNzZXMubWFwKChwb2xrYWRvdEFkZHJlc3MpID0+IHtcbiAgICAgIHJldHVybiBheGlvcy5nZXQoYCR7YWNhbGFDb250cmlidXRpb25BcGl9JHtwb2xrYWRvdEFkZHJlc3N9YCk7XG4gICAgfSkpLnRoZW4oKHJlc0xpc3QpID0+IHtcbiAgICAgIGxldCBjb250cmlidXRlID0gbmV3IEJOKDApO1xuXG4gICAgICByZXNMaXN0LmZvckVhY2goKHJlcykgPT4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgY29udHJpYnV0ZSA9IGNvbnRyaWJ1dGUuYWRkKG5ldyBCTihyZXMuZGF0YS5kYXRhPy5hY2FsYT8uWzBdPy50b3RhbERPVExvY2tlZCB8fCAnMCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByczogQ3Jvd2Rsb2FuSXRlbSA9IHtcbiAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgcGFyYVN0YXRlLFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICBjb250cmlidXRlOiBjb250cmlidXRlLnRvU3RyaW5nKClcbiAgICAgIH07XG5cbiAgICAgIGNhbGxiYWNrKHJzKTtcbiAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgfTtcblxuICBnZXRDb250cmlidXRlSW5mbygpO1xuICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKGdldENvbnRyaWJ1dGVJbmZvLCBBQ0FMQV9SRUZSRVNIX0NST1dETE9BTl9JTlRFUlZBTCk7XG5cbiAgcmV0dXJuICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDcm93ZGxvYW5GdW5kc1N0YXR1cyAoYXBpOiBBcGlQcm9taXNlKSB7XG4gIGNvbnN0IGxlYXNlcyA9IGF3YWl0IGFwaS5xdWVyeS5zbG90cy5sZWFzZXMua2V5czxQYXJhSWRbXT4oKTtcbiAgY29uc3QgbGVhc2VzUGFyYUlkcyA9IGxlYXNlcy5tYXAoKHsgYXJnczogW3BhcmFJZF0gfSkgPT4gcGFyYUlkLnRvU3RyaW5nKCkpO1xuXG4gIGNvbnN0IHJzID0gYXdhaXQgYXBpLnF1ZXJ5LmNyb3dkbG9hbi5mdW5kcy5lbnRyaWVzPE9wdGlvbjxhbnk+LCBQYXJhSWRbXT4oKTtcbiAgY29uc3QgbmV3UmFpc2UgPSBhd2FpdCBhcGkucXVlcnkuY3Jvd2Rsb2FuLm5ld1JhaXNlPFZlYzx1MzI+PigpO1xuXG4gIGNvbnN0IG5ld1JhaXNlUGFyYUlkcyA9IChuZXdSYWlzZS50b0pTT04oKSBhcyBudW1iZXJbXSkubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpO1xuXG4gIHJldHVybiBycy5yZWR1Y2UoKHN0YXRlTWFwLCBbeyBhcmdzOiBbcGFyYUlkXSB9LCBmdW5kRGF0YV0pID0+IHtcbiAgICBjb25zdCBwYXJhU3RyID0gcGFyYUlkLnRvU3RyaW5nKCk7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgLy8gY29uc3QgaXRlbSA9IGZ1bmREYXRhLnVud3JhcCgpIGFzIFBvbGthZG90UnVudGltZUNvbW1vbkNyb3dkbG9hbkZ1bmRJbmZvO1xuXG4gICAgaWYgKGxlYXNlc1BhcmFJZHMuaW5kZXhPZihwYXJhU3RyKSA+IC0xKSB7XG4gICAgICBzdGF0ZU1hcFtwYXJhU3RyXSA9IENyb3dkbG9hblBhcmFTdGF0ZS5DT01QTEVURUQ7XG4gICAgfVxuXG4gICAgaWYgKG5ld1JhaXNlUGFyYUlkcy5pbmRleE9mKHBhcmFTdHIpID4gLTEpIHtcbiAgICAgIHN0YXRlTWFwW3BhcmFTdHJdID0gQ3Jvd2Rsb2FuUGFyYVN0YXRlLk9OR09JTkc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YXRlTWFwO1xuICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBDcm93ZGxvYW5QYXJhU3RhdGU+KTtcbn1cblxuLy8gR2V0IEFsbCBjcm93ZGxvYW5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVDcm93ZGxvYW4gKGFkZHJlc3Nlczogc3RyaW5nW10sIHN1YnN0cmF0ZUFwaU1hcDogUmVjb3JkPHN0cmluZywgX1N1YnN0cmF0ZUFwaT4sIGNhbGxiYWNrOiAobmV0d29ya0tleTogc3RyaW5nLCByczogQ3Jvd2Rsb2FuSXRlbSkgPT4gdm9pZCwgY2hhaW5JbmZvTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPikge1xuICBjb25zdCB1bnN1Yk1hcDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIGlmIChPYmplY3Qua2V5cyhzdWJzdHJhdGVBcGlNYXApLmluY2x1ZGVzKENPTU1PTl9DSEFJTl9TTFVHUy5LVVNBTUEpICYmIE9iamVjdC5rZXlzKHN1YnN0cmF0ZUFwaU1hcCkuaW5jbHVkZXMoQ09NTU9OX0NIQUlOX1NMVUdTLlBPTEtBRE9UKSkge1xuICAgIGNvbnN0IHBvbGthZG90QVBJID0gYXdhaXQgc3Vic3RyYXRlQXBpTWFwW0NPTU1PTl9DSEFJTl9TTFVHUy5QT0xLQURPVF0uaXNSZWFkeTtcbiAgICBjb25zdCBwb2xrYWRvdEZ1bmRzU3RhdHVzTWFwID0gYXdhaXQgZ2V0Q3Jvd2Rsb2FuRnVuZHNTdGF0dXMocG9sa2Fkb3RBUEkuYXBpKTtcbiAgICBjb25zdCBrdXNhbWFBUEkgPSBhd2FpdCBzdWJzdHJhdGVBcGlNYXBbQ09NTU9OX0NIQUlOX1NMVUdTLktVU0FNQV0uaXNSZWFkeTtcbiAgICBjb25zdCBrdXNhbWFGdW5kc1N0YXR1c01hcCA9IGF3YWl0IGdldENyb3dkbG9hbkZ1bmRzU3RhdHVzKGt1c2FtYUFQSS5hcGkpO1xuXG4gICAgLy8gVE9ETzogZmluZCBhbGwgY3Jvd2Rsb2FuIHZhbGlkIG5ldHdvcmtzOiBwYXJhY2hhaW5zLCBpbi1jcm93ZGxvYW4sIGNyb3dkbG9hbiBidXQgZmFpbGVkXG5cbiAgICBjb25zdCBzdWJzdHJhdGVBZGRyZXNzZXMgPSBjYXRlZ29yeUFkZHJlc3NlcyhhZGRyZXNzZXMpWzBdO1xuXG4gICAgY29uc3QgaGV4QWRkcmVzc2VzID0gc3Vic3RyYXRlQWRkcmVzc2VzLm1hcCgoYWRkcmVzcykgPT4ge1xuICAgICAgcmV0dXJuIHJlZ2lzdHJ5LmNyZWF0ZVR5cGUoJ0FjY291bnRJZCcsIGFkZHJlc3MpLnRvSGV4KCk7XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZW50cmllcyhjaGFpbkluZm9NYXApLmZvckVhY2goKFtuZXR3b3JrS2V5LCBjaGFpbkluZm9dKSA9PiB7XG4gICAgICBpZiAoX2lzU3Vic3RyYXRlUGFyYUNoYWluKGNoYWluSW5mbykpIHtcbiAgICAgICAgY29uc3QgcGFyZW50Q2hhaW4gPSBfZ2V0U3Vic3RyYXRlUmVsYXlQYXJlbnQoY2hhaW5JbmZvKTtcblxuICAgICAgICBjb25zdCBjcm93ZGxvYW5DYiA9IChyczogQ3Jvd2Rsb2FuSXRlbSkgPT4ge1xuICAgICAgICAgIGNhbGxiYWNrKG5ldHdvcmtLZXksIHJzKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXJhSWQgPSBfZ2V0U3Vic3RyYXRlUGFyYUlkKGNoYWluSW5mbyk7XG5cbiAgICAgICAgaWYgKHBhcmFJZCA8PSAtMSB8fCBhZGRyZXNzZXMubGVuZ3RoID09PSAwIHx8IHBhcmVudENoYWluLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXR3b3JrS2V5ID09PSBDT01NT05fQ0hBSU5fU0xVR1MuQUNBTEEpIHtcbiAgICAgICAgICBjb25zdCBhY2FsYUFkZHJlc3NlcyA9IHN1YnN0cmF0ZUFkZHJlc3Nlcy5tYXAoKGFkZHJlc3MpID0+IHJlZm9ybWF0QWRkcmVzcyhhZGRyZXNzLCBfZ2V0Q2hhaW5TdWJzdHJhdGVBZGRyZXNzUHJlZml4KGNoYWluSW5mbyksIF9pc0NoYWluRXZtQ29tcGF0aWJsZShjaGFpbkluZm8pKSk7XG5cbiAgICAgICAgICB1bnN1Yk1hcC5hY2FsYSA9IHN1YnNjcmliZUFjYWxhQ29udHJpYnV0ZUludGVydmFsKGFjYWxhQWRkcmVzc2VzLCBDcm93ZGxvYW5QYXJhU3RhdGUuQ09NUExFVEVELCBjcm93ZGxvYW5DYik7XG4gICAgICAgIH0gZWxzZSBpZiAocGFyZW50Q2hhaW4gPT09IENPTU1PTl9DSEFJTl9TTFVHUy5QT0xLQURPVCAmJiBwb2xrYWRvdEZ1bmRzU3RhdHVzTWFwW3BhcmFJZF0pIHtcbiAgICAgICAgICB1bnN1Yk1hcFtuZXR3b3JrS2V5XSA9IGdldFJQQ0Nyb3dkbG9hbihwb2xrYWRvdEFQSSwgcGFyYUlkLCBoZXhBZGRyZXNzZXMsIHBvbGthZG90RnVuZHNTdGF0dXNNYXBbcGFyYUlkXSwgY3Jvd2Rsb2FuQ2IpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhcmVudENoYWluID09PSBDT01NT05fQ0hBSU5fU0xVR1MuS1VTQU1BICYmIGt1c2FtYUZ1bmRzU3RhdHVzTWFwW3BhcmFJZF0pIHtcbiAgICAgICAgICB1bnN1Yk1hcFtuZXR3b3JrS2V5XSA9IGdldFJQQ0Nyb3dkbG9hbihrdXNhbWFBUEksIHBhcmFJZCwgaGV4QWRkcmVzc2VzLCBrdXNhbWFGdW5kc1N0YXR1c01hcFtwYXJhSWRdLCBjcm93ZGxvYW5DYik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgT2JqZWN0LnZhbHVlcyh1bnN1Yk1hcCkuZm9yRWFjaCgodW5zdWIpID0+IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGxcbiAgICAgIHVuc3ViICYmIHVuc3ViKCk7XG4gICAgfSk7XG4gIH07XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBwb2xrYWRvdC9leHRlbnNpb24ta29uaS1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IEFyZ0luZm8sIEVyYUluZm8sIEZvcm1hdHRlZE1ldGhvZCwgUmVzcG9uc2VQYXJzZVRyYW5zYWN0aW9uU3Vic3RyYXRlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbmltcG9ydCB7IEFwaVByb21pc2UgfSBmcm9tICdAcG9sa2Fkb3QvYXBpJztcbmltcG9ydCB7IENhbGwgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBoZXhUb1U4YSB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcblxuY29uc3QgZm9ybWF0QXJncyA9IChjYWxsSW5zdGFuY2U6IENhbGwpOiBBcmdJbmZvW10gPT4ge1xuICBjb25zdCBwYXJhbUFyZ0t2QXJyYXk6IEFyZ0luZm9bXSA9IFtdO1xuICBjb25zdCB7IGFyZ3MsIG1ldGEgfSA9IGNhbGxJbnN0YW5jZTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG1ldGEuYXJncy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBhcmd1bWVudDogc3RyaW5nO1xuXG4gICAgaWYgKGFyZ3NbaV0udG9SYXdUeXBlKCkuc3RhcnRzV2l0aCgnQWNjb3VudElkJykpIHtcbiAgICAgIGFyZ3VtZW50ID0gYXJnc1tpXS50b1N0cmluZygpO1xuICAgIH0gZWxzZSBpZiAoYXJnc1tpXS50b1Jhd1R5cGUoKS5zdGFydHNXaXRoKCdWZWM8Q2FsbD4nKSkge1xuICAgICAgYXJndW1lbnQgPSBKU09OLnN0cmluZ2lmeShhcmdzW2ldLnRvSHVtYW4oZmFsc2UpKTtcbiAgICB9IGVsc2UgaWYgKGFyZ3NbaV0udG9SYXdUeXBlKCkuc3RhcnRzV2l0aCgnVmVjJykpIHtcbiAgICAgIC8vIHRvU3RyaW5nIGlzIG5pY2VyIHRoYW4gdG9IdW1hbiBoZXJlIGJlY2F1c2VcbiAgICAgIC8vIHRvSHVtYW4gdGVuZHMgdG8gY29uY2F0ZW5hdGUgbG9uZyBzdHJpbmdzIGFuZCB3b3VsZCBoaWRlIGRhdGFcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgICAgYXJndW1lbnQgPSAoYXJnc1tpXSBhcyBhbnkpLm1hcCgodjogYW55KSA9PiB2LnRvU3RyaW5nKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0b0h1bWFuIHRha2VzIGNhcmUgb2YgdGhlIGJhbGFuY2UgZm9ybWF0aW5nXG4gICAgICAvLyB3aXRoIHRoZSByaWdodCBjaGFpbiB1bml0XG4gICAgICBhcmd1bWVudCA9IEpTT04uc3RyaW5naWZ5KGFyZ3NbaV0udG9IdW1hbigpKTtcbiAgICB9XG5cbiAgICBjb25zdCBhcmdOYW1lID0gbWV0YS5hcmdzW2ldLm5hbWUudG9IdW1hbigpO1xuXG4gICAgcGFyYW1BcmdLdkFycmF5LnB1c2goeyBhcmdOYW1lLCBhcmdWYWx1ZTogYXJndW1lbnQgfSBhcyBBcmdJbmZvKTtcbiAgfVxuXG4gIHJldHVybiBwYXJhbUFyZ0t2QXJyYXk7XG59O1xuXG5leHBvcnQgY29uc3QgcGFyc2VTdWJzdHJhdGVUcmFuc2FjdGlvbiA9IChkYXRhOiBzdHJpbmcsIGFwaVByb21pc2U6IEFwaVByb21pc2UpOiBSZXNwb25zZVBhcnNlVHJhbnNhY3Rpb25TdWJzdHJhdGUgPT4ge1xuICBjb25zdCByZWdpc3RyeSA9IGFwaVByb21pc2UucmVnaXN0cnk7XG5cbiAgY29uc3QgcGF5bG9hZCA9IHJlZ2lzdHJ5LmNyZWF0ZVR5cGUoJ0V4dHJpbnNpY1BheWxvYWQnLCBoZXhUb1U4YShkYXRhKSk7XG4gIGNvbnN0IG5vbmNlID0gcGF5bG9hZC5ub25jZS50b051bWJlcigpO1xuICBjb25zdCB0aXAgPSBwYXlsb2FkLnRpcC50b051bWJlcigpO1xuICBjb25zdCBzcGVjVmVyID0gcGF5bG9hZC5zcGVjVmVyc2lvbi50b051bWJlcigpO1xuXG4gIGNvbnN0IF9lcmEgPSBwYXlsb2FkLmVyYTtcbiAgbGV0IGVyYTogc3RyaW5nIHwgRXJhSW5mbyA9IF9lcmEudG9TdHJpbmcoKTtcblxuICBpZiAoX2VyYS5pc01vcnRhbEVyYSkge1xuICAgIGVyYSA9IHtcbiAgICAgIHBlcmlvZDogX2VyYS5hc01vcnRhbEVyYS5wZXJpb2QudG9OdW1iZXIoKSxcbiAgICAgIHBoYXNlOiBfZXJhLmFzTW9ydGFsRXJhLnBoYXNlLnRvTnVtYmVyKClcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgX21ldGhvZCA9IHBheWxvYWQubWV0aG9kLnRvU3RyaW5nKCk7XG5cbiAgY29uc3QgY2FsbCA9IHJlZ2lzdHJ5LmNyZWF0ZVR5cGUoJ0NhbGwnLCBfbWV0aG9kKTtcbiAgY29uc3Qgc2VjdGlvbk1ldGhvZCA9IGAke2NhbGwuc2VjdGlvbn0uJHtjYWxsLm1ldGhvZH1gO1xuXG4gIGNvbnN0IHJlc3VsdDogRm9ybWF0dGVkTWV0aG9kW10gPSBbXTtcbiAgY29uc3QgZmlyc3RBcmcgPSBjYWxsLmFyZ3NbMF07XG5cbiAgY29uc3QgYmFzZUluZm86IE9taXQ8UmVzcG9uc2VQYXJzZVRyYW5zYWN0aW9uU3Vic3RyYXRlLCAnbWV0aG9kJyB8ICdtZXNzYWdlJz4gPSB7XG4gICAgZXJhOiBlcmEsXG4gICAgdGlwOiB0aXAsXG4gICAgbm9uY2U6IG5vbmNlLFxuICAgIHNwZWNWZXJzaW9uOiBzcGVjVmVyXG4gIH07XG5cbiAgLy8gdGhhdCdzIGEgYmF0Y2hcbiAgaWYgKGZpcnN0QXJnPy50b1Jhd1R5cGUoKS5zdGFydHNXaXRoKCdWZWM8Q2FsbD4nKSkge1xuICAgIHJlc3VsdC5wdXNoKHsgYXJnczogdW5kZWZpbmVkLCBtZXRob2ROYW1lOiBzZWN0aW9uTWV0aG9kIH0pO1xuXG4gICAgKGZpcnN0QXJnIGFzIHVua25vd24gYXMgQ2FsbFtdKS5mb3JFYWNoKChjOiBDYWxsKSA9PiB7XG4gICAgICByZWdpc3RyeS5jcmVhdGVUeXBlKCdDYWxsJywgYyk7XG4gICAgICByZXN1bHQucHVzaCh7IGFyZ3M6IGZvcm1hdEFyZ3MoYyksIG1ldGhvZE5hbWU6IGAke2Muc2VjdGlvbn0uJHtjLm1ldGhvZH1gIH0pO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQucHVzaCh7IGFyZ3M6IGZvcm1hdEFyZ3MoY2FsbCBhcyB1bmtub3duIGFzIENhbGwpLCBtZXRob2ROYW1lOiBzZWN0aW9uTWV0aG9kIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VJbmZvLFxuICAgICAgICBtZXNzYWdlOiB0KCdVbmFibGUgdG8gZGVjb2RlIHRoZSBpbmZvcm1hdGlvbicpLFxuICAgICAgICBtZXRob2Q6IF9tZXRob2RcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgLi4uYmFzZUluZm8sIG1ldGhvZDogcmVzdWx0LCBtZXNzYWdlOiAnJyB9O1xufTtcbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluQXNzZXQsIF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgU3VwcG9ydFRyYW5zZmVyUmVzcG9uc2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IGdldFBTUDIyQ29udHJhY3RQcm9taXNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS90b2tlbnMvd2FzbSc7XG5pbXBvcnQgeyBnZXRXYXNtQ29udHJhY3RHYXNMaW1pdCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvdG9rZW5zL3dhc20vdXRpbHMnO1xuaW1wb3J0IHsgX0JBTEFOQ0VfVE9LRU5fR1JPVVAsIF9NQU5UQV9aS19DSEFJTl9HUk9VUCwgX1RSQU5TRkVSX0NIQUlOX0dST1VQLCBfVFJBTlNGRVJfTk9UX1NVUFBPUlRFRF9DSEFJTlMsIF9aS19BU1NFVF9QUkVGSVggfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgX2dldENvbnRyYWN0QWRkcmVzc09mVG9rZW4sIF9nZXRUb2tlbk9uQ2hhaW5Bc3NldElkLCBfZ2V0VG9rZW5PbkNoYWluSW5mbywgX2lzQ2hhaW5Fdm1Db21wYXRpYmxlLCBfaXNOYXRpdmVUb2tlbiwgX2lzVG9rZW5XYXNtU21hcnRDb250cmFjdCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5cbmltcG9ydCB7IFN1Ym1pdHRhYmxlRXh0cmluc2ljIH0gZnJvbSAnQHBvbGthZG90L2FwaS9wcm9taXNlL3R5cGVzJztcbmltcG9ydCB7IEFjY291bnRJbmZvV2l0aFByb3ZpZGVycywgQWNjb3VudEluZm9XaXRoUmVmQ291bnQgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBCTiB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcblxuZnVuY3Rpb24gaXNSZWZDb3VudCAoYWNjb3VudEluZm86IEFjY291bnRJbmZvV2l0aFByb3ZpZGVycyB8IEFjY291bnRJbmZvV2l0aFJlZkNvdW50KTogYWNjb3VudEluZm8gaXMgQWNjb3VudEluZm9XaXRoUmVmQ291bnQge1xuICByZXR1cm4gISEoYWNjb3VudEluZm8gYXMgQWNjb3VudEluZm9XaXRoUmVmQ291bnQpLnJlZmNvdW50O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tSZWZlcmVuY2VDb3VudCAobmV0d29ya0tleTogc3RyaW5nLCBhZGRyZXNzOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaU1hcDogUmVjb3JkPHN0cmluZywgX1N1YnN0cmF0ZUFwaT4sIGNoYWluSW5mbzogX0NoYWluSW5mbyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zb2xlLmxvZygnU3RhcnRpbmcgY2hlY2tSZWZlcmVuY2VDb3VudCcpO1xuICBjb25zb2xlLmxvZygnUGFyYW1ldGVyczonLCB7IG5ldHdvcmtLZXksIGFkZHJlc3MgfSk7XG4gIGNvbnN0IGFwaVByb3BzID0gYXdhaXQgc3Vic3RyYXRlQXBpTWFwW25ldHdvcmtLZXldLmlzUmVhZHk7XG4gIGNvbnN0IGFwaSA9IGFwaVByb3BzLmFwaTtcblxuICBjb25zb2xlLmxvZygnQVBJIGZldGNoZWQ6JywgYXBpKTtcbiAgY29uc29sZS5sb2coT2JqZWN0LmtleXMoYXBpLnR4KSk7XG4gIGNvbnNvbGUubG9nKGFwaS50eC5iYWxhbmNlcyA/ICdCYWxhbmNlcyBtb2R1bGUgYXZhaWxhYmxlJyA6ICdCYWxhbmNlcyBtb2R1bGUgbm90IGF2YWlsYWJsZScpO1xuXG4gIGlmIChfaXNDaGFpbkV2bUNvbXBhdGlibGUoY2hhaW5JbmZvKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIEB0cy1pZ25vcmVcbiAgY29uc3QgYWNjb3VudEluZm86IEFjY291bnRJbmZvV2l0aFByb3ZpZGVycyB8IEFjY291bnRJbmZvV2l0aFJlZkNvdW50ID0gYXdhaXQgYXBpLnF1ZXJ5LnN5c3RlbS5hY2NvdW50KGFkZHJlc3MpO1xuXG4gIHJldHVybiBhY2NvdW50SW5mb1xuICAgID8gaXNSZWZDb3VudChhY2NvdW50SW5mbylcbiAgICAgID8gIWFjY291bnRJbmZvLnJlZmNvdW50LmlzWmVybygpXG4gICAgICA6ICFhY2NvdW50SW5mby5jb25zdW1lcnMuaXNaZXJvKClcbiAgICA6IGZhbHNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tTdXBwb3J0VHJhbnNmZXIgKG5ldHdvcmtLZXk6IHN0cmluZywgdG9rZW5JbmZvOiBfQ2hhaW5Bc3NldCwgc3Vic3RyYXRlQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfU3Vic3RyYXRlQXBpPiwgY2hhaW5JbmZvOiBfQ2hhaW5JbmZvKTogUHJvbWlzZTxTdXBwb3J0VHJhbnNmZXJSZXNwb25zZT4ge1xuICBjb25zdCBzdWJzdHJhdGVBcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGlNYXBbbmV0d29ya0tleV0uaXNSZWFkeTtcblxuICBpZiAoIXRva2VuSW5mbykge1xuICAgIHJldHVybiB7XG4gICAgICBzdXBwb3J0VHJhbnNmZXI6IGZhbHNlLFxuICAgICAgc3VwcG9ydFRyYW5zZmVyQWxsOiBmYWxzZVxuICAgIH07XG4gIH1cblxuICBpZiAoX2lzQ2hhaW5Fdm1Db21wYXRpYmxlKGNoYWluSW5mbykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VwcG9ydFRyYW5zZmVyOiB0cnVlLFxuICAgICAgc3VwcG9ydFRyYW5zZmVyQWxsOiB0cnVlXG4gICAgfTtcbiAgfVxuXG4gIGlmICh0b2tlbkluZm8uc3ltYm9sLnN0YXJ0c1dpdGgoX1pLX0FTU0VUX1BSRUZJWCkgJiYgX01BTlRBX1pLX0NIQUlOX0dST1VQLmluY2x1ZGVzKHRva2VuSW5mby5vcmlnaW5DaGFpbikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VwcG9ydFRyYW5zZmVyOiBmYWxzZSxcbiAgICAgIHN1cHBvcnRUcmFuc2ZlckFsbDogZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgaWYgKF9UUkFOU0ZFUl9OT1RfU1VQUE9SVEVEX0NIQUlOUy5pbmNsdWRlcyhuZXR3b3JrS2V5KSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdXBwb3J0VHJhbnNmZXI6IGZhbHNlLFxuICAgICAgc3VwcG9ydFRyYW5zZmVyQWxsOiBmYWxzZVxuICAgIH07XG4gIH1cblxuICBjb25zdCBhcGkgPSBzdWJzdHJhdGVBcGkuYXBpO1xuICBjb25zdCBpc1R4Q3VycmVuY2llc1N1cHBvcnRlZCA9ICEhYXBpICYmICEhYXBpLnR4ICYmICEhYXBpLnR4LmN1cnJlbmNpZXM7XG4gIGNvbnN0IGlzVHhCYWxhbmNlc1N1cHBvcnRlZCA9ICEhYXBpICYmICEhYXBpLnR4ICYmICEhYXBpLnR4LmJhbGFuY2VzO1xuICBjb25zdCBpc1R4VG9rZW5zU3VwcG9ydGVkID0gISFhcGkgJiYgISFhcGkudHggJiYgISFhcGkudHgudG9rZW5zO1xuICBjb25zdCBpc1R4RXFCYWxhbmNlc1N1cHBvcnRlZCA9ICEhYXBpICYmICEhYXBpLnR4ICYmICEhYXBpLnR4LmVxQmFsYW5jZXM7XG4gIGNvbnN0IHJlc3VsdDogU3VwcG9ydFRyYW5zZmVyUmVzcG9uc2UgPSB7XG4gICAgc3VwcG9ydFRyYW5zZmVyOiBmYWxzZSxcbiAgICBzdXBwb3J0VHJhbnNmZXJBbGw6IGZhbHNlXG4gIH07XG5cbiAgaWYgKCEoaXNUeEN1cnJlbmNpZXNTdXBwb3J0ZWQgfHwgaXNUeEJhbGFuY2VzU3VwcG9ydGVkIHx8IGlzVHhUb2tlbnNTdXBwb3J0ZWQgfHwgaXNUeEVxQmFsYW5jZXNTdXBwb3J0ZWQpKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmIChfaXNUb2tlbldhc21TbWFydENvbnRyYWN0KHRva2VuSW5mbykgJiYgYXBpLnF1ZXJ5LmNvbnRyYWN0cykgeyAvLyBmb3IgUFNQIHRva2Vuc1xuICAgIHJldHVybiB7XG4gICAgICBzdXBwb3J0VHJhbnNmZXI6IHRydWUsXG4gICAgICBzdXBwb3J0VHJhbnNmZXJBbGw6IHRydWVcbiAgICB9O1xuICB9XG5cbiAgLy8gVE9ETzogbmVlZCByZXZpZXdcbiAgaWYgKF9UUkFOU0ZFUl9DSEFJTl9HUk9VUC5hY2FsYS5pbmNsdWRlcyhuZXR3b3JrS2V5KSAmJiAhX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSAmJiBpc1R4Q3VycmVuY2llc1N1cHBvcnRlZCkge1xuICAgIHJlc3VsdC5zdXBwb3J0VHJhbnNmZXIgPSB0cnVlO1xuICAgIHJlc3VsdC5zdXBwb3J0VHJhbnNmZXJBbGwgPSB0cnVlO1xuICB9IGVsc2UgaWYgKF9UUkFOU0ZFUl9DSEFJTl9HUk9VUC5raW50c3VnaS5pbmNsdWRlcyhuZXR3b3JrS2V5KSAmJiAhX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSAmJiBpc1R4VG9rZW5zU3VwcG9ydGVkKSB7XG4gICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlciA9IHRydWU7XG4gICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlckFsbCA9IHRydWU7XG4gIH0gZWxzZSBpZiAoXG4gICAgX1RSQU5TRkVSX0NIQUlOX0dST1VQLmdlbnNoaXJvLmluY2x1ZGVzKG5ldHdvcmtLZXkpXG4gICAgLy8gJiYgIV9pc05hdGl2ZVRva2VuKHRva2VuSW5mbykgJiYgaXNUeEVxQmFsYW5jZXNTdXBwb3J0ZWRcbiAgKSB7XG4gICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlciA9IGZhbHNlO1xuICAgIHJlc3VsdC5zdXBwb3J0VHJhbnNmZXJBbGwgPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChfVFJBTlNGRVJfQ0hBSU5fR1JPVVAuY3JhYi5pbmNsdWRlcyhuZXR3b3JrS2V5KSAmJiBfQkFMQU5DRV9UT0tFTl9HUk9VUC5jcmFiLmluY2x1ZGVzKHRva2VuSW5mby5zeW1ib2wpKSB7XG4gICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlciA9IHRydWU7XG4gICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlckFsbCA9IHRydWU7XG4gIH0gZWxzZSBpZiAoaXNUeEJhbGFuY2VzU3VwcG9ydGVkICYmIF9pc05hdGl2ZVRva2VuKHRva2VuSW5mbykpIHtcbiAgICByZXN1bHQuc3VwcG9ydFRyYW5zZmVyID0gdHJ1ZTtcbiAgICByZXN1bHQuc3VwcG9ydFRyYW5zZmVyQWxsID0gdHJ1ZTtcbiAgfSBlbHNlIGlmIChfVFJBTlNGRVJfQ0hBSU5fR1JPVVAuYml0Y291bnRyeS5pbmNsdWRlcyhuZXR3b3JrS2V5KSAmJiAhX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSAmJiBfQkFMQU5DRV9UT0tFTl9HUk9VUC5iaXRjb3VudHJ5LmluY2x1ZGVzKHRva2VuSW5mby5zeW1ib2wpKSB7XG4gICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlciA9IHRydWU7XG4gICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlckFsbCA9IHRydWU7XG4gIH0gZWxzZSBpZiAoX1RSQU5TRkVSX0NIQUlOX0dST1VQLnN0YXRlbWluZS5pbmNsdWRlcyhuZXR3b3JrS2V5KSAmJiAhX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSkge1xuICAgIHJlc3VsdC5zdXBwb3J0VHJhbnNmZXIgPSB0cnVlO1xuICAgIHJlc3VsdC5zdXBwb3J0VHJhbnNmZXJBbGwgPSB0cnVlO1xuICB9IGVsc2UgaWYgKF9UUkFOU0ZFUl9DSEFJTl9HUk9VUC5zb3JhX3N1YnN0cmF0ZS5pbmNsdWRlcyhuZXR3b3JrS2V5KSkge1xuICAgIHJlc3VsdC5zdXBwb3J0VHJhbnNmZXIgPSB0cnVlO1xuICAgIHJlc3VsdC5zdXBwb3J0VHJhbnNmZXJBbGwgPSB0cnVlO1xuICAvLyB9IGVsc2UgaWYgKF9UUkFOU0ZFUl9DSEFJTl9HUk9VUC5yaW9jaGFpbi5pbmNsdWRlcyhuZXR3b3JrS2V5KSAmJiBfaXNOYXRpdmVUb2tlbih0b2tlbkluZm8pKSB7XG4gIC8vICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlciA9IHRydWU7XG4gIC8vICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlckFsbCA9IHRydWU7XG4gIH0gZWxzZSBpZiAoX1RSQU5TRkVSX0NIQUlOX0dST1VQLmF2YWlsLmluY2x1ZGVzKG5ldHdvcmtLZXkpKSB7XG4gICAgcmVzdWx0LnN1cHBvcnRUcmFuc2ZlciA9IGZhbHNlO1xuICAgIHJlc3VsdC5zdXBwb3J0VHJhbnNmZXJBbGwgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmludGVyZmFjZSBDcmVhdGVUcmFuc2ZlckV4dHJpbnNpY1Byb3BzIHtcbiAgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpO1xuICBuZXR3b3JrS2V5OiBzdHJpbmcsXG4gIHRvOiBzdHJpbmcsXG4gIGZyb206IHN0cmluZyxcbiAgdmFsdWU6IHN0cmluZyxcbiAgdHJhbnNmZXJBbGw6IGJvb2xlYW4sXG4gIHRva2VuSW5mbzogX0NoYWluQXNzZXQsXG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVUcmFuc2ZlckV4dHJpbnNpYyA9IGFzeW5jICh7IGZyb20sIG5ldHdvcmtLZXksIHN1YnN0cmF0ZUFwaSwgdG8sIHRva2VuSW5mbywgdHJhbnNmZXJBbGwsIHZhbHVlIH06IENyZWF0ZVRyYW5zZmVyRXh0cmluc2ljUHJvcHMpOiBQcm9taXNlPFtTdWJtaXR0YWJsZUV4dHJpbnNpYyB8IG51bGwsIHN0cmluZ10+ID0+IHtcbiAgY29uc3QgYXBpID0gc3Vic3RyYXRlQXBpLmFwaTtcblxuICAvLyBAdHMtaWdub3JlXG4gIGxldCB0cmFuc2ZlcjogU3VibWl0dGFibGVFeHRyaW5zaWM8J3Byb21pc2UnPiB8IG51bGwgPSBudWxsO1xuICBjb25zdCBpc1R4Q3VycmVuY2llc1N1cHBvcnRlZCA9ICEhYXBpICYmICEhYXBpLnR4ICYmICEhYXBpLnR4LmN1cnJlbmNpZXM7XG4gIGNvbnN0IGlzVHhCYWxhbmNlc1N1cHBvcnRlZCA9ICEhYXBpICYmICEhYXBpLnR4ICYmICEhYXBpLnR4LmJhbGFuY2VzO1xuICBjb25zdCBpc1R4VG9rZW5zU3VwcG9ydGVkID0gISFhcGkgJiYgISFhcGkudHggJiYgISFhcGkudHgudG9rZW5zO1xuICAvLyBjb25zdCBpc1R4RXFCYWxhbmNlc1N1cHBvcnRlZCA9ICEhYXBpICYmICEhYXBpLnR4ICYmICEhYXBpLnR4LmVxQmFsYW5jZXM7XG4gIGNvbnN0IGlzVHhBc3NldHNTdXBwb3J0ZWQgPSAhIWFwaSAmJiAhIWFwaS50eCAmJiAhIWFwaS50eC5hc3NldHM7XG4gIGxldCB0cmFuc2ZlckFtb3VudDsgLy8gZm9yIFBTUC0yMiB0b2tlbnMsIG1pZ2h0IGJlIGRlcHJlY2F0ZWQgaW4gdGhlIGZ1dHVyZVxuXG4gIGlmIChfaXNUb2tlbldhc21TbWFydENvbnRyYWN0KHRva2VuSW5mbykgJiYgYXBpLnF1ZXJ5LmNvbnRyYWN0cykge1xuICAgIGNvbnN0IGNvbnRyYWN0UHJvbWlzZSA9IGdldFBTUDIyQ29udHJhY3RQcm9taXNlKGFwaSwgX2dldENvbnRyYWN0QWRkcmVzc09mVG9rZW4odG9rZW5JbmZvKSk7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGdhc0xpbWl0ID0gYXdhaXQgZ2V0V2FzbUNvbnRyYWN0R2FzTGltaXQoYXBpLCBmcm9tLCAncHNwMjI6OnRyYW5zZmVyJywgY29udHJhY3RQcm9taXNlLCB7fSwgW2Zyb20sIHZhbHVlLCB7fV0pO1xuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHRyYW5zZmVyID0gY29udHJhY3RQcm9taXNlLnR4Wydwc3AyMjo6dHJhbnNmZXInXSh7IGdhc0xpbWl0IH0sIHRvLCB2YWx1ZSwge30pO1xuICAgIHRyYW5zZmVyQW1vdW50ID0gdmFsdWU7XG4gIH0gZWxzZSBpZiAoX1RSQU5TRkVSX0NIQUlOX0dST1VQLmFjYWxhLmluY2x1ZGVzKG5ldHdvcmtLZXkpKSB7XG4gICAgaWYgKCFfaXNOYXRpdmVUb2tlbih0b2tlbkluZm8pKSB7XG4gICAgICBpZiAoaXNUeEN1cnJlbmNpZXNTdXBwb3J0ZWQpIHtcbiAgICAgICAgdHJhbnNmZXIgPSBhcGkudHguY3VycmVuY2llcy50cmFuc2Zlcih0bywgX2dldFRva2VuT25DaGFpbkluZm8odG9rZW5JbmZvKSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHJhbnNmZXJBbGwpIHtcbiAgICAgICAgdHJhbnNmZXIgPSBhcGkudHguYmFsYW5jZXMudHJhbnNmZXJBbGwodG8sIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgICAgdHJhbnNmZXIgPSBhcGkudHguYmFsYW5jZXMudHJhbnNmZXJLZWVwQWxpdmUodG8sIG5ldyBCTih2YWx1ZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChfVFJBTlNGRVJfQ0hBSU5fR1JPVVAua2ludHN1Z2kuaW5jbHVkZXMobmV0d29ya0tleSkgJiYgaXNUeFRva2Vuc1N1cHBvcnRlZCkge1xuICAgIGlmICh0cmFuc2ZlckFsbCkge1xuICAgICAgdHJhbnNmZXIgPSBhcGkudHgudG9rZW5zLnRyYW5zZmVyQWxsKHRvLCBfZ2V0VG9rZW5PbkNoYWluSW5mbyh0b2tlbkluZm8pIHx8IF9nZXRUb2tlbk9uQ2hhaW5Bc3NldElkKHRva2VuSW5mbyksIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICB0cmFuc2ZlciA9IGFwaS50eC50b2tlbnMudHJhbnNmZXIodG8sIF9nZXRUb2tlbk9uQ2hhaW5JbmZvKHRva2VuSW5mbykgfHwgX2dldFRva2VuT25DaGFpbkFzc2V0SWQodG9rZW5JbmZvKSwgbmV3IEJOKHZhbHVlKSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKF9UUkFOU0ZFUl9DSEFJTl9HUk9VUC5wZW5kdWx1bS5pbmNsdWRlcyhuZXR3b3JrS2V5KSAmJiBpc1R4VG9rZW5zU3VwcG9ydGVkICYmICFfaXNOYXRpdmVUb2tlbih0b2tlbkluZm8pKSB7XG4gICAgaWYgKHRyYW5zZmVyQWxsKSB7XG4gICAgICB0cmFuc2ZlciA9IGFwaS50eC50b2tlbnMudHJhbnNmZXJBbGwodG8sIF9nZXRUb2tlbk9uQ2hhaW5JbmZvKHRva2VuSW5mbyksIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICB0cmFuc2ZlciA9IGFwaS50eC50b2tlbnMudHJhbnNmZXIodG8sIF9nZXRUb2tlbk9uQ2hhaW5JbmZvKHRva2VuSW5mbyksIG5ldyBCTih2YWx1ZSkpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChcbiAgICBfVFJBTlNGRVJfQ0hBSU5fR1JPVVAuZ2Vuc2hpcm8uaW5jbHVkZXMobmV0d29ya0tleSlcbiAgICAvLyAmJiBpc1R4RXFCYWxhbmNlc1N1cHBvcnRlZFxuICApIHtcbiAgICAvLyB0cmFuc2ZlciA9IGFwaS50eC5lcUJhbGFuY2VzLnRyYW5zZmVyKF9nZXRUb2tlbk9uQ2hhaW5Bc3NldElkKHRva2VuSW5mbyksIHRvLCB2YWx1ZSk7XG4gICAgLyogZW1wdHkgKi9cbiAgfSBlbHNlIGlmICghX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSAmJiAoX1RSQU5TRkVSX0NIQUlOX0dST1VQLmNyYWIuaW5jbHVkZXMobmV0d29ya0tleSkgfHwgX0JBTEFOQ0VfVE9LRU5fR1JPVVAuY3JhYi5pbmNsdWRlcyh0b2tlbkluZm8uc3ltYm9sKSkpIHtcbiAgICBpZiAodHJhbnNmZXJBbGwpIHtcbiAgICAgIHRyYW5zZmVyID0gYXBpLnR4Lmt0b24udHJhbnNmZXJBbGwodG8sIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICB0cmFuc2ZlciA9IGFwaS50eC5rdG9uLnRyYW5zZmVyKHRvLCBuZXcgQk4odmFsdWUpKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoX1RSQU5TRkVSX0NIQUlOX0dST1VQLmJpdGNvdW50cnkuaW5jbHVkZXMobmV0d29ya0tleSkgJiYgIV9pc05hdGl2ZVRva2VuKHRva2VuSW5mbykpIHtcbiAgICB0cmFuc2ZlciA9IGFwaS50eC5jdXJyZW5jaWVzLnRyYW5zZmVyKHRvLCBfZ2V0VG9rZW5PbkNoYWluSW5mbyh0b2tlbkluZm8pLCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoX1RSQU5TRkVSX0NIQUlOX0dST1VQLnN0YXRlbWluZS5pbmNsdWRlcyhuZXR3b3JrS2V5KSAmJiAhX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSkge1xuICAgIHRyYW5zZmVyID0gYXBpLnR4LmFzc2V0cy50cmFuc2ZlcihfZ2V0VG9rZW5PbkNoYWluQXNzZXRJZCh0b2tlbkluZm8pLCB0bywgdmFsdWUpO1xuICAgIC8vIH0gZWxzZSBpZiAoX1RSQU5TRkVSX0NIQUlOX0dST1VQLnJpb2NoYWluLmluY2x1ZGVzKG5ldHdvcmtLZXkpKSB7XG4gICAgLy8gICBpZiAoX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSkge1xuICAgIC8vICAgICB0cmFuc2ZlciA9IGFwaS50eC5jdXJyZW5jaWVzLnRyYW5zZmVyTmF0aXZlQ3VycmVuY3kodG8sIHZhbHVlKTtcbiAgICAvLyAgIH1cbiAgfSBlbHNlIGlmIChfVFJBTlNGRVJfQ0hBSU5fR1JPVVAuc29yYV9zdWJzdHJhdGUuaW5jbHVkZXMobmV0d29ya0tleSkgJiYgaXNUeEFzc2V0c1N1cHBvcnRlZCkge1xuICAgIHRyYW5zZmVyID0gYXBpLnR4LmFzc2V0cy50cmFuc2ZlcihfZ2V0VG9rZW5PbkNoYWluQXNzZXRJZCh0b2tlbkluZm8pLCB0bywgdmFsdWUpO1xuICB9IGVsc2UgaWYgKGlzVHhCYWxhbmNlc1N1cHBvcnRlZCAmJiBfaXNOYXRpdmVUb2tlbih0b2tlbkluZm8pKSB7XG4gICAgaWYgKHRyYW5zZmVyQWxsKSB7XG4gICAgICAvLyBhbGVydCgnQXZhaWxhYmxlIG1vZHVsZXM6ICcgKyBPYmplY3Qua2V5cyhhcGkudHgpLmpvaW4oJywgJykpO1xuICAgICAgLy8gYWxlcnQoJ0JhbGFuY2VzIG1ldGhvZHM6ICcgKyAoYXBpLnR4LmJhbGFuY2VzID8gT2JqZWN0LmtleXMoYXBpLnR4LmJhbGFuY2VzKS5qb2luKCcsICcpIDogJ0JhbGFuY2VzIG5vdCBhdmFpbGFibGUnKSk7XG4gICAgICB0cmFuc2ZlciA9IGFwaS50eC5iYWxhbmNlcy50cmFuc2ZlckFsbCh0bywgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgIC8vIHRyYW5zZmVyID0gYXBpLnR4LmJhbGFuY2VzLnRyYW5zZmVyKHRvLCBuZXcgQk4odmFsdWUpKTtcbiAgICAgIHRyYW5zZmVyID0gYXBpLnR4LmJhbGFuY2VzLnRyYW5zZmVyS2VlcEFsaXZlKHRvLCBuZXcgQk4odmFsdWUpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gW3RyYW5zZmVyLCB0cmFuc2ZlckFtb3VudCB8fCB2YWx1ZV07XG59O1xuIiwiLy8gQ29weXJpZ2h0IDIwMTctMjAyMiBAcG9sa2Fkb3QvcmVhY3QtYXBpIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IFR5cGVSZWdpc3RyeSB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy9jcmVhdGUnO1xuXG5jb25zdCByZWdpc3RyeSA9IG5ldyBUeXBlUmVnaXN0cnkoKTtcblxuZXhwb3J0IGRlZmF1bHQgcmVnaXN0cnk7XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgTmZ0Q29sbGVjdGlvbiwgTmZ0SXRlbSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgZ2V0UmFuZG9tSXBmc0dhdGV3YXkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC9jb25maWcnO1xuaW1wb3J0IHsgQmFzZU5mdEFwaSwgSGFuZGxlTmZ0UGFyYW1zIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQvbmZ0JztcbmltcG9ydCB7IF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgaXNVcmwgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzJztcbmltcG9ydCBmZXRjaCBmcm9tICdjcm9zcy1mZXRjaCc7XG5cbmludGVyZmFjZSBBc3NldElkIHtcbiAgY2xhc3NJZDogc3RyaW5nIHwgbnVtYmVyLFxuICB0b2tlbklkOiBzdHJpbmcgfCBudW1iZXJcbn1cblxuaW50ZXJmYWNlIENvbGxlY3Rpb24ge1xuICBuYW1lOiBzdHJpbmcsXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gIGltYWdlOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFRva2VuIHtcbiAgbWV0YWRhdGE/OiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIG93bmVyPzogc3RyaW5nLFxuICBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxuICBuYW1lPzogc3RyaW5nLFxuICBkZXNjcmlwdGlvbj86IHN0cmluZyxcbiAgaW1hZ2U/OiBzdHJpbmdcbn1cblxuY29uc3QgYWNhbGFFeHRlcm5hbEJhc2VVcmwgPSAnaHR0cHM6Ly9hcHBzLmFjYWxhLm5ldHdvcmsvcG9ydGZvbGlvL25mdC8nO1xuXG5leHBvcnQgY2xhc3MgQWNhbGFOZnRBcGkgZXh0ZW5kcyBCYXNlTmZ0QXBpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgY29uc3RydWN0b3IgKGFwaTogX1N1YnN0cmF0ZUFwaSB8IG51bGwsIGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluOiBzdHJpbmcpIHtcbiAgICBzdXBlcihjaGFpbiwgYXBpLCBhZGRyZXNzZXMpO1xuICB9XG5cbiAgb3ZlcnJpZGUgcGFyc2VVcmwgKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICghaW5wdXQgfHwgaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChpc1VybChpbnB1dCkpIHtcbiAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG5cbiAgICBpZiAoIWlucHV0LmluY2x1ZGVzKCdpcGZzOi8vJykpIHtcbiAgICAgIHJldHVybiBnZXRSYW5kb21JcGZzR2F0ZXdheSgpICsgaW5wdXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldFJhbmRvbUlwZnNHYXRld2F5KCkgKyBpbnB1dC5zcGxpdCgnaXBmczovLycpWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGlkIG9mIE5GVHNcbiAgICpcbiAgICogQHJldHVybnMgdGhlIGFycmF5IG9mIE5GVCBJZHNcbiAgICogQHBhcmFtIGFkZHJlc3Nlc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXROZnRzIChhZGRyZXNzZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxBc3NldElkW10+IHtcbiAgICBpZiAoIXRoaXMuc3Vic3RyYXRlQXBpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgYXNzZXRJZHM6IEFzc2V0SWRbXSA9IFtdO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoYWRkcmVzc2VzLm1hcChhc3luYyAoYWRkcmVzcykgPT4ge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5vcm1sTkZULnRva2Vuc0J5T3duZXIua2V5cyhhZGRyZXNzKTtcblxuICAgICAgaWYgKHJlc3ApIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcmVzcCkge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgY29uc3QgZGF0YSA9IGtleS50b0h1bWFuKCkgYXMgc3RyaW5nW107XG5cbiAgICAgICAgICBhc3NldElkcy5wdXNoKHsgY2xhc3NJZDogZGF0YVsxXSwgdG9rZW5JZDogdGhpcy5wYXJzZVRva2VuSWQoZGF0YVsyXSkgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICByZXR1cm4gYXNzZXRJZHM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldENvbGxlY3Rpb25EZXRhaWxzIChjb2xsZWN0aW9uSWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgYW55PiB8IG51bGw+IHtcbiAgICBpZiAoIXRoaXMuc3Vic3RyYXRlQXBpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBtZXRhZGF0YUNvbGxlY3Rpb24gPSAoYXdhaXQgdGhpcy5zdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5Lm9ybWxORlQuY2xhc3Nlcyhjb2xsZWN0aW9uSWQpKS50b0h1bWFuKCkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcblxuICAgIGlmICghbWV0YWRhdGFDb2xsZWN0aW9uPy5tZXRhZGF0YSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldE1ldGFkYXRhKG1ldGFkYXRhQ29sbGVjdGlvbj8ubWV0YWRhdGEgYXMgc3RyaW5nKSBhcyB1bmtub3duIGFzIENvbGxlY3Rpb247XG5cbiAgICByZXR1cm4geyAuLi5kYXRhLCBpbWFnZTogdGhpcy5wYXJzZVVybChkYXRhLmltYWdlKSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRUb2tlbkRldGFpbHMgKGFzc2V0SWQ6IEFzc2V0SWQpOiBQcm9taXNlPFRva2VuIHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiAoYXdhaXQgdGhpcy5zdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5Lm9ybWxORlQudG9rZW5zKGFzc2V0SWQuY2xhc3NJZCwgYXNzZXRJZC50b2tlbklkKSkudG9IdW1hbigpIGFzIHVua25vd24gYXMgVG9rZW47XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZU5mdCAoYWRkcmVzczogc3RyaW5nLCBwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcykge1xuICAgIGNvbnN0IGFzc2V0SWRzID0gYXdhaXQgdGhpcy5nZXROZnRzKFthZGRyZXNzXSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFhc3NldElkcyB8fCBhc3NldElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb2xsZWN0aW9uSWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3QgbmZ0SWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChhc3NldElkcy5tYXAoYXN5bmMgKGFzc2V0SWQpID0+IHtcbiAgICAgICAgY29uc3QgcGFyc2VkQ2xhc3NJZCA9IHRoaXMucGFyc2VUb2tlbklkKGFzc2V0SWQuY2xhc3NJZCBhcyBzdHJpbmcpO1xuICAgICAgICBjb25zdCBwYXJzZWRUb2tlbklkID0gdGhpcy5wYXJzZVRva2VuSWQoYXNzZXRJZC50b2tlbklkIGFzIHN0cmluZyk7XG5cbiAgICAgICAgaWYgKCFjb2xsZWN0aW9uSWRzLmluY2x1ZGVzKHBhcnNlZENsYXNzSWQpKSB7XG4gICAgICAgICAgY29sbGVjdGlvbklkcy5wdXNoKHBhcnNlZENsYXNzSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmZ0SWRzLnB1c2gocGFyc2VkVG9rZW5JZCk7XG5cbiAgICAgICAgY29uc3QgW3Rva2VuSW5mbywgY29sbGVjdGlvbk1ldGFdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIHRoaXMuZ2V0VG9rZW5EZXRhaWxzKGFzc2V0SWQpLFxuICAgICAgICAgIHRoaXMuZ2V0Q29sbGVjdGlvbkRldGFpbHMocGFyc2VJbnQocGFyc2VkQ2xhc3NJZCkpXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZE5mdCA9IHtcbiAgICAgICAgICBpZDogcGFyc2VkVG9rZW5JZCxcbiAgICAgICAgICBuYW1lOiB0b2tlbkluZm8/Lm5hbWUsXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdG9rZW5JbmZvICYmIHRva2VuSW5mby5kZXNjcmlwdGlvbiA/IHRva2VuSW5mby5kZXNjcmlwdGlvbiA6IGNvbGxlY3Rpb25NZXRhPy5kZXNjcmlwdGlvbixcbiAgICAgICAgICBleHRlcm5hbFVybDogYWNhbGFFeHRlcm5hbEJhc2VVcmwgKyBwYXJzZWRDbGFzc0lkLFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgICAgaW1hZ2U6IHRva2VuSW5mbyAmJiB0b2tlbkluZm8uaW1hZ2UgPyB0aGlzLnBhcnNlVXJsKHRva2VuSW5mbz8uaW1hZ2UpIDogY29sbGVjdGlvbk1ldGE/LmltYWdlLFxuICAgICAgICAgIGNvbGxlY3Rpb25JZDogcGFyc2VkQ2xhc3NJZCxcbiAgICAgICAgICBjaGFpbjogdGhpcy5jaGFpbixcbiAgICAgICAgICBvd25lcjogYWRkcmVzc1xuICAgICAgICB9IGFzIE5mdEl0ZW07XG5cbiAgICAgICAgY29uc3QgcGFyc2VkQ29sbGVjdGlvbiA9IHtcbiAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHBhcnNlZENsYXNzSWQsXG4gICAgICAgICAgY2hhaW46IHRoaXMuY2hhaW4sXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICBjb2xsZWN0aW9uTmFtZTogY29sbGVjdGlvbk1ldGE/Lm5hbWUsXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICBpbWFnZTogY29sbGVjdGlvbk1ldGE/LmltYWdlXG4gICAgICAgIH0gYXMgTmZ0Q29sbGVjdGlvbjtcblxuICAgICAgICBwYXJhbXMudXBkYXRlSXRlbSh0aGlzLmNoYWluLCBwYXJzZWROZnQsIGFkZHJlc3MpO1xuICAgICAgICBwYXJhbXMudXBkYXRlQ29sbGVjdGlvbih0aGlzLmNoYWluLCBwYXJzZWRDb2xsZWN0aW9uKTtcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGAke3RoaXMuY2hhaW59YCwgZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZU5mdHMgKHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5hZGRyZXNzZXMubWFwKChhZGRyZXNzKSA9PiB0aGlzLmhhbmRsZU5mdChhZGRyZXNzLCBwYXJhbXMpKSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmV0Y2hOZnRzIChwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVOZnRzKHBhcmFtcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIDE7XG4gIH1cbn1cblxuY29uc3QgaGVhZGVycyA9IHtcbiAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xufTtcblxuY29uc3QgZ2V0TWV0YWRhdGEgPSAobWV0YWRhdGFVcmw6IHN0cmluZykgPT4ge1xuICBsZXQgdXJsOiBzdHJpbmcgfCBudWxsID0gbWV0YWRhdGFVcmw7XG5cbiAgaWYgKCFtZXRhZGF0YVVybCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdXJsID0gZ2V0UmFuZG9tSXBmc0dhdGV3YXkoKSArIG1ldGFkYXRhVXJsICsgJy9hemVyb19kb21haW5fcmVnaXN0cnlfYWJpLmpzb24nO1xuXG4gIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhlYWRlcnNcbiAgfSlcbiAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKTtcbn07XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Vcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEJJVF9DT1VOVFJZX0lQRlNfU0VSVkVSLCBCSVRfQ09VTlRSWV9MQU5EX0VTVEFURV9NRVRBREFUQV9BUEkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC9jb25maWcnO1xuaW1wb3J0IHsgQmFzZU5mdEFwaSwgSGFuZGxlTmZ0UGFyYW1zIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQvbmZ0JztcbmltcG9ydCB7IF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgaXNVcmwgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzJztcbmltcG9ydCBmZXRjaCBmcm9tICdjcm9zcy1mZXRjaCc7XG5cbmltcG9ydCB7IEJOX1pFUk8sIGhleFRvQm4gfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5cbmludGVyZmFjZSBBc3NldElkIHtcbiAgY2xhc3NJZDogc3RyaW5nIHwgbnVtYmVyLFxuICB0b2tlbklkOiBzdHJpbmcgfCBudW1iZXIsXG4gIG93bmVyOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIE9ybWxOZnRUb2tlbkluZm8ge1xuICBtZXRhZGF0YTogdW5rbm93bixcbiAgb3duZXI6IHN0cmluZyxcbiAgZGF0YToge1xuICAgIGRlcG9zaXQ6IHN0cmluZyxcbiAgICBhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgICBpc0xvY2tlZDogYm9vbGVhblxuICB9XG59XG5cbmludGVyZmFjZSBPcm1sTmZ0Q2xhc3NJbmZvIHtcbiAgbWV0YWRhdGE6IHVua25vd24sXG4gIHRvdGFsSXNzdWFuY2U6IG51bWJlcixcbiAgb3duZXI6IHN0cmluZyxcbiAgZGF0YToge1xuICAgIGRlcG9zaXQ6IHN0cmluZyxcbiAgICBhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgICB0b2tlblR5cGU6IHN0cmluZyxcbiAgICBjb2xsZWN0aW9uVHlwZTogc3RyaW5nLFxuICAgIGlzTG9ja2VkOiBib29sZWFuLFxuICAgIHRvdGFsTWludGVkVG9rZW5zOiBudW1iZXIsXG4gICAgbWludExpbWl0OiB1bmtub3duLFxuICAgIHJveWFsdHlGZWU6IHN0cmluZ1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCaXRDb3VudHJ5TmZ0QXBpIGV4dGVuZHMgQmFzZU5mdEFwaSB7XG4gIGNvbnN0cnVjdG9yIChhcGk6IF9TdWJzdHJhdGVBcGkgfCBudWxsLCBhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nKSB7XG4gICAgc3VwZXIoY2hhaW4sIGFwaSwgYWRkcmVzc2VzKTtcbiAgfVxuXG4gIG92ZXJyaWRlIHBhcnNlVXJsIChpbnB1dDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIWlucHV0IHx8IGlucHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoaXNVcmwoaW5wdXQpKSB7XG4gICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgaWYgKCFpbnB1dC5pbmNsdWRlcygnaXBmczovLycpKSB7XG4gICAgICByZXR1cm4gQklUX0NPVU5UUllfSVBGU19TRVJWRVIgKyBpbnB1dDtcbiAgICB9XG5cbiAgICByZXR1cm4gQklUX0NPVU5UUllfSVBGU19TRVJWRVIgKyBpbnB1dC5zcGxpdCgnaXBmczovLycpWzFdO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXROZnRzIChhZGRyZXNzZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxBc3NldElkW10+IHtcbiAgICBpZiAoIXRoaXMuc3Vic3RyYXRlQXBpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgYXNzZXRJZHM6IEFzc2V0SWRbXSA9IFtdO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoYWRkcmVzc2VzLm1hcChhc3luYyAoYWRkcmVzcykgPT4ge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5vcm1sTkZULnRva2Vuc0J5T3duZXIuZW50cmllcyhhZGRyZXNzKTtcblxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3ApIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGl0ZW1bMF0udG9IdW1hbigpIGFzIHN0cmluZ1tdO1xuXG4gICAgICAgIGFzc2V0SWRzLnB1c2goeyBjbGFzc0lkOiB0aGlzLnBhcnNlVG9rZW5JZChkYXRhWzFdKSwgdG9rZW5JZDogdGhpcy5wYXJzZVRva2VuSWQoZGF0YVsyXSksIG93bmVyOiBhZGRyZXNzIH0pO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHJldHVybiBhc3NldElkcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0VG9rZW5EZXRhaWxzIChhc3NldElkOiBBc3NldElkKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IG9uQ2hhaW5NZXRhID0gKGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5vcm1sTkZULnRva2Vucyhhc3NldElkLmNsYXNzSWQsIGFzc2V0SWQudG9rZW5JZCkpLnRvSHVtYW4oKSBhcyB1bmtub3duIGFzIE9ybWxOZnRUb2tlbkluZm87XG5cbiAgICBpZiAoIW9uQ2hhaW5NZXRhLm1ldGFkYXRhKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBjaGVjayBpZiBORlQgaXMgTGFuZC9Fc3RhdGVcbiAgICBpZiAob25DaGFpbk1ldGEuZGF0YS5hdHRyaWJ1dGVzWydNZXRhdmVyc2VJZDonXSkge1xuICAgICAgcmV0dXJuIGF3YWl0IGZldGNoKGAke0JJVF9DT1VOVFJZX0xBTkRfRVNUQVRFX01FVEFEQVRBX0FQSX0vJHthc3NldElkLmNsYXNzSWR9LyR7YXNzZXRJZC50b2tlbklkfS9tZXRhZGF0YS5qc29uYClcbiAgICAgICAgLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXdhaXQgZmV0Y2goQklUX0NPVU5UUllfSVBGU19TRVJWRVIgKyAob25DaGFpbk1ldGEubWV0YWRhdGEgYXMgc3RyaW5nKSlcbiAgICAgICAgLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q29sbGVjdGlvbkRldGFpbHMgKGNvbGxlY3Rpb25JZDogc3RyaW5nIHwgbnVtYmVyKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFkYXRhQ29sbGVjdGlvbiA9IChhd2FpdCB0aGlzLnN1YnN0cmF0ZUFwaS5hcGkucXVlcnkub3JtbE5GVC5jbGFzc2VzKGNvbGxlY3Rpb25JZCkpLnRvSHVtYW4oKSBhcyB1bmtub3duIGFzIE9ybWxOZnRDbGFzc0luZm87XG5cbiAgICBpZiAoIW1ldGFkYXRhQ29sbGVjdGlvbi5tZXRhZGF0YSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKG1ldGFkYXRhQ29sbGVjdGlvbi5kYXRhLmF0dHJpYnV0ZXNbJ01ldGF2ZXJzZUlkOiddKSB7XG4gICAgICBjb25zdCBjYXRlZ29yeSA9IG1ldGFkYXRhQ29sbGVjdGlvbi5kYXRhLmF0dHJpYnV0ZXNbJ0NhdGVnb3J5OiddIGFzIHN0cmluZztcbiAgICAgIGNvbnN0IGhleE1ldGF2ZXJzZUlkID0gbWV0YWRhdGFDb2xsZWN0aW9uLmRhdGEuYXR0cmlidXRlc1snTWV0YXZlcnNlSWQ6J10gYXMgc3RyaW5nO1xuICAgICAgbGV0IG1ldGF2ZXJzZUlkID0gQk5fWkVSTztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgbWV0YXZlcnNlSWQgPSBoZXhUb0JuKGhleE1ldGF2ZXJzZUlkKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBwYXJzaW5nIG1ldGF2ZXJzZSBpZCcsIGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBgJHtjYXRlZ29yeX0gIyR7Y29sbGVjdGlvbklkfWAsXG4gICAgICAgIG1ldGF2ZXJzZUlkOiBtZXRhdmVyc2VJZC50b1N0cmluZygpXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXdhaXQgZmV0Y2goQklUX0NPVU5UUllfSVBGU19TRVJWRVIgKyAobWV0YWRhdGFDb2xsZWN0aW9uLm1ldGFkYXRhIGFzIHN0cmluZykpXG4gICAgICAgIC50aGVuKChyZXNwKSA9PiByZXNwLmpzb24oKSkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHBhcnNlTWV0YWRhdGEgKGRhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCk6IE5mdEl0ZW0ge1xuICAgIGNvbnN0IHRyYWl0TGlzdCA9IGRhdGE/LnRyYWl0cyA/IGRhdGEudHJhaXRzIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+W10gOiBkYXRhPy5hdHRyaWJ1dGVzIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+W107XG4gICAgY29uc3QgcHJvcGVydGllc01hcDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fTtcblxuICAgIGlmICh0cmFpdExpc3QpIHtcbiAgICAgIHRyYWl0TGlzdC5mb3JFYWNoKCh0cmFpdE1hcCkgPT4ge1xuICAgICAgICBwcm9wZXJ0aWVzTWFwW3RyYWl0TWFwLnRyYWl0X3R5cGUgYXMgc3RyaW5nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogdHJhaXRNYXAudmFsdWUgYXMgc3RyaW5nXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogZGF0YT8ubmFtZSxcbiAgICAgIGltYWdlOiBkYXRhPy5pbWFnZV91cmwgPyB0aGlzLnBhcnNlVXJsKGRhdGEuaW1hZ2VfdXJsIGFzIHN0cmluZykgOiB0aGlzLnBhcnNlVXJsKGRhdGE/LmltYWdlIGFzIHN0cmluZyksXG4gICAgICBkZXNjcmlwdGlvbjogZGF0YT8uZGVzY3JpcHRpb24gYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgcHJvcGVydGllczogcHJvcGVydGllc01hcCxcbiAgICAgIGV4dGVybmFsVXJsOiBkYXRhPy5leHRlcm5hbF91cmwgYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgY2hhaW46IHRoaXMuY2hhaW5cbiAgICB9IGFzIE5mdEl0ZW07XG4gIH1cblxuICBhc3luYyBmZXRjaE5mdHMgKHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5jb25uZWN0KCk7XG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZU5mdHMocGFyYW1zKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZU5mdCAoYWRkcmVzczogc3RyaW5nLCBwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFzc2V0SWRzID0gYXdhaXQgdGhpcy5nZXROZnRzKFthZGRyZXNzXSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFhc3NldElkcyB8fCBhc3NldElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb2xsZWN0aW9uSWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3QgbmZ0SWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChhc3NldElkcy5tYXAoYXN5bmMgKGFzc2V0SWQpID0+IHtcbiAgICAgICAgY29uc3QgcGFyc2VkQ2xhc3NJZCA9IHRoaXMucGFyc2VUb2tlbklkKGFzc2V0SWQuY2xhc3NJZCBhcyBzdHJpbmcpO1xuICAgICAgICBjb25zdCBwYXJzZWRUb2tlbklkID0gdGhpcy5wYXJzZVRva2VuSWQoYXNzZXRJZC50b2tlbklkIGFzIHN0cmluZyk7XG5cbiAgICAgICAgaWYgKCFjb2xsZWN0aW9uSWRzLmluY2x1ZGVzKHBhcnNlZENsYXNzSWQpKSB7XG4gICAgICAgICAgY29sbGVjdGlvbklkcy5wdXNoKHBhcnNlZENsYXNzSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmZ0SWRzLnB1c2gocGFyc2VkVG9rZW5JZCk7XG5cbiAgICAgICAgY29uc3QgW3Rva2VuSW5mbywgY29sbGVjdGlvbk1ldGFdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIHRoaXMuZ2V0VG9rZW5EZXRhaWxzKGFzc2V0SWQpLFxuICAgICAgICAgIHRoaXMuZ2V0Q29sbGVjdGlvbkRldGFpbHMocGFyc2VkQ2xhc3NJZClcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3QgcGFyc2VkTmZ0ID0gdGhpcy5wYXJzZU1ldGFkYXRhKHRva2VuSW5mbyk7XG5cbiAgICAgICAgcGFyc2VkTmZ0LmNvbGxlY3Rpb25JZCA9IHBhcnNlZENsYXNzSWQ7XG4gICAgICAgIHBhcnNlZE5mdC5pZCA9IHBhcnNlZFRva2VuSWQ7XG4gICAgICAgIHBhcnNlZE5mdC5vd25lciA9IGFkZHJlc3M7XG5cbiAgICAgICAgY29uc3QgcGFyc2VkQ29sbGVjdGlvbiA9IHtcbiAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHBhcnNlZENsYXNzSWQsXG4gICAgICAgICAgY2hhaW46IHRoaXMuY2hhaW4sXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICBjb2xsZWN0aW9uTmFtZTogY29sbGVjdGlvbk1ldGE/Lm5hbWUsXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICBpbWFnZTogdGhpcy5wYXJzZVVybChjb2xsZWN0aW9uTWV0YT8uaW1hZ2VfdXJsIGFzIHN0cmluZylcbiAgICAgICAgfSBhcyBOZnRDb2xsZWN0aW9uO1xuXG4gICAgICAgIHBhcmFtcy51cGRhdGVJdGVtKHRoaXMuY2hhaW4sIHBhcnNlZE5mdCwgYWRkcmVzcyk7XG4gICAgICAgIHBhcmFtcy51cGRhdGVDb2xsZWN0aW9uKHRoaXMuY2hhaW4sIHBhcnNlZENvbGxlY3Rpb24pO1xuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7dGhpcy5jaGFpbn1gLCBlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlTmZ0cyAocGFyYW1zOiBIYW5kbGVOZnRQYXJhbXMpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmFkZHJlc3Nlcy5tYXAoKGFkZHJlc3MpID0+IHRoaXMuaGFuZGxlTmZ0KGFkZHJlc3MsIHBhcmFtcykpKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IFJ1bnRpbWVJbmZvIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5cbmV4cG9ydCBjb25zdCBTSU5HVUxBUl9WMV9FTkRQT0lOVCA9ICdodHRwczovL3Npbmd1bGFyLnJtcmstYXBpLnh5ei9hcGkvYWNjb3VudC1ybXJrMS8nO1xuXG5leHBvcnQgY29uc3QgU0lOR1VMQVJfVjJfRU5EUE9JTlQgPSAnaHR0cHM6Ly9zaW5ndWxhci5ybXJrLWFwaS54eXovYXBpL2FjY291bnQvJztcblxuZXhwb3J0IGNvbnN0IEtBTkFSSUFfRU5EUE9JTlQgPSAnaHR0cHM6Ly9rYW5hcmlhLnJtcmsuYXBwL2FwaS9ybXJrMi8nO1xuXG5leHBvcnQgY29uc3QgUk1SS19QSU5BVEFfU0VSVkVSID0gJ2h0dHBzOi8vcm1yay5teXBpbmF0YS5jbG91ZC9pcGZzLyc7XG5cbmV4cG9ydCBjb25zdCBTSU5HVUxBUl9WMV9DT0xMRUNUSU9OX0VORFBPSU5UID0gJ2h0dHBzOi8vc2luZ3VsYXIucm1yay5hcHAvYXBpL3JtcmsxL2NvbGxlY3Rpb24vJztcblxuZXhwb3J0IGNvbnN0IFNJTkdVTEFSX1YyX0NPTExFQ1RJT05fRU5EUE9JTlQgPSAnaHR0cHM6Ly9zaW5ndWxhci5hcHAvYXBpL3JtcmsyL2NvbGxlY3Rpb24vJztcblxuZXhwb3J0IGNvbnN0IEtBTkFSSUFfRVhURVJOQUxfU0VSVkVSID0gJ2h0dHBzOi8va2FuYXJpYS5ybXJrLmFwcC9jYXRhbG9ndWUvJztcblxuZXhwb3J0IGNvbnN0IENMT1VERkxBUkVfUElOQVRBX1NFUlZFUiA9ICdodHRwczovL2Nsb3VkZmxhcmUtaXBmcy5jb20vaXBmcy8nO1xuXG5leHBvcnQgY29uc3QgQklUX0NPVU5UUllfSVBGU19TRVJWRVIgPSAnaHR0cHM6Ly9pcGZzLWNkbi5iaXQuY291bnRyeS8nO1xuXG5leHBvcnQgY29uc3QgQklUX0NPVU5UUllfTEFORF9FU1RBVEVfTUVUQURBVEFfQVBJID0gJ2h0dHBzOi8vcGlvbmVlci1hcGkuYml0LmNvdW50cnkvbWV0YWRhdGEvbGFuZFRva2VuVXJpUGlvbmVlcic7XG5cbmV4cG9ydCBjb25zdCBCSVRfQ09VTlRSWV9USFVNQk5BSUxfUkVTT0xWRVIgPSAnaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGRmdGN0enBoL2ltYWdlL3VwbG9hZC9jX3NjYWxlLHFfMTAwLHdfMjUwL3Byb2R1Y3Rpb24taXBmcy9hc3NldC8nO1xuXG5leHBvcnQgY29uc3QgQ0ZfSVBGU19HQVRFV0FZID0gJ2h0dHBzOi8vY2YtaXBmcy5jb20vaXBmcy8nO1xuXG5leHBvcnQgY29uc3QgUElOQVRBX0lQRlNfR0FURVdBWSA9ICdodHRwczovL2dhdGV3YXkucGluYXRhLmNsb3VkL2lwZnMvJztcblxuZXhwb3J0IGNvbnN0IFVOSVFVRV9TQ0FOX0VORFBPSU5UID0gJ2h0dHBzOi8vZXhwbG9yZXItYXBpLnVuaXF1ZS5uZXR3b3JrL3YxL2dyYXBocWwnO1xuXG5leHBvcnQgY29uc3QgUVVBUlRaX1NDQU5fRU5EUE9JTlQgPSAnaHR0cHM6Ly9oYXN1cmEtcXVhcnR6LnVuaXF1ZS5uZXR3b3JrL3YxL2dyYXBocWwnO1xuXG5leHBvcnQgY29uc3QgVkFSQV9TQ0FOX0VORFBPSU5UID0gJ2h0dHBzOi8vbmZ0LWV4cGxvcmVyLnZhcmEtbmV0d29yay5pby9ncmFwaHFsJztcblxuLy8gR0FURVdBWVxuXG5leHBvcnQgY29uc3QgVU5JUVVFX0lQRlNfR0FURVdBWSA9ICdodHRwczovL2lwZnMudW5pcXVlLm5ldHdvcmsvaXBmcy8nO1xuXG5leHBvcnQgY29uc3QgTkZUX1NUT1JBR0VfR0FURVdBWSA9ICdodHRwczovL25mdHN0b3JhZ2UubGluay9pcGZzLyc7XG5cbmV4cG9ydCBjb25zdCBJUEZTX1czU19MSU5LID0gJ2h0dHBzOi8vdzNzLmxpbmsvaXBmcy8nO1xuXG5leHBvcnQgY29uc3QgR0FURVdBWV9JUEZTX0lPID0gJ2h0dHBzOi8vZ2F0ZXdheS5pcGZzLmlvL2lwZnMvJztcblxuZXhwb3J0IGNvbnN0IElQRlNfSU8gPSAnaHR0cHM6Ly9pcGZzLmlvL2lwZnMvJztcblxuZXhwb3J0IGNvbnN0IERXRUJfTElOSyA9ICdodHRwczovL2R3ZWIubGluay9pcGZzLyc7XG5cbmV4cG9ydCBjb25zdCBJUEZTX0dBVEVXQVlfNEVWRVJMQU5EID0gJ2h0dHBzOi8vNGV2ZXJsYW5kLmlvL2lwZnMvJztcblxuZXhwb3J0IGNvbnN0IElQRlNfRkxFRUsgPSAnaHR0cHM6Ly9pcGZzLmZsZWVrLmNvL2lwZnMvJztcblxuZXhwb3J0IGVudW0gU1VQUE9SVEVEX05GVF9ORVRXT1JLUyB7XG4gIGthcnVyYSA9ICdrYXJ1cmEnLFxuICBhY2FsYSA9ICdhY2FsYScsXG4gIGt1c2FtYSA9ICdrdXNhbWEnLFxuICBzdGF0ZW1pbmUgPSAnc3RhdGVtaW5lJyxcbiAgdW5pcXVlX25ldHdvcmsgPSAndW5pcXVlX25ldHdvcmsnLFxuICBxdWFydHogPSAncXVhcnR6JyxcbiAgYml0Y291bnRyeSA9ICdiaXRjb3VudHJ5JyxcbiAgcGlvbmVlciA9ICdwaW9uZWVyJ1xuICAvLyBUT0RPOiByZWZhY3RvciB0aGlzXG4gIC8vIG1vb25iZWFtID0gJ21vb25iZWFtJyxcbiAgLy8gbW9vbnJpdmVyID0gJ21vb25yaXZlcicsXG4gIC8vIG1vb25iYXNlID0gJ21vb25iYXNlJyxcbiAgLy8gYXN0YXJFdm0gPSAnYXN0YXJFdm0nXG59XG5cbmV4cG9ydCBlbnVtIFNVUFBPUlRFRF9UUkFOU0ZFUl9FVk1fQ0hBSU5fTkFNRSB7XG4gIG1vb25iZWFtID0gJ21vb25iZWFtJyxcbiAgbW9vbmJhc2UgPSAnbW9vbmJhc2UnLFxuICBhc3RhckV2bSA9ICdhc3RhckV2bScsXG4gIG1vb25yaXZlciA9ICdtb29ucml2ZXInLFxuICBzaGlkZW4gPSAnc2hpZGVuJyxcbiAgc2hpYnV5YSA9ICdzaGlidXlhJ1xufVxuXG5leHBvcnQgY29uc3QgU1VQUE9SVEVEX1RSQU5TRkVSX0VWTV9DSEFJTiA9IFtcbiAgU1VQUE9SVEVEX1RSQU5TRkVSX0VWTV9DSEFJTl9OQU1FLm1vb25iYXNlIGFzIHN0cmluZyxcbiAgU1VQUE9SVEVEX1RSQU5TRkVSX0VWTV9DSEFJTl9OQU1FLm1vb25iZWFtIGFzIHN0cmluZyxcbiAgU1VQUE9SVEVEX1RSQU5TRkVSX0VWTV9DSEFJTl9OQU1FLm1vb25yaXZlciBhcyBzdHJpbmcsXG4gIFNVUFBPUlRFRF9UUkFOU0ZFUl9FVk1fQ0hBSU5fTkFNRS5hc3RhckV2bSBhcyBzdHJpbmcsXG4gIFNVUFBPUlRFRF9UUkFOU0ZFUl9FVk1fQ0hBSU5fTkFNRS5zaGlkZW4gYXMgc3RyaW5nLFxuICBTVVBQT1JURURfVFJBTlNGRVJfRVZNX0NIQUlOX05BTUUuc2hpYnV5YSBhcyBzdHJpbmdcbl07XG5cbmV4cG9ydCBjb25zdCBUUkFOU0ZFUl9DSEFJTl9JRCA9IHtcbiAgW1NVUFBPUlRFRF9UUkFOU0ZFUl9FVk1fQ0hBSU5fTkFNRS5tb29uYmFzZSBhcyBzdHJpbmddOiAxMjg3LFxuICBbU1VQUE9SVEVEX1RSQU5TRkVSX0VWTV9DSEFJTl9OQU1FLm1vb25iZWFtIGFzIHN0cmluZ106IDEyODQsXG4gIFtTVVBQT1JURURfVFJBTlNGRVJfRVZNX0NIQUlOX05BTUUubW9vbnJpdmVyIGFzIHN0cmluZ106IDEyODUsXG4gIFtTVVBQT1JURURfVFJBTlNGRVJfRVZNX0NIQUlOX05BTUUuYXN0YXJFdm0gYXMgc3RyaW5nXTogNTkyLFxuICBbU1VQUE9SVEVEX1RSQU5TRkVSX0VWTV9DSEFJTl9OQU1FLnNoaWRlbiBhcyBzdHJpbmddOiAzMzYsXG4gIFtTVVBQT1JURURfVFJBTlNGRVJfRVZNX0NIQUlOX05BTUUuc2hpYnV5YSBhcyBzdHJpbmddOiA4MVxufTtcblxuZXhwb3J0IGVudW0gU1VQUE9SVEVEX1RSQU5TRkVSX1NVQlNUUkFURV9DSEFJTl9OQU1FIHtcbiAgc3RhdGVtaW5lID0gJ3N0YXRlbWluZScsXG4gIGFjYWxhID0gJ2FjYWxhJyxcbiAga2FydXJhID0gJ2thcnVyYScsXG4gIGt1c2FtYSA9ICdrdXNhbWEnLFxuICB1bmlxdWVOZnQgPSAndW5pcXVlX25ldHdvcmsnLFxuICBxdWFydHogPSAncXVhcnR6JyxcbiAgb3BhbCA9ICdvcGFsJyxcbiAgc3RhdGVtaW50ID0gJ3N0YXRlbWludCcsXG4gIGJpdGNvdW50cnkgPSAnYml0Y291bnRyeScsXG4gIHBpb25lZXIgPSAncGlvbmVlcidcbn1cblxuY29uc3QgUkFORE9NX0lQRlNfR0FURVdBWV9TRVRUSU5HID0gW1xuICB7XG4gICAgcHJvdmlkZXI6IENGX0lQRlNfR0FURVdBWSxcbiAgICB3ZWlnaHQ6IDRcbiAgfSxcbiAge1xuICAgIHByb3ZpZGVyOiBDTE9VREZMQVJFX1BJTkFUQV9TRVJWRVIsXG4gICAgd2VpZ2h0OiAxMFxuICB9LFxuICB7XG4gICAgcHJvdmlkZXI6IFBJTkFUQV9JUEZTX0dBVEVXQVksXG4gICAgd2VpZ2h0OiAxIC8vIFJhdGUgbGltaXQgdG9vIGxvd1xuICB9LFxuICB7XG4gICAgcHJvdmlkZXI6IERXRUJfTElOSyxcbiAgICB3ZWlnaHQ6IDVcbiAgfSxcbiAge1xuICAgIHByb3ZpZGVyOiBHQVRFV0FZX0lQRlNfSU8sXG4gICAgd2VpZ2h0OiA1XG4gIH0sXG4gIHtcbiAgICBwcm92aWRlcjogSVBGU19JTyxcbiAgICB3ZWlnaHQ6IDVcbiAgfSxcbiAge1xuICAgIHByb3ZpZGVyOiBORlRfU1RPUkFHRV9HQVRFV0FZLFxuICAgIHdlaWdodDogNTBcbiAgfVxuXTtcblxuaWYgKCFSdW50aW1lSW5mby5wcm90b2NvbCB8fCAoUnVudGltZUluZm8ucHJvdG9jb2wgJiYgIVJ1bnRpbWVJbmZvLnByb3RvY29sLnN0YXJ0c1dpdGgoJ2h0dHAnKSkpIHtcbiAgUkFORE9NX0lQRlNfR0FURVdBWV9TRVRUSU5HLnB1c2goe1xuICAgIHByb3ZpZGVyOiBJUEZTX0ZMRUVLLFxuICAgIHdlaWdodDogNFxuICB9KTtcbiAgUkFORE9NX0lQRlNfR0FURVdBWV9TRVRUSU5HLnB1c2goe1xuICAgIHByb3ZpZGVyOiBJUEZTX0dBVEVXQVlfNEVWRVJMQU5ELFxuICAgIHdlaWdodDogMlxuICB9KTtcbiAgUkFORE9NX0lQRlNfR0FURVdBWV9TRVRUSU5HLnB1c2goe1xuICAgIHByb3ZpZGVyOiBJUEZTX1czU19MSU5LLFxuICAgIHdlaWdodDogMVxuICB9KTtcbn1cblxuY29uc3QgUkFORE9NX0lQRlNfR0FURVdBWV9UT1RBTF9XRUlHSFQgPSBSQU5ET01fSVBGU19HQVRFV0FZX1NFVFRJTkcucmVkdWNlKCh2YWx1ZSwgaXRlbSkgPT4gdmFsdWUgKyBpdGVtLndlaWdodCwgMCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21JcGZzR2F0ZXdheSAoKTogc3RyaW5nIHtcbiAgY29uc3Qgd2VpZ2hlZEl0ZW1zID0gW107XG4gIGxldCBjdXJyZW50SXRlbSA9IDA7XG5cbiAgd2hpbGUgKGN1cnJlbnRJdGVtIDwgUkFORE9NX0lQRlNfR0FURVdBWV9TRVRUSU5HLmxlbmd0aCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgUkFORE9NX0lQRlNfR0FURVdBWV9TRVRUSU5HW2N1cnJlbnRJdGVtXS53ZWlnaHQ7IGkrKykge1xuICAgICAgd2VpZ2hlZEl0ZW1zW3dlaWdoZWRJdGVtcy5sZW5ndGhdID0gUkFORE9NX0lQRlNfR0FURVdBWV9TRVRUSU5HW2N1cnJlbnRJdGVtXS5wcm92aWRlcjtcbiAgICB9XG5cbiAgICBjdXJyZW50SXRlbSsrO1xuICB9XG5cbiAgcmV0dXJuIHdlaWdoZWRJdGVtc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBSQU5ET01fSVBGU19HQVRFV0FZX1RPVEFMX1dFSUdIVCldO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9Bc3NldFR5cGUsIF9DaGFpbkFzc2V0IH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IGdldFJhbmRvbUlwZnNHYXRld2F5IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQvY29uZmlnJztcbmltcG9ydCB7IEJhc2VOZnRBcGksIEhhbmRsZU5mdFBhcmFtcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L25mdCc7XG5pbXBvcnQgeyBfRVJDNzIxX0FCSSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oZWxwZXInO1xuaW1wb3J0IHsgX0V2bUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBfZ2V0Q29udHJhY3RBZGRyZXNzT2ZUb2tlbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5pbXBvcnQgeyBpc1VybCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IGZldGNoIGZyb20gJ2Nyb3NzLWZldGNoJztcblxuaW1wb3J0IHsgaXNFdGhlcmV1bUFkZHJlc3MgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC1jcnlwdG8nO1xuXG5leHBvcnQgY2xhc3MgRXZtTmZ0QXBpIGV4dGVuZHMgQmFzZU5mdEFwaSB7XG4gIGV2bUNvbnRyYWN0czogX0NoYWluQXNzZXRbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yIChldm1BcGk6IF9Fdm1BcGkgfCBudWxsLCBhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nKSB7XG4gICAgc3VwZXIoY2hhaW4sIHVuZGVmaW5lZCwgYWRkcmVzc2VzKTtcblxuICAgIHRoaXMuZXZtQXBpID0gZXZtQXBpO1xuICAgIHRoaXMuaXNFdGhlcmV1bSA9IHRydWU7XG4gIH1cblxuICBzZXRTbWFydENvbnRyYWN0TmZ0cyAoZXZtQ29udHJhY3RzOiBfQ2hhaW5Bc3NldFtdKSB7XG4gICAgdGhpcy5ldm1Db250cmFjdHMgPSBldm1Db250cmFjdHM7XG4gIH1cblxuICBvdmVycmlkZSBwYXJzZVVybCAoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCFpbnB1dCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoaXNVcmwoaW5wdXQpKSB7XG4gICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgaWYgKGlucHV0LmluY2x1ZGVzKCdpcGZzOi8vJykpIHtcbiAgICAgIHJldHVybiBnZXRSYW5kb21JcGZzR2F0ZXdheSgpICsgaW5wdXQuc3BsaXQoJ2lwZnM6Ly8nKVsxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0UmFuZG9tSXBmc0dhdGV3YXkoKSArIGlucHV0LnNwbGl0KCdpcGZzOi8vaXBmcy8nKVsxXTtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VNZXRhZGF0YSAoZGF0YTogUmVjb3JkPHN0cmluZywgYW55Pik6IE5mdEl0ZW0ge1xuICAgIGNvbnN0IHRyYWl0TGlzdCA9IGRhdGEudHJhaXRzID8gZGF0YS50cmFpdHMgYXMgUmVjb3JkPHN0cmluZywgYW55PltdIDogZGF0YS5hdHRyaWJ1dGVzIGFzIFJlY29yZDxzdHJpbmcsIGFueT5bXTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzTWFwOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgICBpZiAodHJhaXRMaXN0KSB7XG4gICAgICB0cmFpdExpc3QuZm9yRWFjaCgodHJhaXRNYXApID0+IHtcbiAgICAgICAgcHJvcGVydGllc01hcFt0cmFpdE1hcC50cmFpdF90eXBlIGFzIHN0cmluZ10gPSB7XG4gICAgICAgICAgdmFsdWU6IHRyYWl0TWFwLnZhbHVlIGFzIHN0cmluZ1xuICAgICAgICAgIC8vIHJhcml0eTogdHJhaXRNYXAudHJhaXRfY291bnQgLyBpdGVtVG90YWxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGV4dHJhIGZpZWxkc1xuICAgIGlmIChkYXRhLmRuYSkge1xuICAgICAgcHJvcGVydGllc01hcC5kbmEgPSB7XG4gICAgICAgIHZhbHVlOiBkYXRhLmRuYSBhcyBzdHJpbmdcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gaWYgKGRhdGEuY29tcGlsZXIpIHtcbiAgICAvLyAgIHByb3BlcnRpZXNNYXAuY29tcGlsZXIgPSB7XG4gICAgLy8gICAgIHZhbHVlOiBkYXRhLmNvbXBpbGVyIGFzIHN0cmluZ1xuICAgIC8vICAgfTtcbiAgICAvLyB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogZGF0YS5uYW1lIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgIGltYWdlOiBkYXRhLmltYWdlX3VybCA/IHRoaXMucGFyc2VVcmwoZGF0YS5pbWFnZV91cmwgYXMgc3RyaW5nKSA6IHRoaXMucGFyc2VVcmwoZGF0YS5pbWFnZSBhcyBzdHJpbmcpLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgcHJvcGVydGllczogcHJvcGVydGllc01hcCxcbiAgICAgIGV4dGVybmFsVXJsOiBkYXRhLmV4dGVybmFsX3VybCBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICBjaGFpbjogdGhpcy5jaGFpblxuICAgIH0gYXMgTmZ0SXRlbTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0SXRlbXNCeUNvbGxlY3Rpb24gKHRva2VuSW5mbzogX0NoYWluQXNzZXQsIGNvbGxlY3Rpb25OYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQsIG5mdFBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKSB7XG4gICAgaWYgKCF0aGlzLmV2bUFwaSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNtYXJ0Q29udHJhY3QgPSBfZ2V0Q29udHJhY3RBZGRyZXNzT2ZUb2tlbih0b2tlbkluZm8pO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnQsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICBjb25zdCBjb250cmFjdCA9IG5ldyB0aGlzLmV2bUFwaS5hcGkuZXRoLkNvbnRyYWN0KF9FUkM3MjFfQUJJLCBzbWFydENvbnRyYWN0KTtcbiAgICBsZXQgb3duSXRlbSA9IGZhbHNlO1xuXG4gICAgbGV0IGNvbGxlY3Rpb25JbWFnZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IG5mdE93bmVyTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7fTtcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuYWRkcmVzc2VzLm1hcChhc3luYyAoYWRkcmVzcykgPT4ge1xuICAgICAgaWYgKCFpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5mdElkczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgIGNvbnN0IGJhbGFuY2UgPSAoYXdhaXQgY29udHJhY3QubWV0aG9kcy5iYWxhbmNlT2YoYWRkcmVzcykuY2FsbCgpKSBhcyB1bmtub3duIGFzIG51bWJlcjtcblxuICAgICAgaWYgKE51bWJlcihiYWxhbmNlKSA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGl0ZW1JbmRleGVzOiBudW1iZXJbXSA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE51bWJlcihiYWxhbmNlKTsgaSsrKSB7XG4gICAgICAgIGl0ZW1JbmRleGVzLnB1c2goaSk7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGl0ZW1JbmRleGVzLm1hcChhc3luYyAoaSkgPT4ge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgY29uc3QgdG9rZW5JZCA9IGF3YWl0IGNvbnRyYWN0Lm1ldGhvZHMudG9rZW5PZk93bmVyQnlJbmRleChhZGRyZXNzLCBpKS5jYWxsKCkgYXMgbnVtYmVyO1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgY29uc3QgdG9rZW5VUkkgPSBhd2FpdCBjb250cmFjdC5tZXRob2RzLnRva2VuVVJJKHRva2VuSWQpLmNhbGwoKSBhcyBzdHJpbmc7XG5cbiAgICAgICAgICBjb25zdCBkZXRhaWxVcmwgPSB0aGlzLnBhcnNlVXJsKHRva2VuVVJJKTtcblxuICAgICAgICAgIGNvbnN0IG5mdElkID0gdG9rZW5JZC50b1N0cmluZygpO1xuXG4gICAgICAgICAgbmZ0SWRzLnB1c2gobmZ0SWQpO1xuXG4gICAgICAgICAgaWYgKGRldGFpbFVybCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGRldGFpbFVybCk7XG4gICAgICAgICAgICAgIGNvbnN0IGl0ZW1EZXRhaWwgPSAocmVzcCAmJiByZXNwLm9rICYmIGF3YWl0IHJlc3AuanNvbigpIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pO1xuXG4gICAgICAgICAgICAgIGlmICghaXRlbURldGFpbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEl0ZW0gPSB0aGlzLnBhcnNlTWV0YWRhdGEoaXRlbURldGFpbCk7XG5cbiAgICAgICAgICAgICAgcGFyc2VkSXRlbS5jb2xsZWN0aW9uSWQgPSBzbWFydENvbnRyYWN0O1xuICAgICAgICAgICAgICBwYXJzZWRJdGVtLmlkID0gbmZ0SWQ7XG4gICAgICAgICAgICAgIHBhcnNlZEl0ZW0ub3duZXIgPSBhZGRyZXNzO1xuICAgICAgICAgICAgICBwYXJzZWRJdGVtLnR5cGUgPSBfQXNzZXRUeXBlLkVSQzcyMTtcbiAgICAgICAgICAgICAgcGFyc2VkSXRlbS5vcmlnaW5Bc3NldCA9IHRva2VuSW5mby5zbHVnO1xuXG4gICAgICAgICAgICAgIGlmIChwYXJzZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZEl0ZW0uaW1hZ2UpIHtcbiAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JbWFnZSA9IHBhcnNlZEl0ZW0uaW1hZ2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbmZ0UGFyYW1zLnVwZGF0ZUl0ZW0odGhpcy5jaGFpbiwgcGFyc2VkSXRlbSwgYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgb3duSXRlbSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgJHt0aGlzLmNoYWlufWAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgICAgIG5mdE93bmVyTWFwW2FkZHJlc3NdID0gbmZ0SWRzO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGAke3RoaXMuY2hhaW59YCwgZSk7XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgaWYgKG93bkl0ZW0pIHtcbiAgICAgIGNvbnN0IG5mdENvbGxlY3Rpb24gPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogc21hcnRDb250cmFjdCxcbiAgICAgICAgY29sbGVjdGlvbk5hbWUsXG4gICAgICAgIGltYWdlOiBjb2xsZWN0aW9uSW1hZ2UgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjaGFpbjogdGhpcy5jaGFpbixcbiAgICAgICAgb3JpZ2luQXNzZXQ6IHRva2VuSW5mby5zbHVnXG4gICAgICB9IGFzIE5mdENvbGxlY3Rpb247XG5cbiAgICAgIG5mdFBhcmFtcy51cGRhdGVDb2xsZWN0aW9uKHRoaXMuY2hhaW4sIG5mdENvbGxlY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZU5mdHMgKHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmV2bUNvbnRyYWN0cyB8fCB0aGlzLmV2bUNvbnRyYWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmV2bUNvbnRyYWN0cy5tYXAoYXN5bmMgKHRva2VuSW5mbykgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0SXRlbXNCeUNvbGxlY3Rpb24odG9rZW5JbmZvLCB0b2tlbkluZm8ubmFtZSwgcGFyYW1zKTtcbiAgICB9KSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmV0Y2hOZnRzIChwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTmZ0cyhwYXJhbXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiAxO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluQXNzZXQsIF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgTmZ0Q29sbGVjdGlvbiwgTmZ0SXRlbSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgQWNhbGFOZnRBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC9hY2FsYV9uZnQnO1xuaW1wb3J0IHsgQml0Q291bnRyeU5mdEFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L2JpdC5jb3VudHJ5JztcbmltcG9ydCB7IEV2bU5mdEFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L2V2bV9uZnQnO1xuaW1wb3J0IHsgS2FydXJhTmZ0QXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQva2FydXJhX25mdCc7XG5pbXBvcnQgeyBCYXNlTmZ0QXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQvbmZ0JztcbmltcG9ydCB7IFJtcmtOZnRBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC9ybXJrX25mdCc7XG5pbXBvcnQgU3RhdGVtaW5lTmZ0QXBpIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L3N0YXRlbWluZV9uZnQnO1xuaW1wb3J0IFVuaXF1ZU5mdEFwaSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC91bmlxdWVfbmZ0JztcbmltcG9ydCB7IFZhcmFOZnRBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC92YXJhX25mdCc7XG5pbXBvcnQgeyBXYXNtTmZ0QXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQvd2FzbV9uZnQnO1xuaW1wb3J0IHsgX05GVF9DSEFJTl9HUk9VUCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgX0V2bUFwaSwgX1N1YnN0cmF0ZUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBfaXNDaGFpblN1cHBvcnRFdm1OZnQsIF9pc0NoYWluU3VwcG9ydE5hdGl2ZU5mdCwgX2lzQ2hhaW5TdXBwb3J0V2FzbU5mdCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5pbXBvcnQgeyBjYXRlZ29yeUFkZHJlc3NlcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuXG5pbXBvcnQgU3RhdGVtaW50TmZ0QXBpIGZyb20gJy4vc3RhdGVtaW50X25mdCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZVN1YnN0cmF0ZU5mdEFwaSAoY2hhaW46IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpIHwgbnVsbCwgYWRkcmVzc2VzOiBzdHJpbmdbXSk6IEJhc2VOZnRBcGkgfCBudWxsIHtcbiAgY29uc3QgW3N1YnN0cmF0ZUFkZHJlc3Nlc10gPSBjYXRlZ29yeUFkZHJlc3NlcyhhZGRyZXNzZXMpO1xuXG4gIGlmIChfTkZUX0NIQUlOX0dST1VQLmFjYWxhLmluY2x1ZGVzKGNoYWluKSkge1xuICAgIHJldHVybiBuZXcgQWNhbGFOZnRBcGkoc3Vic3RyYXRlQXBpLCBzdWJzdHJhdGVBZGRyZXNzZXMsIGNoYWluKTtcbiAgfSBlbHNlIGlmIChfTkZUX0NIQUlOX0dST1VQLmthcnVyYS5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICByZXR1cm4gbmV3IEthcnVyYU5mdEFwaShzdWJzdHJhdGVBcGksIHN1YnN0cmF0ZUFkZHJlc3NlcywgY2hhaW4pO1xuICB9IGVsc2UgaWYgKF9ORlRfQ0hBSU5fR1JPVVAucm1yay5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICByZXR1cm4gbmV3IFJtcmtOZnRBcGkoc3Vic3RyYXRlQWRkcmVzc2VzLCBjaGFpbik7XG4gIH0gZWxzZSBpZiAoX05GVF9DSEFJTl9HUk9VUC5zdGF0ZW1pbmUuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgcmV0dXJuIG5ldyBTdGF0ZW1pbmVOZnRBcGkoc3Vic3RyYXRlQXBpLCBzdWJzdHJhdGVBZGRyZXNzZXMsIGNoYWluKTtcbiAgfSBlbHNlIGlmIChfTkZUX0NIQUlOX0dST1VQLnN0YXRlbWludC5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICByZXR1cm4gbmV3IFN0YXRlbWludE5mdEFwaShzdWJzdHJhdGVBcGksIHN1YnN0cmF0ZUFkZHJlc3NlcywgY2hhaW4pO1xuICB9IGVsc2UgaWYgKF9ORlRfQ0hBSU5fR1JPVVAudW5pcXVlX25ldHdvcmsuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgcmV0dXJuIG5ldyBVbmlxdWVOZnRBcGkoc3Vic3RyYXRlQXBpLCBzdWJzdHJhdGVBZGRyZXNzZXMsIGNoYWluKTtcbiAgfSBlbHNlIGlmIChfTkZUX0NIQUlOX0dST1VQLmJpdGNvdW50cnkuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgcmV0dXJuIG5ldyBCaXRDb3VudHJ5TmZ0QXBpKHN1YnN0cmF0ZUFwaSwgc3Vic3RyYXRlQWRkcmVzc2VzLCBjaGFpbik7XG4gIH0gZWxzZSBpZiAoX05GVF9DSEFJTl9HUk9VUC52YXJhLmluY2x1ZGVzKGNoYWluKSkge1xuICAgIHJldHVybiBuZXcgVmFyYU5mdEFwaShjaGFpbiwgc3Vic3RyYXRlQWRkcmVzc2VzKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVXYXNtTmZ0QXBpIChjaGFpbjogc3RyaW5nLCBhcGlQcm9wczogX1N1YnN0cmF0ZUFwaSB8IG51bGwsIGFkZHJlc3Nlczogc3RyaW5nW10pOiBCYXNlTmZ0QXBpIHwgbnVsbCB7XG4gIGNvbnN0IFtzdWJzdHJhdGVBZGRyZXNzZXNdID0gY2F0ZWdvcnlBZGRyZXNzZXMoYWRkcmVzc2VzKTtcblxuICByZXR1cm4gbmV3IFdhc21OZnRBcGkoYXBpUHJvcHMsIHN1YnN0cmF0ZUFkZHJlc3NlcywgY2hhaW4pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVXZWIzTmZ0QXBpIChjaGFpbjogc3RyaW5nLCBldm1BcGk6IF9Fdm1BcGkgfCBudWxsLCBhZGRyZXNzZXM6IHN0cmluZ1tdKTogQmFzZU5mdEFwaSB8IG51bGwge1xuICBjb25zdCBbLCBldm1BZGRyZXNzZXNdID0gY2F0ZWdvcnlBZGRyZXNzZXMoYWRkcmVzc2VzKTtcblxuICByZXR1cm4gbmV3IEV2bU5mdEFwaShldm1BcGksIGV2bUFkZHJlc3NlcywgY2hhaW4pO1xufVxuXG5leHBvcnQgY2xhc3MgTmZ0SGFuZGxlciB7XG4gIC8vIEdlbmVyYWwgc2V0dGluZ3NcbiAgY2hhaW5JbmZvTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPiA9IHt9O1xuICBhZGRyZXNzZXM6IHN0cmluZ1tdID0gW107XG4gIHNtYXJ0Q29udHJhY3ROZnRzOiBfQ2hhaW5Bc3NldFtdID0gW107XG5cbiAgLy8gUHJvdmlkZXIgQVBJIG5lZWRlZFxuICBzdWJzdHJhdGVBcGlNYXA6IFJlY29yZDxzdHJpbmcsIF9TdWJzdHJhdGVBcGk+ID0ge307XG4gIGV2bUFwaU1hcDogUmVjb3JkPHN0cmluZywgX0V2bUFwaT4gPSB7fTtcblxuICAvLyBMb2dpYyBoYW5kbGluZ1xuICBoYW5kbGVyczogQmFzZU5mdEFwaVtdID0gW107IC8vIDEgY2hhaW4gY2FuIGhhdmUgbXVsdGlwbGUgaGFuZGxlcnMgKHRvIHN1cHBvcnQgbXVsdGlwbGUgdG9rZW4gc3RhbmRhcmRzKVxuICB0b3RhbCA9IDA7XG4gIG5lZWRTZXR1cEFwaSA9IHRydWU7XG5cbiAgc2V0Q2hhaW5JbmZvTWFwIChjaGFpbkluZm9NYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+KSB7XG4gICAgdGhpcy5jaGFpbkluZm9NYXAgPSBjaGFpbkluZm9NYXA7XG4gICAgdGhpcy5uZWVkU2V0dXBBcGkgPSB0cnVlO1xuICB9XG5cbiAgc2V0V2ViM0FwaU1hcCAod2ViM0FwaU1hcDogUmVjb3JkPHN0cmluZywgX0V2bUFwaT4pIHtcbiAgICB0aGlzLmV2bUFwaU1hcCA9IHdlYjNBcGlNYXA7XG4gICAgdGhpcy5uZWVkU2V0dXBBcGkgPSB0cnVlO1xuICB9XG5cbiAgc2V0RG90U2FtYUFwaU1hcCAoZG90U2FtYUFQSU1hcDogUmVjb3JkPHN0cmluZywgX1N1YnN0cmF0ZUFwaT4pIHtcbiAgICB0aGlzLnN1YnN0cmF0ZUFwaU1hcCA9IGRvdFNhbWFBUElNYXA7XG4gICAgdGhpcy5uZWVkU2V0dXBBcGkgPSB0cnVlO1xuICB9XG5cbiAgc2V0QWRkcmVzc2VzIChhZGRyZXNzZXM6IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5hZGRyZXNzZXMgPSBhZGRyZXNzZXM7XG5cbiAgICBjb25zdCBbc3Vic3RyYXRlQWRkcmVzc2VzLCBldm1BZGRyZXNzZXNdID0gY2F0ZWdvcnlBZGRyZXNzZXMoYWRkcmVzc2VzKTtcblxuICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICBjb25zdCB1c2VBZGRyZXNzZXMgPSBoYW5kbGVyLmlzRXRoZXJldW0gPyBldm1BZGRyZXNzZXMgOiBzdWJzdHJhdGVBZGRyZXNzZXM7XG5cbiAgICAgIGhhbmRsZXIuc2V0QWRkcmVzc2VzKHVzZUFkZHJlc3Nlcyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cE5mdENvbnRyYWN0cyAoc21hcnRDb250cmFjdE5mdHM6IF9DaGFpbkFzc2V0W10pIHtcbiAgICB0aGlzLnNtYXJ0Q29udHJhY3ROZnRzID0gc21hcnRDb250cmFjdE5mdHM7XG5cbiAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgdGhpcy5oYW5kbGVycykge1xuICAgICAgaWYgKGhhbmRsZXIgaW5zdGFuY2VvZiBFdm1OZnRBcGkgfHwgaGFuZGxlciBpbnN0YW5jZW9mIFdhc21OZnRBcGkpIHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWROZnRzOiBfQ2hhaW5Bc3NldFtdID0gW107XG5cbiAgICAgICAgZm9yIChjb25zdCBuZnQgb2Ygc21hcnRDb250cmFjdE5mdHMpIHtcbiAgICAgICAgICBpZiAobmZ0Lm9yaWdpbkNoYWluID09PSBoYW5kbGVyLmNoYWluKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZE5mdHMucHVzaChuZnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGhhbmRsZXIuc2V0U21hcnRDb250cmFjdE5mdHMoZmlsdGVyZWROZnRzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwQXBpICgpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMubmVlZFNldHVwQXBpKSB7IC8vIHNldHVwIGNvbm5lY3Rpb25zIGZvciBmaXJzdCB0aW1lIHVzZVxuICAgICAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgICAgIGNvbnN0IFtzdWJzdHJhdGVBZGRyZXNzZXMsIGV2bUFkZHJlc3Nlc10gPSBjYXRlZ29yeUFkZHJlc3Nlcyh0aGlzLmFkZHJlc3Nlcyk7XG5cbiAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5jaGFpbkluZm9NYXApLmZvckVhY2goKFtjaGFpbiwgY2hhaW5JbmZvXSkgPT4ge1xuICAgICAgICAgIGlmIChfaXNDaGFpblN1cHBvcnROYXRpdmVOZnQoY2hhaW5JbmZvKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3Vic3RyYXRlQXBpTWFwW2NoYWluXSkge1xuICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gY3JlYXRlU3Vic3RyYXRlTmZ0QXBpKGNoYWluLCB0aGlzLnN1YnN0cmF0ZUFwaU1hcFtjaGFpbl0sIHN1YnN0cmF0ZUFkZHJlc3Nlcyk7XG5cbiAgICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoX2lzQ2hhaW5TdXBwb3J0RXZtTmZ0KGNoYWluSW5mbykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmV2bUFwaU1hcFtjaGFpbl0pIHtcbiAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGNyZWF0ZVdlYjNOZnRBcGkoY2hhaW4sIHRoaXMuZXZtQXBpTWFwW2NoYWluXSwgZXZtQWRkcmVzc2VzKTtcblxuICAgICAgICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChfaXNDaGFpblN1cHBvcnRXYXNtTmZ0KGNoYWluSW5mbykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN1YnN0cmF0ZUFwaU1hcFtjaGFpbl0pIHtcbiAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGNyZWF0ZVdhc21OZnRBcGkoY2hhaW4sIHRoaXMuc3Vic3RyYXRlQXBpTWFwW2NoYWluXSwgc3Vic3RyYXRlQWRkcmVzc2VzKTtcblxuICAgICAgICAgICAgICBpZiAoaGFuZGxlciAmJiAhdGhpcy5oYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uZWVkU2V0dXBBcGkgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGVOZnRzIChcbiAgICBuZnRDb250cmFjdHM6IF9DaGFpbkFzc2V0W10sXG4gICAgdXBkYXRlSXRlbTogKGNoYWluOiBzdHJpbmcsIGRhdGE6IE5mdEl0ZW0sIG93bmVyOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgdXBkYXRlQ29sbGVjdGlvbjogKGNoYWluOiBzdHJpbmcsIGRhdGE6IE5mdENvbGxlY3Rpb24pID0+IHZvaWQpIHtcbiAgICB0aGlzLnNldHVwQXBpKCk7XG4gICAgdGhpcy5zZXR1cE5mdENvbnRyYWN0cyhuZnRDb250cmFjdHMpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICBhd2FpdCBoYW5kbGVyLmZldGNoTmZ0cyh7XG4gICAgICAgIHVwZGF0ZUl0ZW0sXG4gICAgICAgIHVwZGF0ZUNvbGxlY3Rpb25cbiAgICAgIH0pO1xuICAgIH0pKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IGdldFJhbmRvbUlwZnNHYXRld2F5IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQvY29uZmlnJztcbmltcG9ydCB7IEJhc2VOZnRBcGksIEhhbmRsZU5mdFBhcmFtcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L25mdCc7XG5pbXBvcnQgeyBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IGlzVXJsIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnY3Jvc3MtZmV0Y2gnO1xuXG5pbnRlcmZhY2UgQXNzZXRJZCB7XG4gIGNsYXNzSWQ6IHN0cmluZyB8IG51bWJlcixcbiAgdG9rZW5JZDogc3RyaW5nIHwgbnVtYmVyLFxuICBvd25lcjogc3RyaW5nXG59XG5cbmludGVyZmFjZSBDb2xsZWN0aW9uIHtcbiAgbmFtZTogc3RyaW5nLFxuICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICBpbWFnZTogc3RyaW5nXG59XG5cbmludGVyZmFjZSBUb2tlbiB7XG4gIG1ldGFkYXRhPzogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBvd25lcj86IHN0cmluZyxcbiAgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgbmFtZT86IHN0cmluZyxcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmcsXG4gIGltYWdlPzogc3RyaW5nXG59XG5cbmV4cG9ydCBjbGFzcyBLYXJ1cmFOZnRBcGkgZXh0ZW5kcyBCYXNlTmZ0QXBpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgY29uc3RydWN0b3IgKGFwaTogX1N1YnN0cmF0ZUFwaSB8IG51bGwsIGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluOiBzdHJpbmcpIHtcbiAgICBzdXBlcihjaGFpbiwgYXBpLCBhZGRyZXNzZXMpO1xuICB9XG5cbiAgb3ZlcnJpZGUgcGFyc2VVcmwgKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICghaW5wdXQgfHwgaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChpc1VybChpbnB1dCkpIHtcbiAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG5cbiAgICBpZiAoIWlucHV0LmluY2x1ZGVzKCdpcGZzOi8vJykpIHtcbiAgICAgIHJldHVybiBnZXRSYW5kb21JcGZzR2F0ZXdheSgpICsgaW5wdXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldFJhbmRvbUlwZnNHYXRld2F5KCkgKyBpbnB1dC5zcGxpdCgnaXBmczovLycpWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGlkIG9mIE5GVHNcbiAgICpcbiAgICogQHJldHVybnMgdGhlIGFycmF5IG9mIE5GVCBJZHNcbiAgICogQHBhcmFtIGFkZHJlc3Nlc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXROZnRzIChhZGRyZXNzZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxBc3NldElkW10+IHtcbiAgICBpZiAoIXRoaXMuc3Vic3RyYXRlQXBpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgYWNjb3VudEFzc2V0czogUmVjb3JkPHN0cmluZywgYW55W10+ID0ge307XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChhZGRyZXNzZXMubWFwKGFzeW5jIChhZGRyZXNzKSA9PiB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBjb25zdCByZXNwID0gYXdhaXQgdGhpcy5zdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5Lm9ybWxORlQudG9rZW5zQnlPd25lci5rZXlzKGFkZHJlc3MpO1xuXG4gICAgICBpZiAoYWRkcmVzcyBpbiBhY2NvdW50QXNzZXRzKSB7XG4gICAgICAgIGFjY291bnRBc3NldHNbYWRkcmVzc10uY29uY2F0KHJlc3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWNjb3VudEFzc2V0c1thZGRyZXNzXSA9IHJlc3A7XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgY29uc3QgYXNzZXRJZHM6IEFzc2V0SWRbXSA9IFtdO1xuXG4gICAgT2JqZWN0LmVudHJpZXMoYWNjb3VudEFzc2V0cykuZm9yRWFjaCgoW293bmVyLCByYXdEYXRhXSkgPT4ge1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgcmF3RGF0YSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICBjb25zdCBkYXRhID0ga2V5LnRvSHVtYW4oKSBhcyBzdHJpbmdbXTtcblxuICAgICAgICBhc3NldElkcy5wdXNoKHsgY2xhc3NJZDogZGF0YVsxXSwgdG9rZW5JZDogdGhpcy5wYXJzZVRva2VuSWQoZGF0YVsyXSksIG93bmVyIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFzc2V0SWRzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRDb2xsZWN0aW9uRGV0YWlscyAoY29sbGVjdGlvbklkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsPiB7XG4gICAgaWYgKCF0aGlzLnN1YnN0cmF0ZUFwaSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgbWV0YWRhdGFDb2xsZWN0aW9uID0gKGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5vcm1sTkZULmNsYXNzZXMoY29sbGVjdGlvbklkKSkudG9IdW1hbigpIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG5cbiAgICBpZiAoIW1ldGFkYXRhQ29sbGVjdGlvbj8ubWV0YWRhdGEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRLYXJ1cmFNZXRhZGF0YShtZXRhZGF0YUNvbGxlY3Rpb24/Lm1ldGFkYXRhIGFzIHN0cmluZykgYXMgdW5rbm93biBhcyBDb2xsZWN0aW9uO1xuXG4gICAgcmV0dXJuIHsgLi4uZGF0YSwgaW1hZ2U6IHRoaXMucGFyc2VVcmwoZGF0YS5pbWFnZSkgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0VG9rZW5EZXRhaWxzIChhc3NldElkOiBBc3NldElkKTogUHJvbWlzZTxUb2tlbiB8IG51bGw+IHtcbiAgICBpZiAoIXRoaXMuc3Vic3RyYXRlQXBpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5vcm1sTkZULnRva2Vucyhhc3NldElkLmNsYXNzSWQsIGFzc2V0SWQudG9rZW5JZCkpLnRvSHVtYW4oKSBhcyB1bmtub3duIGFzIFRva2VuO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZU5mdCAoYWRkcmVzczogc3RyaW5nLCBwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcykge1xuICAgIC8vIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgYXNzZXRJZHMgPSBhd2FpdCB0aGlzLmdldE5mdHMoW2FkZHJlc3NdKTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIWFzc2V0SWRzIHx8IGFzc2V0SWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbGxlY3Rpb25JZHM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCBuZnRJZHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFzc2V0SWRzLm1hcChhc3luYyAoYXNzZXRJZCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJzZWRDbGFzc0lkID0gdGhpcy5wYXJzZVRva2VuSWQoYXNzZXRJZC5jbGFzc0lkIGFzIHN0cmluZyk7XG4gICAgICAgIGNvbnN0IHBhcnNlZFRva2VuSWQgPSB0aGlzLnBhcnNlVG9rZW5JZChhc3NldElkLnRva2VuSWQgYXMgc3RyaW5nKTtcblxuICAgICAgICBpZiAoIWNvbGxlY3Rpb25JZHMuaW5jbHVkZXMocGFyc2VkQ2xhc3NJZCkpIHtcbiAgICAgICAgICBjb2xsZWN0aW9uSWRzLnB1c2gocGFyc2VkQ2xhc3NJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBuZnRJZHMucHVzaChwYXJzZWRUb2tlbklkKTtcblxuICAgICAgICBjb25zdCBbdG9rZW5JbmZvLCBjb2xsZWN0aW9uTWV0YV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgdGhpcy5nZXRUb2tlbkRldGFpbHMoYXNzZXRJZCksXG4gICAgICAgICAgdGhpcy5nZXRDb2xsZWN0aW9uRGV0YWlscyhwYXJzZUludChwYXJzZWRDbGFzc0lkKSlcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3QgcGFyc2VkTmZ0ID0ge1xuICAgICAgICAgIGlkOiBwYXJzZWRUb2tlbklkLFxuICAgICAgICAgIG5hbWU6IHRva2VuSW5mbz8ubmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdG9rZW5JbmZvPy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICAgIGltYWdlOiB0b2tlbkluZm8gJiYgdG9rZW5JbmZvLmltYWdlID8gdGhpcy5wYXJzZVVybCh0b2tlbkluZm8/LmltYWdlKSA6IGNvbGxlY3Rpb25NZXRhPy5pbWFnZSxcbiAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHBhcnNlZENsYXNzSWQsXG4gICAgICAgICAgY2hhaW46IHRoaXMuY2hhaW4sXG4gICAgICAgICAgb3duZXI6IGFzc2V0SWQub3duZXJcbiAgICAgICAgfSBhcyBOZnRJdGVtO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZENvbGxlY3Rpb24gPSB7XG4gICAgICAgICAgY29sbGVjdGlvbklkOiBwYXJzZWRDbGFzc0lkLFxuICAgICAgICAgIGNoYWluOiB0aGlzLmNoYWluLFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgY29sbGVjdGlvbk5hbWU6IGNvbGxlY3Rpb25NZXRhPy5uYW1lLFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgaW1hZ2U6IGNvbGxlY3Rpb25NZXRhPy5pbWFnZVxuICAgICAgICB9IGFzIE5mdENvbGxlY3Rpb247XG5cbiAgICAgICAgcGFyYW1zLnVwZGF0ZUl0ZW0odGhpcy5jaGFpbiwgcGFyc2VkTmZ0LCBhZGRyZXNzKTtcbiAgICAgICAgcGFyYW1zLnVwZGF0ZUNvbGxlY3Rpb24odGhpcy5jaGFpbiwgcGFyc2VkQ29sbGVjdGlvbik7XG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgJHt0aGlzLmNoYWlufWAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGVOZnRzIChwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcykge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuYWRkcmVzc2VzLm1hcCgoYWRkcmVzcykgPT4gdGhpcy5oYW5kbGVOZnQoYWRkcmVzcywgcGFyYW1zKSkpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGZldGNoTmZ0cyAocGFyYW1zOiBIYW5kbGVOZnRQYXJhbXMpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTmZ0cyhwYXJhbXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiAxO1xuICB9XG59XG5cbmNvbnN0IGdldEthcnVyYU1ldGFkYXRhID0gKG1ldGFkYXRhVXJsOiBzdHJpbmcpID0+IHtcbiAgbGV0IHVybDogc3RyaW5nIHwgbnVsbCA9IG1ldGFkYXRhVXJsO1xuXG4gIGlmICghbWV0YWRhdGFVcmwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHVybCA9IGdldFJhbmRvbUlwZnNHYXRld2F5KCkgKyBtZXRhZGF0YVVybCArICcvYXplcm9fZG9tYWluX3JlZ2lzdHJ5X2FiaS5qc29uJztcblxuICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICB9KVxuICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpO1xufTtcbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBOZnRDb2xsZWN0aW9uLCBOZnRJdGVtIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBnZXRSYW5kb21JcGZzR2F0ZXdheSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L2NvbmZpZyc7XG5pbXBvcnQgeyBfRXZtQXBpLCBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IGlzVXJsIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFuZGxlTmZ0UGFyYW1zIHtcbiAgdXBkYXRlSXRlbTogKGNoYWluOiBzdHJpbmcsIGRhdGE6IE5mdEl0ZW0sIG93bmVyOiBzdHJpbmcpID0+IHZvaWQsXG4gIHVwZGF0ZUNvbGxlY3Rpb246IChjaGFpbjogc3RyaW5nLCBkYXRhOiBOZnRDb2xsZWN0aW9uKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlTmZ0QXBpIHtcbiAgY2hhaW4gPSAnJztcbiAgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpIHwgbnVsbCA9IG51bGw7XG4gIGV2bUFwaTogX0V2bUFwaSB8IG51bGwgPSBudWxsO1xuICBkYXRhOiBOZnRDb2xsZWN0aW9uW10gPSBbXTtcbiAgdG90YWwgPSAwO1xuICBhZGRyZXNzZXM6IHN0cmluZ1tdID0gW107XG4gIGlzRXRoZXJldW0gPSBmYWxzZTtcblxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IgKGNoYWluOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaT86IF9TdWJzdHJhdGVBcGkgfCBudWxsLCBhZGRyZXNzZXM/OiBzdHJpbmdbXSwgZXZtQXBpPzogX0V2bUFwaSkge1xuICAgIGlmIChzdWJzdHJhdGVBcGkpIHtcbiAgICAgIHRoaXMuc3Vic3RyYXRlQXBpID0gc3Vic3RyYXRlQXBpO1xuICAgIH1cblxuICAgIGlmIChhZGRyZXNzZXMpIHtcbiAgICAgIHRoaXMuYWRkcmVzc2VzID0gYWRkcmVzc2VzO1xuICAgIH1cblxuICAgIHRoaXMuY2hhaW4gPSBjaGFpbjtcblxuICAgIGlmIChldm1BcGkpIHtcbiAgICAgIHRoaXMuZXZtQXBpID0gZXZtQXBpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbm5lY3QgKCkge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGk/LmlzQXBpQ29ubmVjdGVkKSB7XG4gICAgICB0aGlzLnN1YnN0cmF0ZUFwaSA9IGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpPy5pc1JlYWR5IGFzIF9TdWJzdHJhdGVBcGk7XG4gICAgfVxuICB9XG5cbiAgcmVjb3ZlckNvbm5lY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGk/LmlzQXBpQ29ubmVjdGVkKSB7XG4gICAgICB0aGlzLnN1YnN0cmF0ZUFwaT8ucmVjb3ZlckNvbm5lY3QgJiYgdGhpcy5zdWJzdHJhdGVBcGkucmVjb3ZlckNvbm5lY3QoKTtcbiAgICB9XG4gIH1cblxuICBnZXRTdWJzdHJhdGVBcGkgKCkge1xuICAgIHJldHVybiB0aGlzLnN1YnN0cmF0ZUFwaTtcbiAgfVxuXG4gIGdldENoYWluICgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpbjtcbiAgfVxuXG4gIGdldFRvdGFsICgpIHtcbiAgICByZXR1cm4gdGhpcy50b3RhbDtcbiAgfVxuXG4gIGdldERhdGEgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cblxuICBzZXRTdWJzdHJhdGVBcGkgKGFwaTogX1N1YnN0cmF0ZUFwaSkge1xuICAgIHRoaXMuc3Vic3RyYXRlQXBpID0gYXBpO1xuICB9XG5cbiAgc2V0Q2hhaW4gKGNoYWluOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNoYWluID0gY2hhaW47XG4gIH1cblxuICBzZXRBZGRyZXNzZXMgKGFkZHJlc3Nlczogc3RyaW5nW10pIHtcbiAgICB0aGlzLmFkZHJlc3NlcyA9IGFkZHJlc3NlcztcbiAgfVxuXG4gIHByb3RlY3RlZCBwYXJzZVRva2VuSWQgKHRva2VuSWQ6IHN0cmluZykge1xuICAgIGlmICh0b2tlbklkLmluY2x1ZGVzKCcsJykpIHtcbiAgICAgIHJldHVybiB0b2tlbklkLnJlcGxhY2UoJywnLCAnJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuSWQ7XG4gIH1cblxuICBwYXJzZVVybCAoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCFpbnB1dCB8fCBpbnB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKGlzVXJsKGlucHV0KSkge1xuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cblxuICAgIGlmIChpc1VybChpbnB1dCkgfHwgaW5wdXQuaW5jbHVkZXMoJ2h0dHBzOi8vJykgfHwgaW5wdXQuaW5jbHVkZXMoJ2h0dHAnKSkge1xuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cblxuICAgIGlmIChpbnB1dC5zdGFydHNXaXRoKCcvaXBmcy8nKSkge1xuICAgICAgcmV0dXJuIGdldFJhbmRvbUlwZnNHYXRld2F5KCkgKyBpbnB1dC5zcGxpdCgnL2lwZnMvJylbMV07XG4gICAgfVxuXG4gICAgaWYgKCFpbnB1dC5pbmNsdWRlcygnaXBmczovLycpICYmICFpbnB1dC5pbmNsdWRlcygnaXBmczovL2lwZnMvJykpIHsgLy8ganVzdCB0aGUgSVBGUyBoYXNoXG4gICAgICByZXR1cm4gZ2V0UmFuZG9tSXBmc0dhdGV3YXkoKSArIGlucHV0O1xuICAgIH1cblxuICAgIGlmIChpbnB1dC5pbmNsdWRlcygnaXBmczovLycpICYmICFpbnB1dC5pbmNsdWRlcygnaXBmczovL2lwZnMvJykpIHsgLy8gc3RhcnRzIHdpdGggaXBmczovL1xuICAgICAgcmV0dXJuIGdldFJhbmRvbUlwZnNHYXRld2F5KCkgKyBpbnB1dC5zcGxpdCgnaXBmczovLycpWzFdO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRSYW5kb21JcGZzR2F0ZXdheSgpICsgaW5wdXQuc3BsaXQoJ2lwZnM6Ly9pcGZzLycpWzFdOyAvLyBzdGFydHMgd2l0aCBpcGZzOi8vaXBmcy9cbiAgfVxuXG4gIC8vIFN1YmNsYXNzIGltcGxlbWVudHMgdGhpcyBmdW5jdGlvbiB0byBwYXJzZSBkYXRhIGludG8gcHJvcCByZXN1bHRcbiAgYWJzdHJhY3QgaGFuZGxlTmZ0cyhwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcyk6IHZvaWQ7XG5cbiAgYWJzdHJhY3QgZmV0Y2hOZnRzKHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKTogUHJvbWlzZTxudW1iZXI+O1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0sIFJNUktfVkVSIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBCYXNlTmZ0QXBpLCBIYW5kbGVOZnRQYXJhbXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC9uZnQnO1xuaW1wb3J0IHsgaXNVcmwsIHJlZm9ybWF0QWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IGZldGNoIGZyb20gJ2Nyb3NzLWZldGNoJztcblxuaW1wb3J0IHsgU0lOR1VMQVJfVjFfQ09MTEVDVElPTl9FTkRQT0lOVCwgU0lOR1VMQVJfVjJfQ09MTEVDVElPTl9FTkRQT0lOVCwgU0lOR1VMQVJfVjJfRU5EUE9JTlQgfSBmcm9tICcuLi9jb25maWcnO1xuXG5lbnVtIFJNUktfU09VUkNFIHtcbiAgQklSRF9LQU5BUklBID0gJ2JpcmRfa2FuYXJpYScsXG4gIEtBTkFSSUEgPSAna2FuYXJpYScsXG4gIFNJTkdVTEFSX1YxID0gJ3Npbmd1bGFyX3YxJyxcbiAgU0lOR1VMQVJfVjIgPSAnc2luZ3VsYXJfdjInXG59XG5cbmNvbnN0IEtBTkJJUkRfS0VZV09SRCA9ICdLQU5CSVJEJztcblxuaW50ZXJmYWNlIE5GVE1ldGFkYXRhIHtcbiAgYW5pbWF0aW9uX3VybD86IHN0cmluZyxcbiAgYXR0cmlidXRlcz86IGFueVtdLFxuICBkZXNjcmlwdGlvbj86IHN0cmluZyxcbiAgaW1hZ2U/OiBzdHJpbmcsXG4gIG5hbWU/OiBzdHJpbmdcbiAgcHJvcGVydGllcz86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgbWVkaWFVcmk/OiBzdHJpbmcsXG59XG5cbmludGVyZmFjZSBSbXJrTmZ0UmVzcG9uc2Uge1xuICBpZDogc3RyaW5nLFxuICBjb2xsZWN0aW9uPzoge1xuICAgIG5hbWU6IHN0cmluZ1xuICB9XG4gIGNvbGxlY3Rpb25JZDogc3RyaW5nLFxuICBtZXRhZGF0YTogc3RyaW5nLFxuICBwcmltYXJ5UmVzb3VyY2U/OiB7XG4gICAgaWQ6IHN0cmluZyxcbiAgICBzcmM6IHN0cmluZyxcbiAgICB0aHVtYjogc3RyaW5nLFxuICAgIG1ldGFkYXRhOiBzdHJpbmcgfCBudWxsXG4gIH0sXG4gIHNvdXJjZT86IFJNUktfU09VUkNFXG59XG5cbmV4cG9ydCBjbGFzcyBSbXJrTmZ0QXBpIGV4dGVuZHMgQmFzZU5mdEFwaSB7XG4gIGNvbnN0cnVjdG9yIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nKSB7XG4gICAgc3VwZXIoY2hhaW4sIG51bGwsIGFkZHJlc3Nlcyk7XG4gIH1cblxuICAvLyBvdmVycmlkZSBwYXJzZVVybCAoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIC8vICAgaWYgKCFpbnB1dCB8fCBpbnB1dC5sZW5ndGggPT09IDApIHtcbiAgLy8gICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgfVxuICAvL1xuICAvLyAgIGlmIChpc1VybChpbnB1dCkgfHwgaW5wdXQuaW5jbHVkZXMoJ2h0dHBzOi8vJykgfHwgaW5wdXQuaW5jbHVkZXMoJ2h0dHAnKSkge1xuICAvLyAgICAgcmV0dXJuIGlucHV0O1xuICAvLyAgIH1cbiAgLy9cbiAgLy8gICBpZiAoIWlucHV0LmluY2x1ZGVzKCdpcGZzOi8vaXBmcy8nKSkge1xuICAvLyAgICAgcmV0dXJuIGdldFJhbmRvbUlwZnNHYXRld2F5KCkgKyBpbnB1dDtcbiAgLy8gICB9XG4gIC8vXG4gIC8vICAgcmV0dXJuIGdldFJhbmRvbUlwZnNHYXRld2F5KCkgKyBpbnB1dC5zcGxpdCgnaXBmczovL2lwZnMvJylbMV07XG4gIC8vIH1cblxuICBwcml2YXRlIGFzeW5jIGdldE1ldGFkYXRhIChtZXRhZGF0YVVybDogc3RyaW5nKTogUHJvbWlzZTxORlRNZXRhZGF0YSB8IHVuZGVmaW5lZD4ge1xuICAgIGxldCB1cmw6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG1ldGFkYXRhVXJsO1xuXG4gICAgaWYgKCFpc1VybChtZXRhZGF0YVVybCkpIHtcbiAgICAgIHVybCA9IHRoaXMucGFyc2VVcmwobWV0YWRhdGFVcmwpO1xuXG4gICAgICBpZiAoIXVybCB8fCB1cmwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKSBhcyBORlRNZXRhZGF0YTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0QWxsQnlBY2NvdW50IChhY2NvdW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBmZXRjaFVybHMgPSBbXG4gICAgICB7IHVybDogU0lOR1VMQVJfVjJfRU5EUE9JTlQgKyBhY2NvdW50LCBzb3VyY2U6IFJNUktfU09VUkNFLlNJTkdVTEFSX1YyIH1cbiAgICBdO1xuXG4gICAgbGV0IGRhdGE6IFJtcmtOZnRSZXNwb25zZVtdID0gW107XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChmZXRjaFVybHMubWFwKGFzeW5jICh7IHNvdXJjZSwgdXJsIH0pID0+IHtcbiAgICAgIGxldCBfZGF0YSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKSBhcyBSbXJrTmZ0UmVzcG9uc2VbXTtcblxuICAgICAgX2RhdGEgPSBfZGF0YS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgbGV0IG5mdFNvdXJjZSA9IHNvdXJjZTtcblxuICAgICAgICBpZiAoaXRlbS5jb2xsZWN0aW9uSWQuaW5jbHVkZXMoS0FOQklSRF9LRVlXT1JEKSkge1xuICAgICAgICAgIG5mdFNvdXJjZSA9IFJNUktfU09VUkNFLkJJUkRfS0FOQVJJQTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IC4uLml0ZW0sIHNvdXJjZTogbmZ0U291cmNlIH07XG4gICAgICB9KTtcblxuICAgICAgZGF0YSA9IGRhdGEuY29uY2F0KF9kYXRhKTtcbiAgICB9KSk7XG5cbiAgICBjb25zdCBuZnRzOiBSZWNvcmQ8c3RyaW5nIHwgbnVtYmVyLCBhbnk+W10gPSBbXTtcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKGRhdGEubWFwKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwcmltYXJ5UmVzb3VyY2UgPSBpdGVtLnByaW1hcnlSZXNvdXJjZSA/IGl0ZW0ucHJpbWFyeVJlc291cmNlIDogbnVsbDtcbiAgICAgICAgY29uc3QgbWV0YWRhdGFVcmkgPSBwcmltYXJ5UmVzb3VyY2UgJiYgcHJpbWFyeVJlc291cmNlLm1ldGFkYXRhID8gcHJpbWFyeVJlc291cmNlLm1ldGFkYXRhIDogaXRlbS5tZXRhZGF0YTtcbiAgICAgICAgY29uc3QgbmZ0TWV0YWRhdGEgPSBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKG1ldGFkYXRhVXJpKTtcblxuICAgICAgICBpZiAoaXRlbS5zb3VyY2UgPT09IFJNUktfU09VUkNFLkJJUkRfS0FOQVJJQSkge1xuICAgICAgICAgIG5mdHMucHVzaCh7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgbWV0YWRhdGE6IG5mdE1ldGFkYXRhLFxuICAgICAgICAgICAgb3duZXI6IGFjY291bnRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLnNvdXJjZSA9PT0gUk1SS19TT1VSQ0UuS0FOQVJJQSkge1xuICAgICAgICAgIG5mdHMucHVzaCh7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgLi4ubmZ0TWV0YWRhdGEsXG4gICAgICAgICAgICAgIGltYWdlOiB0aGlzLnBhcnNlVXJsKG5mdE1ldGFkYXRhPy5pbWFnZSBhcyBzdHJpbmcpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3duZXI6IGFjY291bnRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLnNvdXJjZSA9PT0gUk1SS19TT1VSQ0UuU0lOR1VMQVJfVjEpIHtcbiAgICAgICAgICBuZnRzLnB1c2goe1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBuZnRNZXRhZGF0YT8uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgIG5hbWU6IG5mdE1ldGFkYXRhPy5uYW1lLFxuICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBuZnRNZXRhZGF0YT8uYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgYW5pbWF0aW9uX3VybDogdGhpcy5wYXJzZVVybChuZnRNZXRhZGF0YT8uYW5pbWF0aW9uX3VybCBhcyBzdHJpbmcpLFxuICAgICAgICAgICAgICBpbWFnZTogdGhpcy5wYXJzZVVybChuZnRNZXRhZGF0YT8uaW1hZ2UgYXMgc3RyaW5nKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG93bmVyOiBhY2NvdW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS5zb3VyY2UgPT09IFJNUktfU09VUkNFLlNJTkdVTEFSX1YyKSB7XG4gICAgICAgICAgY29uc3QgaWQgPSBpdGVtLmlkO1xuXG4gICAgICAgICAgaWYgKCFpZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKEtBTkJJUkRfS0VZV09SRCkpIHsgLy8gZXhjbHVkZXMga2FuYXJpYSBiaXJkLCBhbHJlYWR5IGhhbmRsZWQgYWJvdmVcbiAgICAgICAgICAgIG5mdHMucHVzaCh7XG4gICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG5mdE1ldGFkYXRhPy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBuYW1lOiBuZnRNZXRhZGF0YT8ubmFtZSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBuZnRNZXRhZGF0YT8uYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBuZnRNZXRhZGF0YT8ucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBhbmltYXRpb25fdXJsOiB0aGlzLnBhcnNlVXJsKG5mdE1ldGFkYXRhPy5hbmltYXRpb25fdXJsIGFzIHN0cmluZyksXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHRoaXMucGFyc2VVcmwobmZ0TWV0YWRhdGE/Lm1lZGlhVXJpIGFzIHN0cmluZylcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb3duZXI6IGFjY291bnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgZmV0Y2hpbmcgUk1SSyBORlQnLCBlKTtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICByZXR1cm4gbmZ0cztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGVOZnQgKGFkZHJlc3M6IHN0cmluZywgcGFyYW1zOiBIYW5kbGVOZnRQYXJhbXMpIHtcbiAgICAvLyBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gICAgbGV0IGFsbE5mdHM6IFJlY29yZDxzdHJpbmcgfCBudW1iZXIsIGFueT5bXSA9IFtdO1xuICAgIGNvbnN0IGFsbENvbGxlY3Rpb25zOiBOZnRDb2xsZWN0aW9uW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBrdXNhbWFBZGRyZXNzID0gcmVmb3JtYXRBZGRyZXNzKGFkZHJlc3MsIDIpO1xuXG4gICAgICBhbGxOZnRzID0gYXdhaXQgdGhpcy5nZXRBbGxCeUFjY291bnQoa3VzYW1hQWRkcmVzcyk7XG5cbiAgICAgIGlmIChhbGxOZnRzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29sbGVjdGlvbkluZm9Vcmw6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhbGxOZnRzKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZEl0ZW0gPSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICAgIGlkOiBpdGVtPy5pZCxcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgbmFtZTogaXRlbT8ubWV0YWRhdGE/Lm5hbWUgYXMgc3RyaW5nLFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICBpbWFnZTogdGhpcy5wYXJzZVVybChpdGVtLmltYWdlID8gaXRlbS5pbWFnZSA6IGl0ZW0ubWV0YWRhdGEuaW1hZ2UgPyBpdGVtLm1ldGFkYXRhLmltYWdlIDogaXRlbS5tZXRhZGF0YS5hbmltYXRpb25fdXJsIGFzIHN0cmluZyksXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtPy5tZXRhZGF0YT8uZGVzY3JpcHRpb24gYXMgc3RyaW5nLFxuICAgICAgICAgIGV4dGVybmFsVXJsOiBpdGVtPy5leHRlcm5hbF91cmwgYXMgc3RyaW5nLFxuICAgICAgICAgIHJhcml0eTogaXRlbT8ubWV0YWRhdGFfcmFyaXR5IGFzIHN0cmluZyxcbiAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGl0ZW0/LmNvbGxlY3Rpb25JZCBhcyBzdHJpbmcsXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIHByb3BlcnRpZXM6IGl0ZW0/Lm1ldGFkYXRhPy5wcm9wZXJ0aWVzIGFzIFJlY29yZDxhbnksIGFueT4sXG4gICAgICAgICAgY2hhaW46IHRoaXMuY2hhaW4sXG4gICAgICAgICAgcm1ya192ZXI6IGl0ZW0uc291cmNlICYmIGl0ZW0uc291cmNlID09PSBSTVJLX1NPVVJDRS5TSU5HVUxBUl9WMSA/IFJNUktfVkVSLlZFUl8xIDogUk1SS19WRVIuVkVSXzIsXG4gICAgICAgICAgb3duZXI6IGl0ZW0ub3duZXIgYXMgc3RyaW5nXG4gICAgICAgIH0gYXMgTmZ0SXRlbTtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuICAgICAgICBwYXJhbXMudXBkYXRlSXRlbSh0aGlzLmNoYWluLCBwYXJzZWRJdGVtLCBhZGRyZXNzKTtcblxuICAgICAgICBsZXQgdXJsID0gJyc7XG5cbiAgICAgICAgaWYgKGl0ZW0uc291cmNlID09PSBSTVJLX1NPVVJDRS5TSU5HVUxBUl9WMSkge1xuICAgICAgICAgIHVybCA9IFNJTkdVTEFSX1YxX0NPTExFQ1RJT05fRU5EUE9JTlQgKyAoaXRlbS5jb2xsZWN0aW9uSWQgYXMgc3RyaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cmwgPSBTSU5HVUxBUl9WMl9DT0xMRUNUSU9OX0VORFBPSU5UICsgKGl0ZW0uY29sbGVjdGlvbklkIGFzIHN0cmluZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbGxlY3Rpb25JbmZvVXJsLmluY2x1ZGVzKHVybCkpIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgICAgYWxsQ29sbGVjdGlvbnMucHVzaCh7IGNoYWluOiAnJywgY29sbGVjdGlvbklkOiBpdGVtLmNvbGxlY3Rpb25JZCB9KTtcbiAgICAgICAgICBjb2xsZWN0aW9uSW5mb1VybC5wdXNoKHVybC5yZXBsYWNlKCcgJywgJyUyMCcpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBhbGxDb2xsZWN0aW9uTWV0YVVybDogUmVjb3JkPHN0cmluZywgYW55PltdID0gW107XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNvbGxlY3Rpb25JbmZvVXJsLm1hcChhc3luYyAodXJsKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpIGFzIFJlY29yZDxzdHJpbmcgfCBudW1iZXIsIHN0cmluZyB8IG51bWJlcj5bXTtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBkYXRhWzBdO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdCAmJiAnbWV0YWRhdGEnIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgYWxsQ29sbGVjdGlvbk1ldGFVcmwucHVzaCh7XG4gICAgICAgICAgICAgIHVybDogdGhpcy5wYXJzZVVybChyZXN1bHQ/Lm1ldGFkYXRhIGFzIHN0cmluZyksXG4gICAgICAgICAgICAgIGlkOiByZXN1bHQ/LmlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IGFsbENvbGxlY3Rpb25NZXRhOiBSZWNvcmQ8c3RyaW5nIHwgbnVtYmVyLCBhbnk+ID0ge307XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFsbENvbGxlY3Rpb25NZXRhVXJsLm1hcChhc3luYyAoaXRlbSkgPT4ge1xuICAgICAgICBsZXQgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGl0ZW0udXJsKSB7XG4gICAgICAgICAgICBkYXRhID0gYXdhaXQgZmV0Y2goaXRlbT8udXJsIGFzIHN0cmluZywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCdtZWRpYVVyaScgaW4gZGF0YSkgeyAvLyBybXJrIHYyLjBcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgICAgIGFsbENvbGxlY3Rpb25NZXRhW2l0ZW0/LmlkIGFzIHN0cmluZ10gPSB7IC4uLmRhdGEsIGltYWdlOiBkYXRhLm1lZGlhVXJpIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFsbENvbGxlY3Rpb25NZXRhW2l0ZW0/LmlkIGFzIHN0cmluZ10gPSB7IC4uLmRhdGEgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGl0ZW0udXJsLCBlKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuXG4gICAgICBhbGxDb2xsZWN0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbGxlY3Rpb24gPSB7XG4gICAgICAgICAgY29sbGVjdGlvbklkOiBpdGVtLmNvbGxlY3Rpb25JZCxcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgY29sbGVjdGlvbk5hbWU6IGFsbENvbGxlY3Rpb25NZXRhW2l0ZW0uY29sbGVjdGlvbklkXSA/IGFsbENvbGxlY3Rpb25NZXRhW2l0ZW0uY29sbGVjdGlvbklkXS5uYW1lIGFzIHN0cmluZyA6IG51bGwsXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIGltYWdlOiBhbGxDb2xsZWN0aW9uTWV0YVtpdGVtLmNvbGxlY3Rpb25JZF0gPyB0aGlzLnBhcnNlVXJsKGFsbENvbGxlY3Rpb25NZXRhW2l0ZW0uY29sbGVjdGlvbklkXS5pbWFnZSBhcyBzdHJpbmcpIDogbnVsbCxcbiAgICAgICAgICBjaGFpbjogdGhpcy5jaGFpblxuICAgICAgICB9IGFzIE5mdENvbGxlY3Rpb247XG5cbiAgICAgICAgY29uc3QgbmZ0SWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGFsbE5mdHMuZm9yRWFjaCgobmZ0KSA9PiB7XG4gICAgICAgICAgY29uc3QgbmZ0Q29sbGVjdGlvbklkID0gbmZ0Py5jb2xsZWN0aW9uSWQgYXMgc3RyaW5nO1xuXG4gICAgICAgICAgaWYgKG5mdENvbGxlY3Rpb25JZCA9PT0gaXRlbS5jb2xsZWN0aW9uSWQpIHtcbiAgICAgICAgICAgIG5mdElkcy5wdXNoKG5mdD8uaWQgYXMgc3RyaW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHBhcmFtcy51cGRhdGVDb2xsZWN0aW9uKHRoaXMuY2hhaW4sIHBhcnNlZENvbGxlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgJHt0aGlzLmNoYWlufWAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGVOZnRzIChwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcykge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuYWRkcmVzc2VzLm1hcCgoYWRkcmVzcykgPT4gdGhpcy5oYW5kbGVOZnQoYWRkcmVzcywgcGFyYW1zKSkpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGZldGNoTmZ0cyAocGFyYW1zOiBIYW5kbGVOZnRQYXJhbXMpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZU5mdHMocGFyYW1zKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gMTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEJhc2VOZnRBcGksIEhhbmRsZU5mdFBhcmFtcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L25mdCc7XG5pbXBvcnQgeyBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IGlzVXJsIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnY3Jvc3MtZmV0Y2gnO1xuXG5pbnRlcmZhY2UgQXNzZXRJZCB7XG4gIGNsYXNzSWQ6IHN0cmluZyB8IG51bWJlcixcbiAgdG9rZW5JZDogc3RyaW5nIHwgbnVtYmVyXG59XG5cbmludGVyZmFjZSBNZXRhZGF0YVJlc3BvbnNlIHtcbiAgZGVwb3NpdD86IHN0cmluZyxcbiAgZGF0YT86IHN0cmluZyxcbiAgaXNGcm96ZW4/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBUb2tlbkRldGFpbCB7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxuICBuYW1lPzogc3RyaW5nLFxuICBhdHRyaWJ1dGVzPzogYW55W10sXG4gIGltYWdlPzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBDb2xsZWN0aW9uRGV0YWlsIHtcbiAgbmFtZT86IHN0cmluZyxcbiAgaW1hZ2U/OiBzdHJpbmcsXG4gIGV4dGVybmFsX3VybD86IHN0cmluZyxcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdGVtaW5lTmZ0QXBpIGV4dGVuZHMgQmFzZU5mdEFwaSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWNvbnN0cnVjdG9yXG4gIGNvbnN0cnVjdG9yIChhcGk6IF9TdWJzdHJhdGVBcGkgfCBudWxsLCBhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nKSB7XG4gICAgc3VwZXIoY2hhaW4sIGFwaSwgYWRkcmVzc2VzKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TWV0YWRhdGEgKG1ldGFkYXRhVXJsOiBzdHJpbmcpIHtcbiAgICBsZXQgdXJsOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBtZXRhZGF0YVVybDtcblxuICAgIGlmICghaXNVcmwobWV0YWRhdGFVcmwpKSB7XG4gICAgICB1cmwgPSB0aGlzLnBhcnNlVXJsKG1ldGFkYXRhVXJsKTtcblxuICAgICAgaWYgKCF1cmwgfHwgdXJsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBpZCBvZiBORlRzXG4gICAqXG4gICAqIEByZXR1cm5zIHRoZSBhcnJheSBvZiBORlQgSWRzXG4gICAqIEBwYXJhbSBhZGRyZXNzZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0TmZ0cyAoYWRkcmVzc2VzOiBzdHJpbmdbXSk6IFByb21pc2U8QXNzZXRJZFtdPiB7XG4gICAgaWYgKCF0aGlzLnN1YnN0cmF0ZUFwaSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGFzc2V0SWRzOiBBc3NldElkW10gPSBbXTtcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKGFkZHJlc3Nlcy5tYXAoYXN5bmMgKGFkZHJlc3MpID0+IHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLnN1YnN0cmF0ZUFwaS5hcGkucXVlcnkudW5pcXVlcy5hY2NvdW50LmtleXMoYWRkcmVzcyk7XG5cbiAgICAgIGlmIChyZXNwKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHJlc3ApIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBrZXkudG9IdW1hbigpIGFzIHN0cmluZ1tdO1xuXG4gICAgICAgICAgYXNzZXRJZHMucHVzaCh7IGNsYXNzSWQ6IGRhdGFbMV0sIHRva2VuSWQ6IHRoaXMucGFyc2VUb2tlbklkKGRhdGFbMl0pIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIGFzc2V0SWRzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRUb2tlbkRldGFpbHMgKGFzc2V0SWQ6IEFzc2V0SWQpOiBQcm9taXNlPFRva2VuRGV0YWlsIHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY2xhc3NJZCwgdG9rZW5JZCB9ID0gYXNzZXRJZDtcbiAgICBjb25zdCBtZXRhZGF0YU5mdCA9IChhd2FpdCB0aGlzLnN1YnN0cmF0ZUFwaS5hcGkucXVlcnkudW5pcXVlcy5pbnN0YW5jZU1ldGFkYXRhT2YodGhpcy5wYXJzZVRva2VuSWQoY2xhc3NJZCBhcyBzdHJpbmcpLCB0aGlzLnBhcnNlVG9rZW5JZCh0b2tlbklkIGFzIHN0cmluZykpKS50b0h1bWFuKCkgYXMgTWV0YWRhdGFSZXNwb25zZTtcblxuICAgIGlmICghbWV0YWRhdGFOZnQ/LmRhdGEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YShtZXRhZGF0YU5mdD8uZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldENvbGxlY3Rpb25EZXRhaWwgKGNvbGxlY3Rpb25JZDogbnVtYmVyKTogUHJvbWlzZTxDb2xsZWN0aW9uRGV0YWlsIHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbGxlY3Rpb25NZXRhZGF0YSA9IChhd2FpdCB0aGlzLnN1YnN0cmF0ZUFwaS5hcGkucXVlcnkudW5pcXVlcy5jbGFzc01ldGFkYXRhT2YoY29sbGVjdGlvbklkKSkudG9IdW1hbigpIGFzIE1ldGFkYXRhUmVzcG9uc2U7XG5cbiAgICBpZiAoIWNvbGxlY3Rpb25NZXRhZGF0YT8uZGF0YSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKGNvbGxlY3Rpb25NZXRhZGF0YT8uZGF0YSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlTmZ0IChhZGRyZXNzOiBzdHJpbmcsIHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKSB7XG4gICAgLy8gY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgIGNvbnN0IGFzc2V0SWRzID0gYXdhaXQgdGhpcy5nZXROZnRzKFthZGRyZXNzXSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFhc3NldElkcyB8fCBhc3NldElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb2xsZWN0aW9uSWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3QgbmZ0SWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChhc3NldElkcy5tYXAoYXN5bmMgKGFzc2V0SWQpID0+IHtcbiAgICAgICAgY29uc3QgcGFyc2VkQ2xhc3NJZCA9IHRoaXMucGFyc2VUb2tlbklkKGFzc2V0SWQuY2xhc3NJZCBhcyBzdHJpbmcpO1xuICAgICAgICBjb25zdCBwYXJzZWRUb2tlbklkID0gdGhpcy5wYXJzZVRva2VuSWQoYXNzZXRJZC50b2tlbklkIGFzIHN0cmluZyk7XG5cbiAgICAgICAgaWYgKCFjb2xsZWN0aW9uSWRzLmluY2x1ZGVzKHBhcnNlZENsYXNzSWQpKSB7XG4gICAgICAgICAgY29sbGVjdGlvbklkcy5wdXNoKHBhcnNlZENsYXNzSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmZ0SWRzLnB1c2gocGFyc2VkVG9rZW5JZCk7XG5cbiAgICAgICAgY29uc3QgW3Rva2VuSW5mbywgY29sbGVjdGlvbk1ldGFdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIHRoaXMuZ2V0VG9rZW5EZXRhaWxzKGFzc2V0SWQpLFxuICAgICAgICAgIHRoaXMuZ2V0Q29sbGVjdGlvbkRldGFpbChwYXJzZUludChwYXJzZWRDbGFzc0lkKSlcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3QgcGFyc2VkTmZ0ID0ge1xuICAgICAgICAgIGlkOiBwYXJzZWRUb2tlbklkLFxuICAgICAgICAgIG5hbWU6IHRva2VuSW5mbz8ubmFtZSBhcyBzdHJpbmcsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRva2VuSW5mbz8uZGVzY3JpcHRpb24gYXMgc3RyaW5nLFxuICAgICAgICAgIGltYWdlOiB0b2tlbkluZm8gJiYgdG9rZW5JbmZvLmltYWdlID8gdGhpcy5wYXJzZVVybCh0b2tlbkluZm8/LmltYWdlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHRoaXMucGFyc2VUb2tlbklkKHBhcnNlZENsYXNzSWQpLFxuICAgICAgICAgIGNoYWluOiB0aGlzLmNoYWluLFxuICAgICAgICAgIG93bmVyOiBhZGRyZXNzXG4gICAgICAgIH0gYXMgTmZ0SXRlbTtcblxuICAgICAgICBwYXJhbXMudXBkYXRlSXRlbSh0aGlzLmNoYWluLCBwYXJzZWROZnQsIGFkZHJlc3MpO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZENvbGxlY3Rpb24gPSB7XG4gICAgICAgICAgY29sbGVjdGlvbklkOiBwYXJzZWRDbGFzc0lkLFxuICAgICAgICAgIGNoYWluOiB0aGlzLmNoYWluLFxuICAgICAgICAgIGNvbGxlY3Rpb25OYW1lOiBjb2xsZWN0aW9uTWV0YT8ubmFtZSxcbiAgICAgICAgICBpbWFnZTogY29sbGVjdGlvbk1ldGEgJiYgY29sbGVjdGlvbk1ldGEuaW1hZ2UgPyB0aGlzLnBhcnNlVXJsKGNvbGxlY3Rpb25NZXRhPy5pbWFnZSkgOiB1bmRlZmluZWRcbiAgICAgICAgfSBhcyBOZnRDb2xsZWN0aW9uO1xuXG4gICAgICAgIHBhcmFtcy51cGRhdGVDb2xsZWN0aW9uKHRoaXMuY2hhaW4sIHBhcnNlZENvbGxlY3Rpb24pO1xuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7dGhpcy5jaGFpbn1gLCBlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlTmZ0cyAocGFyYW1zOiBIYW5kbGVOZnRQYXJhbXMpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmFkZHJlc3Nlcy5tYXAoKGFkZHJlc3MpID0+IHRoaXMuaGFuZGxlTmZ0KGFkZHJlc3MsIHBhcmFtcykpKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBmZXRjaE5mdHMgKHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5jb25uZWN0KCk7XG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZU5mdHMocGFyYW1zKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gMTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEJhc2VOZnRBcGksIEhhbmRsZU5mdFBhcmFtcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L25mdCc7XG5pbXBvcnQgeyBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IGlzVXJsIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnY3Jvc3MtZmV0Y2gnO1xuXG5pbnRlcmZhY2UgQXNzZXRJZCB7XG4gIGNsYXNzSWQ6IHN0cmluZyB8IG51bWJlcixcbiAgdG9rZW5JZDogc3RyaW5nIHwgbnVtYmVyXG59XG5cbmludGVyZmFjZSBNZXRhZGF0YVJlc3BvbnNlIHtcbiAgZGVwb3NpdD86IHN0cmluZyxcbiAgZGF0YT86IHN0cmluZyxcbiAgaXNGcm96ZW4/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBUb2tlbkRldGFpbCB7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxuICBuYW1lPzogc3RyaW5nLFxuICBhdHRyaWJ1dGVzPzogYW55W10sXG4gIGltYWdlPzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBDb2xsZWN0aW9uRGV0YWlsIHtcbiAgbmFtZT86IHN0cmluZyxcbiAgaW1hZ2U/OiBzdHJpbmcsXG4gIGV4dGVybmFsX3VybD86IHN0cmluZyxcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdGVtaW50TmZ0QXBpIGV4dGVuZHMgQmFzZU5mdEFwaSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWNvbnN0cnVjdG9yXG4gIGNvbnN0cnVjdG9yIChhcGk6IF9TdWJzdHJhdGVBcGkgfCBudWxsLCBhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbjogc3RyaW5nKSB7XG4gICAgc3VwZXIoY2hhaW4sIGFwaSwgYWRkcmVzc2VzKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TWV0YWRhdGEgKG1ldGFkYXRhVXJsOiBzdHJpbmcpIHtcbiAgICBsZXQgdXJsOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBtZXRhZGF0YVVybDtcblxuICAgIGlmICghaXNVcmwobWV0YWRhdGFVcmwpKSB7XG4gICAgICB1cmwgPSB0aGlzLnBhcnNlVXJsKG1ldGFkYXRhVXJsKTtcblxuICAgICAgaWYgKCF1cmwgfHwgdXJsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBpZCBvZiBORlRzXG4gICAqXG4gICAqIEByZXR1cm5zIHRoZSBhcnJheSBvZiBORlQgSWRzXG4gICAqIEBwYXJhbSBhZGRyZXNzZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0TmZ0cyAoYWRkcmVzc2VzOiBzdHJpbmdbXSk6IFByb21pc2U8QXNzZXRJZFtdPiB7XG4gICAgaWYgKCF0aGlzLnN1YnN0cmF0ZUFwaSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGFzc2V0SWRzOiBBc3NldElkW10gPSBbXTtcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKGFkZHJlc3Nlcy5tYXAoYXN5bmMgKGFkZHJlc3MpID0+IHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLnN1YnN0cmF0ZUFwaS5hcGkucXVlcnkubmZ0cy5hY2NvdW50LmtleXMoYWRkcmVzcyk7XG5cbiAgICAgIGlmIChyZXNwKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHJlc3ApIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBrZXkudG9IdW1hbigpIGFzIHN0cmluZ1tdO1xuXG4gICAgICAgICAgYXNzZXRJZHMucHVzaCh7IGNsYXNzSWQ6IGRhdGFbMV0sIHRva2VuSWQ6IHRoaXMucGFyc2VUb2tlbklkKGRhdGFbMl0pIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIGFzc2V0SWRzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRUb2tlbkRldGFpbHMgKGFzc2V0SWQ6IEFzc2V0SWQpOiBQcm9taXNlPFRva2VuRGV0YWlsIHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY2xhc3NJZCwgdG9rZW5JZCB9ID0gYXNzZXRJZDtcbiAgICBjb25zdCBtZXRhZGF0YU5mdCA9IChhd2FpdCB0aGlzLnN1YnN0cmF0ZUFwaS5hcGkucXVlcnkubmZ0cy5pdGVtTWV0YWRhdGFPZih0aGlzLnBhcnNlVG9rZW5JZChjbGFzc0lkIGFzIHN0cmluZyksIHRoaXMucGFyc2VUb2tlbklkKHRva2VuSWQgYXMgc3RyaW5nKSkpLnRvSHVtYW4oKSBhcyBNZXRhZGF0YVJlc3BvbnNlO1xuXG4gICAgaWYgKCFtZXRhZGF0YU5mdD8uZGF0YSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKG1ldGFkYXRhTmZ0Py5kYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q29sbGVjdGlvbkRldGFpbCAoY29sbGVjdGlvbklkOiBudW1iZXIpOiBQcm9taXNlPENvbGxlY3Rpb25EZXRhaWwgfCBudWxsPiB7XG4gICAgaWYgKCF0aGlzLnN1YnN0cmF0ZUFwaSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgY29sbGVjdGlvbk1ldGFkYXRhID0gKGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5uZnRzLmNvbGxlY3Rpb25NZXRhZGF0YU9mKGNvbGxlY3Rpb25JZCkpLnRvSHVtYW4oKSBhcyBNZXRhZGF0YVJlc3BvbnNlO1xuXG4gICAgaWYgKCFjb2xsZWN0aW9uTWV0YWRhdGE/LmRhdGEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YShjb2xsZWN0aW9uTWV0YWRhdGE/LmRhdGEpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZU5mdCAoYWRkcmVzczogc3RyaW5nLCBwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcykge1xuICAgIC8vIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICBjb25zdCBhc3NldElkcyA9IGF3YWl0IHRoaXMuZ2V0TmZ0cyhbYWRkcmVzc10pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmICghYXNzZXRJZHMgfHwgYXNzZXRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29sbGVjdGlvbklkczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGNvbnN0IG5mdElkczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXNzZXRJZHMubWFwKGFzeW5jIChhc3NldElkKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnNlZENsYXNzSWQgPSB0aGlzLnBhcnNlVG9rZW5JZChhc3NldElkLmNsYXNzSWQgYXMgc3RyaW5nKTtcbiAgICAgICAgY29uc3QgcGFyc2VkVG9rZW5JZCA9IHRoaXMucGFyc2VUb2tlbklkKGFzc2V0SWQudG9rZW5JZCBhcyBzdHJpbmcpO1xuXG4gICAgICAgIGlmICghY29sbGVjdGlvbklkcy5pbmNsdWRlcyhwYXJzZWRDbGFzc0lkKSkge1xuICAgICAgICAgIGNvbGxlY3Rpb25JZHMucHVzaChwYXJzZWRDbGFzc0lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5mdElkcy5wdXNoKHBhcnNlZFRva2VuSWQpO1xuXG4gICAgICAgIGNvbnN0IFt0b2tlbkluZm8sIGNvbGxlY3Rpb25NZXRhXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICB0aGlzLmdldFRva2VuRGV0YWlscyhhc3NldElkKSxcbiAgICAgICAgICB0aGlzLmdldENvbGxlY3Rpb25EZXRhaWwocGFyc2VJbnQocGFyc2VkQ2xhc3NJZCkpXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZE5mdCA9IHtcbiAgICAgICAgICBpZDogcGFyc2VkVG9rZW5JZCxcbiAgICAgICAgICBuYW1lOiB0b2tlbkluZm8/Lm5hbWUgYXMgc3RyaW5nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b2tlbkluZm8/LmRlc2NyaXB0aW9uIGFzIHN0cmluZyxcbiAgICAgICAgICBpbWFnZTogdG9rZW5JbmZvICYmIHRva2VuSW5mby5pbWFnZSA/IHRoaXMucGFyc2VVcmwodG9rZW5JbmZvPy5pbWFnZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgY29sbGVjdGlvbklkOiB0aGlzLnBhcnNlVG9rZW5JZChwYXJzZWRDbGFzc0lkKSxcbiAgICAgICAgICBjaGFpbjogdGhpcy5jaGFpbixcbiAgICAgICAgICBvd25lcjogYWRkcmVzc1xuICAgICAgICB9IGFzIE5mdEl0ZW07XG5cbiAgICAgICAgcGFyYW1zLnVwZGF0ZUl0ZW0odGhpcy5jaGFpbiwgcGFyc2VkTmZ0LCBhZGRyZXNzKTtcblxuICAgICAgICBjb25zdCBwYXJzZWRDb2xsZWN0aW9uID0ge1xuICAgICAgICAgIGNvbGxlY3Rpb25JZDogcGFyc2VkQ2xhc3NJZCxcbiAgICAgICAgICBjaGFpbjogdGhpcy5jaGFpbixcbiAgICAgICAgICBjb2xsZWN0aW9uTmFtZTogY29sbGVjdGlvbk1ldGE/Lm5hbWUsXG4gICAgICAgICAgaW1hZ2U6IGNvbGxlY3Rpb25NZXRhICYmIGNvbGxlY3Rpb25NZXRhLmltYWdlID8gdGhpcy5wYXJzZVVybChjb2xsZWN0aW9uTWV0YT8uaW1hZ2UpIDogdW5kZWZpbmVkXG4gICAgICAgIH0gYXMgTmZ0Q29sbGVjdGlvbjtcblxuICAgICAgICBwYXJhbXMudXBkYXRlQ29sbGVjdGlvbih0aGlzLmNoYWluLCBwYXJzZWRDb2xsZWN0aW9uKTtcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGAke3RoaXMuY2hhaW59YCwgZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZU5mdHMgKHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5hZGRyZXNzZXMubWFwKChhZGRyZXNzKSA9PiB0aGlzLmhhbmRsZU5mdChhZGRyZXNzLCBwYXJhbXMpKSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmV0Y2hOZnRzIChwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVOZnRzKHBhcmFtcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIDE7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBTVVBQT1JURURfVFJBTlNGRVJfU1VCU1RSQVRFX0NIQUlOX05BTUUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC9jb25maWcnO1xuaW1wb3J0IHsgX1N1YnN0cmF0ZUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyByZWZvcm1hdEFkZHJlc3MgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVjaXBpZW50U2VsZiAoY3VycmVudEFkZHJlc3M6IHN0cmluZywgcmVjaXBpZW50QWRkcmVzczogc3RyaW5nKSB7XG4gIHJldHVybiByZWZvcm1hdEFkZHJlc3MoY3VycmVudEFkZHJlc3MsIDEpID09PSByZWZvcm1hdEFkZHJlc3MocmVjaXBpZW50QWRkcmVzcywgMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhY2FsYUdldEV4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBzZW5kZXJBZGRyZXNzOiBzdHJpbmcsIHJlY2lwaWVudEFkZHJlc3M6IHN0cmluZywgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaXRlbUlkID0gcGFyYW1zLml0ZW1JZCBhcyBudW1iZXI7XG4gICAgY29uc3QgY29sbGVjdGlvbklkID0gcGFyYW1zLmNvbGxlY3Rpb25JZCBhcyBudW1iZXI7XG5cbiAgICByZXR1cm4gc3Vic3RyYXRlQXBpLmFwaS50eC5uZnQudHJhbnNmZXIocmVjaXBpZW50QWRkcmVzcywgW2NvbGxlY3Rpb25JZCwgaXRlbUlkXSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGUpO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJtcmtHZXRFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgc2VuZGVyQWRkcmVzczogc3RyaW5nLCByZWNpcGllbnRBZGRyZXNzOiBzdHJpbmcsIHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICB0cnkge1xuICAgIGNvbnN0IHJlbWFyayA9IHBhcmFtcy5yZW1hcmsgYXMgc3RyaW5nO1xuXG4gICAgaWYgKCFyZW1hcmspIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcnNlZFJlbWFyayA9IHJlbWFyay5jb25jYXQocmVjaXBpZW50QWRkcmVzcy5yZXBsYWNlKFxuICAgICAgL1xcXFxzL2csXG4gICAgICAnJ1xuICAgICkpO1xuXG4gICAgcmV0dXJuIHN1YnN0cmF0ZUFwaS5hcGkudHguc3lzdGVtLnJlbWFyayhwYXJzZWRSZW1hcmspO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWVHZXRFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgc2VuZGVyQWRkcmVzczogc3RyaW5nLCByZWNpcGllbnRBZGRyZXNzOiBzdHJpbmcsIHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICB0cnkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IHBhcmFtcy5pdGVtSWQgYXMgbnVtYmVyO1xuICAgIGNvbnN0IGNvbGxlY3Rpb25JZCA9IHBhcmFtcy5jb2xsZWN0aW9uSWQgYXMgbnVtYmVyO1xuXG4gICAgcmV0dXJuIHN1YnN0cmF0ZUFwaS5hcGkudHgubmZ0LnRyYW5zZmVyKHsgU3Vic3RyYXRlOiByZWNpcGllbnRBZGRyZXNzIH0sIGNvbGxlY3Rpb25JZCwgaXRlbUlkLCAxKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVhcnR6R2V0RXh0cmluc2ljIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIHNlbmRlckFkZHJlc3M6IHN0cmluZywgcmVjaXBpZW50QWRkcmVzczogc3RyaW5nLCBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBpdGVtSWQgPSBwYXJhbXMuaXRlbUlkIGFzIG51bWJlcjtcbiAgICBjb25zdCBjb2xsZWN0aW9uSWQgPSBwYXJhbXMuY29sbGVjdGlvbklkIGFzIG51bWJlcjtcblxuICAgIHJldHVybiBzdWJzdHJhdGVBcGkuYXBpLnR4LnVuaXF1ZS50cmFuc2Zlcih7IFN1YnN0cmF0ZTogcmVjaXBpZW50QWRkcmVzcyB9LCBjb2xsZWN0aW9uSWQsIGl0ZW1JZCwgMSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGUpO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXRlbWluZUdldEV4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBzZW5kZXJBZGRyZXNzOiBzdHJpbmcsIHJlY2lwaWVudEFkZHJlc3M6IHN0cmluZywgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaXRlbUlkID0gcGFyYW1zLml0ZW1JZCBhcyBudW1iZXI7XG4gICAgY29uc3QgY29sbGVjdGlvbklkID0gcGFyYW1zLmNvbGxlY3Rpb25JZCBhcyBudW1iZXI7XG5cbiAgICByZXR1cm4gc3Vic3RyYXRlQXBpLmFwaS50eC51bmlxdWVzLnRyYW5zZmVyKGNvbGxlY3Rpb25JZCwgaXRlbUlkLCByZWNpcGllbnRBZGRyZXNzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhdGVtaW50R2V0RXh0cmluc2ljIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIHNlbmRlckFkZHJlc3M6IHN0cmluZywgcmVjaXBpZW50QWRkcmVzczogc3RyaW5nLCBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBpdGVtSWQgPSBwYXJhbXMuaXRlbUlkIGFzIG51bWJlcjtcbiAgICBjb25zdCBjb2xsZWN0aW9uSWQgPSBwYXJhbXMuY29sbGVjdGlvbklkIGFzIG51bWJlcjtcblxuICAgIHJldHVybiBzdWJzdHJhdGVBcGkuYXBpLnR4Lm5mdHMudHJhbnNmZXIoY29sbGVjdGlvbklkLCBpdGVtSWQsIHJlY2lwaWVudEFkZHJlc3MpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZnRUcmFuc2ZlckV4dHJpbnNpYyAobmV0d29ya0tleTogc3RyaW5nLCBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIHNlbmRlckFkZHJlc3M6IHN0cmluZywgcmVjaXBpZW50QWRkcmVzczogc3RyaW5nLCBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgc3dpdGNoIChuZXR3b3JrS2V5KSB7XG4gICAgY2FzZSBTVVBQT1JURURfVFJBTlNGRVJfU1VCU1RSQVRFX0NIQUlOX05BTUUuYWNhbGE6XG4gICAgICByZXR1cm4gYWNhbGFHZXRFeHRyaW5zaWMoc3Vic3RyYXRlQXBpLCBzZW5kZXJBZGRyZXNzLCByZWNpcGllbnRBZGRyZXNzLCBwYXJhbXMpO1xuICAgIGNhc2UgU1VQUE9SVEVEX1RSQU5TRkVSX1NVQlNUUkFURV9DSEFJTl9OQU1FLmthcnVyYTpcbiAgICAgIHJldHVybiBhY2FsYUdldEV4dHJpbnNpYyhzdWJzdHJhdGVBcGksIHNlbmRlckFkZHJlc3MsIHJlY2lwaWVudEFkZHJlc3MsIHBhcmFtcyk7XG4gICAgY2FzZSBTVVBQT1JURURfVFJBTlNGRVJfU1VCU1RSQVRFX0NIQUlOX05BTUUua3VzYW1hOlxuICAgICAgcmV0dXJuIHJtcmtHZXRFeHRyaW5zaWMoc3Vic3RyYXRlQXBpLCBzZW5kZXJBZGRyZXNzLCByZWNpcGllbnRBZGRyZXNzLCBwYXJhbXMpO1xuICAgIGNhc2UgU1VQUE9SVEVEX1RSQU5TRkVSX1NVQlNUUkFURV9DSEFJTl9OQU1FLnVuaXF1ZU5mdDpcbiAgICAgIHJldHVybiB1bmlxdWVHZXRFeHRyaW5zaWMoc3Vic3RyYXRlQXBpLCBzZW5kZXJBZGRyZXNzLCByZWNpcGllbnRBZGRyZXNzLCBwYXJhbXMpO1xuICAgIGNhc2UgU1VQUE9SVEVEX1RSQU5TRkVSX1NVQlNUUkFURV9DSEFJTl9OQU1FLnF1YXJ0ejpcbiAgICAgIHJldHVybiBxdWFydHpHZXRFeHRyaW5zaWMoc3Vic3RyYXRlQXBpLCBzZW5kZXJBZGRyZXNzLCByZWNpcGllbnRBZGRyZXNzLCBwYXJhbXMpO1xuICAgIGNhc2UgU1VQUE9SVEVEX1RSQU5TRkVSX1NVQlNUUkFURV9DSEFJTl9OQU1FLm9wYWw6XG4gICAgICByZXR1cm4gcXVhcnR6R2V0RXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgc2VuZGVyQWRkcmVzcywgcmVjaXBpZW50QWRkcmVzcywgcGFyYW1zKTtcbiAgICBjYXNlIFNVUFBPUlRFRF9UUkFOU0ZFUl9TVUJTVFJBVEVfQ0hBSU5fTkFNRS5zdGF0ZW1pbmU6XG4gICAgICByZXR1cm4gc3RhdGVtaW5lR2V0RXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgc2VuZGVyQWRkcmVzcywgcmVjaXBpZW50QWRkcmVzcywgcGFyYW1zKTtcbiAgICBjYXNlIFNVUFBPUlRFRF9UUkFOU0ZFUl9TVUJTVFJBVEVfQ0hBSU5fTkFNRS5zdGF0ZW1pbnQ6XG4gICAgICByZXR1cm4gc3RhdGVtaW50R2V0RXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgc2VuZGVyQWRkcmVzcywgcmVjaXBpZW50QWRkcmVzcywgcGFyYW1zKTtcbiAgICBjYXNlIFNVUFBPUlRFRF9UUkFOU0ZFUl9TVUJTVFJBVEVfQ0hBSU5fTkFNRS5iaXRjb3VudHJ5OlxuICAgICAgcmV0dXJuIGFjYWxhR2V0RXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgc2VuZGVyQWRkcmVzcywgcmVjaXBpZW50QWRkcmVzcywgcGFyYW1zKTtcbiAgICBjYXNlIFNVUFBPUlRFRF9UUkFOU0ZFUl9TVUJTVFJBVEVfQ0hBSU5fTkFNRS5waW9uZWVyOlxuICAgICAgcmV0dXJuIGFjYWxhR2V0RXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgc2VuZGVyQWRkcmVzcywgcmVjaXBpZW50QWRkcmVzcywgcGFyYW1zKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEJhc2VOZnRBcGksIEhhbmRsZU5mdFBhcmFtcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L25mdCc7XG5pbXBvcnQgeyBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IGhleFRvU3RyLCBoZXhUb1VURjE2LCB1dGYxNlRvU3RyaW5nIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5cbmltcG9ydCB7IGRlc2VyaWFsaXplTmZ0IH0gZnJvbSAnLi9wcm90b2J1Zic7XG5cbmludGVyZmFjZSBDb2xsZWN0aW9uIHtcbiAgU2NoZW1hVmVyc2lvbjogc3RyaW5nLFxuICBPZmZjaGFpblNjaGVtYTogc3RyaW5nLFxuICBDb25zdE9uQ2hhaW5TY2hlbWE6IHN0cmluZyxcbiAgVG9rZW5QcmVmaXg6IHN0cmluZyxcbiAgRGVzY3JpcHRpb246IG51bWJlcltdLFxuICBOYW1lOiBudW1iZXJbXVxufVxuXG5pbnRlcmZhY2UgVG9rZW4ge1xuICBDb25zdERhdGE6IHN0cmluZyxcbiAgT3duZXI6IHN0cmluZ1xufVxuXG4vLyBkZXByZWNhdGVkXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVbmlxdWVOZnRBcGkgZXh0ZW5kcyBCYXNlTmZ0QXBpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgY29uc3RydWN0b3IgKGFwaTogX1N1YnN0cmF0ZUFwaSB8IG51bGwsIGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluOiBzdHJpbmcpIHtcbiAgICBzdXBlcihjaGFpbiwgYXBpLCBhZGRyZXNzZXMpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldENvbGxlY3Rpb25Db3VudCAoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBpZiAoIXRoaXMuc3Vic3RyYXRlQXBpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5uZnQuY3JlYXRlZENvbGxlY3Rpb25Db3VudCgpKSBhcyB1bmtub3duIGFzIG51bWJlcjtcbiAgfVxuXG4gIC8qKlxuICAgICogUmV0cmlldmUgYWRkcmVzcyBvZiBORlRzXG4gICAgKlxuICAgICogQHBhcmFtIGNvbGxlY3Rpb25JZDogSWQgb2YgdGhlIGNvbGxlY3Rpb25cbiAgICAqIEBwYXJhbSBvd25lcjogYWRkcmVzcyBvZiBhY2NvdW50XG4gICAgKiBAcmV0dXJucyB0aGUgYXJyYXkgb2YgTkZUc1xuICAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRBZGRyZXNzVG9rZW5zIChjb2xsZWN0aW9uSWQ6IG51bWJlciwgb3duZXI6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgaWYgKCF0aGlzLnN1YnN0cmF0ZUFwaSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiAoYXdhaXQgdGhpcy5zdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5Lm5mdC5hZGRyZXNzVG9rZW5zKGNvbGxlY3Rpb25JZCwgb3duZXIpKS50b0pTT04oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBORlQgaW1hZ2UgVVJMIGFjY29yZGluZyB0byB0aGUgY29sbGVjdGlvbiBvZmZjaGFpbiBzY2hlbWFcbiAgICpcbiAgICogQHBhcmFtIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHRva2VuSWQ6IFRva2VuIElEXG4gICAqIEByZXR1cm5zIHRoZSBVUkwgb2YgdGhlIHRva2VuIGltYWdlXG4gICAqL1xuICBwdWJsaWMgZ2V0TmZ0SW1hZ2VVcmwgKGNvbGxlY3Rpb246IENvbGxlY3Rpb24sIHRva2VuSWQ6IHN0cmluZykge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdXJsID0gJyc7XG5cbiAgICAvLyBHZXQgc2NoZW1hIHZlcnNpb24gYW5kIG9mZi1jaGFpbiBzY2hlbWFcbiAgICBpZiAoIWNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzY2hlbWFWZXJzaW9uID0gY29sbGVjdGlvbi5TY2hlbWFWZXJzaW9uO1xuICAgIGNvbnN0IG9mZmNoYWluU2NoZW1hID0gaGV4VG9TdHIoY29sbGVjdGlvbi5PZmZjaGFpblNjaGVtYSk7XG5cbiAgICBpZiAoc2NoZW1hVmVyc2lvbiA9PT0gJ0ltYWdlVVJMJykge1xuICAgICAgLy8gUmVwbGFjZSB7aWR9IHdpdGggdG9rZW4gSURcbiAgICAgIHVybCA9IG9mZmNoYWluU2NoZW1hO1xuICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ3tpZH0nLCBgJHt0b2tlbklkfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUQkQ6IFF1ZXJ5IGltYWdlIFVSTCBmcm9tIHRoZSBSRVNUZnVsIHNlcnZpY2VcbiAgICB9XG5cbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGFuZCBkZXNlcmlhbGl6ZSBwcm9wZXJ0aWVzXG4gICAqXG4gICAqXG4gICAqIEBwYXJhbSBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB0b2tlbklkOiBUb2tlbiBJRFxuICAgKiBAcGFyYW0gbG9jYWxlOiBPdXRwdXQgbG9jYWxlIChkZWZhdWx0IGlzIFwiZW5cIilcbiAgICogQHBhcmFtIGNvbGxlY3Rpb25JZFxuICAgKiBAcmV0dXJucyB0b2tlbkRhdGE6IFRva2VuIGRhdGEgb2JqZWN0XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0TmZ0RGF0YSAoY29sbGVjdGlvbjogQ29sbGVjdGlvbiwgdG9rZW5JZDogc3RyaW5nLCBsb2NhbGUgPSAnZW4nLCBjb2xsZWN0aW9uSWQ6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJzdHJhdGVBcGkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzY2hlbWFSZWFkID0gaGV4VG9TdHIoY29sbGVjdGlvbi5Db25zdE9uQ2hhaW5TY2hlbWEpO1xuICAgIGNvbnN0IHRva2VuID0gKGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5uZnQubmZ0SXRlbUxpc3QoY29sbGVjdGlvbklkLCB0b2tlbklkKSkudG9KU09OKCkgYXMgdW5rbm93biBhcyBUb2tlbjtcbiAgICBjb25zdCBuZnRQcm9wcyA9IGhleFRvVVRGMTYodG9rZW4uQ29uc3REYXRhKTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gZGVzZXJpYWxpemVOZnQoc2NoZW1hUmVhZCwgbmZ0UHJvcHMsIGxvY2FsZSk7XG5cbiAgICBsZXQgdXJsID0gJyc7XG5cbiAgICAvLyBHZXQgc2NoZW1hIHZlcnNpb24gYW5kIG9mZi1jaGFpbiBzY2hlbWFcbiAgICBpZiAoIWNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzY2hlbWFWZXJzaW9uID0gY29sbGVjdGlvbi5TY2hlbWFWZXJzaW9uO1xuICAgIGNvbnN0IG9mZmNoYWluU2NoZW1hID0gaGV4VG9TdHIoY29sbGVjdGlvbi5PZmZjaGFpblNjaGVtYSk7XG5cbiAgICBpZiAoc2NoZW1hVmVyc2lvbiA9PT0gJ0ltYWdlVVJMJykge1xuICAgICAgLy8gUmVwbGFjZSB7aWR9IHdpdGggdG9rZW4gSURcbiAgICAgIHVybCA9IG9mZmNoYWluU2NoZW1hO1xuICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ3tpZH0nLCBgJHt0b2tlbklkfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUQkQ6IFF1ZXJ5IGltYWdlIFVSTCBmcm9tIHRoZSBSRVNUZnVsIHNlcnZpY2VcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgb3duZXI6IHRva2VuLk93bmVyLFxuICAgICAgcHJlZml4OiBoZXhUb1N0cihjb2xsZWN0aW9uLlRva2VuUHJlZml4KSxcbiAgICAgIGNvbGxlY3Rpb25OYW1lOiB1dGYxNlRvU3RyaW5nKGNvbGxlY3Rpb24uTmFtZSksXG4gICAgICBjb2xsZWN0aW9uRGVzY3JpcHRpb246IHV0ZjE2VG9TdHJpbmcoY29sbGVjdGlvbi5EZXNjcmlwdGlvbiksXG4gICAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgICAgaW1hZ2U6IHVybFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlTmZ0IChhZGRyZXNzOiBzdHJpbmcsIHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKSB7XG4gICAgLy8gY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgIGNvbnN0IGNvbGxlY3Rpb25Db3VudCA9IGF3YWl0IHRoaXMuZ2V0Q29sbGVjdGlvbkNvdW50KCk7XG4gICAgY29uc3QgYWRkcmVzc1Rva2VuRGljdDogYW55W10gPSBbXTtcbiAgICBjb25zdCBuZnRNYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBjb25zdCBjb2xsZWN0aW9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBDb2xsZWN0aW9uPiA9IHt9O1xuICAgIGNvbnN0IGFsbENvbGxlY3Rpb25JZDogbnVtYmVyW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbGxlY3Rpb25Db3VudDsgaSsrKSB7XG4gICAgICAgIGZvciAoY29uc3QgYWRkciBvZiBbYWRkcmVzc10pIHtcbiAgICAgICAgICBhZGRyZXNzVG9rZW5EaWN0LnB1c2goeyBpLCBhY2NvdW50OiBhZGRyIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFkZHJlc3NUb2tlbkRpY3QubWFwKGFzeW5jIChpdGVtOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgY29uc3QgbmZ0SWRzID0gYXdhaXQgdGhpcy5nZXRBZGRyZXNzVG9rZW5zKGl0ZW0uaSBhcyBudW1iZXIsIGl0ZW0uYWNjb3VudCBhcyBzdHJpbmcpO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgaWYgKG5mdElkcyAmJiBuZnRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmICghYWxsQ29sbGVjdGlvbklkLmluY2x1ZGVzKGl0ZW0uaSBhcyBudW1iZXIpKSB7XG4gICAgICAgICAgICBhbGxDb2xsZWN0aW9uSWQucHVzaChpdGVtLmkgYXMgbnVtYmVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IG5mdElkIG9mIG5mdElkcykge1xuICAgICAgICAgICAgbmZ0TWFwW25mdElkIGFzIHN0cmluZ10gPSBpdGVtLmkgYXMgbnVtYmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkpO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChhbGxDb2xsZWN0aW9uSWQubWFwKGFzeW5jIChjb2xsZWN0aW9uSWQpID0+IHtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbklkU3RyID0gY29sbGVjdGlvbklkLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gKGF3YWl0IHRoaXMuc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5uZnQuY29sbGVjdGlvbkJ5SWQoY29sbGVjdGlvbklkKSkudG9KU09OKCkgYXMgdW5rbm93biBhcyBDb2xsZWN0aW9uO1xuXG4gICAgICAgIGNvbGxlY3Rpb25NYXBbY29sbGVjdGlvbklkU3RyXSA9IGNvbGxlY3Rpb247XG4gICAgICAgIGNvbnN0IG5mdElkcyA9IE9iamVjdC5lbnRyaWVzKG5mdE1hcCkuZmlsdGVyKChpdGVtKSA9PiBpdGVtWzFdID09PSBjb2xsZWN0aW9uSWQpLm1hcCgoaXRlbSkgPT4gaXRlbVswXSk7XG5cbiAgICAgICAgY29uc3QgcGFyc2VkQ29sbGVjdGlvbjogTmZ0Q29sbGVjdGlvbiA9IHtcbiAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGNvbGxlY3Rpb25JZFN0cixcbiAgICAgICAgICBjaGFpbjogdGhpcy5jaGFpblxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKG5mdElkcy5tYXAoYXN5bmMgKG5mdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHRva2VuSWQgPSBuZnQ7XG4gICAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSB0aGlzLmdldE5mdEltYWdlVXJsKGNvbGxlY3Rpb24sIHRva2VuSWQpO1xuXG4gICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdGhpcy5nZXROZnREYXRhKGNvbGxlY3Rpb24sIHRva2VuSWQsICdlbicsIGNvbGxlY3Rpb25JZCk7XG5cbiAgICAgICAgICBpZiAodG9rZW5EYXRhICYmIGltYWdlVXJsKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRJdGVtID0ge1xuICAgICAgICAgICAgICBpZDogdG9rZW5JZCxcbiAgICAgICAgICAgICAgbmFtZTogdG9rZW5EYXRhLnByZWZpeCArICcjJyArIHRva2VuSWQsXG4gICAgICAgICAgICAgIGltYWdlOiB0aGlzLnBhcnNlVXJsKGltYWdlVXJsKSxcbiAgICAgICAgICAgICAgZXh0ZXJuYWxVcmw6IGBodHRwczovL3VucW5mdC5pby8jL21hcmtldC90b2tlbi1kZXRhaWxzP2NvbGxlY3Rpb25JZD0ke2NvbGxlY3Rpb25JZH0mdG9rZW5JZD0ke3Rva2VuSWR9YCxcbiAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBjb2xsZWN0aW9uSWRTdHIsXG4gICAgICAgICAgICAgIHByb3BlcnRpZXM6IHRva2VuRGF0YS5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICByYXJpdHk6ICcnLFxuICAgICAgICAgICAgICBjaGFpbjogdGhpcy5jaGFpbixcbiAgICAgICAgICAgICAgb3duZXI6IGFkZHJlc3NcbiAgICAgICAgICAgIH0gYXMgTmZ0SXRlbTtcblxuICAgICAgICAgICAgaWYgKCFwYXJzZWRDb2xsZWN0aW9uLmNvbGxlY3Rpb25OYW1lKSB7XG4gICAgICAgICAgICAgIHBhcnNlZENvbGxlY3Rpb24uY29sbGVjdGlvbk5hbWUgPSB0b2tlbkRhdGEuY29sbGVjdGlvbk5hbWU7XG4gICAgICAgICAgICAgIHBhcnNlZENvbGxlY3Rpb24uaW1hZ2UgPSB0aGlzLnBhcnNlVXJsKHRva2VuRGF0YS5pbWFnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcmFtcy51cGRhdGVJdGVtKHRoaXMuY2hhaW4sIHBhcnNlZEl0ZW0sIGFkZHJlc3MpO1xuICAgICAgICAgICAgcGFyYW1zLnVwZGF0ZUNvbGxlY3Rpb24odGhpcy5jaGFpbiwgcGFyc2VkQ29sbGVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgJHt0aGlzLmNoYWlufWAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGVOZnRzIChwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcykge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuYWRkcmVzc2VzLm1hcCgoYWRkcmVzcykgPT4gdGhpcy5oYW5kbGVOZnQoYWRkcmVzcywgcGFyYW1zKSkpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGZldGNoTmZ0cyAocGFyYW1zOiBIYW5kbGVOZnRQYXJhbXMpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTmZ0cyhwYXJhbXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiAxO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgUm9vdCB9IGZyb20gJ3Byb3RvYnVmanMnO1xuXG5mdW5jdGlvbiBkZWZpbmVNZXNzYWdlIChzY2hlbWE6IHN0cmluZykge1xuICB0cnkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgcmV0dXJuIFJvb3QuZnJvbUpTT04oSlNPTi5wYXJzZShzY2hlbWEpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKCdFcnJvciBwYXJzaW5nIEpTT04gc2NoZW1hJywgZSk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0RW51bVRvU3RyaW5nICh2YWx1ZTogYW55LCBrZXk6IHN0cmluZywgTkZUTWV0YTogYW55LCBsb2NhbGU6IGFueSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gIGxldCByZXN1bHQgPSB2YWx1ZTtcblxuICB0cnkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgY29uc3Qgb3B0aW9ucyA9IE5GVE1ldGE/LmZpZWxkc1trZXldPy5yZXNvbHZlZFR5cGU/Lm9wdGlvbnM7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICBjb25zdCB2YWx1ZUpzb25Db21tZW50ID0gb3B0aW9uc1t2YWx1ZV07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnQsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgY29uc3QgdHJhbnNsYXRpb25PYmplY3QgPSBKU09OLnBhcnNlKHZhbHVlSnNvbkNvbW1lbnQpO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgIGlmICh0cmFuc2xhdGlvbk9iamVjdCAmJiAodHJhbnNsYXRpb25PYmplY3RbbG9jYWxlXSkpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICByZXN1bHQgPSB0cmFuc2xhdGlvbk9iamVjdFtsb2NhbGVdO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKCdFcnJvciBwYXJzaW5nIHNjaGVtYSB3aGVuIHRyeWluZyB0byBjb252ZXJ0IGVudW0gdG8gc3RyaW5nOiAnLCBlKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgY29uc3QgZGVzZXJpYWxpemVOZnQgPSAoc2NoZW1hOiBzdHJpbmcsIGJ1ZmZlcjogVWludDhBcnJheSwgbG9jYWxlOiBzdHJpbmcpID0+IHtcbiAgY29uc3Qgcm9vdCA9IGRlZmluZU1lc3NhZ2Uoc2NoZW1hKTtcblxuICBpZiAocm9vdCA9PT0gbnVsbCkge1xuICAgIHJldHVybiByb290O1xuICB9XG5cbiAgLy8gT2J0YWluIHRoZSBtZXNzYWdlIHR5cGVcbiAgY29uc3QgTkZUTWV0YSA9IHJvb3QubG9va3VwVHlwZSgnb25DaGFpbk1ldGFEYXRhLk5GVE1ldGEnKTtcblxuICAvLyBEZWNvZGUgYSBVaW50OEFycmF5IChicm93c2VyKSBvciBCdWZmZXIgKG5vZGUpIHRvIGEgbWVzc2FnZVxuICBjb25zdCBtZXNzYWdlID0gTkZUTWV0YS5kZWNvZGUoYnVmZmVyKTtcblxuICAvLyBNYXliZSBjb252ZXJ0IHRoZSBtZXNzYWdlIGJhY2sgdG8gYSBwbGFpbiBvYmplY3RcbiAgY29uc3Qgb2JqZWN0SXRlbSA9IE5GVE1ldGEudG9PYmplY3QobWVzc2FnZSwge1xuICAgIGFycmF5czogdHJ1ZSwgLy8gcG9wdWxhdGVzIGVtcHR5IGFycmF5cyAocmVwZWF0ZWQgZmllbGRzKSBldmVuIGlmIGRlZmF1bHRzPWZhbHNlXG4gICAgYnl0ZXM6IFN0cmluZywgLy8gYnl0ZXMgYXMgYmFzZTY0IGVuY29kZWQgc3RyaW5nc1xuICAgIGRlZmF1bHRzOiB0cnVlLCAvLyBpbmNsdWRlcyBkZWZhdWx0IHZhbHVlc1xuICAgIGVudW1zOiBTdHJpbmcsIC8vIGVudW1zIGFzIHN0cmluZyBuYW1lc1xuICAgIGxvbmdzOiBTdHJpbmcsIC8vIGxvbmdzIGFzIHN0cmluZ3MgKHJlcXVpcmVzIGxvbmcuanMpXG4gICAgb2JqZWN0czogdHJ1ZSwgLy8gcG9wdWxhdGVzIGVtcHR5IG9iamVjdHMgKG1hcCBmaWVsZHMpIGV2ZW4gaWYgZGVmYXVsdHM9ZmFsc2VcbiAgICBvbmVvZnM6IHRydWVcbiAgfSk7XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0SXRlbSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG4gICAgaWYgKE5GVE1ldGE/LmZpZWxkc1trZXldPy5yZXNvbHZlZFR5cGU/Lm9wdGlvbnMgJiYgT2JqZWN0LmtleXMoTkZUTWV0YT8uZmllbGRzW2tleV0/LnJlc29sdmVkVHlwZT8ub3B0aW9ucyBhcyBPYmplY3QpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdEl0ZW1ba2V5XSkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICBjb25zdCBpdGVtID0gb2JqZWN0SXRlbVtrZXldO1xuXG4gICAgICAgIG9iamVjdEl0ZW1ba2V5XSA9IFtdO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICBpdGVtLmZvckVhY2goKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIG9iamVjdEl0ZW1ba2V5XS5wdXNoKGNvbnZlcnRFbnVtVG9TdHJpbmcodmFsdWUsIGtleSwgTkZUTWV0YSwgbG9jYWxlKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgIG9iamVjdEl0ZW1ba2V5XSA9IGNvbnZlcnRFbnVtVG9TdHJpbmcob2JqZWN0SXRlbVtrZXldLCBrZXksIE5GVE1ldGEsIGxvY2FsZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iamVjdEl0ZW07XG59O1xuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IFZBUkFfU0NBTl9FTkRQT0lOVCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L2NvbmZpZyc7XG5pbXBvcnQgeyBCYXNlTmZ0QXBpLCBIYW5kbGVOZnRQYXJhbXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC9uZnQnO1xuaW1wb3J0IGZldGNoIGZyb20gJ2Nyb3NzLWZldGNoJztcblxuaW1wb3J0IHsgaGV4QWRkUHJlZml4LCB1OGFUb0hleCB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IGRlY29kZUFkZHJlc3MgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC1jcnlwdG8nO1xuXG5pbnRlcmZhY2UgTmZ0RGF0YSB7XG4gIGNvbGxlY3Rpb246IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICB9O1xuICBpZDogc3RyaW5nO1xuICBtZWRpYVVybDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHRva2VuSWQ6IHN0cmluZztcbiAgYXR0cmliVXJsOiBzdHJpbmdbXTtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFZhcmFOZnRBcGkgZXh0ZW5kcyBCYXNlTmZ0QXBpIHtcbiAgZW5kcG9pbnQgPSBWQVJBX1NDQU5fRU5EUE9JTlQ7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgY29uc3RydWN0b3IgKGNoYWluOiBzdHJpbmcsIGFkZHJlc3Nlczogc3RyaW5nW10pIHtcbiAgICBzdXBlcihjaGFpbiwgdW5kZWZpbmVkLCBhZGRyZXNzZXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcGFyc2VOZnRSZXF1ZXN0IChwdWJsaWNLZXk6IHN0cmluZykge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIHF1ZXJ5OiBgXG4gICAgICAgIHF1ZXJ5IE15UXVlcnkge1xuICAgICAgICAgIGFjY291bnRCeUlkKGlkOiBcIiR7cHVibGljS2V5fVwiKSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgbmZ0cyB7XG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIG1lZGlhVXJsXG4gICAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgICAgdG9rZW5JZFxuICAgICAgICAgICAgICBhdHRyaWJVcmxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgY29sbGVjdGlvbiB7XG4gICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYFxuICAgIH07XG4gIH1cblxuICAvLyBwcml2YXRlIHN0YXRpYyBwYXJzZU5mdENvbGxlY3Rpb25SZXF1ZXN0IChjb2xsZWN0aW9uSWQ6IHN0cmluZykge1xuICAvLyAgIHJldHVybiB7XG4gIC8vICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgLy8gICAgIHF1ZXJ5OiBgcXVlcnkgTXlRdWVyeSB7IGNvbGxlY3Rpb25zKHdoZXJlOiB7Y29sbGVjdGlvbl9pZDoge19lcTogXFxcIiR7Y29sbGVjdGlvbklkfVxcXCJ9fSkgeyBjb2xsZWN0aW9uX2lkIG5hbWUgfSB9YFxuICAvLyAgIH07XG4gIC8vIH1cblxuICBwcml2YXRlIGFzeW5jIGdldE5mdEJ5QWNjb3VudCAoYWRkcmVzczogc3RyaW5nKSB7XG4gICAgY29uc3QgcHVibGljS2V5ID0gaGV4QWRkUHJlZml4KHU4YVRvSGV4KGRlY29kZUFkZHJlc3MoYWRkcmVzcykpKTtcblxuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh0aGlzLmVuZHBvaW50LCB7XG4gICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KFZhcmFOZnRBcGkucGFyc2VOZnRSZXF1ZXN0KHB1YmxpY0tleSkpXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwLmpzb24oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgIHJldHVybiByZXN1bHQ/LmRhdGE/LmFjY291bnRCeUlkPy5uZnRzIGFzIE5mdERhdGFbXTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBoYW5kbGVOZnRzIChwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmFkZHJlc3Nlcy5tYXAoYXN5bmMgKGFkZHJlc3MpID0+IHtcbiAgICAgICAgY29uc3QgbmZ0cyA9IGF3YWl0IHRoaXMuZ2V0TmZ0QnlBY2NvdW50KGFkZHJlc3MpO1xuXG4gICAgICAgIGZvciAoY29uc3QgbmZ0IG9mIG5mdHMpIHtcbiAgICAgICAgICBjb25zdCBwYXJzZWROZnQ6IE5mdEl0ZW0gPSB7XG4gICAgICAgICAgICBpZDogbmZ0LnRva2VuSWQsXG4gICAgICAgICAgICBjaGFpbjogdGhpcy5jaGFpbixcbiAgICAgICAgICAgIG93bmVyOiBhZGRyZXNzLFxuICAgICAgICAgICAgbmFtZTogbmZ0Lm5hbWUsXG4gICAgICAgICAgICBpbWFnZTogdGhpcy5wYXJzZVVybChuZnQubWVkaWFVcmwpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IG5mdC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbmZ0LmNvbGxlY3Rpb24uaWRcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3QgcGFyc2VkQ29sbGVjdGlvbjogTmZ0Q29sbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbmZ0LmNvbGxlY3Rpb24uaWQsXG4gICAgICAgICAgICBjaGFpbjogdGhpcy5jaGFpbixcbiAgICAgICAgICAgIGNvbGxlY3Rpb25OYW1lOiBuZnQuY29sbGVjdGlvbi5uYW1lXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHBhcmFtcy51cGRhdGVJdGVtKHRoaXMuY2hhaW4sIHBhcnNlZE5mdCwgYWRkcmVzcyk7XG4gICAgICAgICAgcGFyYW1zLnVwZGF0ZUNvbGxlY3Rpb24odGhpcy5jaGFpbiwgcGFyc2VkQ29sbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggJHt0aGlzLmNoYWlufSBuZnRgLCBlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmV0Y2hOZnRzIChwYXJhbXM6IEhhbmRsZU5mdFBhcmFtcyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTmZ0cyhwYXJhbXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiAxO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0Fzc2V0VHlwZSwgX0NoYWluQXNzZXQgfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgTmZ0Q29sbGVjdGlvbiwgTmZ0SXRlbSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgQVpFUk9fRE9NQUlOX0NPTlRSQUNUUyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvZG90c2FtYS9kb21haW4nO1xuaW1wb3J0IHsgQmFzZU5mdEFwaSwgSGFuZGxlTmZ0UGFyYW1zIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQvbmZ0JztcbmltcG9ydCB7IGNvbGxlY3Rpb25BcGlGcm9tQXJ0WmVybywgY29sbGVjdGlvbkRldGFpbEFwaUZyb21BcnRaZXJvLCBleHRlcm5hbFVybE9uQXJ0WmVybywgaXBmc0FwaUZyb21BcnRaZXJvLCBpdGVtSW1hZ2VBcGlGcm9tQXJ0WmVybyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvbmZ0L3dhc21fbmZ0L3V0aWxzJztcbmltcG9ydCB7IGdldFBTUDM0Q29udHJhY3RQcm9taXNlLCBnZXRUb2tlblVyaU1ldGhvZCwgaXNBemVyb0RvbWFpbk5mdCwgaXNQaW5rUm9ib05mdCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvdG9rZW5zL3dhc20nO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFdlaWdodFYyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS90b2tlbnMvd2FzbS91dGlscyc7XG5pbXBvcnQgeyBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IF9nZXRDb250cmFjdEFkZHJlc3NPZlRva2VuIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3V0aWxzJztcbmltcG9ydCB7IGlzVXJsIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGZldGNoIGZyb20gJ2Nyb3NzLWZldGNoJztcblxuaW1wb3J0IHsgQXBpUHJvbWlzZSB9IGZyb20gJ0Bwb2xrYWRvdC9hcGknO1xuaW1wb3J0IHsgQ29udHJhY3RQcm9taXNlIH0gZnJvbSAnQHBvbGthZG90L2FwaS1jb250cmFjdCc7XG5pbXBvcnQgeyBpc0V0aGVyZXVtQWRkcmVzcyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsLWNyeXB0byc7XG5cbi8vIGludGVyZmFjZSBDb2xsZWN0aW9uQXR0cmlidXRlcyB7XG4vLyAgIHN0b3JlZE9uQ2hhaW46IGJvb2xlYW4sXG4vLyAgIGF0dHJpYnV0ZUxpc3Q6IHN0cmluZ1tdIC8vIGxpc3Qgb2YgYXR0cmlidXRlIG5hbWVzXG4vLyB9XG5cbmFzeW5jIGZ1bmN0aW9uIGlzQXJ0WmVyb0ZlYXR1cmVkQ29sbGVjdGlvbiAobmV0d29ya0tleTogc3RyaW5nLCBjb250cmFjdEFkZHJlc3M6IHN0cmluZykge1xuICBjb25zdCB0aW1lb3V0ID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBpZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgfSwgMzAwMCk7XG4gIH0pO1xuXG4gIGNvbnN0IHVybGVuY29kZWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cbiAgdXJsZW5jb2RlZC5hcHBlbmQoJ2NvbGxlY3Rpb25fYWRkcmVzcycsIGNvbnRyYWN0QWRkcmVzcyk7XG5cbiAgY29uc3QgY29sbGVjdGlvbkluZm9Qcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICBmZXRjaChjb2xsZWN0aW9uQXBpRnJvbUFydFplcm8obmV0d29ya0tleSksIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbiAgICAgIH0sXG4gICAgICBib2R5OiB1cmxlbmNvZGVkXG4gICAgfSkudGhlbigocmVzcCkgPT4ge1xuICAgICAgcmVzb2x2ZShyZXNwLmpzb24oKSk7XG4gICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH0pO1xuXG4gIGNvbnN0IGNvbGxlY3Rpb25JbmZvID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICB0aW1lb3V0LFxuICAgIGNvbGxlY3Rpb25JbmZvUHJvbWlzZVxuICBdKTtcblxuICAvLyBAdHMtaWdub3JlXG4gIHJldHVybiBjb2xsZWN0aW9uSW5mbyAhPT0gbnVsbCAmJiBjb2xsZWN0aW9uSW5mbz8uc3RhdHVzICE9PSAnRkFJTEVEJztcbn1cblxuZXhwb3J0IGNsYXNzIFdhc21OZnRBcGkgZXh0ZW5kcyBCYXNlTmZ0QXBpIHtcbiAgcHJpdmF0ZSB3YXNtQ29udHJhY3RzOiBfQ2hhaW5Bc3NldFtdID0gW107XG5cbiAgY29uc3RydWN0b3IgKGFwaTogX1N1YnN0cmF0ZUFwaSB8IG51bGwsIGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluOiBzdHJpbmcpIHtcbiAgICBzdXBlcihjaGFpbiwgYXBpLCBhZGRyZXNzZXMpO1xuICB9XG5cbiAgc2V0U21hcnRDb250cmFjdE5mdHMgKHdhc21Db250cmFjdHM6IF9DaGFpbkFzc2V0W10pIHtcbiAgICB0aGlzLndhc21Db250cmFjdHMgPSB3YXNtQ29udHJhY3RzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpc0F0dHJpYnV0ZVN0b3JlZE9uQ2hhaW4gKGNvbnRyYWN0UHJvbWlzZTogQ29udHJhY3RQcm9taXNlKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCFjb250cmFjdFByb21pc2UucXVlcnlbJ3BzcDM0VHJhaXRzOjpnZXRBdHRyaWJ1dGVDb3VudCddKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IF9vbkNoYWluQXR0cmlidXRlQ291bnQgPSBhd2FpdCBjb250cmFjdFByb21pc2UucXVlcnlbJ3BzcDM0VHJhaXRzOjpnZXRBdHRyaWJ1dGVDb3VudCddKHRoaXMuYWRkcmVzc2VzWzBdLCB7IGdhc0xpbWl0OiBnZXREZWZhdWx0V2VpZ2h0VjIodGhpcy5zdWJzdHJhdGVBcGk/LmFwaSBhcyBBcGlQcm9taXNlKSB9KTtcbiAgICBjb25zdCBfYXR0cmlidXRlQ291bnQgPSBfb25DaGFpbkF0dHJpYnV0ZUNvdW50Py5vdXRwdXQ/LnRvSlNPTigpIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgIGNvbnN0IG9uQ2hhaW5BdHRyaWJ1dGVDb3VudCA9IF9vbkNoYWluQXR0cmlidXRlQ291bnQub3V0cHV0ID8gKF9hdHRyaWJ1dGVDb3VudD8ub2sgfHwgX2F0dHJpYnV0ZUNvdW50Py5PaykgYXMgc3RyaW5nIDogJzAnO1xuXG4gICAgaWYgKCFfb25DaGFpbkF0dHJpYnV0ZUNvdW50LnJlc3VsdC5pc09rKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhb25DaGFpbkF0dHJpYnV0ZUNvdW50ICYmIHBhcnNlSW50KG9uQ2hhaW5BdHRyaWJ1dGVDb3VudCkgIT09IDA7XG4gIH1cblxuICBwcml2YXRlIHBhcnNlRmVhdHVyZWRUb2tlblVyaSAodG9rZW5Vcmk6IHN0cmluZykge1xuICAgIGlmICghdG9rZW5VcmkgfHwgdG9rZW5VcmkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChpc1VybCh0b2tlblVyaSkpIHtcbiAgICAgIHJldHVybiB0b2tlblVyaTtcbiAgICB9XG5cbiAgICBpZiAodG9rZW5Vcmkuc3RhcnRzV2l0aCgnL2lwZnMvJykpIHtcbiAgICAgIHJldHVybiB0b2tlblVyaTtcbiAgICB9XG5cbiAgICBpZiAodG9rZW5Vcmkuc3RhcnRzV2l0aCgnaXBmczovLycpKSB7XG4gICAgICByZXR1cm4gYC9pcGZzLyR7dG9rZW5Vcmkuc3BsaXQoJ2lwZnM6Ly8nKVsxXX1gO1xuICAgIH1cblxuICAgIGlmICghdG9rZW5VcmkuaW5jbHVkZXMoJ2lwZnM6Ly8nKSAmJiAhdG9rZW5VcmkuaW5jbHVkZXMoJ2lwZnM6Ly9pcGZzLycpKSB7XG4gICAgICByZXR1cm4gYC9pcGZzLyR7dG9rZW5Vcml9YDtcbiAgICB9XG5cbiAgICBpZiAodG9rZW5VcmkuaW5jbHVkZXMoJ2lwZnM6Ly9pcGZzLycpKSB7XG4gICAgICByZXR1cm4gYC9pcGZzLyR7dG9rZW5Vcmkuc3BsaXQoJ2lwZnM6Ly9pcGZzLycpWzFdfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuVXJpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwYXJzZUZlYXR1cmVkTmZ0SW1hZ2UgKHRva2VuVXJpOiBzdHJpbmcpIHtcbiAgICBjb25zdCBwYXJzZWRUb2tlblVyaSA9IHRoaXMucGFyc2VGZWF0dXJlZFRva2VuVXJpKHRva2VuVXJpKTtcblxuICAgIGlmICghcGFyc2VkVG9rZW5VcmkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgbmZ0SXRlbUltYWdlU3JjID0gYCR7aXRlbUltYWdlQXBpRnJvbUFydFplcm8odGhpcy5jaGFpbil9P2lucHV0PSR7cGFyc2VkVG9rZW5Vcml9JnNpemU9NTAwYDtcblxuICAgIGNvbnN0IGNvbGxlY3Rpb25JbWFnZVVybCA9IGF3YWl0IGF4aW9zKG5mdEl0ZW1JbWFnZVNyYywge1xuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbGxlY3Rpb25JbWFnZVVybC5kYXRhIGFzIHN0cmluZztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGFyc2VGZWF0dXJlZENvbGxlY3Rpb25JbWFnZSAoc21hcnRDb250cmFjdDogc3RyaW5nKSB7XG4gICAgY29uc3QgdXJsZW5jb2RlZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblxuICAgIHVybGVuY29kZWQuYXBwZW5kKCdjb2xsZWN0aW9uX2FkZHJlc3MnLCBzbWFydENvbnRyYWN0KTtcbiAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goY29sbGVjdGlvbkRldGFpbEFwaUZyb21BcnRaZXJvKHRoaXMuY2hhaW4pLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAgICB9LFxuICAgICAgYm9keTogdXJsZW5jb2RlZFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gKHJlc3AgJiYgcmVzcC5vayAmJiBhd2FpdCByZXNwLmpzb24oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KTtcblxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgIGNvbnN0IGNvbGxlY3Rpb25EZXRhaWwgPSByZXN1bHQucmV0WzBdIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgY29uc3QgY29sbGVjdGlvbkltYWdlID0gY29sbGVjdGlvbkRldGFpbC5hdmF0YXJJbWFnZSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcGFyc2VkQ29sbGVjdGlvbkltYWdlID0gdGhpcy5wYXJzZUZlYXR1cmVkVG9rZW5VcmkoY29sbGVjdGlvbkltYWdlKTtcblxuICAgIGlmICghcGFyc2VkQ29sbGVjdGlvbkltYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29sbGVjdGlvbkltYWdlU3JjID0gYCR7aXRlbUltYWdlQXBpRnJvbUFydFplcm8odGhpcy5jaGFpbil9P2lucHV0PSR7cGFyc2VkQ29sbGVjdGlvbkltYWdlfSZzaXplPTUwMGA7XG5cbiAgICBjb25zdCBjb2xsZWN0aW9uSW1hZ2VVcmwgPSBhd2FpdCBheGlvcyhjb2xsZWN0aW9uSW1hZ2VTcmMsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICB9KTtcblxuICAgIHJldHVybiBjb2xsZWN0aW9uSW1hZ2VVcmwuZGF0YSBhcyBzdHJpbmc7XG4gIH1cblxuICAvLyBwcml2YXRlIGFzeW5jIGdldENvbGxlY3Rpb25BdHRyaWJ1dGVzIChjb250cmFjdFByb21pc2U6IENvbnRyYWN0UHJvbWlzZSk6IFByb21pc2U8Q29sbGVjdGlvbkF0dHJpYnV0ZXM+IHtcbiAgLy8gICBjb25zdCBfb25DaGFpbkF0dHJpYnV0ZUNvdW50ID0gYXdhaXQgY29udHJhY3RQcm9taXNlLnF1ZXJ5Wydwc3AzNFRyYWl0czo6Z2V0QXR0cmlidXRlQ291bnQnXSh0aGlzLmFkZHJlc3Nlc1swXSwgeyBnYXNMaW1pdDogZ2V0RGVmYXVsdFdlaWdodFYyKHRoaXMuc3Vic3RyYXRlQXBpPy5hcGkgYXMgQXBpUHJvbWlzZSkgfSk7XG4gIC8vICAgY29uc3Qgb25DaGFpbkF0dHJpYnV0ZUNvdW50ID0gX29uQ2hhaW5BdHRyaWJ1dGVDb3VudC5vdXRwdXQgPyBfb25DaGFpbkF0dHJpYnV0ZUNvdW50Lm91dHB1dC50b1N0cmluZygpIDogJzAnO1xuICAvL1xuICAvLyAgIGlmIChwYXJzZUludChvbkNoYWluQXR0cmlidXRlQ291bnQpID09PSAwKSB7XG4gIC8vICAgICByZXR1cm4ge1xuICAvLyAgICAgICBzdG9yZWRPbkNoYWluOiBmYWxzZSxcbiAgLy8gICAgICAgYXR0cmlidXRlTGlzdDogW11cbiAgLy8gICAgIH07XG4gIC8vICAgfVxuICAvL1xuICAvLyAgIGNvbnN0IGF0dHJpYnV0ZUxpc3Q6IHN0cmluZ1tdID0gW107XG4gIC8vICAgY29uc3QgYXR0cmlidXRlSW5kZXhlczogbnVtYmVyW10gPSBbXTtcbiAgLy9cbiAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnNlSW50KG9uQ2hhaW5BdHRyaWJ1dGVDb3VudCk7IGkrKykge1xuICAvLyAgICAgYXR0cmlidXRlSW5kZXhlcy5wdXNoKGkpO1xuICAvLyAgIH1cbiAgLy9cbiAgLy8gICBhd2FpdCBQcm9taXNlLmFsbChhdHRyaWJ1dGVJbmRleGVzLm1hcChhc3luYyAoaSkgPT4ge1xuICAvLyAgICAgY29uc3QgX2F0dHJpYnV0ZUJ5SW5kZXggPSBhd2FpdCBjb250cmFjdFByb21pc2UucXVlcnlbJ3BzcDM0VHJhaXRzOjpnZXRBdHRyaWJ1dGVOYW1lJ10odGhpcy5hZGRyZXNzZXNbMF0sIHsgZ2FzTGltaXQ6IGdldERlZmF1bHRXZWlnaHRWMih0aGlzLnN1YnN0cmF0ZUFwaT8uYXBpIGFzIEFwaVByb21pc2UpIH0sIGkpO1xuICAvL1xuICAvLyAgICAgaWYgKF9hdHRyaWJ1dGVCeUluZGV4Lm91dHB1dCkge1xuICAvLyAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gX2F0dHJpYnV0ZUJ5SW5kZXgub3V0cHV0LnRvU3RyaW5nKCk7XG4gIC8vXG4gIC8vICAgICAgIGlmIChhdHRyaWJ1dGVOYW1lICE9PSAnJykge1xuICAvLyAgICAgICAgIGF0dHJpYnV0ZUxpc3QucHVzaChhdHRyaWJ1dGVOYW1lKTtcbiAgLy8gICAgICAgfVxuICAvLyAgICAgfVxuICAvLyAgIH0pKTtcbiAgLy9cbiAgLy8gICByZXR1cm4ge1xuICAvLyAgICAgc3RvcmVkT25DaGFpbjogdHJ1ZSxcbiAgLy8gICAgIGF0dHJpYnV0ZUxpc3RcbiAgLy8gICB9O1xuICAvLyB9XG5cbiAgLy8gcHJpdmF0ZSBhc3luYyBwcm9jZXNzT25DaGFpbk1ldGFkYXRhIChjb250cmFjdFByb21pc2U6IENvbnRyYWN0UHJvbWlzZSwgYWRkcmVzczogc3RyaW5nLCB0b2tlbklkT2JqOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBjb2xsZWN0aW9uQXR0cmlidXRlczogc3RyaW5nW10sIGlzRmVhdHVyZWQ6IGJvb2xlYW4pOiBQcm9taXNlPE5mdEl0ZW0+IHtcbiAgLy8gICBjb25zdCBuZnRJdGVtOiBOZnRJdGVtID0geyBjaGFpbjogJycsIGNvbGxlY3Rpb25JZDogJycsIGlkOiAnJywgb3duZXI6ICcnIH07XG4gIC8vICAgY29uc3QgX2F0dHJpYnV0ZVZhbHVlcyA9IGF3YWl0IGNvbnRyYWN0UHJvbWlzZS5xdWVyeVsncHNwMzRUcmFpdHM6OmdldEF0dHJpYnV0ZXMnXShhZGRyZXNzLCB7IGdhc0xpbWl0OiBnZXREZWZhdWx0V2VpZ2h0VjIodGhpcy5zdWJzdHJhdGVBcGk/LmFwaSBhcyBBcGlQcm9taXNlKSB9LCB0b2tlbklkT2JqLCBjb2xsZWN0aW9uQXR0cmlidXRlcyk7XG4gIC8vXG4gIC8vICAgaWYgKF9hdHRyaWJ1dGVWYWx1ZXMub3V0cHV0KSB7XG4gIC8vICAgICBjb25zdCBhdHRyaWJ1dGVWYWx1ZXMgPSBfYXR0cmlidXRlVmFsdWVzLm91dHB1dC50b0h1bWFuKCkgYXMgc3RyaW5nW107XG4gIC8vXG4gIC8vICAgICBjb25zdCBhdHRyaWJ1dGVEaWN0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gIC8vXG4gIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbGxlY3Rpb25BdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gIC8vICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSBjb2xsZWN0aW9uQXR0cmlidXRlc1tpXTtcbiAgLy8gICAgICAgY29uc3QgYXR0cmlidXRlVmFsdWUgPSBhdHRyaWJ1dGVWYWx1ZXNbaV0gPyBhdHRyaWJ1dGVWYWx1ZXNbaV0gOiAnJztcbiAgLy9cbiAgLy8gICAgICAgaWYgKGF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ25mdF9uYW1lJykge1xuICAvLyAgICAgICAgIG5mdEl0ZW0ubmFtZSA9IGF0dHJpYnV0ZVZhbHVlO1xuICAvLyAgICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2Rlc2NyaXB0aW9uJykge1xuICAvLyAgICAgICAgIG5mdEl0ZW0uZGVzY3JpcHRpb24gPSBhdHRyaWJ1dGVWYWx1ZTtcbiAgLy8gICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhdmF0YXInKSB7XG4gIC8vICAgICAgICAgaWYgKGlzRmVhdHVyZWQpIHtcbiAgLy8gICAgICAgICAgIG5mdEl0ZW0uaW1hZ2UgPSBhd2FpdCB0aGlzLnBhcnNlRmVhdHVyZWROZnRJbWFnZShhdHRyaWJ1dGVWYWx1ZSk7XG4gIC8vICAgICAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgICAgIG5mdEl0ZW0uaW1hZ2UgPSB0aGlzLnBhcnNlVXJsKGF0dHJpYnV0ZVZhbHVlKTtcbiAgLy8gICAgICAgICB9XG4gIC8vICAgICAgIH0gZWxzZSB7XG4gIC8vICAgICAgICAgaWYgKGF0dHJpYnV0ZVZhbHVlICE9PSAnJykge1xuICAvLyAgICAgICAgICAgYXR0cmlidXRlRGljdFthdHRyaWJ1dGVOYW1lXSA9IHsgdmFsdWU6IGF0dHJpYnV0ZVZhbHVlIH07XG4gIC8vICAgICAgICAgfVxuICAvLyAgICAgICB9XG4gIC8vICAgICB9XG4gIC8vXG4gIC8vICAgICBuZnRJdGVtLnByb3BlcnRpZXMgPSBhdHRyaWJ1dGVEaWN0O1xuICAvLyAgIH1cbiAgLy9cbiAgLy8gICBpZiAoaXNGZWF0dXJlZCkge1xuICAvLyAgICAgbmZ0SXRlbS5leHRlcm5hbFVybCA9IEFSVF9aRVJPX0VYVEVSTkFMX1VSTDtcbiAgLy8gICB9XG4gIC8vXG4gIC8vICAgcmV0dXJuIG5mdEl0ZW07XG4gIC8vIH1cblxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NPbkNoYWluTWV0YWRhdGEgKHRva2VuSWQ6IHN0cmluZywgaXNGZWF0dXJlZDogYm9vbGVhbiwgdG9rZW5Vcmk6IHN0cmluZyk6IFByb21pc2U8TmZ0SXRlbT4ge1xuICAgIGNvbnN0IG5mdEl0ZW06IE5mdEl0ZW0gPSB7IGNoYWluOiAnJywgY29sbGVjdGlvbklkOiAnJywgaWQ6ICcnLCBvd25lcjogJycsIG5hbWU6IHRva2VuSWQgfTtcblxuICAgIGxldCBpdGVtRGV0YWlsOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgaWYgKGlzRmVhdHVyZWQpIHtcbiAgICAgIGNvbnN0IHBhcnNlZFRva2VuVXJpID0gdGhpcy5wYXJzZUZlYXR1cmVkVG9rZW5VcmkodG9rZW5VcmkpO1xuXG4gICAgICBpZiAocGFyc2VkVG9rZW5VcmkpIHtcbiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGAke2lwZnNBcGlGcm9tQXJ0WmVybyh0aGlzLmNoYWluKX0/aW5wdXQ9JHtwYXJzZWRUb2tlblVyaX1gKTtcblxuICAgICAgICBpdGVtRGV0YWlsID0gKHJlc3AgJiYgcmVzcC5vayAmJiBhd2FpdCByZXNwLmpzb24oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGFyc2VkVG9rZW5VcmkgPSB0aGlzLnBhcnNlRmVhdHVyZWRUb2tlblVyaSh0b2tlblVyaSk7XG4gICAgICBjb25zdCBkZXRhaWxVcmwgPSB0aGlzLnBhcnNlVXJsKHBhcnNlZFRva2VuVXJpIGFzIHN0cmluZyk7XG5cbiAgICAgIGlmIChkZXRhaWxVcmwpIHtcbiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGRldGFpbFVybCk7XG5cbiAgICAgICAgaXRlbURldGFpbCA9IChyZXNwICYmIHJlc3Aub2sgJiYgYXdhaXQgcmVzcC5qc29uKCkgYXMgUmVjb3JkPHN0cmluZywgYW55Pik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFpdGVtRGV0YWlsKSB7XG4gICAgICByZXR1cm4gbmZ0SXRlbTtcbiAgICB9XG5cbiAgICBuZnRJdGVtLm5hbWUgPSBpdGVtRGV0YWlsLm5hbWUgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIG5mdEl0ZW0uZGVzY3JpcHRpb24gPSBpdGVtRGV0YWlsLmRlc2NyaXB0aW9uIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IHJhd0ltYWdlU3JjID0gaXRlbURldGFpbC5pbWFnZSA/IGl0ZW1EZXRhaWwuaW1hZ2UgYXMgc3RyaW5nIDogaXRlbURldGFpbC5pbWFnZV91cmwgYXMgc3RyaW5nO1xuXG4gICAgaWYgKGlzRmVhdHVyZWQpIHtcbiAgICAgIG5mdEl0ZW0uaW1hZ2UgPSBhd2FpdCB0aGlzLnBhcnNlRmVhdHVyZWROZnRJbWFnZShyYXdJbWFnZVNyYyk7XG4gICAgICBuZnRJdGVtLmV4dGVybmFsVXJsID0gZXh0ZXJuYWxVcmxPbkFydFplcm8odGhpcy5jaGFpbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5mdEl0ZW0uaW1hZ2UgPSB0aGlzLnBhcnNlVXJsKHJhd0ltYWdlU3JjKTtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9wZXJ0aWVzTWFwOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gICAgY29uc3QgdHJhaXRMaXN0ID0gaXRlbURldGFpbC5hdHRyaWJ1dGVzID8gaXRlbURldGFpbC5hdHRyaWJ1dGVzIGFzIFJlY29yZDxzdHJpbmcsIGFueT5bXSA6IGl0ZW1EZXRhaWwudHJhaXRzIGFzIFJlY29yZDxzdHJpbmcsIGFueT5bXTtcblxuICAgIGlmICh0cmFpdExpc3QpIHtcbiAgICAgIHRyYWl0TGlzdC5mb3JFYWNoKCh0cmFpdE1hcCkgPT4ge1xuICAgICAgICBwcm9wZXJ0aWVzTWFwW3RyYWl0TWFwLnRyYWl0X3R5cGUgYXMgc3RyaW5nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogdHJhaXRNYXAudmFsdWUgYXMgc3RyaW5nXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgbmZ0SXRlbS5wcm9wZXJ0aWVzID0gcHJvcGVydGllc01hcDtcbiAgICB9XG5cbiAgICByZXR1cm4gbmZ0SXRlbTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc09mZkNoYWluTWV0YWRhdGEgKGNvbnRyYWN0UHJvbWlzZTogQ29udHJhY3RQcm9taXNlLCBhZGRyZXNzOiBzdHJpbmcsIHRva2VuSWQ6IHN0cmluZywgaXNGZWF0dXJlZDogYm9vbGVhbik6IFByb21pc2U8TmZ0SXRlbT4ge1xuICAgIGNvbnN0IG5mdEl0ZW06IE5mdEl0ZW0gPSB7IGNoYWluOiAnJywgY29sbGVjdGlvbklkOiAnJywgaWQ6ICcnLCBvd25lcjogJycsIG5hbWU6IHRva2VuSWQgfTtcbiAgICBjb25zdCBfaXNGZWF0dXJlZCA9IGlzRmVhdHVyZWQgJiYgIUFaRVJPX0RPTUFJTl9DT05UUkFDVFMuaW5jbHVkZXMoY29udHJhY3RQcm9taXNlLmFkZHJlc3MudG9TdHJpbmcoKSk7XG5cbiAgICBjb25zdCBfdG9rZW5VcmkgPSBhd2FpdCBjb250cmFjdFByb21pc2UucXVlcnlbZ2V0VG9rZW5VcmlNZXRob2QoY29udHJhY3RQcm9taXNlLmFkZHJlc3MudG9TdHJpbmcoKSldKFxuICAgICAgYWRkcmVzcyxcbiAgICAgIHsgZ2FzTGltaXQ6IGdldERlZmF1bHRXZWlnaHRWMih0aGlzLnN1YnN0cmF0ZUFwaT8uYXBpIGFzIEFwaVByb21pc2UpIH0sXG4gICAgICBpc0F6ZXJvRG9tYWluTmZ0KGNvbnRyYWN0UHJvbWlzZS5hZGRyZXNzLnRvU3RyaW5nKCkpID8geyBieXRlczogdG9rZW5JZCB9IDogdG9rZW5JZCk7XG5cbiAgICBpZiAoX3Rva2VuVXJpLm91dHB1dCkge1xuICAgICAgbGV0IGl0ZW1EZXRhaWw6IFJlY29yZDxzdHJpbmcsIGFueT4gfCBib29sZWFuID0gZmFsc2U7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICBjb25zdCBfdG9rZW5VcmlPYmogPSBfdG9rZW5Vcmkub3V0cHV0LnRvSlNPTigpIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICBjb25zdCB0b2tlblVyaSA9IGlzUGlua1JvYm9OZnQoY29udHJhY3RQcm9taXNlLmFkZHJlc3MudG9TdHJpbmcoKSkgPyBfdG9rZW5VcmlPYmoub2sub2sgYXMgc3RyaW5nIDogKF90b2tlblVyaU9iai5PayB8fCBfdG9rZW5VcmlPYmoub2spIGFzIHN0cmluZztcblxuICAgICAgaWYgKF9pc0ZlYXR1cmVkKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFRva2VuVXJpID0gdGhpcy5wYXJzZUZlYXR1cmVkVG9rZW5VcmkodG9rZW5VcmkpO1xuXG4gICAgICAgIGlmIChwYXJzZWRUb2tlblVyaSkge1xuICAgICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChgJHtpcGZzQXBpRnJvbUFydFplcm8odGhpcy5jaGFpbil9P2lucHV0PSR7cGFyc2VkVG9rZW5Vcml9YCk7XG5cbiAgICAgICAgICBpdGVtRGV0YWlsID0gKHJlc3AgJiYgcmVzcC5vayAmJiBhd2FpdCByZXNwLmpzb24oKSkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVG9rZW5VcmkgPSB0aGlzLnBhcnNlRmVhdHVyZWRUb2tlblVyaSh0b2tlblVyaSk7XG4gICAgICAgIGNvbnN0IGRldGFpbFVybCA9IHRoaXMucGFyc2VVcmwocGFyc2VkVG9rZW5VcmkgYXMgc3RyaW5nKTtcblxuICAgICAgICBpZiAoZGV0YWlsVXJsKSB7XG4gICAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGRldGFpbFVybCk7XG5cbiAgICAgICAgICBpdGVtRGV0YWlsID0gKHJlc3AgJiYgcmVzcC5vayAmJiBhd2FpdCByZXNwLmpzb24oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KTtcblxuICAgICAgICAgIGlmIChBWkVST19ET01BSU5fQ09OVFJBQ1RTLmluY2x1ZGVzKGNvbnRyYWN0UHJvbWlzZS5hZGRyZXNzLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBpdGVtRGV0YWlsID0gaXRlbURldGFpbD8ubWV0YWRhdGEgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFpdGVtRGV0YWlsKSB7XG4gICAgICAgIHJldHVybiBuZnRJdGVtO1xuICAgICAgfVxuXG4gICAgICBuZnRJdGVtLm5hbWUgPSBpdGVtRGV0YWlsLm5hbWUgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgbmZ0SXRlbS5kZXNjcmlwdGlvbiA9IGl0ZW1EZXRhaWwuZGVzY3JpcHRpb24gYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgbmZ0SXRlbS5leHRlcm5hbFVybCA9IGl0ZW1EZXRhaWwuZXh0ZXJuYWxfdXJsIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgICAgY29uc3QgcmF3SW1hZ2VTcmMgPSBpdGVtRGV0YWlsLmltYWdlID8gaXRlbURldGFpbC5pbWFnZSBhcyBzdHJpbmcgOiBpdGVtRGV0YWlsLmltYWdlX3VybCBhcyBzdHJpbmc7XG5cbiAgICAgIGlmIChfaXNGZWF0dXJlZCkge1xuICAgICAgICBuZnRJdGVtLmltYWdlID0gYXdhaXQgdGhpcy5wYXJzZUZlYXR1cmVkTmZ0SW1hZ2UocmF3SW1hZ2VTcmMpO1xuICAgICAgICBuZnRJdGVtLmV4dGVybmFsVXJsID0gZXh0ZXJuYWxVcmxPbkFydFplcm8odGhpcy5jaGFpbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZnRJdGVtLmltYWdlID0gdGhpcy5wYXJzZVVybChyYXdJbWFnZVNyYyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb3BlcnRpZXNNYXA6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICAgIGNvbnN0IHRyYWl0TGlzdCA9IChpdGVtRGV0YWlsLmF0dHJpYnV0ZXMgfHwgaXRlbURldGFpbC50cmFpdHMpIGFzIFJlY29yZDxzdHJpbmcsIGFueT5bXTtcblxuICAgICAgaWYgKHRyYWl0TGlzdCkge1xuICAgICAgICB0cmFpdExpc3QuZm9yRWFjaCgodHJhaXRNYXApID0+IHtcbiAgICAgICAgICBwcm9wZXJ0aWVzTWFwW3RyYWl0TWFwLnRyYWl0X3R5cGUgYXMgc3RyaW5nXSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiB0cmFpdE1hcC52YWx1ZSBhcyBzdHJpbmdcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBuZnRJdGVtLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzTWFwO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZnRJdGVtO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRJdGVtc0J5Q29sbGVjdGlvbiAoY29udHJhY3RQcm9taXNlOiBDb250cmFjdFByb21pc2UsIHRva2VuSW5mbzogX0NoYWluQXNzZXQsIGNvbGxlY3Rpb25OYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQsIG5mdFBhcmFtczogSGFuZGxlTmZ0UGFyYW1zLCBpc0ZlYXR1cmVkOiBib29sZWFuLCBpc0F0dHJpYnV0ZU9uQ2hhaW46IGJvb2xlYW4pIHtcbiAgICBsZXQgb3duSXRlbSA9IGZhbHNlO1xuICAgIGxldCBjb2xsZWN0aW9uSW1hZ2U6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzbWFydENvbnRyYWN0ID0gX2dldENvbnRyYWN0QWRkcmVzc09mVG9rZW4odG9rZW5JbmZvKTtcblxuICAgIGNvbnN0IG5mdE93bmVyTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7fTtcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuYWRkcmVzc2VzLm1hcChhc3luYyAoYWRkcmVzcykgPT4ge1xuICAgICAgaWYgKGlzRXRoZXJldW1BZGRyZXNzKGFkZHJlc3MpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmZ0SWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBjb25zdCBfYmFsYW5jZSA9IGF3YWl0IGNvbnRyYWN0UHJvbWlzZS5xdWVyeVsncHNwMzQ6OmJhbGFuY2VPZiddKGFkZHJlc3MsIHsgZ2FzTGltaXQ6IGdldERlZmF1bHRXZWlnaHRWMih0aGlzLnN1YnN0cmF0ZUFwaT8uYXBpIGFzIEFwaVByb21pc2UpIH0sIGFkZHJlc3MpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgY29uc3QgYmFsYW5jZUpzb24gPSBfYmFsYW5jZT8ub3V0cHV0Py50b0pTT04oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgY29uc3QgYmFsYW5jZSA9IF9iYWxhbmNlLm91dHB1dCA/ICgoYmFsYW5jZUpzb24ub2sgfHwgYmFsYW5jZUpzb24uT2spIGFzIHN0cmluZykgOiAnMCc7XG5cbiAgICAgIGlmIChwYXJzZUludChiYWxhbmNlKSA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGl0ZW1JbmRleGVzOiBudW1iZXJbXSA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnNlSW50KGJhbGFuY2UpOyBpKyspIHtcbiAgICAgICAgaXRlbUluZGV4ZXMucHVzaChpKTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaXRlbUluZGV4ZXMubWFwKGFzeW5jIChpKSA9PiB7XG4gICAgICAgICAgY29uc3QgX3Rva2VuQnlJbmRleFJlc3AgPSBhd2FpdCBjb250cmFjdFByb21pc2UucXVlcnlbJ3BzcDM0RW51bWVyYWJsZTo6b3duZXJzVG9rZW5CeUluZGV4J10oYWRkcmVzcywgeyBnYXNMaW1pdDogZ2V0RGVmYXVsdFdlaWdodFYyKHRoaXMuc3Vic3RyYXRlQXBpPy5hcGkgYXMgQXBpUHJvbWlzZSkgfSwgYWRkcmVzcywgaSk7XG5cbiAgICAgICAgICBpZiAoX3Rva2VuQnlJbmRleFJlc3Aub3V0cHV0KSB7XG4gICAgICAgICAgICBjb25zdCByYXdUb2tlbklkID0gX3Rva2VuQnlJbmRleFJlc3Aub3V0cHV0LnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgICAgbGV0IHRva2VuSWRPYmogPSAocmF3VG9rZW5JZC5Pay5PayB8fCByYXdUb2tlbklkLm9rLm9rKSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+OyAvLyBjYXBpdGFsIE8sIG5vdCBub3JtYWwgb1xuICAgICAgICAgICAgY29uc3QgdG9rZW5JZCA9IE9iamVjdC52YWx1ZXModG9rZW5JZE9iailbMF0ucmVwbGFjZUFsbCgnLCcsICcnKTtcblxuICAgICAgICAgICAgaWYgKGlzQXplcm9Eb21haW5OZnQoY29udHJhY3RQcm9taXNlLmFkZHJlc3MudG9TdHJpbmcoKSkpIHtcbiAgICAgICAgICAgICAgdG9rZW5JZE9iaiA9IHsgYnl0ZXM6IHRva2VuSWQgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmZ0SWRzLnB1c2godG9rZW5JZCk7XG5cbiAgICAgICAgICAgIGxldCB0b2tlblVyaTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAoaXNBdHRyaWJ1dGVPbkNoYWluKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgX3Rva2VuVXJpID0gYXdhaXQgY29udHJhY3RQcm9taXNlLnF1ZXJ5Wydwc3AzNFRyYWl0czo6Z2V0QXR0cmlidXRlcyddKFxuICAgICAgICAgICAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgIHsgZ2FzTGltaXQ6IGdldERlZmF1bHRXZWlnaHRWMih0aGlzLnN1YnN0cmF0ZUFwaT8uYXBpIGFzIEFwaVByb21pc2UpIH0sXG4gICAgICAgICAgICAgICAgICB0b2tlbklkT2JqLFxuICAgICAgICAgICAgICAgICAgWydtZXRhZGF0YSddXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblVyaU9iaiA9IF90b2tlblVyaS5vdXRwdXQ/LnRvSlNPTigpIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG4gICAgICAgICAgICAgICAgdG9rZW5VcmkgPSAoKHRva2VuVXJpT2JqLm9rIHx8IHRva2VuVXJpT2JqLk9rKSBhcyBzdHJpbmdbXSlbMF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0b2tlblVyaSkge1xuICAgICAgICAgICAgICBjb25zdCBuZnRJdGVtID0gYXdhaXQgdGhpcy5wcm9jZXNzT2ZmQ2hhaW5NZXRhZGF0YShjb250cmFjdFByb21pc2UsIGFkZHJlc3MsIHRva2VuSWQsIGlzRmVhdHVyZWQpO1xuXG4gICAgICAgICAgICAgIG5mdEl0ZW0uY29sbGVjdGlvbklkID0gc21hcnRDb250cmFjdDtcbiAgICAgICAgICAgICAgbmZ0SXRlbS5jaGFpbiA9IHRoaXMuY2hhaW47XG4gICAgICAgICAgICAgIG5mdEl0ZW0udHlwZSA9IF9Bc3NldFR5cGUuUFNQMzQ7XG4gICAgICAgICAgICAgIG5mdEl0ZW0uaWQgPSB0b2tlbklkO1xuICAgICAgICAgICAgICBuZnRJdGVtLm93bmVyID0gYWRkcmVzcztcbiAgICAgICAgICAgICAgbmZ0SXRlbS5vbkNoYWluT3B0aW9uID0gdG9rZW5JZE9iajtcbiAgICAgICAgICAgICAgbmZ0SXRlbS5vcmlnaW5Bc3NldCA9IHRva2VuSW5mby5zbHVnO1xuXG4gICAgICAgICAgICAgIG5mdFBhcmFtcy51cGRhdGVJdGVtKHRoaXMuY2hhaW4sIG5mdEl0ZW0sIGFkZHJlc3MpO1xuICAgICAgICAgICAgICBvd25JdGVtID0gdHJ1ZTtcblxuICAgICAgICAgICAgICBpZiAoIWlzRmVhdHVyZWQgJiYgIWNvbGxlY3Rpb25JbWFnZSAmJiBuZnRJdGVtLmltYWdlKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkltYWdlID0gbmZ0SXRlbS5pbWFnZTsgLy8gTm8gZGVmYXVsdCBjb2xsZWN0aW9uIGltYWdlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5mdEl0ZW0gPSBhd2FpdCB0aGlzLnByb2Nlc3NPbkNoYWluTWV0YWRhdGEodG9rZW5JZCwgZmFsc2UsIHRva2VuVXJpKTtcblxuICAgICAgICAgICAgICBuZnRJdGVtLmNvbGxlY3Rpb25JZCA9IHNtYXJ0Q29udHJhY3Q7XG4gICAgICAgICAgICAgIG5mdEl0ZW0uY2hhaW4gPSB0aGlzLmNoYWluO1xuICAgICAgICAgICAgICBuZnRJdGVtLnR5cGUgPSBfQXNzZXRUeXBlLlBTUDM0O1xuICAgICAgICAgICAgICBuZnRJdGVtLmlkID0gdG9rZW5JZDtcbiAgICAgICAgICAgICAgbmZ0SXRlbS5vd25lciA9IGFkZHJlc3M7XG4gICAgICAgICAgICAgIG5mdEl0ZW0ub25DaGFpbk9wdGlvbiA9IHRva2VuSWRPYmo7XG4gICAgICAgICAgICAgIG5mdEl0ZW0ub3JpZ2luQXNzZXQgPSB0b2tlbkluZm8uc2x1ZztcblxuICAgICAgICAgICAgICBuZnRQYXJhbXMudXBkYXRlSXRlbSh0aGlzLmNoYWluLCBuZnRJdGVtLCBhZGRyZXNzKTtcbiAgICAgICAgICAgICAgb3duSXRlbSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgaWYgKCFpc0ZlYXR1cmVkICYmICFjb2xsZWN0aW9uSW1hZ2UgJiYgbmZ0SXRlbS5pbWFnZSkge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JbWFnZSA9IG5mdEl0ZW0uaW1hZ2U7IC8vIE5vIGRlZmF1bHQgY29sbGVjdGlvbiBpbWFnZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgbmZ0T3duZXJNYXBbYWRkcmVzc10gPSBuZnRJZHM7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7dGhpcy5jaGFpbn1gLCBlKTtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBpZiAoaXNGZWF0dXJlZCkge1xuICAgICAgY29uc3QgZmVhdHVyZWRDb2xsZWN0aW9uSW1hZ2UgPSBhd2FpdCB0aGlzLnBhcnNlRmVhdHVyZWRDb2xsZWN0aW9uSW1hZ2Uoc21hcnRDb250cmFjdCk7XG5cbiAgICAgIGlmIChmZWF0dXJlZENvbGxlY3Rpb25JbWFnZSkge1xuICAgICAgICBjb2xsZWN0aW9uSW1hZ2UgPSBmZWF0dXJlZENvbGxlY3Rpb25JbWFnZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3duSXRlbSkge1xuICAgICAgY29uc3QgbmZ0Q29sbGVjdGlvbiA9IHtcbiAgICAgICAgY29sbGVjdGlvbklkOiBzbWFydENvbnRyYWN0LFxuICAgICAgICBjb2xsZWN0aW9uTmFtZSxcbiAgICAgICAgaW1hZ2U6IGNvbGxlY3Rpb25JbWFnZSB8fCB1bmRlZmluZWQsXG4gICAgICAgIGNoYWluOiB0aGlzLmNoYWluLFxuICAgICAgICBvcmlnaW5Bc3NldDogdG9rZW5JbmZvLnNsdWdcbiAgICAgIH0gYXMgTmZ0Q29sbGVjdGlvbjtcblxuICAgICAgbmZ0UGFyYW1zLnVwZGF0ZUNvbGxlY3Rpb24odGhpcy5jaGFpbiwgbmZ0Q29sbGVjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGZldGNoTmZ0cyAocGFyYW1zOiBIYW5kbGVOZnRQYXJhbXMpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZU5mdHMocGFyYW1zKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZU5mdHMgKHBhcmFtczogSGFuZGxlTmZ0UGFyYW1zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLndhc21Db250cmFjdHMgfHwgdGhpcy53YXNtQ29udHJhY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuY29ubmVjdCgpOyAvLyBtaWdodCBub3QgYmUgbmVjZXNzYXJ5XG5cbiAgICBjb25zdCBhcGlQcm9taXNlID0gdGhpcy5zdWJzdHJhdGVBcGk/LmFwaSBhcyBBcGlQcm9taXNlO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy53YXNtQ29udHJhY3RzLm1hcChhc3luYyAodG9rZW5JbmZvKSA9PiB7XG4gICAgICBjb25zdCBjb250cmFjdFByb21pc2UgPSBnZXRQU1AzNENvbnRyYWN0UHJvbWlzZShhcGlQcm9taXNlLCBfZ2V0Q29udHJhY3RBZGRyZXNzT2ZUb2tlbih0b2tlbkluZm8pKTtcblxuICAgICAgY29uc3QgW2lzQXR0cmlidXRlT25DaGFpbiwgaXNDb2xsZWN0aW9uRmVhdHVyZWRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLmlzQXR0cmlidXRlU3RvcmVkT25DaGFpbihjb250cmFjdFByb21pc2UpLFxuICAgICAgICBpc0FydFplcm9GZWF0dXJlZENvbGxlY3Rpb24odGhpcy5jaGFpbiwgX2dldENvbnRyYWN0QWRkcmVzc09mVG9rZW4odG9rZW5JbmZvKSlcbiAgICAgIF0pO1xuXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRJdGVtc0J5Q29sbGVjdGlvbihjb250cmFjdFByb21pc2UsIHRva2VuSW5mbywgdG9rZW5JbmZvLm5hbWUsIHBhcmFtcywgaXNDb2xsZWN0aW9uRmVhdHVyZWQsIGlzQXR0cmlidXRlT25DaGFpbik7XG4gICAgfSkpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuZXhwb3J0IGNvbnN0IEEwX0FSVF9aRVJPX1RFU1RORVRfSU1BR0VfQVBJID0gJ2h0dHBzOi8vYTAtdGVzdC1hcGkuYXJ0emVyby5pby9nZXRJbWFnZSc7XG5cbmV4cG9ydCBjb25zdCBBU1RBUl9BUlRfWkVST19URVNUTkVUX0lNQUdFX0FQSSA9ICdodHRwczovL2FzdGFyLXRlc3QtYXBpLmFydHplcm8uaW8vZ2V0SW1hZ2UnO1xuXG5leHBvcnQgY29uc3QgQVJUX1pFUk9fVEVTVE5FVF9JUEZTX0FQSSA9ICdodHRwczovL2EwLXRlc3QtYXBpLmFydHplcm8uaW8vZ2V0SlNPTic7XG5cbmV4cG9ydCBjb25zdCBBU1RBUl9BUlRfWkVST19URVNUTkVUX0lQRlNfQVBJID0gJ2h0dHBzOi8vYXN0YXItdGVzdC1hcGkuYXJ0emVyby5pby9nZXRKU09OJztcblxuZXhwb3J0IGNvbnN0IEEwX0FSVF9aRVJPX1RFU1RORVRfQ09MTEVDVElPTl9BUEkgPSAnaHR0cHM6Ly9hMC10ZXN0LWFwaS5hcnR6ZXJvLmlvL2dldENvbGxlY3Rpb25CeUFkZHJlc3MnO1xuXG5leHBvcnQgY29uc3QgQVNUQVJfQVJUX1pFUk9fVEVTVE5FVF9DT0xMRUNUSU9OX0FQSSA9ICdodHRwczovL2FzdGFyLXRlc3QtYXBpLmFydHplcm8uaW8vZ2V0Q29sbGVjdGlvbkJ5QWRkcmVzcyc7XG5cbmV4cG9ydCBjb25zdCBBMF9BUlRfWkVST19JTUFHRV9BUEkgPSAnaHR0cHM6Ly9hMC1hcGkuYXJ0emVyby5pby9nZXRJbWFnZSc7XG5cbmV4cG9ydCBjb25zdCBBU1RBUl9BUlRfWkVST19JTUFHRV9BUEkgPSAnaHR0cHM6Ly9hc3Rhci1hcGkuYXJ0emVyby5pby9nZXRJbWFnZSc7XG5cbmV4cG9ydCBjb25zdCBBMF9BUlRfWkVST19JUEZTX0FQSSA9ICdodHRwczovL2EwLWFwaS5hcnR6ZXJvLmlvL2dldEpTT04nO1xuXG5leHBvcnQgY29uc3QgQVNUQVJfQVJUX1pFUk9fSVBGU19BUEkgPSAnaHR0cHM6Ly9hc3Rhci1hcGkuYXJ0emVyby5pby9nZXRKU09OJztcblxuZXhwb3J0IGNvbnN0IEEwX0FSVF9aRVJPX0NPTExFQ1RJT05fQVBJID0gJ2h0dHBzOi8vYTAtYXBpLmFydHplcm8uaW8vZ2V0Q29sbGVjdGlvbkJ5QWRkcmVzcyc7XG5cbmV4cG9ydCBjb25zdCBBU1RBUl9BUlRfWkVST19DT0xMRUNUSU9OX0FQSSA9ICdodHRwczovL2FzdGFyLWFwaS5hcnR6ZXJvLmlvL2dldENvbGxlY3Rpb25CeUFkZHJlc3MnO1xuXG5leHBvcnQgY29uc3QgQTBfQVJUX1pFUk9fRVhURVJOQUxfVVJMID0gJ2h0dHBzOi8vYTAuYXJ0emVyby5pby8jL21hcmtldHBsYWNlJztcblxuZXhwb3J0IGNvbnN0IEFTVEFSX0FSVF9aRVJPX0VYVEVSTkFMX1VSTCA9ICdodHRwczovL2FzdGFyLmFydHplcm8uaW8vIy9tYXJrZXRwbGFjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0aW9uQXBpRnJvbUFydFplcm8gKGNoYWluOiBzdHJpbmcpIHtcbiAgaWYgKGNoYWluID09PSAnYWxlcGhUZXN0Jykge1xuICAgIHJldHVybiBBMF9BUlRfWkVST19URVNUTkVUX0NPTExFQ1RJT05fQVBJO1xuICB9XG5cbiAgaWYgKGNoYWluID09PSAnYXN0YXInKSB7XG4gICAgcmV0dXJuIEFTVEFSX0FSVF9aRVJPX0NPTExFQ1RJT05fQVBJO1xuICB9XG5cbiAgcmV0dXJuIEEwX0FSVF9aRVJPX0NPTExFQ1RJT05fQVBJO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXRlbUltYWdlQXBpRnJvbUFydFplcm8gKGNoYWluOiBzdHJpbmcpIHtcbiAgaWYgKGNoYWluID09PSAnYWxlcGhUZXN0Jykge1xuICAgIHJldHVybiBBMF9BUlRfWkVST19URVNUTkVUX0lNQUdFX0FQSTtcbiAgfVxuXG4gIGlmIChjaGFpbiA9PT0gJ2FzdGFyJykge1xuICAgIHJldHVybiBBU1RBUl9BUlRfWkVST19JTUFHRV9BUEk7XG4gIH1cblxuICByZXR1cm4gQTBfQVJUX1pFUk9fSU1BR0VfQVBJO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29sbGVjdGlvbkRldGFpbEFwaUZyb21BcnRaZXJvIChjaGFpbjogc3RyaW5nKSB7XG4gIGlmIChjaGFpbiA9PT0gJ2FsZXBoVGVzdCcpIHtcbiAgICByZXR1cm4gQTBfQVJUX1pFUk9fVEVTVE5FVF9DT0xMRUNUSU9OX0FQSTtcbiAgfVxuXG4gIGlmIChjaGFpbiA9PT0gJ2FzdGFyJykge1xuICAgIHJldHVybiBBU1RBUl9BUlRfWkVST19DT0xMRUNUSU9OX0FQSTtcbiAgfVxuXG4gIHJldHVybiBBMF9BUlRfWkVST19DT0xMRUNUSU9OX0FQSTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlwZnNBcGlGcm9tQXJ0WmVybyAoY2hhaW46IHN0cmluZykge1xuICBpZiAoY2hhaW4gPT09ICdhbGVwaFRlc3QnKSB7XG4gICAgcmV0dXJuIEFSVF9aRVJPX1RFU1RORVRfSVBGU19BUEk7XG4gIH1cblxuICBpZiAoY2hhaW4gPT09ICdhc3RhcicpIHtcbiAgICByZXR1cm4gQVNUQVJfQVJUX1pFUk9fSVBGU19BUEk7XG4gIH1cblxuICByZXR1cm4gQTBfQVJUX1pFUk9fSVBGU19BUEk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRlcm5hbFVybE9uQXJ0WmVybyAoY2hhaW46IHN0cmluZykge1xuICBpZiAoY2hhaW4gPT09ICdhc3RhcicpIHtcbiAgICByZXR1cm4gQVNUQVJfQVJUX1pFUk9fRVhURVJOQUxfVVJMO1xuICB9XG5cbiAgcmV0dXJuIEEwX0FSVF9aRVJPX0VYVEVSTkFMX1VSTDtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQ2hhaW5JbmZvIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IENoYWluU3Rha2luZ01ldGFkYXRhLCBOb21pbmF0aW9uSW5mbywgTm9taW5hdG9yTWV0YWRhdGEsIFN0YWtpbmdTdGF0dXMsIFN0YWtpbmdUeXBlLCBVbnN0YWtpbmdJbmZvLCBVbnN0YWtpbmdTdGF0dXMsIFZhbGlkYXRvckluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEJsb2NrSGVhZGVyLCBnZXRCb25kZWRWYWxpZGF0b3JzLCBnZXRTdGFraW5nU3RhdHVzQnlOb21pbmF0aW9ucywgaXNVbnN0YWtlQWxsLCBQYWxsZXRJZGVudGl0eVJlZ2lzdHJhdGlvbiwgUGFyYWNoYWluU3Rha2luZ1N0YWtlT3B0aW9uLCBwYXJzZUlkZW50aXR5IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL2JvbmRpbmcvdXRpbHMnO1xuaW1wb3J0IHsgX1NUQUtJTkdfRVJBX0xFTkdUSF9NQVAgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgcGFyc2VSYXdOdW1iZXIsIHJlZm9ybWF0QWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuXG5pbXBvcnQgeyBDb2RlYyB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcyc7XG5pbXBvcnQgeyBCTiwgQk5fWkVSTyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IGlzRXRoZXJldW1BZGRyZXNzIH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvJztcblxuaW50ZXJmYWNlIEluZmxhdGlvbkNvbmZpZyB7XG4gIGNvbGxhdG9yOiB7XG4gICAgbWF4UmF0ZTogc3RyaW5nLFxuICAgIHJld2FyZFJhdGU6IHtcbiAgICAgIGFubnVhbDogc3RyaW5nLFxuICAgICAgcGVyQmxvY2s6IHN0cmluZ1xuICAgIH1cbiAgfSxcbiAgZGVsZWdhdG9yOiB7XG4gICAgbWF4UmF0ZTogc3RyaW5nLFxuICAgIHJld2FyZFJhdGU6IHtcbiAgICAgIGFubnVhbDogc3RyaW5nLFxuICAgICAgcGVyQmxvY2s6IHN0cmluZ1xuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgQ29sbGF0b3JJbmZvIHtcbiAgaWQ6IHN0cmluZyxcbiAgc3Rha2U6IHN0cmluZyxcbiAgZGVsZWdhdG9yczogYW55W10sXG4gIHRvdGFsOiBzdHJpbmcsXG4gIHN0YXR1czogc3RyaW5nIHwgUmVjb3JkPHN0cmluZywgc3RyaW5nPlxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3Vic2NyaWJlQW1wbGl0dWRlU3Rha2luZ01ldGFkYXRhIChjaGFpbjogc3RyaW5nLCBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGNhbGxiYWNrOiAoY2hhaW46IHN0cmluZywgcnM6IENoYWluU3Rha2luZ01ldGFkYXRhKSA9PiB2b2lkKSB7XG4gIHJldHVybiBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcucm91bmQoKF9yb3VuZDogQ29kZWMpID0+IHtcbiAgICBjb25zdCByb3VuZE9iaiA9IF9yb3VuZC50b0h1bWFuKCkgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgICBjb25zdCByb3VuZCA9IHBhcnNlUmF3TnVtYmVyKHJvdW5kT2JqLmN1cnJlbnQpO1xuICAgIGNvbnN0IG1heERlbGVnYXRpb25zID0gc3Vic3RyYXRlQXBpLmFwaS5jb25zdHMucGFyYWNoYWluU3Rha2luZy5tYXhEZWxlZ2F0aW9uc1BlclJvdW5kLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgbWluRGVsZWdhdG9yU3Rha2UgPSBzdWJzdHJhdGVBcGkuYXBpLmNvbnN0cy5wYXJhY2hhaW5TdGFraW5nLm1pbkRlbGVnYXRvclN0YWtlLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgdW5zdGFraW5nRGVsYXkgPSBzdWJzdHJhdGVBcGkuYXBpLmNvbnN0cy5wYXJhY2hhaW5TdGFraW5nLnN0YWtlRHVyYXRpb24udG9TdHJpbmcoKTtcbiAgICBjb25zdCBfYmxvY2tQZXJSb3VuZCA9IHN1YnN0cmF0ZUFwaS5hcGkuY29uc3RzLnBhcmFjaGFpblN0YWtpbmcuZGVmYXVsdEJsb2Nrc1BlclJvdW5kLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgYmxvY2tQZXJSb3VuZCA9IHBhcnNlRmxvYXQoX2Jsb2NrUGVyUm91bmQpO1xuXG4gICAgY29uc3QgYmxvY2tEdXJhdGlvbiA9IChfU1RBS0lOR19FUkFfTEVOR1RIX01BUFtjaGFpbl0gfHwgX1NUQUtJTkdfRVJBX0xFTkdUSF9NQVAuZGVmYXVsdCkgLyBibG9ja1BlclJvdW5kOyAvLyBpbiBob3Vyc1xuICAgIGNvbnN0IHVuc3Rha2luZ1BlcmlvZCA9IGJsb2NrRHVyYXRpb24gKiBwYXJzZUludCh1bnN0YWtpbmdEZWxheSk7XG5cbiAgICBjYWxsYmFjayhjaGFpbiwge1xuICAgICAgY2hhaW4sXG4gICAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgICBlcmE6IHJvdW5kLFxuICAgICAgbWluU3Rha2U6IG1pbkRlbGVnYXRvclN0YWtlLFxuICAgICAgbWF4VmFsaWRhdG9yUGVyTm9taW5hdG9yOiBwYXJzZUludChtYXhEZWxlZ2F0aW9ucyksXG4gICAgICBtYXhXaXRoZHJhd2FsUmVxdWVzdFBlclZhbGlkYXRvcjogMSwgLy8gYnkgZGVmYXVsdFxuICAgICAgYWxsb3dDYW5jZWxVbnN0YWtpbmc6IHRydWUsXG4gICAgICB1bnN0YWtpbmdQZXJpb2RcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbXBsaXR1ZGVTdGFraW5nTWV0YWRhdGEgKGNoYWluOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSk6IFByb21pc2U8Q2hhaW5TdGFraW5nTWV0YWRhdGE+IHtcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcblxuICBjb25zdCBfcm91bmQgPSAoYXdhaXQgY2hhaW5BcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcucm91bmQoKSkudG9IdW1hbigpIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGNvbnN0IHJvdW5kID0gcGFyc2VSYXdOdW1iZXIoX3JvdW5kLmN1cnJlbnQpO1xuICBjb25zdCBtYXhEZWxlZ2F0aW9ucyA9IGNoYWluQXBpLmFwaS5jb25zdHMucGFyYWNoYWluU3Rha2luZy5tYXhEZWxlZ2F0aW9uc1BlclJvdW5kLnRvU3RyaW5nKCk7XG4gIGNvbnN0IG1pbkRlbGVnYXRvclN0YWtlID0gY2hhaW5BcGkuYXBpLmNvbnN0cy5wYXJhY2hhaW5TdGFraW5nLm1pbkRlbGVnYXRvclN0YWtlLnRvU3RyaW5nKCk7XG4gIGNvbnN0IHVuc3Rha2luZ0RlbGF5ID0gY2hhaW5BcGkuYXBpLmNvbnN0cy5wYXJhY2hhaW5TdGFraW5nLnN0YWtlRHVyYXRpb24udG9TdHJpbmcoKTtcbiAgY29uc3QgX2Jsb2NrUGVyUm91bmQgPSBjaGFpbkFwaS5hcGkuY29uc3RzLnBhcmFjaGFpblN0YWtpbmcuZGVmYXVsdEJsb2Nrc1BlclJvdW5kLnRvU3RyaW5nKCk7XG4gIGNvbnN0IGJsb2NrUGVyUm91bmQgPSBwYXJzZUZsb2F0KF9ibG9ja1BlclJvdW5kKTtcblxuICBjb25zdCBibG9ja0R1cmF0aW9uID0gKF9TVEFLSU5HX0VSQV9MRU5HVEhfTUFQW2NoYWluXSB8fCBfU1RBS0lOR19FUkFfTEVOR1RIX01BUC5kZWZhdWx0KSAvIGJsb2NrUGVyUm91bmQ7IC8vIGluIGhvdXJzXG4gIGNvbnN0IHVuc3Rha2luZ1BlcmlvZCA9IGJsb2NrRHVyYXRpb24gKiBwYXJzZUludCh1bnN0YWtpbmdEZWxheSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjaGFpbixcbiAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgZXJhOiByb3VuZCxcbiAgICBtaW5TdGFrZTogbWluRGVsZWdhdG9yU3Rha2UsXG4gICAgbWF4VmFsaWRhdG9yUGVyTm9taW5hdG9yOiBwYXJzZUludChtYXhEZWxlZ2F0aW9ucyksXG4gICAgbWF4V2l0aGRyYXdhbFJlcXVlc3RQZXJWYWxpZGF0b3I6IDEsIC8vIGJ5IGRlZmF1bHRcbiAgICBhbGxvd0NhbmNlbFVuc3Rha2luZzogdHJ1ZSxcbiAgICB1bnN0YWtpbmdQZXJpb2RcbiAgfSBhcyBDaGFpblN0YWtpbmdNZXRhZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1YnNjcmliZUFtcGxpdHVkZU5vbWluYXRvck1ldGFkYXRhIChjaGFpbkluZm86IF9DaGFpbkluZm8sIGFkZHJlc3M6IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBkZWxlZ2F0b3JTdGF0ZTogUGFyYWNoYWluU3Rha2luZ1N0YWtlT3B0aW9uLCB1bnN0YWtpbmdJbmZvOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KSB7XG4gIGNvbnN0IG5vbWluYXRpb25MaXN0OiBOb21pbmF0aW9uSW5mb1tdID0gW107XG4gIGNvbnN0IHVuc3Rha2luZ0xpc3Q6IFVuc3Rha2luZ0luZm9bXSA9IFtdO1xuICBjb25zdCBtaW5EZWxlZ2F0b3JTdGFrZSA9IHN1YnN0cmF0ZUFwaS5hcGkuY29uc3RzLnBhcmFjaGFpblN0YWtpbmcubWluRGVsZWdhdG9yU3Rha2UudG9TdHJpbmcoKTtcblxuICBsZXQgYWN0aXZlU3Rha2UgPSAnMCc7XG5cbiAgaWYgKGRlbGVnYXRvclN0YXRlKSB7IC8vIGRlbGVnYXRvclN0YXRlIGNhbiBiZSBudWxsIHdoaWxlIHVuc3Rha2luZyBhbGxcbiAgICBjb25zdCBpZGVudGl0eUluZm8gPSBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LmlkZW50aXR5ID8gKGF3YWl0IHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkuaWRlbnRpdHkuaWRlbnRpdHlPZihkZWxlZ2F0b3JTdGF0ZS5vd25lcikpLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBQYWxsZXRJZGVudGl0eVJlZ2lzdHJhdGlvbiA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBpZGVudGl0eSA9IGlkZW50aXR5SW5mbyA/IHBhcnNlSWRlbnRpdHkoaWRlbnRpdHlJbmZvKSA6IHVuZGVmaW5lZDtcblxuICAgIGFjdGl2ZVN0YWtlID0gZGVsZWdhdG9yU3RhdGUuYW1vdW50LnRvU3RyaW5nKCk7XG4gICAgY29uc3QgYm5BY3RpdmVTdGFrZSA9IG5ldyBCTihhY3RpdmVTdGFrZSk7XG4gICAgbGV0IGRlbGVnYXRpb25TdGF0dXM6IFN0YWtpbmdTdGF0dXMgPSBTdGFraW5nU3RhdHVzLk5PVF9FQVJOSU5HO1xuXG4gICAgaWYgKGJuQWN0aXZlU3Rha2UuZ3QoQk5fWkVSTykgJiYgYm5BY3RpdmVTdGFrZS5ndGUobmV3IEJOKG1pbkRlbGVnYXRvclN0YWtlKSkpIHtcbiAgICAgIGRlbGVnYXRpb25TdGF0dXMgPSBTdGFraW5nU3RhdHVzLkVBUk5JTkdfUkVXQVJEO1xuICAgIH1cblxuICAgIG5vbWluYXRpb25MaXN0LnB1c2goe1xuICAgICAgc3RhdHVzOiBkZWxlZ2F0aW9uU3RhdHVzLFxuICAgICAgY2hhaW46IGNoYWluSW5mby5zbHVnLFxuICAgICAgdmFsaWRhdG9yQWRkcmVzczogZGVsZWdhdG9yU3RhdGUub3duZXIsXG4gICAgICBhY3RpdmVTdGFrZTogZGVsZWdhdG9yU3RhdGUuYW1vdW50LnRvU3RyaW5nKCksXG4gICAgICB2YWxpZGF0b3JNaW5TdGFrZTogJzAnLFxuICAgICAgaGFzVW5zdGFraW5nOiAhIXVuc3Rha2luZ0luZm8gJiYgT2JqZWN0LnZhbHVlcyh1bnN0YWtpbmdJbmZvKS5sZW5ndGggPiAwLFxuICAgICAgdmFsaWRhdG9ySWRlbnRpdHk6IGlkZW50aXR5XG4gICAgfSk7XG4gIH1cblxuICBpZiAodW5zdGFraW5nSW5mbyAmJiBPYmplY3QudmFsdWVzKHVuc3Rha2luZ0luZm8pLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBfY3VycmVudEJsb2NrSW5mbyA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5hcGkucnBjLmNoYWluLmdldEhlYWRlcigpO1xuXG4gICAgY29uc3QgY3VycmVudEJsb2NrSW5mbyA9IF9jdXJyZW50QmxvY2tJbmZvLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBCbG9ja0hlYWRlcjtcbiAgICBjb25zdCBjdXJyZW50QmxvY2tOdW1iZXIgPSBjdXJyZW50QmxvY2tJbmZvLm51bWJlcjtcblxuICAgIGNvbnN0IF9ibG9ja1BlclJvdW5kID0gc3Vic3RyYXRlQXBpLmFwaS5jb25zdHMucGFyYWNoYWluU3Rha2luZy5kZWZhdWx0QmxvY2tzUGVyUm91bmQudG9TdHJpbmcoKTtcbiAgICBjb25zdCBibG9ja1BlclJvdW5kID0gcGFyc2VGbG9hdChfYmxvY2tQZXJSb3VuZCk7XG5cbiAgICBjb25zdCBuZWFyZXN0VW5zdGFraW5nQmxvY2sgPSBPYmplY3Qua2V5cyh1bnN0YWtpbmdJbmZvKVswXTtcbiAgICBjb25zdCBuZWFyZXN0VW5zdGFraW5nQW1vdW50ID0gT2JqZWN0LnZhbHVlcyh1bnN0YWtpbmdJbmZvKVswXTtcblxuICAgIGNvbnN0IGJsb2NrRHVyYXRpb24gPSAoX1NUQUtJTkdfRVJBX0xFTkdUSF9NQVBbY2hhaW5JbmZvLnNsdWddIHx8IF9TVEFLSU5HX0VSQV9MRU5HVEhfTUFQLmRlZmF1bHQpIC8gYmxvY2tQZXJSb3VuZDsgLy8gaW4gaG91cnNcblxuICAgIGNvbnN0IGlzQ2xhaW1hYmxlID0gcGFyc2VJbnQobmVhcmVzdFVuc3Rha2luZ0Jsb2NrKSAtIGN1cnJlbnRCbG9ja051bWJlciA8IDA7XG4gICAgY29uc3QgcmVtYWluaW5nQmxvY2sgPSBwYXJzZUludChuZWFyZXN0VW5zdGFraW5nQmxvY2spIC0gY3VycmVudEJsb2NrTnVtYmVyO1xuICAgIGNvbnN0IHdhaXRpbmdUaW1lID0gcmVtYWluaW5nQmxvY2sgKiBibG9ja0R1cmF0aW9uO1xuXG4gICAgdW5zdGFraW5nTGlzdC5wdXNoKHtcbiAgICAgIGNoYWluOiBjaGFpbkluZm8uc2x1ZyxcbiAgICAgIHN0YXR1czogaXNDbGFpbWFibGUgPyBVbnN0YWtpbmdTdGF0dXMuQ0xBSU1BQkxFIDogVW5zdGFraW5nU3RhdHVzLlVOTE9DS0lORyxcbiAgICAgIGNsYWltYWJsZTogbmVhcmVzdFVuc3Rha2luZ0Ftb3VudC50b1N0cmluZygpLFxuICAgICAgd2FpdGluZ1RpbWUsXG4gICAgICB2YWxpZGF0b3JBZGRyZXNzOiBkZWxlZ2F0b3JTdGF0ZT8ub3duZXIgfHwgdW5kZWZpbmVkXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBzdGFraW5nU3RhdHVzID0gZ2V0U3Rha2luZ1N0YXR1c0J5Tm9taW5hdGlvbnMobmV3IEJOKGFjdGl2ZVN0YWtlKSwgbm9taW5hdGlvbkxpc3QpO1xuXG4gIHJldHVybiB7XG4gICAgY2hhaW46IGNoYWluSW5mby5zbHVnLFxuICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICBzdGF0dXM6IHN0YWtpbmdTdGF0dXMsXG4gICAgYWRkcmVzczogYWRkcmVzcyxcbiAgICBhY3RpdmVTdGFrZTogYWN0aXZlU3Rha2UsXG4gICAgbm9taW5hdGlvbnM6IG5vbWluYXRpb25MaXN0LFxuICAgIHVuc3Rha2luZ3M6IHVuc3Rha2luZ0xpc3RcbiAgfSBhcyBOb21pbmF0b3JNZXRhZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFtcGxpdHVkZU5vbWluYXRvck1ldGFkYXRhIChjaGFpbkluZm86IF9DaGFpbkluZm8sIGFkZHJlc3M6IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpKTogUHJvbWlzZTxOb21pbmF0b3JNZXRhZGF0YSB8IHVuZGVmaW5lZD4ge1xuICBpZiAoaXNFdGhlcmV1bUFkZHJlc3MoYWRkcmVzcykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjaGFpbiA9IGNoYWluSW5mby5zbHVnO1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuXG4gIGNvbnN0IG5vbWluYXRpb25MaXN0OiBOb21pbmF0aW9uSW5mb1tdID0gW107XG4gIGNvbnN0IHVuc3Rha2luZ0xpc3Q6IFVuc3Rha2luZ0luZm9bXSA9IFtdO1xuXG4gIGNvbnN0IFtfZGVsZWdhdG9yU3RhdGUsIF91bnN0YWtpbmdJbmZvXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBjaGFpbkFwaS5hcGkucXVlcnkucGFyYWNoYWluU3Rha2luZy5kZWxlZ2F0b3JTdGF0ZShhZGRyZXNzKSxcbiAgICBjaGFpbkFwaS5hcGkucXVlcnkucGFyYWNoYWluU3Rha2luZy51bnN0YWtpbmcoYWRkcmVzcylcbiAgXSk7XG5cbiAgY29uc3QgbWluRGVsZWdhdG9yU3Rha2UgPSBjaGFpbkFwaS5hcGkuY29uc3RzLnBhcmFjaGFpblN0YWtpbmcubWluRGVsZWdhdG9yU3Rha2UudG9TdHJpbmcoKTtcbiAgY29uc3QgZGVsZWdhdG9yU3RhdGUgPSBfZGVsZWdhdG9yU3RhdGUudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhcmFjaGFpblN0YWtpbmdTdGFrZU9wdGlvbjtcbiAgY29uc3QgdW5zdGFraW5nSW5mbyA9IF91bnN0YWtpbmdJbmZvLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuXG4gIGlmICghZGVsZWdhdG9yU3RhdGUgJiYgIXVuc3Rha2luZ0luZm8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhaW46IGNoYWluSW5mby5zbHVnLFxuICAgICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgICAgYWRkcmVzcyxcbiAgICAgIHN0YXR1czogU3Rha2luZ1N0YXR1cy5OT1RfU1RBS0lORyxcbiAgICAgIGFjdGl2ZVN0YWtlOiAnMCcsXG4gICAgICBub21pbmF0aW9uczogW10sXG4gICAgICB1bnN0YWtpbmdzOiBbXVxuICAgIH0gYXMgTm9taW5hdG9yTWV0YWRhdGE7XG4gIH1cblxuICBsZXQgYWN0aXZlU3Rha2UgPSAnMCc7XG5cbiAgaWYgKGRlbGVnYXRvclN0YXRlKSB7IC8vIGRlbGVnYXRvclN0YXRlIGNhbiBiZSBudWxsIHdoaWxlIHVuc3Rha2luZyBhbGxcbiAgICBjb25zdCBpZGVudGl0eUluZm8gPSBjaGFpbkFwaS5hcGkucXVlcnkuaWRlbnRpdHkgPyAoYXdhaXQgY2hhaW5BcGkuYXBpLnF1ZXJ5LmlkZW50aXR5LmlkZW50aXR5T2YoZGVsZWdhdG9yU3RhdGUub3duZXIpKS50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgUGFsbGV0SWRlbnRpdHlSZWdpc3RyYXRpb24gOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgaWRlbnRpdHkgPSBpZGVudGl0eUluZm8gPyBwYXJzZUlkZW50aXR5KGlkZW50aXR5SW5mbykgOiB1bmRlZmluZWQ7XG5cbiAgICBhY3RpdmVTdGFrZSA9IGRlbGVnYXRvclN0YXRlLmFtb3VudC50b1N0cmluZygpO1xuICAgIGNvbnN0IGJuQWN0aXZlU3Rha2UgPSBuZXcgQk4oYWN0aXZlU3Rha2UpO1xuICAgIGxldCBkZWxlZ2F0aW9uU3RhdHVzOiBTdGFraW5nU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5OT1RfRUFSTklORztcblxuICAgIGlmIChibkFjdGl2ZVN0YWtlLmd0KEJOX1pFUk8pICYmIGJuQWN0aXZlU3Rha2UuZ3RlKG5ldyBCTihtaW5EZWxlZ2F0b3JTdGFrZSkpKSB7XG4gICAgICBkZWxlZ2F0aW9uU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5FQVJOSU5HX1JFV0FSRDtcbiAgICB9XG5cbiAgICBub21pbmF0aW9uTGlzdC5wdXNoKHtcbiAgICAgIHN0YXR1czogZGVsZWdhdGlvblN0YXR1cyxcbiAgICAgIGNoYWluLFxuICAgICAgdmFsaWRhdG9yQWRkcmVzczogZGVsZWdhdG9yU3RhdGUub3duZXIsXG4gICAgICBhY3RpdmVTdGFrZTogZGVsZWdhdG9yU3RhdGUuYW1vdW50LnRvU3RyaW5nKCksXG4gICAgICB2YWxpZGF0b3JNaW5TdGFrZTogJzAnLFxuICAgICAgaGFzVW5zdGFraW5nOiAhIXVuc3Rha2luZ0luZm8gJiYgT2JqZWN0LnZhbHVlcyh1bnN0YWtpbmdJbmZvKS5sZW5ndGggPiAwLFxuICAgICAgdmFsaWRhdG9ySWRlbnRpdHk6IGlkZW50aXR5XG4gICAgfSk7XG4gIH1cblxuICBpZiAodW5zdGFraW5nSW5mbyAmJiBPYmplY3QudmFsdWVzKHVuc3Rha2luZ0luZm8pLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBfY3VycmVudEJsb2NrSW5mbyA9IGF3YWl0IGNoYWluQXBpLmFwaS5ycGMuY2hhaW4uZ2V0SGVhZGVyKCk7XG5cbiAgICBjb25zdCBjdXJyZW50QmxvY2tJbmZvID0gX2N1cnJlbnRCbG9ja0luZm8udG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIEJsb2NrSGVhZGVyO1xuICAgIGNvbnN0IGN1cnJlbnRCbG9ja051bWJlciA9IGN1cnJlbnRCbG9ja0luZm8ubnVtYmVyO1xuXG4gICAgY29uc3QgX2Jsb2NrUGVyUm91bmQgPSBjaGFpbkFwaS5hcGkuY29uc3RzLnBhcmFjaGFpblN0YWtpbmcuZGVmYXVsdEJsb2Nrc1BlclJvdW5kLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgYmxvY2tQZXJSb3VuZCA9IHBhcnNlRmxvYXQoX2Jsb2NrUGVyUm91bmQpO1xuXG4gICAgY29uc3QgbmVhcmVzdFVuc3Rha2luZ0Jsb2NrID0gT2JqZWN0LmtleXModW5zdGFraW5nSW5mbylbMF07XG4gICAgY29uc3QgbmVhcmVzdFVuc3Rha2luZ0Ftb3VudCA9IE9iamVjdC52YWx1ZXModW5zdGFraW5nSW5mbylbMF07XG5cbiAgICBjb25zdCBibG9ja0R1cmF0aW9uID0gKF9TVEFLSU5HX0VSQV9MRU5HVEhfTUFQW2NoYWluXSB8fCBfU1RBS0lOR19FUkFfTEVOR1RIX01BUC5kZWZhdWx0KSAvIGJsb2NrUGVyUm91bmQ7IC8vIGluIGhvdXJzXG5cbiAgICBjb25zdCBpc0NsYWltYWJsZSA9IHBhcnNlSW50KG5lYXJlc3RVbnN0YWtpbmdCbG9jaykgLSBjdXJyZW50QmxvY2tOdW1iZXIgPCAwO1xuICAgIGNvbnN0IHJlbWFpbmluZ0Jsb2NrID0gcGFyc2VJbnQobmVhcmVzdFVuc3Rha2luZ0Jsb2NrKSAtIGN1cnJlbnRCbG9ja051bWJlcjtcbiAgICBjb25zdCB3YWl0aW5nVGltZSA9IHJlbWFpbmluZ0Jsb2NrICogYmxvY2tEdXJhdGlvbjtcblxuICAgIHVuc3Rha2luZ0xpc3QucHVzaCh7XG4gICAgICBjaGFpbixcbiAgICAgIHN0YXR1czogaXNDbGFpbWFibGUgPyBVbnN0YWtpbmdTdGF0dXMuQ0xBSU1BQkxFIDogVW5zdGFraW5nU3RhdHVzLlVOTE9DS0lORyxcbiAgICAgIGNsYWltYWJsZTogbmVhcmVzdFVuc3Rha2luZ0Ftb3VudC50b1N0cmluZygpLFxuICAgICAgd2FpdGluZ1RpbWUsXG4gICAgICB2YWxpZGF0b3JBZGRyZXNzOiBkZWxlZ2F0b3JTdGF0ZT8ub3duZXIgfHwgdW5kZWZpbmVkXG4gICAgfSk7XG4gIH1cblxuICBpZiAobm9taW5hdGlvbkxpc3QubGVuZ3RoID09PSAwICYmIHVuc3Rha2luZ0xpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc3Rha2luZ1N0YXR1cyA9IGdldFN0YWtpbmdTdGF0dXNCeU5vbWluYXRpb25zKG5ldyBCTihhY3RpdmVTdGFrZSksIG5vbWluYXRpb25MaXN0KTtcblxuICByZXR1cm4ge1xuICAgIGNoYWluLFxuICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICBzdGF0dXM6IHN0YWtpbmdTdGF0dXMsXG4gICAgYWRkcmVzczogYWRkcmVzcyxcbiAgICBhY3RpdmVTdGFrZTogYWN0aXZlU3Rha2UsXG4gICAgbm9taW5hdGlvbnM6IG5vbWluYXRpb25MaXN0LFxuICAgIHVuc3Rha2luZ3M6IHVuc3Rha2luZ0xpc3RcbiAgfSBhcyBOb21pbmF0b3JNZXRhZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFtcGxpdHVkZUNvbGxhdG9yc0luZm8gKGNoYWluOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSk6IFByb21pc2U8VmFsaWRhdG9ySW5mb1tdPiB7XG4gIGNvbnN0IGNoYWluQXBpID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG5cbiAgY29uc3QgW19hbGxDb2xsYXRvcnMsIF9pbmZsYXRpb25Db25maWddID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGNoYWluQXBpLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLmNhbmRpZGF0ZVBvb2wuZW50cmllcygpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLmluZmxhdGlvbkNvbmZpZygpXG4gIF0pO1xuXG4gIGNvbnN0IG1heERlbGVnYXRvcnNQZXJDb2xsYXRvciA9IGNoYWluQXBpLmFwaS5jb25zdHMucGFyYWNoYWluU3Rha2luZy5tYXhEZWxlZ2F0b3JzUGVyQ29sbGF0b3IudG9TdHJpbmcoKTtcbiAgY29uc3QgaW5mbGF0aW9uQ29uZmlnID0gX2luZmxhdGlvbkNvbmZpZy50b0h1bWFuKCkgYXMgdW5rbm93biBhcyBJbmZsYXRpb25Db25maWc7XG4gIGNvbnN0IHJhd0RlbGVnYXRvclJldHVybiA9IGluZmxhdGlvbkNvbmZpZy5kZWxlZ2F0b3IucmV3YXJkUmF0ZS5hbm51YWw7XG4gIGNvbnN0IGRlbGVnYXRvclJldHVybiA9IHBhcnNlRmxvYXQocmF3RGVsZWdhdG9yUmV0dXJuLnNwbGl0KCclJylbMF0pO1xuXG4gIGNvbnN0IGFsbENvbGxhdG9yczogVmFsaWRhdG9ySW5mb1tdID0gW107XG5cbiAgZm9yIChjb25zdCBfY29sbGF0b3Igb2YgX2FsbENvbGxhdG9ycykge1xuICAgIGNvbnN0IGNvbGxhdG9ySW5mbyA9IF9jb2xsYXRvclsxXS50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgQ29sbGF0b3JJbmZvO1xuXG4gICAgY29uc3QgYm5Ub3RhbFN0YWtlID0gbmV3IEJOKGNvbGxhdG9ySW5mby50b3RhbCk7XG4gICAgY29uc3QgYm5Pd25TdGFrZSA9IG5ldyBCTihjb2xsYXRvckluZm8uc3Rha2UpO1xuICAgIGNvbnN0IGJuT3RoZXJTdGFrZSA9IGJuVG90YWxTdGFrZS5zdWIoYm5Pd25TdGFrZSk7XG5cbiAgICBhbGxDb2xsYXRvcnMucHVzaCh7XG4gICAgICBhZGRyZXNzOiBjb2xsYXRvckluZm8uaWQsXG4gICAgICB0b3RhbFN0YWtlOiBiblRvdGFsU3Rha2UudG9TdHJpbmcoKSxcbiAgICAgIG93blN0YWtlOiBibk93blN0YWtlLnRvU3RyaW5nKCksXG4gICAgICBvdGhlclN0YWtlOiBibk90aGVyU3Rha2UudG9TdHJpbmcoKSxcbiAgICAgIG5vbWluYXRvckNvdW50OiBjb2xsYXRvckluZm8uZGVsZWdhdG9ycy5sZW5ndGgsXG4gICAgICBjb21taXNzaW9uOiAwLFxuICAgICAgZXhwZWN0ZWRSZXR1cm46IGRlbGVnYXRvclJldHVybixcbiAgICAgIGJsb2NrZWQ6IGZhbHNlLFxuICAgICAgaXNWZXJpZmllZDogZmFsc2UsXG4gICAgICBtaW5Cb25kOiAnMCcsXG4gICAgICBjaGFpbixcbiAgICAgIGlzQ3Jvd2RlZDogY29sbGF0b3JJbmZvLmRlbGVnYXRvcnMubGVuZ3RoID49IHBhcnNlSW50KG1heERlbGVnYXRvcnNQZXJDb2xsYXRvcilcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBhbGxDb2xsYXRvcnM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbXBsaXR1ZGVCb25kaW5nRXh0cmluc2ljIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGFtb3VudDogc3RyaW5nLCBzZWxlY3RlZFZhbGlkYXRvckluZm86IFZhbGlkYXRvckluZm8sIG5vbWluYXRvck1ldGFkYXRhPzogTm9taW5hdG9yTWV0YWRhdGEpIHtcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcbiAgY29uc3QgYmluYXJ5QW1vdW50ID0gbmV3IEJOKGFtb3VudCk7XG5cbiAgaWYgKCFub21pbmF0b3JNZXRhZGF0YSkge1xuICAgIHJldHVybiBjaGFpbkFwaS5hcGkudHgucGFyYWNoYWluU3Rha2luZy5qb2luRGVsZWdhdG9ycyhzZWxlY3RlZFZhbGlkYXRvckluZm8uYWRkcmVzcywgYmluYXJ5QW1vdW50KTtcbiAgfVxuXG4gIGNvbnN0IHsgYm9uZGVkVmFsaWRhdG9ycyB9ID0gZ2V0Qm9uZGVkVmFsaWRhdG9ycyhub21pbmF0b3JNZXRhZGF0YS5ub21pbmF0aW9ucyk7XG5cbiAgaWYgKCFib25kZWRWYWxpZGF0b3JzLmluY2x1ZGVzKHJlZm9ybWF0QWRkcmVzcyhzZWxlY3RlZFZhbGlkYXRvckluZm8uYWRkcmVzcywgMCkpKSB7XG4gICAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC5wYXJhY2hhaW5TdGFraW5nLmpvaW5EZWxlZ2F0b3JzKHNlbGVjdGVkVmFsaWRhdG9ySW5mby5hZGRyZXNzLCBiaW5hcnlBbW91bnQpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IF9wYXJhbXMgPSBjaGFpbkFwaS5hcGkudHgucGFyYWNoYWluU3Rha2luZy5kZWxlZ2F0b3JTdGFrZU1vcmUudG9KU09OKCkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICBjb25zdCBwYXJhbXNDb3VudCA9IChfcGFyYW1zLmFyZ3MgYXMgYW55W10pLmxlbmd0aDtcblxuICAgIGlmIChwYXJhbXNDb3VudCA9PT0gMikgeyAvLyBkZXRlY3QgbnVtYmVyIG9mIHBhcmFtc1xuICAgICAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC5wYXJhY2hhaW5TdGFraW5nLmRlbGVnYXRvclN0YWtlTW9yZShzZWxlY3RlZFZhbGlkYXRvckluZm8uYWRkcmVzcywgYmluYXJ5QW1vdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC5wYXJhY2hhaW5TdGFraW5nLmRlbGVnYXRvclN0YWtlTW9yZShiaW5hcnlBbW91bnQpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QW1wbGl0dWRlVW5ib25kaW5nRXh0cmluc2ljIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGFtb3VudDogc3RyaW5nLCBub21pbmF0b3JNZXRhZGF0YTogTm9taW5hdG9yTWV0YWRhdGEsIGNvbGxhdG9yQWRkcmVzczogc3RyaW5nKSB7XG4gIGNvbnN0IGNoYWluQXBpID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG4gIGNvbnN0IGJpbmFyeUFtb3VudCA9IG5ldyBCTihhbW91bnQpO1xuXG4gIGNvbnN0IHVuc3Rha2VBbGwgPSBpc1Vuc3Rha2VBbGwoY29sbGF0b3JBZGRyZXNzLCBub21pbmF0b3JNZXRhZGF0YS5ub21pbmF0aW9ucywgYW1vdW50KTtcblxuICBpZiAoIXVuc3Rha2VBbGwpIHtcbiAgICBjb25zdCBfcGFyYW1zID0gY2hhaW5BcGkuYXBpLnR4LnBhcmFjaGFpblN0YWtpbmcuZGVsZWdhdG9yU3Rha2VNb3JlLnRvSlNPTigpIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgY29uc3QgcGFyYW1zQ291bnQgPSAoX3BhcmFtcy5hcmdzIGFzIGFueVtdKS5sZW5ndGg7XG5cbiAgICBpZiAocGFyYW1zQ291bnQgPT09IDIpIHtcbiAgICAgIHJldHVybiBjaGFpbkFwaS5hcGkudHgucGFyYWNoYWluU3Rha2luZy5kZWxlZ2F0b3JTdGFrZUxlc3MoY29sbGF0b3JBZGRyZXNzLCBiaW5hcnlBbW91bnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY2hhaW5BcGkuYXBpLnR4LnBhcmFjaGFpblN0YWtpbmcuZGVsZWdhdG9yU3Rha2VMZXNzKGJpbmFyeUFtb3VudCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBjaGFpbkFwaS5hcGkudHgucGFyYWNoYWluU3Rha2luZy5sZWF2ZURlbGVnYXRvcnMoKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QW1wbGl0dWRlV2l0aGRyYXdhbEV4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBhZGRyZXNzOiBzdHJpbmcpIHtcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcblxuICByZXR1cm4gY2hhaW5BcGkuYXBpLnR4LnBhcmFjaGFpblN0YWtpbmcudW5sb2NrVW5zdGFrZWQoYWRkcmVzcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbXBsaXR1ZGVDbGFpbVJld2FyZEV4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpKSB7XG4gIGNvbnN0IGNoYWluQXBpID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG5cbiAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC51dGlsaXR5LmJhdGNoKFtcbiAgICBjaGFpbkFwaS5hcGkudHgucGFyYWNoYWluU3Rha2luZy5pbmNyZW1lbnREZWxlZ2F0b3JSZXdhcmRzKCksXG4gICAgY2hhaW5BcGkuYXBpLnR4LnBhcmFjaGFpblN0YWtpbmcuY2xhaW1SZXdhcmRzKClcbiAgXSk7XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbkVycm9yIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL2Vycm9ycy9UcmFuc2FjdGlvbkVycm9yJztcbmltcG9ydCB7IENoYWluU3Rha2luZ01ldGFkYXRhLCBOb21pbmF0b3JNZXRhZGF0YSwgU3Rha2luZ1R5cGUsIFVuc3Rha2luZ0luZm8sIFZhbGlkYXRvckluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IGdldEFtcGxpdHVkZUJvbmRpbmdFeHRyaW5zaWMsIGdldEFtcGxpdHVkZUNsYWltUmV3YXJkRXh0cmluc2ljLCBnZXRBbXBsaXR1ZGVDb2xsYXRvcnNJbmZvLCBnZXRBbXBsaXR1ZGVOb21pbmF0b3JNZXRhZGF0YSwgZ2V0QW1wbGl0dWRlU3Rha2luZ01ldGFkYXRhLCBnZXRBbXBsaXR1ZGVVbmJvbmRpbmdFeHRyaW5zaWMsIGdldEFtcGxpdHVkZVdpdGhkcmF3YWxFeHRyaW5zaWMsIHN1YnNjcmliZUFtcGxpdHVkZVN0YWtpbmdNZXRhZGF0YSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvc3Rha2luZy9ib25kaW5nL2FtcGxpdHVkZSc7XG5pbXBvcnQgeyBnZXRBc3RhckJvbmRpbmdFeHRyaW5zaWMsIGdldEFzdGFyQ2xhaW1SZXdhcmRFeHRyaW5zaWMsIGdldEFzdGFyRGFwcHNJbmZvLCBnZXRBc3Rhck5vbWluYXRvck1ldGFkYXRhLCBnZXRBc3RhclN0YWtpbmdNZXRhZGF0YSwgZ2V0QXN0YXJVbmJvbmRpbmdFeHRyaW5zaWMsIGdldEFzdGFyV2l0aGRyYXdhbEV4dHJpbnNpYywgc3Vic2NyaWJlQXN0YXJTdGFraW5nTWV0YWRhdGEgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3N0YWtpbmcvYm9uZGluZy9hc3Rhcic7XG5pbXBvcnQgeyBnZXRQYXJhQm9uZGluZ0V4dHJpbnNpYywgZ2V0UGFyYUNhbmNlbFdpdGhkcmF3YWxFeHRyaW5zaWMsIGdldFBhcmFjaGFpbkNvbGxhdG9yc0luZm8sIGdldFBhcmFDaGFpbk5vbWluYXRvck1ldGFkYXRhLCBnZXRQYXJhQ2hhaW5TdGFraW5nTWV0YWRhdGEsIGdldFBhcmFVbmJvbmRpbmdFeHRyaW5zaWMsIGdldFBhcmFXaXRoZHJhd2FsRXh0cmluc2ljLCBzdWJzY3JpYmVQYXJhQ2hhaW5TdGFraW5nTWV0YWRhdGEsIHZhbGlkYXRlUGFyYUNoYWluQm9uZGluZ0NvbmRpdGlvbiwgdmFsaWRhdGVQYXJhQ2hhaW5VbmJvbmRpbmdDb25kaXRpb24gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3N0YWtpbmcvYm9uZGluZy9wYXJhQ2hhaW4nO1xuaW1wb3J0IHsgZ2V0UG9vbGluZ0NsYWltUmV3YXJkRXh0cmluc2ljLCBnZXRQb29saW5nV2l0aGRyYXdhbEV4dHJpbnNpYywgZ2V0UmVsYXlCb25kaW5nRXh0cmluc2ljLCBnZXRSZWxheUNhbmNlbFdpdGhkcmF3YWxFeHRyaW5zaWMsIGdldFJlbGF5Q2hhaW5Ob21pbmF0b3JNZXRhZGF0YSwgZ2V0UmVsYXlDaGFpblN0YWtpbmdNZXRhZGF0YSwgZ2V0UmVsYXlQb29sc0luZm8sIGdldFJlbGF5VW5ib25kaW5nRXh0cmluc2ljLCBnZXRSZWxheVZhbGlkYXRvcnNJbmZvLCBnZXRSZWxheVdpdGhkcmF3YWxFeHRyaW5zaWMsIHN1YnNjcmliZVJlbGF5Q2hhaW5TdGFraW5nTWV0YWRhdGEsIHZhbGlkYXRlUmVsYXlCb25kaW5nQ29uZGl0aW9uLCB2YWxpZGF0ZVJlbGF5VW5ib25kaW5nQ29uZGl0aW9uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL2JvbmRpbmcvcmVsYXlDaGFpbic7XG5pbXBvcnQgeyBfU1RBS0lOR19DSEFJTl9HUk9VUCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgX1N1YnN0cmF0ZUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5cbi8vIGFsbCBhZGRyZXNzZXMgbXVzdCBiZSBjb252ZXJ0ZWQgdG8gaXRzIGNoYWluIGZvcm1hdFxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVbmJvbmRpbmdDb25kaXRpb24gKG5vbWluYXRvck1ldGFkYXRhOiBOb21pbmF0b3JNZXRhZGF0YSwgYW1vdW50OiBzdHJpbmcsIGNoYWluOiBzdHJpbmcsIGNoYWluU3Rha2luZ01ldGFkYXRhOiBDaGFpblN0YWtpbmdNZXRhZGF0YSwgc2VsZWN0ZWRWYWxpZGF0b3I/OiBzdHJpbmcpOiBUcmFuc2FjdGlvbkVycm9yW10ge1xuICBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAucmVsYXkuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRlUmVsYXlVbmJvbmRpbmdDb25kaXRpb24oYW1vdW50LCBjaGFpblN0YWtpbmdNZXRhZGF0YSwgbm9taW5hdG9yTWV0YWRhdGEpO1xuICB9XG5cbiAgcmV0dXJuIHZhbGlkYXRlUGFyYUNoYWluVW5ib25kaW5nQ29uZGl0aW9uKGFtb3VudCwgbm9taW5hdG9yTWV0YWRhdGEsIGNoYWluU3Rha2luZ01ldGFkYXRhLCBzZWxlY3RlZFZhbGlkYXRvciBhcyBzdHJpbmcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVCb25kaW5nQ29uZGl0aW9uIChjaGFpbkluZm86IF9DaGFpbkluZm8sIGFtb3VudDogc3RyaW5nLCBzZWxlY3RlZFZhbGlkYXRvcnM6IFZhbGlkYXRvckluZm9bXSwgYWRkcmVzczogc3RyaW5nLCBjaGFpblN0YWtpbmdNZXRhZGF0YTogQ2hhaW5TdGFraW5nTWV0YWRhdGEsIG5vbWluYXRvck1ldGFkYXRhPzogTm9taW5hdG9yTWV0YWRhdGEpOiBUcmFuc2FjdGlvbkVycm9yW10ge1xuICBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAucmVsYXkuaW5jbHVkZXMoY2hhaW5JbmZvLnNsdWcpKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRlUmVsYXlCb25kaW5nQ29uZGl0aW9uKGNoYWluSW5mbywgYW1vdW50LCBzZWxlY3RlZFZhbGlkYXRvcnMsIGFkZHJlc3MsIGNoYWluU3Rha2luZ01ldGFkYXRhLCBub21pbmF0b3JNZXRhZGF0YSk7XG4gIH1cblxuICByZXR1cm4gdmFsaWRhdGVQYXJhQ2hhaW5Cb25kaW5nQ29uZGl0aW9uKGNoYWluSW5mbywgYW1vdW50LCBzZWxlY3RlZFZhbGlkYXRvcnMsIGFkZHJlc3MsIGNoYWluU3Rha2luZ01ldGFkYXRhLCBub21pbmF0b3JNZXRhZGF0YSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDaGFpblN0YWtpbmdNZXRhZGF0YSAoY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGkpOiBQcm9taXNlPENoYWluU3Rha2luZ01ldGFkYXRhPiB7XG4gIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5hc3Rhci5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykpIHtcbiAgICByZXR1cm4gZ2V0QXN0YXJTdGFraW5nTWV0YWRhdGEoY2hhaW5JbmZvLnNsdWcsIHN1YnN0cmF0ZUFwaSk7XG4gIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAucGFyYS5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykpIHtcbiAgICByZXR1cm4gZ2V0UGFyYUNoYWluU3Rha2luZ01ldGFkYXRhKGNoYWluSW5mby5zbHVnLCBzdWJzdHJhdGVBcGkpO1xuICB9IGVsc2UgaWYgKF9TVEFLSU5HX0NIQUlOX0dST1VQLmFtcGxpdHVkZS5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykpIHtcbiAgICByZXR1cm4gZ2V0QW1wbGl0dWRlU3Rha2luZ01ldGFkYXRhKGNoYWluSW5mby5zbHVnLCBzdWJzdHJhdGVBcGkpO1xuICB9XG5cbiAgcmV0dXJuIGdldFJlbGF5Q2hhaW5TdGFraW5nTWV0YWRhdGEoY2hhaW5JbmZvLCBzdWJzdHJhdGVBcGkpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Tm9taW5hdG9yTWV0YWRhdGEgKGNoYWluSW5mbzogX0NoYWluSW5mbywgYWRkcmVzczogc3RyaW5nLCBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGkpOiBQcm9taXNlPE5vbWluYXRvck1ldGFkYXRhIHwgdW5kZWZpbmVkPiB7XG4gIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5hc3Rhci5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykpIHtcbiAgICByZXR1cm4gZ2V0QXN0YXJOb21pbmF0b3JNZXRhZGF0YShjaGFpbkluZm8sIGFkZHJlc3MsIHN1YnN0cmF0ZUFwaSk7XG4gIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAucGFyYS5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykpIHtcbiAgICByZXR1cm4gZ2V0UGFyYUNoYWluTm9taW5hdG9yTWV0YWRhdGEoY2hhaW5JbmZvLCBhZGRyZXNzLCBzdWJzdHJhdGVBcGkpO1xuICB9IGVsc2UgaWYgKF9TVEFLSU5HX0NIQUlOX0dST1VQLmFtcGxpdHVkZS5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykpIHtcbiAgICByZXR1cm4gZ2V0QW1wbGl0dWRlTm9taW5hdG9yTWV0YWRhdGEoY2hhaW5JbmZvLCBhZGRyZXNzLCBzdWJzdHJhdGVBcGkpO1xuICB9XG5cbiAgcmV0dXJuIGdldFJlbGF5Q2hhaW5Ob21pbmF0b3JNZXRhZGF0YShjaGFpbkluZm8sIGFkZHJlc3MsIHN1YnN0cmF0ZUFwaSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWYWxpZGF0b3JzSW5mbyAobmV0d29ya0tleTogc3RyaW5nLCBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGRlY2ltYWxzOiBudW1iZXIsIGNoYWluU3Rha2luZ01ldGFkYXRhOiBDaGFpblN0YWtpbmdNZXRhZGF0YSk6IFByb21pc2U8VmFsaWRhdG9ySW5mb1tdPiB7XG4gIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5wYXJhLmluY2x1ZGVzKG5ldHdvcmtLZXkpKSB7XG4gICAgcmV0dXJuIGdldFBhcmFjaGFpbkNvbGxhdG9yc0luZm8obmV0d29ya0tleSwgc3Vic3RyYXRlQXBpKTtcbiAgfSBlbHNlIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5hc3Rhci5pbmNsdWRlcyhuZXR3b3JrS2V5KSkge1xuICAgIHJldHVybiBnZXRBc3RhckRhcHBzSW5mbyhuZXR3b3JrS2V5LCBzdWJzdHJhdGVBcGkpO1xuICB9IGVsc2UgaWYgKF9TVEFLSU5HX0NIQUlOX0dST1VQLmFtcGxpdHVkZS5pbmNsdWRlcyhuZXR3b3JrS2V5KSkge1xuICAgIHJldHVybiBnZXRBbXBsaXR1ZGVDb2xsYXRvcnNJbmZvKG5ldHdvcmtLZXksIHN1YnN0cmF0ZUFwaSk7XG4gIH1cblxuICByZXR1cm4gZ2V0UmVsYXlWYWxpZGF0b3JzSW5mbyhuZXR3b3JrS2V5LCBzdWJzdHJhdGVBcGksIGRlY2ltYWxzLCBjaGFpblN0YWtpbmdNZXRhZGF0YSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROb21pbmF0aW9uUG9vbHNJbmZvIChjaGFpbjogc3RyaW5nLCBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGkpIHtcbiAgcmV0dXJuIGdldFJlbGF5UG9vbHNJbmZvKGNoYWluLCBzdWJzdHJhdGVBcGkpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Qm9uZGluZ0V4dHJpbnNpYyAoY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBhbW91bnQ6IHN0cmluZywgc2VsZWN0ZWRWYWxpZGF0b3JzOiBWYWxpZGF0b3JJbmZvW10sIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgYWRkcmVzczogc3RyaW5nLCBub21pbmF0b3JNZXRhZGF0YT86IE5vbWluYXRvck1ldGFkYXRhKSB7XG4gIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5wYXJhLmluY2x1ZGVzKGNoYWluSW5mby5zbHVnKSkge1xuICAgIHJldHVybiBnZXRQYXJhQm9uZGluZ0V4dHJpbnNpYyhjaGFpbkluZm8sIHN1YnN0cmF0ZUFwaSwgYW1vdW50LCBzZWxlY3RlZFZhbGlkYXRvcnNbMF0sIG5vbWluYXRvck1ldGFkYXRhKTsgLy8gb25seSBzZWxlY3QgMSB2YWxpZGF0b3IgYXQgYSB0aW1lXG4gIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAuYXN0YXIuaW5jbHVkZXMoY2hhaW5JbmZvLnNsdWcpKSB7XG4gICAgcmV0dXJuIGdldEFzdGFyQm9uZGluZ0V4dHJpbnNpYyhzdWJzdHJhdGVBcGksIGFtb3VudCwgc2VsZWN0ZWRWYWxpZGF0b3JzWzBdKTtcbiAgfSBlbHNlIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5hbXBsaXR1ZGUuaW5jbHVkZXMoY2hhaW5JbmZvLnNsdWcpKSB7XG4gICAgcmV0dXJuIGdldEFtcGxpdHVkZUJvbmRpbmdFeHRyaW5zaWMoc3Vic3RyYXRlQXBpLCBhbW91bnQsIHNlbGVjdGVkVmFsaWRhdG9yc1swXSwgbm9taW5hdG9yTWV0YWRhdGEpO1xuICB9XG5cbiAgcmV0dXJuIGdldFJlbGF5Qm9uZGluZ0V4dHJpbnNpYyhzdWJzdHJhdGVBcGksIGFtb3VudCwgc2VsZWN0ZWRWYWxpZGF0b3JzLCBjaGFpbkluZm8sIGFkZHJlc3MsIG5vbWluYXRvck1ldGFkYXRhKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVuYm9uZGluZ0V4dHJpbnNpYyAobm9taW5hdG9yTWV0YWRhdGE6IE5vbWluYXRvck1ldGFkYXRhLCBhbW91bnQ6IHN0cmluZywgY2hhaW46IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBzZWxlY3RlZFZhbGlkYXRvcj86IHN0cmluZykge1xuICBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAucGFyYS5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICByZXR1cm4gZ2V0UGFyYVVuYm9uZGluZ0V4dHJpbnNpYyhzdWJzdHJhdGVBcGksIGFtb3VudCwgbm9taW5hdG9yTWV0YWRhdGEsIHNlbGVjdGVkVmFsaWRhdG9yIGFzIHN0cmluZyk7XG4gIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAuYXN0YXIuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgcmV0dXJuIGdldEFzdGFyVW5ib25kaW5nRXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgYW1vdW50LCBzZWxlY3RlZFZhbGlkYXRvciBhcyBzdHJpbmcpO1xuICB9IGVsc2UgaWYgKF9TVEFLSU5HX0NIQUlOX0dST1VQLmFtcGxpdHVkZS5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICByZXR1cm4gZ2V0QW1wbGl0dWRlVW5ib25kaW5nRXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgYW1vdW50LCBub21pbmF0b3JNZXRhZGF0YSwgc2VsZWN0ZWRWYWxpZGF0b3IgYXMgc3RyaW5nKTtcbiAgfVxuXG4gIHJldHVybiBnZXRSZWxheVVuYm9uZGluZ0V4dHJpbnNpYyhzdWJzdHJhdGVBcGksIGFtb3VudCwgbm9taW5hdG9yTWV0YWRhdGEpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0V2l0aGRyYXdhbEV4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBjaGFpbjogc3RyaW5nLCBub21pbmF0b3JNZXRhZGF0YTogTm9taW5hdG9yTWV0YWRhdGEsIHZhbGlkYXRvckFkZHJlc3M/OiBzdHJpbmcpIHtcbiAgaWYgKG5vbWluYXRvck1ldGFkYXRhLnR5cGUgPT09IFN0YWtpbmdUeXBlLlBPT0xFRCkge1xuICAgIHJldHVybiBnZXRQb29saW5nV2l0aGRyYXdhbEV4dHJpbnNpYyhzdWJzdHJhdGVBcGksIG5vbWluYXRvck1ldGFkYXRhKTtcbiAgfVxuXG4gIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5wYXJhLmluY2x1ZGVzKGNoYWluKSkge1xuICAgIHJldHVybiBnZXRQYXJhV2l0aGRyYXdhbEV4dHJpbnNpYyhzdWJzdHJhdGVBcGksIG5vbWluYXRvck1ldGFkYXRhLmFkZHJlc3MsIHZhbGlkYXRvckFkZHJlc3MgYXMgc3RyaW5nKTtcbiAgfSBlbHNlIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5hc3Rhci5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICByZXR1cm4gZ2V0QXN0YXJXaXRoZHJhd2FsRXh0cmluc2ljKHN1YnN0cmF0ZUFwaSk7XG4gIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAuYW1wbGl0dWRlLmluY2x1ZGVzKGNoYWluKSkge1xuICAgIHJldHVybiBnZXRBbXBsaXR1ZGVXaXRoZHJhd2FsRXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgbm9taW5hdG9yTWV0YWRhdGEuYWRkcmVzcyk7XG4gIH1cblxuICByZXR1cm4gZ2V0UmVsYXlXaXRoZHJhd2FsRXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgbm9taW5hdG9yTWV0YWRhdGEuYWRkcmVzcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDbGFpbVJld2FyZEV4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBjaGFpbjogc3RyaW5nLCBhZGRyZXNzOiBzdHJpbmcsIHN0YWtpbmdUeXBlOiBTdGFraW5nVHlwZSwgYm9uZFJld2FyZCA9IHRydWUpIHtcbiAgaWYgKHN0YWtpbmdUeXBlID09PSBTdGFraW5nVHlwZS5QT09MRUQpIHtcbiAgICByZXR1cm4gZ2V0UG9vbGluZ0NsYWltUmV3YXJkRXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgYm9uZFJld2FyZCk7XG4gIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAuYW1wbGl0dWRlLmluY2x1ZGVzKGNoYWluKSkge1xuICAgIHJldHVybiBnZXRBbXBsaXR1ZGVDbGFpbVJld2FyZEV4dHJpbnNpYyhzdWJzdHJhdGVBcGkpO1xuICB9XG5cbiAgcmV0dXJuIGdldEFzdGFyQ2xhaW1SZXdhcmRFeHRyaW5zaWMoc3Vic3RyYXRlQXBpLCBhZGRyZXNzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhbmNlbFdpdGhkcmF3YWxFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgY2hhaW46IHN0cmluZywgc2VsZWN0ZWRVbnN0YWtpbmc6IFVuc3Rha2luZ0luZm8pIHtcbiAgaWYgKF9TVEFLSU5HX0NIQUlOX0dST1VQLnBhcmEuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgcmV0dXJuIGdldFBhcmFDYW5jZWxXaXRoZHJhd2FsRXh0cmluc2ljKHN1YnN0cmF0ZUFwaSwgc2VsZWN0ZWRVbnN0YWtpbmcpO1xuICB9XG5cbiAgcmV0dXJuIGdldFJlbGF5Q2FuY2VsV2l0aGRyYXdhbEV4dHJpbnNpYyhzdWJzdHJhdGVBcGksIHNlbGVjdGVkVW5zdGFraW5nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZUVzc2VudGlhbENoYWluU3Rha2luZ01ldGFkYXRhIChzdWJzdHJhdGVBcGlNYXA6IFJlY29yZDxzdHJpbmcsIF9TdWJzdHJhdGVBcGk+LCBjaGFpbkluZm9NYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+LCBjYWxsYmFjazogKGNoYWluOiBzdHJpbmcsIHJzOiBDaGFpblN0YWtpbmdNZXRhZGF0YSkgPT4gdm9pZCkge1xuICBjb25zdCB1bnN1Ykxpc3Q6IFZvaWRGdW5jdGlvbltdID0gW107XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gIE9iamVjdC52YWx1ZXMoY2hhaW5JbmZvTWFwKS5mb3JFYWNoKGFzeW5jIChjaGFpbkluZm86IF9DaGFpbkluZm8pID0+IHtcbiAgICBpZiAoIXN1YnN0cmF0ZUFwaU1hcFtjaGFpbkluZm8uc2x1Z10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdWJzdHJhdGVBcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGlNYXBbY2hhaW5JbmZvLnNsdWddLmlzUmVhZHk7XG5cbiAgICBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAuYXN0YXIuaW5jbHVkZXMoY2hhaW5JbmZvLnNsdWcpKSB7XG4gICAgICBjb25zdCB1bnN1YiA9IGF3YWl0IHN1YnNjcmliZUFzdGFyU3Rha2luZ01ldGFkYXRhKGNoYWluSW5mby5zbHVnLCBzdWJzdHJhdGVBcGksIGNhbGxiYWNrKTtcblxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdW5zdWJMaXN0LnB1c2godW5zdWIpO1xuICAgIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAucGFyYS5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykpIHtcbiAgICAgIGNvbnN0IHVuc3ViID0gYXdhaXQgc3Vic2NyaWJlUGFyYUNoYWluU3Rha2luZ01ldGFkYXRhKGNoYWluSW5mby5zbHVnLCBzdWJzdHJhdGVBcGksIGNhbGxiYWNrKTtcblxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdW5zdWJMaXN0LnB1c2godW5zdWIpO1xuICAgIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAuYW1wbGl0dWRlLmluY2x1ZGVzKGNoYWluSW5mby5zbHVnKSkge1xuICAgICAgY29uc3QgdW5zdWIgPSBhd2FpdCBzdWJzY3JpYmVBbXBsaXR1ZGVTdGFraW5nTWV0YWRhdGEoY2hhaW5JbmZvLnNsdWcsIHN1YnN0cmF0ZUFwaSwgY2FsbGJhY2spO1xuXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB1bnN1Ykxpc3QucHVzaCh1bnN1Yik7XG4gICAgfSBlbHNlIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5yZWxheS5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykpIHtcbiAgICAgIGNvbnN0IHVuc3ViID0gYXdhaXQgc3Vic2NyaWJlUmVsYXlDaGFpblN0YWtpbmdNZXRhZGF0YShjaGFpbkluZm8sIHN1YnN0cmF0ZUFwaSwgY2FsbGJhY2spO1xuXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB1bnN1Ykxpc3QucHVzaCh1bnN1Yik7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIHVuc3ViTGlzdC5mb3JFYWNoKCh1bnN1YikgPT4ge1xuICAgICAgdW5zdWIgJiYgdW5zdWIoKTtcbiAgICB9KTtcbiAgfTtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQ2hhaW5JbmZvIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IFRyYW5zYWN0aW9uRXJyb3IgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvZXJyb3JzL1RyYW5zYWN0aW9uRXJyb3InO1xuaW1wb3J0IHsgQmFzaWNUeEVycm9yVHlwZSwgQ2hhaW5TdGFraW5nTWV0YWRhdGEsIE5vbWluYXRpb25JbmZvLCBOb21pbmF0b3JNZXRhZGF0YSwgU3Rha2luZ1N0YXR1cywgU3Rha2luZ1R4RXJyb3JUeXBlLCBTdGFraW5nVHlwZSwgVW5zdGFraW5nSW5mbywgVW5zdGFraW5nU3RhdHVzLCBWYWxpZGF0b3JJbmZvIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBnZXRCb25kZWRWYWxpZGF0b3JzLCBnZXRFeGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UsIGdldE1heFZhbGlkYXRvckVycm9yTWVzc2FnZSwgZ2V0TWluU3Rha2VFcnJvck1lc3NhZ2UsIGdldFBhcmFDdXJyZW50SW5mbGF0aW9uLCBnZXRTdGFraW5nU3RhdHVzQnlOb21pbmF0aW9ucywgSW5mbGF0aW9uQ29uZmlnLCBpc1Vuc3Rha2VBbGwsIFBhbGxldElkZW50aXR5UmVnaXN0cmF0aW9uLCBQYWxsZXRQYXJhY2hhaW5TdGFraW5nRGVsZWdhdGlvblJlcXVlc3RzU2NoZWR1bGVkUmVxdWVzdCwgUGFsbGV0UGFyYWNoYWluU3Rha2luZ0RlbGVnYXRvciwgUGFyYWNoYWluU3Rha2luZ0NhbmRpZGF0ZU1ldGFkYXRhLCBwYXJzZUlkZW50aXR5LCBUdXJpbmdPcHRpbWFsQ29tcG91bmRGb3JtYXQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3N0YWtpbmcvYm9uZGluZy91dGlscyc7XG5pbXBvcnQgeyBfU1RBS0lOR19FUkFfTEVOR1RIX01BUCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgX1N1YnN0cmF0ZUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBfaXNDaGFpbkV2bUNvbXBhdGlibGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgaXNTYW1lQWRkcmVzcywgcGFyc2VSYXdOdW1iZXIsIHJlZm9ybWF0QWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuXG5pbXBvcnQgeyBDb2RlYyB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcyc7XG5pbXBvcnQgeyBCTiwgQk5fWkVSTyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IGlzRXRoZXJldW1BZGRyZXNzIH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvJztcblxuaW50ZXJmYWNlIENvbGxhdG9yRXh0cmFJbmZvIHtcbiAgYWN0aXZlOiBib29sZWFuLFxuICBpZGVudGl0eT86IHN0cmluZyxcbiAgaXNWZXJpZmllZDogYm9vbGVhbixcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGFyYUNoYWluVW5ib25kaW5nQ29uZGl0aW9uIChhbW91bnQ6IHN0cmluZywgbm9taW5hdG9yTWV0YWRhdGE6IE5vbWluYXRvck1ldGFkYXRhLCBjaGFpblN0YWtpbmdNZXRhZGF0YTogQ2hhaW5TdGFraW5nTWV0YWRhdGEsIHNlbGVjdGVkQ29sbGF0b3I6IHN0cmluZyk6IFRyYW5zYWN0aW9uRXJyb3JbXSB7XG4gIGNvbnN0IGVycm9yczogVHJhbnNhY3Rpb25FcnJvcltdID0gW107XG4gIGxldCB0YXJnZXROb21pbmF0aW9uOiBOb21pbmF0aW9uSW5mbyB8IHVuZGVmaW5lZDtcblxuICBmb3IgKGNvbnN0IG5vbWluYXRpb24gb2Ygbm9taW5hdG9yTWV0YWRhdGEubm9taW5hdGlvbnMpIHtcbiAgICBpZiAoaXNTYW1lQWRkcmVzcyhub21pbmF0aW9uLnZhbGlkYXRvckFkZHJlc3MsIHNlbGVjdGVkQ29sbGF0b3IpKSB7XG4gICAgICB0YXJnZXROb21pbmF0aW9uID0gbm9taW5hdGlvbjtcblxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKCF0YXJnZXROb21pbmF0aW9uKSB7XG4gICAgZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5JTlRFUk5BTF9FUlJPUikpO1xuXG4gICAgcmV0dXJuIGVycm9ycztcbiAgfVxuXG4gIGNvbnN0IGJuQWN0aXZlU3Rha2UgPSBuZXcgQk4odGFyZ2V0Tm9taW5hdGlvbi5hY3RpdmVTdGFrZSk7XG4gIGNvbnN0IGJuUmVtYWluaW5nU3Rha2UgPSBibkFjdGl2ZVN0YWtlLnN1YihuZXcgQk4oYW1vdW50KSk7XG5cbiAgY29uc3QgYm5DaGFpbk1pblN0YWtlID0gbmV3IEJOKGNoYWluU3Rha2luZ01ldGFkYXRhLm1pblN0YWtlIHx8ICcwJyk7XG4gIGNvbnN0IGJuQ29sbGF0b3JNaW5TdGFrZSA9IG5ldyBCTih0YXJnZXROb21pbmF0aW9uLnZhbGlkYXRvck1pblN0YWtlIHx8ICcwJyk7XG4gIGNvbnN0IGJuTWluU3Rha2UgPSBCTi5tYXgoYm5Db2xsYXRvck1pblN0YWtlLCBibkNoYWluTWluU3Rha2UpO1xuICBjb25zdCBleGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UgPSBnZXRFeGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UoY2hhaW5TdGFraW5nTWV0YWRhdGEuY2hhaW4pO1xuXG4gIGlmICh0YXJnZXROb21pbmF0aW9uLmhhc1Vuc3Rha2luZykge1xuICAgIGVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKFN0YWtpbmdUeEVycm9yVHlwZS5FWElTVF9VTlNUQUtJTkdfUkVRVUVTVCwgZXhpc3RVbnN0YWtlRXJyb3JNZXNzYWdlKSk7XG4gIH1cblxuICBpZiAoIShiblJlbWFpbmluZ1N0YWtlLmlzWmVybygpIHx8IGJuUmVtYWluaW5nU3Rha2UuZ3RlKGJuTWluU3Rha2UpKSkge1xuICAgIGVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKFN0YWtpbmdUeEVycm9yVHlwZS5JTlZBTElEX0FDVElWRV9TVEFLRSkpO1xuICB9XG5cbiAgcmV0dXJuIGVycm9ycztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGFyYUNoYWluQm9uZGluZ0NvbmRpdGlvbiAoY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBhbW91bnQ6IHN0cmluZywgc2VsZWN0ZWRDb2xsYXRvcnM6IFZhbGlkYXRvckluZm9bXSwgYWRkcmVzczogc3RyaW5nLCBjaGFpblN0YWtpbmdNZXRhZGF0YTogQ2hhaW5TdGFraW5nTWV0YWRhdGEsIG5vbWluYXRvck1ldGFkYXRhPzogTm9taW5hdG9yTWV0YWRhdGEpOiBUcmFuc2FjdGlvbkVycm9yW10ge1xuICBjb25zdCBlcnJvcnM6IFRyYW5zYWN0aW9uRXJyb3JbXSA9IFtdO1xuICBjb25zdCBzZWxlY3RlZENvbGxhdG9yID0gc2VsZWN0ZWRDb2xsYXRvcnNbMF07XG4gIGxldCBiblRvdGFsU3Rha2UgPSBuZXcgQk4oYW1vdW50KTtcbiAgY29uc3QgYm5DaGFpbk1pblN0YWtlID0gbmV3IEJOKGNoYWluU3Rha2luZ01ldGFkYXRhLm1pblN0YWtlIHx8ICcwJyk7XG4gIGNvbnN0IGJuQ29sbGF0b3JNaW5TdGFrZSA9IG5ldyBCTihzZWxlY3RlZENvbGxhdG9yLm1pbkJvbmQgfHwgJzAnKTtcbiAgY29uc3QgYm5NaW5TdGFrZSA9IGJuQ29sbGF0b3JNaW5TdGFrZSA+IGJuQ2hhaW5NaW5TdGFrZSA/IGJuQ29sbGF0b3JNaW5TdGFrZSA6IGJuQ2hhaW5NaW5TdGFrZTtcbiAgY29uc3QgbWluU3Rha2VFcnJvck1lc3NhZ2UgPSBnZXRNaW5TdGFrZUVycm9yTWVzc2FnZShjaGFpbkluZm8sIGJuTWluU3Rha2UpO1xuICBjb25zdCBtYXhWYWxpZGF0b3JFcnJvck1lc3NhZ2UgPSBnZXRNYXhWYWxpZGF0b3JFcnJvck1lc3NhZ2UoY2hhaW5JbmZvLCBjaGFpblN0YWtpbmdNZXRhZGF0YS5tYXhWYWxpZGF0b3JQZXJOb21pbmF0b3IpO1xuICBjb25zdCBleGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UgPSBnZXRFeGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UoY2hhaW5JbmZvLnNsdWcsIHRydWUpO1xuXG4gIGlmICghbm9taW5hdG9yTWV0YWRhdGEgfHwgbm9taW5hdG9yTWV0YWRhdGEuc3RhdHVzID09PSBTdGFraW5nU3RhdHVzLk5PVF9TVEFLSU5HKSB7XG4gICAgaWYgKCFiblRvdGFsU3Rha2UuZ3RlKGJuTWluU3Rha2UpKSB7XG4gICAgICBlcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihTdGFraW5nVHhFcnJvclR5cGUuTk9UX0VOT1VHSF9NSU5fU1RBS0UsIG1pblN0YWtlRXJyb3JNZXNzYWdlKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVycm9ycztcbiAgfVxuXG4gIGNvbnN0IHsgYm9uZGVkVmFsaWRhdG9ycyB9ID0gZ2V0Qm9uZGVkVmFsaWRhdG9ycyhub21pbmF0b3JNZXRhZGF0YS5ub21pbmF0aW9ucyk7XG4gIGNvbnN0IHBhcnNlZFNlbGVjdGVkQ29sbGF0b3JBZGRyZXNzID0gcmVmb3JtYXRBZGRyZXNzKHNlbGVjdGVkQ29sbGF0b3IuYWRkcmVzcywgMCk7XG5cbiAgaWYgKCFib25kZWRWYWxpZGF0b3JzLmluY2x1ZGVzKHBhcnNlZFNlbGVjdGVkQ29sbGF0b3JBZGRyZXNzKSkgeyAvLyBuZXcgZGVsZWdhdGlvblxuICAgIGlmICghYm5Ub3RhbFN0YWtlLmd0ZShibk1pblN0YWtlKSkge1xuICAgICAgZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoU3Rha2luZ1R4RXJyb3JUeXBlLk5PVF9FTk9VR0hfTUlOX1NUQUtFLCBtaW5TdGFrZUVycm9yTWVzc2FnZSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbGVnYXRpb25Db3VudCA9IG5vbWluYXRvck1ldGFkYXRhLm5vbWluYXRpb25zLmxlbmd0aCArIDE7XG5cbiAgICBpZiAoZGVsZWdhdGlvbkNvdW50ID4gY2hhaW5TdGFraW5nTWV0YWRhdGEubWF4VmFsaWRhdG9yUGVyTm9taW5hdG9yKSB7XG4gICAgICBlcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihTdGFraW5nVHhFcnJvclR5cGUuRVhDRUVEX01BWF9OT01JTkFUSU9OUywgbWF4VmFsaWRhdG9yRXJyb3JNZXNzYWdlKSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBjdXJyZW50RGVsZWdhdGlvbkFtb3VudCA9ICcwJztcbiAgICBsZXQgaGFzVW5zdGFraW5nID0gZmFsc2U7XG5cbiAgICBmb3IgKGNvbnN0IGRlbGVnYXRpb24gb2Ygbm9taW5hdG9yTWV0YWRhdGEubm9taW5hdGlvbnMpIHtcbiAgICAgIGlmIChyZWZvcm1hdEFkZHJlc3MoZGVsZWdhdGlvbi52YWxpZGF0b3JBZGRyZXNzLCAwKSA9PT0gcGFyc2VkU2VsZWN0ZWRDb2xsYXRvckFkZHJlc3MpIHtcbiAgICAgICAgY3VycmVudERlbGVnYXRpb25BbW91bnQgPSBkZWxlZ2F0aW9uLmFjdGl2ZVN0YWtlO1xuICAgICAgICBoYXNVbnN0YWtpbmcgPSAhIWRlbGVnYXRpb24uaGFzVW5zdGFraW5nICYmIGRlbGVnYXRpb24uaGFzVW5zdGFraW5nO1xuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGJuVG90YWxTdGFrZSA9IGJuVG90YWxTdGFrZS5hZGQobmV3IEJOKGN1cnJlbnREZWxlZ2F0aW9uQW1vdW50KSk7XG5cbiAgICBpZiAoIWJuVG90YWxTdGFrZS5ndGUoYm5NaW5TdGFrZSkpIHtcbiAgICAgIGVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKFN0YWtpbmdUeEVycm9yVHlwZS5OT1RfRU5PVUdIX01JTl9TVEFLRSwgbWluU3Rha2VFcnJvck1lc3NhZ2UpKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzVW5zdGFraW5nKSB7XG4gICAgICBlcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihTdGFraW5nVHhFcnJvclR5cGUuRVhJU1RfVU5TVEFLSU5HX1JFUVVFU1QsIGV4aXN0VW5zdGFrZUVycm9yTWVzc2FnZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlcnJvcnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJzY3JpYmVQYXJhQ2hhaW5TdGFraW5nTWV0YWRhdGEgKGNoYWluOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgY2FsbGJhY2s6IChjaGFpbjogc3RyaW5nLCByczogQ2hhaW5TdGFraW5nTWV0YWRhdGEpID0+IHZvaWQpIHtcbiAgcmV0dXJuIHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkucGFyYWNoYWluU3Rha2luZy5yb3VuZCgoX3JvdW5kOiBDb2RlYykgPT4ge1xuICAgIGNvbnN0IHJvdW5kT2JqID0gX3JvdW5kLnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgIGNvbnN0IHJvdW5kID0gcGFyc2VSYXdOdW1iZXIocm91bmRPYmouY3VycmVudCk7XG4gICAgY29uc3QgbWF4RGVsZWdhdGlvbnMgPSBzdWJzdHJhdGVBcGkuYXBpLmNvbnN0cz8ucGFyYWNoYWluU3Rha2luZz8ubWF4RGVsZWdhdGlvbnNQZXJEZWxlZ2F0b3I/LnRvU3RyaW5nKCk7XG4gICAgY29uc3QgdW5zdGFraW5nRGVsYXkgPSBzdWJzdHJhdGVBcGkuYXBpLmNvbnN0cy5wYXJhY2hhaW5TdGFraW5nLmRlbGVnYXRpb25Cb25kTGVzc0RlbGF5LnRvU3RyaW5nKCk7XG4gICAgY29uc3QgdW5zdGFraW5nUGVyaW9kID0gcGFyc2VJbnQodW5zdGFraW5nRGVsYXkpICogKF9TVEFLSU5HX0VSQV9MRU5HVEhfTUFQW2NoYWluXSB8fCBfU1RBS0lOR19FUkFfTEVOR1RIX01BUC5kZWZhdWx0KTtcblxuICAgIGNhbGxiYWNrKGNoYWluLCB7XG4gICAgICBjaGFpbixcbiAgICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICAgIGVyYTogcm91bmQsXG4gICAgICBtaW5TdGFrZTogJzAnLFxuICAgICAgbWF4VmFsaWRhdG9yUGVyTm9taW5hdG9yOiBwYXJzZUludChtYXhEZWxlZ2F0aW9ucyksXG4gICAgICBtYXhXaXRoZHJhd2FsUmVxdWVzdFBlclZhbGlkYXRvcjogMSwgLy8gYnkgZGVmYXVsdFxuICAgICAgYWxsb3dDYW5jZWxVbnN0YWtpbmc6IHRydWUsXG4gICAgICB1bnN0YWtpbmdQZXJpb2RcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXJhQ2hhaW5TdGFraW5nTWV0YWRhdGEgKGNoYWluOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSk6IFByb21pc2U8Q2hhaW5TdGFraW5nTWV0YWRhdGE+IHtcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcblxuICBjb25zdCBfcm91bmQgPSAoYXdhaXQgY2hhaW5BcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcucm91bmQoKSkudG9IdW1hbigpIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGNvbnN0IHJvdW5kID0gcGFyc2VSYXdOdW1iZXIoX3JvdW5kLmN1cnJlbnQpO1xuICBjb25zdCBtYXhEZWxlZ2F0aW9ucyA9IGNoYWluQXBpLmFwaS5jb25zdHMucGFyYWNoYWluU3Rha2luZy5tYXhEZWxlZ2F0aW9uc1BlckRlbGVnYXRvci50b1N0cmluZygpO1xuICBjb25zdCB1bnN0YWtpbmdEZWxheSA9IGNoYWluQXBpLmFwaS5jb25zdHMucGFyYWNoYWluU3Rha2luZy5kZWxlZ2F0aW9uQm9uZExlc3NEZWxheS50b1N0cmluZygpO1xuXG4gIGxldCBfdW52ZXN0ZWRBbGxvY2F0aW9uO1xuXG4gIGlmIChjaGFpbkFwaS5hcGkucXVlcnkudmVzdGluZyAmJiBjaGFpbkFwaS5hcGkucXVlcnkudmVzdGluZy50b3RhbFVudmVzdGVkQWxsb2NhdGlvbikge1xuICAgIF91bnZlc3RlZEFsbG9jYXRpb24gPSBhd2FpdCBjaGFpbkFwaS5hcGkucXVlcnkudmVzdGluZy50b3RhbFVudmVzdGVkQWxsb2NhdGlvbigpO1xuICB9XG5cbiAgY29uc3QgW190b3RhbFN0YWtlLCBfdG90YWxJc3N1YW5jZSwgX2luZmxhdGlvbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgY2hhaW5BcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcuc3Rha2VkKHJvdW5kKSxcbiAgICBjaGFpbkFwaS5hcGkucXVlcnkuYmFsYW5jZXMudG90YWxJc3N1YW5jZSgpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLmluZmxhdGlvbkNvbmZpZygpXG4gIF0pO1xuXG4gIGxldCB1bnZlc3RlZEFsbG9jYXRpb247XG5cbiAgaWYgKF91bnZlc3RlZEFsbG9jYXRpb24pIHtcbiAgICBjb25zdCByYXdVbnZlc3RlZEFsbG9jYXRpb24gPSBfdW52ZXN0ZWRBbGxvY2F0aW9uLnRvU3RyaW5nKCk7XG5cbiAgICB1bnZlc3RlZEFsbG9jYXRpb24gPSBuZXcgQk4ocmF3VW52ZXN0ZWRBbGxvY2F0aW9uKTtcbiAgfVxuXG4gIGNvbnN0IHRvdGFsU3Rha2UgPSBfdG90YWxTdGFrZSA/IG5ldyBCTihfdG90YWxTdGFrZS50b1N0cmluZygpKSA6IEJOX1pFUk87XG4gIGNvbnN0IHRvdGFsSXNzdWFuY2UgPSBuZXcgQk4oX3RvdGFsSXNzdWFuY2UudG9TdHJpbmcoKSk7XG5cbiAgaWYgKHVudmVzdGVkQWxsb2NhdGlvbikge1xuICAgIHRvdGFsSXNzdWFuY2UuYWRkKHVudmVzdGVkQWxsb2NhdGlvbik7IC8vIGZvciBUdXJpbmcgbmV0d29yaywgcmVhZCBtb3JlIGF0IGh0dHBzOi8vaGFja21kLmlvL0BzYkFxT3VYa1J2eWlaUE9CM1J5bjZRL1N5cHIzWkpoNVxuICB9XG5cbiAgY29uc3QgaW5mbGF0aW9uQ29uZmlnID0gX2luZmxhdGlvbi50b0h1bWFuKCkgYXMgdW5rbm93biBhcyBJbmZsYXRpb25Db25maWc7XG4gIGNvbnN0IGluZmxhdGlvbiA9IGdldFBhcmFDdXJyZW50SW5mbGF0aW9uKHBhcnNlUmF3TnVtYmVyKHRvdGFsU3Rha2UudG9TdHJpbmcoKSksIGluZmxhdGlvbkNvbmZpZyk7XG4gIGNvbnN0IHVuc3Rha2luZ1BlcmlvZCA9IHBhcnNlSW50KHVuc3Rha2luZ0RlbGF5KSAqIF9TVEFLSU5HX0VSQV9MRU5HVEhfTUFQW2NoYWluXTtcblxuICByZXR1cm4ge1xuICAgIGNoYWluLFxuICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICBlcmE6IHJvdW5kLFxuICAgIGluZmxhdGlvbixcbiAgICBtaW5TdGFrZTogJzAnLFxuICAgIG1heFZhbGlkYXRvclBlck5vbWluYXRvcjogcGFyc2VJbnQobWF4RGVsZWdhdGlvbnMpLFxuICAgIG1heFdpdGhkcmF3YWxSZXF1ZXN0UGVyVmFsaWRhdG9yOiAxLCAvLyBieSBkZWZhdWx0XG4gICAgYWxsb3dDYW5jZWxVbnN0YWtpbmc6IHRydWUsXG4gICAgdW5zdGFraW5nUGVyaW9kXG4gIH0gYXMgQ2hhaW5TdGFraW5nTWV0YWRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVQYXJhQ2hhaW5Ob21pbmF0b3JNZXRhZGF0YSAoY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBhZGRyZXNzOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgZGVsZWdhdG9yU3RhdGU6IFBhbGxldFBhcmFjaGFpblN0YWtpbmdEZWxlZ2F0b3IpIHtcbiAgY29uc3Qgbm9taW5hdGlvbkxpc3Q6IE5vbWluYXRpb25JbmZvW10gPSBbXTtcbiAgY29uc3QgdW5zdGFraW5nTWFwOiBSZWNvcmQ8c3RyaW5nLCBVbnN0YWtpbmdJbmZvPiA9IHt9O1xuXG4gIGxldCBiblRvdGFsQWN0aXZlU3Rha2UgPSBCTl9aRVJPO1xuXG4gIGNvbnN0IF9yb3VuZEluZm8gPSBhd2FpdCBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcucm91bmQoKTtcbiAgY29uc3Qgcm91bmRJbmZvID0gX3JvdW5kSW5mby50b1ByaW1pdGl2ZSgpIGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIGNvbnN0IGN1cnJlbnRSb3VuZCA9IHJvdW5kSW5mby5jdXJyZW50O1xuXG4gIGF3YWl0IFByb21pc2UuYWxsKGRlbGVnYXRvclN0YXRlLmRlbGVnYXRpb25zLm1hcChhc3luYyAoZGVsZWdhdGlvbikgPT4ge1xuICAgIGNvbnN0IFtfZGVsZWdhdGlvblNjaGVkdWxlZFJlcXVlc3RzLCBfaWRlbnRpdHksIF9jb2xsYXRvckluZm9dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLmRlbGVnYXRpb25TY2hlZHVsZWRSZXF1ZXN0cyhkZWxlZ2F0aW9uLm93bmVyKSxcbiAgICAgIHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkuaWRlbnRpdHk/LmlkZW50aXR5T2YoZGVsZWdhdGlvbi5vd25lciksXG4gICAgICBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcuY2FuZGlkYXRlSW5mbyhkZWxlZ2F0aW9uLm93bmVyKVxuICAgIF0pO1xuXG4gICAgY29uc3QgY29sbGF0b3JJbmZvID0gX2NvbGxhdG9ySW5mby50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgUGFyYWNoYWluU3Rha2luZ0NhbmRpZGF0ZU1ldGFkYXRhO1xuICAgIGNvbnN0IG1pbkRlbGVnYXRpb24gPSBjb2xsYXRvckluZm8/Lmxvd2VzdFRvcERlbGVnYXRpb25BbW91bnQudG9TdHJpbmcoKTtcbiAgICBjb25zdCBpZGVudGl0eUluZm8gPSBfaWRlbnRpdHk/LnRvSHVtYW4oKSBhcyB1bmtub3duIGFzIFBhbGxldElkZW50aXR5UmVnaXN0cmF0aW9uO1xuICAgIGNvbnN0IGRlbGVnYXRpb25TY2hlZHVsZWRSZXF1ZXN0cyA9IF9kZWxlZ2F0aW9uU2NoZWR1bGVkUmVxdWVzdHMudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldFBhcmFjaGFpblN0YWtpbmdEZWxlZ2F0aW9uUmVxdWVzdHNTY2hlZHVsZWRSZXF1ZXN0W107XG5cbiAgICBjb25zdCBpZGVudGl0eSA9IHBhcnNlSWRlbnRpdHkoaWRlbnRpdHlJbmZvKTtcbiAgICBsZXQgaGFzVW5zdGFraW5nID0gZmFsc2U7XG4gICAgbGV0IGRlbGVnYXRpb25TdGF0dXM6IFN0YWtpbmdTdGF0dXMgPSBTdGFraW5nU3RhdHVzLk5PVF9FQVJOSU5HO1xuXG4gICAgLy8gcGFyc2UgdW5zdGFraW5nIGluZm9cbiAgICBpZiAoZGVsZWdhdGlvblNjaGVkdWxlZFJlcXVlc3RzKSB7XG4gICAgICBmb3IgKGNvbnN0IHNjaGVkdWxlZFJlcXVlc3Qgb2YgZGVsZWdhdGlvblNjaGVkdWxlZFJlcXVlc3RzKSB7XG4gICAgICAgIGlmIChyZWZvcm1hdEFkZHJlc3Moc2NoZWR1bGVkUmVxdWVzdC5kZWxlZ2F0b3IsIDApID09PSByZWZvcm1hdEFkZHJlc3MoYWRkcmVzcywgMCkpIHsgLy8gYWRkIG5ldHdvcmsgcHJlZml4XG4gICAgICAgICAgY29uc3QgaXNDbGFpbWFibGUgPSBzY2hlZHVsZWRSZXF1ZXN0LndoZW5FeGVjdXRhYmxlIC0gY3VycmVudFJvdW5kIDwgMDtcbiAgICAgICAgICBjb25zdCByZW1haW5pbmdFcmEgPSBzY2hlZHVsZWRSZXF1ZXN0LndoZW5FeGVjdXRhYmxlIC0gY3VycmVudFJvdW5kO1xuICAgICAgICAgIGNvbnN0IHdhaXRpbmdUaW1lID0gcmVtYWluaW5nRXJhICogX1NUQUtJTkdfRVJBX0xFTkdUSF9NQVBbY2hhaW5JbmZvLnNsdWddO1xuICAgICAgICAgIGNvbnN0IGNsYWltYWJsZSA9IE9iamVjdC52YWx1ZXMoc2NoZWR1bGVkUmVxdWVzdC5hY3Rpb24pWzBdO1xuXG4gICAgICAgICAgdW5zdGFraW5nTWFwW2RlbGVnYXRpb24ub3duZXJdID0ge1xuICAgICAgICAgICAgY2hhaW46IGNoYWluSW5mby5zbHVnLFxuICAgICAgICAgICAgc3RhdHVzOiBpc0NsYWltYWJsZSA/IFVuc3Rha2luZ1N0YXR1cy5DTEFJTUFCTEUgOiBVbnN0YWtpbmdTdGF0dXMuVU5MT0NLSU5HLFxuICAgICAgICAgICAgdmFsaWRhdG9yQWRkcmVzczogZGVsZWdhdGlvbi5vd25lcixcbiAgICAgICAgICAgIGNsYWltYWJsZTogY2xhaW1hYmxlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICB3YWl0aW5nVGltZVxuICAgICAgICAgIH0gYXMgVW5zdGFraW5nSW5mbztcblxuICAgICAgICAgIGhhc1Vuc3Rha2luZyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7IC8vIG9ubHkgaGFuZGxlIDEgc2NoZWR1bGVkUmVxdWVzdCBwZXIgY29sbGF0b3JcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJuU3Rha2UgPSBuZXcgQk4oZGVsZWdhdGlvbi5hbW91bnQpO1xuICAgIGNvbnN0IGJuVW5zdGFrZUJhbGFuY2UgPSB1bnN0YWtpbmdNYXBbZGVsZWdhdGlvbi5vd25lcl0gPyBuZXcgQk4odW5zdGFraW5nTWFwW2RlbGVnYXRpb24ub3duZXJdLmNsYWltYWJsZSkgOiBCTl9aRVJPO1xuXG4gICAgY29uc3QgYm5BY3RpdmVTdGFrZSA9IGJuU3Rha2Uuc3ViKGJuVW5zdGFrZUJhbGFuY2UpO1xuXG4gICAgaWYgKGJuQWN0aXZlU3Rha2UuZ3QoQk5fWkVSTykgJiYgYm5BY3RpdmVTdGFrZS5ndGUobmV3IEJOKG1pbkRlbGVnYXRpb24pKSkge1xuICAgICAgZGVsZWdhdGlvblN0YXR1cyA9IFN0YWtpbmdTdGF0dXMuRUFSTklOR19SRVdBUkQ7XG4gICAgfVxuXG4gICAgYm5Ub3RhbEFjdGl2ZVN0YWtlID0gYm5Ub3RhbEFjdGl2ZVN0YWtlLmFkZChibkFjdGl2ZVN0YWtlKTtcblxuICAgIG5vbWluYXRpb25MaXN0LnB1c2goe1xuICAgICAgY2hhaW46IGNoYWluSW5mby5zbHVnLFxuICAgICAgc3RhdHVzOiBkZWxlZ2F0aW9uU3RhdHVzLFxuICAgICAgdmFsaWRhdG9yQWRkcmVzczogZGVsZWdhdGlvbi5vd25lcixcbiAgICAgIHZhbGlkYXRvcklkZW50aXR5OiBpZGVudGl0eSxcbiAgICAgIGFjdGl2ZVN0YWtlOiBibkFjdGl2ZVN0YWtlLnRvU3RyaW5nKCksXG4gICAgICBoYXNVbnN0YWtpbmcsXG4gICAgICB2YWxpZGF0b3JNaW5TdGFrZTogY29sbGF0b3JJbmZvLmxvd2VzdFRvcERlbGVnYXRpb25BbW91bnQudG9TdHJpbmcoKVxuICAgIH0pO1xuICB9KSk7XG5cbiAgLy8gYXdhaXQgUHJvbWlzZS5hbGwobm9taW5hdGlvbkxpc3QubWFwKGFzeW5jIChub21pbmF0aW9uKSA9PiB7XG4gIC8vICAgY29uc3QgX2NvbGxhdG9ySW5mbyA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkucGFyYWNoYWluU3Rha2luZy5jYW5kaWRhdGVJbmZvKG5vbWluYXRpb24udmFsaWRhdG9yQWRkcmVzcyk7XG4gIC8vICAgY29uc3QgY29sbGF0b3JJbmZvID0gX2NvbGxhdG9ySW5mby50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgUGFyYWNoYWluU3Rha2luZ0NhbmRpZGF0ZU1ldGFkYXRhO1xuICAvL1xuICAvLyAgIG5vbWluYXRpb24udmFsaWRhdG9yTWluU3Rha2UgPSBjb2xsYXRvckluZm8ubG93ZXN0VG9wRGVsZWdhdGlvbkFtb3VudC50b1N0cmluZygpO1xuICAvLyB9KSk7XG5cbiAgY29uc3Qgc3Rha2luZ1N0YXR1cyA9IGdldFN0YWtpbmdTdGF0dXNCeU5vbWluYXRpb25zKGJuVG90YWxBY3RpdmVTdGFrZSwgbm9taW5hdGlvbkxpc3QpO1xuXG4gIHJldHVybiB7XG4gICAgY2hhaW46IGNoYWluSW5mby5zbHVnLFxuICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICBzdGF0dXM6IHN0YWtpbmdTdGF0dXMsXG4gICAgYWRkcmVzczogYWRkcmVzcyxcbiAgICBhY3RpdmVTdGFrZTogYm5Ub3RhbEFjdGl2ZVN0YWtlLnRvU3RyaW5nKCksXG5cbiAgICBub21pbmF0aW9uczogbm9taW5hdGlvbkxpc3QsXG4gICAgdW5zdGFraW5nczogT2JqZWN0LnZhbHVlcyh1bnN0YWtpbmdNYXApXG4gIH0gYXMgTm9taW5hdG9yTWV0YWRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXJhQ2hhaW5Ob21pbmF0b3JNZXRhZGF0YSAoY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBhZGRyZXNzOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSk6IFByb21pc2U8Tm9taW5hdG9yTWV0YWRhdGEgfCB1bmRlZmluZWQ+IHtcbiAgaWYgKF9pc0NoYWluRXZtQ29tcGF0aWJsZShjaGFpbkluZm8pICYmICFpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGNoYWluID0gY2hhaW5JbmZvLnNsdWc7XG4gIGNvbnN0IGNoYWluQXBpID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG5cbiAgY29uc3Qgbm9taW5hdGlvbkxpc3Q6IE5vbWluYXRpb25JbmZvW10gPSBbXTtcbiAgY29uc3QgdW5zdGFraW5nTWFwOiBSZWNvcmQ8c3RyaW5nLCBVbnN0YWtpbmdJbmZvPiA9IHt9O1xuXG4gIGNvbnN0IF9kZWxlZ2F0b3JTdGF0ZSA9IGF3YWl0IGNoYWluQXBpLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLmRlbGVnYXRvclN0YXRlKGFkZHJlc3MpO1xuICBjb25zdCBkZWxlZ2F0b3JTdGF0ZSA9IF9kZWxlZ2F0b3JTdGF0ZS50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgUGFsbGV0UGFyYWNoYWluU3Rha2luZ0RlbGVnYXRvcjtcblxuICBpZiAoIWRlbGVnYXRvclN0YXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluOiBjaGFpbkluZm8uc2x1ZyxcbiAgICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICAgIGFkZHJlc3MsXG4gICAgICBzdGF0dXM6IFN0YWtpbmdTdGF0dXMuTk9UX1NUQUtJTkcsXG4gICAgICBhY3RpdmVTdGFrZTogJzAnLFxuICAgICAgbm9taW5hdGlvbnM6IFtdLFxuICAgICAgdW5zdGFraW5nczogW11cbiAgICB9IGFzIE5vbWluYXRvck1ldGFkYXRhO1xuICB9XG5cbiAgbGV0IGJuVG90YWxBY3RpdmVTdGFrZSA9IEJOX1pFUk87XG5cbiAgYXdhaXQgUHJvbWlzZS5hbGwoZGVsZWdhdG9yU3RhdGUuZGVsZWdhdGlvbnMubWFwKGFzeW5jIChkZWxlZ2F0aW9uKSA9PiB7XG4gICAgY29uc3QgW19kZWxlZ2F0aW9uU2NoZWR1bGVkUmVxdWVzdHMsIF9pZGVudGl0eSwgX3JvdW5kSW5mbywgX2NvbGxhdG9ySW5mb10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBjaGFpbkFwaS5hcGkucXVlcnkucGFyYWNoYWluU3Rha2luZy5kZWxlZ2F0aW9uU2NoZWR1bGVkUmVxdWVzdHMoZGVsZWdhdGlvbi5vd25lciksXG4gICAgICBjaGFpbkFwaS5hcGkucXVlcnkuaWRlbnRpdHkuaWRlbnRpdHlPZihkZWxlZ2F0aW9uLm93bmVyKSxcbiAgICAgIGNoYWluQXBpLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLnJvdW5kKCksXG4gICAgICBjaGFpbkFwaS5hcGkucXVlcnkucGFyYWNoYWluU3Rha2luZy5jYW5kaWRhdGVJbmZvKGRlbGVnYXRpb24ub3duZXIpXG4gICAgXSk7XG5cbiAgICBjb25zdCByYXdDb2xsYXRvckluZm8gPSBfY29sbGF0b3JJbmZvLnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGNvbnN0IG1pbkRlbGVnYXRpb24gPSAocmF3Q29sbGF0b3JJbmZvPy5sb3dlc3RUb3BEZWxlZ2F0aW9uQW1vdW50IGFzIHN0cmluZykucmVwbGFjZUFsbCgnLCcsICcnKTtcbiAgICBjb25zdCBpZGVudGl0eUluZm8gPSBfaWRlbnRpdHkudG9IdW1hbigpIGFzIHVua25vd24gYXMgUGFsbGV0SWRlbnRpdHlSZWdpc3RyYXRpb247XG4gICAgY29uc3Qgcm91bmRJbmZvID0gX3JvdW5kSW5mby50b1ByaW1pdGl2ZSgpIGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gICAgY29uc3QgZGVsZWdhdGlvblNjaGVkdWxlZFJlcXVlc3RzID0gX2RlbGVnYXRpb25TY2hlZHVsZWRSZXF1ZXN0cy50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgUGFsbGV0UGFyYWNoYWluU3Rha2luZ0RlbGVnYXRpb25SZXF1ZXN0c1NjaGVkdWxlZFJlcXVlc3RbXTtcblxuICAgIGNvbnN0IGN1cnJlbnRSb3VuZCA9IHJvdW5kSW5mby5jdXJyZW50O1xuICAgIGNvbnN0IGlkZW50aXR5ID0gcGFyc2VJZGVudGl0eShpZGVudGl0eUluZm8pO1xuICAgIGxldCBoYXNVbnN0YWtpbmcgPSBmYWxzZTtcbiAgICBsZXQgZGVsZWdhdGlvblN0YXR1czogU3Rha2luZ1N0YXR1cyA9IFN0YWtpbmdTdGF0dXMuTk9UX0VBUk5JTkc7XG5cbiAgICAvLyBwYXJzZSB1bnN0YWtpbmcgaW5mb1xuICAgIGlmIChkZWxlZ2F0aW9uU2NoZWR1bGVkUmVxdWVzdHMpIHtcbiAgICAgIGZvciAoY29uc3Qgc2NoZWR1bGVkUmVxdWVzdCBvZiBkZWxlZ2F0aW9uU2NoZWR1bGVkUmVxdWVzdHMpIHtcbiAgICAgICAgaWYgKHJlZm9ybWF0QWRkcmVzcyhzY2hlZHVsZWRSZXF1ZXN0LmRlbGVnYXRvciwgMCkgPT09IHJlZm9ybWF0QWRkcmVzcyhhZGRyZXNzLCAwKSkgeyAvLyBhZGQgbmV0d29yayBwcmVmaXhcbiAgICAgICAgICBjb25zdCBpc0NsYWltYWJsZSA9IHNjaGVkdWxlZFJlcXVlc3Qud2hlbkV4ZWN1dGFibGUgLSBjdXJyZW50Um91bmQgPCAwO1xuICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0VyYSA9IHNjaGVkdWxlZFJlcXVlc3Qud2hlbkV4ZWN1dGFibGUgLSAoY3VycmVudFJvdW5kICsgMSk7XG4gICAgICAgICAgY29uc3Qgd2FpdGluZ1RpbWUgPSByZW1haW5pbmdFcmEgKiBfU1RBS0lOR19FUkFfTEVOR1RIX01BUFtjaGFpbl07XG4gICAgICAgICAgY29uc3QgY2xhaW1hYmxlID0gT2JqZWN0LnZhbHVlcyhzY2hlZHVsZWRSZXF1ZXN0LmFjdGlvbilbMF07XG5cbiAgICAgICAgICB1bnN0YWtpbmdNYXBbZGVsZWdhdGlvbi5vd25lcl0gPSB7XG4gICAgICAgICAgICBjaGFpbixcbiAgICAgICAgICAgIHN0YXR1czogaXNDbGFpbWFibGUgPyBVbnN0YWtpbmdTdGF0dXMuQ0xBSU1BQkxFIDogVW5zdGFraW5nU3RhdHVzLlVOTE9DS0lORyxcbiAgICAgICAgICAgIHZhbGlkYXRvckFkZHJlc3M6IGRlbGVnYXRpb24ub3duZXIsXG4gICAgICAgICAgICBjbGFpbWFibGU6IGNsYWltYWJsZS50b1N0cmluZygpLFxuICAgICAgICAgICAgd2FpdGluZ1RpbWU6IHdhaXRpbmdUaW1lXG4gICAgICAgICAgfSBhcyBVbnN0YWtpbmdJbmZvO1xuXG4gICAgICAgICAgaGFzVW5zdGFraW5nID0gdHJ1ZTtcbiAgICAgICAgICBicmVhazsgLy8gb25seSBoYW5kbGUgMSBzY2hlZHVsZWRSZXF1ZXN0IHBlciBjb2xsYXRvclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYm5TdGFrZSA9IG5ldyBCTihkZWxlZ2F0aW9uLmFtb3VudCk7XG4gICAgY29uc3QgYm5VbnN0YWtlQmFsYW5jZSA9IHVuc3Rha2luZ01hcFtkZWxlZ2F0aW9uLm93bmVyXSA/IG5ldyBCTih1bnN0YWtpbmdNYXBbZGVsZWdhdGlvbi5vd25lcl0uY2xhaW1hYmxlKSA6IEJOX1pFUk87XG5cbiAgICBjb25zdCBibkFjdGl2ZVN0YWtlID0gYm5TdGFrZS5zdWIoYm5VbnN0YWtlQmFsYW5jZSk7XG5cbiAgICBpZiAoYm5BY3RpdmVTdGFrZS5ndChCTl9aRVJPKSAmJiBibkFjdGl2ZVN0YWtlLmd0ZShuZXcgQk4obWluRGVsZWdhdGlvbikpKSB7XG4gICAgICBkZWxlZ2F0aW9uU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5FQVJOSU5HX1JFV0FSRDtcbiAgICB9XG5cbiAgICBiblRvdGFsQWN0aXZlU3Rha2UgPSBiblRvdGFsQWN0aXZlU3Rha2UuYWRkKGJuQWN0aXZlU3Rha2UpO1xuXG4gICAgbm9taW5hdGlvbkxpc3QucHVzaCh7XG4gICAgICBjaGFpbixcbiAgICAgIHN0YXR1czogZGVsZWdhdGlvblN0YXR1cyxcbiAgICAgIHZhbGlkYXRvckFkZHJlc3M6IGRlbGVnYXRpb24ub3duZXIsXG4gICAgICB2YWxpZGF0b3JJZGVudGl0eTogaWRlbnRpdHksXG4gICAgICBhY3RpdmVTdGFrZTogYm5BY3RpdmVTdGFrZS50b1N0cmluZygpLFxuICAgICAgaGFzVW5zdGFraW5nXG4gICAgfSk7XG4gIH0pKTtcblxuICBhd2FpdCBQcm9taXNlLmFsbChub21pbmF0aW9uTGlzdC5tYXAoYXN5bmMgKG5vbWluYXRpb24pID0+IHtcbiAgICBjb25zdCBfY29sbGF0b3JJbmZvID0gYXdhaXQgY2hhaW5BcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcuY2FuZGlkYXRlSW5mbyhub21pbmF0aW9uLnZhbGlkYXRvckFkZHJlc3MpO1xuICAgIGNvbnN0IGNvbGxhdG9ySW5mbyA9IF9jb2xsYXRvckluZm8udG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhcmFjaGFpblN0YWtpbmdDYW5kaWRhdGVNZXRhZGF0YTtcblxuICAgIG5vbWluYXRpb24udmFsaWRhdG9yTWluU3Rha2UgPSBjb2xsYXRvckluZm8ubG93ZXN0VG9wRGVsZWdhdGlvbkFtb3VudC50b1N0cmluZygpO1xuICB9KSk7XG5cbiAgY29uc3Qgc3Rha2luZ1N0YXR1cyA9IGdldFN0YWtpbmdTdGF0dXNCeU5vbWluYXRpb25zKGJuVG90YWxBY3RpdmVTdGFrZSwgbm9taW5hdGlvbkxpc3QpO1xuXG4gIHJldHVybiB7XG4gICAgY2hhaW4sXG4gICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgIHN0YXR1czogc3Rha2luZ1N0YXR1cyxcbiAgICBhZGRyZXNzOiBhZGRyZXNzLFxuICAgIGFjdGl2ZVN0YWtlOiBiblRvdGFsQWN0aXZlU3Rha2UudG9TdHJpbmcoKSxcblxuICAgIG5vbWluYXRpb25zOiBub21pbmF0aW9uTGlzdCxcbiAgICB1bnN0YWtpbmdzOiBPYmplY3QudmFsdWVzKHVuc3Rha2luZ01hcClcbiAgfSBhcyBOb21pbmF0b3JNZXRhZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhcmFjaGFpbkNvbGxhdG9yc0luZm8gKGNoYWluOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSk6IFByb21pc2U8VmFsaWRhdG9ySW5mb1tdPiB7XG4gIGNvbnN0IGFwaVByb3BzID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG5cbiAgY29uc3QgYWxsQ29sbGF0b3JzOiBWYWxpZGF0b3JJbmZvW10gPSBbXTtcblxuICBjb25zdCBbX2FsbENvbGxhdG9ycywgX2NvbGxhdG9yQ29tbWlzc2lvbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgYXBpUHJvcHMuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcuY2FuZGlkYXRlSW5mby5lbnRyaWVzKCksXG4gICAgYXBpUHJvcHMuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcuY29sbGF0b3JDb21taXNzaW9uKClcbiAgXSk7XG5cbiAgY29uc3QgbWF4RGVsZWdhdGlvblBlckNvbGxhdG9yID0gYXBpUHJvcHMuYXBpLmNvbnN0cy5wYXJhY2hhaW5TdGFraW5nLm1heFRvcERlbGVnYXRpb25zUGVyQ2FuZGlkYXRlLnRvU3RyaW5nKCk7XG4gIGNvbnN0IHJhd0NvbGxhdG9yQ29tbWlzc2lvbiA9IF9jb2xsYXRvckNvbW1pc3Npb24udG9IdW1hbigpIGFzIHN0cmluZztcbiAgY29uc3QgY29sbGF0b3JDb21taXNzaW9uID0gcGFyc2VGbG9hdChyYXdDb2xsYXRvckNvbW1pc3Npb24uc3BsaXQoJyUnKVswXSk7XG5cbiAgZm9yIChjb25zdCBjb2xsYXRvciBvZiBfYWxsQ29sbGF0b3JzKSB7XG4gICAgY29uc3QgX2NvbGxhdG9yQWRkcmVzcyA9IGNvbGxhdG9yWzBdLnRvSHVtYW4oKSBhcyBzdHJpbmdbXTtcbiAgICBjb25zdCBjb2xsYXRvckFkZHJlc3MgPSBfY29sbGF0b3JBZGRyZXNzWzBdO1xuICAgIGNvbnN0IGNvbGxhdG9ySW5mbyA9IGNvbGxhdG9yWzFdLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBQYXJhY2hhaW5TdGFraW5nQ2FuZGlkYXRlTWV0YWRhdGE7XG5cbiAgICBjb25zdCBiblRvdGFsU3Rha2UgPSBuZXcgQk4oY29sbGF0b3JJbmZvLnRvdGFsQ291bnRlZCk7XG4gICAgY29uc3QgYm5Pd25TdGFrZSA9IG5ldyBCTihjb2xsYXRvckluZm8uYm9uZCk7XG4gICAgY29uc3QgYm5PdGhlclN0YWtlID0gYm5Ub3RhbFN0YWtlLnN1Yihibk93blN0YWtlKTtcbiAgICBjb25zdCBibk1pbkJvbmQgPSBuZXcgQk4oY29sbGF0b3JJbmZvLmxvd2VzdFRvcERlbGVnYXRpb25BbW91bnQpO1xuXG4gICAgYWxsQ29sbGF0b3JzLnB1c2goe1xuICAgICAgY29tbWlzc2lvbjogMCxcbiAgICAgIGV4cGVjdGVkUmV0dXJuOiAwLFxuICAgICAgYWRkcmVzczogY29sbGF0b3JBZGRyZXNzLFxuICAgICAgdG90YWxTdGFrZTogYm5Ub3RhbFN0YWtlLnRvU3RyaW5nKCksXG4gICAgICBvd25TdGFrZTogYm5Pd25TdGFrZS50b1N0cmluZygpLFxuICAgICAgb3RoZXJTdGFrZTogYm5PdGhlclN0YWtlLnRvU3RyaW5nKCksXG4gICAgICBub21pbmF0b3JDb3VudDogY29sbGF0b3JJbmZvLmRlbGVnYXRpb25Db3VudCxcbiAgICAgIGJsb2NrZWQ6IGZhbHNlLFxuICAgICAgaXNWZXJpZmllZDogZmFsc2UsXG4gICAgICBtaW5Cb25kOiBibk1pbkJvbmQudG9TdHJpbmcoKSxcbiAgICAgIGNoYWluLFxuICAgICAgaXNDcm93ZGVkOiBwYXJzZUludChtYXhEZWxlZ2F0aW9uUGVyQ29sbGF0b3IpID4gMFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgZXh0cmFJbmZvTWFwOiBSZWNvcmQ8c3RyaW5nLCBDb2xsYXRvckV4dHJhSW5mbz4gPSB7fTtcblxuICBhd2FpdCBQcm9taXNlLmFsbChhbGxDb2xsYXRvcnMubWFwKGFzeW5jIChjb2xsYXRvcikgPT4ge1xuICAgIGNvbnN0IFtfaW5mbywgX2lkZW50aXR5XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGFwaVByb3BzLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLmNhbmRpZGF0ZUluZm8oY29sbGF0b3IuYWRkcmVzcyksXG4gICAgICBhcGlQcm9wcy5hcGkucXVlcnk/LmlkZW50aXR5Py5pZGVudGl0eU9mKGNvbGxhdG9yLmFkZHJlc3MpIC8vIHNvbWUgY2hhaW5zIG1pZ2h0IG5vdCBoYXZlIGlkZW50aXR5IHBhbGxldFxuICAgIF0pO1xuXG4gICAgY29uc3QgcmF3SW5mbyA9IF9pbmZvLnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGNvbnN0IHJhd0lkZW50aXR5ID0gX2lkZW50aXR5ID8gX2lkZW50aXR5LnRvSHVtYW4oKSBhcyB1bmtub3duIGFzIFBhbGxldElkZW50aXR5UmVnaXN0cmF0aW9uIDogbnVsbDtcblxuICAgIGNvbnN0IGFjdGl2ZSA9IHJhd0luZm8/LnN0YXR1cyA9PT0gJ0FjdGl2ZSc7XG5cbiAgICBsZXQgaXNSZWFzb25hYmxlID0gZmFsc2U7XG4gICAgbGV0IGlkZW50aXR5O1xuXG4gICAgaWYgKHJhd0lkZW50aXR5ICE9PSBudWxsKSB7XG4gICAgICAvLyBDaGVjayBpZiBpZGVudGl0eSBpcyBldGggYWRkcmVzc1xuICAgICAgaXNSZWFzb25hYmxlID0gcmF3SWRlbnRpdHkuanVkZ2VtZW50cy5sZW5ndGggPiAwO1xuICAgICAgaWRlbnRpdHkgPSBwYXJzZUlkZW50aXR5KHJhd0lkZW50aXR5KTtcbiAgICB9XG5cbiAgICBleHRyYUluZm9NYXBbY29sbGF0b3IuYWRkcmVzc10gPSB7XG4gICAgICBpZGVudGl0eSxcbiAgICAgIGlzVmVyaWZpZWQ6IGlzUmVhc29uYWJsZSxcbiAgICAgIGFjdGl2ZVxuICAgIH0gYXMgQ29sbGF0b3JFeHRyYUluZm87XG4gIH0pKTtcblxuICBmb3IgKGNvbnN0IHZhbGlkYXRvciBvZiBhbGxDb2xsYXRvcnMpIHtcbiAgICB2YWxpZGF0b3IuYmxvY2tlZCA9ICFleHRyYUluZm9NYXBbdmFsaWRhdG9yLmFkZHJlc3NdLmFjdGl2ZTtcbiAgICB2YWxpZGF0b3IuaWRlbnRpdHkgPSBleHRyYUluZm9NYXBbdmFsaWRhdG9yLmFkZHJlc3NdLmlkZW50aXR5O1xuICAgIHZhbGlkYXRvci5pc1ZlcmlmaWVkID0gZXh0cmFJbmZvTWFwW3ZhbGlkYXRvci5hZGRyZXNzXS5pc1ZlcmlmaWVkO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB2YWxpZGF0b3IuY29tbWlzc2lvbiA9IGNvbGxhdG9yQ29tbWlzc2lvbjtcbiAgfVxuXG4gIHJldHVybiBhbGxDb2xsYXRvcnM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXJhQm9uZGluZ0V4dHJpbnNpYyAoY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGFtb3VudDogc3RyaW5nLCBzZWxlY3RlZENvbGxhdG9ySW5mbzogVmFsaWRhdG9ySW5mbywgbm9taW5hdG9yTWV0YWRhdGE/OiBOb21pbmF0b3JNZXRhZGF0YSkge1xuICBjb25zdCBhcGlQcm9taXNlID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG4gIGNvbnN0IGJpbmFyeUFtb3VudCA9IG5ldyBCTihhbW91bnQpO1xuXG4gIGlmICghbm9taW5hdG9yTWV0YWRhdGEpIHtcbiAgICByZXR1cm4gYXBpUHJvbWlzZS5hcGkudHgucGFyYWNoYWluU3Rha2luZy5kZWxlZ2F0ZShzZWxlY3RlZENvbGxhdG9ySW5mby5hZGRyZXNzLCBiaW5hcnlBbW91bnQsIG5ldyBCTihzZWxlY3RlZENvbGxhdG9ySW5mby5ub21pbmF0b3JDb3VudCksIDApO1xuICB9XG5cbiAgY29uc3QgeyBib25kZWRWYWxpZGF0b3JzLCBub21pbmF0aW9uQ291bnQgfSA9IGdldEJvbmRlZFZhbGlkYXRvcnMobm9taW5hdG9yTWV0YWRhdGEubm9taW5hdGlvbnMpO1xuICBjb25zdCBwYXJzZWRTZWxlY3RlZENvbGxhdG9yQWRkcmVzcyA9IHJlZm9ybWF0QWRkcmVzcyhzZWxlY3RlZENvbGxhdG9ySW5mby5hZGRyZXNzLCAwKTtcblxuICBpZiAoIWJvbmRlZFZhbGlkYXRvcnMuaW5jbHVkZXMocGFyc2VkU2VsZWN0ZWRDb2xsYXRvckFkZHJlc3MpKSB7XG4gICAgcmV0dXJuIGFwaVByb21pc2UuYXBpLnR4LnBhcmFjaGFpblN0YWtpbmcuZGVsZWdhdGUoc2VsZWN0ZWRDb2xsYXRvckluZm8uYWRkcmVzcywgYmluYXJ5QW1vdW50LCBuZXcgQk4oc2VsZWN0ZWRDb2xsYXRvckluZm8ubm9taW5hdG9yQ291bnQpLCBub21pbmF0aW9uQ291bnQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhcGlQcm9taXNlLmFwaS50eC5wYXJhY2hhaW5TdGFraW5nLmRlbGVnYXRvckJvbmRNb3JlKHNlbGVjdGVkQ29sbGF0b3JJbmZvLmFkZHJlc3MsIGJpbmFyeUFtb3VudCk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhcmFVbmJvbmRpbmdFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgYW1vdW50OiBzdHJpbmcsIG5vbWluYXRvck1ldGFkYXRhOiBOb21pbmF0b3JNZXRhZGF0YSwgc2VsZWN0ZWRWYWxpZGF0b3I6IHN0cmluZykge1xuICBjb25zdCBhcGlQcm9taXNlID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG4gIGNvbnN0IGJpbmFyeUFtb3VudCA9IG5ldyBCTihhbW91bnQpO1xuXG4gIGNvbnN0IHVuc3Rha2VBbGwgPSBpc1Vuc3Rha2VBbGwoc2VsZWN0ZWRWYWxpZGF0b3IsIG5vbWluYXRvck1ldGFkYXRhLm5vbWluYXRpb25zLCBhbW91bnQpO1xuXG4gIGlmICghdW5zdGFrZUFsbCkge1xuICAgIHJldHVybiBhcGlQcm9taXNlLmFwaS50eC5wYXJhY2hhaW5TdGFraW5nLnNjaGVkdWxlRGVsZWdhdG9yQm9uZExlc3Moc2VsZWN0ZWRWYWxpZGF0b3IsIGJpbmFyeUFtb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFwaVByb21pc2UuYXBpLnR4LnBhcmFjaGFpblN0YWtpbmcuc2NoZWR1bGVSZXZva2VEZWxlZ2F0aW9uKHNlbGVjdGVkVmFsaWRhdG9yKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFyYVdpdGhkcmF3YWxFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgYWRkcmVzczogc3RyaW5nLCBjb2xsYXRvckFkZHJlc3M6IHN0cmluZykge1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuXG4gIHJldHVybiBjaGFpbkFwaS5hcGkudHgucGFyYWNoYWluU3Rha2luZy5leGVjdXRlRGVsZWdhdGlvblJlcXVlc3QoYWRkcmVzcywgY29sbGF0b3JBZGRyZXNzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFR1cmluZ0NvbXBvdW5kRXh0cmluc2ljIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGFkZHJlc3M6IHN0cmluZywgY29sbGF0b3JBZGRyZXNzOiBzdHJpbmcsIGFjY291bnRNaW5pbXVtOiBzdHJpbmcsIGJvbmRlZEFtb3VudDogc3RyaW5nKSB7XG4gIGNvbnN0IGFwaVByb21pc2UgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcblxuICAvLyBAdHMtaWdub3JlXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICBjb25zdCBfb3B0aW1hbENvbXBvdW5kaW5nID0gYXdhaXQgYXBpUHJvbWlzZS5hcGkucnBjLmF1dG9tYXRpb25UaW1lLmNhbGN1bGF0ZU9wdGltYWxBdXRvc3Rha2luZyhib25kZWRBbW91bnQsIGNvbGxhdG9yQWRkcmVzcyk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgY29uc3Qgb3B0aW1hbENvbXBvdW5kaW5nID0gX29wdGltYWxDb21wb3VuZGluZy50b0h1bWFuKCkgYXMgVHVyaW5nT3B0aW1hbENvbXBvdW5kRm9ybWF0O1xuICBjb25zdCBjb21wb3VuZGluZ1BlcmlvZCA9IHBhcnNlSW50KG9wdGltYWxDb21wb3VuZGluZy5wZXJpb2QpOyAvLyBpbiBkYXlzXG5cbiAgY29uc3QgZnJlcXVlbmN5ID0gY29tcG91bmRpbmdQZXJpb2QgKiAyNCAqIDYwICogNjA7IC8vIGluIHNlY29uZHNcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKTtcblxuICB0aW1lc3RhbXAuc2V0RGF0ZSh0aW1lc3RhbXAuZ2V0RGF0ZSgpICsgY29tcG91bmRpbmdQZXJpb2QpO1xuICB0aW1lc3RhbXAuc2V0SG91cnModGltZXN0YW1wLmdldEhvdXJzKCkgKyBNYXRoLnJvdW5kKHRpbWVzdGFtcC5nZXRNaW51dGVzKCkgLyA2MCkpO1xuICB0aW1lc3RhbXAuc2V0TWludXRlcygwLCAwLCAwKTtcblxuICBjb25zdCBzdGFydFRpbWUgPSBNYXRoLmZsb29yKHRpbWVzdGFtcC52YWx1ZU9mKCkgLyAxMDAwKTsgLy8gbXVzdCBiZSBpbiBzZWNvbmRzXG5cbiAgcmV0dXJuIGFwaVByb21pc2UuYXBpLnR4LmF1dG9tYXRpb25UaW1lLnNjaGVkdWxlQXV0b0NvbXBvdW5kRGVsZWdhdGVkU3Rha2VUYXNrKHN0YXJ0VGltZS50b1N0cmluZygpLCBmcmVxdWVuY3kudG9TdHJpbmcoKSwgY29sbGF0b3JBZGRyZXNzLCBhY2NvdW50TWluaW11bSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUdXJpbmdDYW5jZWxDb21wb3VuZGluZ0V4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCB0YXNrSWQ6IHN0cmluZykge1xuICBjb25zdCBhcGlQcm9taXNlID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG5cbiAgcmV0dXJuIGFwaVByb21pc2UuYXBpLnR4LmF1dG9tYXRpb25UaW1lLmNhbmNlbFRhc2sodGFza0lkKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhcmFDYW5jZWxXaXRoZHJhd2FsRXh0cmluc2ljIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIHNlbGVjdGVkVW5zdGFraW5nOiBVbnN0YWtpbmdJbmZvKSB7XG4gIGNvbnN0IGNoYWluQXBpID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG5cbiAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC5wYXJhY2hhaW5TdGFraW5nLmNhbmNlbERlbGVnYXRpb25SZXF1ZXN0KHNlbGVjdGVkVW5zdGFraW5nLnZhbGlkYXRvckFkZHJlc3MpO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25FcnJvciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9lcnJvcnMvVHJhbnNhY3Rpb25FcnJvcic7XG5pbXBvcnQgeyBDaGFpblN0YWtpbmdNZXRhZGF0YSwgTm9taW5hdGlvbkluZm8sIE5vbWluYXRpb25Qb29sSW5mbywgTm9taW5hdG9yTWV0YWRhdGEsIFBhbGxldE5vbWluYXRpb25Qb29sc0JvbmRlZFBvb2xJbm5lciwgU3Rha2luZ1N0YXR1cywgU3Rha2luZ1R4RXJyb3JUeXBlLCBTdGFraW5nVHlwZSwgVW5zdGFraW5nSW5mbywgVW5zdGFraW5nU3RhdHVzLCBWYWxpZGF0b3JJbmZvIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBjYWxjdWxhdGVBbGVwaFplcm9WYWxpZGF0b3JSZXR1cm4sIGNhbGN1bGF0ZUNoYWluU3Rha2VkUmV0dXJuLCBjYWxjdWxhdGVJbmZsYXRpb24sIGNhbGN1bGF0ZVRlcm5vYVZhbGlkYXRvclJldHVybiwgY2FsY3VsYXRlVmFsaWRhdG9yU3Rha2VkUmV0dXJuLCBnZXRDb21taXNzaW9uLCBnZXRFeGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UsIGdldE1heFZhbGlkYXRvckVycm9yTWVzc2FnZSwgZ2V0TWluU3Rha2VFcnJvck1lc3NhZ2UsIFBhbGxldElkZW50aXR5UmVnaXN0cmF0aW9uLCBQYWxsZXROb21pbmF0aW9uUG9vbHNQb29sTWVtYmVyLCBQYWxsZXRTdGFraW5nRXhwb3N1cmUsIHBhcnNlSWRlbnRpdHksIHBhcnNlUG9vbFN0YXNoQWRkcmVzcywgVGVybm9hU3Rha2luZ1Jld2FyZHNTdGFraW5nUmV3YXJkc0RhdGEsIHRyYW5zZm9ybVBvb2xOYW1lLCBWYWxpZGF0b3JFeHRyYUluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3N0YWtpbmcvYm9uZGluZy91dGlscyc7XG5pbXBvcnQgeyBfU1RBS0lOR19DSEFJTl9HUk9VUCwgX1NUQUtJTkdfRVJBX0xFTkdUSF9NQVAgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgX2dldENoYWluU3Vic3RyYXRlQWRkcmVzc1ByZWZpeCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5pbXBvcnQgeyByZWZvcm1hdEFkZHJlc3MgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuaW1wb3J0IHsgQnl0ZXMgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMnO1xuaW1wb3J0IHsgQ29kZWMgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMvdHlwZXMnO1xuaW1wb3J0IHsgQk4sIEJOX1pFUk8gfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5pbXBvcnQgeyBpc0V0aGVyZXVtQWRkcmVzcyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsLWNyeXB0byc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFsbGV0U3Rha2luZ05vbWluYXRpb25zIHtcbiAgdGFyZ2V0czogc3RyaW5nW10sXG4gIHN1Ym1pdHRlZEluOiBudW1iZXIsXG4gIHN1cHByZXNzZWQ6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBVbmxvY2tpbmdDaHVuayB7XG4gIHZhbHVlOiBudW1iZXIsXG4gIGVyYTogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFsbGV0U3Rha2luZ1N0YWtpbmdMZWRnZXIge1xuICBzdGFzaDogc3RyaW5nLFxuICB0b3RhbDogbnVtYmVyLFxuICBhY3RpdmU6IG51bWJlcixcbiAgdW5sb2NraW5nOiBVbmxvY2tpbmdDaHVua1tdLFxuICBjbGFpbWVkUmV3YXJkczogbnVtYmVyW11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUmVsYXlVbmJvbmRpbmdDb25kaXRpb24gKGFtb3VudDogc3RyaW5nLCBjaGFpblN0YWtpbmdNZXRhZGF0YTogQ2hhaW5TdGFraW5nTWV0YWRhdGEsIG5vbWluYXRvck1ldGFkYXRhOiBOb21pbmF0b3JNZXRhZGF0YSk6IFRyYW5zYWN0aW9uRXJyb3JbXSB7XG4gIGNvbnN0IGVycm9yczogVHJhbnNhY3Rpb25FcnJvcltdID0gW107XG4gIGNvbnN0IGJuQWN0aXZlU3Rha2UgPSBuZXcgQk4obm9taW5hdG9yTWV0YWRhdGEuYWN0aXZlU3Rha2UpO1xuICBjb25zdCBiblJlbWFpbmluZ1N0YWtlID0gYm5BY3RpdmVTdGFrZS5zdWIobmV3IEJOKGFtb3VudCkpO1xuXG4gIGNvbnN0IG1pblN0YWtlID0gbmV3IEJOKGNoYWluU3Rha2luZ01ldGFkYXRhLm1pbkpvaW5Ob21pbmF0aW9uUG9vbCB8fCAnMCcpO1xuXG4gIGlmICghKGJuUmVtYWluaW5nU3Rha2UuaXNaZXJvKCkgfHwgYm5SZW1haW5pbmdTdGFrZS5ndGUobWluU3Rha2UpKSkge1xuICAgIGVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKFN0YWtpbmdUeEVycm9yVHlwZS5JTlZBTElEX0FDVElWRV9TVEFLRSkpO1xuICB9XG5cbiAgaWYgKG5vbWluYXRvck1ldGFkYXRhLnVuc3Rha2luZ3MubGVuZ3RoID4gY2hhaW5TdGFraW5nTWV0YWRhdGEubWF4V2l0aGRyYXdhbFJlcXVlc3RQZXJWYWxpZGF0b3IpIHtcbiAgICBlcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihTdGFraW5nVHhFcnJvclR5cGUuRVhDRUVEX01BWF9VTlNUQUtJTkcsIHQoJ1lvdSBjYW5ub3QgdW5zdGFrZSBtb3JlIHRoYW4ge3tudW1iZXJ9fSB0aW1lcycsIHsgcmVwbGFjZTogeyBudW1iZXI6IGNoYWluU3Rha2luZ01ldGFkYXRhLm1heFdpdGhkcmF3YWxSZXF1ZXN0UGVyVmFsaWRhdG9yIH0gfSkpKTtcbiAgfVxuXG4gIHJldHVybiBlcnJvcnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBvb2xCb25kaW5nQ29uZGl0aW9uIChjaGFpbkluZm86IF9DaGFpbkluZm8sIGFtb3VudDogc3RyaW5nLCBzZWxlY3RlZFBvb2w6IE5vbWluYXRpb25Qb29sSW5mbywgYWRkcmVzczogc3RyaW5nLCBjaGFpblN0YWtpbmdNZXRhZGF0YTogQ2hhaW5TdGFraW5nTWV0YWRhdGEsIG5vbWluYXRvck1ldGFkYXRhPzogTm9taW5hdG9yTWV0YWRhdGEpOiBUcmFuc2FjdGlvbkVycm9yW10ge1xuICAvLyBjYW5ub3Qgc3Rha2Ugd2hlbiB1bnN0YWtlIGFsbFxuICAvLyBhbW91bnQgPj0gbWluIHN0YWtlXG4gIGNvbnN0IGVycm9yczogVHJhbnNhY3Rpb25FcnJvcltdID0gW107XG4gIGxldCBiblRvdGFsU3Rha2UgPSBuZXcgQk4oYW1vdW50KTtcbiAgY29uc3QgYm5NaW5TdGFrZSA9IG5ldyBCTihjaGFpblN0YWtpbmdNZXRhZGF0YS5taW5Kb2luTm9taW5hdGlvblBvb2wgfHwgJzAnKTtcbiAgY29uc3QgbWluU3Rha2VFcnJvck1lc3NhZ2UgPSBnZXRNaW5TdGFrZUVycm9yTWVzc2FnZShjaGFpbkluZm8sIGJuTWluU3Rha2UpO1xuICBjb25zdCBleGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UgPSBnZXRFeGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UoY2hhaW5JbmZvLnNsdWcsIHRydWUpO1xuXG4gIGlmIChzZWxlY3RlZFBvb2wuc3RhdGUgIT09ICdPcGVuJykge1xuICAgIGVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKFN0YWtpbmdUeEVycm9yVHlwZS5JTkFDVElWRV9OT01JTkFUSU9OX1BPT0wpKTtcbiAgfVxuXG4gIGlmIChub21pbmF0b3JNZXRhZGF0YSkge1xuICAgIGNvbnN0IGJuQ3VycmVudEFjdGl2ZVN0YWtlID0gbmV3IEJOKG5vbWluYXRvck1ldGFkYXRhLmFjdGl2ZVN0YWtlKTtcblxuICAgIGJuVG90YWxTdGFrZSA9IGJuVG90YWxTdGFrZS5hZGQoYm5DdXJyZW50QWN0aXZlU3Rha2UpO1xuXG4gICAgaWYgKG5vbWluYXRvck1ldGFkYXRhLnVuc3Rha2luZ3MubGVuZ3RoID4gMCAmJiBibkN1cnJlbnRBY3RpdmVTdGFrZS5pc1plcm8oKSkge1xuICAgICAgZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoU3Rha2luZ1R4RXJyb3JUeXBlLkVYSVNUX1VOU1RBS0lOR19SRVFVRVNULCBleGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UpKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWJuVG90YWxTdGFrZS5ndGUoYm5NaW5TdGFrZSkpIHtcbiAgICBlcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihTdGFraW5nVHhFcnJvclR5cGUuTk9UX0VOT1VHSF9NSU5fU1RBS0UsIG1pblN0YWtlRXJyb3JNZXNzYWdlKSk7XG4gIH1cblxuICByZXR1cm4gZXJyb3JzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVSZWxheUJvbmRpbmdDb25kaXRpb24gKGNoYWluSW5mbzogX0NoYWluSW5mbywgYW1vdW50OiBzdHJpbmcsIHNlbGVjdGVkVmFsaWRhdG9yczogVmFsaWRhdG9ySW5mb1tdLCBhZGRyZXNzOiBzdHJpbmcsIGNoYWluU3Rha2luZ01ldGFkYXRhOiBDaGFpblN0YWtpbmdNZXRhZGF0YSwgbm9taW5hdG9yTWV0YWRhdGE/OiBOb21pbmF0b3JNZXRhZGF0YSkge1xuICBjb25zdCBlcnJvcnM6IFRyYW5zYWN0aW9uRXJyb3JbXSA9IFtdO1xuICBsZXQgYm5Ub3RhbFN0YWtlID0gbmV3IEJOKGFtb3VudCk7XG4gIGNvbnN0IGJuTWluU3Rha2UgPSBuZXcgQk4oY2hhaW5TdGFraW5nTWV0YWRhdGEubWluU3Rha2UpO1xuICBjb25zdCBtaW5TdGFrZUVycm9yTWVzc2FnZSA9IGdldE1pblN0YWtlRXJyb3JNZXNzYWdlKGNoYWluSW5mbywgYm5NaW5TdGFrZSk7XG4gIGNvbnN0IG1heFZhbGlkYXRvckVycm9yTWVzc2FnZSA9IGdldE1heFZhbGlkYXRvckVycm9yTWVzc2FnZShjaGFpbkluZm8sIGNoYWluU3Rha2luZ01ldGFkYXRhLm1heFZhbGlkYXRvclBlck5vbWluYXRvcik7XG5cbiAgaWYgKCFub21pbmF0b3JNZXRhZGF0YSB8fCBub21pbmF0b3JNZXRhZGF0YS5zdGF0dXMgPT09IFN0YWtpbmdTdGF0dXMuTk9UX1NUQUtJTkcpIHtcbiAgICBpZiAoIWJuVG90YWxTdGFrZS5ndGUoYm5NaW5TdGFrZSkpIHtcbiAgICAgIGVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKFN0YWtpbmdUeEVycm9yVHlwZS5OT1RfRU5PVUdIX01JTl9TVEFLRSwgbWluU3Rha2VFcnJvck1lc3NhZ2UpKTtcbiAgICB9XG5cbiAgICBpZiAoc2VsZWN0ZWRWYWxpZGF0b3JzLmxlbmd0aCA+IGNoYWluU3Rha2luZ01ldGFkYXRhLm1heFZhbGlkYXRvclBlck5vbWluYXRvcikge1xuICAgICAgZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoU3Rha2luZ1R4RXJyb3JUeXBlLkVYQ0VFRF9NQVhfTk9NSU5BVElPTlMsIG1heFZhbGlkYXRvckVycm9yTWVzc2FnZSkpO1xuICAgIH1cblxuICAgIHJldHVybiBlcnJvcnM7XG4gIH1cblxuICBjb25zdCBibkN1cnJlbnRBY3RpdmVTdGFrZSA9IG5ldyBCTihub21pbmF0b3JNZXRhZGF0YS5hY3RpdmVTdGFrZSk7XG5cbiAgYm5Ub3RhbFN0YWtlID0gYm5Ub3RhbFN0YWtlLmFkZChibkN1cnJlbnRBY3RpdmVTdGFrZSk7XG5cbiAgaWYgKCFiblRvdGFsU3Rha2UuZ3RlKGJuTWluU3Rha2UpKSB7XG4gICAgZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoU3Rha2luZ1R4RXJyb3JUeXBlLk5PVF9FTk9VR0hfTUlOX1NUQUtFLCBtaW5TdGFrZUVycm9yTWVzc2FnZSkpO1xuICB9XG5cbiAgaWYgKHNlbGVjdGVkVmFsaWRhdG9ycy5sZW5ndGggPiBjaGFpblN0YWtpbmdNZXRhZGF0YS5tYXhWYWxpZGF0b3JQZXJOb21pbmF0b3IpIHtcbiAgICBlcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihTdGFraW5nVHhFcnJvclR5cGUuRVhDRUVEX01BWF9OT01JTkFUSU9OUywgbWF4VmFsaWRhdG9yRXJyb3JNZXNzYWdlKSk7XG4gIH1cblxuICByZXR1cm4gZXJyb3JzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3Vic2NyaWJlUmVsYXlDaGFpblN0YWtpbmdNZXRhZGF0YSAoY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGNhbGxiYWNrOiAoY2hhaW46IHN0cmluZywgcnM6IENoYWluU3Rha2luZ01ldGFkYXRhKSA9PiB2b2lkKSB7XG4gIHJldHVybiBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LnN0YWtpbmcuY3VycmVudEVyYShhc3luYyAoX2N1cnJlbnRFcmE6IENvZGVjKSA9PiB7XG4gICAgY29uc3QgY3VycmVudEVyYSA9IF9jdXJyZW50RXJhLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgbWF4Tm9taW5hdGlvbnMgPSBzdWJzdHJhdGVBcGkuYXBpLmNvbnN0cy5zdGFraW5nLm1heE5vbWluYXRpb25zLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgbWF4VW5sb2NraW5nQ2h1bmtzID0gc3Vic3RyYXRlQXBpLmFwaS5jb25zdHMuc3Rha2luZy5tYXhVbmxvY2tpbmdDaHVua3MudG9TdHJpbmcoKTtcbiAgICBjb25zdCB1bmxvY2tpbmdFcmFzID0gc3Vic3RyYXRlQXBpLmFwaS5jb25zdHMuc3Rha2luZy5ib25kaW5nRHVyYXRpb24udG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IFtfdG90YWxFcmFTdGFrZSwgX3RvdGFsSXNzdWFuY2UsIF9hdWN0aW9uQ291bnRlciwgX21pbk5vbWluYXRvckJvbmQsIF9taW5Qb29sSm9pbiwgX21pbmltdW1BY3RpdmVTdGFrZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LnN0YWtpbmcuZXJhc1RvdGFsU3Rha2UocGFyc2VJbnQoY3VycmVudEVyYSkpLFxuICAgICAgc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5iYWxhbmNlcy50b3RhbElzc3VhbmNlKCksXG4gICAgICBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LmF1Y3Rpb25zPy5hdWN0aW9uQ291bnRlcigpLFxuICAgICAgc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5zdGFraW5nLm1pbk5vbWluYXRvckJvbmQoKSxcbiAgICAgIHN1YnN0cmF0ZUFwaS5hcGkucXVlcnk/Lm5vbWluYXRpb25Qb29scz8ubWluSm9pbkJvbmQoKSxcbiAgICAgIHN1YnN0cmF0ZUFwaS5hcGkucXVlcnk/LnN0YWtpbmc/Lm1pbmltdW1BY3RpdmVTdGFrZSAmJiBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5Py5zdGFraW5nPy5taW5pbXVtQWN0aXZlU3Rha2UoKVxuICAgIF0pO1xuXG4gICAgY29uc3QgbWluQWN0aXZlU3Rha2UgPSBfbWluaW11bUFjdGl2ZVN0YWtlPy50b1N0cmluZygpIHx8ICcwJztcbiAgICBjb25zdCBtaW5Ob21pbmF0b3JCb25kID0gX21pbk5vbWluYXRvckJvbmQudG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IGJuTWluQWN0aXZlU3Rha2UgPSBuZXcgQk4obWluQWN0aXZlU3Rha2UpO1xuICAgIGNvbnN0IGJuTWluTm9taW5hdG9yQm9uZCA9IG5ldyBCTihtaW5Ob21pbmF0b3JCb25kKTtcblxuICAgIGNvbnN0IG1pblN0YWtlID0gYm5NaW5BY3RpdmVTdGFrZS5ndChibk1pbk5vbWluYXRvckJvbmQpID8gYm5NaW5BY3RpdmVTdGFrZSA6IGJuTWluTm9taW5hdG9yQm9uZDtcbiAgICBjb25zdCByYXdUb3RhbEVyYVN0YWtlID0gX3RvdGFsRXJhU3Rha2UudG9TdHJpbmcoKTtcbiAgICBjb25zdCByYXdUb3RhbElzc3VhbmNlID0gX3RvdGFsSXNzdWFuY2UudG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IG51bUF1Y3Rpb25zID0gX2F1Y3Rpb25Db3VudGVyID8gX2F1Y3Rpb25Db3VudGVyLnRvSHVtYW4oKSBhcyBudW1iZXIgOiAwO1xuICAgIGNvbnN0IGJuVG90YWxFcmFTdGFrZSA9IG5ldyBCTihyYXdUb3RhbEVyYVN0YWtlKTtcbiAgICBjb25zdCBiblRvdGFsSXNzdWFuY2UgPSBuZXcgQk4ocmF3VG90YWxJc3N1YW5jZSk7XG5cbiAgICBjb25zdCBpbmZsYXRpb24gPSBjYWxjdWxhdGVJbmZsYXRpb24oYm5Ub3RhbEVyYVN0YWtlLCBiblRvdGFsSXNzdWFuY2UsIG51bUF1Y3Rpb25zLCBjaGFpbkluZm8uc2x1Zyk7XG4gICAgY29uc3QgZXhwZWN0ZWRSZXR1cm4gPSBjYWxjdWxhdGVDaGFpblN0YWtlZFJldHVybihpbmZsYXRpb24sIGJuVG90YWxFcmFTdGFrZSwgYm5Ub3RhbElzc3VhbmNlLCBjaGFpbkluZm8uc2x1Zyk7XG4gICAgY29uc3QgbWluUG9vbEpvaW4gPSBfbWluUG9vbEpvaW4/LnRvU3RyaW5nKCkgfHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVubG9ja2luZ1BlcmlvZCA9IHBhcnNlSW50KHVubG9ja2luZ0VyYXMpICogKF9TVEFLSU5HX0VSQV9MRU5HVEhfTUFQW2NoYWluSW5mby5zbHVnXSB8fCBfU1RBS0lOR19FUkFfTEVOR1RIX01BUC5kZWZhdWx0KTsgLy8gaW4gaG91cnNcblxuICAgIGNhbGxiYWNrKGNoYWluSW5mby5zbHVnLCB7XG4gICAgICBjaGFpbjogY2hhaW5JbmZvLnNsdWcsXG4gICAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgICBleHBlY3RlZFJldHVybjogIV9TVEFLSU5HX0NIQUlOX0dST1VQLnRlcm5vYS5pbmNsdWRlcyhjaGFpbkluZm8uc2x1ZykgPyBleHBlY3RlZFJldHVybiA6IHVuZGVmaW5lZCwgLy8gaW4gJSwgYW5udWFsbHlcbiAgICAgIGluZmxhdGlvbixcbiAgICAgIGVyYTogcGFyc2VJbnQoY3VycmVudEVyYSksXG4gICAgICBtaW5TdGFrZTogbWluU3Rha2UudG9TdHJpbmcoKSxcbiAgICAgIG1heFZhbGlkYXRvclBlck5vbWluYXRvcjogcGFyc2VJbnQobWF4Tm9taW5hdGlvbnMpLFxuICAgICAgbWF4V2l0aGRyYXdhbFJlcXVlc3RQZXJWYWxpZGF0b3I6IHBhcnNlSW50KG1heFVubG9ja2luZ0NodW5rcyksXG4gICAgICBhbGxvd0NhbmNlbFVuc3Rha2luZzogdHJ1ZSxcbiAgICAgIHVuc3Rha2luZ1BlcmlvZDogdW5sb2NraW5nUGVyaW9kLFxuICAgICAgbWluSm9pbk5vbWluYXRpb25Qb29sOiBtaW5Qb29sSm9pblxuICAgIH0pO1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlbGF5Q2hhaW5TdGFraW5nTWV0YWRhdGEgKGNoYWluSW5mbzogX0NoYWluSW5mbywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpKTogUHJvbWlzZTxDaGFpblN0YWtpbmdNZXRhZGF0YT4ge1xuICBjb25zdCBjaGFpbiA9IGNoYWluSW5mby5zbHVnO1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuICBjb25zdCBfZXJhID0gYXdhaXQgY2hhaW5BcGkuYXBpLnF1ZXJ5LnN0YWtpbmcuY3VycmVudEVyYSgpO1xuICBjb25zdCBjdXJyZW50RXJhID0gX2VyYS50b1N0cmluZygpO1xuICBjb25zdCBtYXhOb21pbmF0aW9ucyA9IGNoYWluQXBpLmFwaS5jb25zdHMuc3Rha2luZy5tYXhOb21pbmF0aW9ucy50b1N0cmluZygpO1xuICBjb25zdCBtYXhVbmxvY2tpbmdDaHVua3MgPSBjaGFpbkFwaS5hcGkuY29uc3RzLnN0YWtpbmcubWF4VW5sb2NraW5nQ2h1bmtzLnRvU3RyaW5nKCk7XG4gIGNvbnN0IHVubG9ja2luZ0VyYXMgPSBjaGFpbkFwaS5hcGkuY29uc3RzLnN0YWtpbmcuYm9uZGluZ0R1cmF0aW9uLnRvU3RyaW5nKCk7XG5cbiAgY29uc3QgW190b3RhbEVyYVN0YWtlLCBfdG90YWxJc3N1YW5jZSwgX2F1Y3Rpb25Db3VudGVyLCBfbWluaW11bUFjdGl2ZVN0YWtlLCBfbWluTm9taW5hdG9yQm9uZCwgX21pblBvb2xKb2luLCBfZXJhU3Rha2Vyc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgY2hhaW5BcGkuYXBpLnF1ZXJ5LnN0YWtpbmcuZXJhc1RvdGFsU3Rha2UocGFyc2VJbnQoY3VycmVudEVyYSkpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeS5iYWxhbmNlcy50b3RhbElzc3VhbmNlKCksXG4gICAgY2hhaW5BcGkuYXBpLnF1ZXJ5LmF1Y3Rpb25zPy5hdWN0aW9uQ291bnRlcigpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeT8uc3Rha2luZz8ubWluaW11bUFjdGl2ZVN0YWtlICYmIGNoYWluQXBpLmFwaS5xdWVyeT8uc3Rha2luZz8ubWluaW11bUFjdGl2ZVN0YWtlKCksXG4gICAgY2hhaW5BcGkuYXBpLnF1ZXJ5LnN0YWtpbmcubWluTm9taW5hdG9yQm9uZCgpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeT8ubm9taW5hdGlvblBvb2xzPy5taW5Kb2luQm9uZCgpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeS5zdGFraW5nLmVyYXNTdGFrZXJzLmVudHJpZXMocGFyc2VJbnQoY3VycmVudEVyYSkpXG4gIF0pO1xuXG4gIGNvbnN0IGVyYVN0YWtlcnMgPSBfZXJhU3Rha2VycyBhcyBhbnlbXTtcbiAgbGV0IGFsbEN1cnJlbnROb21pbmF0b3JzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPltdID0gW107XG4gIGNvbnN0IG5vbWluYXRvckxpc3Q6IHN0cmluZ1tdID0gW107XG5cbiAgZm9yIChjb25zdCBpdGVtIG9mIGVyYVN0YWtlcnMpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgIGNvbnN0IHJhd1ZhbGlkYXRvclN0YXQgPSBpdGVtWzFdLnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGNvbnN0IGVyYU5vbWluYXRvcnMgPSByYXdWYWxpZGF0b3JTdGF0Lm90aGVycyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+W107XG5cbiAgICBhbGxDdXJyZW50Tm9taW5hdG9ycyA9IGFsbEN1cnJlbnROb21pbmF0b3JzLmNvbmNhdChlcmFOb21pbmF0b3JzKTtcbiAgfVxuXG4gIGZvciAoY29uc3Qgbm9taW5hdG9yIG9mIGFsbEN1cnJlbnROb21pbmF0b3JzKSB7XG4gICAgaWYgKCFub21pbmF0b3JMaXN0LmluY2x1ZGVzKG5vbWluYXRvci53aG8gYXMgc3RyaW5nKSkge1xuICAgICAgbm9taW5hdG9yTGlzdC5wdXNoKG5vbWluYXRvci53aG8gYXMgc3RyaW5nKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBtaW5BY3RpdmVTdGFrZSA9IF9taW5pbXVtQWN0aXZlU3Rha2U/LnRvU3RyaW5nKCkgfHwgJzAnO1xuICBjb25zdCBtaW5Ob21pbmF0b3JCb25kID0gX21pbk5vbWluYXRvckJvbmQudG9TdHJpbmcoKTtcblxuICBjb25zdCBibk1pbkFjdGl2ZVN0YWtlID0gbmV3IEJOKG1pbkFjdGl2ZVN0YWtlKTtcbiAgY29uc3QgYm5NaW5Ob21pbmF0b3JCb25kID0gbmV3IEJOKG1pbk5vbWluYXRvckJvbmQpO1xuXG4gIGNvbnN0IG1pblN0YWtlID0gYm5NaW5BY3RpdmVTdGFrZS5ndChibk1pbk5vbWluYXRvckJvbmQpID8gYm5NaW5BY3RpdmVTdGFrZSA6IGJuTWluTm9taW5hdG9yQm9uZDtcblxuICBjb25zdCBtaW5Qb29sSm9pbiA9IF9taW5Qb29sSm9pbj8udG9TdHJpbmcoKSB8fCB1bmRlZmluZWQ7XG4gIGNvbnN0IHJhd1RvdGFsRXJhU3Rha2UgPSBfdG90YWxFcmFTdGFrZS50b1N0cmluZygpO1xuICBjb25zdCByYXdUb3RhbElzc3VhbmNlID0gX3RvdGFsSXNzdWFuY2UudG9TdHJpbmcoKTtcblxuICBjb25zdCBudW1BdWN0aW9ucyA9IF9hdWN0aW9uQ291bnRlciA/IF9hdWN0aW9uQ291bnRlci50b0h1bWFuKCkgYXMgbnVtYmVyIDogMDtcblxuICBjb25zdCBiblRvdGFsRXJhU3Rha2UgPSBuZXcgQk4ocmF3VG90YWxFcmFTdGFrZSk7XG4gIGNvbnN0IGJuVG90YWxJc3N1YW5jZSA9IG5ldyBCTihyYXdUb3RhbElzc3VhbmNlKTtcblxuICBjb25zdCBpbmZsYXRpb24gPSBjYWxjdWxhdGVJbmZsYXRpb24oYm5Ub3RhbEVyYVN0YWtlLCBiblRvdGFsSXNzdWFuY2UsIG51bUF1Y3Rpb25zLCBjaGFpbik7XG4gIGNvbnN0IGV4cGVjdGVkUmV0dXJuID0gY2FsY3VsYXRlQ2hhaW5TdGFrZWRSZXR1cm4oaW5mbGF0aW9uLCBiblRvdGFsRXJhU3Rha2UsIGJuVG90YWxJc3N1YW5jZSwgY2hhaW4pO1xuICBjb25zdCB1bmxvY2tpbmdQZXJpb2QgPSBwYXJzZUludCh1bmxvY2tpbmdFcmFzKSAqIF9TVEFLSU5HX0VSQV9MRU5HVEhfTUFQW2NoYWluXTsgLy8gaW4gaG91cnNcblxuICByZXR1cm4ge1xuICAgIGNoYWluLFxuICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICBlcmE6IHBhcnNlSW50KGN1cnJlbnRFcmEpLFxuICAgIGV4cGVjdGVkUmV0dXJuOiAhX1NUQUtJTkdfQ0hBSU5fR1JPVVAudGVybm9hLmluY2x1ZGVzKGNoYWluKSA/IGV4cGVjdGVkUmV0dXJuIDogdW5kZWZpbmVkLCAvLyBpbiAlLCBhbm51YWxseVxuICAgIGluZmxhdGlvbixcbiAgICBtaW5TdGFrZTogbWluU3Rha2UudG9TdHJpbmcoKSxcbiAgICBtYXhWYWxpZGF0b3JQZXJOb21pbmF0b3I6IHBhcnNlSW50KG1heE5vbWluYXRpb25zKSxcbiAgICBtYXhXaXRoZHJhd2FsUmVxdWVzdFBlclZhbGlkYXRvcjogcGFyc2VJbnQobWF4VW5sb2NraW5nQ2h1bmtzKSxcbiAgICBhbGxvd0NhbmNlbFVuc3Rha2luZzogdHJ1ZSxcbiAgICB1bnN0YWtpbmdQZXJpb2Q6IHVubG9ja2luZ1BlcmlvZCxcbiAgICBtaW5Kb2luTm9taW5hdGlvblBvb2w6IG1pblBvb2xKb2luLFxuICAgIG5vbWluYXRvckNvdW50OiBub21pbmF0b3JMaXN0Lmxlbmd0aFxuICB9IGFzIENoYWluU3Rha2luZ01ldGFkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3Vic2NyaWJlUmVsYXlDaGFpbk5vbWluYXRvck1ldGFkYXRhIChjaGFpbkluZm86IF9DaGFpbkluZm8sIGFkZHJlc3M6IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBsZWRnZXI6IFBhbGxldFN0YWtpbmdTdGFraW5nTGVkZ2VyKSB7XG4gIGNvbnN0IGNoYWluID0gY2hhaW5JbmZvLnNsdWc7XG4gIGNvbnN0IGNoYWluQXBpID0gYXdhaXQgc3Vic3RyYXRlQXBpLmlzUmVhZHk7XG5cbiAgY29uc3QgW19ub21pbmF0aW9ucywgX2N1cnJlbnRFcmEsIF9ib25kZWQsIF9taW5pbXVtQWN0aXZlU3Rha2UsIF9taW5Ob21pbmF0b3JCb25kXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBjaGFpbkFwaS5hcGkucXVlcnk/LnN0YWtpbmc/Lm5vbWluYXRvcnMoYWRkcmVzcyksXG4gICAgY2hhaW5BcGkuYXBpLnF1ZXJ5Py5zdGFraW5nPy5jdXJyZW50RXJhKCksXG4gICAgY2hhaW5BcGkuYXBpLnF1ZXJ5Py5zdGFraW5nPy5ib25kZWQoYWRkcmVzcyksXG4gICAgY2hhaW5BcGkuYXBpLnF1ZXJ5Py5zdGFraW5nPy5taW5pbXVtQWN0aXZlU3Rha2UgJiYgY2hhaW5BcGkuYXBpLnF1ZXJ5Py5zdGFraW5nPy5taW5pbXVtQWN0aXZlU3Rha2UoKSxcbiAgICBjaGFpbkFwaS5hcGkucXVlcnk/LnN0YWtpbmc/Lm1pbk5vbWluYXRvckJvbmQoKVxuICBdKTtcblxuICBjb25zdCBtaW5BY3RpdmVTdGFrZSA9IF9taW5pbXVtQWN0aXZlU3Rha2U/LnRvU3RyaW5nKCkgfHwgJzAnO1xuICBjb25zdCBtaW5Ob21pbmF0b3JCb25kID0gX21pbk5vbWluYXRvckJvbmQudG9TdHJpbmcoKTtcblxuICBjb25zdCBibk1pbkFjdGl2ZVN0YWtlID0gbmV3IEJOKG1pbkFjdGl2ZVN0YWtlKTtcbiAgY29uc3QgYm5NaW5Ob21pbmF0b3JCb25kID0gbmV3IEJOKG1pbk5vbWluYXRvckJvbmQpO1xuXG4gIGNvbnN0IG1pblN0YWtlID0gYm5NaW5BY3RpdmVTdGFrZS5ndChibk1pbk5vbWluYXRvckJvbmQpID8gYm5NaW5BY3RpdmVTdGFrZSA6IGJuTWluTm9taW5hdG9yQm9uZDtcblxuICBjb25zdCBfbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IgPSBjaGFpbkFwaS5hcGkuY29uc3RzLnN0YWtpbmcubWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IudG9TdHJpbmcoKTtcbiAgY29uc3QgbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IgPSBwYXJzZUludChfbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IpO1xuICBjb25zdCBub21pbmF0aW9ucyA9IF9ub21pbmF0aW9ucy50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgUGFsbGV0U3Rha2luZ05vbWluYXRpb25zO1xuICBjb25zdCBjdXJyZW50RXJhID0gX2N1cnJlbnRFcmEudG9TdHJpbmcoKTtcbiAgY29uc3QgYm9uZGVkID0gX2JvbmRlZC50b0h1bWFuKCk7XG5cbiAgY29uc3QgYWN0aXZlU3Rha2UgPSBsZWRnZXIuYWN0aXZlLnRvU3RyaW5nKCk7XG4gIGNvbnN0IG5vbWluYXRpb25MaXN0OiBOb21pbmF0aW9uSW5mb1tdID0gW107XG4gIGNvbnN0IHVuc3Rha2luZ0xpc3Q6IFVuc3Rha2luZ0luZm9bXSA9IFtdO1xuXG4gIGlmIChub21pbmF0aW9ucykge1xuICAgIGNvbnN0IHZhbGlkYXRvckxpc3QgPSBub21pbmF0aW9ucy50YXJnZXRzO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodmFsaWRhdG9yTGlzdC5tYXAoYXN5bmMgKHZhbGlkYXRvckFkZHJlc3MpID0+IHtcbiAgICAgIGxldCBub21pbmF0aW9uU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5OT1RfRUFSTklORztcbiAgICAgIGNvbnN0IFtfaWRlbnRpdHlJbmZvLCBfZXJhU3Rha2VyXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgY2hhaW5BcGkuYXBpLnF1ZXJ5LmlkZW50aXR5Py5pZGVudGl0eU9mKHZhbGlkYXRvckFkZHJlc3MpLFxuICAgICAgICBjaGFpbkFwaS5hcGkucXVlcnkuc3Rha2luZy5lcmFzU3Rha2VycyhjdXJyZW50RXJhLCB2YWxpZGF0b3JBZGRyZXNzKVxuICAgICAgXSk7XG4gICAgICBjb25zdCBlcmFTdGFrZXIgPSBfZXJhU3Rha2VyLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBQYWxsZXRTdGFraW5nRXhwb3N1cmU7XG4gICAgICBjb25zdCBpZGVudGl0eUluZm8gPSBfaWRlbnRpdHlJbmZvPy50b0h1bWFuKCkgYXMgdW5rbm93biBhcyBQYWxsZXRJZGVudGl0eVJlZ2lzdHJhdGlvbjtcbiAgICAgIGNvbnN0IGlkZW50aXR5ID0gcGFyc2VJZGVudGl0eShpZGVudGl0eUluZm8pO1xuICAgICAgY29uc3QgdG9wTm9taW5hdG9ycyA9IGVyYVN0YWtlci5vdGhlcnMubWFwKChub21pbmF0b3IpID0+IHtcbiAgICAgICAgcmV0dXJuIG5vbWluYXRvci53aG87XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0b3BOb21pbmF0b3JzLmluY2x1ZGVzKHJlZm9ybWF0QWRkcmVzcyhhZGRyZXNzLCBfZ2V0Q2hhaW5TdWJzdHJhdGVBZGRyZXNzUHJlZml4KGNoYWluSW5mbykpKSkgeyAvLyBpZiBub21pbmF0b3IgaGFzIHRhcmdldCBidXQgbm90IGluIG5vbWluYXRvciBsaXN0XG4gICAgICAgIG5vbWluYXRpb25TdGF0dXMgPSBTdGFraW5nU3RhdHVzLldBSVRJTkc7XG4gICAgICB9IGVsc2UgaWYgKHRvcE5vbWluYXRvcnMuc2xpY2UoMCwgbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IpLmluY2x1ZGVzKHJlZm9ybWF0QWRkcmVzcyhhZGRyZXNzLCBfZ2V0Q2hhaW5TdWJzdHJhdGVBZGRyZXNzUHJlZml4KGNoYWluSW5mbykpKSkgeyAvLyBpZiBhZGRyZXNzIGluIHRvcCBub21pbmF0b3JzXG4gICAgICAgIG5vbWluYXRpb25TdGF0dXMgPSBTdGFraW5nU3RhdHVzLkVBUk5JTkdfUkVXQVJEO1xuICAgICAgfVxuXG4gICAgICBub21pbmF0aW9uTGlzdC5wdXNoKHtcbiAgICAgICAgY2hhaW4sXG4gICAgICAgIHZhbGlkYXRvckFkZHJlc3MsXG4gICAgICAgIHN0YXR1czogbm9taW5hdGlvblN0YXR1cyxcbiAgICAgICAgdmFsaWRhdG9ySWRlbnRpdHk6IGlkZW50aXR5LFxuICAgICAgICBhY3RpdmVTdGFrZTogJzAnIC8vIHJlbGF5Y2hhaW4gYWxsb2NhdGVzIHN0YWtlIGFjY29yZGluZ2x5XG4gICAgICB9IGFzIE5vbWluYXRpb25JbmZvKTtcbiAgICB9KSk7XG4gIH1cblxuICBsZXQgc3Rha2luZ1N0YXR1cyA9IFN0YWtpbmdTdGF0dXMuTk9UX0VBUk5JTkc7XG4gIGNvbnN0IGJuQWN0aXZlU3Rha2UgPSBuZXcgQk4oYWN0aXZlU3Rha2UpO1xuICBsZXQgd2FpdGluZ05vbWluYXRpb25Db3VudCA9IDA7XG5cbiAgaWYgKGJuQWN0aXZlU3Rha2UuZ3RlKG1pblN0YWtlKSkge1xuICAgIGZvciAoY29uc3Qgbm9taW5hdGlvbiBvZiBub21pbmF0aW9uTGlzdCkge1xuICAgICAgaWYgKG5vbWluYXRpb24uc3RhdHVzID09PSBTdGFraW5nU3RhdHVzLkVBUk5JTkdfUkVXQVJEKSB7IC8vIG9ubHkgbmVlZCAxIGVhcm5pbmcgbm9taW5hdGlvbiB0byBjb3VudFxuICAgICAgICBzdGFraW5nU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5FQVJOSU5HX1JFV0FSRDtcbiAgICAgIH0gZWxzZSBpZiAobm9taW5hdGlvbi5zdGF0dXMgPT09IFN0YWtpbmdTdGF0dXMuV0FJVElORykge1xuICAgICAgICB3YWl0aW5nTm9taW5hdGlvbkNvdW50ICs9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHdhaXRpbmdOb21pbmF0aW9uQ291bnQgPT09IG5vbWluYXRpb25MaXN0Lmxlbmd0aCkge1xuICAgICAgc3Rha2luZ1N0YXR1cyA9IFN0YWtpbmdTdGF0dXMuV0FJVElORztcbiAgICB9XG4gIH1cblxuICBsZWRnZXIudW5sb2NraW5nLmZvckVhY2goKHVubG9ja2luZ0NodW5rKSA9PiB7XG4gICAgY29uc3QgaXNDbGFpbWFibGUgPSB1bmxvY2tpbmdDaHVuay5lcmEgLSBwYXJzZUludChjdXJyZW50RXJhKSA8IDA7XG4gICAgY29uc3QgcmVtYWluaW5nRXJhID0gdW5sb2NraW5nQ2h1bmsuZXJhIC0gcGFyc2VJbnQoY3VycmVudEVyYSk7XG4gICAgY29uc3Qgd2FpdGluZ1RpbWUgPSByZW1haW5pbmdFcmEgKiBfU1RBS0lOR19FUkFfTEVOR1RIX01BUFtjaGFpbl07XG5cbiAgICB1bnN0YWtpbmdMaXN0LnB1c2goe1xuICAgICAgY2hhaW4sXG4gICAgICBzdGF0dXM6IGlzQ2xhaW1hYmxlID8gVW5zdGFraW5nU3RhdHVzLkNMQUlNQUJMRSA6IFVuc3Rha2luZ1N0YXR1cy5VTkxPQ0tJTkcsXG4gICAgICBjbGFpbWFibGU6IHVubG9ja2luZ0NodW5rLnZhbHVlLnRvU3RyaW5nKCksXG4gICAgICB3YWl0aW5nVGltZTogd2FpdGluZ1RpbWVcbiAgICB9IGFzIFVuc3Rha2luZ0luZm8pO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGNoYWluLFxuICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICBzdGF0dXM6IHN0YWtpbmdTdGF0dXMsXG4gICAgYWRkcmVzczogYWRkcmVzcyxcbiAgICBhY3RpdmVTdGFrZSxcblxuICAgIG5vbWluYXRpb25zOiBub21pbmF0aW9uTGlzdCxcbiAgICB1bnN0YWtpbmdzOiB1bnN0YWtpbmdMaXN0LFxuICAgIGlzQm9uZGVkQmVmb3JlOiBib25kZWQgIT09IG51bGxcbiAgfSBhcyBOb21pbmF0b3JNZXRhZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlbGF5Q2hhaW5Ob21pbmF0b3JNZXRhZGF0YSAoY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBhZGRyZXNzOiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSk6IFByb21pc2U8Tm9taW5hdG9yTWV0YWRhdGEgfCB1bmRlZmluZWQ+IHtcbiAgaWYgKGlzRXRoZXJldW1BZGRyZXNzKGFkZHJlc3MpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY2hhaW4gPSBjaGFpbkluZm8uc2x1ZztcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcblxuICBjb25zdCBbX2xlZGdlciwgX25vbWluYXRpb25zLCBfY3VycmVudEVyYSwgX2JvbmRlZCwgX21pbmltdW1BY3RpdmVTdGFrZSwgX21pbk5vbWluYXRvckJvbmRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGNoYWluQXBpLmFwaS5xdWVyeT8uc3Rha2luZz8ubGVkZ2VyKGFkZHJlc3MpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeT8uc3Rha2luZz8ubm9taW5hdG9ycyhhZGRyZXNzKSxcbiAgICBjaGFpbkFwaS5hcGkucXVlcnk/LnN0YWtpbmc/LmN1cnJlbnRFcmEoKSxcbiAgICBjaGFpbkFwaS5hcGkucXVlcnk/LnN0YWtpbmc/LmJvbmRlZChhZGRyZXNzKSxcbiAgICBjaGFpbkFwaS5hcGkucXVlcnk/LnN0YWtpbmc/Lm1pbmltdW1BY3RpdmVTdGFrZSAmJiBjaGFpbkFwaS5hcGkucXVlcnk/LnN0YWtpbmc/Lm1pbmltdW1BY3RpdmVTdGFrZSgpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeT8uc3Rha2luZz8ubWluTm9taW5hdG9yQm9uZCgpXG4gIF0pO1xuXG4gIGNvbnN0IG1pbkFjdGl2ZVN0YWtlID0gX21pbmltdW1BY3RpdmVTdGFrZT8udG9TdHJpbmcoKSB8fCAnMCc7XG4gIGNvbnN0IG1pbk5vbWluYXRvckJvbmQgPSBfbWluTm9taW5hdG9yQm9uZC50b1N0cmluZygpO1xuXG4gIGNvbnN0IGJuTWluQWN0aXZlU3Rha2UgPSBuZXcgQk4obWluQWN0aXZlU3Rha2UpO1xuICBjb25zdCBibk1pbk5vbWluYXRvckJvbmQgPSBuZXcgQk4obWluTm9taW5hdG9yQm9uZCk7XG5cbiAgY29uc3QgbWluU3Rha2UgPSBibk1pbkFjdGl2ZVN0YWtlLmd0KGJuTWluTm9taW5hdG9yQm9uZCkgPyBibk1pbkFjdGl2ZVN0YWtlIDogYm5NaW5Ob21pbmF0b3JCb25kO1xuXG4gIGNvbnN0IF9tYXhOb21pbmF0b3JSZXdhcmRlZFBlclZhbGlkYXRvciA9IGNoYWluQXBpLmFwaS5jb25zdHMuc3Rha2luZy5tYXhOb21pbmF0b3JSZXdhcmRlZFBlclZhbGlkYXRvci50b1N0cmluZygpO1xuICBjb25zdCBtYXhOb21pbmF0b3JSZXdhcmRlZFBlclZhbGlkYXRvciA9IHBhcnNlSW50KF9tYXhOb21pbmF0b3JSZXdhcmRlZFBlclZhbGlkYXRvcik7XG4gIGNvbnN0IGxlZGdlciA9IF9sZWRnZXIudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldFN0YWtpbmdTdGFraW5nTGVkZ2VyO1xuICBjb25zdCBub21pbmF0aW9ucyA9IF9ub21pbmF0aW9ucy50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgUGFsbGV0U3Rha2luZ05vbWluYXRpb25zO1xuICBjb25zdCBjdXJyZW50RXJhID0gX2N1cnJlbnRFcmEudG9TdHJpbmcoKTtcbiAgY29uc3QgYm9uZGVkID0gX2JvbmRlZC50b0h1bWFuKCk7XG5cbiAgaWYgKCFsZWRnZXIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhaW4sXG4gICAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgICBzdGF0dXM6IFN0YWtpbmdTdGF0dXMuTk9UX1NUQUtJTkcsXG4gICAgICBhZGRyZXNzOiBhZGRyZXNzLFxuICAgICAgYWN0aXZlU3Rha2U6ICcwJyxcblxuICAgICAgbm9taW5hdGlvbnM6IFtdLFxuICAgICAgdW5zdGFraW5nczogW11cbiAgICB9IGFzIE5vbWluYXRvck1ldGFkYXRhO1xuICB9XG5cbiAgY29uc3QgYWN0aXZlU3Rha2UgPSBsZWRnZXIuYWN0aXZlLnRvU3RyaW5nKCk7XG4gIGNvbnN0IG5vbWluYXRpb25MaXN0OiBOb21pbmF0aW9uSW5mb1tdID0gW107XG4gIGNvbnN0IHVuc3Rha2luZ0xpc3Q6IFVuc3Rha2luZ0luZm9bXSA9IFtdO1xuXG4gIGlmIChub21pbmF0aW9ucykge1xuICAgIGNvbnN0IHZhbGlkYXRvckxpc3QgPSBub21pbmF0aW9ucy50YXJnZXRzO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodmFsaWRhdG9yTGlzdC5tYXAoYXN5bmMgKHZhbGlkYXRvckFkZHJlc3MpID0+IHtcbiAgICAgIGxldCBub21pbmF0aW9uU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5OT1RfRUFSTklORztcbiAgICAgIGNvbnN0IFtfaWRlbnRpdHlJbmZvLCBfZXJhU3Rha2VyXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgY2hhaW5BcGkuYXBpLnF1ZXJ5LmlkZW50aXR5LmlkZW50aXR5T2YodmFsaWRhdG9yQWRkcmVzcyksXG4gICAgICAgIGNoYWluQXBpLmFwaS5xdWVyeS5zdGFraW5nLmVyYXNTdGFrZXJzKGN1cnJlbnRFcmEsIHZhbGlkYXRvckFkZHJlc3MpXG4gICAgICBdKTtcbiAgICAgIGNvbnN0IGVyYVN0YWtlciA9IF9lcmFTdGFrZXIudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldFN0YWtpbmdFeHBvc3VyZTtcbiAgICAgIGNvbnN0IGlkZW50aXR5SW5mbyA9IF9pZGVudGl0eUluZm8udG9IdW1hbigpIGFzIHVua25vd24gYXMgUGFsbGV0SWRlbnRpdHlSZWdpc3RyYXRpb247XG4gICAgICBjb25zdCBpZGVudGl0eSA9IHBhcnNlSWRlbnRpdHkoaWRlbnRpdHlJbmZvKTtcbiAgICAgIGNvbnN0IHRvcE5vbWluYXRvcnMgPSBlcmFTdGFrZXIub3RoZXJzLm1hcCgobm9taW5hdG9yKSA9PiB7XG4gICAgICAgIHJldHVybiBub21pbmF0b3Iud2hvO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghdG9wTm9taW5hdG9ycy5pbmNsdWRlcyhyZWZvcm1hdEFkZHJlc3MoYWRkcmVzcywgX2dldENoYWluU3Vic3RyYXRlQWRkcmVzc1ByZWZpeChjaGFpbkluZm8pKSkpIHsgLy8gaWYgbm9taW5hdG9yIGhhcyB0YXJnZXQgYnV0IG5vdCBpbiBub21pbmF0b3IgbGlzdFxuICAgICAgICBub21pbmF0aW9uU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5XQUlUSU5HO1xuICAgICAgfSBlbHNlIGlmICh0b3BOb21pbmF0b3JzLnNsaWNlKDAsIG1heE5vbWluYXRvclJld2FyZGVkUGVyVmFsaWRhdG9yKS5pbmNsdWRlcyhyZWZvcm1hdEFkZHJlc3MoYWRkcmVzcywgX2dldENoYWluU3Vic3RyYXRlQWRkcmVzc1ByZWZpeChjaGFpbkluZm8pKSkpIHsgLy8gaWYgYWRkcmVzcyBpbiB0b3Agbm9taW5hdG9yc1xuICAgICAgICBub21pbmF0aW9uU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5FQVJOSU5HX1JFV0FSRDtcbiAgICAgIH1cblxuICAgICAgbm9taW5hdGlvbkxpc3QucHVzaCh7XG4gICAgICAgIGNoYWluLFxuICAgICAgICB2YWxpZGF0b3JBZGRyZXNzLFxuICAgICAgICBzdGF0dXM6IG5vbWluYXRpb25TdGF0dXMsXG4gICAgICAgIHZhbGlkYXRvcklkZW50aXR5OiBpZGVudGl0eSxcbiAgICAgICAgYWN0aXZlU3Rha2U6ICcwJyAvLyByZWxheWNoYWluIGFsbG9jYXRlcyBzdGFrZSBhY2NvcmRpbmdseVxuICAgICAgfSBhcyBOb21pbmF0aW9uSW5mbyk7XG4gICAgfSkpO1xuICB9XG5cbiAgbGV0IHN0YWtpbmdTdGF0dXMgPSBTdGFraW5nU3RhdHVzLk5PVF9FQVJOSU5HO1xuICBjb25zdCBibkFjdGl2ZVN0YWtlID0gbmV3IEJOKGFjdGl2ZVN0YWtlKTtcbiAgbGV0IHdhaXRpbmdOb21pbmF0aW9uQ291bnQgPSAwO1xuXG4gIGlmIChibkFjdGl2ZVN0YWtlLmd0ZShtaW5TdGFrZSkpIHtcbiAgICBmb3IgKGNvbnN0IG5vbWluYXRpb24gb2Ygbm9taW5hdGlvbkxpc3QpIHtcbiAgICAgIGlmIChub21pbmF0aW9uLnN0YXR1cyA9PT0gU3Rha2luZ1N0YXR1cy5FQVJOSU5HX1JFV0FSRCkgeyAvLyBvbmx5IG5lZWQgMSBlYXJuaW5nIG5vbWluYXRpb24gdG8gY291bnRcbiAgICAgICAgc3Rha2luZ1N0YXR1cyA9IFN0YWtpbmdTdGF0dXMuRUFSTklOR19SRVdBUkQ7XG4gICAgICB9IGVsc2UgaWYgKG5vbWluYXRpb24uc3RhdHVzID09PSBTdGFraW5nU3RhdHVzLldBSVRJTkcpIHtcbiAgICAgICAgd2FpdGluZ05vbWluYXRpb25Db3VudCArPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh3YWl0aW5nTm9taW5hdGlvbkNvdW50ID09PSBub21pbmF0aW9uTGlzdC5sZW5ndGgpIHtcbiAgICAgIHN0YWtpbmdTdGF0dXMgPSBTdGFraW5nU3RhdHVzLldBSVRJTkc7XG4gICAgfVxuICB9XG5cbiAgbGVkZ2VyLnVubG9ja2luZy5mb3JFYWNoKCh1bmxvY2tpbmdDaHVuaykgPT4ge1xuICAgIGNvbnN0IGlzQ2xhaW1hYmxlID0gdW5sb2NraW5nQ2h1bmsuZXJhIC0gcGFyc2VJbnQoY3VycmVudEVyYSkgPCAwO1xuICAgIGNvbnN0IHJlbWFpbmluZ0VyYSA9IHVubG9ja2luZ0NodW5rLmVyYSAtIHBhcnNlSW50KGN1cnJlbnRFcmEpO1xuICAgIGNvbnN0IHdhaXRpbmdUaW1lID0gcmVtYWluaW5nRXJhICogX1NUQUtJTkdfRVJBX0xFTkdUSF9NQVBbY2hhaW5dO1xuXG4gICAgdW5zdGFraW5nTGlzdC5wdXNoKHtcbiAgICAgIGNoYWluLFxuICAgICAgc3RhdHVzOiBpc0NsYWltYWJsZSA/IFVuc3Rha2luZ1N0YXR1cy5DTEFJTUFCTEUgOiBVbnN0YWtpbmdTdGF0dXMuVU5MT0NLSU5HLFxuICAgICAgY2xhaW1hYmxlOiB1bmxvY2tpbmdDaHVuay52YWx1ZS50b1N0cmluZygpLFxuICAgICAgd2FpdGluZ1RpbWU6IHdhaXRpbmdUaW1lXG4gICAgfSBhcyBVbnN0YWtpbmdJbmZvKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjaGFpbixcbiAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgc3RhdHVzOiBzdGFraW5nU3RhdHVzLFxuICAgIGFkZHJlc3M6IGFkZHJlc3MsXG4gICAgYWN0aXZlU3Rha2UsXG5cbiAgICBub21pbmF0aW9uczogbm9taW5hdGlvbkxpc3QsXG4gICAgdW5zdGFraW5nczogdW5zdGFraW5nTGlzdCxcbiAgICBpc0JvbmRlZEJlZm9yZTogYm9uZGVkICE9PSBudWxsXG4gIH0gYXMgTm9taW5hdG9yTWV0YWRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdWJzY3JpYmVSZWxheUNoYWluUG9vbE1lbWJlck1ldGFkYXRhIChjaGFpbkluZm86IF9DaGFpbkluZm8sIGFkZHJlc3M6IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBwb29sTWVtYmVySW5mbzogUGFsbGV0Tm9taW5hdGlvblBvb2xzUG9vbE1lbWJlcikge1xuICBjb25zdCBfbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IgPSBzdWJzdHJhdGVBcGkuYXBpLmNvbnN0cy5zdGFraW5nLm1heE5vbWluYXRvclJld2FyZGVkUGVyVmFsaWRhdG9yLnRvU3RyaW5nKCk7XG4gIGNvbnN0IG1heE5vbWluYXRvclJld2FyZGVkUGVyVmFsaWRhdG9yID0gcGFyc2VJbnQoX21heE5vbWluYXRvclJld2FyZGVkUGVyVmFsaWRhdG9yKTtcbiAgY29uc3QgcG9vbHNQYWxsZXRJZCA9IHN1YnN0cmF0ZUFwaS5hcGkuY29uc3RzLm5vbWluYXRpb25Qb29scy5wYWxsZXRJZC50b1N0cmluZygpO1xuICBjb25zdCBwb29sU3Rhc2hBY2NvdW50ID0gcGFyc2VQb29sU3Rhc2hBZGRyZXNzKHN1YnN0cmF0ZUFwaS5hcGksIDAsIHBvb2xNZW1iZXJJbmZvLnBvb2xJZCwgcG9vbHNQYWxsZXRJZCk7XG5cbiAgY29uc3QgW19ub21pbmF0aW9ucywgX3Bvb2xNZXRhZGF0YSwgX2N1cnJlbnRFcmFdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkuc3Rha2luZy5ub21pbmF0b3JzKHBvb2xTdGFzaEFjY291bnQpLFxuICAgIHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkubm9taW5hdGlvblBvb2xzLm1ldGFkYXRhKHBvb2xNZW1iZXJJbmZvLnBvb2xJZCksXG4gICAgc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5zdGFraW5nLmN1cnJlbnRFcmEoKVxuICBdKTtcblxuICBjb25zdCBwb29sTWV0YWRhdGEgPSBfcG9vbE1ldGFkYXRhLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBCeXRlcztcbiAgY29uc3QgY3VycmVudEVyYSA9IF9jdXJyZW50RXJhLnRvU3RyaW5nKCk7XG4gIGNvbnN0IG5vbWluYXRpb25zID0gX25vbWluYXRpb25zLnRvSlNPTigpIGFzIHVua25vd24gYXMgUGFsbGV0U3Rha2luZ05vbWluYXRpb25zO1xuXG4gIGxldCBzdGFraW5nU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5OT1RfRUFSTklORztcblxuICBjb25zdCBwb29sTmFtZSA9IHRyYW5zZm9ybVBvb2xOYW1lKHBvb2xNZXRhZGF0YS5pc1V0ZjggPyBwb29sTWV0YWRhdGEudG9VdGY4KCkgOiBwb29sTWV0YWRhdGEudG9TdHJpbmcoKSk7XG5cbiAgaWYgKG5vbWluYXRpb25zKSB7XG4gICAgY29uc3QgdmFsaWRhdG9yTGlzdCA9IG5vbWluYXRpb25zLnRhcmdldHM7XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbCh2YWxpZGF0b3JMaXN0Lm1hcChhc3luYyAodmFsaWRhdG9yQWRkcmVzcykgPT4ge1xuICAgICAgY29uc3QgX2VyYVN0YWtlciA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkuc3Rha2luZy5lcmFzU3Rha2VycyhjdXJyZW50RXJhLCB2YWxpZGF0b3JBZGRyZXNzKTtcbiAgICAgIGNvbnN0IGVyYVN0YWtlciA9IF9lcmFTdGFrZXIudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldFN0YWtpbmdFeHBvc3VyZTtcbiAgICAgIGNvbnN0IHRvcE5vbWluYXRvcnMgPSBlcmFTdGFrZXIub3RoZXJzLm1hcCgobm9taW5hdG9yKSA9PiB7XG4gICAgICAgIHJldHVybiBub21pbmF0b3Iud2hvO1xuICAgICAgfSkuc2xpY2UoMCwgbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IpO1xuXG4gICAgICBpZiAodG9wTm9taW5hdG9ycy5pbmNsdWRlcyhyZWZvcm1hdEFkZHJlc3MocG9vbFN0YXNoQWNjb3VudCwgX2dldENoYWluU3Vic3RyYXRlQWRkcmVzc1ByZWZpeChjaGFpbkluZm8pKSkpIHsgLy8gaWYgYWRkcmVzcyBpbiB0b3Agbm9taW5hdG9yc1xuICAgICAgICBzdGFraW5nU3RhdHVzID0gU3Rha2luZ1N0YXR1cy5FQVJOSU5HX1JFV0FSRDtcbiAgICAgIH1cbiAgICB9KSk7XG4gIH1cblxuICBjb25zdCBqb2luZWRQb29sSW5mbzogTm9taW5hdGlvbkluZm8gPSB7XG4gICAgYWN0aXZlU3Rha2U6IHBvb2xNZW1iZXJJbmZvLnBvaW50cy50b1N0cmluZygpLFxuICAgIGNoYWluOiBjaGFpbkluZm8uc2x1ZyxcbiAgICBzdGF0dXM6IHN0YWtpbmdTdGF0dXMsXG4gICAgdmFsaWRhdG9ySWRlbnRpdHk6IHBvb2xOYW1lLFxuICAgIHZhbGlkYXRvckFkZHJlc3M6IHBvb2xNZW1iZXJJbmZvLnBvb2xJZC50b1N0cmluZygpLCAvLyB1c2UgcG9vbElkXG4gICAgaGFzVW5zdGFraW5nOiBwb29sTWVtYmVySW5mby51bmJvbmRpbmdFcmFzICYmIE9iamVjdC5rZXlzKHBvb2xNZW1iZXJJbmZvLnVuYm9uZGluZ0VyYXMpLmxlbmd0aCA+IDBcbiAgfTtcblxuICBjb25zdCB1bnN0YWtpbmdzOiBVbnN0YWtpbmdJbmZvW10gPSBbXTtcblxuICBPYmplY3QuZW50cmllcyhwb29sTWVtYmVySW5mby51bmJvbmRpbmdFcmFzKS5mb3JFYWNoKChbdW5sb2NraW5nRXJhLCBhbW91bnRdKSA9PiB7XG4gICAgY29uc3QgaXNDbGFpbWFibGUgPSBwYXJzZUludCh1bmxvY2tpbmdFcmEpIC0gcGFyc2VJbnQoY3VycmVudEVyYSkgPCAwO1xuICAgIGNvbnN0IHJlbWFpbmluZ0VyYSA9IHBhcnNlSW50KHVubG9ja2luZ0VyYSkgLSBwYXJzZUludChjdXJyZW50RXJhKTtcbiAgICBjb25zdCB3YWl0aW5nVGltZSA9IHJlbWFpbmluZ0VyYSAqIF9TVEFLSU5HX0VSQV9MRU5HVEhfTUFQW2NoYWluSW5mby5zbHVnXTtcblxuICAgIHVuc3Rha2luZ3MucHVzaCh7XG4gICAgICBjaGFpbjogY2hhaW5JbmZvLnNsdWcsXG4gICAgICBzdGF0dXM6IGlzQ2xhaW1hYmxlID8gVW5zdGFraW5nU3RhdHVzLkNMQUlNQUJMRSA6IFVuc3Rha2luZ1N0YXR1cy5VTkxPQ0tJTkcsXG4gICAgICBjbGFpbWFibGU6IGFtb3VudC50b1N0cmluZygpLFxuICAgICAgd2FpdGluZ1RpbWU6IHdhaXRpbmdUaW1lXG4gICAgfSBhcyBVbnN0YWtpbmdJbmZvKTtcbiAgfSk7XG5cbiAgY29uc3QgYm5BY3RpdmVTdGFrZSA9IG5ldyBCTihwb29sTWVtYmVySW5mby5wb2ludHMudG9TdHJpbmcoKSk7XG5cbiAgaWYgKCFibkFjdGl2ZVN0YWtlLmd0KEJOX1pFUk8pKSB7XG4gICAgc3Rha2luZ1N0YXR1cyA9IFN0YWtpbmdTdGF0dXMuTk9UX0VBUk5JTkc7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNoYWluOiBjaGFpbkluZm8uc2x1ZyxcbiAgICB0eXBlOiBTdGFraW5nVHlwZS5QT09MRUQsXG4gICAgYWRkcmVzcyxcbiAgICBzdGF0dXM6IHN0YWtpbmdTdGF0dXMsXG4gICAgYWN0aXZlU3Rha2U6IHBvb2xNZW1iZXJJbmZvLnBvaW50cy50b1N0cmluZygpLFxuICAgIG5vbWluYXRpb25zOiBbam9pbmVkUG9vbEluZm9dLCAvLyBjYW4gb25seSBqb2luIDEgcG9vbCBhdCBhIHRpbWVcbiAgICB1bnN0YWtpbmdzXG4gIH0gYXMgTm9taW5hdG9yTWV0YWRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWxheUNoYWluUG9vbE1lbWJlck1ldGFkYXRhIChjaGFpbkluZm86IF9DaGFpbkluZm8sIGFkZHJlc3M6IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpKTogUHJvbWlzZTxOb21pbmF0b3JNZXRhZGF0YSB8IHVuZGVmaW5lZD4ge1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuXG4gIGNvbnN0IFtfcG9vbE1lbWJlckluZm8sIF9jdXJyZW50RXJhXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBjaGFpbkFwaS5hcGkucXVlcnkubm9taW5hdGlvblBvb2xzLnBvb2xNZW1iZXJzKGFkZHJlc3MpLFxuICAgIGNoYWluQXBpLmFwaS5xdWVyeS5zdGFraW5nLmN1cnJlbnRFcmEoKVxuICBdKTtcblxuICBjb25zdCBfbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IgPSBjaGFpbkFwaS5hcGkuY29uc3RzLnN0YWtpbmcubWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IudG9TdHJpbmcoKTtcbiAgY29uc3QgbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IgPSBwYXJzZUludChfbWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IpO1xuICBjb25zdCBwb29sc1BhbGxldElkID0gY2hhaW5BcGkuYXBpLmNvbnN0cy5ub21pbmF0aW9uUG9vbHMucGFsbGV0SWQudG9TdHJpbmcoKTtcbiAgY29uc3QgcG9vbE1lbWJlckluZm8gPSBfcG9vbE1lbWJlckluZm8udG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldE5vbWluYXRpb25Qb29sc1Bvb2xNZW1iZXI7XG4gIGNvbnN0IGN1cnJlbnRFcmEgPSBfY3VycmVudEVyYS50b1N0cmluZygpO1xuXG4gIGlmICghcG9vbE1lbWJlckluZm8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhaW46IGNoYWluSW5mby5zbHVnLFxuICAgICAgdHlwZTogU3Rha2luZ1R5cGUuUE9PTEVELFxuICAgICAgYWRkcmVzcyxcbiAgICAgIHN0YXR1czogU3Rha2luZ1N0YXR1cy5OT1RfU1RBS0lORyxcbiAgICAgIGFjdGl2ZVN0YWtlOiAnMCcsXG4gICAgICBub21pbmF0aW9uczogW10sIC8vIGNhbiBvbmx5IGpvaW4gMSBwb29sIGF0IGEgdGltZVxuICAgICAgdW5zdGFraW5nczogW11cbiAgICB9IGFzIE5vbWluYXRvck1ldGFkYXRhO1xuICB9XG5cbiAgbGV0IHN0YWtpbmdTdGF0dXMgPSBTdGFraW5nU3RhdHVzLk5PVF9FQVJOSU5HO1xuXG4gIGNvbnN0IF9wb29sTWV0YWRhdGEgPSAoYXdhaXQgY2hhaW5BcGkuYXBpLnF1ZXJ5Lm5vbWluYXRpb25Qb29scy5tZXRhZGF0YShwb29sTWVtYmVySW5mby5wb29sSWQpKTtcbiAgY29uc3QgcG9vbE1ldGFkYXRhID0gX3Bvb2xNZXRhZGF0YS50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgQnl0ZXM7XG5cbiAgY29uc3QgcG9vbE5hbWUgPSB0cmFuc2Zvcm1Qb29sTmFtZShwb29sTWV0YWRhdGEuaXNVdGY4ID8gcG9vbE1ldGFkYXRhLnRvVXRmOCgpIDogcG9vbE1ldGFkYXRhLnRvU3RyaW5nKCkpO1xuICBjb25zdCBwb29sU3Rhc2hBY2NvdW50ID0gcGFyc2VQb29sU3Rhc2hBZGRyZXNzKGNoYWluQXBpLmFwaSwgMCwgcG9vbE1lbWJlckluZm8ucG9vbElkLCBwb29sc1BhbGxldElkKTtcblxuICBjb25zdCBfbm9taW5hdGlvbnMgPSBhd2FpdCBjaGFpbkFwaS5hcGkucXVlcnkuc3Rha2luZy5ub21pbmF0b3JzKHBvb2xTdGFzaEFjY291bnQpO1xuICBjb25zdCBub21pbmF0aW9ucyA9IF9ub21pbmF0aW9ucy50b0pTT04oKSBhcyB1bmtub3duIGFzIFBhbGxldFN0YWtpbmdOb21pbmF0aW9ucztcblxuICBpZiAobm9taW5hdGlvbnMpIHtcbiAgICBjb25zdCB2YWxpZGF0b3JMaXN0ID0gbm9taW5hdGlvbnMudGFyZ2V0cztcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKHZhbGlkYXRvckxpc3QubWFwKGFzeW5jICh2YWxpZGF0b3JBZGRyZXNzKSA9PiB7XG4gICAgICBjb25zdCBfZXJhU3Rha2VyID0gYXdhaXQgY2hhaW5BcGkuYXBpLnF1ZXJ5LnN0YWtpbmcuZXJhc1N0YWtlcnMoY3VycmVudEVyYSwgdmFsaWRhdG9yQWRkcmVzcyk7XG4gICAgICBjb25zdCBlcmFTdGFrZXIgPSBfZXJhU3Rha2VyLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBQYWxsZXRTdGFraW5nRXhwb3N1cmU7XG4gICAgICBjb25zdCB0b3BOb21pbmF0b3JzID0gZXJhU3Rha2VyLm90aGVycy5tYXAoKG5vbWluYXRvcikgPT4ge1xuICAgICAgICByZXR1cm4gbm9taW5hdG9yLndobztcbiAgICAgIH0pLnNsaWNlKDAsIG1heE5vbWluYXRvclJld2FyZGVkUGVyVmFsaWRhdG9yKTtcblxuICAgICAgaWYgKHRvcE5vbWluYXRvcnMuaW5jbHVkZXMocmVmb3JtYXRBZGRyZXNzKHBvb2xTdGFzaEFjY291bnQsIF9nZXRDaGFpblN1YnN0cmF0ZUFkZHJlc3NQcmVmaXgoY2hhaW5JbmZvKSkpKSB7IC8vIGlmIGFkZHJlc3MgaW4gdG9wIG5vbWluYXRvcnNcbiAgICAgICAgc3Rha2luZ1N0YXR1cyA9IFN0YWtpbmdTdGF0dXMuRUFSTklOR19SRVdBUkQ7XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG5cbiAgY29uc3Qgam9pbmVkUG9vbEluZm86IE5vbWluYXRpb25JbmZvID0ge1xuICAgIGFjdGl2ZVN0YWtlOiBwb29sTWVtYmVySW5mby5wb2ludHMudG9TdHJpbmcoKSxcbiAgICBjaGFpbjogY2hhaW5JbmZvLnNsdWcsXG4gICAgc3RhdHVzOiBzdGFraW5nU3RhdHVzLFxuICAgIHZhbGlkYXRvcklkZW50aXR5OiBwb29sTmFtZSxcbiAgICB2YWxpZGF0b3JBZGRyZXNzOiBwb29sTWVtYmVySW5mby5wb29sSWQudG9TdHJpbmcoKSwgLy8gdXNlIHBvb2xJZFxuICAgIGhhc1Vuc3Rha2luZzogcG9vbE1lbWJlckluZm8udW5ib25kaW5nRXJhcyAmJiBPYmplY3Qua2V5cyhwb29sTWVtYmVySW5mby51bmJvbmRpbmdFcmFzKS5sZW5ndGggPiAwXG4gIH07XG5cbiAgY29uc3QgdW5zdGFraW5nczogVW5zdGFraW5nSW5mb1tdID0gW107XG5cbiAgT2JqZWN0LmVudHJpZXMocG9vbE1lbWJlckluZm8udW5ib25kaW5nRXJhcykuZm9yRWFjaCgoW3VubG9ja2luZ0VyYSwgYW1vdW50XSkgPT4ge1xuICAgIGNvbnN0IGlzQ2xhaW1hYmxlID0gcGFyc2VJbnQodW5sb2NraW5nRXJhKSAtIHBhcnNlSW50KGN1cnJlbnRFcmEpIDwgMDtcbiAgICBjb25zdCByZW1haW5pbmdFcmEgPSBwYXJzZUludCh1bmxvY2tpbmdFcmEpIC0gcGFyc2VJbnQoY3VycmVudEVyYSk7XG4gICAgY29uc3Qgd2FpdGluZ1RpbWUgPSByZW1haW5pbmdFcmEgKiBfU1RBS0lOR19FUkFfTEVOR1RIX01BUFtjaGFpbkluZm8uc2x1Z107XG5cbiAgICB1bnN0YWtpbmdzLnB1c2goe1xuICAgICAgY2hhaW46IGNoYWluSW5mby5zbHVnLFxuICAgICAgc3RhdHVzOiBpc0NsYWltYWJsZSA/IFVuc3Rha2luZ1N0YXR1cy5DTEFJTUFCTEUgOiBVbnN0YWtpbmdTdGF0dXMuVU5MT0NLSU5HLFxuICAgICAgY2xhaW1hYmxlOiBhbW91bnQudG9TdHJpbmcoKSxcbiAgICAgIHdhaXRpbmdUaW1lOiB3YWl0aW5nVGltZVxuICAgIH0gYXMgVW5zdGFraW5nSW5mbyk7XG4gIH0pO1xuXG4gIGNvbnN0IGJuQWN0aXZlU3Rha2UgPSBuZXcgQk4ocG9vbE1lbWJlckluZm8ucG9pbnRzLnRvU3RyaW5nKCkpO1xuXG4gIGlmICghYm5BY3RpdmVTdGFrZS5ndChCTl9aRVJPKSkge1xuICAgIHN0YWtpbmdTdGF0dXMgPSBTdGFraW5nU3RhdHVzLk5PVF9FQVJOSU5HO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjaGFpbjogY2hhaW5JbmZvLnNsdWcsXG4gICAgdHlwZTogU3Rha2luZ1R5cGUuUE9PTEVELFxuICAgIGFkZHJlc3MsXG4gICAgc3RhdHVzOiBzdGFraW5nU3RhdHVzLFxuICAgIGFjdGl2ZVN0YWtlOiBwb29sTWVtYmVySW5mby5wb2ludHMudG9TdHJpbmcoKSxcbiAgICBub21pbmF0aW9uczogW2pvaW5lZFBvb2xJbmZvXSwgLy8gY2FuIG9ubHkgam9pbiAxIHBvb2wgYXQgYSB0aW1lXG4gICAgdW5zdGFraW5nc1xuICB9IGFzIE5vbWluYXRvck1ldGFkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVsYXlWYWxpZGF0b3JzSW5mbyAoY2hhaW46IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBkZWNpbWFsczogbnVtYmVyLCBjaGFpblN0YWtpbmdNZXRhZGF0YTogQ2hhaW5TdGFraW5nTWV0YWRhdGEpOiBQcm9taXNlPFZhbGlkYXRvckluZm9bXT4ge1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuXG4gIGNvbnN0IF9lcmEgPSBhd2FpdCBjaGFpbkFwaS5hcGkucXVlcnkuc3Rha2luZy5jdXJyZW50RXJhKCk7XG4gIGNvbnN0IGN1cnJlbnRFcmEgPSBfZXJhLnRvU3RyaW5nKCk7XG5cbiAgY29uc3QgYWxsVmFsaWRhdG9yczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgdmFsaWRhdG9ySW5mb0xpc3Q6IFZhbGlkYXRvckluZm9bXSA9IFtdO1xuXG4gIGNvbnN0IFtfdG90YWxFcmFTdGFrZSwgX2VyYVN0YWtlcnMsIF9taW5Cb25kLCBfc3Rha2luZ1Jld2FyZHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGNoYWluQXBpLmFwaS5xdWVyeS5zdGFraW5nLmVyYXNUb3RhbFN0YWtlKHBhcnNlSW50KGN1cnJlbnRFcmEpKSxcbiAgICBjaGFpbkFwaS5hcGkucXVlcnkuc3Rha2luZy5lcmFzU3Rha2Vycy5lbnRyaWVzKHBhcnNlSW50KGN1cnJlbnRFcmEpKSxcbiAgICBjaGFpbkFwaS5hcGkucXVlcnkuc3Rha2luZy5taW5Ob21pbmF0b3JCb25kKCksXG4gICAgY2hhaW5BcGkuYXBpLnF1ZXJ5LnN0YWtpbmdSZXdhcmRzPy5kYXRhICYmIGNoYWluQXBpLmFwaS5xdWVyeS5zdGFraW5nUmV3YXJkcy5kYXRhKClcbiAgXSk7XG5cbiAgY29uc3Qgc3Rha2luZ1Jld2FyZHMgPSBfc3Rha2luZ1Jld2FyZHM/LnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBUZXJub2FTdGFraW5nUmV3YXJkc1N0YWtpbmdSZXdhcmRzRGF0YTtcblxuICBjb25zdCBtYXhOb21pbmF0b3JSZXdhcmRlZCA9IGNoYWluQXBpLmFwaS5jb25zdHMuc3Rha2luZy5tYXhOb21pbmF0b3JSZXdhcmRlZFBlclZhbGlkYXRvci50b1N0cmluZygpO1xuICBjb25zdCBiblRvdGFsRXJhU3Rha2UgPSBuZXcgQk4oX3RvdGFsRXJhU3Rha2UudG9TdHJpbmcoKSk7XG4gIGNvbnN0IGVyYVN0YWtlcnMgPSBfZXJhU3Rha2VycyBhcyBhbnlbXTtcblxuICBjb25zdCByYXdNaW5Cb25kID0gX21pbkJvbmQudG9IdW1hbigpIGFzIHN0cmluZztcbiAgY29uc3QgbWluQm9uZCA9IHJhd01pbkJvbmQucmVwbGFjZUFsbCgnLCcsICcnKTtcblxuICBjb25zdCB0b3RhbFN0YWtlTWFwOiBSZWNvcmQ8c3RyaW5nLCBCTj4gPSB7fTtcbiAgY29uc3QgYm5EZWNpbWFscyA9IG5ldyBCTigoMTAgKiogZGVjaW1hbHMpLnRvU3RyaW5nKCkpO1xuXG4gIGZvciAoY29uc3QgaXRlbSBvZiBlcmFTdGFrZXJzKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICBjb25zdCByYXdWYWxpZGF0b3JJbmZvID0gaXRlbVswXS50b0h1bWFuKCkgYXMgYW55W107XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICBjb25zdCByYXdWYWxpZGF0b3JTdGF0ID0gaXRlbVsxXS50b0h1bWFuKCkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcblxuICAgIGNvbnN0IHZhbGlkYXRvckFkZHJlc3MgPSByYXdWYWxpZGF0b3JJbmZvWzFdIGFzIHN0cmluZztcbiAgICBjb25zdCByYXdUb3RhbFN0YWtlID0gcmF3VmFsaWRhdG9yU3RhdC50b3RhbCBhcyBzdHJpbmc7XG4gICAgY29uc3QgcmF3T3duU3Rha2UgPSByYXdWYWxpZGF0b3JTdGF0Lm93biBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBiblRvdGFsU3Rha2UgPSBuZXcgQk4ocmF3VG90YWxTdGFrZS5yZXBsYWNlQWxsKCcsJywgJycpKTtcbiAgICBjb25zdCBibk93blN0YWtlID0gbmV3IEJOKHJhd093blN0YWtlLnJlcGxhY2VBbGwoJywnLCAnJykpO1xuICAgIGNvbnN0IG90aGVyU3Rha2UgPSBiblRvdGFsU3Rha2Uuc3ViKGJuT3duU3Rha2UpO1xuXG4gICAgdG90YWxTdGFrZU1hcFt2YWxpZGF0b3JBZGRyZXNzXSA9IGJuVG90YWxTdGFrZTtcblxuICAgIGxldCBub21pbmF0b3JDb3VudCA9IDA7XG5cbiAgICBpZiAoJ290aGVycycgaW4gcmF3VmFsaWRhdG9yU3RhdCkge1xuICAgICAgY29uc3Qgb3RoZXJzID0gcmF3VmFsaWRhdG9yU3RhdC5vdGhlcnMgYXMgUmVjb3JkPHN0cmluZywgYW55PltdO1xuXG4gICAgICBub21pbmF0b3JDb3VudCA9IG90aGVycy5sZW5ndGg7XG4gICAgfVxuXG4gICAgYWxsVmFsaWRhdG9ycy5wdXNoKHZhbGlkYXRvckFkZHJlc3MpO1xuXG4gICAgdmFsaWRhdG9ySW5mb0xpc3QucHVzaCh7XG4gICAgICBhZGRyZXNzOiB2YWxpZGF0b3JBZGRyZXNzLFxuICAgICAgdG90YWxTdGFrZTogYm5Ub3RhbFN0YWtlLnRvU3RyaW5nKCksXG4gICAgICBvd25TdGFrZTogYm5Pd25TdGFrZS50b1N0cmluZygpLFxuICAgICAgb3RoZXJTdGFrZTogb3RoZXJTdGFrZS50b1N0cmluZygpLFxuICAgICAgbm9taW5hdG9yQ291bnQsXG4gICAgICAvLyB0byBiZSBhZGRlZCBsYXRlclxuICAgICAgY29tbWlzc2lvbjogMCxcbiAgICAgIGV4cGVjdGVkUmV0dXJuOiAwLFxuICAgICAgYmxvY2tlZDogZmFsc2UsXG4gICAgICBpc1ZlcmlmaWVkOiBmYWxzZSxcbiAgICAgIG1pbkJvbmQsXG4gICAgICBpc0Nyb3dkZWQ6IG5vbWluYXRvckNvdW50ID4gcGFyc2VJbnQobWF4Tm9taW5hdG9yUmV3YXJkZWQpXG4gICAgfSBhcyBWYWxpZGF0b3JJbmZvKTtcbiAgfVxuXG4gIGNvbnN0IGV4dHJhSW5mb01hcDogUmVjb3JkPHN0cmluZywgVmFsaWRhdG9yRXh0cmFJbmZvPiA9IHt9O1xuXG4gIGF3YWl0IFByb21pc2UuYWxsKGFsbFZhbGlkYXRvcnMubWFwKGFzeW5jIChhZGRyZXNzKSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgIGNvbnN0IFtfY29tbWlzc2lvbkluZm8sIF9pZGVudGl0eUluZm9dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgY2hhaW5BcGkuYXBpLnF1ZXJ5LnN0YWtpbmcudmFsaWRhdG9ycyhhZGRyZXNzKSxcbiAgICAgIGNoYWluQXBpLmFwaS5xdWVyeT8uaWRlbnRpdHk/LmlkZW50aXR5T2YoYWRkcmVzcylcbiAgICBdKTtcblxuICAgIGNvbnN0IGNvbW1pc3Npb25JbmZvID0gX2NvbW1pc3Npb25JbmZvLnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGNvbnN0IGlkZW50aXR5SW5mbyA9IF9pZGVudGl0eUluZm8gPyAoX2lkZW50aXR5SW5mby50b0h1bWFuKCkgYXMgdW5rbm93biBhcyBQYWxsZXRJZGVudGl0eVJlZ2lzdHJhdGlvbikgOiBudWxsO1xuICAgIGxldCBpZGVudGl0eTtcblxuICAgIGlmIChpZGVudGl0eUluZm8gIT09IG51bGwpIHtcbiAgICAgIGlkZW50aXR5ID0gcGFyc2VJZGVudGl0eShpZGVudGl0eUluZm8pO1xuICAgIH1cblxuICAgIGV4dHJhSW5mb01hcFthZGRyZXNzXSA9IHtcbiAgICAgIGNvbW1pc3Npb246IGNvbW1pc3Npb25JbmZvLmNvbW1pc3Npb24gYXMgc3RyaW5nLFxuICAgICAgYmxvY2tlZDogY29tbWlzc2lvbkluZm8uYmxvY2tlZCBhcyBib29sZWFuLFxuICAgICAgaWRlbnRpdHksXG4gICAgICBpc1ZlcmlmaWVkOiBpZGVudGl0eUluZm8gJiYgaWRlbnRpdHlJbmZvPy5qdWRnZW1lbnRzPy5sZW5ndGggPiAwXG4gICAgfSBhcyBWYWxpZGF0b3JFeHRyYUluZm87XG4gIH0pKTtcblxuICBjb25zdCBibkF2Z1N0YWtlID0gYm5Ub3RhbEVyYVN0YWtlLmRpdm4odmFsaWRhdG9ySW5mb0xpc3QubGVuZ3RoKS5kaXYoYm5EZWNpbWFscyk7XG5cbiAgZm9yIChjb25zdCB2YWxpZGF0b3Igb2YgdmFsaWRhdG9ySW5mb0xpc3QpIHtcbiAgICBjb25zdCBjb21taXNzaW9uID0gZXh0cmFJbmZvTWFwW3ZhbGlkYXRvci5hZGRyZXNzXS5jb21taXNzaW9uO1xuXG4gICAgY29uc3QgYm5WYWxpZGF0b3JTdGFrZSA9IHRvdGFsU3Rha2VNYXBbdmFsaWRhdG9yLmFkZHJlc3NdLmRpdihibkRlY2ltYWxzKTtcblxuICAgIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5hbGVwaC5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICAgIHZhbGlkYXRvci5leHBlY3RlZFJldHVybiA9IGNhbGN1bGF0ZUFsZXBoWmVyb1ZhbGlkYXRvclJldHVybihjaGFpblN0YWtpbmdNZXRhZGF0YS5leHBlY3RlZFJldHVybiBhcyBudW1iZXIsIGdldENvbW1pc3Npb24oY29tbWlzc2lvbikpO1xuICAgIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAudGVybm9hLmluY2x1ZGVzKGNoYWluKSkge1xuICAgICAgY29uc3QgcmV3YXJkUGVyVmFsaWRhdG9yID0gbmV3IEJOKHN0YWtpbmdSZXdhcmRzLnNlc3Npb25FeHRyYVJld2FyZFBheW91dCkuZGl2bihhbGxWYWxpZGF0b3JzLmxlbmd0aCkuZGl2KGJuRGVjaW1hbHMpO1xuICAgICAgY29uc3QgdmFsaWRhdG9yU3Rha2UgPSB0b3RhbFN0YWtlTWFwW3ZhbGlkYXRvci5hZGRyZXNzXS5kaXYoYm5EZWNpbWFscykudG9OdW1iZXIoKTtcblxuICAgICAgdmFsaWRhdG9yLmV4cGVjdGVkUmV0dXJuID0gY2FsY3VsYXRlVGVybm9hVmFsaWRhdG9yUmV0dXJuKHJld2FyZFBlclZhbGlkYXRvci50b051bWJlcigpLCB2YWxpZGF0b3JTdGFrZSwgZ2V0Q29tbWlzc2lvbihjb21taXNzaW9uKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbGlkYXRvci5leHBlY3RlZFJldHVybiA9IGNhbGN1bGF0ZVZhbGlkYXRvclN0YWtlZFJldHVybihjaGFpblN0YWtpbmdNZXRhZGF0YS5leHBlY3RlZFJldHVybiBhcyBudW1iZXIsIGJuVmFsaWRhdG9yU3Rha2UsIGJuQXZnU3Rha2UsIGdldENvbW1pc3Npb24oY29tbWlzc2lvbikpO1xuICAgIH1cblxuICAgIHZhbGlkYXRvci5jb21taXNzaW9uID0gcGFyc2VGbG9hdChjb21taXNzaW9uLnNwbGl0KCclJylbMF0pO1xuICAgIHZhbGlkYXRvci5ibG9ja2VkID0gZXh0cmFJbmZvTWFwW3ZhbGlkYXRvci5hZGRyZXNzXS5ibG9ja2VkO1xuICAgIHZhbGlkYXRvci5pZGVudGl0eSA9IGV4dHJhSW5mb01hcFt2YWxpZGF0b3IuYWRkcmVzc10uaWRlbnRpdHk7XG4gICAgdmFsaWRhdG9yLmlzVmVyaWZpZWQgPSBleHRyYUluZm9NYXBbdmFsaWRhdG9yLmFkZHJlc3NdLmlzVmVyaWZpZWQ7XG4gIH1cblxuICByZXR1cm4gdmFsaWRhdG9ySW5mb0xpc3Q7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWxheVBvb2xzSW5mbyAoY2hhaW46IHN0cmluZywgc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpKTogUHJvbWlzZTxOb21pbmF0aW9uUG9vbEluZm9bXT4ge1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuXG4gIGNvbnN0IG5vbWluYXRpb25Qb29sczogTm9taW5hdGlvblBvb2xJbmZvW10gPSBbXTtcblxuICBjb25zdCBfYWxsUG9vbHNJbmZvID0gYXdhaXQgY2hhaW5BcGkuYXBpLnF1ZXJ5Lm5vbWluYXRpb25Qb29scy5yZXZlcnNlUG9vbElkTG9va3VwLmVudHJpZXMoKTtcblxuICBhd2FpdCBQcm9taXNlLmFsbChfYWxsUG9vbHNJbmZvLm1hcChhc3luYyAoX3Bvb2xJbmZvKSA9PiB7XG4gICAgY29uc3QgcG9vbEFkZHJlc3NMaXN0ID0gX3Bvb2xJbmZvWzBdLnRvSHVtYW4oKSBhcyBzdHJpbmdbXTtcbiAgICBjb25zdCBwb29sQWRkcmVzcyA9IHBvb2xBZGRyZXNzTGlzdFswXTtcbiAgICBjb25zdCBwb29sSWQgPSBfcG9vbEluZm9bMV0udG9QcmltaXRpdmUoKSBhcyBudW1iZXI7XG5cbiAgICBjb25zdCBbX2JvbmRlZFBvb2wsIF9tZXRhZGF0YV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBjaGFpbkFwaS5hcGkucXVlcnkubm9taW5hdGlvblBvb2xzLmJvbmRlZFBvb2xzKHBvb2xJZCksXG4gICAgICBjaGFpbkFwaS5hcGkucXVlcnkubm9taW5hdGlvblBvb2xzLm1ldGFkYXRhKHBvb2xJZClcbiAgICBdKTtcblxuICAgIGNvbnN0IHBvb2xNZXRhZGF0YSA9IF9tZXRhZGF0YS50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgQnl0ZXM7XG4gICAgY29uc3QgYm9uZGVkUG9vbCA9IF9ib25kZWRQb29sLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBQYWxsZXROb21pbmF0aW9uUG9vbHNCb25kZWRQb29sSW5uZXI7XG5cbiAgICBjb25zdCBwb29sTmFtZSA9IHRyYW5zZm9ybVBvb2xOYW1lKHBvb2xNZXRhZGF0YS5pc1V0ZjggPyBwb29sTWV0YWRhdGEudG9VdGY4KCkgOiBwb29sTWV0YWRhdGEudG9TdHJpbmcoKSk7XG5cbiAgICBub21pbmF0aW9uUG9vbHMucHVzaCh7XG4gICAgICBpZDogcG9vbElkLFxuICAgICAgYWRkcmVzczogcG9vbEFkZHJlc3MsXG4gICAgICBuYW1lOiBwb29sTmFtZSxcbiAgICAgIGJvbmRlZEFtb3VudDogYm9uZGVkUG9vbC5wb2ludHM/LnRvU3RyaW5nKCkgfHwgJzAnLFxuICAgICAgcm9sZXM6IGJvbmRlZFBvb2wucm9sZXMsXG4gICAgICBtZW1iZXJDb3VudGVyOiBib25kZWRQb29sLm1lbWJlckNvdW50ZXIsXG4gICAgICBzdGF0ZTogYm9uZGVkUG9vbC5zdGF0ZVxuICAgIH0pO1xuICB9KSk7XG5cbiAgcmV0dXJuIG5vbWluYXRpb25Qb29scztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlbGF5Qm9uZGluZ0V4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBhbW91bnQ6IHN0cmluZywgdGFyZ2V0VmFsaWRhdG9yczogVmFsaWRhdG9ySW5mb1tdLCBjaGFpbkluZm86IF9DaGFpbkluZm8sIGFkZHJlc3M6IHN0cmluZywgbm9taW5hdG9yTWV0YWRhdGE/OiBOb21pbmF0b3JNZXRhZGF0YSwgYm9uZERlc3QgPSAnU3Rha2VkJykge1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuICBjb25zdCBiaW5hcnlBbW91bnQgPSBuZXcgQk4oYW1vdW50KTtcblxuICBsZXQgYm9uZFR4O1xuICBsZXQgbm9taW5hdGVUeDtcblxuICBjb25zdCBfcGFyYW1zID0gY2hhaW5BcGkuYXBpLnR4LnN0YWtpbmcuYm9uZC50b0pTT04oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBjb25zdCBwYXJhbXNDb3VudCA9IChfcGFyYW1zLmFyZ3MgYXMgYW55W10pLmxlbmd0aDtcblxuICBjb25zdCB2YWxpZGF0b3JQYXJhbUxpc3QgPSB0YXJnZXRWYWxpZGF0b3JzLm1hcCgodmFsaWRhdG9yKSA9PiB7XG4gICAgcmV0dXJuIHZhbGlkYXRvci5hZGRyZXNzO1xuICB9KTtcblxuICBpZiAoIW5vbWluYXRvck1ldGFkYXRhKSB7XG4gICAgaWYgKHBhcmFtc0NvdW50ID09PSAyKSB7XG4gICAgICBib25kVHggPSBjaGFpbkFwaS5hcGkudHguc3Rha2luZy5ib25kKGJpbmFyeUFtb3VudCwgYm9uZERlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICBib25kVHggPSBjaGFpbkFwaS5hcGkudHguc3Rha2luZy5ib25kKGFkZHJlc3MsIGJpbmFyeUFtb3VudCwgYm9uZERlc3QpO1xuICAgIH1cblxuICAgIG5vbWluYXRlVHggPSBjaGFpbkFwaS5hcGkudHguc3Rha2luZy5ub21pbmF0ZSh2YWxpZGF0b3JQYXJhbUxpc3QpO1xuXG4gICAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC51dGlsaXR5LmJhdGNoQWxsKFtib25kVHgsIG5vbWluYXRlVHhdKTtcbiAgfVxuXG4gIGlmICghbm9taW5hdG9yTWV0YWRhdGEuaXNCb25kZWRCZWZvcmUpIHsgLy8gZmlyc3QgdGltZVxuICAgIGlmIChwYXJhbXNDb3VudCA9PT0gMikge1xuICAgICAgYm9uZFR4ID0gY2hhaW5BcGkuYXBpLnR4LnN0YWtpbmcuYm9uZChiaW5hcnlBbW91bnQsIGJvbmREZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYm9uZFR4ID0gY2hhaW5BcGkuYXBpLnR4LnN0YWtpbmcuYm9uZChub21pbmF0b3JNZXRhZGF0YS5hZGRyZXNzLCBiaW5hcnlBbW91bnQsIGJvbmREZXN0KTtcbiAgICB9XG5cbiAgICBub21pbmF0ZVR4ID0gY2hhaW5BcGkuYXBpLnR4LnN0YWtpbmcubm9taW5hdGUodmFsaWRhdG9yUGFyYW1MaXN0KTtcblxuICAgIHJldHVybiBjaGFpbkFwaS5hcGkudHgudXRpbGl0eS5iYXRjaEFsbChbYm9uZFR4LCBub21pbmF0ZVR4XSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJpbmFyeUFtb3VudC5ndChCTl9aRVJPKSkge1xuICAgICAgYm9uZFR4ID0gY2hhaW5BcGkuYXBpLnR4LnN0YWtpbmcuYm9uZEV4dHJhKGJpbmFyeUFtb3VudCk7XG4gICAgfVxuXG4gICAgaWYgKG5vbWluYXRvck1ldGFkYXRhLmlzQm9uZGVkQmVmb3JlICYmIHRhcmdldFZhbGlkYXRvcnMubGVuZ3RoID4gMCkge1xuICAgICAgbm9taW5hdGVUeCA9IGNoYWluQXBpLmFwaS50eC5zdGFraW5nLm5vbWluYXRlKHZhbGlkYXRvclBhcmFtTGlzdCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGJvbmRUeCAmJiAhbm9taW5hdGVUeCkge1xuICAgIHJldHVybiBib25kVHg7XG4gIH0gZWxzZSBpZiAobm9taW5hdGVUeCAmJiAhYm9uZFR4KSB7XG4gICAgcmV0dXJuIG5vbWluYXRlVHg7XG4gIH1cblxuICByZXR1cm4gY2hhaW5BcGkuYXBpLnR4LnV0aWxpdHkuYmF0Y2hBbGwoW2JvbmRUeCwgbm9taW5hdGVUeF0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVsYXlVbmJvbmRpbmdFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgYW1vdW50OiBzdHJpbmcsIG5vbWluYXRvck1ldGFkYXRhOiBOb21pbmF0b3JNZXRhZGF0YSkge1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuICBjb25zdCBiaW5hcnlBbW91bnQgPSBuZXcgQk4oYW1vdW50KTtcblxuICBjb25zdCBpc1Vuc3Rha2VBbGwgPSBhbW91bnQgPT09IG5vbWluYXRvck1ldGFkYXRhLmFjdGl2ZVN0YWtlO1xuXG4gIGlmIChpc1Vuc3Rha2VBbGwpIHtcbiAgICBjb25zdCBjaGlsbFR4ID0gY2hhaW5BcGkuYXBpLnR4LnN0YWtpbmcuY2hpbGwoKTtcbiAgICBjb25zdCB1bmJvbmRUeCA9IGNoYWluQXBpLmFwaS50eC5zdGFraW5nLnVuYm9uZChiaW5hcnlBbW91bnQpO1xuXG4gICAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC51dGlsaXR5LmJhdGNoQWxsKFtjaGlsbFR4LCB1bmJvbmRUeF0pO1xuICB9XG5cbiAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC5zdGFraW5nLnVuYm9uZChiaW5hcnlBbW91bnQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVsYXlXaXRoZHJhd2FsRXh0cmluc2ljIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGFkZHJlc3M6IHN0cmluZykge1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuXG4gIGlmIChjaGFpbkFwaS5hcGkudHguc3Rha2luZy53aXRoZHJhd1VuYm9uZGVkLm1ldGEuYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICBjb25zdCBfc2xhc2hpbmdTcGFucyA9IChhd2FpdCBjaGFpbkFwaS5hcGkucXVlcnkuc3Rha2luZy5zbGFzaGluZ1NwYW5zKGFkZHJlc3MpKS50b0h1bWFuKCkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICBjb25zdCBzbGFzaGluZ1NwYW5Db3VudCA9IF9zbGFzaGluZ1NwYW5zICE9PSBudWxsID8gX3NsYXNoaW5nU3BhbnMuc3BhbkluZGV4IGFzIHN0cmluZyA6ICcwJztcblxuICAgIHJldHVybiBjaGFpbkFwaS5hcGkudHguc3Rha2luZy53aXRoZHJhd1VuYm9uZGVkKHNsYXNoaW5nU3BhbkNvdW50KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY2hhaW5BcGkuYXBpLnR4LnN0YWtpbmcud2l0aGRyYXdVbmJvbmRlZCgpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWxheUNhbmNlbFdpdGhkcmF3YWxFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgc2VsZWN0ZWRVbnN0YWtpbmc6IFVuc3Rha2luZ0luZm8pIHtcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcblxuICByZXR1cm4gY2hhaW5BcGkuYXBpLnR4LnN0YWtpbmcucmVib25kKHNlbGVjdGVkVW5zdGFraW5nLmNsYWltYWJsZSk7XG59XG5cbi8vIFBvb2xpbmcgdHhzXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQb29saW5nQ2xhaW1SZXdhcmRFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgYm9uZFJld2FyZCA9IHRydWUpIHtcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcblxuICBpZiAoYm9uZFJld2FyZCkge1xuICAgIHJldHVybiBjaGFpbkFwaS5hcGkudHgubm9taW5hdGlvblBvb2xzLmJvbmRFeHRyYSgnUmV3YXJkcycpO1xuICB9XG5cbiAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC5ub21pbmF0aW9uUG9vbHMuY2xhaW1QYXlvdXQoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBvb2xpbmdCb25kaW5nRXh0cmluc2ljIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIGFtb3VudDogc3RyaW5nLCBzZWxlY3RlZFBvb2xJZDogbnVtYmVyLCBub21pbmF0b3JNZXRhZGF0YTogTm9taW5hdG9yTWV0YWRhdGEgfCB1bmRlZmluZWQpIHtcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcbiAgY29uc3QgYm5BY3RpdmVTdGFrZSA9IG5ldyBCTihub21pbmF0b3JNZXRhZGF0YT8uYWN0aXZlU3Rha2UgfHwgJzAnKTtcblxuICBpZiAoYm5BY3RpdmVTdGFrZS5ndChCTl9aRVJPKSkgeyAvLyBhbHJlYWR5IGpvaW5lZCBhIHBvb2xcbiAgICByZXR1cm4gY2hhaW5BcGkuYXBpLnR4Lm5vbWluYXRpb25Qb29scy5ib25kRXh0cmEoeyBGcmVlQmFsYW5jZTogYW1vdW50IH0pO1xuICB9XG5cbiAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC5ub21pbmF0aW9uUG9vbHMuam9pbihhbW91bnQsIHNlbGVjdGVkUG9vbElkKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBvb2xpbmdVbmJvbmRpbmdFeHRyaW5zaWMgKHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgYW1vdW50OiBzdHJpbmcsIG5vbWluYXRvck1ldGFkYXRhOiBOb21pbmF0b3JNZXRhZGF0YSkge1xuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuXG4gIHJldHVybiBjaGFpbkFwaS5hcGkudHgubm9taW5hdGlvblBvb2xzLnVuYm9uZCh7IElkOiBub21pbmF0b3JNZXRhZGF0YS5hZGRyZXNzIH0sIGFtb3VudCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQb29saW5nV2l0aGRyYXdhbEV4dHJpbnNpYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBub21pbmF0b3JNZXRhZGF0YTogTm9taW5hdG9yTWV0YWRhdGEpIHtcbiAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcblxuICBpZiAoY2hhaW5BcGkuYXBpLnR4Lm5vbWluYXRpb25Qb29scy53aXRoZHJhd1VuYm9uZGVkLm1ldGEuYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICBjb25zdCBfc2xhc2hpbmdTcGFucyA9IChhd2FpdCBjaGFpbkFwaS5hcGkucXVlcnkuc3Rha2luZy5zbGFzaGluZ1NwYW5zKG5vbWluYXRvck1ldGFkYXRhLmFkZHJlc3MpKS50b0h1bWFuKCkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICBjb25zdCBzbGFzaGluZ1NwYW5Db3VudCA9IF9zbGFzaGluZ1NwYW5zICE9PSBudWxsID8gX3NsYXNoaW5nU3BhbnMuc3BhbkluZGV4IGFzIHN0cmluZyA6ICcwJztcblxuICAgIHJldHVybiBjaGFpbkFwaS5hcGkudHgubm9taW5hdGlvblBvb2xzLndpdGhkcmF3VW5ib25kZWQoeyBJZDogbm9taW5hdG9yTWV0YWRhdGEuYWRkcmVzcyB9LCBzbGFzaGluZ1NwYW5Db3VudCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNoYWluQXBpLmFwaS50eC5ub21pbmF0aW9uUG9vbHMud2l0aGRyYXdVbmJvbmRlZCh7IElkOiBub21pbmF0b3JNZXRhZGF0YS5hZGRyZXNzIH0pO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgQ09NTU9OX0NIQUlOX1NMVUdTIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0JztcblxuZXhwb3J0IGNvbnN0IFNVQlNRVUlEX0VORFBPSU5UUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgW0NPTU1PTl9DSEFJTl9TTFVHUy5LVVNBTUFdOiAnaHR0cHM6Ly9zcXVpZC5zdWJzcXVpZC5pby9rdXNhbWEtZXhwbG9yZXIvZ3JhcGhxbCcsXG4gIFtDT01NT05fQ0hBSU5fU0xVR1MuUE9MS0FET1RdOiAnaHR0cHM6Ly9zcXVpZC5zdWJzcXVpZC5pby9wb2xrYWRvdC1leHBsb3Jlci9ncmFwaHFsJyxcbiAgW0NPTU1PTl9DSEFJTl9TTFVHUy5BU1RBUl06ICdodHRwczovL3NxdWlkLnN1YnNxdWlkLmlvL2FzdGFyLWV4cGxvcmVyL2dyYXBocWwnLFxuICBbQ09NTU9OX0NIQUlOX1NMVUdTLk1PT05SSVZFUl06ICdodHRwczovL3NxdWlkLnN1YnNxdWlkLmlvL21vb25yaXZlci1leHBsb3Jlci9ncmFwaHFsJyxcbiAgW0NPTU1PTl9DSEFJTl9TTFVHUy5NT09OQkVBTV06ICdodHRwczovL3NxdWlkLnN1YnNxdWlkLmlvL21vb25iZWFtLWV4cGxvcmVyL2dyYXBocWwnXG59O1xuXG5leHBvcnQgY29uc3QgSU5ERVhFUl9TVVBQT1JURURfU1RBS0lOR19DSEFJTlMgPSBbXG4gIENPTU1PTl9DSEFJTl9TTFVHUy5QT0xLQURPVCBhcyBzdHJpbmcsXG4gIENPTU1PTl9DSEFJTl9TTFVHUy5LVVNBTUEgYXMgc3RyaW5nLFxuICBDT01NT05fQ0hBSU5fU0xVR1MuQVNUQVIgYXMgc3RyaW5nLFxuICBDT01NT05fQ0hBSU5fU0xVR1MuTU9PTlJJVkVSIGFzIHN0cmluZyxcbiAgQ09NTU9OX0NIQUlOX1NMVUdTLk1PT05CRUFNIGFzIHN0cmluZ1xuXTtcblxuZXhwb3J0IGNvbnN0IFNVQlFVRVJZX0VORFBPSU5UUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgcG9sa2Fkb3Q6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2VzdGVuZCcsXG4gIGt1c2FtYTogJ2h0dHBzOi8vYXBpLnN1YnF1ZXJ5Lm5ldHdvcmsvc3Evbm92YS13YWxsZXQvbm92YS1rdXNhbWEnLFxuICB3ZXN0ZW5kOiAnaHR0cHM6Ly9hcGkuc3VicXVlcnkubmV0d29yay9zcS9ub3ZhLXdhbGxldC9ub3ZhLXdlc3RlbmQnLFxuICBwaWNhc3NvOiAnaHR0cHM6Ly9hcGkuc3VicXVlcnkubmV0d29yay9zcS9ub3ZhLXdhbGxldC9ub3ZhLXdhbGxldC1waWNhc3NvJyxcbiAgY2FsYW1hcmk6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LWNhbGFtYXJpJyxcbiAga2hhbGE6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LWtoYWxhJyxcbiAgcGFyYWxsZWw6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LXBhcmFsbGVsJyxcbiAgYmlmcm9zdDogJ2h0dHBzOi8vYXBpLnN1YnF1ZXJ5Lm5ldHdvcmsvc3Evbm92YS13YWxsZXQvbm92YS13YWxsZXQtYmlmcm9zdCcsXG4gIGNsb3ZlcjogJ2h0dHBzOi8vYXBpLnN1YnF1ZXJ5Lm5ldHdvcmsvc3Evbm92YS13YWxsZXQvbm92YS13YWxsZXQtY2xvdmVyJyxcbiAgYmFzaWxpc2s6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LWJhc2lsaXNrJyxcbiAgYWNhbGE6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LWFjYWxhJyxcbiAgYXN0YXI6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LWFzdGFyJyxcbiAga2FydXJhOiAnaHR0cHM6Ly9hcGkuc3VicXVlcnkubmV0d29yay9zcS9ub3ZhLXdhbGxldC9ub3ZhLXdhbGxldC1rYXJ1cmEnLFxuICBhbHRhaXI6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LWFsdGFpcicsXG4gIGtpbHQ6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LWtpbHQnLFxuICByb2Jvbm9taWNzOiAnaHR0cHM6Ly9hcGkuc3VicXVlcnkubmV0d29yay9zcS9ub3ZhLXdhbGxldC9ub3ZhLXdhbGxldC1yb2Jvbm9taWNzJyxcbiAgc3RhdGVtaW50OiAnaHR0cHM6Ly9hcGkuc3VicXVlcnkubmV0d29yay9zcS9ub3ZhLXdhbGxldC9ub3ZhLXdhbGxldC1zdGF0ZW1pbnQnLFxuICBxdWFydHo6ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LXF1YXJ0eicsXG4gIHplaWdlaXN0OiAnaHR0cHM6Ly9hcGkuc3VicXVlcnkubmV0d29yay9zcS9ub3ZhLXdhbGxldC9ub3ZhLXdhbGxldC16ZWl0Z2Vpc3QnLFxuICBzaGlkZW46ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LXNoaWRlbicsXG4gIHN0YXRlbWluZTogJ2h0dHBzOi8vYXBpLnN1YnF1ZXJ5Lm5ldHdvcmsvc3Evbm92YS13YWxsZXQvbm92YS13YWxsZXQtc3RhdGVtaW5lJyxcbiAgbW9vbmJlYW06ICdodHRwczovL2FwaS5zdWJxdWVyeS5uZXR3b3JrL3NxL25vdmEtd2FsbGV0L25vdmEtd2FsbGV0LW1vb25iZWFtJyxcbiAgbW9vbnJpdmVyOiAnaHR0cHM6Ly9hcGkuc3VicXVlcnkubmV0d29yay9zcS9ub3ZhLXdhbGxldC9ub3ZhLXdhbGxldC1tb29ucml2ZXInLFxuICBwaW9uZWVyOiAnaHR0cHM6Ly9hcGkuc3VicXVlcnkubmV0d29yay9zcS9ub3ZhLXdhbGxldC9ub3ZhLXdhbGxldC1iaXQtY291bnRyeSdcbn07XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBOb21pbmF0b3JNZXRhZGF0YSwgU3Rha2luZ0l0ZW0sIFN0YWtpbmdSZXdhcmRJdGVtIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBnZXRBbXBsaXR1ZGVTdGFraW5nT25DaGFpbiwgZ2V0QXN0YXJTdGFraW5nT25DaGFpbiwgZ2V0UGFyYVN0YWtpbmdPbkNoYWluIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL3BhcmFDaGFpbic7XG5pbXBvcnQgeyBnZXROb21pbmF0aW9uUG9vbFJld2FyZCwgZ2V0UmVsYXlQb29saW5nT25DaGFpbiwgZ2V0UmVsYXlTdGFraW5nT25DaGFpbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvc3Rha2luZy9yZWxheUNoYWluJztcbmltcG9ydCB7IGdldEFsbFN1YnNxdWlkU3Rha2luZyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvc3Rha2luZy9zdWJzcXVpZFN0YWtpbmcnO1xuaW1wb3J0IHsgX1BVUkVfRVZNX0NIQUlOUywgX1NUQUtJTkdfQ0hBSU5fR1JPVVAgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgX2lzQ2hhaW5Fdm1Db21wYXRpYmxlLCBfaXNDaGFpblN1cHBvcnRTdWJzdHJhdGVTdGFraW5nLCBfaXNTdWJzdHJhdGVSZWxheUNoYWluIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3V0aWxzJztcbmltcG9ydCB7IGNhdGVnb3J5QWRkcmVzc2VzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5cbmludGVyZmFjZSBQcm9taXNlTWFwcGluZyB7XG4gIGFwaTogX1N1YnN0cmF0ZUFwaSxcbiAgY2hhaW46IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3Rha2luZ09uQ2hhaW5BcGkgKGFkZHJlc3Nlczogc3RyaW5nW10sIHN1YnN0cmF0ZUFwaU1hcDogUmVjb3JkPHN0cmluZywgX1N1YnN0cmF0ZUFwaT4sIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIHN0YWtpbmdDYWxsYmFjazogKG5ldHdvcmtLZXk6IHN0cmluZywgcnM6IFN0YWtpbmdJdGVtKSA9PiB2b2lkLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrOiAobm9taW5hdG9yTWV0YWRhdGE6IE5vbWluYXRvck1ldGFkYXRhKSA9PiB2b2lkKSB7XG4gIGNvbnN0IGZpbHRlcmVkQXBpTWFwOiBQcm9taXNlTWFwcGluZ1tdID0gW107XG4gIGNvbnN0IFtzdWJzdHJhdGVBZGRyZXNzZXMsIGV2bUFkZHJlc3Nlc10gPSBjYXRlZ29yeUFkZHJlc3NlcyhhZGRyZXNzZXMpO1xuXG4gIE9iamVjdC5lbnRyaWVzKGNoYWluSW5mb01hcCkuZm9yRWFjaCgoW25ldHdvcmtLZXksIGNoYWluSW5mb10pID0+IHtcbiAgICBpZiAoX1BVUkVfRVZNX0NIQUlOUy5pbmRleE9mKG5ldHdvcmtLZXkpIDwgMCAmJiBfaXNDaGFpblN1cHBvcnRTdWJzdHJhdGVTdGFraW5nKGNoYWluSW5mbykpIHtcbiAgICAgIGZpbHRlcmVkQXBpTWFwLnB1c2goeyBjaGFpbjogbmV0d29ya0tleSwgYXBpOiBzdWJzdHJhdGVBcGlNYXBbbmV0d29ya0tleV0gfSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCB1bnN1Ykxpc3Q6IFZvaWRGdW5jdGlvbltdID0gW107XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gIGZpbHRlcmVkQXBpTWFwLmZvckVhY2goYXN5bmMgKHsgYXBpOiBhcGlQcm9taXNlLCBjaGFpbiB9KSA9PiB7XG4gICAgY29uc3QgcGFyZW50QXBpID0gYXdhaXQgYXBpUHJvbWlzZS5pc1JlYWR5O1xuICAgIGNvbnN0IHVzZUFkZHJlc3NlcyA9IF9pc0NoYWluRXZtQ29tcGF0aWJsZShjaGFpbkluZm9NYXBbY2hhaW5dKSA/IGV2bUFkZHJlc3NlcyA6IHN1YnN0cmF0ZUFkZHJlc3NlcztcblxuICAgIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5hbXBsaXR1ZGUuaW5jbHVkZXMoY2hhaW4pKSB7XG4gICAgICBjb25zdCB1bnN1YiA9IGF3YWl0IGdldEFtcGxpdHVkZVN0YWtpbmdPbkNoYWluKHBhcmVudEFwaSwgdXNlQWRkcmVzc2VzLCBjaGFpbkluZm9NYXAsIGNoYWluLCBzdGFraW5nQ2FsbGJhY2ssIG5vbWluYXRvclN0YXRlQ2FsbGJhY2spO1xuXG4gICAgICB1bnN1Ykxpc3QucHVzaCh1bnN1Yik7XG4gICAgfSBlbHNlIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5hc3Rhci5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICAgIGNvbnN0IHVuc3ViID0gYXdhaXQgZ2V0QXN0YXJTdGFraW5nT25DaGFpbihwYXJlbnRBcGksIHVzZUFkZHJlc3NlcywgY2hhaW5JbmZvTWFwLCBjaGFpbiwgc3Rha2luZ0NhbGxiYWNrLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrKTtcblxuICAgICAgdW5zdWJMaXN0LnB1c2godW5zdWIpO1xuICAgIH0gZWxzZSBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAucGFyYS5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICAgIGNvbnN0IHVuc3ViID0gYXdhaXQgZ2V0UGFyYVN0YWtpbmdPbkNoYWluKHBhcmVudEFwaSwgdXNlQWRkcmVzc2VzLCBjaGFpbkluZm9NYXAsIGNoYWluLCBzdGFraW5nQ2FsbGJhY2ssIG5vbWluYXRvclN0YXRlQ2FsbGJhY2spO1xuXG4gICAgICB1bnN1Ykxpc3QucHVzaCh1bnN1Yik7XG4gICAgfSBlbHNlIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5yZWxheS5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICAgIGNvbnN0IHVuc3ViID0gYXdhaXQgZ2V0UmVsYXlTdGFraW5nT25DaGFpbihwYXJlbnRBcGksIHVzZUFkZHJlc3NlcywgY2hhaW5JbmZvTWFwLCBjaGFpbiwgc3Rha2luZ0NhbGxiYWNrLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrKTtcblxuICAgICAgdW5zdWJMaXN0LnB1c2godW5zdWIpO1xuICAgIH1cblxuICAgIGlmIChfU1RBS0lOR19DSEFJTl9HUk9VUC5ub21pbmF0aW9uUG9vbC5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICAgIGNvbnN0IHVuc3ViID0gYXdhaXQgZ2V0UmVsYXlQb29saW5nT25DaGFpbihwYXJlbnRBcGksIHVzZUFkZHJlc3NlcywgY2hhaW5JbmZvTWFwLCBjaGFpbiwgc3Rha2luZ0NhbGxiYWNrLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrKTtcblxuICAgICAgdW5zdWJMaXN0LnB1c2godW5zdWIpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuICgpID0+IHtcbiAgICB1bnN1Ykxpc3QuZm9yRWFjaCgodW5zdWIpID0+IHtcbiAgICAgIHVuc3ViICYmIHVuc3ViKCk7XG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROb21pbmF0aW9uU3Rha2luZ1Jld2FyZERhdGEgKGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNhbGxiYWNrOiAocmV3YXJkSXRlbTogU3Rha2luZ1Jld2FyZEl0ZW0pID0+IHZvaWQpIHtcbiAgLy8gbWlnaHQgcmV0cmlldmUgZnJvbSBvdGhlciBzb3VyY2VzXG4gIGF3YWl0IGdldEFsbFN1YnNxdWlkU3Rha2luZyhhZGRyZXNzZXMsIGNoYWluSW5mb01hcCwgY2FsbGJhY2spO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UG9vbGluZ1N0YWtpbmdSZXdhcmREYXRhIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBuZXR3b3JrTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPiwgZG90U2FtYUFwaU1hcDogUmVjb3JkPHN0cmluZywgX1N1YnN0cmF0ZUFwaT4sIGNhbGxiYWNrOiAocnM6IFN0YWtpbmdSZXdhcmRJdGVtKSA9PiB2b2lkKSB7XG4gIGNvbnN0IGFjdGl2ZU5ldHdvcmtzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIE9iamVjdC5lbnRyaWVzKG5ldHdvcmtNYXApLmZvckVhY2goKFtrZXksIGNoYWluSW5mb10pID0+IHtcbiAgICBpZiAoX2lzQ2hhaW5TdXBwb3J0U3Vic3RyYXRlU3Rha2luZyhjaGFpbkluZm8pICYmIF9pc1N1YnN0cmF0ZVJlbGF5Q2hhaW4oY2hhaW5JbmZvKSkge1xuICAgICAgYWN0aXZlTmV0d29ya3MucHVzaChrZXkpO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGFjdGl2ZU5ldHdvcmtzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGF3YWl0IGdldE5vbWluYXRpb25Qb29sUmV3YXJkKGFkZHJlc3NlcywgbmV0d29ya01hcCwgZG90U2FtYUFwaU1hcCwgY2FsbGJhY2spO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgQVBJSXRlbVN0YXRlLCBOb21pbmF0b3JNZXRhZGF0YSwgU3Rha2luZ0l0ZW0sIFN0YWtpbmdSZXdhcmRJdGVtLCBTdGFraW5nU3RhdHVzLCBTdGFraW5nVHlwZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgc3Vic2NyaWJlQW1wbGl0dWRlTm9taW5hdG9yTWV0YWRhdGEgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3N0YWtpbmcvYm9uZGluZy9hbXBsaXR1ZGUnO1xuaW1wb3J0IHsgc3Vic2NyaWJlQXN0YXJOb21pbmF0b3JNZXRhZGF0YSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvc3Rha2luZy9ib25kaW5nL2FzdGFyJztcbmltcG9ydCB7IHN1YnNjcmliZVBhcmFDaGFpbk5vbWluYXRvck1ldGFkYXRhIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL2JvbmRpbmcvcGFyYUNoYWluJztcbmltcG9ydCB7IFBhbGxldERhcHBzU3Rha2luZ0FjY291bnRMZWRnZXIsIFBhbGxldFBhcmFjaGFpblN0YWtpbmdEZWxlZ2F0b3IsIFBhcmFjaGFpblN0YWtpbmdTdGFrZU9wdGlvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvc3Rha2luZy9ib25kaW5nL3V0aWxzJztcbmltcG9ydCB7IF9TVEFLSU5HX0NIQUlOX0dST1VQIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IF9nZXRDaGFpbk5hdGl2ZVRva2VuQmFzaWNJbmZvIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3V0aWxzJztcbmltcG9ydCB7IHJlZm9ybWF0QWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuXG5pbXBvcnQgeyBDb2RlYyB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcyc7XG5pbXBvcnQgeyBCTiwgQk5fWkVSTyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IGlzRXRoZXJldW1BZGRyZXNzIH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvJztcblxuZnVuY3Rpb24gZ2V0U2luZ2xlU3Rha2luZ0FtcGxpdHVkZSAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCBhZGRyZXNzOiBzdHJpbmcsIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNoYWluOiBzdHJpbmcsIHN0YWtpbmdDYWxsYmFjazogKG5ldHdvcmtLZXk6IHN0cmluZywgcnM6IFN0YWtpbmdJdGVtKSA9PiB2b2lkLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrOiAobm9taW5hdG9yTWV0YWRhdGE6IE5vbWluYXRvck1ldGFkYXRhKSA9PiB2b2lkKSB7XG4gIHJldHVybiBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5TXVsdGkoW1xuICAgIFtzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcuZGVsZWdhdG9yU3RhdGUsIGFkZHJlc3NdLFxuICAgIFtzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpblN0YWtpbmcudW5zdGFraW5nLCBhZGRyZXNzXVxuICBdLCBhc3luYyAoW19kZWxlZ2F0b3JTdGF0ZSwgX3Vuc3Rha2luZ10pID0+IHtcbiAgICBjb25zdCBkZWxlZ2F0b3JTdGF0ZSA9IF9kZWxlZ2F0b3JTdGF0ZS50b1ByaW1pdGl2ZSgpIGFzIHVua25vd24gYXMgUGFyYWNoYWluU3Rha2luZ1N0YWtlT3B0aW9uO1xuICAgIGNvbnN0IHVuc3Rha2luZ0luZm8gPSBfdW5zdGFraW5nLnRvUHJpbWl0aXZlKCkgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAgIGNvbnN0IHsgc3ltYm9sIH0gPSBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyhjaGFpbkluZm9NYXBbY2hhaW5dKTtcbiAgICBjb25zdCBvd25lciA9IHJlZm9ybWF0QWRkcmVzcyhhZGRyZXNzLCA0Mik7XG5cbiAgICBpZiAoIWRlbGVnYXRvclN0YXRlICYmICF1bnN0YWtpbmdJbmZvKSB7XG4gICAgICBzdGFraW5nQ2FsbGJhY2soY2hhaW4sIHtcbiAgICAgICAgbmFtZTogY2hhaW5JbmZvTWFwW2NoYWluXS5uYW1lLFxuICAgICAgICBjaGFpbjogY2hhaW4sXG4gICAgICAgIGJhbGFuY2U6ICcwJyxcbiAgICAgICAgYWN0aXZlQmFsYW5jZTogJzAnLFxuICAgICAgICB1bmxvY2tpbmdCYWxhbmNlOiAnMCcsXG4gICAgICAgIG5hdGl2ZVRva2VuOiBzeW1ib2wsXG4gICAgICAgIHVuaXQ6IHN5bWJvbCxcbiAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgICAgICBhZGRyZXNzOiBvd25lclxuICAgICAgfSBhcyBTdGFraW5nSXRlbSk7XG5cbiAgICAgIG5vbWluYXRvclN0YXRlQ2FsbGJhY2soe1xuICAgICAgICBjaGFpbixcbiAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgICAgICBhZGRyZXNzOiBvd25lcixcbiAgICAgICAgc3RhdHVzOiBTdGFraW5nU3RhdHVzLk5PVF9TVEFLSU5HLFxuICAgICAgICBhY3RpdmVTdGFrZTogJzAnLFxuICAgICAgICBub21pbmF0aW9uczogW10sXG4gICAgICAgIHVuc3Rha2luZ3M6IFtdXG4gICAgICB9IGFzIE5vbWluYXRvck1ldGFkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYWN0aXZlQmFsYW5jZSA9IGRlbGVnYXRvclN0YXRlID8gbmV3IEJOKGRlbGVnYXRvclN0YXRlLmFtb3VudC50b1N0cmluZygpKSA6IEJOX1pFUk87XG4gICAgICBsZXQgdW5zdGFraW5nQmFsYW5jZSA9IEJOX1pFUk87XG5cbiAgICAgIGlmICh1bnN0YWtpbmdJbmZvKSB7XG4gICAgICAgIE9iamVjdC52YWx1ZXModW5zdGFraW5nSW5mbykuZm9yRWFjaCgodW5zdGFraW5nQW1vdW50KSA9PiB7XG4gICAgICAgICAgY29uc3QgYm5VbnN0YWtpbmdBbW91bnQgPSBuZXcgQk4odW5zdGFraW5nQW1vdW50LnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgdW5zdGFraW5nQmFsYW5jZSA9IHVuc3Rha2luZ0JhbGFuY2UuYWRkKGJuVW5zdGFraW5nQW1vdW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRvdGFsQmFsYW5jZSA9IGFjdGl2ZUJhbGFuY2UuYWRkKHVuc3Rha2luZ0JhbGFuY2UpO1xuXG4gICAgICBjb25zdCBzdGFraW5nSXRlbSA9IHtcbiAgICAgICAgbmFtZTogY2hhaW5JbmZvTWFwW2NoYWluXS5uYW1lLFxuICAgICAgICBjaGFpbjogY2hhaW4sXG4gICAgICAgIGJhbGFuY2U6IHRvdGFsQmFsYW5jZS50b1N0cmluZygpLFxuICAgICAgICBhY3RpdmVCYWxhbmNlOiBhY3RpdmVCYWxhbmNlLnRvU3RyaW5nKCksXG4gICAgICAgIHVubG9ja2luZ0JhbGFuY2U6IHVuc3Rha2luZ0JhbGFuY2UudG9TdHJpbmcoKSxcbiAgICAgICAgbmF0aXZlVG9rZW46IHN5bWJvbCxcbiAgICAgICAgdW5pdDogc3ltYm9sLFxuICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZLFxuICAgICAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgICAgIGFkZHJlc3M6IG93bmVyXG4gICAgICB9IGFzIFN0YWtpbmdJdGVtO1xuXG4gICAgICBzdGFraW5nQ2FsbGJhY2soY2hhaW4sIHN0YWtpbmdJdGVtKTtcblxuICAgICAgY29uc3Qgbm9taW5hdG9yTWV0YWRhdGEgPSBhd2FpdCBzdWJzY3JpYmVBbXBsaXR1ZGVOb21pbmF0b3JNZXRhZGF0YShjaGFpbkluZm9NYXBbY2hhaW5dLCBvd25lciwgc3Vic3RyYXRlQXBpLCBkZWxlZ2F0b3JTdGF0ZSwgdW5zdGFraW5nSW5mbyk7XG5cbiAgICAgIG5vbWluYXRvclN0YXRlQ2FsbGJhY2sobm9taW5hdG9yTWV0YWRhdGEpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldE11bHRpU3Rha2luZ0FtcGxpdHVkZSAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCB1c2VBZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbkluZm9NYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+LCBjaGFpbjogc3RyaW5nLCBzdGFraW5nQ2FsbGJhY2s6IChuZXR3b3JrS2V5OiBzdHJpbmcsIHJzOiBTdGFraW5nSXRlbSkgPT4gdm9pZCwgbm9taW5hdG9yU3RhdGVDYWxsYmFjazogKG5vbWluYXRvck1ldGFkYXRhOiBOb21pbmF0b3JNZXRhZGF0YSkgPT4gdm9pZCkge1xuICByZXR1cm4gc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLmRlbGVnYXRvclN0YXRlLm11bHRpKHVzZUFkZHJlc3NlcywgYXN5bmMgKGxlZGdlcnM6IENvZGVjW10pID0+IHtcbiAgICBpZiAobGVkZ2Vycykge1xuICAgICAgY29uc3QgeyBzeW1ib2wgfSA9IF9nZXRDaGFpbk5hdGl2ZVRva2VuQmFzaWNJbmZvKGNoYWluSW5mb01hcFtjaGFpbl0pO1xuICAgICAgY29uc3QgX3Vuc3Rha2luZ1N0YXRlcyA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkucGFyYWNoYWluU3Rha2luZy51bnN0YWtpbmcubXVsdGkodXNlQWRkcmVzc2VzKTtcblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwobGVkZ2Vycy5tYXAoYXN5bmMgKF9kZWxlZ2F0b3JTdGF0ZSwgaSkgPT4ge1xuICAgICAgICBjb25zdCBvd25lciA9IHJlZm9ybWF0QWRkcmVzcyh1c2VBZGRyZXNzZXNbaV0sIDQyKTtcbiAgICAgICAgY29uc3QgZGVsZWdhdG9yU3RhdGUgPSBfZGVsZWdhdG9yU3RhdGUudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhcmFjaGFpblN0YWtpbmdTdGFrZU9wdGlvbjtcbiAgICAgICAgY29uc3QgdW5zdGFraW5nSW5mbyA9IF91bnN0YWtpbmdTdGF0ZXNbaV0udG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG5cbiAgICAgICAgaWYgKCFkZWxlZ2F0b3JTdGF0ZSAmJiAhdW5zdGFraW5nSW5mbykge1xuICAgICAgICAgIHN0YWtpbmdDYWxsYmFjayhjaGFpbiwge1xuICAgICAgICAgICAgbmFtZTogY2hhaW5JbmZvTWFwW2NoYWluXS5uYW1lLFxuICAgICAgICAgICAgY2hhaW46IGNoYWluLFxuICAgICAgICAgICAgYmFsYW5jZTogJzAnLFxuICAgICAgICAgICAgYWN0aXZlQmFsYW5jZTogJzAnLFxuICAgICAgICAgICAgdW5sb2NraW5nQmFsYW5jZTogJzAnLFxuICAgICAgICAgICAgbmF0aXZlVG9rZW46IHN5bWJvbCxcbiAgICAgICAgICAgIHVuaXQ6IHN5bWJvbCxcbiAgICAgICAgICAgIHN0YXRlOiBBUElJdGVtU3RhdGUuUkVBRFksXG4gICAgICAgICAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgICAgICAgICBhZGRyZXNzOiBvd25lclxuICAgICAgICAgIH0gYXMgU3Rha2luZ0l0ZW0pO1xuXG4gICAgICAgICAgbm9taW5hdG9yU3RhdGVDYWxsYmFjayh7XG4gICAgICAgICAgICBjaGFpbixcbiAgICAgICAgICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICAgICAgICAgIGFkZHJlc3M6IG93bmVyLFxuICAgICAgICAgICAgc3RhdHVzOiBTdGFraW5nU3RhdHVzLk5PVF9TVEFLSU5HLFxuICAgICAgICAgICAgYWN0aXZlU3Rha2U6ICcwJyxcbiAgICAgICAgICAgIG5vbWluYXRpb25zOiBbXSxcbiAgICAgICAgICAgIHVuc3Rha2luZ3M6IFtdXG4gICAgICAgICAgfSBhcyBOb21pbmF0b3JNZXRhZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgYWN0aXZlQmFsYW5jZSA9IGRlbGVnYXRvclN0YXRlID8gbmV3IEJOKGRlbGVnYXRvclN0YXRlLmFtb3VudC50b1N0cmluZygpKSA6IEJOX1pFUk87XG4gICAgICAgICAgbGV0IHVuc3Rha2luZ0JhbGFuY2UgPSBCTl9aRVJPO1xuXG4gICAgICAgICAgaWYgKHVuc3Rha2luZ0luZm8pIHtcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModW5zdGFraW5nSW5mbykuZm9yRWFjaCgodW5zdGFraW5nQW1vdW50KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGJuVW5zdGFraW5nQW1vdW50ID0gbmV3IEJOKHVuc3Rha2luZ0Ftb3VudC50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICB1bnN0YWtpbmdCYWxhbmNlID0gdW5zdGFraW5nQmFsYW5jZS5hZGQoYm5VbnN0YWtpbmdBbW91bnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdG90YWxCYWxhbmNlID0gYWN0aXZlQmFsYW5jZS5hZGQodW5zdGFraW5nQmFsYW5jZSk7XG5cbiAgICAgICAgICBjb25zdCBzdGFraW5nSXRlbSA9IHtcbiAgICAgICAgICAgIG5hbWU6IGNoYWluSW5mb01hcFtjaGFpbl0ubmFtZSxcbiAgICAgICAgICAgIGNoYWluOiBjaGFpbixcbiAgICAgICAgICAgIGJhbGFuY2U6IHRvdGFsQmFsYW5jZS50b1N0cmluZygpLFxuICAgICAgICAgICAgYWN0aXZlQmFsYW5jZTogYWN0aXZlQmFsYW5jZS50b1N0cmluZygpLFxuICAgICAgICAgICAgdW5sb2NraW5nQmFsYW5jZTogdW5zdGFraW5nQmFsYW5jZS50b1N0cmluZygpLFxuICAgICAgICAgICAgbmF0aXZlVG9rZW46IHN5bWJvbCxcbiAgICAgICAgICAgIHVuaXQ6IHN5bWJvbCxcbiAgICAgICAgICAgIHN0YXRlOiBBUElJdGVtU3RhdGUuUkVBRFksXG4gICAgICAgICAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgICAgICAgICBhZGRyZXNzOiBvd25lclxuICAgICAgICAgIH0gYXMgU3Rha2luZ0l0ZW07XG5cbiAgICAgICAgICBzdGFraW5nQ2FsbGJhY2soY2hhaW4sIHN0YWtpbmdJdGVtKTtcblxuICAgICAgICAgIGNvbnN0IG5vbWluYXRvck1ldGFkYXRhID0gYXdhaXQgc3Vic2NyaWJlQW1wbGl0dWRlTm9taW5hdG9yTWV0YWRhdGEoY2hhaW5JbmZvTWFwW2NoYWluXSwgb3duZXIsIHN1YnN0cmF0ZUFwaSwgZGVsZWdhdG9yU3RhdGUsIHVuc3Rha2luZ0luZm8pO1xuXG4gICAgICAgICAgbm9taW5hdG9yU3RhdGVDYWxsYmFjayhub21pbmF0b3JNZXRhZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW1wbGl0dWRlU3Rha2luZ09uQ2hhaW4gKHBhcmVudEFwaTogX1N1YnN0cmF0ZUFwaSwgdXNlQWRkcmVzc2VzOiBzdHJpbmdbXSwgbmV0d29ya3M6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+LCBjaGFpbjogc3RyaW5nLCBjYWxsYmFjazogKG5ldHdvcmtLZXk6IHN0cmluZywgcnM6IFN0YWtpbmdJdGVtKSA9PiB2b2lkLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrOiAobm9taW5hdG9yTWV0YWRhdGE6IE5vbWluYXRvck1ldGFkYXRhKSA9PiB2b2lkKSB7XG4gIGlmICh1c2VBZGRyZXNzZXMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGdldFNpbmdsZVN0YWtpbmdBbXBsaXR1ZGUocGFyZW50QXBpLCB1c2VBZGRyZXNzZXNbMF0sIG5ldHdvcmtzLCBjaGFpbiwgY2FsbGJhY2ssIG5vbWluYXRvclN0YXRlQ2FsbGJhY2spO1xuICB9XG5cbiAgcmV0dXJuIGdldE11bHRpU3Rha2luZ0FtcGxpdHVkZShwYXJlbnRBcGksIHVzZUFkZHJlc3NlcywgbmV0d29ya3MsIGNoYWluLCBjYWxsYmFjaywgbm9taW5hdG9yU3RhdGVDYWxsYmFjayk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbXBsaXR1ZGVVbmNsYWltZWRTdGFraW5nUmV3YXJkIChzdWJzdHJhdGVBcGlNYXA6IFJlY29yZDxzdHJpbmcsIF9TdWJzdHJhdGVBcGk+LCBhZGRyZXNzZXM6IHN0cmluZ1tdLCBuZXR3b3JrczogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNoYWluczogc3RyaW5nW10sIGNhbGxCYWNrOiAocnM6IFN0YWtpbmdSZXdhcmRJdGVtKSA9PiB2b2lkKTogUHJvbWlzZTxTdGFraW5nUmV3YXJkSXRlbVtdPiB7XG4gIGlmIChjaGFpbnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgdXNlQWRkcmVzc2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGFkZHJlc3Nlcy5mb3JFYWNoKChhZGRyZXNzKSA9PiB7XG4gICAgaWYgKCFpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKSkge1xuICAgICAgdXNlQWRkcmVzc2VzLnB1c2goYWRkcmVzcyk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCB1bmNsYWltZWRSZXdhcmRMaXN0OiBTdGFraW5nUmV3YXJkSXRlbVtdID0gW107XG5cbiAgYXdhaXQgUHJvbWlzZS5hbGwoY2hhaW5zLm1hcChhc3luYyAoY2hhaW4pID0+IHtcbiAgICBpZiAoX1NUQUtJTkdfQ0hBSU5fR1JPVVAuYW1wbGl0dWRlLmluY2x1ZGVzKGNoYWluKSAmJiAhX1NUQUtJTkdfQ0hBSU5fR1JPVVAua2lsdC5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICAgIGNvbnN0IG5ldHdvcmtJbmZvID0gbmV0d29ya3NbY2hhaW5dO1xuICAgICAgY29uc3QgYXBpUHJvcHMgPSBhd2FpdCBzdWJzdHJhdGVBcGlNYXBbY2hhaW5dLmlzUmVhZHk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHVzZUFkZHJlc3Nlcy5tYXAoYXN5bmMgKGFkZHJlc3MpID0+IHtcbiAgICAgICAgY29uc3QgX3VuY2xhaW1lZFJld2FyZCA9IGF3YWl0IGFwaVByb3BzLmFwaS5xdWVyeS5wYXJhY2hhaW5TdGFraW5nLnJld2FyZHMoYWRkcmVzcyk7XG5cbiAgICAgICAgY2FsbEJhY2soe1xuICAgICAgICAgIGNoYWluLFxuICAgICAgICAgIG5hbWU6IG5ldHdvcmtJbmZvLm5hbWUsXG4gICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgICB0eXBlOiBTdGFraW5nVHlwZS5OT01JTkFURUQsXG4gICAgICAgICAgYWRkcmVzczogcmVmb3JtYXRBZGRyZXNzKGFkZHJlc3MsIDQyKSxcbiAgICAgICAgICB1bmNsYWltZWRSZXdhcmQ6IF91bmNsYWltZWRSZXdhcmQudG9TdHJpbmcoKVxuICAgICAgICB9IGFzIFN0YWtpbmdSZXdhcmRJdGVtKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0pKTtcblxuICByZXR1cm4gdW5jbGFpbWVkUmV3YXJkTGlzdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmFTdGFraW5nT25DaGFpbiAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpLCB1c2VBZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbkluZm9NYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+LCBjaGFpbjogc3RyaW5nLCBzdGFraW5nQ2FsbGJhY2s6IChuZXR3b3JrS2V5OiBzdHJpbmcsIHJzOiBTdGFraW5nSXRlbSkgPT4gdm9pZCwgbm9taW5hdG9yU3RhdGVDYWxsYmFjazogKG5vbWluYXRvck1ldGFkYXRhOiBOb21pbmF0b3JNZXRhZGF0YSkgPT4gdm9pZCkge1xuICBjb25zdCB7IHN5bWJvbCB9ID0gX2dldENoYWluTmF0aXZlVG9rZW5CYXNpY0luZm8oY2hhaW5JbmZvTWFwW2NoYWluXSk7XG5cbiAgcmV0dXJuIHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkucGFyYWNoYWluU3Rha2luZy5kZWxlZ2F0b3JTdGF0ZS5tdWx0aSh1c2VBZGRyZXNzZXMsIGFzeW5jIChsZWRnZXJzOiBDb2RlY1tdKSA9PiB7XG4gICAgaWYgKGxlZGdlcnMpIHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGxlZGdlcnMubWFwKGFzeW5jIChfZGVsZWdhdG9yU3RhdGUsIGkpID0+IHtcbiAgICAgICAgY29uc3QgZGVsZWdhdG9yU3RhdGUgPSBfZGVsZWdhdG9yU3RhdGUudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldFBhcmFjaGFpblN0YWtpbmdEZWxlZ2F0b3I7XG4gICAgICAgIGNvbnN0IG93bmVyID0gcmVmb3JtYXRBZGRyZXNzKHVzZUFkZHJlc3Nlc1tpXSwgNDIpO1xuXG4gICAgICAgIGlmIChkZWxlZ2F0b3JTdGF0ZSkge1xuICAgICAgICAgIGNvbnN0IF90b3RhbEJhbGFuY2UgPSBkZWxlZ2F0b3JTdGF0ZS50b3RhbDtcbiAgICAgICAgICAvLyBsZXQgX3VubG9ja2luZ0JhbGFuY2UgPSBkZWxlZ2F0b3JTdGF0ZS5sZXNzVG90YWwgPyBkZWxlZ2F0b3JTdGF0ZS5sZXNzVG90YWwgOiBkZWxlZ2F0b3JTdGF0ZS5yZXF1ZXN0cy5sZXNzVG90YWw7XG4gICAgICAgICAgY29uc3QgX3VubG9ja2luZ0JhbGFuY2UgPSBkZWxlZ2F0b3JTdGF0ZS5sZXNzVG90YWw7XG5cbiAgICAgICAgICBjb25zdCB0b3RhbEJhbGFuY2UgPSBuZXcgQk4oX3RvdGFsQmFsYW5jZS50b1N0cmluZygpKTtcbiAgICAgICAgICBjb25zdCB1bmxvY2tpbmdCYWxhbmNlID0gbmV3IEJOKF91bmxvY2tpbmdCYWxhbmNlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGNvbnN0IGFjdGl2ZUJhbGFuY2UgPSB0b3RhbEJhbGFuY2Uuc3ViKHVubG9ja2luZ0JhbGFuY2UpO1xuXG4gICAgICAgICAgc3Rha2luZ0NhbGxiYWNrKGNoYWluLCB7XG4gICAgICAgICAgICBuYW1lOiBjaGFpbkluZm9NYXBbY2hhaW5dLm5hbWUsXG4gICAgICAgICAgICBjaGFpbjogY2hhaW4sXG4gICAgICAgICAgICBiYWxhbmNlOiB0b3RhbEJhbGFuY2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGFjdGl2ZUJhbGFuY2U6IGFjdGl2ZUJhbGFuY2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHVubG9ja2luZ0JhbGFuY2U6IHVubG9ja2luZ0JhbGFuY2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIG5hdGl2ZVRva2VuOiBzeW1ib2wsXG4gICAgICAgICAgICB1bml0OiBzeW1ib2wsXG4gICAgICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZLFxuICAgICAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgICAgICAgICAgYWRkcmVzczogb3duZXJcbiAgICAgICAgICB9IGFzIFN0YWtpbmdJdGVtKTtcblxuICAgICAgICAgIGNvbnN0IG5vbWluYXRvck1ldGFkYXRhID0gYXdhaXQgc3Vic2NyaWJlUGFyYUNoYWluTm9taW5hdG9yTWV0YWRhdGEoY2hhaW5JbmZvTWFwW2NoYWluXSwgb3duZXIsIHN1YnN0cmF0ZUFwaSwgZGVsZWdhdG9yU3RhdGUpO1xuXG4gICAgICAgICAgbm9taW5hdG9yU3RhdGVDYWxsYmFjayhub21pbmF0b3JNZXRhZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3Rha2luZ0NhbGxiYWNrKGNoYWluLCB7XG4gICAgICAgICAgICBuYW1lOiBjaGFpbkluZm9NYXBbY2hhaW5dLm5hbWUsXG4gICAgICAgICAgICBjaGFpbjogY2hhaW4sXG4gICAgICAgICAgICBiYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICBhY3RpdmVCYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICB1bmxvY2tpbmdCYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICBuYXRpdmVUb2tlbjogc3ltYm9sLFxuICAgICAgICAgICAgdW5pdDogc3ltYm9sLFxuICAgICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICAgICAgICAgIGFkZHJlc3M6IG93bmVyXG4gICAgICAgICAgfSBhcyBTdGFraW5nSXRlbSk7XG5cbiAgICAgICAgICBub21pbmF0b3JTdGF0ZUNhbGxiYWNrKHtcbiAgICAgICAgICAgIGNoYWluLFxuICAgICAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgICAgICAgICAgYWRkcmVzczogb3duZXIsXG4gICAgICAgICAgICBzdGF0dXM6IFN0YWtpbmdTdGF0dXMuTk9UX1NUQUtJTkcsXG4gICAgICAgICAgICBhY3RpdmVTdGFrZTogJzAnLFxuICAgICAgICAgICAgbm9taW5hdGlvbnM6IFtdLFxuICAgICAgICAgICAgdW5zdGFraW5nczogW11cbiAgICAgICAgICB9IGFzIE5vbWluYXRvck1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBc3RhclN0YWtpbmdPbkNoYWluIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIHVzZUFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNoYWluOiBzdHJpbmcsIHN0YWtpbmdDYWxsYmFjazogKG5ldHdvcmtLZXk6IHN0cmluZywgcnM6IFN0YWtpbmdJdGVtKSA9PiB2b2lkLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrOiAobm9taW5hdG9yTWV0YWRhdGE6IE5vbWluYXRvck1ldGFkYXRhKSA9PiB2b2lkKSB7XG4gIGNvbnN0IHsgc3ltYm9sIH0gPSBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyhjaGFpbkluZm9NYXBbY2hhaW5dKTtcblxuICByZXR1cm4gc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5kYXBwc1N0YWtpbmcubGVkZ2VyLm11bHRpKHVzZUFkZHJlc3NlcywgYXN5bmMgKGxlZGdlcnM6IENvZGVjW10pID0+IHtcbiAgICBpZiAobGVkZ2Vycykge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwobGVkZ2Vycy5tYXAoYXN5bmMgKF9sZWRnZXIsIGkpID0+IHtcbiAgICAgICAgbGV0IGJuVW5sb2NraW5nQmFsYW5jZSA9IEJOX1pFUk87XG4gICAgICAgIGNvbnN0IG93bmVyID0gcmVmb3JtYXRBZGRyZXNzKHVzZUFkZHJlc3Nlc1tpXSwgNDIpO1xuXG4gICAgICAgIGNvbnN0IGxlZGdlciA9IF9sZWRnZXIudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldERhcHBzU3Rha2luZ0FjY291bnRMZWRnZXI7XG5cbiAgICAgICAgaWYgKGxlZGdlciAmJiBsZWRnZXIubG9ja2VkID4gMCkge1xuICAgICAgICAgIGNvbnN0IHVubG9ja2luZ0NodW5rcyA9IGxlZGdlci51bmJvbmRpbmdJbmZvLnVubG9ja2luZ0NodW5rcztcbiAgICAgICAgICBjb25zdCBfdG90YWxTdGFrZSA9IGxlZGdlci5sb2NrZWQ7XG4gICAgICAgICAgY29uc3QgYm5Ub3RhbFN0YWtlID0gbmV3IEJOKF90b3RhbFN0YWtlLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiB1bmxvY2tpbmdDaHVua3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGJuQ2h1bmsgPSBuZXcgQk4oY2h1bmsuYW1vdW50LnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICBiblVubG9ja2luZ0JhbGFuY2UgPSBiblVubG9ja2luZ0JhbGFuY2UuYWRkKGJuQ2h1bmspO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGJuQWN0aXZlU3Rha2UgPSBiblRvdGFsU3Rha2Uuc3ViKGJuVW5sb2NraW5nQmFsYW5jZSk7XG5cbiAgICAgICAgICBzdGFraW5nQ2FsbGJhY2soY2hhaW4sIHtcbiAgICAgICAgICAgIG5hbWU6IGNoYWluSW5mb01hcFtjaGFpbl0ubmFtZSxcbiAgICAgICAgICAgIGNoYWluOiBjaGFpbixcbiAgICAgICAgICAgIGJhbGFuY2U6IGJuVG90YWxTdGFrZS50b1N0cmluZygpLFxuICAgICAgICAgICAgYWN0aXZlQmFsYW5jZTogYm5BY3RpdmVTdGFrZS50b1N0cmluZygpLFxuICAgICAgICAgICAgdW5sb2NraW5nQmFsYW5jZTogYm5VbmxvY2tpbmdCYWxhbmNlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBuYXRpdmVUb2tlbjogc3ltYm9sLFxuICAgICAgICAgICAgdW5pdDogc3ltYm9sLFxuICAgICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICAgICAgICAgIGFkZHJlc3M6IG93bmVyXG4gICAgICAgICAgfSBhcyBTdGFraW5nSXRlbSk7XG5cbiAgICAgICAgICBjb25zdCBub21pbmF0b3JNZXRhZGF0YSA9IGF3YWl0IHN1YnNjcmliZUFzdGFyTm9taW5hdG9yTWV0YWRhdGEoY2hhaW5JbmZvTWFwW2NoYWluXSwgb3duZXIsIHN1YnN0cmF0ZUFwaSwgbGVkZ2VyKTtcblxuICAgICAgICAgIG5vbWluYXRvclN0YXRlQ2FsbGJhY2sobm9taW5hdG9yTWV0YWRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YWtpbmdDYWxsYmFjayhjaGFpbiwge1xuICAgICAgICAgICAgbmFtZTogY2hhaW5JbmZvTWFwW2NoYWluXS5uYW1lLFxuICAgICAgICAgICAgY2hhaW4sXG4gICAgICAgICAgICBiYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICBhY3RpdmVCYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICB1bmxvY2tpbmdCYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICBuYXRpdmVUb2tlbjogc3ltYm9sLFxuICAgICAgICAgICAgdW5pdDogc3ltYm9sLFxuICAgICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICAgICAgICAgIGFkZHJlc3M6IG93bmVyXG4gICAgICAgICAgfSBhcyBTdGFraW5nSXRlbSk7XG5cbiAgICAgICAgICBub21pbmF0b3JTdGF0ZUNhbGxiYWNrKHtcbiAgICAgICAgICAgIGNoYWluLFxuICAgICAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgICAgICAgICAgYWRkcmVzczogb3duZXIsXG4gICAgICAgICAgICBzdGF0dXM6IFN0YWtpbmdTdGF0dXMuTk9UX1NUQUtJTkcsXG4gICAgICAgICAgICBhY3RpdmVTdGFrZTogJzAnLFxuICAgICAgICAgICAgbm9taW5hdGlvbnM6IFtdLFxuICAgICAgICAgICAgdW5zdGFraW5nczogW11cbiAgICAgICAgICB9IGFzIE5vbWluYXRvck1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfSk7XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBBUElJdGVtU3RhdGUsIE5vbWluYXRvck1ldGFkYXRhLCBTdGFraW5nSXRlbSwgU3Rha2luZ1Jld2FyZEl0ZW0sIFN0YWtpbmdTdGF0dXMsIFN0YWtpbmdUeXBlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBQYWxsZXRTdGFraW5nU3Rha2luZ0xlZGdlciwgc3Vic2NyaWJlUmVsYXlDaGFpbk5vbWluYXRvck1ldGFkYXRhLCBzdWJzY3JpYmVSZWxheUNoYWluUG9vbE1lbWJlck1ldGFkYXRhIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL2JvbmRpbmcvcmVsYXlDaGFpbic7XG5pbXBvcnQgeyBQYWxsZXROb21pbmF0aW9uUG9vbHNQb29sTWVtYmVyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL2JvbmRpbmcvdXRpbHMnO1xuaW1wb3J0IHsgX1N1YnN0cmF0ZUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5pbXBvcnQgeyByZWZvcm1hdEFkZHJlc3MgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzJztcblxuaW1wb3J0IHsgQ29kZWMgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMvdHlwZXMnO1xuaW1wb3J0IHsgQk4gfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5pbXBvcnQgeyBpc0V0aGVyZXVtQWRkcmVzcyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsLWNyeXB0byc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWxheVN0YWtpbmdPbkNoYWluIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIHVzZUFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNoYWluOiBzdHJpbmcsIHN0YWtpbmdDYWxsYmFjazogKG5ldHdvcmtLZXk6IHN0cmluZywgcnM6IFN0YWtpbmdJdGVtKSA9PiB2b2lkLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrOiAocnM6IE5vbWluYXRvck1ldGFkYXRhKSA9PiB2b2lkKSB7XG4gIGNvbnN0IHsgc3ltYm9sIH0gPSBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyhjaGFpbkluZm9NYXBbY2hhaW5dKTtcblxuICByZXR1cm4gc3Vic3RyYXRlQXBpLmFwaS5xdWVyeS5zdGFraW5nPy5sZWRnZXIubXVsdGkodXNlQWRkcmVzc2VzLCBhc3luYyAobGVkZ2VyczogQ29kZWNbXSkgPT4ge1xuICAgIGlmIChsZWRnZXJzKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChsZWRnZXJzLm1hcChhc3luYyAoX2xlZGdlcjogQ29kZWMsIGkpID0+IHtcbiAgICAgICAgY29uc3Qgb3duZXIgPSByZWZvcm1hdEFkZHJlc3ModXNlQWRkcmVzc2VzW2ldLCA0Mik7XG4gICAgICAgIGNvbnN0IGxlZGdlciA9IF9sZWRnZXIudG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldFN0YWtpbmdTdGFraW5nTGVkZ2VyO1xuXG4gICAgICAgIGlmIChsZWRnZXIpIHtcbiAgICAgICAgICBjb25zdCBfdG90YWxCYWxhbmNlID0gbGVkZ2VyLnRvdGFsLnRvU3RyaW5nKCk7XG4gICAgICAgICAgY29uc3QgX2FjdGl2ZUJhbGFuY2UgPSBsZWRnZXIuYWN0aXZlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgY29uc3QgYm5VbmxvY2tpbmdCYWxhbmNlID0gbmV3IEJOKF90b3RhbEJhbGFuY2UpLnN1YihuZXcgQk4oX2FjdGl2ZUJhbGFuY2UpKTtcblxuICAgICAgICAgIHN0YWtpbmdDYWxsYmFjayhjaGFpbiwge1xuICAgICAgICAgICAgbmFtZTogY2hhaW5JbmZvTWFwW2NoYWluXS5uYW1lLFxuICAgICAgICAgICAgY2hhaW46IGNoYWluLFxuICAgICAgICAgICAgYmFsYW5jZTogX3RvdGFsQmFsYW5jZSxcbiAgICAgICAgICAgIGFjdGl2ZUJhbGFuY2U6IF9hY3RpdmVCYWxhbmNlLFxuICAgICAgICAgICAgdW5sb2NraW5nQmFsYW5jZTogYm5VbmxvY2tpbmdCYWxhbmNlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBuYXRpdmVUb2tlbjogc3ltYm9sLFxuICAgICAgICAgICAgdW5pdDogc3ltYm9sLFxuICAgICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICAgICAgICAgIGFkZHJlc3M6IG93bmVyXG4gICAgICAgICAgfSBhcyBTdGFraW5nSXRlbSk7XG5cbiAgICAgICAgICBjb25zdCBub21pbmF0b3JNZXRhZGF0YSA9IGF3YWl0IHN1YnNjcmliZVJlbGF5Q2hhaW5Ob21pbmF0b3JNZXRhZGF0YShjaGFpbkluZm9NYXBbY2hhaW5dLCBvd25lciwgc3Vic3RyYXRlQXBpLCBsZWRnZXIpO1xuXG4gICAgICAgICAgbm9taW5hdG9yU3RhdGVDYWxsYmFjayhub21pbmF0b3JNZXRhZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3Rha2luZ0NhbGxiYWNrKGNoYWluLCB7XG4gICAgICAgICAgICBuYW1lOiBjaGFpbkluZm9NYXBbY2hhaW5dLm5hbWUsXG4gICAgICAgICAgICBjaGFpbjogY2hhaW4sXG4gICAgICAgICAgICBiYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICBhY3RpdmVCYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICB1bmxvY2tpbmdCYWxhbmNlOiAnMCcsXG4gICAgICAgICAgICBuYXRpdmVUb2tlbjogc3ltYm9sLFxuICAgICAgICAgICAgdW5pdDogc3ltYm9sLFxuICAgICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5SRUFEWSxcbiAgICAgICAgICAgIHR5cGU6IFN0YWtpbmdUeXBlLk5PTUlOQVRFRCxcbiAgICAgICAgICAgIGFkZHJlc3M6IG93bmVyXG4gICAgICAgICAgfSBhcyBTdGFraW5nSXRlbSk7XG5cbiAgICAgICAgICBub21pbmF0b3JTdGF0ZUNhbGxiYWNrKHtcbiAgICAgICAgICAgIGNoYWluLFxuICAgICAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgICAgICAgICAgc3RhdHVzOiBTdGFraW5nU3RhdHVzLk5PVF9TVEFLSU5HLFxuICAgICAgICAgICAgYWRkcmVzczogb3duZXIsXG4gICAgICAgICAgICBhY3RpdmVTdGFrZTogJzAnLFxuICAgICAgICAgICAgbm9taW5hdGlvbnM6IFtdLFxuICAgICAgICAgICAgdW5zdGFraW5nczogW11cbiAgICAgICAgICB9IGFzIE5vbWluYXRvck1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWxheVBvb2xpbmdPbkNoYWluIChzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGksIHVzZUFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNoYWluOiBzdHJpbmcsIHN0YWtpbmdDYWxsYmFjazogKG5ldHdvcmtLZXk6IHN0cmluZywgcnM6IFN0YWtpbmdJdGVtKSA9PiB2b2lkLCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrOiAocnM6IE5vbWluYXRvck1ldGFkYXRhKSA9PiB2b2lkKSB7XG4gIGNvbnN0IHsgc3ltYm9sIH0gPSBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyhjaGFpbkluZm9NYXBbY2hhaW5dKTtcblxuICByZXR1cm4gc3Vic3RyYXRlQXBpLmFwaS5xdWVyeT8ubm9taW5hdGlvblBvb2xzPy5wb29sTWVtYmVycy5tdWx0aSh1c2VBZGRyZXNzZXMsIGFzeW5jIChsZWRnZXJzOiBDb2RlY1tdKSA9PiB7XG4gICAgaWYgKGxlZGdlcnMpIHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGxlZGdlcnMubWFwKGFzeW5jIChfcG9vbE1lbWJlckluZm8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgcG9vbE1lbWJlckluZm8gPSBfcG9vbE1lbWJlckluZm8udG9QcmltaXRpdmUoKSBhcyB1bmtub3duIGFzIFBhbGxldE5vbWluYXRpb25Qb29sc1Bvb2xNZW1iZXI7XG4gICAgICAgIGNvbnN0IG93bmVyID0gcmVmb3JtYXRBZGRyZXNzKHVzZUFkZHJlc3Nlc1tpXSwgNDIpO1xuXG4gICAgICAgIGlmIChwb29sTWVtYmVySW5mbykge1xuICAgICAgICAgIGNvbnN0IGJvbmRlZEJhbGFuY2UgPSBwb29sTWVtYmVySW5mby5wb2ludHM7XG4gICAgICAgICAgY29uc3QgdW5ib25kZWRCYWxhbmNlID0gcG9vbE1lbWJlckluZm8udW5ib25kaW5nRXJhcztcblxuICAgICAgICAgIGxldCB1bmxvY2tpbmdCYWxhbmNlID0gbmV3IEJOKDApO1xuICAgICAgICAgIGNvbnN0IGJuQm9uZGVkQmFsYW5jZSA9IG5ldyBCTihib25kZWRCYWxhbmNlLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXModW5ib25kZWRCYWxhbmNlKS5mb3JFYWNoKChbLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJuVW5ib25kZWRCYWxhbmNlID0gbmV3IEJOKHZhbHVlLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICB1bmxvY2tpbmdCYWxhbmNlID0gdW5sb2NraW5nQmFsYW5jZS5hZGQoYm5VbmJvbmRlZEJhbGFuY2UpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgdG90YWxCYWxhbmNlID0gYm5Cb25kZWRCYWxhbmNlLmFkZCh1bmxvY2tpbmdCYWxhbmNlKTtcblxuICAgICAgICAgIHN0YWtpbmdDYWxsYmFjayhjaGFpbiwge1xuICAgICAgICAgICAgbmFtZTogY2hhaW5JbmZvTWFwW2NoYWluXS5uYW1lLFxuICAgICAgICAgICAgY2hhaW46IGNoYWluLFxuICAgICAgICAgICAgYmFsYW5jZTogdG90YWxCYWxhbmNlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBhY3RpdmVCYWxhbmNlOiBibkJvbmRlZEJhbGFuY2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHVubG9ja2luZ0JhbGFuY2U6IHVubG9ja2luZ0JhbGFuY2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIG5hdGl2ZVRva2VuOiBzeW1ib2wsXG4gICAgICAgICAgICB1bml0OiBzeW1ib2wsXG4gICAgICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZLFxuICAgICAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuUE9PTEVELFxuICAgICAgICAgICAgYWRkcmVzczogb3duZXJcbiAgICAgICAgICB9IGFzIFN0YWtpbmdJdGVtKTtcblxuICAgICAgICAgIGNvbnN0IG5vbWluYXRvck1ldGFkYXRhID0gYXdhaXQgc3Vic2NyaWJlUmVsYXlDaGFpblBvb2xNZW1iZXJNZXRhZGF0YShjaGFpbkluZm9NYXBbY2hhaW5dLCBvd25lciwgc3Vic3RyYXRlQXBpLCBwb29sTWVtYmVySW5mbyk7XG5cbiAgICAgICAgICBub21pbmF0b3JTdGF0ZUNhbGxiYWNrKG5vbWluYXRvck1ldGFkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGFraW5nQ2FsbGJhY2soY2hhaW4sIHtcbiAgICAgICAgICAgIG5hbWU6IGNoYWluSW5mb01hcFtjaGFpbl0ubmFtZSxcbiAgICAgICAgICAgIGNoYWluOiBjaGFpbixcbiAgICAgICAgICAgIGJhbGFuY2U6ICcwJyxcbiAgICAgICAgICAgIGFjdGl2ZUJhbGFuY2U6ICcwJyxcbiAgICAgICAgICAgIHVubG9ja2luZ0JhbGFuY2U6ICcwJyxcbiAgICAgICAgICAgIG5hdGl2ZVRva2VuOiBzeW1ib2wsXG4gICAgICAgICAgICB1bml0OiBzeW1ib2wsXG4gICAgICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZLFxuICAgICAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuUE9PTEVELFxuICAgICAgICAgICAgYWRkcmVzczogb3duZXJcbiAgICAgICAgICB9IGFzIFN0YWtpbmdJdGVtKTtcblxuICAgICAgICAgIG5vbWluYXRvclN0YXRlQ2FsbGJhY2soe1xuICAgICAgICAgICAgY2hhaW4sXG4gICAgICAgICAgICB0eXBlOiBTdGFraW5nVHlwZS5QT09MRUQsXG4gICAgICAgICAgICBhZGRyZXNzOiBvd25lcixcbiAgICAgICAgICAgIHN0YXR1czogU3Rha2luZ1N0YXR1cy5OT1RfU1RBS0lORyxcbiAgICAgICAgICAgIGFjdGl2ZVN0YWtlOiAnMCcsXG4gICAgICAgICAgICBub21pbmF0aW9uczogW10sIC8vIGNhbiBvbmx5IGpvaW4gMSBwb29sIGF0IGEgdGltZVxuICAgICAgICAgICAgdW5zdGFraW5nczogW11cbiAgICAgICAgICB9IGFzIE5vbWluYXRvck1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROb21pbmF0aW9uUG9vbFJld2FyZCAoYWRkcmVzc2VzOiBzdHJpbmdbXSwgY2hhaW5JbmZvTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPiwgc3Vic3RyYXRlQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfU3Vic3RyYXRlQXBpPiwgY2FsbEJhY2s6IChyczogU3Rha2luZ1Jld2FyZEl0ZW0pID0+IHZvaWQpIHtcbiAgY29uc3QgdGFyZ2V0TmV0d29ya3M6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IHZhbGlkQWRkcmVzc2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIE9iamVjdC5rZXlzKGNoYWluSW5mb01hcCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgdGFyZ2V0TmV0d29ya3MucHVzaChrZXkpO1xuICB9KTtcblxuICBhZGRyZXNzZXMuZm9yRWFjaCgoYWRkcmVzcykgPT4ge1xuICAgIGlmICghaXNFdGhlcmV1bUFkZHJlc3MoYWRkcmVzcykpIHtcbiAgICAgIHZhbGlkQWRkcmVzc2VzLnB1c2goYWRkcmVzcyk7XG4gICAgfVxuICB9KTtcblxuICB0cnkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHRhcmdldE5ldHdvcmtzLm1hcChhc3luYyAobmV0d29ya0tleSkgPT4ge1xuICAgICAgY29uc3Qgc3Vic3RyYXRlQXBpID0gYXdhaXQgc3Vic3RyYXRlQXBpTWFwW25ldHdvcmtLZXldLmlzUmVhZHk7XG5cbiAgICAgIGlmIChzdWJzdHJhdGVBcGkuYXBpLmNhbGwubm9taW5hdGlvblBvb2xzQXBpKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHZhbGlkQWRkcmVzc2VzLm1hcChhc3luYyAoYWRkcmVzcykgPT4ge1xuICAgICAgICAgIGNvbnN0IF91bmNsYWltZWRSZXdhcmQgPSBhd2FpdCBzdWJzdHJhdGVBcGkuYXBpLmNhbGw/Lm5vbWluYXRpb25Qb29sc0FwaT8ucGVuZGluZ1Jld2FyZHMoYWRkcmVzcyk7XG5cbiAgICAgICAgICBpZiAoX3VuY2xhaW1lZFJld2FyZCkge1xuICAgICAgICAgICAgY2FsbEJhY2soe1xuICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLFxuICAgICAgICAgICAgICBjaGFpbjogbmV0d29ya0tleSxcbiAgICAgICAgICAgICAgdW5jbGFpbWVkUmV3YXJkOiBfdW5jbGFpbWVkUmV3YXJkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgIG5hbWU6IGNoYWluSW5mb01hcFtuZXR3b3JrS2V5XS5uYW1lLFxuICAgICAgICAgICAgICBzdGF0ZTogQVBJSXRlbVN0YXRlLlJFQURZLFxuICAgICAgICAgICAgICB0eXBlOiBTdGFraW5nVHlwZS5QT09MRURcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZGVidWcoZSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQ2hhaW5JbmZvIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IEFQSUl0ZW1TdGF0ZSwgU3Rha2luZ1Jld2FyZEl0ZW0sIFN0YWtpbmdUeXBlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBJTkRFWEVSX1NVUFBPUlRFRF9TVEFLSU5HX0NIQUlOUywgU1VCU1FVSURfRU5EUE9JTlRTIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL2NvbmZpZyc7XG5pbXBvcnQgeyBfZ2V0Q2hhaW5TdWJzdHJhdGVBZGRyZXNzUHJlZml4LCBfaXNDaGFpbkV2bUNvbXBhdGlibGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgcmVmb3JtYXRBZGRyZXNzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5pbXBvcnQgeyBpc0V0aGVyZXVtQWRkcmVzcyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsLWNyeXB0byc7XG5cbmludGVyZmFjZSBSZXdhcmRSZXNwb25zZUl0ZW0ge1xuICBhbW91bnQ6IHN0cmluZyxcbiAgYmxvY2tOdW1iZXI6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3Rha2luZ1Jlc3BvbnNlSXRlbSB7XG4gIHRvdGFsUmV3YXJkOiBzdHJpbmcsXG4gIHRvdGFsU2xhc2g6IHN0cmluZyxcbiAgYWN0aXZlQm9uZDogc3RyaW5nLFxuICByZXdhcmRzOiBSZXdhcmRSZXNwb25zZUl0ZW1bXVxufVxuXG5jb25zdCBnZXRTdWJzcXVpZFF1ZXJ5ID0gKGFjY291bnQ6IHN0cmluZywgY2hhaW46IHN0cmluZykgPT4ge1xuICBpZiAoY2hhaW4gPT09ICdtb29uYmVhbScgfHwgY2hhaW4gPT09ICdtb29ucml2ZXInIHx8IGNoYWluID09PSAnYXN0YXInKSB7XG4gICAgcmV0dXJuIGBcbiAgICBxdWVyeSBNeVF1ZXJ5IHtcbiAgICAgIHN0YWtlckJ5SWQoaWQ6IFwiJHthY2NvdW50fVwiKSB7XG4gICAgICAgIHRvdGFsUmV3YXJkXG4gICAgICAgIGFjdGl2ZUJvbmRcbiAgICAgICAgcmV3YXJkcyhsaW1pdDogMSwgb3JkZXJCeTogYmxvY2tOdW1iZXJfREVTQykge1xuICAgICAgICAgIGFtb3VudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfWA7XG4gIH1cblxuICByZXR1cm4gYFxuICBxdWVyeSBNeVF1ZXJ5IHtcbiAgICBzdGFrZXJCeUlkKGlkOiBcIiR7YWNjb3VudH1cIikge1xuICAgICAgdG90YWxSZXdhcmRcbiAgICAgIHRvdGFsU2xhc2hcbiAgICAgIGFjdGl2ZUJvbmRcbiAgICAgIHJld2FyZHMobGltaXQ6IDEsIG9yZGVyQnk6IGJsb2NrTnVtYmVyX0RFU0MpIHtcbiAgICAgICAgYW1vdW50XG4gICAgICB9XG4gICAgfVxuICB9YDtcbn07XG5cbmNvbnN0IGdldFN1YnNxdWlkU3Rha2luZyA9IGFzeW5jIChhY2NvdW50czogc3RyaW5nW10sIGNoYWluOiBzdHJpbmcsIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNhbGxiYWNrOiAocmV3YXJkSXRlbTogU3Rha2luZ1Jld2FyZEl0ZW0pID0+IHZvaWQpID0+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChhY2NvdW50cy5tYXAoYXN5bmMgKGFjY291bnQpID0+IHtcbiAgICAgIGlmICgoX2lzQ2hhaW5Fdm1Db21wYXRpYmxlKGNoYWluSW5mb01hcFtjaGFpbl0pICYmIGlzRXRoZXJldW1BZGRyZXNzKGFjY291bnQpKSB8fCAoIV9pc0NoYWluRXZtQ29tcGF0aWJsZShjaGFpbkluZm9NYXBbY2hhaW5dKSAmJiAhaXNFdGhlcmV1bUFkZHJlc3MoYWNjb3VudCkpKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZEFjY291bnQgPSByZWZvcm1hdEFkZHJlc3MoYWNjb3VudCwgX2dldENoYWluU3Vic3RyYXRlQWRkcmVzc1ByZWZpeChjaGFpbkluZm9NYXBbY2hhaW5dKSk7XG4gICAgICAgIGNvbnN0IHN0YWtpbmdSZXdhcmRJdGVtOiBTdGFraW5nUmV3YXJkSXRlbSA9IHtcbiAgICAgICAgICBjaGFpbjogY2hhaW4sXG4gICAgICAgICAgbmFtZTogY2hhaW5JbmZvTWFwW2NoYWluXS5uYW1lLFxuICAgICAgICAgIHN0YXRlOiBBUElJdGVtU3RhdGUuUkVBRFksXG4gICAgICAgICAgdHlwZTogU3Rha2luZ1R5cGUuTk9NSU5BVEVELFxuICAgICAgICAgIGFkZHJlc3M6IHJlZm9ybWF0QWRkcmVzcyhhY2NvdW50LCA0MilcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgYXhpb3MoeyB1cmw6IFNVQlNRVUlEX0VORFBPSU5UU1tjaGFpbl0sXG4gICAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgICAgZGF0YTogeyBxdWVyeTogZ2V0U3Vic3F1aWRRdWVyeShwYXJzZWRBY2NvdW50LCBjaGFpbikgfSB9KTtcblxuICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICBjb25zdCByZXNwRGF0YSA9IHJlc3AuZGF0YS5kYXRhIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgICAgICAgY29uc3QgcmV3YXJkSXRlbSA9IHJlc3BEYXRhLnN0YWtlckJ5SWQgYXMgU3Rha2luZ1Jlc3BvbnNlSXRlbTtcblxuICAgICAgICAgIGlmIChyZXdhcmRJdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBsYXRlc3RSZXdhcmQgPSByZXdhcmRJdGVtLnJld2FyZHNbMF07XG5cbiAgICAgICAgICAgIGlmIChyZXdhcmRJdGVtLnRvdGFsUmV3YXJkKSB7XG4gICAgICAgICAgICAgIHN0YWtpbmdSZXdhcmRJdGVtLnRvdGFsUmV3YXJkID0gcmV3YXJkSXRlbS50b3RhbFJld2FyZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJld2FyZEl0ZW0udG90YWxTbGFzaCkge1xuICAgICAgICAgICAgICBzdGFraW5nUmV3YXJkSXRlbS50b3RhbFNsYXNoID0gcmV3YXJkSXRlbS50b3RhbFNsYXNoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGF0ZXN0UmV3YXJkICYmIGxhdGVzdFJld2FyZC5hbW91bnQpIHtcbiAgICAgICAgICAgICAgc3Rha2luZ1Jld2FyZEl0ZW0ubGF0ZXN0UmV3YXJkID0gbGF0ZXN0UmV3YXJkLmFtb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3Rha2luZ1Jld2FyZEl0ZW0udG90YWxSZXdhcmQgJiYgcGFyc2VGbG9hdChzdGFraW5nUmV3YXJkSXRlbS50b3RhbFJld2FyZCkgPiAwKSB7XG4gICAgICAgICAgY2FsbGJhY2soc3Rha2luZ1Jld2FyZEl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5kZWJ1ZyhlKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldEFsbFN1YnNxdWlkU3Rha2luZyA9IGFzeW5jIChhY2NvdW50czogc3RyaW5nW10sIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNhbGxiYWNrOiAocmV3YXJkSXRlbTogU3Rha2luZ1Jld2FyZEl0ZW0pID0+IHZvaWQpID0+IHtcbiAgY29uc3QgZmlsdGVyZWROZXR3b3Jrczogc3RyaW5nW10gPSBbXTtcblxuICBPYmplY3QudmFsdWVzKGNoYWluSW5mb01hcCkuZm9yRWFjaCgobmV0d29yaykgPT4ge1xuICAgIGlmIChJTkRFWEVSX1NVUFBPUlRFRF9TVEFLSU5HX0NIQUlOUy5pbmNsdWRlcyhuZXR3b3JrLnNsdWcpKSB7XG4gICAgICBmaWx0ZXJlZE5ldHdvcmtzLnB1c2gobmV0d29yay5zbHVnKTtcbiAgICB9XG4gIH0pO1xuXG4gIHRyeSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoZmlsdGVyZWROZXR3b3Jrcy5tYXAoYXN5bmMgKG5ldHdvcmspID0+IHtcbiAgICAgIGF3YWl0IGdldFN1YnNxdWlkU3Rha2luZyhhY2NvdW50cywgbmV0d29yaywgY2hhaW5JbmZvTWFwLCBjYWxsYmFjayk7XG4gICAgfSkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5kZWJ1ZyhlKTtcbiAgfVxufTtcbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0V2bUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFVk1CYWxhbmNlIChuZXR3b3JrS2V5OiBzdHJpbmcsIGFkZHJlc3Nlczogc3RyaW5nW10sIGV2bUFwaU1hcDogUmVjb3JkPHN0cmluZywgX0V2bUFwaT4pOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHdlYjNBcGkgPSBldm1BcGlNYXBbbmV0d29ya0tleV07XG5cbiAgcmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKGFkZHJlc3Nlcy5tYXAoYXN5bmMgKGFkZHJlc3MpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgd2ViM0FwaS5hcGkuZXRoLmdldEJhbGFuY2UoYWRkcmVzcyk7XG4gIH0pKTtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBFeHRlcm5hbFJlcXVlc3RQcm9taXNlLCBFeHRlcm5hbFJlcXVlc3RQcm9taXNlU3RhdHVzLCBIYW5kbGVCYXNpY1R4LCBUcmFuc2FjdGlvblJlc3BvbnNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBnZXRFUkMyMENvbnRyYWN0IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS90b2tlbnMvZXZtL3dlYjMnO1xuaW1wb3J0IHsgX0JBTEFOQ0VfUEFSU0lOR19DSEFJTl9HUk9VUCwgRVZNX1JFRk9STUFUX0RFQ0lNQUxTIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBfRVJDNzIxX0FCSSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oZWxwZXInO1xuaW1wb3J0IHsgX0V2bUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbkNvbmZpZywgVHJhbnNhY3Rpb25SZWNlaXB0IH0gZnJvbSAnd2ViMy1jb3JlJztcblxuaW1wb3J0IHsgQk4sIGhleFRvQm4gfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5cbmludGVyZmFjZSBIYW5kbGVUcmFuc2ZlckJhbGFuY2VSZXN1bHRQcm9wcyB7XG4gIGNhbGxiYWNrOiBIYW5kbGVCYXNpY1R4O1xuICBjaGFuZ2VWYWx1ZTogc3RyaW5nO1xuICBuZXR3b3JrS2V5OiBzdHJpbmc7XG4gIHJlY2VpcHQ6IFRyYW5zYWN0aW9uUmVjZWlwdDtcbiAgcmVzcG9uc2U6IFRyYW5zYWN0aW9uUmVzcG9uc2U7XG4gIHVwZGF0ZVN0YXRlPzogKHByb21pc2U6IFBhcnRpYWw8RXh0ZXJuYWxSZXF1ZXN0UHJvbWlzZT4pID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVUcmFuc2ZlckJhbGFuY2VSZXN1bHQgPSAoeyBjYWxsYmFjayxcbiAgY2hhbmdlVmFsdWUsXG4gIG5ldHdvcmtLZXksXG4gIHJlY2VpcHQsXG4gIHJlc3BvbnNlLFxuICB1cGRhdGVTdGF0ZSB9OiBIYW5kbGVUcmFuc2ZlckJhbGFuY2VSZXN1bHRQcm9wcykgPT4ge1xuICByZXNwb25zZS5zdGF0dXMgPSB0cnVlO1xuICBsZXQgZmVlOiBzdHJpbmc7XG5cbiAgaWYgKF9CQUxBTkNFX1BBUlNJTkdfQ0hBSU5fR1JPVVAuYm9iYWJlYW0uaW5kZXhPZihuZXR3b3JrS2V5KSA+IC0xKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgZmVlID0gaGV4VG9CbihyZWNlaXB0LmwxRmVlIHx8ICcweDAnKS5hZGQoaGV4VG9CbihyZWNlaXB0LmwyQm9iYUZlZSB8fCAnMHgwJykpLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgZmVlID0gKHJlY2VpcHQuZ2FzVXNlZCAqIHJlY2VpcHQuZWZmZWN0aXZlR2FzUHJpY2UpLnRvU3RyaW5nKCk7XG4gIH1cblxuICByZXNwb25zZS50eFJlc3VsdCA9IHtcbiAgICBjaGFuZ2U6IGNoYW5nZVZhbHVlIHx8ICcwJyxcbiAgICBmZWVcbiAgfTtcbiAgdXBkYXRlU3RhdGUgJiYgdXBkYXRlU3RhdGUoeyBzdGF0dXM6IHJlY2VpcHQuc3RhdHVzID8gRXh0ZXJuYWxSZXF1ZXN0UHJvbWlzZVN0YXR1cy5DT01QTEVURUQgOiBFeHRlcm5hbFJlcXVlc3RQcm9taXNlU3RhdHVzLkZBSUxFRCB9KTtcbiAgY2FsbGJhY2socmVzcG9uc2UpO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVWTVRyYW5zYWN0aW9uT2JqZWN0IChcbiAgY2hhaW5JbmZvOiBfQ2hhaW5JbmZvLFxuICBmcm9tOiBzdHJpbmcsXG4gIHRvOiBzdHJpbmcsXG4gIHZhbHVlOiBzdHJpbmcsXG4gIHRyYW5zZmVyQWxsOiBib29sZWFuLFxuICBldm1BcGlNYXA6IFJlY29yZDxzdHJpbmcsIF9Fdm1BcGk+XG4pOiBQcm9taXNlPFtUcmFuc2FjdGlvbkNvbmZpZywgc3RyaW5nXT4ge1xuICBjb25zdCBuZXR3b3JrS2V5ID0gY2hhaW5JbmZvLnNsdWc7XG4gIGNvbnN0IHdlYjNBcGkgPSBldm1BcGlNYXBbbmV0d29ya0tleV07XG4gIGNvbnN0IGdhc1ByaWNlID0gYXdhaXQgd2ViM0FwaS5hcGkuZXRoLmdldEdhc1ByaWNlKCk7XG4gIGNvbnN0IHRyYW5zYWN0aW9uT2JqZWN0ID0ge1xuICAgIGdhc1ByaWNlOiBnYXNQcmljZSxcbiAgICB0bzogdG8sXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGZyb206IGZyb21cbiAgfSBhcyBUcmFuc2FjdGlvbkNvbmZpZztcbiAgY29uc3QgZ2FzTGltaXQgPSBhd2FpdCB3ZWIzQXBpLmFwaS5ldGguZXN0aW1hdGVHYXModHJhbnNhY3Rpb25PYmplY3QpO1xuXG4gIHRyYW5zYWN0aW9uT2JqZWN0LmdhcyA9IGdhc0xpbWl0O1xuXG4gIGNvbnN0IGVzdGltYXRlRmVlID0gbmV3IEJOKGdhc0xpbWl0KS5tdWwobmV3IEJOKGdhc1ByaWNlKSk7XG5cbiAgdHJhbnNhY3Rpb25PYmplY3QudmFsdWUgPSB0cmFuc2ZlckFsbCA/IG5ldyBCTih2YWx1ZSkuc3ViKGVzdGltYXRlRmVlKS50b1N0cmluZygpIDogdmFsdWU7XG5cbiAgaWYgKEVWTV9SRUZPUk1BVF9ERUNJTUFMUy5hY2FsYS5pbmNsdWRlcyhuZXR3b3JrS2V5KSkge1xuICAgIGNvbnN0IG51bWJlclJlcGxhY2UgPSAxOCAtIDEyO1xuXG4gICAgdHJhbnNhY3Rpb25PYmplY3QudmFsdWUgPSB0cmFuc2FjdGlvbk9iamVjdC52YWx1ZS5zdWJzdHJpbmcoMCwgdHJhbnNhY3Rpb25PYmplY3QudmFsdWUubGVuZ3RoIC0gNikgKyBuZXcgQXJyYXkobnVtYmVyUmVwbGFjZSkuZmlsbCgnMCcpLmpvaW4oJycpO1xuICB9XG5cbiAgcmV0dXJuIFt0cmFuc2FjdGlvbk9iamVjdCwgdHJhbnNhY3Rpb25PYmplY3QudmFsdWUudG9TdHJpbmcoKV07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFUkMyMFRyYW5zYWN0aW9uT2JqZWN0IChcbiAgYXNzZXRBZGRyZXNzOiBzdHJpbmcsXG4gIGNoYWluSW5mbzogX0NoYWluSW5mbyxcbiAgZnJvbTogc3RyaW5nLFxuICB0bzogc3RyaW5nLFxuICB2YWx1ZTogc3RyaW5nLFxuICB0cmFuc2ZlckFsbDogYm9vbGVhbixcbiAgZXZtQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfRXZtQXBpPlxuKTogUHJvbWlzZTxbVHJhbnNhY3Rpb25Db25maWcsIHN0cmluZ10+IHtcbiAgY29uc3QgbmV0d29ya0tleSA9IGNoYWluSW5mby5zbHVnO1xuICBjb25zdCBldm1BcGkgPSBldm1BcGlNYXBbbmV0d29ya0tleV07XG4gIGNvbnN0IGVyYzIwQ29udHJhY3QgPSBnZXRFUkMyMENvbnRyYWN0KG5ldHdvcmtLZXksIGFzc2V0QWRkcmVzcywgZXZtQXBpTWFwKTtcblxuICBsZXQgZnJlZUFtb3VudCA9IG5ldyBCTigwKTtcbiAgbGV0IHRyYW5zZmVyVmFsdWUgPSB2YWx1ZTtcblxuICBpZiAodHJhbnNmZXJBbGwpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICBjb25zdCBiYWwgPSBhd2FpdCBlcmMyMENvbnRyYWN0Lm1ldGhvZHMuYmFsYW5jZU9mKGZyb20pLmNhbGwoKSBhcyBzdHJpbmc7XG5cbiAgICBmcmVlQW1vdW50ID0gbmV3IEJOKGJhbCB8fCAnMCcpO1xuICAgIHRyYW5zZmVyVmFsdWUgPSBmcmVlQW1vdW50LnRvU3RyaW5nKCkgfHwgJzAnO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVUcmFuc2ZlckRhdGEgKHRvOiBzdHJpbmcsIHRyYW5zZmVyVmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICByZXR1cm4gZXJjMjBDb250cmFjdC5tZXRob2RzLnRyYW5zZmVyKHRvLCB0cmFuc2ZlclZhbHVlKS5lbmNvZGVBQkkoKSBhcyBzdHJpbmc7XG4gIH1cblxuICBjb25zdCB0cmFuc2ZlckRhdGEgPSBnZW5lcmF0ZVRyYW5zZmVyRGF0YSh0bywgdHJhbnNmZXJWYWx1ZSk7XG4gIGNvbnN0IFtnYXNMaW1pdCwgZ2FzUHJpY2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgZXJjMjBDb250cmFjdC5tZXRob2RzLnRyYW5zZmVyKHRvLCB0cmFuc2ZlclZhbHVlKS5lc3RpbWF0ZUdhcyh7IGZyb20gfSkgYXMgbnVtYmVyLFxuICAgIGV2bUFwaS5hcGkuZXRoLmdldEdhc1ByaWNlKClcbiAgXSk7XG5cbiAgY29uc3QgdHJhbnNhY3Rpb25PYmplY3QgPSB7XG4gICAgZ2FzUHJpY2U6IGdhc1ByaWNlLFxuICAgIGdhczogZ2FzTGltaXQsXG4gICAgZnJvbSxcbiAgICB0bzogYXNzZXRBZGRyZXNzLFxuICAgIGRhdGE6IHRyYW5zZmVyRGF0YVxuICB9IGFzIFRyYW5zYWN0aW9uQ29uZmlnO1xuXG4gIGlmICh0cmFuc2ZlckFsbCkge1xuICAgIHRyYW5zZmVyVmFsdWUgPSBuZXcgQk4oZnJlZUFtb3VudCkudG9TdHJpbmcoKTtcbiAgICB0cmFuc2FjdGlvbk9iamVjdC5kYXRhID0gZ2VuZXJhdGVUcmFuc2ZlckRhdGEodG8sIHRyYW5zZmVyVmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIFt0cmFuc2FjdGlvbk9iamVjdCwgdHJhbnNmZXJWYWx1ZV07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFUkM3MjFUcmFuc2FjdGlvbiAoXG4gIHdlYjNBcGk6IF9Fdm1BcGksXG4gIGNvbnRyYWN0QWRkcmVzczogc3RyaW5nLFxuICBzZW5kZXJBZGRyZXNzOiBzdHJpbmcsXG4gIHJlY2lwaWVudEFkZHJlc3M6IHN0cmluZyxcbiAgdG9rZW5JZDogc3RyaW5nKTogUHJvbWlzZTxUcmFuc2FjdGlvbkNvbmZpZz4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuICBjb25zdCBjb250cmFjdCA9IG5ldyB3ZWIzQXBpLmFwaS5ldGguQ29udHJhY3QoX0VSQzcyMV9BQkksIGNvbnRyYWN0QWRkcmVzcyk7XG5cbiAgY29uc3QgW2dhc0xpbWl0LCBnYXNQcmljZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICBjb250cmFjdC5tZXRob2RzLnNhZmVUcmFuc2ZlckZyb20oc2VuZGVyQWRkcmVzcywgcmVjaXBpZW50QWRkcmVzcywgdG9rZW5JZCkuZXN0aW1hdGVHYXMoeyBmcm9tOiBzZW5kZXJBZGRyZXNzIH0pIGFzIG51bWJlcixcbiAgICB3ZWIzQXBpLmFwaS5ldGguZ2V0R2FzUHJpY2UoKVxuICBdKTtcblxuICByZXR1cm4ge1xuICAgIGZyb206IHNlbmRlckFkZHJlc3MsXG4gICAgZ2FzUHJpY2UsXG4gICAgZ2FzOiBnYXNMaW1pdCxcbiAgICB0bzogY29udHJhY3RBZGRyZXNzLFxuICAgIHZhbHVlOiAnMHgwMCcsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgZGF0YTogY29udHJhY3QubWV0aG9kcy5zYWZlVHJhbnNmZXJGcm9tKHNlbmRlckFkZHJlc3MsIHJlY2lwaWVudEFkZHJlc3MsIHRva2VuSWQpLmVuY29kZUFCSSgpXG4gIH07XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Vcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9FUkMyMF9BQkkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaGVscGVyJztcbmltcG9ydCB7IF9Fdm1BcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgQ29udHJhY3QgfSBmcm9tICd3ZWIzLWV0aC1jb250cmFjdCc7XG5cbmV4cG9ydCBjb25zdCBnZXRFUkMyMENvbnRyYWN0ID0gKG5ldHdvcmtLZXk6IHN0cmluZywgYXNzZXRBZGRyZXNzOiBzdHJpbmcsIGV2bUFwaU1hcDogUmVjb3JkPHN0cmluZywgX0V2bUFwaT4sIG9wdGlvbnMgPSB7fSk6IENvbnRyYWN0ID0+IHtcbiAgLy8gQHRzLWlnbm9yZVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgcmV0dXJuIG5ldyBldm1BcGlNYXBbbmV0d29ya0tleV0uYXBpLmV0aC5Db250cmFjdChfRVJDMjBfQUJJLCBhc3NldEFkZHJlc3MsIG9wdGlvbnMpO1xufTtcbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgZ2V0V2FzbUNvbnRyYWN0R2FzTGltaXQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3Rva2Vucy93YXNtL3V0aWxzJztcbmltcG9ydCB7IF9BWkVST19ET01BSU5fUkVHSVNUUllfQUJJLCBfTkVVUk9HVU5TX1BTUDM0X0FCSSwgX1BJTktfUFNQMzRfQUJJLCBfUFNQMjJfQUJJLCBfUFNQMzRfQUJJIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2hlbHBlcic7XG5pbXBvcnQgeyBfU3Vic3RyYXRlQXBpIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcblxuaW1wb3J0IHsgQXBpUHJvbWlzZSB9IGZyb20gJ0Bwb2xrYWRvdC9hcGknO1xuaW1wb3J0IHsgQ29udHJhY3RQcm9taXNlIH0gZnJvbSAnQHBvbGthZG90L2FwaS1jb250cmFjdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQU1AyMkNvbnRyYWN0UHJvbWlzZSAoYXBpUHJvbWlzZTogQXBpUHJvbWlzZSwgY29udHJhY3RBZGRyZXNzOiBzdHJpbmcpIHtcbiAgcmV0dXJuIG5ldyBDb250cmFjdFByb21pc2UoYXBpUHJvbWlzZSwgX1BTUDIyX0FCSSwgY29udHJhY3RBZGRyZXNzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGlua1JvYm9OZnQgKGNvbnRyYWN0QWRkcmVzczogc3RyaW5nKSB7XG4gIHJldHVybiBbJ1hveXdVeFRUdE5LUFJyUk43VjVLWENxejJRTE1GZUs3RHhocFNuaXFaSHBzNVhxJ10uaW5jbHVkZXMoY29udHJhY3RBZGRyZXNzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTmV1cm9ndW5OZnQgKGNvbnRyYWN0QWRkcmVzczogc3RyaW5nKSB7XG4gIHJldHVybiBbJ2FaOWJkMnRIZUdLcnMzRm5KdjVvZTdrZ1ZyUDVHUXZkSk1oQzJHeGpYQTJZcWJkJ10uaW5jbHVkZXMoY29udHJhY3RBZGRyZXNzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQXplcm9Eb21haW5OZnQgKGNvbnRyYWN0QWRkcmVzczogc3RyaW5nKSB7XG4gIHJldHVybiBbJzVGc0I5MXRYU0V1TWo2YWt6ZFBjekF0bUJhVktUb3FIbXRBd1NVelhoNDlBWXphRCcsICc1Q1RRQmZCQzlTZmRyQ0RCSmRmTGl5VzJwZzl6NVc2QzZFczhzSzMxM0JMbkZnRGYnXS5pbmNsdWRlcyhjb250cmFjdEFkZHJlc3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UFNQMzRDb250cmFjdFByb21pc2UgKGFwaVByb21pc2U6IEFwaVByb21pc2UsIGNvbnRyYWN0QWRkcmVzczogc3RyaW5nKSB7XG4gIGlmIChpc1BpbmtSb2JvTmZ0KGNvbnRyYWN0QWRkcmVzcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyYWN0UHJvbWlzZShhcGlQcm9taXNlLCBfUElOS19QU1AzNF9BQkksIGNvbnRyYWN0QWRkcmVzcyk7XG4gIH1cblxuICBpZiAoaXNOZXVyb2d1bk5mdChjb250cmFjdEFkZHJlc3MpKSB7XG4gICAgcmV0dXJuIG5ldyBDb250cmFjdFByb21pc2UoYXBpUHJvbWlzZSwgX05FVVJPR1VOU19QU1AzNF9BQkksIGNvbnRyYWN0QWRkcmVzcyk7XG4gIH1cblxuICBpZiAoaXNBemVyb0RvbWFpbk5mdChjb250cmFjdEFkZHJlc3MpKSB7XG4gICAgcmV0dXJuIG5ldyBDb250cmFjdFByb21pc2UoYXBpUHJvbWlzZSwgX0FaRVJPX0RPTUFJTl9SRUdJU1RSWV9BQkksIGNvbnRyYWN0QWRkcmVzcyk7XG4gIH1cblxuICByZXR1cm4gbmV3IENvbnRyYWN0UHJvbWlzZShhcGlQcm9taXNlLCBfUFNQMzRfQUJJLCBjb250cmFjdEFkZHJlc3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9rZW5VcmlNZXRob2QgKGNvbnRyYWN0QWRkcmVzczogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGlzUGlua1JvYm9OZnQoY29udHJhY3RBZGRyZXNzKSkge1xuICAgIHJldHVybiAncGlua01pbnQ6OnRva2VuVXJpJztcbiAgfVxuXG4gIGlmIChpc05ldXJvZ3VuTmZ0KGNvbnRyYWN0QWRkcmVzcykpIHtcbiAgICByZXR1cm4gJ3Rva2VuVXJpJztcbiAgfVxuXG4gIHJldHVybiAncHNwMzRUcmFpdHM6OnRva2VuVXJpJztcbn1cblxuY29uc3QgbXVzdEZvcm1hdE51bWJlclJlZyA9IC9eLT9bMC05XVswLTksLl0rJC87XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQU1AzNFRyYW5zZmVyRXh0cmluc2ljIChuZXR3b3JrS2V5OiBzdHJpbmcsIHN1YnN0cmF0ZUFwaTogX1N1YnN0cmF0ZUFwaSwgc2VuZGVyQWRkcmVzczogc3RyaW5nLCByZWNpcGllbnRBZGRyZXNzOiBzdHJpbmcsIHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICBjb25zdCBjb250cmFjdEFkZHJlc3MgPSBwYXJhbXMuY29udHJhY3RBZGRyZXNzIGFzIHN0cmluZztcbiAgY29uc3Qgb25DaGFpbk9wdGlvbiA9IHBhcmFtcy5vbkNoYWluT3B0aW9uIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMob25DaGFpbk9wdGlvbikpIHtcbiAgICBpZiAobXVzdEZvcm1hdE51bWJlclJlZy50ZXN0KHZhbHVlKSkge1xuICAgICAgb25DaGFpbk9wdGlvbltrZXldID0gdmFsdWUucmVwbGFjZUFsbCgnLCcsICcnKTtcbiAgICB9XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNvbnRyYWN0UHJvbWlzZSA9IGdldFBTUDM0Q29udHJhY3RQcm9taXNlKHN1YnN0cmF0ZUFwaS5hcGksIGNvbnRyYWN0QWRkcmVzcyk7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGdhc0xpbWl0ID0gYXdhaXQgZ2V0V2FzbUNvbnRyYWN0R2FzTGltaXQoc3Vic3RyYXRlQXBpLmFwaSwgc2VuZGVyQWRkcmVzcywgJ3BzcDM0Ojp0cmFuc2ZlcicsIGNvbnRyYWN0UHJvbWlzZSwge30sIFtyZWNpcGllbnRBZGRyZXNzLCBvbkNoYWluT3B0aW9uLCB7fV0pO1xuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBjb250cmFjdFByb21pc2UudHhbJ3BzcDM0Ojp0cmFuc2ZlciddKHsgZ2FzTGltaXQgfSwgcmVjaXBpZW50QWRkcmVzcywgb25DaGFpbk9wdGlvbiwge30pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5kZWJ1ZyhlKTtcblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Vcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IEFwaVByb21pc2UgfSBmcm9tICdAcG9sa2Fkb3QvYXBpJztcbmltcG9ydCB7IENvbnRyYWN0UHJvbWlzZSB9IGZyb20gJ0Bwb2xrYWRvdC9hcGktY29udHJhY3QnO1xuaW1wb3J0IHsgV2VpZ2h0VjIgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBDb2RlYyB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcyc7XG5pbXBvcnQgeyBCTiB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcblxuY29uc3QgTUFYX0NBTExfV0VJR0hUID0gJzUwMDAwMDAwMDAwMDAnO1xuY29uc3QgREVGQVVMVF9SRUZfVElNRSA9ICcxMDAwMDAwMDAwMDAwJztcblxuY29uc3QgdG9Db250cmFjdEFiaU1lc3NhZ2UgPSAoY29udHJhY3RQcm9taXNlOiBDb250cmFjdFByb21pc2UsIG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGNvbnRyYWN0UHJvbWlzZS5hYmkubWVzc2FnZXMuZmluZCgobSkgPT4gbS5tZXRob2QgPT09IG1lc3NhZ2UpO1xuXG4gIGlmICghdmFsdWUpIHtcbiAgICBjb25zdCBtZXNzYWdlcyA9IGNvbnRyYWN0UHJvbWlzZT8uYWJpLm1lc3NhZ2VzXG4gICAgICAubWFwKChtKSA9PiBtLm1ldGhvZClcbiAgICAgIC5qb2luKCcsICcpO1xuXG4gICAgY29uc3QgZXJyb3IgPSBgXCIke21lc3NhZ2V9XCIgbm90IGZvdW5kIGluIG1ldGFkYXRhLnNwZWMubWVzc2FnZXM6IFske21lc3NhZ2VzfV1gO1xuXG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBlcnJvciB9O1xuICB9XG5cbiAgcmV0dXJuIHsgb2s6IHRydWUsIHZhbHVlIH07XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0V2FzbUNvbnRyYWN0R2FzTGltaXQgKFxuICBhcGk6IEFwaVByb21pc2UsXG4gIGNhbGxlckFkZHJlc3M6IHN0cmluZyxcbiAgbWVzc2FnZTogc3RyaW5nLFxuICBjb250cmFjdDogQ29udHJhY3RQcm9taXNlLFxuICBvcHRpb25zID0ge30sXG4gIGFyZ3MgPSBbXVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYWJpTWVzc2FnZSA9IHRvQ29udHJhY3RBYmlNZXNzYWdlKGNvbnRyYWN0LCBtZXNzYWdlKTtcblxuICAgIGlmICghYWJpTWVzc2FnZS5vaykge1xuICAgICAgcmV0dXJuIGdldERlZmF1bHRXZWlnaHRWMihhcGksIHRydWUpO1xuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCB7IGdhc0xpbWl0LCBzdG9yYWdlRGVwb3NpdExpbWl0LCB2YWx1ZSB9ID0gb3B0aW9ucztcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCB7IGdhc1JlcXVpcmVkIH0gPSBhd2FpdCBhcGkuY2FsbC5jb250cmFjdHNBcGkuY2FsbChcbiAgICAgIGNhbGxlckFkZHJlc3MsXG4gICAgICBjb250cmFjdC5hZGRyZXNzLFxuICAgICAgdmFsdWUgPz8gbmV3IEJOKDApLFxuICAgICAgZ2FzTGltaXQgPz8gbnVsbCxcbiAgICAgIHN0b3JhZ2VEZXBvc2l0TGltaXQgPz8gbnVsbCxcbiAgICAgIGFiaU1lc3NhZ2U/LnZhbHVlPy50b1U4YShhcmdzKVxuICAgICk7XG5cbiAgICByZXR1cm4gZ2FzUmVxdWlyZWQgYXMgQ29kZWM7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBnZXREZWZhdWx0V2VpZ2h0VjIoYXBpLCB0cnVlKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdFdlaWdodFYyIChhcGlQcm9taXNlOiBBcGlQcm9taXNlLCBpc0ZhbGxiYWNrPzogYm9vbGVhbik6IFdlaWdodFYyIHtcbiAgY29uc3QgcHJvb2ZTaXplID0gaXNGYWxsYmFjayA/IDM0MDc4NzIgOiBNQVhfQ0FMTF9XRUlHSFQ7IC8vIFRPRE86IGhhbmRsZSBlcnJvciBiZXR0ZXJcbiAgY29uc3QgcmVmVGltZSA9IGlzRmFsbGJhY2sgPyAzMjQ5MDAwMDAwMCA6IERFRkFVTFRfUkVGX1RJTUU7XG5cbiAgcmV0dXJuIGFwaVByb21pc2UucmVnaXN0cnkuY3JlYXRlVHlwZSgnV2VpZ2h0VjInLCB7XG4gICAgcmVmVGltZSxcbiAgICBwcm9vZlNpemVcbiAgfSk7XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Vcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9DaGFpbkFzc2V0LCBfQ2hhaW5JbmZvIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IGdldEV4dHJpbnNpY0J5UG9sa2Fkb3RYY21QYWxsZXQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3hjbS9wb2xrYWRvdFhjbSc7XG5pbXBvcnQgeyBnZXRFeHRyaW5zaWNCeVhjbVBhbGxldFBhbGxldCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkveGNtL3hjbVBhbGxldCc7XG5pbXBvcnQgeyBnZXRFeHRyaW5zaWNCeVh0b2tlbnNQYWxsZXQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3hjbS94VG9rZW5zJztcbmltcG9ydCB7IF9YQ01fQ0hBSU5fR1JPVVAgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuXG5pbXBvcnQgeyBTdWJtaXR0YWJsZUV4dHJpbnNpYyB9IGZyb20gJ0Bwb2xrYWRvdC9hcGkvdHlwZXMnO1xuXG5pbnRlcmZhY2UgQ3JlYXRlWGNtRXh0cmluc2ljUHJvcHMge1xuICBvcmlnaW5Ub2tlbkluZm86IF9DaGFpbkFzc2V0O1xuICBkZXN0aW5hdGlvblRva2VuSW5mbzogX0NoYWluQXNzZXQ7XG4gIHJlY2lwaWVudDogc3RyaW5nO1xuICBzZW5kaW5nVmFsdWU6IHN0cmluZztcblxuICBzdWJzdHJhdGVBcGk6IF9TdWJzdHJhdGVBcGk7XG4gIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz47XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVYY21FeHRyaW5zaWMgPSBhc3luYyAoeyBjaGFpbkluZm9NYXAsXG4gIGRlc3RpbmF0aW9uVG9rZW5JbmZvLFxuICBvcmlnaW5Ub2tlbkluZm8sXG4gIHJlY2lwaWVudCxcbiAgc2VuZGluZ1ZhbHVlLFxuICBzdWJzdHJhdGVBcGkgfTogQ3JlYXRlWGNtRXh0cmluc2ljUHJvcHMpOiBQcm9taXNlPFN1Ym1pdHRhYmxlRXh0cmluc2ljPCdwcm9taXNlJz4+ID0+IHtcbiAgY29uc3Qgb3JpZ2luQ2hhaW5JbmZvID0gY2hhaW5JbmZvTWFwW29yaWdpblRva2VuSW5mby5vcmlnaW5DaGFpbl07XG4gIGNvbnN0IGRlc3RpbmF0aW9uQ2hhaW5JbmZvID0gY2hhaW5JbmZvTWFwW2Rlc3RpbmF0aW9uVG9rZW5JbmZvLm9yaWdpbkNoYWluXTtcblxuICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHN1YnN0cmF0ZUFwaS5pc1JlYWR5O1xuICBjb25zdCBhcGkgPSBjaGFpbkFwaS5hcGk7XG5cbiAgbGV0IGV4dHJpbnNpYztcblxuICBpZiAoX1hDTV9DSEFJTl9HUk9VUC5wb2xrYWRvdFhjbS5pbmNsdWRlcyhvcmlnaW5Ub2tlbkluZm8ub3JpZ2luQ2hhaW4pKSB7XG4gICAgZXh0cmluc2ljID0gZ2V0RXh0cmluc2ljQnlQb2xrYWRvdFhjbVBhbGxldChvcmlnaW5Ub2tlbkluZm8sIG9yaWdpbkNoYWluSW5mbywgZGVzdGluYXRpb25DaGFpbkluZm8sIHJlY2lwaWVudCwgc2VuZGluZ1ZhbHVlLCBhcGkpO1xuICB9IGVsc2UgaWYgKF9YQ01fQ0hBSU5fR1JPVVAueGNtUGFsbGV0LmluY2x1ZGVzKG9yaWdpblRva2VuSW5mby5vcmlnaW5DaGFpbikpIHtcbiAgICBleHRyaW5zaWMgPSBnZXRFeHRyaW5zaWNCeVhjbVBhbGxldFBhbGxldChvcmlnaW5Ub2tlbkluZm8sIG9yaWdpbkNoYWluSW5mbywgZGVzdGluYXRpb25DaGFpbkluZm8sIHJlY2lwaWVudCwgc2VuZGluZ1ZhbHVlLCBhcGkpO1xuICB9IGVsc2Uge1xuICAgIGV4dHJpbnNpYyA9IGdldEV4dHJpbnNpY0J5WHRva2Vuc1BhbGxldChvcmlnaW5Ub2tlbkluZm8sIG9yaWdpbkNoYWluSW5mbywgZGVzdGluYXRpb25DaGFpbkluZm8sIHJlY2lwaWVudCwgc2VuZGluZ1ZhbHVlLCBhcGkpO1xuICB9XG5cbiAgcmV0dXJuIGV4dHJpbnNpYztcbn07XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Vcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9DaGFpbkFzc2V0LCBfQ2hhaW5JbmZvIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IGdldEJlbmVmaWNpYXJ5LCBnZXREZXN0aW5hdGlvbkNoYWluTG9jYXRpb24sIGdldERlc3RXZWlnaHQsIGdldFRva2VuTG9jYXRpb24gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3hjbS91dGlscyc7XG5pbXBvcnQgeyBfaXNOYXRpdmVUb2tlbiwgX2lzU3Vic3RyYXRlUmVsYXlDaGFpbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5cbmltcG9ydCB7IEFwaVByb21pc2UgfSBmcm9tICdAcG9sa2Fkb3QvYXBpJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEV4dHJpbnNpY0J5UG9sa2Fkb3RYY21QYWxsZXQgKHRva2VuSW5mbzogX0NoYWluQXNzZXQsIG9yaWdpbkNoYWluSW5mbzogX0NoYWluSW5mbywgZGVzdGluYXRpb25DaGFpbkluZm86IF9DaGFpbkluZm8sIHJlY2lwaWVudEFkZHJlc3M6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYXBpOiBBcGlQcm9taXNlKSB7XG4gIGNvbnN0IHdlaWdodFBhcmFtID0gZ2V0RGVzdFdlaWdodCgpO1xuICBjb25zdCB2ZXJzaW9uID0gWydzdGF0ZW1pbnQnLCAnc3RhdGVtaW5lJywgJ3NoaWRlbicsICdhc3RhciddLmluY2x1ZGVzKG9yaWdpbkNoYWluSW5mby5zbHVnKSA/ICdWMycgOiAnVjEnO1xuICBjb25zdCBiZW5lZmljaWFyeSA9IGdldEJlbmVmaWNpYXJ5KGRlc3RpbmF0aW9uQ2hhaW5JbmZvLCByZWNpcGllbnRBZGRyZXNzLCB2ZXJzaW9uKTtcbiAgY29uc3QgZGVzdGluYXRpb24gPSBnZXREZXN0aW5hdGlvbkNoYWluTG9jYXRpb24ob3JpZ2luQ2hhaW5JbmZvLCBkZXN0aW5hdGlvbkNoYWluSW5mbywgdmVyc2lvbik7XG4gIGxldCBhc3NldExvY2F0aW9uID0gZ2V0VG9rZW5Mb2NhdGlvbih0b2tlbkluZm8sIHZhbHVlLCB2ZXJzaW9uKTtcblxuICBsZXQgbWV0aG9kID0gJ2xpbWl0ZWRSZXNlcnZlVHJhbnNmZXJBc3NldHMnO1xuXG4gIGlmIChbJ2FzdGFyJywgJ3NoaWRlbiddLmluY2x1ZGVzKG9yaWdpbkNoYWluSW5mby5zbHVnKSAmJiAhX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSkge1xuICAgIG1ldGhvZCA9ICdsaW1pdGVkUmVzZXJ2ZVdpdGhkcmF3QXNzZXRzJztcbiAgfSBlbHNlIGlmIChbJ3N0YXRlbWludCcsICdzdGF0ZW1pbmUnXS5pbmNsdWRlcyhvcmlnaW5DaGFpbkluZm8uc2x1ZykgJiYgX2lzU3Vic3RyYXRlUmVsYXlDaGFpbihkZXN0aW5hdGlvbkNoYWluSW5mbykpIHtcbiAgICBhc3NldExvY2F0aW9uID0ge1xuICAgICAgW3ZlcnNpb25dOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogeyBDb25jcmV0ZTogeyBwYXJlbnRzOiAxLCBpbnRlcmlvcjogJ0hlcmUnIH0gfSxcbiAgICAgICAgICBmdW46IHsgRnVuZ2libGU6IHZhbHVlIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG4gICAgbWV0aG9kID0gJ2xpbWl0ZWRUZWxlcG9ydEFzc2V0cyc7XG4gIH1cblxuICByZXR1cm4gYXBpLnR4LnBvbGthZG90WGNtW21ldGhvZF0oXG4gICAgZGVzdGluYXRpb24sXG4gICAgYmVuZWZpY2lhcnksXG4gICAgYXNzZXRMb2NhdGlvbixcbiAgICAwLCAvLyBGZWVBc3NldEl0ZW1cbiAgICB3ZWlnaHRQYXJhbVxuICApO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBDT01NT05fQ0hBSU5fU0xVR1MgfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QnO1xuaW1wb3J0IHsgX0NoYWluQXNzZXQsIF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgX2dldFN1YnN0cmF0ZVBhcmFJZCwgX2dldFhjbUFzc2V0TXVsdGlsb2NhdGlvbiwgX2lzQ2hhaW5Fdm1Db21wYXRpYmxlLCBfaXNOYXRpdmVUb2tlbiwgX2lzU3Vic3RyYXRlUGFyYUNoYWluLCBfaXNTdWJzdHJhdGVSZWxheUNoYWluIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3V0aWxzJztcblxuaW1wb3J0IHsgZGVjb2RlQWRkcmVzcywgZXZtVG9BZGRyZXNzIH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvJztcblxuZXhwb3J0IGNvbnN0IEZPVVJfSU5TVFJVQ1RJT05TX1dFSUdIVCA9IDUwMDAwMDAwMDA7XG5leHBvcnQgY29uc3QgRk9VUl9JTlNUUlVDVElPTlNfTElNSVRFRF9XRUlHSFQgPSB7IExpbWl0ZWQ6IDUwMDAwMDAwMDAgfTtcblxuLy8gZ2V0IG11bHRpbG9jYXRpb24gZm9yIGRlc3RpbmF0aW9uIGNoYWluIGZyb20gYSBwYXJhY2hhaW5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY2VpdmVyTG9jYXRpb24gKGRlc3RpbmF0aW9uQ2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCB0b0FkZHJlc3M6IHN0cmluZywgdmVyc2lvbj86IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICBjb25zdCBuZXR3b3JrID0gdmVyc2lvbiAmJiB2ZXJzaW9uID09PSAnVjMnID8gdW5kZWZpbmVkIDogJ0FueSc7XG5cbiAgaWYgKGRlc3RpbmF0aW9uQ2hhaW5JbmZvLnNsdWcgPT09IENPTU1PTl9DSEFJTl9TTFVHUy5BU1RBUl9FVk0pIHtcbiAgICBjb25zdCBzczU4QWRkcmVzcyA9IGV2bVRvQWRkcmVzcyh0b0FkZHJlc3MsIDIwMDYpOyAvLyBUT0RPOiBzaG91bGRuJ3QgcGFzcyBhZGRyZXNzUHJlZml4IGRpcmVjdGx5XG5cbiAgICByZXR1cm4geyBBY2NvdW50SWQzMjogeyBuZXR3b3JrLCBpZDogZGVjb2RlQWRkcmVzcyhzczU4QWRkcmVzcykgfSB9O1xuICB9XG5cbiAgaWYgKF9pc0NoYWluRXZtQ29tcGF0aWJsZShkZXN0aW5hdGlvbkNoYWluSW5mbykpIHtcbiAgICByZXR1cm4geyBBY2NvdW50S2V5MjA6IHsgbmV0d29yaywga2V5OiB0b0FkZHJlc3MgfSB9O1xuICB9XG5cbiAgcmV0dXJuIHsgQWNjb3VudElkMzI6IHsgbmV0d29yaywgaWQ6IGRlY29kZUFkZHJlc3ModG9BZGRyZXNzKSB9IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCZW5lZmljaWFyeSAoZGVzdGluYXRpb25DaGFpbkluZm86IF9DaGFpbkluZm8sIHJlY2lwaWVudEFkZHJlc3M6IHN0cmluZywgdmVyc2lvbiA9ICdWMScpIHtcbiAgY29uc3QgcmVjZWl2ZXJMb2NhdGlvbjogUmVjb3JkPHN0cmluZywgYW55PiA9IGdldFJlY2VpdmVyTG9jYXRpb24oZGVzdGluYXRpb25DaGFpbkluZm8sIHJlY2lwaWVudEFkZHJlc3MsIHZlcnNpb24pO1xuXG4gIHJldHVybiB7XG4gICAgW3ZlcnNpb25dOiB7XG4gICAgICBwYXJlbnRzOiAwLFxuICAgICAgaW50ZXJpb3I6IHtcbiAgICAgICAgWDE6IHJlY2VpdmVyTG9jYXRpb25cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZXN0V2VpZ2h0ICgpIHtcbiAgcmV0dXJuICdVbmxpbWl0ZWQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9rZW5Mb2NhdGlvbiAodG9rZW5JbmZvOiBfQ2hhaW5Bc3NldCwgc2VuZGluZ1ZhbHVlOiBzdHJpbmcsIHZlcnNpb24gPSAnVjEnKSB7XG4gIGlmICghX2lzTmF0aXZlVG9rZW4odG9rZW5JbmZvKSkge1xuICAgIGNvbnN0IG11bHRpbG9jYXRpb24gPSBfZ2V0WGNtQXNzZXRNdWx0aWxvY2F0aW9uKHRva2VuSW5mbyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgW3ZlcnNpb25dOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogbXVsdGlsb2NhdGlvbixcbiAgICAgICAgICBmdW46IHsgRnVuZ2libGU6IHNlbmRpbmdWYWx1ZSB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBbdmVyc2lvbl06IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IHsgQ29uY3JldGU6IHsgcGFyZW50czogMCwgaW50ZXJpb3I6ICdIZXJlJyB9IH0sXG4gICAgICAgIGZ1bjogeyBGdW5naWJsZTogc2VuZGluZ1ZhbHVlIH1cbiAgICAgIH1cbiAgICBdXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZXN0TXVsdGlsb2NhdGlvbiAoZGVzdGluYXRpb25DaGFpbkluZm86IF9DaGFpbkluZm8sIHJlY2lwaWVudDogc3RyaW5nLCB2ZXJzaW9uID0gJ1YxJykge1xuICBjb25zdCByZWNlaXZlckxvY2F0aW9uID0gZ2V0UmVjZWl2ZXJMb2NhdGlvbihkZXN0aW5hdGlvbkNoYWluSW5mbywgcmVjaXBpZW50LCB2ZXJzaW9uKTtcblxuICBpZiAoX2lzU3Vic3RyYXRlUGFyYUNoYWluKGRlc3RpbmF0aW9uQ2hhaW5JbmZvKSkge1xuICAgIGNvbnN0IGludGVyaW9yID0ge1xuICAgICAgWDI6IFtcbiAgICAgICAgeyBQYXJhY2hhaW46IF9nZXRTdWJzdHJhdGVQYXJhSWQoZGVzdGluYXRpb25DaGFpbkluZm8pIH0sXG4gICAgICAgIHJlY2VpdmVyTG9jYXRpb25cbiAgICAgIF1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIFt2ZXJzaW9uXToge1xuICAgICAgICBwYXJlbnRzOiAxLFxuICAgICAgICBpbnRlcmlvclxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFt2ZXJzaW9uXToge1xuICAgICAgcGFyZW50czogMSxcbiAgICAgIGludGVyaW9yOiB7XG4gICAgICAgIFgxOiByZWNlaXZlckxvY2F0aW9uXG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVzdGluYXRpb25DaGFpbkxvY2F0aW9uIChvcmlnaW5DaGFpbkluZm86IF9DaGFpbkluZm8sIGRlc3RpbmF0aW9uQ2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCB2ZXJzaW9uID0gJ1YxJykge1xuICBjb25zdCBwYXJlbnRzID0gX2lzU3Vic3RyYXRlUmVsYXlDaGFpbihvcmlnaW5DaGFpbkluZm8pID8gMCA6IDE7XG4gIGNvbnN0IGludGVyaW9yID0gX2lzU3Vic3RyYXRlUGFyYUNoYWluKGRlc3RpbmF0aW9uQ2hhaW5JbmZvKVxuICAgID8ge1xuICAgICAgWDE6IHsgUGFyYWNoYWluOiBfZ2V0U3Vic3RyYXRlUGFyYUlkKGRlc3RpbmF0aW9uQ2hhaW5JbmZvKSB9XG4gICAgfVxuICAgIDogJ0hlcmUnO1xuXG4gIHJldHVybiB7XG4gICAgW3ZlcnNpb25dOiB7XG4gICAgICBwYXJlbnRzLFxuICAgICAgaW50ZXJpb3JcbiAgICB9XG4gIH07XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Vcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9DaGFpbkFzc2V0LCBfQ2hhaW5JbmZvIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IEZPVVJfSU5TVFJVQ1RJT05TX1dFSUdIVCwgZ2V0RGVzdE11bHRpbG9jYXRpb24sIGdldERlc3RXZWlnaHQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3hjbS91dGlscyc7XG5pbXBvcnQgeyBfZ2V0VG9rZW5PbkNoYWluQXNzZXRJZCwgX2dldFRva2VuT25DaGFpbkluZm8sIF9nZXRYY21Bc3NldElkLCBfZ2V0WGNtQXNzZXRNdWx0aWxvY2F0aW9uLCBfZ2V0WGNtQXNzZXRUeXBlLCBfaXNOYXRpdmVUb2tlbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5cbmltcG9ydCB7IEFwaVByb21pc2UgfSBmcm9tICdAcG9sa2Fkb3QvYXBpJztcblxuZnVuY3Rpb24gZ2V0Q3VycmVuY3lJZCAodG9rZW5JbmZvOiBfQ2hhaW5Bc3NldCk6IHVua25vd24ge1xuICBpZiAoWydhY2FsYScsICdrYXJ1cmEnXS5pbmNsdWRlcyh0b2tlbkluZm8ub3JpZ2luQ2hhaW4pICYmIF9pc05hdGl2ZVRva2VuKHRva2VuSW5mbykpIHtcbiAgICByZXR1cm4gX2dldFhjbUFzc2V0TXVsdGlsb2NhdGlvbih0b2tlbkluZm8pIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIH0gZWxzZSBpZiAoWydtb29uYmVhbScsICdtb29uYmFzZScsICdtb29ucml2ZXInXS5pbmNsdWRlcyh0b2tlbkluZm8ub3JpZ2luQ2hhaW4pKSB7XG4gICAgY29uc3QgdG9rZW5UeXBlID0gX2dldFhjbUFzc2V0VHlwZSh0b2tlbkluZm8pO1xuICAgIGNvbnN0IGFzc2V0SWQgPSBfZ2V0WGNtQXNzZXRJZCh0b2tlbkluZm8pO1xuXG4gICAgcmV0dXJuIHsgW3Rva2VuVHlwZV06IGFzc2V0SWQgfTtcbiAgfSBlbHNlIGlmIChbJ3Bpb25lZXInXS5pbmNsdWRlcyh0b2tlbkluZm8ub3JpZ2luQ2hhaW4pKSB7XG4gICAgcmV0dXJuIF9nZXRYY21Bc3NldE11bHRpbG9jYXRpb24odG9rZW5JbmZvKSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICB9XG5cbiAgcmV0dXJuIF9nZXRUb2tlbk9uQ2hhaW5JbmZvKHRva2VuSW5mbykgfHwgX2dldFRva2VuT25DaGFpbkFzc2V0SWQodG9rZW5JbmZvKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEV4dHJpbnNpY0J5WHRva2Vuc1BhbGxldCAodG9rZW5JbmZvOiBfQ2hhaW5Bc3NldCwgb3JpZ2luQ2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBkZXN0aW5hdGlvbkNoYWluSW5mbzogX0NoYWluSW5mbywgcmVjaXBpZW50QWRkcmVzczogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhcGk6IEFwaVByb21pc2UpIHtcbiAgY29uc3Qgd2VpZ2h0UGFyYW0gPSBbJ3Bpb25lZXInXS5pbmNsdWRlcyhvcmlnaW5DaGFpbkluZm8uc2x1ZykgPyBGT1VSX0lOU1RSVUNUSU9OU19XRUlHSFQgOiBnZXREZXN0V2VpZ2h0KCk7XG4gIGNvbnN0IGRlc3RWZXJzaW9uID0gWydtb29uYmVhbScsICdtb29ucml2ZXInLCAnYmlmcm9zdF9kb3QnLCAnaW50ZXJsYXknLCAnaHlkcmFkeF9tYWluJywgJ2FjYWxhJ10uaW5jbHVkZXMob3JpZ2luQ2hhaW5JbmZvLnNsdWcpID8gJ1YzJyA6IHVuZGVmaW5lZDtcblxuICByZXR1cm4gYXBpLnR4LnhUb2tlbnMudHJhbnNmZXIoXG4gICAgZ2V0Q3VycmVuY3lJZCh0b2tlbkluZm8pLFxuICAgIHZhbHVlLFxuICAgIGdldERlc3RNdWx0aWxvY2F0aW9uKGRlc3RpbmF0aW9uQ2hhaW5JbmZvLCByZWNpcGllbnRBZGRyZXNzLCBkZXN0VmVyc2lvbiksXG4gICAgd2VpZ2h0UGFyYW1cbiAgKTtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluQXNzZXQsIF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgZ2V0QmVuZWZpY2lhcnksIGdldERlc3RpbmF0aW9uQ2hhaW5Mb2NhdGlvbiwgZ2V0RGVzdFdlaWdodCwgZ2V0VG9rZW5Mb2NhdGlvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkveGNtL3V0aWxzJztcblxuaW1wb3J0IHsgQXBpUHJvbWlzZSB9IGZyb20gJ0Bwb2xrYWRvdC9hcGknO1xuXG4vLyB0aGlzIHBhbGxldCBpcyBvbmx5IHVzZWQgYnkgUmVsYXljaGFpbnNcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRyaW5zaWNCeVhjbVBhbGxldFBhbGxldCAodG9rZW5JbmZvOiBfQ2hhaW5Bc3NldCwgb3JpZ2luQ2hhaW5JbmZvOiBfQ2hhaW5JbmZvLCBkZXN0aW5hdGlvbkNoYWluSW5mbzogX0NoYWluSW5mbywgcmVjaXBpZW50QWRkcmVzczogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhcGk6IEFwaVByb21pc2UpIHtcbiAgY29uc3Qgd2VpZ2h0UGFyYW0gPSBnZXREZXN0V2VpZ2h0KCk7XG4gIGNvbnN0IHhjbVZlciA9ICdWMyc7XG4gIGNvbnN0IGRlc3RpbmF0aW9uID0gZ2V0RGVzdGluYXRpb25DaGFpbkxvY2F0aW9uKG9yaWdpbkNoYWluSW5mbywgZGVzdGluYXRpb25DaGFpbkluZm8sIHhjbVZlcik7XG4gIGNvbnN0IGJlbmVmaWNpYXJ5ID0gZ2V0QmVuZWZpY2lhcnkoZGVzdGluYXRpb25DaGFpbkluZm8sIHJlY2lwaWVudEFkZHJlc3MsIHhjbVZlcik7XG4gIGNvbnN0IHRva2VuTG9jYXRpb24gPSBnZXRUb2tlbkxvY2F0aW9uKHRva2VuSW5mbywgdmFsdWUsIHhjbVZlcik7XG5cbiAgbGV0IG1ldGhvZCA9ICdsaW1pdGVkUmVzZXJ2ZVRyYW5zZmVyQXNzZXRzJztcblxuICBpZiAoWydzdGF0ZW1pbnQnLCAnc3RhdGVtaW5lJ10uaW5jbHVkZXMoZGVzdGluYXRpb25DaGFpbkluZm8uc2x1ZykpIHtcbiAgICBtZXRob2QgPSAnbGltaXRlZFRlbGVwb3J0QXNzZXRzJztcbiAgfVxuXG4gIHJldHVybiBhcGkudHgueGNtUGFsbGV0W21ldGhvZF0oXG4gICAgZGVzdGluYXRpb24sXG4gICAgYmVuZWZpY2lhcnksXG4gICAgdG9rZW5Mb2NhdGlvbixcbiAgICAwLFxuICAgIHdlaWdodFBhcmFtXG4gICk7XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluQXNzZXQsIF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgQXBpTWFwLCBTZXJ2aWNlSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgQ1JPTl9SRUZSRVNIX05GVF9JTlRFUlZBTCwgQ1JPTl9SRUZSRVNIX1NUQUtJTkdfUkVXQVJEX0ZBU1RfSU5URVJWQUwsIENST05fUkVGUkVTSF9TVEFLSU5HX1JFV0FSRF9JTlRFUlZBTCwgQ1JPTl9TWU5DX01BTlRBX1BBWSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvY29uc3RhbnRzJztcbmltcG9ydCB7IEtvbmlTdWJzY3JpcHRpb24gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYmFja2dyb3VuZC9zdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgX2lzQ2hhaW5TdXBwb3J0RXZtTmZ0LCBfaXNDaGFpblN1cHBvcnROYXRpdmVOZnQsIF9pc0NoYWluU3VwcG9ydFdhc21OZnQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgRXZlbnRJdGVtLCBFdmVudFR5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2V2ZW50LXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IERhdGFiYXNlU2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9EYXRhYmFzZVNlcnZpY2UnO1xuaW1wb3J0IHsgd2FpdFRpbWVvdXQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzJztcbmltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBsb2dnZXIgYXMgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvdHlwZXMnO1xuXG5pbXBvcnQgS29uaVN0YXRlIGZyb20gJy4vaGFuZGxlcnMvU3RhdGUnO1xuXG5leHBvcnQgY2xhc3MgS29uaUNyb24ge1xuICBzdWJzY3JpcHRpb25zOiBLb25pU3Vic2NyaXB0aW9uO1xuICBwdWJsaWMgc3RhdHVzOiAncGVuZGluZycgfCAncnVubmluZycgfCAnc3RvcHBlZCcgPSAncGVuZGluZyc7XG4gIHByaXZhdGUgc2VydmljZVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uIHwgdW5kZWZpbmVkO1xuICBwdWJsaWMgZGJTZXJ2aWNlOiBEYXRhYmFzZVNlcnZpY2U7XG4gIHByaXZhdGUgc3RhdGU6IEtvbmlTdGF0ZTtcbiAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcblxuICBjb25zdHJ1Y3RvciAoc3RhdGU6IEtvbmlTdGF0ZSwgc3Vic2NyaXB0aW9uczogS29uaVN1YnNjcmlwdGlvbiwgZGJTZXJ2aWNlOiBEYXRhYmFzZVNlcnZpY2UpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBzdWJzY3JpcHRpb25zO1xuICAgIHRoaXMuZGJTZXJ2aWNlID0gZGJTZXJ2aWNlO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmxvZ2dlciA9IGNyZWF0ZUxvZ2dlcignQ3JvbicpO1xuICAgIC8vIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcm9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gIHByaXZhdGUgc3ViamVjdE1hcDogUmVjb3JkPHN0cmluZywgU3ViamVjdDxhbnk+PiA9IHt9O1xuICBwcml2YXRlIGV2ZW50SGFuZGxlcj86ICgoZXZlbnRzOiBFdmVudEl0ZW08RXZlbnRUeXBlPltdLCBldmVudFR5cGVzOiBFdmVudFR5cGVbXSkgPT4gdm9pZCk7XG5cbiAgZ2V0Q3JvbiA9IChuYW1lOiBzdHJpbmcpOiBhbnkgPT4ge1xuICAgIHJldHVybiB0aGlzLmNyb25NYXBbbmFtZV07XG4gIH07XG5cbiAgZ2V0U3ViamVjdE1hcCA9IChuYW1lOiBzdHJpbmcpOiBhbnkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN1YmplY3RNYXBbbmFtZV07XG4gIH07XG5cbiAgYWRkQ3JvbiA9IChuYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiAocGFyYW0/OiBhbnkpID0+IHZvaWQsIGludGVydmFsOiBudW1iZXIsIHJ1bkZpcnN0ID0gdHJ1ZSkgPT4ge1xuICAgIGlmIChydW5GaXJzdCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICB0aGlzLmNyb25NYXBbbmFtZV0gPSBzZXRJbnRlcnZhbChjYWxsYmFjaywgaW50ZXJ2YWwpO1xuICB9O1xuXG4gIGFkZFN1YnNjcmliZUNyb24gPSA8VD4obmFtZTogc3RyaW5nLCBjYWxsYmFjazogKHN1YmplY3Q6IFN1YmplY3Q8VD4pID0+IHZvaWQsIGludGVydmFsOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBzYiA9IG5ldyBTdWJqZWN0PFQ+KCk7XG5cbiAgICBjYWxsYmFjayhzYik7XG4gICAgdGhpcy5zdWJqZWN0TWFwW25hbWVdID0gc2I7XG4gICAgdGhpcy5jcm9uTWFwW25hbWVdID0gc2V0SW50ZXJ2YWwoY2FsbGJhY2ssIGludGVydmFsKTtcbiAgfTtcblxuICByZW1vdmVDcm9uID0gKG5hbWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5jcm9uTWFwW25hbWVdIGFzIG51bWJlcjtcblxuICAgIGlmIChpbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICBkZWxldGUgdGhpcy5jcm9uTWFwW25hbWVdO1xuICAgIH1cbiAgfTtcblxuICByZW1vdmVBbGxDcm9ucyA9ICgpID0+IHtcbiAgICBPYmplY3QuZW50cmllcyh0aGlzLmNyb25NYXApLmZvckVhY2goKFtrZXksIGludGVydmFsXSkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCBhcyBudW1iZXIpO1xuICAgICAgZGVsZXRlIHRoaXMuY3Jvbk1hcFtrZXldO1xuICAgIH0pO1xuICB9O1xuXG4gIHN0YXJ0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gJ3J1bm5pbmcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuc3RhdGUuZXZlbnRTZXJ2aWNlLndhaXRLZXlyaW5nUmVhZHksIHRoaXMuc3RhdGUuZXZlbnRTZXJ2aWNlLndhaXRBc3NldFJlYWR5XSk7XG5cbiAgICBjb25zdCBjdXJyZW50QWNjb3VudEluZm8gPSB0aGlzLnN0YXRlLmtleXJpbmdTZXJ2aWNlLmN1cnJlbnRBY2NvdW50O1xuXG4gICAgY29uc3QgY29tbW9uUmVsb2FkRXZlbnRzOiBFdmVudFR5cGVbXSA9IFtcbiAgICAgICdhY2NvdW50LmFkZCcsXG4gICAgICAnYWNjb3VudC5yZW1vdmUnLFxuICAgICAgJ2FjY291bnQudXBkYXRlQ3VycmVudCcsXG4gICAgICAnY2hhaW4uYWRkJyxcbiAgICAgICdhc3NldC51cGRhdGVTdGF0ZSdcbiAgICBdO1xuXG4gICAgdGhpcy5ldmVudEhhbmRsZXIgPSAoZXZlbnRzLCBldmVudFR5cGVzKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlSW5mbyA9IHRoaXMuc3RhdGUuZ2V0U2VydmljZUluZm8oKTtcbiAgICAgIGNvbnN0IGNvbW1vblJlbG9hZCA9IGV2ZW50VHlwZXMuc29tZSgoZXZlbnRUeXBlKSA9PiBjb21tb25SZWxvYWRFdmVudHMuaW5jbHVkZXMoZXZlbnRUeXBlKSk7XG5cbiAgICAgIGNvbnN0IGNoYWluVXBkYXRlZCA9IGV2ZW50VHlwZXMuaW5jbHVkZXMoJ2NoYWluLnVwZGF0ZVN0YXRlJyk7XG4gICAgICBjb25zdCByZWxvYWRNYW50YVBheSA9IGV2ZW50VHlwZXMuaW5jbHVkZXMoJ21hbnRhUGF5LnN1Ym1pdFRyYW5zYWN0aW9uJykgfHwgZXZlbnRUeXBlcy5pbmNsdWRlcygnbWFudGFQYXkuZW5hYmxlJyk7XG4gICAgICBjb25zdCB1cGRhdGVkQ2hhaW5zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBpZiAoY2hhaW5VcGRhdGVkKSB7XG4gICAgICAgIGV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnY2hhaW4udXBkYXRlU3RhdGUnKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRGF0YSA9IGV2ZW50LmRhdGEgYXMgW3N0cmluZ107XG5cbiAgICAgICAgICAgIHVwZGF0ZWRDaGFpbnMucHVzaCh1cGRhdGVkRGF0YVswXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjb21tb25SZWxvYWQgJiYgIWNoYWluVXBkYXRlZCAmJiAhcmVsb2FkTWFudGFQYXkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhZGRyZXNzID0gc2VydmljZUluZm8uY3VycmVudEFjY291bnRJbmZvPy5hZGRyZXNzO1xuXG4gICAgICBpZiAoIWFkZHJlc3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGFpbkluZm9NYXAgPSBzZXJ2aWNlSW5mby5jaGFpbkluZm9NYXA7XG5cbiAgICAgIGNvbnN0IG5lZWRVcGRhdGVOZnQgPSB0aGlzLm5lZWRVcGRhdGVOZnQoY2hhaW5JbmZvTWFwLCB1cGRhdGVkQ2hhaW5zKTtcblxuICAgICAgLy8gTWFudGFQYXlcbiAgICAgIHJlbG9hZE1hbnRhUGF5ICYmIHRoaXMucmVtb3ZlQ3Jvbignc3luY01hbnRhUGF5Jyk7XG5cbiAgICAgIC8vIE5GVFxuICAgICAgKGNvbW1vblJlbG9hZCB8fCBuZWVkVXBkYXRlTmZ0KSAmJiB0aGlzLnJlc2V0TmZ0KGFkZHJlc3MpO1xuICAgICAgKGNvbW1vblJlbG9hZCB8fCBuZWVkVXBkYXRlTmZ0KSAmJiB0aGlzLnJlbW92ZUNyb24oJ3JlZnJlc2hOZnQnKTtcblxuICAgICAgLy8gQ2hhaW5zXG4gICAgICBpZiAodGhpcy5jaGVja05ldHdvcmtBdmFpbGFibGUoc2VydmljZUluZm8pKSB7IC8vIG9ubHkgYWRkIGNyb24gam9iIGlmIHRoZXJlJ3MgYXQgbGVhc3QgMSBhY3RpdmUgbmV0d29ya1xuICAgICAgICAoY29tbW9uUmVsb2FkIHx8IG5lZWRVcGRhdGVOZnQpICYmIHRoaXMuYWRkQ3JvbigncmVmcmVzaE5mdCcsIHRoaXMucmVmcmVzaE5mdChhZGRyZXNzLCBzZXJ2aWNlSW5mby5jaGFpbkFwaU1hcCwgdGhpcy5zdGF0ZS5nZXRTbWFydENvbnRyYWN0TmZ0cygpLCB0aGlzLnN0YXRlLmdldEFjdGl2ZUNoYWluSW5mb01hcCgpKSwgQ1JPTl9SRUZSRVNIX05GVF9JTlRFUlZBTCk7XG4gICAgICAgIHJlbG9hZE1hbnRhUGF5ICYmIHRoaXMuYWRkQ3Jvbignc3luY01hbnRhUGF5JywgdGhpcy5zeW5jTWFudGFQYXksIENST05fU1lOQ19NQU5UQV9QQVkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRTdGFraW5nUmV3YXJkUmVhZHkoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zdGF0ZS5ldmVudFNlcnZpY2Uub25MYXp5KHRoaXMuZXZlbnRIYW5kbGVyKTtcblxuICAgIGlmICghY3VycmVudEFjY291bnRJbmZvPy5hZGRyZXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuc3RhdGUuZ2V0U3Vic3RyYXRlQXBpTWFwKCkpLmxlbmd0aCAhPT0gMCB8fCBPYmplY3Qua2V5cyh0aGlzLnN0YXRlLmdldEV2bUFwaU1hcCgpKS5sZW5ndGggIT09IDApIHtcbiAgICAgIHRoaXMucmVzZXROZnQoY3VycmVudEFjY291bnRJbmZvLmFkZHJlc3MpO1xuICAgICAgdGhpcy5hZGRDcm9uKCdyZWZyZXNoTmZ0JywgdGhpcy5yZWZyZXNoTmZ0KGN1cnJlbnRBY2NvdW50SW5mby5hZGRyZXNzLCB0aGlzLnN0YXRlLmdldEFwaU1hcCgpLCB0aGlzLnN0YXRlLmdldFNtYXJ0Q29udHJhY3ROZnRzKCksIHRoaXMuc3RhdGUuZ2V0QWN0aXZlQ2hhaW5JbmZvTWFwKCkpLCBDUk9OX1JFRlJFU0hfTkZUX0lOVEVSVkFMKTtcbiAgICAgIHRoaXMuYWRkQ3JvbigncmVmcmVzaFN0YWtpbmdSZXdhcmQnLCB0aGlzLnJlZnJlc2hTdGFraW5nUmV3YXJkKGN1cnJlbnRBY2NvdW50SW5mby5hZGRyZXNzKSwgQ1JPTl9SRUZSRVNIX1NUQUtJTkdfUkVXQVJEX0lOVEVSVkFMKTtcbiAgICAgIHRoaXMuYWRkQ3JvbigncmVmcmVzaFBvb2xpbmdTdGEgICAgICAgICAgICAga2luZ1Jld2FyZCcsIHRoaXMucmVmcmVzaFN0YWtpbmdSZXdhcmRGYXN0SW50ZXJ2YWwoY3VycmVudEFjY291bnRJbmZvLmFkZHJlc3MpLCBDUk9OX1JFRlJFU0hfU1RBS0lOR19SRVdBUkRfRkFTVF9JTlRFUlZBTCk7XG4gICAgICB0aGlzLmFkZENyb24oJ3N5bmNNYW50YVBheScsIHRoaXMuc3luY01hbnRhUGF5LCBDUk9OX1NZTkNfTUFOVEFfUEFZKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGFraW5nUmV3YXJkUmVhZHkoKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXR1cyA9ICdydW5uaW5nJztcbiAgfTtcblxuICBzdG9wID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gJ3N0b3BwZWQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVW5zdWJzY3JpYmUgZXZlbnRzXG4gICAgaWYgKHRoaXMuZXZlbnRIYW5kbGVyKSB7XG4gICAgICB0aGlzLnN0YXRlLmV2ZW50U2VydmljZS5vZmZMYXp5KHRoaXMuZXZlbnRIYW5kbGVyKTtcbiAgICAgIHRoaXMuZXZlbnRIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNlcnZpY2VTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuc2VydmljZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgdGhpcy5zZXJ2aWNlU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMucmVtb3ZlQWxsQ3JvbnMoKTtcblxuICAgIHRoaXMuc3RhdHVzID0gJ3N0b3BwZWQnO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuXG4gIHN5bmNNYW50YVBheSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5pc01hbnRhUGF5RW5hYmxlZCkge1xuICAgICAgdGhpcy5zdGF0ZS5zeW5jTWFudGFQYXkoKS5jYXRjaChjb25zb2xlLndhcm4pO1xuICAgIH1cbiAgfTtcblxuICByZWZyZXNoTmZ0ID0gKGFkZHJlc3M6IHN0cmluZywgYXBpTWFwOiBBcGlNYXAsIHNtYXJ0Q29udHJhY3ROZnRzOiBfQ2hhaW5Bc3NldFtdLCBjaGFpbkluZm9NYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+KSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5zdWJzY3JpYmVOZnQoYWRkcmVzcywgYXBpTWFwLnN1YnN0cmF0ZSwgYXBpTWFwLmV2bSwgc21hcnRDb250cmFjdE5mdHMsIGNoYWluSW5mb01hcCk7XG4gICAgfTtcbiAgfTtcblxuICByZXNldE5mdCA9IChuZXdBZGRyZXNzOiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLnN0YXRlLnJlc2V0TmZ0KG5ld0FkZHJlc3MpO1xuICB9O1xuXG4gIHJlZnJlc2hTdGFraW5nUmV3YXJkID0gKGFkZHJlc3M6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc3Vic2NyaWJlU3Rha2luZ1Jld2FyZChhZGRyZXNzKVxuICAgICAgICAuY2F0Y2godGhpcy5sb2dnZXIuZXJyb3IpO1xuICAgIH07XG4gIH07XG5cbiAgcmVmcmVzaFN0YWtpbmdSZXdhcmRGYXN0SW50ZXJ2YWwgPSAoYWRkcmVzczogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5zdWJzY3JpYmVTdGFraW5nUmV3YXJkRmFzdEludGVydmFsKGFkZHJlc3MpXG4gICAgICAgIC5jYXRjaCh0aGlzLmxvZ2dlci5lcnJvcik7XG4gICAgfTtcbiAgfTtcblxuICBzZXRTdGFraW5nUmV3YXJkUmVhZHkgPSAoKSA9PiB7XG4gICAgdGhpcy5zdGF0ZS51cGRhdGVTdGFraW5nUmV3YXJkUmVhZHkodHJ1ZSk7XG4gIH07XG5cbiAgY2hlY2tOZXR3b3JrQXZhaWxhYmxlID0gKHNlcnZpY2VJbmZvOiBTZXJ2aWNlSW5mbyk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzZXJ2aWNlSW5mby5jaGFpbkFwaU1hcC5zdWJzdHJhdGUpLmxlbmd0aCA+IDAgfHwgT2JqZWN0LmtleXMoc2VydmljZUluZm8uY2hhaW5BcGlNYXAuZXZtKS5sZW5ndGggPiAwO1xuICB9O1xuXG4gIHB1YmxpYyBhc3luYyByZWxvYWROZnQgKCkge1xuICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLnN0YXRlLmtleXJpbmdTZXJ2aWNlLmN1cnJlbnRBY2NvdW50LmFkZHJlc3M7XG4gICAgY29uc3Qgc2VydmljZUluZm8gPSB0aGlzLnN0YXRlLmdldFNlcnZpY2VJbmZvKCk7XG5cbiAgICB0aGlzLnJlc2V0TmZ0KGFkZHJlc3MpO1xuICAgIHRoaXMucmVtb3ZlQ3JvbigncmVmcmVzaE5mdCcpO1xuICAgIHRoaXMuYWRkQ3JvbigncmVmcmVzaE5mdCcsIHRoaXMucmVmcmVzaE5mdChhZGRyZXNzLCBzZXJ2aWNlSW5mby5jaGFpbkFwaU1hcCwgdGhpcy5zdGF0ZS5nZXRTbWFydENvbnRyYWN0TmZ0cygpLCB0aGlzLnN0YXRlLmdldEFjdGl2ZUNoYWluSW5mb01hcCgpKSwgQ1JPTl9SRUZSRVNIX05GVF9JTlRFUlZBTCk7XG5cbiAgICBhd2FpdCB3YWl0VGltZW91dCgxODAwKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlbG9hZFN0YWtpbmcgKCkge1xuICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLnN0YXRlLmtleXJpbmdTZXJ2aWNlLmN1cnJlbnRBY2NvdW50LmFkZHJlc3M7XG5cbiAgICBjb25zb2xlLmxvZygncmVsb2FkIHN0YWtpbmcnLCBhZGRyZXNzKTtcblxuICAgIGF3YWl0IHdhaXRUaW1lb3V0KDE4MDApO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIG5lZWRVcGRhdGVOZnQgKGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIHVwZGF0ZWRDaGFpbnM/OiBzdHJpbmdbXSkge1xuICAgIGlmICh1cGRhdGVkQ2hhaW5zICYmIHVwZGF0ZWRDaGFpbnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHVwZGF0ZWRDaGFpbnMuc29tZSgodXBkYXRlZENoYWluKSA9PiB7XG4gICAgICAgIGNvbnN0IGNoYWluSW5mbyA9IGNoYWluSW5mb01hcFt1cGRhdGVkQ2hhaW5dO1xuXG4gICAgICAgIHJldHVybiAoX2lzQ2hhaW5TdXBwb3J0TmF0aXZlTmZ0KGNoYWluSW5mbykgfHwgX2lzQ2hhaW5TdXBwb3J0RXZtTmZ0KGNoYWluSW5mbykgfHwgX2lzQ2hhaW5TdXBwb3J0V2FzbU5mdChjaGFpbkluZm8pKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBDb21tb24gZnJvbSAnQGV0aGVyZXVtanMvY29tbW9uJztcbmltcG9ydCB7IF9Bc3NldFJlZiwgX0Fzc2V0VHlwZSwgX0NoYWluQXNzZXQsIF9DaGFpbkluZm8sIF9NdWx0aUNoYWluQXNzZXQgfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25FcnJvciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9lcnJvcnMvVHJhbnNhY3Rpb25FcnJvcic7XG5pbXBvcnQgeyBpc0pzb25QYXlsb2FkLCBTRUVEX0RFRkFVTFRfTEVOR1RILCBTRUVEX0xFTkdUSFMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvaGFuZGxlcnMvRXh0ZW5zaW9uJztcbmltcG9ydCB7IHdpdGhFcnJvckxvZyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9oYW5kbGVycy9oZWxwZXJzJztcbmltcG9ydCB7IGNyZWF0ZVN1YnNjcmlwdGlvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9oYW5kbGVycy9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7IEFjY291bnRFeHRlcm5hbEVycm9yLCBBY2NvdW50RXh0ZXJuYWxFcnJvckNvZGUsIEFjY291bnRzV2l0aEN1cnJlbnRBZGRyZXNzLCBBZGRyZXNzQm9va0luZm8sIEFtb3VudERhdGEsIEFzc2V0U2V0dGluZywgQXNzZXRTZXR0aW5nVXBkYXRlUmVxLCBCYWxhbmNlSnNvbiwgQmFzaWNUeEVycm9yVHlwZSwgQmFzaWNUeFdhcm5pbmdDb2RlLCBCb25kaW5nT3B0aW9uUGFyYW1zLCBCcm93c2VyQ29uZmlybWF0aW9uVHlwZSwgQ2hhaW5UeXBlLCBDcmVhdGVEZXJpdmVBY2NvdW50SW5mbywgQ3JvblJlbG9hZFJlcXVlc3QsIENyb3dkbG9hbkpzb24sIEN1cnJlbnRBY2NvdW50SW5mbywgRGVyaXZlQWNjb3VudEluZm8sIEV4dGVybmFsUmVxdWVzdFByb21pc2VTdGF0dXMsIEV4dHJpbnNpY1R5cGUsIEtleXJpbmdTdGF0ZSwgTWFudGFQYXlFbmFibGVNZXNzYWdlLCBNYW50YVBheUVuYWJsZVBhcmFtcywgTWFudGFQYXlFbmFibGVSZXNwb25zZSwgTWFudGFQYXlTeW5jU3RhdGUsIE5mdENvbGxlY3Rpb24sIE5mdEpzb24sIE5mdFRyYW5zYWN0aW9uUmVxdWVzdCwgTmZ0VHJhbnNhY3Rpb25SZXNwb25zZSwgTm9taW5hdGlvblBvb2xJbmZvLCBPcHRpb25JbnB1dEFkZHJlc3MsIFByaWNlSnNvbiwgUmVxdWVzdEFjY291bnRDcmVhdGVFeHRlcm5hbFYyLCBSZXF1ZXN0QWNjb3VudENyZWF0ZUhhcmR3YXJlTXVsdGlwbGUsIFJlcXVlc3RBY2NvdW50Q3JlYXRlSGFyZHdhcmVWMiwgUmVxdWVzdEFjY291bnRDcmVhdGVTdXJpVjIsIFJlcXVlc3RBY2NvdW50Q3JlYXRlV2l0aFNlY3JldEtleSwgUmVxdWVzdEFjY291bnRFeHBvcnRQcml2YXRlS2V5LCBSZXF1ZXN0QWNjb3VudE1ldGEsIFJlcXVlc3RBZGRJbmplY3RlZEFjY291bnRzLCBSZXF1ZXN0QXBwcm92ZUNvbm5lY3RXYWxsZXRTZXNzaW9uLCBSZXF1ZXN0QXBwcm92ZVdhbGxldENvbm5lY3ROb3RTdXBwb3J0LCBSZXF1ZXN0QXV0aG9yaXphdGlvbiwgUmVxdWVzdEF1dGhvcml6YXRpb25CbG9jaywgUmVxdWVzdEF1dGhvcml6YXRpb25QZXJBY2NvdW50LCBSZXF1ZXN0QXV0aG9yaXphdGlvblBlclNpdGUsIFJlcXVlc3RBdXRob3JpemVBcHByb3ZlVjIsIFJlcXVlc3RCYXRjaFJlc3RvcmVWMiwgUmVxdWVzdEJvbmRpbmdTdWJtaXQsIFJlcXVlc3RDYW1lcmFTZXR0aW5ncywgUmVxdWVzdENoYW5nZUVuYWJsZUNoYWluUGF0cm9sLCBSZXF1ZXN0Q2hhbmdlTGFuZ3VhZ2UsIFJlcXVlc3RDaGFuZ2VNYXN0ZXJQYXNzd29yZCwgUmVxdWVzdENoYW5nZVNob3dCYWxhbmNlLCBSZXF1ZXN0Q2hhbmdlU2hvd1plcm9CYWxhbmNlLCBSZXF1ZXN0Q2hhbmdlVGltZUF1dG9Mb2NrLCBSZXF1ZXN0Q2hlY2tQdWJsaWNBbmRTZWNyZXRLZXksIFJlcXVlc3RDb25maXJtYXRpb25Db21wbGV0ZSwgUmVxdWVzdENvbm5lY3RXYWxsZXRDb25uZWN0LCBSZXF1ZXN0Q3Jvc3NDaGFpblRyYW5zZmVyLCBSZXF1ZXN0RGVsZXRlQ29udGFjdEFjY291bnQsIFJlcXVlc3REZXJpdmVDcmVhdGVNdWx0aXBsZSwgUmVxdWVzdERlcml2ZUNyZWF0ZVYyLCBSZXF1ZXN0RGVyaXZlQ3JlYXRlVjMsIFJlcXVlc3REZXJpdmVWYWxpZGF0ZVYyLCBSZXF1ZXN0RGlzY29ubmVjdFdhbGxldENvbm5lY3RTZXNzaW9uLCBSZXF1ZXN0RWRpdENvbnRhY3RBY2NvdW50LCBSZXF1ZXN0RmluZFJhd01ldGFkYXRhLCBSZXF1ZXN0Rm9yZ2V0U2l0ZSwgUmVxdWVzdEZyZWVCYWxhbmNlLCBSZXF1ZXN0R2V0RGVyaXZlQWNjb3VudHMsIFJlcXVlc3RHZXRUcmFuc2FjdGlvbiwgUmVxdWVzdEpzb25SZXN0b3JlVjIsIFJlcXVlc3RLZXlyaW5nRXhwb3J0TW5lbW9uaWMsIFJlcXVlc3RNYXhUcmFuc2ZlcmFibGUsIFJlcXVlc3RNaWdyYXRlUGFzc3dvcmQsIFJlcXVlc3RQYXJzZUV2bUNvbnRyYWN0SW5wdXQsIFJlcXVlc3RQYXJzZVRyYW5zYWN0aW9uU3Vic3RyYXRlLCBSZXF1ZXN0UGFzc1BoaXNoaW5nUGFnZSwgUmVxdWVzdFFyUGFyc2VSTFAsIFJlcXVlc3RRclNpZ25Fdm0sIFJlcXVlc3RRclNpZ25TdWJzdHJhdGUsIFJlcXVlc3RSZWplY3RDb25uZWN0V2FsbGV0U2Vzc2lvbiwgUmVxdWVzdFJlamVjdEV4dGVybmFsUmVxdWVzdCwgUmVxdWVzdFJlamVjdFdhbGxldENvbm5lY3ROb3RTdXBwb3J0LCBSZXF1ZXN0UmVtb3ZlSW5qZWN0ZWRBY2NvdW50cywgUmVxdWVzdFJlc2V0V2FsbGV0LCBSZXF1ZXN0UmVzb2x2ZUV4dGVybmFsUmVxdWVzdCwgUmVxdWVzdFNhdmVSZWNlbnRBY2NvdW50LCBSZXF1ZXN0U2VlZENyZWF0ZVYyLCBSZXF1ZXN0U2VlZFZhbGlkYXRlVjIsIFJlcXVlc3RTZXR0aW5nc1R5cGUsIFJlcXVlc3RTaWduaW5nQXBwcm92ZVBhc3N3b3JkVjIsIFJlcXVlc3RTdGFrZUNhbmNlbFdpdGhkcmF3YWwsIFJlcXVlc3RTdGFrZUNsYWltUmV3YXJkLCBSZXF1ZXN0U3Rha2VQb29saW5nQm9uZGluZywgUmVxdWVzdFN0YWtlUG9vbGluZ1VuYm9uZGluZywgUmVxdWVzdFN0YWtlV2l0aGRyYXdhbCwgUmVxdWVzdFN1YnN0cmF0ZU5mdFN1Ym1pdFRyYW5zYWN0aW9uLCBSZXF1ZXN0VHJhbnNmZXIsIFJlcXVlc3RUcmFuc2ZlckNoZWNrUmVmZXJlbmNlQ291bnQsIFJlcXVlc3RUcmFuc2ZlckNoZWNrU3VwcG9ydGluZywgUmVxdWVzdFRyYW5zZmVyRXhpc3RlbnRpYWxEZXBvc2l0LCBSZXF1ZXN0VHVyaW5nQ2FuY2VsU3Rha2VDb21wb3VuZCwgUmVxdWVzdFR1cmluZ1N0YWtlQ29tcG91bmQsIFJlcXVlc3RVbmJvbmRpbmdTdWJtaXQsIFJlcXVlc3RVbmxvY2tLZXlyaW5nLCBSZXF1ZXN0VW5sb2NrVHlwZSwgUmVzb2x2ZUFkZHJlc3NUb0RvbWFpblJlcXVlc3QsIFJlc29sdmVEb21haW5SZXF1ZXN0LCBSZXNwb25zZUFjY291bnRDcmVhdGVTdXJpVjIsIFJlc3BvbnNlQWNjb3VudENyZWF0ZVdpdGhTZWNyZXRLZXksIFJlc3BvbnNlQWNjb3VudEV4cG9ydFByaXZhdGVLZXksIFJlc3BvbnNlQWNjb3VudE1ldGEsIFJlc3BvbnNlQ2hhbmdlTWFzdGVyUGFzc3dvcmQsIFJlc3BvbnNlQ2hlY2tQdWJsaWNBbmRTZWNyZXRLZXksIFJlc3BvbnNlRGVyaXZlVmFsaWRhdGVWMiwgUmVzcG9uc2VGaW5kUmF3TWV0YWRhdGEsIFJlc3BvbnNlR2V0RGVyaXZlQWNjb3VudHMsIFJlc3BvbnNlS2V5cmluZ0V4cG9ydE1uZW1vbmljLCBSZXNwb25zZU1pZ3JhdGVQYXNzd29yZCwgUmVzcG9uc2VQYXJzZUV2bUNvbnRyYWN0SW5wdXQsIFJlc3BvbnNlUGFyc2VUcmFuc2FjdGlvblN1YnN0cmF0ZSwgUmVzcG9uc2VQcml2YXRlS2V5VmFsaWRhdGVWMiwgUmVzcG9uc2VRclBhcnNlUkxQLCBSZXNwb25zZVFyU2lnbkV2bSwgUmVzcG9uc2VRclNpZ25TdWJzdHJhdGUsIFJlc3BvbnNlUmVqZWN0RXh0ZXJuYWxSZXF1ZXN0LCBSZXNwb25zZVJlc2V0V2FsbGV0LCBSZXNwb25zZVJlc29sdmVFeHRlcm5hbFJlcXVlc3QsIFJlc3BvbnNlU2VlZENyZWF0ZVYyLCBSZXNwb25zZVNlZWRWYWxpZGF0ZVYyLCBSZXNwb25zZVVubG9ja0tleXJpbmcsIFN0YWtpbmdKc29uLCBTdGFraW5nUmV3YXJkSnNvbiwgU3Rha2luZ1R5cGUsIFN1cHBvcnRUcmFuc2ZlclJlc3BvbnNlLCBUaGVtZU5hbWVzLCBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtLCBUcmFuc2FjdGlvblJlc3BvbnNlLCBUcmFuc2ZlclR4RXJyb3JUeXBlLCBWYWxpZGF0ZU5ldHdvcmtSZXF1ZXN0LCBWYWxpZGF0ZU5ldHdvcmtSZXNwb25zZSwgVmFsaWRhdG9ySW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgQWNjb3VudEF1dGhUeXBlLCBBY2NvdW50SnNvbiwgQXV0aG9yaXplUmVxdWVzdCwgTWVzc2FnZVR5cGVzLCBNZXRhZGF0YVJlcXVlc3QsIFJlcXVlc3RBY2NvdW50Q2hhbmdlUGFzc3dvcmQsIFJlcXVlc3RBY2NvdW50Q3JlYXRlRXh0ZXJuYWwsIFJlcXVlc3RBY2NvdW50Q3JlYXRlSGFyZHdhcmUsIFJlcXVlc3RBY2NvdW50Q3JlYXRlU3VyaSwgUmVxdWVzdEFjY291bnRFZGl0LCBSZXF1ZXN0QWNjb3VudEV4cG9ydCwgUmVxdWVzdEFjY291bnRGb3JnZXQsIFJlcXVlc3RBY2NvdW50U2hvdywgUmVxdWVzdEFjY291bnRUaWUsIFJlcXVlc3RBY2NvdW50VmFsaWRhdGUsIFJlcXVlc3RBdXRob3JpemVDYW5jZWwsIFJlcXVlc3RBdXRob3JpemVSZWplY3QsIFJlcXVlc3RCYXRjaFJlc3RvcmUsIFJlcXVlc3RDdXJyZW50QWNjb3VudEFkZHJlc3MsIFJlcXVlc3REZXJpdmVDcmVhdGUsIFJlcXVlc3REZXJpdmVWYWxpZGF0ZSwgUmVxdWVzdEpzb25SZXN0b3JlLCBSZXF1ZXN0TWV0YWRhdGFBcHByb3ZlLCBSZXF1ZXN0TWV0YWRhdGFSZWplY3QsIFJlcXVlc3RTZWVkQ3JlYXRlLCBSZXF1ZXN0U2VlZFZhbGlkYXRlLCBSZXF1ZXN0U2lnbmluZ0FwcHJvdmVTaWduYXR1cmUsIFJlcXVlc3RTaWduaW5nQ2FuY2VsLCBSZXF1ZXN0VHlwZXMsIFJlc3BvbnNlQWNjb3VudEV4cG9ydCwgUmVzcG9uc2VBdXRob3JpemVMaXN0LCBSZXNwb25zZURlcml2ZVZhbGlkYXRlLCBSZXNwb25zZUpzb25HZXRBY2NvdW50SW5mbywgUmVzcG9uc2VTZWVkQ3JlYXRlLCBSZXNwb25zZVNlZWRWYWxpZGF0ZSwgUmVzcG9uc2VUeXBlLCBTaWduaW5nUmVxdWVzdCwgV2luZG93T3BlblBhcmFtcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC90eXBlcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbldhcm5pbmcgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvd2FybmluZ3MvVHJhbnNhY3Rpb25XYXJuaW5nJztcbmltcG9ydCB7IEFMTF9BQ0NPVU5UX0tFWSwgQUxMX0dFTkVTSVNfSEFTSCwgWENNX01JTl9BTU9VTlRfUkFUSU8gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBBTExPV0VEX1BBVEggfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2RlZmF1bHRzJztcbmltcG9ydCB7IHJlc29sdmVBemVyb0FkZHJlc3NUb0RvbWFpbiwgcmVzb2x2ZUF6ZXJvRG9tYWluVG9BZGRyZXNzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9kb3RzYW1hL2RvbWFpbic7XG5pbXBvcnQgeyBwYXJzZVN1YnN0cmF0ZVRyYW5zYWN0aW9uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9kb3RzYW1hL3BhcnNlVHJhbnNhY3Rpb24nO1xuaW1wb3J0IHsgY2hlY2tSZWZlcmVuY2VDb3VudCwgY2hlY2tTdXBwb3J0VHJhbnNmZXIsIGNyZWF0ZVRyYW5zZmVyRXh0cmluc2ljIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9kb3RzYW1hL3RyYW5zZmVyJztcbmltcG9ydCB7IGdldE5mdFRyYW5zZmVyRXh0cmluc2ljLCBpc1JlY2lwaWVudFNlbGYgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL25mdC90cmFuc2Zlcic7XG5pbXBvcnQgeyBnZXRCb25kaW5nRXh0cmluc2ljLCBnZXRDYW5jZWxXaXRoZHJhd2FsRXh0cmluc2ljLCBnZXRDbGFpbVJld2FyZEV4dHJpbnNpYywgZ2V0Tm9taW5hdGlvblBvb2xzSW5mbywgZ2V0VW5ib25kaW5nRXh0cmluc2ljLCBnZXRWYWxpZGF0b3JzSW5mbywgZ2V0V2l0aGRyYXdhbEV4dHJpbnNpYywgdmFsaWRhdGVCb25kaW5nQ29uZGl0aW9uLCB2YWxpZGF0ZVVuYm9uZGluZ0NvbmRpdGlvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvc3Rha2luZy9ib25kaW5nJztcbmltcG9ydCB7IGdldFR1cmluZ0NhbmNlbENvbXBvdW5kaW5nRXh0cmluc2ljLCBnZXRUdXJpbmdDb21wb3VuZEV4dHJpbnNpYyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvc3Rha2luZy9ib25kaW5nL3BhcmFDaGFpbic7XG5pbXBvcnQgeyBnZXRQb29saW5nQm9uZGluZ0V4dHJpbnNpYywgZ2V0UG9vbGluZ1VuYm9uZGluZ0V4dHJpbnNpYywgdmFsaWRhdGVQb29sQm9uZGluZ0NvbmRpdGlvbiwgdmFsaWRhdGVSZWxheVVuYm9uZGluZ0NvbmRpdGlvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvc3Rha2luZy9ib25kaW5nL3JlbGF5Q2hhaW4nO1xuaW1wb3J0IHsgZ2V0RVJDMjBUcmFuc2FjdGlvbk9iamVjdCwgZ2V0RVJDNzIxVHJhbnNhY3Rpb24sIGdldEVWTVRyYW5zYWN0aW9uT2JqZWN0IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS90b2tlbnMvZXZtL3RyYW5zZmVyJztcbmltcG9ydCB7IGdldFBTUDM0VHJhbnNmZXJFeHRyaW5zaWMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3Rva2Vucy93YXNtJztcbmltcG9ydCB7IGNyZWF0ZVhjbUV4dHJpbnNpYyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkveGNtJztcbmltcG9ydCBLb25pU3RhdGUgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMvU3RhdGUnO1xuaW1wb3J0IHsgX0FQSV9PUFRJT05TX0NIQUlOX0dST1VQLCBfREVGQVVMVF9NQU5UQV9aS19DSEFJTiwgX01BTlRBX1pLX0NIQUlOX0dST1VQLCBfWktfQVNTRVRfUFJFRklYIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLCBfQ2hhaW5TdGF0ZSwgX05ldHdvcmtVcHNlcnRQYXJhbXMsIF9WYWxpZGF0ZUN1c3RvbUFzc2V0UmVxdWVzdCwgX1ZhbGlkYXRlQ3VzdG9tQXNzZXRSZXNwb25zZSwgRW5hYmxlQ2hhaW5QYXJhbXMsIEVuYWJsZU11bHRpQ2hhaW5QYXJhbXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgX2dldENoYWluTmF0aXZlVG9rZW5CYXNpY0luZm8sIF9nZXRDb250cmFjdEFkZHJlc3NPZlRva2VuLCBfZ2V0RXZtQ2hhaW5JZCwgX2dldFN1YnN0cmF0ZUdlbmVzaXNIYXNoLCBfZ2V0VG9rZW5NaW5BbW91bnQsIF9pc0Fzc2V0U21hcnRDb250cmFjdE5mdCwgX2lzQ2hhaW5Fdm1Db21wYXRpYmxlLCBfaXNDdXN0b21Bc3NldCwgX2lzTG9jYWxUb2tlbiwgX2lzTWFudGFaa0Fzc2V0LCBfaXNOYXRpdmVUb2tlbiwgX2lzVG9rZW5Fdm1TbWFydENvbnRyYWN0LCBfaXNUb2tlblRyYW5zZmVycmVkQnlFdm0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgRVhURU5TSU9OX1JFUVVFU1RfVVJMIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9yZXF1ZXN0LXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IEF1dGhVcmxzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9yZXF1ZXN0LXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9BVVRPX0xPQ0tfVElNRSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc2V0dGluZy1zZXJ2aWNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTV1RyYW5zYWN0aW9uLCBTV1RyYW5zYWN0aW9uUmVzcG9uc2UsIFNXVHJhbnNhY3Rpb25SZXN1bHQsIFRyYW5zYWN0aW9uRW1pdHRlciwgVmFsaWRhdGVUcmFuc2FjdGlvblJlc3BvbnNlSW5wdXQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3RyYW5zYWN0aW9uLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgV0FMTEVUX0NPTk5FQ1RfRUlQMTU1X05BTUVTUEFDRSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvd2FsbGV0LWNvbm5lY3Qtc2VydmljZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgaXNQcm9wb3NhbEV4cGlyZWQsIGlzU3VwcG9ydFdhbGxldENvbm5lY3RDaGFpbiwgaXNTdXBwb3J0V2FsbGV0Q29ubmVjdE5hbWVzcGFjZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvd2FsbGV0LWNvbm5lY3Qtc2VydmljZS9oZWxwZXJzJztcbmltcG9ydCB7IFJlc3VsdEFwcHJvdmVXYWxsZXRDb25uZWN0U2Vzc2lvbiwgV2FsbGV0Q29ubmVjdE5vdFN1cHBvcnRSZXF1ZXN0LCBXYWxsZXRDb25uZWN0U2Vzc2lvblJlcXVlc3QgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3dhbGxldC1jb25uZWN0LXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgaXNTYW1lQWRkcmVzcywgcmVmb3JtYXRBZGRyZXNzLCB1bmlxdWVTdHJpbmdBcnJheSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IHsgY29udmVydFN1YmplY3RJbmZvVG9BZGRyZXNzZXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL2FkZHJlc3MnO1xuaW1wb3J0IHsgY3JlYXRlVHJhbnNhY3Rpb25Gcm9tUkxQLCBzaWduYXR1cmVUb0hleCwgVHJhbnNhY3Rpb24gYXMgUXJUcmFuc2FjdGlvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMvZXRoJztcbmltcG9ydCB7IHBhcnNlQ29udHJhY3RJbnB1dCwgcGFyc2VFdm1SbHAgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL2V0aC9wYXJzZVRyYW5zYWN0aW9uJztcbmltcG9ydCB7IGJhbGFuY2VGb3JtYXR0ZXIsIGZvcm1hdE51bWJlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMvbnVtYmVyJztcbmltcG9ydCB7IE1ldGFkYXRhRGVmIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24taW5qZWN0L3R5cGVzJztcbmltcG9ydCB7IGNyZWF0ZVBhaXIgfSBmcm9tICdAc3Vid2FsbGV0L2tleXJpbmcnO1xuaW1wb3J0IHsgS2V5cmluZ1BhaXIsIEtleXJpbmdQYWlyJEpzb24sIEtleXJpbmdQYWlyJE1ldGEgfSBmcm9tICdAc3Vid2FsbGV0L2tleXJpbmcvdHlwZXMnO1xuaW1wb3J0IHsga2V5cmluZyB9IGZyb20gJ0BzdWJ3YWxsZXQvdWkta2V5cmluZyc7XG5pbXBvcnQgeyBTdWJqZWN0SW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvdWkta2V5cmluZy9vYnNlcnZhYmxlL3R5cGVzJztcbmltcG9ydCB7IEtleXJpbmdBZGRyZXNzIH0gZnJvbSAnQHN1YndhbGxldC91aS1rZXlyaW5nL3R5cGVzJztcbmltcG9ydCB7IFByb3Bvc2FsVHlwZXMgfSBmcm9tICdAd2FsbGV0Y29ubmVjdC90eXBlcy9kaXN0L3R5cGVzL3NpZ24tY2xpZW50L3Byb3Bvc2FsJztcbmltcG9ydCB7IFNlc3Npb25UeXBlcyB9IGZyb20gJ0B3YWxsZXRjb25uZWN0L3R5cGVzL2Rpc3QvdHlwZXMvc2lnbi1jbGllbnQvc2Vzc2lvbic7XG5pbXBvcnQgeyBnZXRTZGtFcnJvciB9IGZyb20gJ0B3YWxsZXRjb25uZWN0L3V0aWxzJztcbmltcG9ydCBCaWdOIGZyb20gJ2JpZ251bWJlci5qcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJ2V0aGVyZXVtanMtdHgnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25Db25maWcgfSBmcm9tICd3ZWIzLWNvcmUnO1xuXG5pbXBvcnQgeyBTdWJtaXR0YWJsZUV4dHJpbnNpYyB9IGZyb20gJ0Bwb2xrYWRvdC9hcGkvdHlwZXMnO1xuaW1wb3J0IHsgVHlwZVJlZ2lzdHJ5IH0gZnJvbSAnQHBvbGthZG90L3R5cGVzJztcbmltcG9ydCB7IGFzc2VydCwgQk4sIEJOX1pFUk8sIGhleFN0cmlwUHJlZml4LCBoZXhUb1U4YSwgaXNBc2NpaSwgaXNIZXgsIHU4YVRvSGV4LCB1OGFUb1N0cmluZyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IGFkZHJlc3NUb0V2bSwgYmFzZTY0RGVjb2RlLCBkZWNvZGVBZGRyZXNzLCBpc0FkZHJlc3MsIGlzRXRoZXJldW1BZGRyZXNzLCBqc29uRGVjcnlwdCwga2V5RXh0cmFjdFN1cmksIG1uZW1vbmljR2VuZXJhdGUsIG1uZW1vbmljVmFsaWRhdGUgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC1jcnlwdG8nO1xuaW1wb3J0IHsgRW5jcnlwdGVkSnNvbiwgS2V5cGFpclR5cGUsIFByZWZpeCB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsLWNyeXB0by90eXBlcyc7XG5cbmNvbnN0IEVUSF9ERVJJVkVfREVGQVVMVCA9ICcvbS80NFxcJy82MFxcJy8wXFwnLzAvMCc7XG5cbmZ1bmN0aW9uIGdldFN1cmkgKHNlZWQ6IHN0cmluZywgdHlwZT86IEtleXBhaXJUeXBlKTogc3RyaW5nIHtcbiAgcmV0dXJuIHR5cGUgPT09ICdldGhlcmV1bSdcbiAgICA/IGAke3NlZWR9JHtFVEhfREVSSVZFX0RFRkFVTFR9YFxuICAgIDogc2VlZDtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtQWNjb3VudHMgKGFjY291bnRzOiBTdWJqZWN0SW5mbyk6IEFjY291bnRKc29uW10ge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhhY2NvdW50cykubWFwKCh7IGpzb246IHsgYWRkcmVzcywgbWV0YSB9LCB0eXBlIH0pOiBBY2NvdW50SnNvbiA9PiAoe1xuICAgIGFkZHJlc3MsXG4gICAgLi4ubWV0YSxcbiAgICB0eXBlXG4gIH0pKTtcbn1cblxuY29uc3QgQUNDT1VOVF9BTExfSlNPTjogQWNjb3VudEpzb24gPSB7XG4gIGFkZHJlc3M6IEFMTF9BQ0NPVU5UX0tFWSxcbiAgbmFtZTogJ0FsbCdcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtvbmlFeHRlbnNpb24ge1xuICAjbG9ja1RpbWVPdXQ6IE5vZGVKUy5UaW1lciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgI2tvbmlTdGF0ZTogS29uaVN0YXRlO1xuICAjdGltZUF1dG9Mb2NrOiBudW1iZXIgPSBERUZBVUxUX0FVVE9fTE9DS19USU1FO1xuICAjc2tpcEF1dG9Mb2NrID0gZmFsc2U7XG4gICNhbHdheXNMb2NrID0gZmFsc2U7XG4gICNmaXJzdFRpbWUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yIChzdGF0ZTogS29uaVN0YXRlKSB7XG4gICAgdGhpcy4ja29uaVN0YXRlID0gc3RhdGU7XG5cbiAgICBjb25zdCB1cGRhdGVUaW1lQXV0b0xvY2sgPSAocnM6IFJlcXVlc3RTZXR0aW5nc1R5cGUpID0+IHtcbiAgICAgIC8vIENoZWNrIHRpbWUgYXV0byBsb2NrIGNoYW5nZVxuICAgICAgaWYgKHRoaXMuI3RpbWVBdXRvTG9jayAhPT0gcnMudGltZUF1dG9Mb2NrKSB7XG4gICAgICAgIHRoaXMuI3RpbWVBdXRvTG9jayA9IHJzLnRpbWVBdXRvTG9jaztcbiAgICAgICAgdGhpcy4jYWx3YXlzTG9jayA9ICFycy50aW1lQXV0b0xvY2s7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLiNsb2NrVGltZU91dCk7XG5cbiAgICAgICAgaWYgKHRoaXMuI3RpbWVBdXRvTG9jayA+IDApIHtcbiAgICAgICAgICB0aGlzLiNsb2NrVGltZU91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNza2lwQXV0b0xvY2spIHtcbiAgICAgICAgICAgICAgdGhpcy5rZXlyaW5nTG9jaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHRoaXMuI3RpbWVBdXRvTG9jayAqIDYwICogMTAwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy4jYWx3YXlzTG9jaykge1xuICAgICAgICAgIGlmICghdGhpcy4jZmlyc3RUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLmtleXJpbmdMb2NrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLiNmaXJzdFRpbWUpIHtcbiAgICAgICAgdGhpcy4jZmlyc3RUaW1lID0gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXR0aW5nU2VydmljZS5nZXRTZXR0aW5ncyh1cGRhdGVUaW1lQXV0b0xvY2spO1xuICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXR0aW5nU2VydmljZS5nZXRTdWJqZWN0KCkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IHVwZGF0ZVRpbWVBdXRvTG9ja1xuICAgIH0pO1xuICB9XG5cbiAgLy8vIENsb25lIGZyb20gUG9sa2Fkb3RKc1xuICBwcml2YXRlIGFjY291bnRzQ3JlYXRlRXh0ZXJuYWwgKHsgYWRkcmVzcywgZ2VuZXNpc0hhc2gsIG5hbWUgfTogUmVxdWVzdEFjY291bnRDcmVhdGVFeHRlcm5hbCk6IGJvb2xlYW4ge1xuICAgIGtleXJpbmcuYWRkRXh0ZXJuYWwoYWRkcmVzcywgeyBnZW5lc2lzSGFzaCwgbmFtZSB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c0NyZWF0ZUhhcmR3YXJlICh7IGFjY291bnRJbmRleCxcbiAgICBhZGRyZXNzLFxuICAgIGFkZHJlc3NPZmZzZXQsXG4gICAgZ2VuZXNpc0hhc2gsXG4gICAgaGFyZHdhcmVUeXBlLFxuICAgIG5hbWUgfTogUmVxdWVzdEFjY291bnRDcmVhdGVIYXJkd2FyZSk6IGJvb2xlYW4ge1xuICAgIGtleXJpbmcuYWRkSGFyZHdhcmUoYWRkcmVzcywgaGFyZHdhcmVUeXBlLCB7IGFjY291bnRJbmRleCwgYWRkcmVzc09mZnNldCwgZ2VuZXNpc0hhc2gsIG5hbWUgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYWNjb3VudHNDcmVhdGVTdXJpICh7IGdlbmVzaXNIYXNoLCBuYW1lLCBzdXJpLCB0eXBlIH06IFJlcXVlc3RBY2NvdW50Q3JlYXRlU3VyaSk6IGJvb2xlYW4ge1xuICAgIGtleXJpbmcuYWRkVXJpKGdldFN1cmkoc3VyaSwgdHlwZSksIHsgZ2VuZXNpc0hhc2gsIG5hbWUgfSwgdHlwZSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYWNjb3VudHNDaGFuZ2VQYXNzd29yZCAoeyBhZGRyZXNzLCBuZXdQYXNzLCBvbGRQYXNzIH06IFJlcXVlc3RBY2NvdW50Q2hhbmdlUGFzc3dvcmQpOiBib29sZWFuIHtcbiAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKGFkZHJlc3MpO1xuXG4gICAgYXNzZXJ0KHBhaXIsIHQoJ1VuYWJsZSB0byBmaW5kIGFjY291bnQnKSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFwYWlyLmlzTG9ja2VkKSB7XG4gICAgICAgIHBhaXIubG9jaygpO1xuICAgICAgfVxuXG4gICAgICBwYWlyLmRlY29kZVBrY3M4KG9sZFBhc3MpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodCgnV3JvbmcgcGFzc3dvcmQnKSk7XG4gICAgfVxuXG4gICAga2V5cmluZy5lbmNyeXB0QWNjb3VudChwYWlyLCBuZXdQYXNzKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c0VkaXQgKHsgYWRkcmVzcywgbmFtZSB9OiBSZXF1ZXN0QWNjb3VudEVkaXQpOiBib29sZWFuIHtcbiAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKGFkZHJlc3MpO1xuXG4gICAgYXNzZXJ0KHBhaXIsIHQoJ1VuYWJsZSB0byBmaW5kIGFjY291bnQnKSk7XG5cbiAgICBrZXlyaW5nLnNhdmVBY2NvdW50TWV0YShwYWlyLCB7IC4uLnBhaXIubWV0YSwgbmFtZSB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c0V4cG9ydCAoeyBhZGRyZXNzLCBwYXNzd29yZCB9OiBSZXF1ZXN0QWNjb3VudEV4cG9ydCk6IFJlc3BvbnNlQWNjb3VudEV4cG9ydCB7XG4gICAgcmV0dXJuIHsgZXhwb3J0ZWRKc29uOiBrZXlyaW5nLmJhY2t1cEFjY291bnQoa2V5cmluZy5nZXRQYWlyKGFkZHJlc3MpLCBwYXNzd29yZCkgfTtcbiAgfVxuXG4gIHByaXZhdGUgYWNjb3VudHNTaG93ICh7IGFkZHJlc3MsIGlzU2hvd2luZyB9OiBSZXF1ZXN0QWNjb3VudFNob3cpOiBib29sZWFuIHtcbiAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKGFkZHJlc3MpO1xuXG4gICAgYXNzZXJ0KHBhaXIsIHQoJ1VuYWJsZSB0byBmaW5kIGFjY291bnQnKSk7XG5cbiAgICBrZXlyaW5nLnNhdmVBY2NvdW50TWV0YShwYWlyLCB7IC4uLnBhaXIubWV0YSwgaXNIaWRkZW46ICFpc1Nob3dpbmcgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYWNjb3VudHNWYWxpZGF0ZSAoeyBhZGRyZXNzLCBwYXNzd29yZCB9OiBSZXF1ZXN0QWNjb3VudFZhbGlkYXRlKTogYm9vbGVhbiB7XG4gICAgdHJ5IHtcbiAgICAgIGtleXJpbmcuYmFja3VwQWNjb3VudChrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyksIHBhc3N3b3JkKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEZJWE1FIFRoaXMgbG9va3MgdmVyeSBtdWNoIGxpa2Ugd2hhdCB3ZSBoYXZlIGluIFRhYnNcbiAgcHJpdmF0ZSBhY2NvdW50c1N1YnNjcmliZSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoYWNjb3VudHMuc3Vic2NyaWJlKSc+KGlkLCBwb3J0KTtcbiAgICBjb25zdCBhY2NvdW50U3ViamVjdCA9IHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5hY2NvdW50U3ViamVjdDtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhY2NvdW50U3ViamVjdC5zdWJzY3JpYmUoKGFjY291bnRzOiBTdWJqZWN0SW5mbyk6IHZvaWQgPT5cbiAgICAgIGNiKHRyYW5zZm9ybUFjY291bnRzKGFjY291bnRzKSlcbiAgICApO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgbWV0YWRhdGFBcHByb3ZlICh7IGlkIH06IFJlcXVlc3RNZXRhZGF0YUFwcHJvdmUpOiBib29sZWFuIHtcbiAgICBjb25zdCBxdWV1ZWQgPSB0aGlzLiNrb25pU3RhdGUuZ2V0TWV0YVJlcXVlc3QoaWQpO1xuXG4gICAgYXNzZXJ0KHF1ZXVlZCwgdCgnVW5hYmxlIHRvIHByb2NlZWQuIFBsZWFzZSB0cnkgYWdhaW4nKSk7XG5cbiAgICBjb25zdCB7IHJlcXVlc3QsIHJlc29sdmUgfSA9IHF1ZXVlZDtcblxuICAgIHRoaXMuI2tvbmlTdGF0ZS5zYXZlTWV0YWRhdGEocmVxdWVzdCk7XG5cbiAgICByZXNvbHZlKHRydWUpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIG1ldGFkYXRhR2V0IChnZW5lc2lzSGFzaDogc3RyaW5nIHwgbnVsbCk6IE1ldGFkYXRhRGVmIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5rbm93bk1ldGFkYXRhLmZpbmQoKHJlc3VsdCkgPT4gcmVzdWx0LmdlbmVzaXNIYXNoID09PSBnZW5lc2lzSGFzaCkgfHwgbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgbWV0YWRhdGFMaXN0ICgpOiBNZXRhZGF0YURlZltdIHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmtub3duTWV0YWRhdGE7XG4gIH1cblxuICBwcml2YXRlIG1ldGFkYXRhUmVqZWN0ICh7IGlkIH06IFJlcXVlc3RNZXRhZGF0YVJlamVjdCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHF1ZXVlZCA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRNZXRhUmVxdWVzdChpZCk7XG5cbiAgICBhc3NlcnQocXVldWVkLCB0KCdVbmFibGUgdG8gcHJvY2VlZC4gUGxlYXNlIHRyeSBhZ2FpbicpKTtcblxuICAgIGNvbnN0IHsgcmVqZWN0IH0gPSBxdWV1ZWQ7XG5cbiAgICByZWplY3QobmV3IEVycm9yKCdSZWplY3RlZCcpKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXRhZGF0YVN1YnNjcmliZSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IE1ldGFkYXRhUmVxdWVzdFtdIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKG1ldGFkYXRhLnJlcXVlc3RzKSc+KGlkLCBwb3J0KTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLiNrb25pU3RhdGUubWV0YVN1YmplY3Quc3Vic2NyaWJlKChyZXF1ZXN0czogTWV0YWRhdGFSZXF1ZXN0W10pOiB2b2lkID0+XG4gICAgICBjYihyZXF1ZXN0cylcbiAgICApO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLm1ldGFTdWJqZWN0LnZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBqc29uUmVzdG9yZSAoeyBmaWxlLCBwYXNzd29yZCB9OiBSZXF1ZXN0SnNvblJlc3RvcmUpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAga2V5cmluZy5yZXN0b3JlQWNjb3VudChmaWxlLCBwYXNzd29yZCwgdHJ1ZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYmF0Y2hSZXN0b3JlICh7IGZpbGUsIHBhc3N3b3JkIH06IFJlcXVlc3RCYXRjaFJlc3RvcmUpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAga2V5cmluZy5yZXN0b3JlQWNjb3VudHMoZmlsZSwgcGFzc3dvcmQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGpzb25HZXRBY2NvdW50SW5mbyAoanNvbjogS2V5cmluZ1BhaXIkSnNvbik6IFJlc3BvbnNlSnNvbkdldEFjY291bnRJbmZvIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBhZGRyZXNzLCBtZXRhOiB7IGdlbmVzaXNIYXNoLCBuYW1lIH0sIHR5cGUgfSA9IGtleXJpbmcuY3JlYXRlRnJvbUpzb24oanNvbik7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFkZHJlc3MsXG4gICAgICAgIGdlbmVzaXNIYXNoLFxuICAgICAgICBuYW1lLFxuICAgICAgICB0eXBlXG4gICAgICB9IGFzIFJlc3BvbnNlSnNvbkdldEFjY291bnRJbmZvO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgYXMgRXJyb3IpLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2VlZENyZWF0ZSAoeyBsZW5ndGggPSBTRUVEX0RFRkFVTFRfTEVOR1RILCBzZWVkOiBfc2VlZCwgdHlwZSB9OiBSZXF1ZXN0U2VlZENyZWF0ZSk6IFJlc3BvbnNlU2VlZENyZWF0ZSB7XG4gICAgY29uc3Qgc2VlZCA9IF9zZWVkIHx8IG1uZW1vbmljR2VuZXJhdGUobGVuZ3RoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBhZGRyZXNzOiBrZXlyaW5nLmNyZWF0ZUZyb21VcmkoZ2V0U3VyaShzZWVkLCB0eXBlKSwge30sIHR5cGUpLmFkZHJlc3MsXG4gICAgICBzZWVkXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgc2VlZFZhbGlkYXRlICh7IHN1cmksIHR5cGUgfTogUmVxdWVzdFNlZWRWYWxpZGF0ZSk6IFJlc3BvbnNlU2VlZFZhbGlkYXRlIHtcbiAgICBjb25zdCB7IHBocmFzZSB9ID0ga2V5RXh0cmFjdFN1cmkoc3VyaSk7XG5cbiAgICBpZiAoaXNIZXgocGhyYXNlKSkge1xuICAgICAgYXNzZXJ0KGlzSGV4KHBocmFzZSwgMjU2KSwgdCgnSW52YWxpZCBzZWVkIHBocmFzZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHNhZGx5IGlzSGV4IGRldGVjdHMgYXMgc3RyaW5nLCBzbyB3ZSBuZWVkIGEgY2FzdCBoZXJlXG4gICAgICBhc3NlcnQoU0VFRF9MRU5HVEhTLmluY2x1ZGVzKChwaHJhc2UpLnNwbGl0KCcgJykubGVuZ3RoKSwgdCgnU2VlZCBwaHJhc2UgbmVlZHMgdG8gY29udGFpbiB7e3h9fSB3b3JkcycsIHsgcmVwbGFjZTogeyB4OiBTRUVEX0xFTkdUSFMuam9pbignLCAnKSB9IH0pKTtcbiAgICAgIGFzc2VydChtbmVtb25pY1ZhbGlkYXRlKHBocmFzZSksIHQoJ0ludmFsaWQgc2VlZCBwaHJhc2UuIFBsZWFzZSB0cnkgYWdhaW4uJykpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBhZGRyZXNzOiBrZXlyaW5nLmNyZWF0ZUZyb21VcmkoZ2V0U3VyaShzdXJpLCB0eXBlKSwge30sIHR5cGUpLmFkZHJlc3MsXG4gICAgICBzdXJpXG4gICAgfTtcbiAgfVxuXG4gIC8vIFRPRE86IG1vdmUgdG8gcmVxdWVzdCBzZXJ2aWNlXG4gIHByaXZhdGUgc2lnbmluZ0FwcHJvdmVTaWduYXR1cmUgKHsgaWQsIHNpZ25hdHVyZSB9OiBSZXF1ZXN0U2lnbmluZ0FwcHJvdmVTaWduYXR1cmUpOiBib29sZWFuIHtcbiAgICBjb25zdCBxdWV1ZWQgPSB0aGlzLiNrb25pU3RhdGUuZ2V0U2lnblJlcXVlc3QoaWQpO1xuXG4gICAgYXNzZXJ0KHF1ZXVlZCwgdCgnVW5hYmxlIHRvIHByb2NlZWQuIFBsZWFzZSB0cnkgYWdhaW4nKSk7XG5cbiAgICBjb25zdCB7IHJlc29sdmUgfSA9IHF1ZXVlZDtcblxuICAgIHJlc29sdmUoeyBpZCwgc2lnbmF0dXJlIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBUT0RPOiBtb3ZlIHRvIHJlcXVlc3Qgc2VydmljZVxuICBwcml2YXRlIHNpZ25pbmdDYW5jZWwgKHsgaWQgfTogUmVxdWVzdFNpZ25pbmdDYW5jZWwpOiBib29sZWFuIHtcbiAgICBjb25zdCBxdWV1ZWQgPSB0aGlzLiNrb25pU3RhdGUuZ2V0U2lnblJlcXVlc3QoaWQpO1xuXG4gICAgYXNzZXJ0KHF1ZXVlZCwgdCgnVW5hYmxlIHRvIHByb2NlZWQuIFBsZWFzZSB0cnkgYWdhaW4nKSk7XG5cbiAgICBjb25zdCB7IHJlamVjdCB9ID0gcXVldWVkO1xuXG4gICAgcmVqZWN0KG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuVVNFUl9SRUpFQ1RfUkVRVUVTVCkpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBGSVhNRSBUaGlzIGxvb2tzIHZlcnkgbXVjaCBsaWtlIHdoYXQgd2UgaGF2ZSBpbiBhdXRob3JpemF0aW9uXG4gIHByaXZhdGUgc2lnbmluZ1N1YnNjcmliZSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFNpZ25pbmdSZXF1ZXN0W10ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoc2lnbmluZy5yZXF1ZXN0cyknPihpZCwgcG9ydCk7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnNpZ25TdWJqZWN0LnN1YnNjcmliZSgocmVxdWVzdHM6IFNpZ25pbmdSZXF1ZXN0W10pOiB2b2lkID0+XG4gICAgICBjYihyZXF1ZXN0cylcbiAgICApO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnNpZ25TdWJqZWN0LnZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSB3aW5kb3dPcGVuICh7IGFsbG93ZWRQYXRoOiBwYXRoLCBwYXJhbXMsIHN1YlBhdGggfTogV2luZG93T3BlblBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGxldCBwYXJhbVN0cmluZyA9ICcnO1xuXG4gICAgaWYgKHBhcmFtcykge1xuICAgICAgcGFyYW1TdHJpbmcgKz0gJz8nO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gT2JqZWN0LmVudHJpZXMocGFyYW1zKVtpXTtcblxuICAgICAgICBwYXJhbVN0cmluZyArPSBgJHtrZXl9PSR7dmFsdWV9YDtcblxuICAgICAgICBpZiAoaSAhPT0gT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgcGFyYW1TdHJpbmcgKz0gJyYnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gYCR7Y2hyb21lLmV4dGVuc2lvbi5nZXRVUkwoJ2luZGV4Lmh0bWwnKX0jJHtwYXRofSR7c3ViUGF0aCB8fCAnJ30ke3BhcmFtU3RyaW5nfWA7XG5cbiAgICBpZiAoIUFMTE9XRURfUEFUSC5pbmNsdWRlcyhwYXRoKSkge1xuICAgICAgY29uc29sZS5lcnJvcignTm90IGFsbG93ZWQgdG8gb3BlbiB0aGUgdXJsOicsIHVybCk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB3aXRoRXJyb3JMb2coKCkgPT4gY2hyb21lLnRhYnMuY3JlYXRlKHsgdXJsIH0pKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBkZXJpdmUgKHBhcmVudEFkZHJlc3M6IHN0cmluZywgc3VyaTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCBtZXRhZGF0YTogS2V5cmluZ1BhaXIkTWV0YSk6IEtleXJpbmdQYWlyIHtcbiAgICBjb25zdCBwYXJlbnRQYWlyID0ga2V5cmluZy5nZXRQYWlyKHBhcmVudEFkZHJlc3MpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHBhcmVudFBhaXIuZGVjb2RlUGtjczgocGFzc3dvcmQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0KCdXcm9uZyBwYXNzd29yZCcpKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHBhcmVudFBhaXIuZGVyaXZlKHN1cmksIG1ldGFkYXRhKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0KCdcInt7c3VyaX19XCIgaXMgbm90IGEgdmFsaWQgZGVyaXZhdGlvbiBwYXRoJywgeyByZXBsYWNlOiB7IHN1cmkgfSB9KSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkZXJpdmF0aW9uVmFsaWRhdGUgKHsgcGFyZW50QWRkcmVzcywgcGFyZW50UGFzc3dvcmQsIHN1cmkgfTogUmVxdWVzdERlcml2ZVZhbGlkYXRlKTogUmVzcG9uc2VEZXJpdmVWYWxpZGF0ZSB7XG4gICAgY29uc3QgY2hpbGRQYWlyID0gdGhpcy5kZXJpdmUocGFyZW50QWRkcmVzcywgc3VyaSwgcGFyZW50UGFzc3dvcmQsIHt9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBhZGRyZXNzOiBjaGlsZFBhaXIuYWRkcmVzcyxcbiAgICAgIHN1cmlcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBkZXJpdmF0aW9uQ3JlYXRlICh7IGdlbmVzaXNIYXNoLCBuYW1lLCBwYXJlbnRBZGRyZXNzLCBwYXJlbnRQYXNzd29yZCwgc3VyaSB9OiBSZXF1ZXN0RGVyaXZlQ3JlYXRlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2hpbGRQYWlyID0gdGhpcy5kZXJpdmUocGFyZW50QWRkcmVzcywgc3VyaSwgcGFyZW50UGFzc3dvcmQsIHtcbiAgICAgIGdlbmVzaXNIYXNoLFxuICAgICAgbmFtZSxcbiAgICAgIHBhcmVudEFkZHJlc3MsXG4gICAgICBzdXJpXG4gICAgfSk7XG5cbiAgICBrZXlyaW5nLmFkZFBhaXIoY2hpbGRQYWlyLCB0cnVlKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8vXG5cbiAgcHJpdmF0ZSBjYW5jZWxTdWJzY3JpcHRpb24gKGlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlIChpZDogc3RyaW5nLCB1bnN1YnNjcmliZTogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuI2tvbmlTdGF0ZS5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgdW5zdWJzY3JpYmUpO1xuICB9XG5cbiAgcHVibGljIGRlY29kZUFkZHJlc3MgPSAoa2V5OiBzdHJpbmcgfCBVaW50OEFycmF5LCBpZ25vcmVDaGVja3N1bT86IGJvb2xlYW4sIHNzNThGb3JtYXQ/OiBQcmVmaXgpOiBVaW50OEFycmF5ID0+IHtcbiAgICByZXR1cm4ga2V5cmluZy5kZWNvZGVBZGRyZXNzKGtleSwgaWdub3JlQ2hlY2tzdW0sIHNzNThGb3JtYXQpO1xuICB9O1xuXG4gIHB1YmxpYyBlbmNvZGVBZGRyZXNzID0gKGtleTogc3RyaW5nIHwgVWludDhBcnJheSwgc3M1OEZvcm1hdD86IFByZWZpeCk6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuIGtleXJpbmcuZW5jb2RlQWRkcmVzcyhrZXksIHNzNThGb3JtYXQpO1xuICB9O1xuXG4gIHByaXZhdGUgYWNjb3VudEV4cG9ydFByaXZhdGVLZXkgKHsgYWRkcmVzcyxcbiAgICBwYXNzd29yZCB9OiBSZXF1ZXN0QWNjb3VudEV4cG9ydFByaXZhdGVLZXkpOiBSZXNwb25zZUFjY291bnRFeHBvcnRQcml2YXRlS2V5IHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmFjY291bnRFeHBvcnRQcml2YXRlS2V5KHsgYWRkcmVzcywgcGFzc3dvcmQgfSk7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrUHVibGljQW5kU2VjcmV0S2V5IChyZXF1ZXN0OiBSZXF1ZXN0Q2hlY2tQdWJsaWNBbmRTZWNyZXRLZXkpOiBSZXNwb25zZUNoZWNrUHVibGljQW5kU2VjcmV0S2V5IHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmNoZWNrUHVibGljQW5kU2VjcmV0S2V5KHJlcXVlc3QpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhY2NvdW50c0dldEFsbFdpdGhDdXJyZW50QWRkcmVzcyAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8QWNjb3VudHNXaXRoQ3VycmVudEFkZHJlc3M+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKGFjY291bnRzLnN1YnNjcmliZVdpdGhDdXJyZW50QWRkcmVzcyknPihpZCwgcG9ydCk7XG4gICAgY29uc3Qga2V5cmluZ1NlcnZpY2UgPSB0aGlzLiNrb25pU3RhdGUua2V5cmluZ1NlcnZpY2U7XG5cbiAgICBhd2FpdCB0aGlzLiNrb25pU3RhdGUuZXZlbnRTZXJ2aWNlLndhaXRBY2NvdW50UmVhZHk7XG5cbiAgICBjb25zdCBjdXJyZW50QWNjb3VudCA9IGtleXJpbmdTZXJ2aWNlLmN1cnJlbnRBY2NvdW50O1xuICAgIGNvbnN0IHRyYW5zZm9ybWVkQWNjb3VudHMgPSB0cmFuc2Zvcm1BY2NvdW50cyhrZXlyaW5nU2VydmljZS5hY2NvdW50cyk7XG4gICAgY29uc3QgcmVzcG9uc2VEYXRhOiBBY2NvdW50c1dpdGhDdXJyZW50QWRkcmVzcyA9IHtcbiAgICAgIGFjY291bnRzOiB0cmFuc2Zvcm1lZEFjY291bnRzPy5sZW5ndGggPyBbeyAuLi5BQ0NPVU5UX0FMTF9KU09OIH0sIC4uLnRyYW5zZm9ybWVkQWNjb3VudHNdIDogW10sXG4gICAgICBjdXJyZW50QWRkcmVzczogY3VycmVudEFjY291bnQ/LmFkZHJlc3MsXG4gICAgICBjdXJyZW50R2VuZXNpc0hhc2g6IGN1cnJlbnRBY2NvdW50Py5jdXJyZW50R2VuZXNpc0hhc2hcbiAgICB9O1xuXG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uQWNjb3VudHMgPSBrZXlyaW5nU2VydmljZS5hY2NvdW50U3ViamVjdC5zdWJzY3JpYmUoKHN0b3JlZEFjY291bnRzOiBTdWJqZWN0SW5mbyk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgdHJhbnNmb3JtZWRBY2NvdW50cyA9IHRyYW5zZm9ybUFjY291bnRzKHN0b3JlZEFjY291bnRzKTtcblxuICAgICAgcmVzcG9uc2VEYXRhLmFjY291bnRzID0gdHJhbnNmb3JtZWRBY2NvdW50cz8ubGVuZ3RoID8gW3sgLi4uQUNDT1VOVF9BTExfSlNPTiB9LCAuLi50cmFuc2Zvcm1lZEFjY291bnRzXSA6IFtdO1xuXG4gICAgICBjYihyZXNwb25zZURhdGEpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uQ3VycmVudEFjY291bnQgPSBrZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudFN1YmplY3Quc3Vic2NyaWJlKChjdXJyZW50QWNjb3VudERhdGEpID0+IHtcbiAgICAgIHJlc3BvbnNlRGF0YS5jdXJyZW50QWRkcmVzcyA9IGN1cnJlbnRBY2NvdW50RGF0YS5hZGRyZXNzO1xuICAgICAgcmVzcG9uc2VEYXRhLmN1cnJlbnRHZW5lc2lzSGFzaCA9IGN1cnJlbnRBY2NvdW50RGF0YS5jdXJyZW50R2VuZXNpc0hhc2g7XG5cbiAgICAgIGNiKHJlc3BvbnNlRGF0YSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCAoKSA9PiB7XG4gICAgICBzdWJzY3JpcHRpb25BY2NvdW50cy51bnN1YnNjcmliZSgpO1xuICAgICAgc3Vic2NyaXB0aW9uQ3VycmVudEFjY291bnQudW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXNwb25zZURhdGE7XG4gIH1cblxuICBwcml2YXRlIGFjY291bnRzR2V0QWxsIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogc3RyaW5nIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKGFjY291bnRzLnN1YnNjcmliZUFjY291bnRzSW5wdXRBZGRyZXNzKSc+KGlkLCBwb3J0KTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBrZXlyaW5nLmtleXJpbmdPcHRpb24ub3B0aW9uc1N1YmplY3Quc3Vic2NyaWJlKChvcHRpb25zKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBvcHRpb25zSW5wdXRBZGRyZXNzOiBPcHRpb25JbnB1dEFkZHJlc3MgPSB7XG4gICAgICAgIG9wdGlvbnNcbiAgICAgIH07XG5cbiAgICAgIGNiKG9wdGlvbnNJbnB1dEFkZHJlc3MpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpZDtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlQWRkcmVzc2VzIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogQWRkcmVzc0Jvb2tJbmZvIHtcbiAgICBjb25zdCBfY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShhY2NvdW50cy5zdWJzY3JpYmVBZGRyZXNzZXMpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5hZGRyZXNzZXNTdWJqZWN0LnN1YnNjcmliZSgoc3ViamVjdEluZm86IFN1YmplY3RJbmZvKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBhZGRyZXNzZXMgPSBjb252ZXJ0U3ViamVjdEluZm9Ub0FkZHJlc3NlcyhzdWJqZWN0SW5mbyk7XG5cbiAgICAgIF9jYih7XG4gICAgICAgIGFkZHJlc3NlczogYWRkcmVzc2VzXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzdWJqZWN0SW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5hZGRyZXNzZXM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWRkcmVzc2VzOiBjb252ZXJ0U3ViamVjdEluZm9Ub0FkZHJlc3NlcyhzdWJqZWN0SW5mbylcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBzYXZlUmVjZW50QWNjb3VudCAoeyBhY2NvdW50SWQgfTogUmVxdWVzdFNhdmVSZWNlbnRBY2NvdW50KTogS2V5cmluZ0FkZHJlc3Mge1xuICAgIGlmIChpc0FkZHJlc3MoKGFjY291bnRJZCkpKSB7XG4gICAgICBjb25zdCBhZGRyZXNzID0gcmVmb3JtYXRBZGRyZXNzKGFjY291bnRJZCk7XG4gICAgICBjb25zdCBhY2NvdW50ID0ga2V5cmluZy5nZXRBY2NvdW50KGFkZHJlc3MpO1xuICAgICAgY29uc3QgY29udGFjdCA9IGtleXJpbmcuZ2V0QWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgcmV0dXJuIGFjY291bnQgfHwgY29udGFjdCB8fCB7IC4uLmtleXJpbmcuc2F2ZVJlY2VudChhZGRyZXNzKS5qc29uLCBwdWJsaWNLZXk6IGRlY29kZUFkZHJlc3MoYWRkcmVzcykgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgRXJyb3IodCgnVGhpcyBpcyBub3QgYW4gYWRkcmVzcycpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVkaXRDb250YWN0QWNjb3VudCAoeyBhZGRyZXNzLCBtZXRhIH06IFJlcXVlc3RFZGl0Q29udGFjdEFjY291bnQpOiBib29sZWFuIHtcbiAgICBpZiAoaXNBZGRyZXNzKChhZGRyZXNzKSkpIHtcbiAgICAgIGNvbnN0IF9hZGRyZXNzID0gcmVmb3JtYXRBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICBrZXlyaW5nLnNhdmVBZGRyZXNzKF9hZGRyZXNzLCBtZXRhKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKHQoJ1RoaXMgaXMgbm90IGFuIGFkZHJlc3MnKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkZWxldGVDb250YWN0QWNjb3VudCAoeyBhZGRyZXNzIH06IFJlcXVlc3REZWxldGVDb250YWN0QWNjb3VudCk6IGJvb2xlYW4ge1xuICAgIGlmIChpc0FkZHJlc3MoKGFkZHJlc3MpKSkge1xuICAgICAgY29uc3QgX2FkZHJlc3MgPSByZWZvcm1hdEFkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgIGtleXJpbmcuZm9yZ2V0QWRkcmVzcyhfYWRkcmVzcyk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcih0KCdUaGlzIGlzIG5vdCBhbiBhZGRyZXNzJykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2dldEF1dGhMaXN0VjIgKCk6IFByb21pc2U8QXV0aFVybHM+IHtcbiAgICBjb25zdCBrZXlyaW5nU2VydmljZSA9IHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxBdXRoVXJscz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4ja29uaVN0YXRlLmdldEF1dGhvcml6ZSgocnM6IEF1dGhVcmxzKSA9PiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3NMaXN0ID0gT2JqZWN0LmtleXMoa2V5cmluZ1NlcnZpY2UuYWNjb3VudHMpO1xuICAgICAgICBjb25zdCB1cmxMaXN0ID0gT2JqZWN0LmtleXMocnMpO1xuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhyc1t1cmxMaXN0WzBdXS5pc0FsbG93ZWRNYXApLnRvU3RyaW5nKCkgIT09IGFkZHJlc3NMaXN0LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICB1cmxMaXN0LmZvckVhY2goKHVybCkgPT4ge1xuICAgICAgICAgICAgYWRkcmVzc0xpc3QuZm9yRWFjaCgoYWRkcmVzcykgPT4ge1xuICAgICAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHJzW3VybF0uaXNBbGxvd2VkTWFwKS5pbmNsdWRlcyhhZGRyZXNzKSkge1xuICAgICAgICAgICAgICAgIHJzW3VybF0uaXNBbGxvd2VkTWFwW2FkZHJlc3NdID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhyc1t1cmxdLmlzQWxsb3dlZE1hcCkuZm9yRWFjaCgoYWRkcmVzcykgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWFkZHJlc3NMaXN0LmluY2x1ZGVzKGFkZHJlc3MpKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJzW3VybF0uaXNBbGxvd2VkTWFwW2FkZHJlc3NdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRBdXRob3JpemUocnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzb2x2ZShycyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXV0aG9yaXplU3Vic2NyaWJlVjIgKGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBBdXRob3JpemVSZXF1ZXN0W10ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoYXV0aG9yaXplLnJlcXVlc3RzVjIpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5hdXRoU3ViamVjdFYyLnN1YnNjcmliZSgocmVxdWVzdHM6IEF1dGhvcml6ZVJlcXVlc3RbXSk6IHZvaWQgPT5cbiAgICAgIGNiKHJlcXVlc3RzKVxuICAgICk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5hdXRoU3ViamVjdFYyLnZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRBdXRoTGlzdFYyICgpOiBQcm9taXNlPFJlc3BvbnNlQXV0aG9yaXplTGlzdD4ge1xuICAgIGNvbnN0IGF1dGhMaXN0ID0gYXdhaXQgdGhpcy5fZ2V0QXV0aExpc3RWMigpO1xuXG4gICAgcmV0dXJuIHsgbGlzdDogYXV0aExpc3QgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXV0aG9yaXplQXBwcm92ZVYyICh7IGFjY291bnRzLCBpZCB9OiBSZXF1ZXN0QXV0aG9yaXplQXBwcm92ZVYyKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcXVldWVkID0gdGhpcy4ja29uaVN0YXRlLmdldEF1dGhSZXF1ZXN0VjIoaWQpO1xuXG4gICAgYXNzZXJ0KHF1ZXVlZCwgdCgnVW5hYmxlIHRvIHByb2NlZWQuIFBsZWFzZSB0cnkgYWdhaW4nKSk7XG5cbiAgICBjb25zdCB7IHJlc29sdmUgfSA9IHF1ZXVlZDtcblxuICAgIHJlc29sdmUoeyBhY2NvdW50cywgcmVzdWx0OiB0cnVlIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGF1dGhvcml6ZVJlamVjdFYyICh7IGlkIH06IFJlcXVlc3RBdXRob3JpemVSZWplY3QpOiBib29sZWFuIHtcbiAgICBjb25zdCBxdWV1ZWQgPSB0aGlzLiNrb25pU3RhdGUuZ2V0QXV0aFJlcXVlc3RWMihpZCk7XG5cbiAgICBhc3NlcnQocXVldWVkLCB0KCdVbmFibGUgdG8gcHJvY2VlZC4gUGxlYXNlIHRyeSBhZ2FpbicpKTtcblxuICAgIGNvbnN0IHsgcmVqZWN0IH0gPSBxdWV1ZWQ7XG5cbiAgICByZWplY3QobmV3IEVycm9yKCdSZWplY3RlZCcpKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhdXRob3JpemVDYW5jZWxWMiAoeyBpZCB9OiBSZXF1ZXN0QXV0aG9yaXplQ2FuY2VsKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcXVldWVkID0gdGhpcy4ja29uaVN0YXRlLmdldEF1dGhSZXF1ZXN0VjIoaWQpO1xuXG4gICAgYXNzZXJ0KHF1ZXVlZCwgdCgnVW5hYmxlIHRvIHByb2NlZWQuIFBsZWFzZSB0cnkgYWdhaW4nKSk7XG5cbiAgICBjb25zdCB7IHJlamVjdCB9ID0gcXVldWVkO1xuXG4gICAgLy8gUmVqZWN0IHdpdGhvdXQgZXJyb3IgbWVhbmluZyBjYW5jZWxcbiAgICByZWplY3QobmV3IEVycm9yKCdDYW5jZWxsZWQnKSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZvcmdldFNpdGUgKHVybDogc3RyaW5nLCBjYWxsQmFjaz86ICh2YWx1ZTogQXV0aFVybHMpID0+IHZvaWQpIHtcbiAgICB0aGlzLiNrb25pU3RhdGUuZ2V0QXV0aG9yaXplKCh2YWx1ZSkgPT4ge1xuICAgICAgYXNzZXJ0KHZhbHVlLCAnVGhlIHNvdXJjZSBpcyBub3Qga25vd24nKTtcblxuICAgICAgZGVsZXRlIHZhbHVlW3VybF07XG5cbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRBdXRob3JpemUodmFsdWUsICgpID0+IHtcbiAgICAgICAgY2FsbEJhY2sgJiYgY2FsbEJhY2sodmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGZvcmdldFNpdGUgKGRhdGE6IFJlcXVlc3RGb3JnZXRTaXRlLCBpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShhdXRob3JpemUuZm9yZ2V0U2l0ZSknPihpZCwgcG9ydCk7XG5cbiAgICB0aGlzLl9mb3JnZXRTaXRlKGRhdGEudXJsLCAoaXRlbXMpID0+IHtcbiAgICAgIGNiKGl0ZW1zKTtcbiAgICB9KTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfZm9yZ2V0QWxsU2l0ZSAoY2FsbEJhY2s/OiAodmFsdWU6IEF1dGhVcmxzKSA9PiB2b2lkKSB7XG4gICAgdGhpcy4ja29uaVN0YXRlLmdldEF1dGhvcml6ZSgodmFsdWUpID0+IHtcbiAgICAgIGFzc2VydCh2YWx1ZSwgJ1RoZSBzb3VyY2UgaXMgbm90IGtub3duJyk7XG5cbiAgICAgIHZhbHVlID0ge307XG5cbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRBdXRob3JpemUodmFsdWUsICgpID0+IHtcbiAgICAgICAgY2FsbEJhY2sgJiYgY2FsbEJhY2sodmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGZvcmdldEFsbFNpdGUgKGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBib29sZWFuIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKGF1dGhvcml6ZS5mb3JnZXRBbGxTaXRlKSc+KGlkLCBwb3J0KTtcblxuICAgIHRoaXMuX2ZvcmdldEFsbFNpdGUoKGl0ZW1zKSA9PiB7XG4gICAgICBjYihpdGVtcyk7XG4gICAgfSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWNjb3VudHMgKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzdG9yZWRBY2NvdW50cyA9IHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5hY2NvdW50cztcbiAgICBjb25zdCB0cmFuc2Zvcm1lZEFjY291bnRzID0gdHJhbnNmb3JtQWNjb3VudHMoc3RvcmVkQWNjb3VudHMpO1xuXG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkQWNjb3VudHMubWFwKChhKSA9PiBhLmFkZHJlc3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0FkZHJlc3NWYWxpZFdpdGhBdXRoVHlwZSAoYWRkcmVzczogc3RyaW5nLCBhY2NvdW50QXV0aFR5cGU/OiBBY2NvdW50QXV0aFR5cGUpOiBib29sZWFuIHtcbiAgICBpZiAoYWNjb3VudEF1dGhUeXBlID09PSAnc3Vic3RyYXRlJykge1xuICAgICAgcmV0dXJuICFpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKTtcbiAgICB9IGVsc2UgaWYgKGFjY291bnRBdXRoVHlwZSA9PT0gJ2V2bScpIHtcbiAgICAgIHJldHVybiBpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgZmlsdGVyQWNjb3VudHNCeUFjY291bnRBdXRoVHlwZSAoYWNjb3VudHM6IHN0cmluZ1tdLCBhY2NvdW50QXV0aFR5cGU/OiBBY2NvdW50QXV0aFR5cGUpOiBzdHJpbmdbXSB7XG4gICAgaWYgKGFjY291bnRBdXRoVHlwZSA9PT0gJ3N1YnN0cmF0ZScpIHtcbiAgICAgIHJldHVybiBhY2NvdW50cy5maWx0ZXIoKGFkZHJlc3MpID0+ICFpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKSk7XG4gICAgfSBlbHNlIGlmIChhY2NvdW50QXV0aFR5cGUgPT09ICdldm0nKSB7XG4gICAgICByZXR1cm4gYWNjb3VudHMuZmlsdGVyKChhZGRyZXNzKSA9PiBpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhY2NvdW50cztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jaGFuZ2VBdXRob3JpemF0aW9uQWxsIChjb25uZWN0VmFsdWU6IGJvb2xlYW4sIGNhbGxCYWNrPzogKHZhbHVlOiBBdXRoVXJscykgPT4gdm9pZCkge1xuICAgIHRoaXMuI2tvbmlTdGF0ZS5nZXRBdXRob3JpemUoKHZhbHVlKSA9PiB7XG4gICAgICBhc3NlcnQodmFsdWUsICdUaGUgc291cmNlIGlzIG5vdCBrbm93bicpO1xuXG4gICAgICBjb25zdCBhY2NvdW50cyA9IHRoaXMuZ2V0QWNjb3VudHMoKTtcblxuICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goKHVybCkgPT4ge1xuICAgICAgICBpZiAoIXZhbHVlW3VybF0uaXNBbGxvd2VkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0QWNjb3VudHMgPSB0aGlzLmZpbHRlckFjY291bnRzQnlBY2NvdW50QXV0aFR5cGUoYWNjb3VudHMsIHZhbHVlW3VybF0uYWNjb3VudEF1dGhUeXBlKTtcblxuICAgICAgICB0YXJnZXRBY2NvdW50cy5mb3JFYWNoKChhZGRyZXNzKSA9PiB7XG4gICAgICAgICAgdmFsdWVbdXJsXS5pc0FsbG93ZWRNYXBbYWRkcmVzc10gPSBjb25uZWN0VmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLiNrb25pU3RhdGUuc2V0QXV0aG9yaXplKHZhbHVlLCAoKSA9PiB7XG4gICAgICAgIGNhbGxCYWNrICYmIGNhbGxCYWNrKHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjaGFuZ2VBdXRob3JpemF0aW9uQWxsIChkYXRhOiBSZXF1ZXN0QXV0aG9yaXphdGlvbiwgaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoYXV0aG9yaXplLmNoYW5nZVNpdGUpJz4oaWQsIHBvcnQpO1xuXG4gICAgdGhpcy5fY2hhbmdlQXV0aG9yaXphdGlvbkFsbChkYXRhLmNvbm5lY3RWYWx1ZSwgKGl0ZW1zKSA9PiB7XG4gICAgICBjYihpdGVtcyk7XG4gICAgfSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NoYW5nZUF1dGhvcml6YXRpb24gKHVybDogc3RyaW5nLCBjb25uZWN0VmFsdWU6IGJvb2xlYW4sIGNhbGxCYWNrPzogKHZhbHVlOiBBdXRoVXJscykgPT4gdm9pZCkge1xuICAgIHRoaXMuI2tvbmlTdGF0ZS5nZXRBdXRob3JpemUoKHZhbHVlKSA9PiB7XG4gICAgICBhc3NlcnQodmFsdWVbdXJsXSwgJ1RoZSBzb3VyY2UgaXMgbm90IGtub3duJyk7XG5cbiAgICAgIGNvbnN0IGFjY291bnRzID0gdGhpcy5nZXRBY2NvdW50cygpO1xuICAgICAgY29uc3QgdGFyZ2V0QWNjb3VudHMgPSB0aGlzLmZpbHRlckFjY291bnRzQnlBY2NvdW50QXV0aFR5cGUoYWNjb3VudHMsIHZhbHVlW3VybF0uYWNjb3VudEF1dGhUeXBlKTtcblxuICAgICAgdGFyZ2V0QWNjb3VudHMuZm9yRWFjaCgoYWRkcmVzcykgPT4ge1xuICAgICAgICB2YWx1ZVt1cmxdLmlzQWxsb3dlZE1hcFthZGRyZXNzXSA9IGNvbm5lY3RWYWx1ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy4ja29uaVN0YXRlLnNldEF1dGhvcml6ZSh2YWx1ZSwgKCkgPT4ge1xuICAgICAgICBjYWxsQmFjayAmJiBjYWxsQmFjayh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGVBdXRob3JpemF0aW9uMiAodXJsOiBzdHJpbmcpOiBQcm9taXNlPFJlc3BvbnNlQXV0aG9yaXplTGlzdD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy4ja29uaVN0YXRlLmdldEF1dGhvcml6ZSgodmFsdWUpID0+IHtcbiAgICAgICAgYXNzZXJ0KHZhbHVlW3VybF0sICdUaGUgc291cmNlIGlzIG5vdCBrbm93bicpO1xuXG4gICAgICAgIHZhbHVlW3VybF0uaXNBbGxvd2VkID0gIXZhbHVlW3VybF0uaXNBbGxvd2VkO1xuXG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRBdXRob3JpemUodmFsdWUsICgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHsgbGlzdDogdmFsdWUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNoYW5nZUF1dGhvcml6YXRpb24gKGRhdGE6IFJlcXVlc3RBdXRob3JpemF0aW9uLCBpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShhdXRob3JpemUuY2hhbmdlU2l0ZSknPihpZCwgcG9ydCk7XG5cbiAgICB0aGlzLl9jaGFuZ2VBdXRob3JpemF0aW9uKGRhdGEudXJsLCBkYXRhLmNvbm5lY3RWYWx1ZSwgKGl0ZW1zKSA9PiB7XG4gICAgICBjYihpdGVtcyk7XG4gICAgfSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NoYW5nZUF1dGhvcml6YXRpb25QZXJBY2MgKGFkZHJlc3M6IHN0cmluZywgY29ubmVjdFZhbHVlOiBib29sZWFuLCB1cmw6IHN0cmluZywgY2FsbEJhY2s/OiAodmFsdWU6IEF1dGhVcmxzKSA9PiB2b2lkKSB7XG4gICAgdGhpcy4ja29uaVN0YXRlLmdldEF1dGhvcml6ZSgodmFsdWUpID0+IHtcbiAgICAgIGFzc2VydCh2YWx1ZSwgJ1RoZSBzb3VyY2UgaXMgbm90IGtub3duJyk7XG5cbiAgICAgIGlmICh0aGlzLmlzQWRkcmVzc1ZhbGlkV2l0aEF1dGhUeXBlKGFkZHJlc3MsIHZhbHVlW3VybF0uYWNjb3VudEF1dGhUeXBlKSkge1xuICAgICAgICB2YWx1ZVt1cmxdLmlzQWxsb3dlZE1hcFthZGRyZXNzXSA9IGNvbm5lY3RWYWx1ZTtcblxuICAgICAgICB0aGlzLiNrb25pU3RhdGUuc2V0QXV0aG9yaXplKHZhbHVlLCAoKSA9PiB7XG4gICAgICAgICAgY2FsbEJhY2sgJiYgY2FsbEJhY2sodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxCYWNrICYmIGNhbGxCYWNrKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2NoYW5nZUF1dGhvcml6YXRpb25CbG9jayAoY29ubmVjdFZhbHVlOiBib29sZWFuLCBpZDogc3RyaW5nKSB7XG4gICAgdGhpcy4ja29uaVN0YXRlLmdldEF1dGhvcml6ZSgodmFsdWUpID0+IHtcbiAgICAgIGFzc2VydCh2YWx1ZSwgJ1RoZSBzb3VyY2UgaXMgbm90IGtub3duJyk7XG5cbiAgICAgIHZhbHVlW2lkXS5pc0FsbG93ZWQgPSBjb25uZWN0VmFsdWU7XG5cbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRBdXRob3JpemUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2hhbmdlQXV0aG9yaXphdGlvblBlclNpdGUgKHZhbHVlczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4sIGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLiNrb25pU3RhdGUuZ2V0QXV0aG9yaXplKCh2YWx1ZSkgPT4ge1xuICAgICAgYXNzZXJ0KHZhbHVlLCAnVGhlIHNvdXJjZSBpcyBub3Qga25vd24nKTtcblxuICAgICAgdmFsdWVbaWRdLmlzQWxsb3dlZE1hcCA9IHZhbHVlcztcblxuICAgICAgdGhpcy4ja29uaVN0YXRlLnNldEF1dGhvcml6ZSh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNoYW5nZUF1dGhvcml6YXRpb25QZXJBY2MgKGRhdGE6IFJlcXVlc3RBdXRob3JpemF0aW9uUGVyQWNjb3VudCwgaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoYXV0aG9yaXplLmNoYW5nZVNpdGVQZXJBY2NvdW50KSc+KGlkLCBwb3J0KTtcblxuICAgIHRoaXMuX2NoYW5nZUF1dGhvcml6YXRpb25QZXJBY2MoZGF0YS5hZGRyZXNzLCBkYXRhLmNvbm5lY3RWYWx1ZSwgZGF0YS51cmwsIChpdGVtcykgPT4ge1xuICAgICAgY2IoaXRlbXMpO1xuICAgIH0pO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGNoYW5nZUF1dGhvcml6YXRpb25QZXJTaXRlIChkYXRhOiBSZXF1ZXN0QXV0aG9yaXphdGlvblBlclNpdGUpOiBib29sZWFuIHtcbiAgICB0aGlzLl9jaGFuZ2VBdXRob3JpemF0aW9uUGVyU2l0ZShkYXRhLnZhbHVlcywgZGF0YS5pZCk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgY2hhbmdlQXV0aG9yaXphdGlvbkJsb2NrIChkYXRhOiBSZXF1ZXN0QXV0aG9yaXphdGlvbkJsb2NrKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fY2hhbmdlQXV0aG9yaXphdGlvbkJsb2NrKGRhdGEuY29ubmVjdGVkVmFsdWUsIGRhdGEuaWQpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFNldHRpbmdzICgpOiBQcm9taXNlPFJlcXVlc3RTZXR0aW5nc1R5cGU+IHtcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5nZXRTZXR0aW5ncygodmFsdWUpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdG9nZ2xlQmFsYW5jZXNWaXNpYmlsaXR5ICgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5nZXRTZXR0aW5ncygodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgdXBkYXRlVmFsdWUgPSB7XG4gICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgaXNTaG93QmFsYW5jZTogIXZhbHVlLmlzU2hvd0JhbGFuY2VcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLiNrb25pU3RhdGUuc2V0U2V0dGluZ3ModXBkYXRlVmFsdWUsICgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCF2YWx1ZS5pc1Nob3dCYWxhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZUFjY291bnRBbGxMb2dvIChkYXRhOiBzdHJpbmcsIGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKHNldHRpbmdzLnNhdmVBY2NvdW50QWxsTG9nbyknPihpZCwgcG9ydCk7XG5cbiAgICB0aGlzLiNrb25pU3RhdGUuZ2V0U2V0dGluZ3MoKHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVWYWx1ZSA9IHtcbiAgICAgICAgLi4udmFsdWUsXG4gICAgICAgIGFjY291bnRBbGxMb2dvOiBkYXRhXG4gICAgICB9O1xuXG4gICAgICB0aGlzLiNrb25pU3RhdGUuc2V0U2V0dGluZ3ModXBkYXRlVmFsdWUsICgpID0+IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vZGUvbm8tY2FsbGJhY2stbGl0ZXJhbFxuICAgICAgICBjYih1cGRhdGVWYWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzYXZlVGhlbWUgKGRhdGE6IFRoZW1lTmFtZXMpIHtcbiAgICB0aGlzLiNrb25pU3RhdGUudXBkYXRlU2V0dGluZygndGhlbWUnLCBkYXRhKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRDYW1lcmEgKHsgY2FtZXJhIH06IFJlcXVlc3RDYW1lcmFTZXR0aW5ncykge1xuICAgIHRoaXMuI2tvbmlTdGF0ZS51cGRhdGVTZXR0aW5nKCdjYW1lcmEnLCBjYW1lcmEpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHNhdmVCcm93c2VyQ29uZmlybWF0aW9uVHlwZSAoZGF0YTogQnJvd3NlckNvbmZpcm1hdGlvblR5cGUpIHtcbiAgICB0aGlzLiNrb25pU3RhdGUudXBkYXRlU2V0dGluZygnYnJvd3NlckNvbmZpcm1hdGlvblR5cGUnLCBkYXRhKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRBdXRvTG9ja1RpbWUgKHsgYXV0b0xvY2tUaW1lIH06IFJlcXVlc3RDaGFuZ2VUaW1lQXV0b0xvY2spIHtcbiAgICB0aGlzLiNrb25pU3RhdGUudXBkYXRlU2V0dGluZygndGltZUF1dG9Mb2NrJywgYXV0b0xvY2tUaW1lKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRVbmxvY2tUeXBlICh7IHVubG9ja1R5cGUgfTogUmVxdWVzdFVubG9ja1R5cGUpIHtcbiAgICB0aGlzLiNrb25pU3RhdGUudXBkYXRlU2V0dGluZygndW5sb2NrVHlwZScsIHVubG9ja1R5cGUpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1YnNjcmliZVNldHRpbmdzIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShzZXR0aW5ncy5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuXG4gICAgY29uc3QgYmFsYW5jZXNWaXNpYmlsaXR5U3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZVNldHRpbmdzU3ViamVjdCgpLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiAocnMpID0+IHtcbiAgICAgICAgY2IocnMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgYmFsYW5jZXNWaXNpYmlsaXR5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFNldHRpbmdzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldEVuYWJsZUNoYWluUGF0cm9sICh7IGVuYWJsZSB9OiBSZXF1ZXN0Q2hhbmdlRW5hYmxlQ2hhaW5QYXRyb2wpIHtcbiAgICB0aGlzLiNrb25pU3RhdGUudXBkYXRlU2V0dGluZygnZW5hYmxlQ2hhaW5QYXRyb2wnLCBlbmFibGUpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHNldFNob3daZXJvQmFsYW5jZSAoeyBzaG93IH06IFJlcXVlc3RDaGFuZ2VTaG93WmVyb0JhbGFuY2UpIHtcbiAgICB0aGlzLiNrb25pU3RhdGUudXBkYXRlU2V0dGluZygnaXNTaG93WmVyb0JhbGFuY2UnLCBzaG93KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRMYW5ndWFnZSAoeyBsYW5ndWFnZSB9OiBSZXF1ZXN0Q2hhbmdlTGFuZ3VhZ2UpIHtcbiAgICB0aGlzLiNrb25pU3RhdGUudXBkYXRlU2V0dGluZygnbGFuZ3VhZ2UnLCBsYW5ndWFnZSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0U2hvd0JhbGFuY2UgKHsgZW5hYmxlIH06IFJlcXVlc3RDaGFuZ2VTaG93QmFsYW5jZSkge1xuICAgIHRoaXMuI2tvbmlTdGF0ZS51cGRhdGVTZXR0aW5nKCdpc1Nob3dCYWxhbmNlJywgZW5hYmxlKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdWJzY3JpYmVBdXRoVXJscyAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8QXV0aFVybHM+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKGF1dGhvcml6ZS5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuXG4gICAgY29uc3QgYXV0aG9yaXplVXJsU3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZUF1dGhvcml6ZVVybFN1YmplY3QoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIGF1dGhvcml6ZVVybFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmdldEF1dGhMaXN0KCk7XG4gIH1cblxuICBwcml2YXRlIF9zYXZlQ3VycmVudEFjY291bnRBZGRyZXNzIChhZGRyZXNzOiBzdHJpbmcsIGNhbGxiYWNrPzogKGRhdGE6IEN1cnJlbnRBY2NvdW50SW5mbykgPT4gdm9pZCkge1xuICAgIGxldCBhY2NvdW50SW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudDtcblxuICAgIGlmICghYWNjb3VudEluZm8pIHtcbiAgICAgIGFjY291bnRJbmZvID0ge1xuICAgICAgICBhZGRyZXNzLFxuICAgICAgICBjdXJyZW50R2VuZXNpc0hhc2g6IEFMTF9HRU5FU0lTX0hBU0gsXG4gICAgICAgIGFsbEdlbmVzaXNIYXNoOiBBTExfR0VORVNJU19IQVNIIHx8IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWNjb3VudEluZm8uYWRkcmVzcyA9IGFkZHJlc3M7XG5cbiAgICAgIGlmIChhZGRyZXNzICE9PSBBTExfQUNDT1VOVF9LRVkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50S2V5UGFpciA9IGtleXJpbmcuZ2V0UGFpcihhZGRyZXNzKTtcblxuICAgICAgICAgIGFjY291bnRJbmZvLmN1cnJlbnRHZW5lc2lzSGFzaCA9IGN1cnJlbnRLZXlQYWlyPy5tZXRhLmdlbmVzaXNIYXNoIGFzIHN0cmluZyB8fCBBTExfR0VORVNJU19IQVNIO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBhY2NvdW50SW5mby5jdXJyZW50R2VuZXNpc0hhc2ggPSBBTExfR0VORVNJU19IQVNIO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY2NvdW50SW5mby5jdXJyZW50R2VuZXNpc0hhc2ggPSBhY2NvdW50SW5mby5hbGxHZW5lc2lzSGFzaCB8fCBBTExfR0VORVNJU19IQVNIO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRDdXJyZW50QWNjb3VudChhY2NvdW50SW5mbywgKCkgPT4ge1xuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soYWNjb3VudEluZm8pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50QWNjb3VudEFkZHJlc3MgKGFkZHJlc3M6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3NhdmVDdXJyZW50QWNjb3VudEFkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUN1cnJlbnRBY2NvdW50QWRkcmVzcyAoZGF0YTogUmVxdWVzdEN1cnJlbnRBY2NvdW50QWRkcmVzcyk6IFByb21pc2U8Q3VycmVudEFjY291bnRJbmZvPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPEN1cnJlbnRBY2NvdW50SW5mbz4oKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuX3NhdmVDdXJyZW50QWNjb3VudEFkZHJlc3MoZGF0YS5hZGRyZXNzLCAoY3VycmVudEluZm8pID0+IHtcbiAgICAgICAgcmVzb2x2ZShjdXJyZW50SW5mbyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0QXNzZXRTZXR0aW5nICgpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIEFzc2V0U2V0dGluZz4+IHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmNoYWluU2VydmljZS5nZXRBc3NldFNldHRpbmdzKCk7XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZUFzc2V0U2V0dGluZyAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgQXNzZXRTZXR0aW5nPj4ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoYXNzZXRTZXR0aW5nLmdldFN1YnNjcmlwdGlvbiknPihpZCwgcG9ydCk7XG5cbiAgICBjb25zdCBhc3NldFNldHRpbmdTdWJzY3JpcHRpb24gPSB0aGlzLiNrb25pU3RhdGUuY2hhaW5TZXJ2aWNlLnN1YnNjcmliZUFzc2V0U2V0dGluZ3MoKS5zdWJzY3JpYmUoY2IpO1xuXG4gICAgdGhpcy5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgYXNzZXRTZXR0aW5nU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmdldEFzc2V0U2V0dGluZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVBc3NldFNldHRpbmcgKHBhcmFtczogQXNzZXRTZXR0aW5nVXBkYXRlUmVxKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2UudXBkYXRlQXNzZXRTZXR0aW5nKHBhcmFtcy50b2tlblNsdWcsIHBhcmFtcy5hc3NldFNldHRpbmcsIHBhcmFtcy5hdXRvRW5hYmxlTmF0aXZlVG9rZW4pO1xuXG4gICAgICB0aGlzLiNrb25pU3RhdGUuZXZlbnRTZXJ2aWNlLmVtaXQoJ2Fzc2V0LnVwZGF0ZVN0YXRlJywgcGFyYW1zLnRva2VuU2x1Zyk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFByaWNlICgpOiBQcm9taXNlPFByaWNlSnNvbj4ge1xuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUucHJpY2VTZXJ2aWNlLmdldFByaWNlKCk7XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZVByaWNlIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxQcmljZUpzb24+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKHByaWNlLmdldFN1YnNjcmlwdGlvbiknPihpZCwgcG9ydCk7XG5cbiAgICBjb25zdCBwcmljZVN1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5wcmljZVNlcnZpY2UuZ2V0UHJpY2VTdWJqZWN0KClcbiAgICAgIC5zdWJzY3JpYmUoKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgcHJpY2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0UHJpY2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QmFsYW5jZSAocmVzZXQ/OiBib29sZWFuKTogQmFsYW5jZUpzb24ge1xuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUuZ2V0QmFsYW5jZShyZXNldCk7XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZUJhbGFuY2UgKGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBCYWxhbmNlSnNvbiB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShiYWxhbmNlLmdldFN1YnNjcmlwdGlvbiknPihpZCwgcG9ydCk7XG5cbiAgICBjb25zdCBiYWxhbmNlU3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZUJhbGFuY2UoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIGJhbGFuY2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0QmFsYW5jZSh0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q3Jvd2Rsb2FuIChyZXNldD86IGJvb2xlYW4pOiBDcm93ZGxvYW5Kc29uIHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmdldENyb3dkbG9hbihyZXNldCk7XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZUNyb3dkbG9hbiAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IENyb3dkbG9hbkpzb24ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoY3Jvd2Rsb2FuLmdldFN1YnNjcmlwdGlvbiknPihpZCwgcG9ydCk7XG5cbiAgICBjb25zdCBjcm93ZGxvYW5TdWJzY3JpcHRpb24gPSB0aGlzLiNrb25pU3RhdGUuc3Vic2NyaWJlQ3Jvd2Rsb2FuKCkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChycykgPT4ge1xuICAgICAgICBjYihycyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCBjcm93ZGxvYW5TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3Jvd2Rsb2FuKHRydWUpO1xuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZVBhc3N3b3JkIChqc29uOiBLZXlyaW5nUGFpciRKc29uLCBwYXNzd29yZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY3J5cHRvVHlwZSA9IEFycmF5LmlzQXJyYXkoanNvbi5lbmNvZGluZy5jb250ZW50KSA/IGpzb24uZW5jb2RpbmcuY29udGVudFsxXSA6ICdlZDI1NTE5JztcbiAgICBjb25zdCBlbmNUeXBlID0gQXJyYXkuaXNBcnJheShqc29uLmVuY29kaW5nLnR5cGUpID8ganNvbi5lbmNvZGluZy50eXBlIDogW2pzb24uZW5jb2RpbmcudHlwZV07XG4gICAgY29uc3QgcGFpciA9IGNyZWF0ZVBhaXIoXG4gICAgICB7IHRvU1M1ODogdGhpcy5lbmNvZGVBZGRyZXNzLCB0eXBlOiBjcnlwdG9UeXBlIGFzIEtleXBhaXJUeXBlIH0sXG4gICAgICB7IHB1YmxpY0tleTogdGhpcy5kZWNvZGVBZGRyZXNzKGpzb24uYWRkcmVzcywgdHJ1ZSkgfSxcbiAgICAgIGpzb24ubWV0YSxcbiAgICAgIGlzSGV4KGpzb24uZW5jb2RlZCkgPyBoZXhUb1U4YShqc29uLmVuY29kZWQpIDogYmFzZTY0RGVjb2RlKGpzb24uZW5jb2RlZCksXG4gICAgICBlbmNUeXBlXG4gICAgKTtcblxuICAgIC8vIHVubG9jayB0aGVuIGxvY2sgKGxvY2tpbmcgY2xlYW5zIHNlY3JldEtleSwgc28gbmVlZHMgdG8gYmUgbGFzdClcbiAgICB0cnkge1xuICAgICAgcGFpci5kZWNvZGVQa2NzOChwYXNzd29yZCk7XG4gICAgICBwYWlyLmxvY2soKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVkQWNjb3VudHNQYXNzd29yZCAoanNvbjogRW5jcnlwdGVkSnNvbiwgcGFzc3dvcmQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICB1OGFUb1N0cmluZyhqc29uRGVjcnlwdChqc29uLCBwYXNzd29yZCkpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfYWRkQWRkcmVzc1RvQXV0aExpc3QgKGFkZHJlc3M6IHN0cmluZywgaXNBbGxvd2VkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy4ja29uaVN0YXRlLmdldEF1dGhvcml6ZSgodmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSAmJiBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKCh1cmwpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5pc0FkZHJlc3NWYWxpZFdpdGhBdXRoVHlwZShhZGRyZXNzLCB2YWx1ZVt1cmxdLmFjY291bnRBdXRoVHlwZSkpIHtcbiAgICAgICAgICAgIHZhbHVlW3VybF0uaXNBbGxvd2VkTWFwW2FkZHJlc3NdID0gaXNBbGxvd2VkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4ja29uaVN0YXRlLnNldEF1dGhvcml6ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9hZGRBZGRyZXNzZXNUb0F1dGhMaXN0IChhZGRyZXNzZXM6IHN0cmluZ1tdLCBpc0FsbG93ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLiNrb25pU3RhdGUuZ2V0QXV0aG9yaXplKCh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlICYmIE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGgpIHtcbiAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goKHVybCkgPT4ge1xuICAgICAgICAgIGFkZHJlc3Nlcy5mb3JFYWNoKChhZGRyZXNzKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FkZHJlc3NWYWxpZFdpdGhBdXRoVHlwZShhZGRyZXNzLCB2YWx1ZVt1cmxdLmFjY291bnRBdXRoVHlwZSkpIHtcbiAgICAgICAgICAgICAgdmFsdWVbdXJsXS5pc0FsbG93ZWRNYXBbYWRkcmVzc10gPSBpc0FsbG93ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pOy8qKi9cblxuICAgICAgICB0aGlzLiNrb25pU3RhdGUuc2V0QXV0aG9yaXplKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYWNjb3VudHNDcmVhdGVTdXJpVjIgKHsgZ2VuZXNpc0hhc2gsXG4gICAgaXNBbGxvd2VkLFxuICAgIG5hbWUsXG4gICAgcGFzc3dvcmQsXG4gICAgc3VyaTogX3N1cmksXG4gICAgdHlwZXMgfTogUmVxdWVzdEFjY291bnRDcmVhdGVTdXJpVjIpOiBQcm9taXNlPFJlc3BvbnNlQWNjb3VudENyZWF0ZVN1cmlWMj4ge1xuICAgIGNvbnN0IGFkZHJlc3NEaWN0ID0ge30gYXMgUmVjb3JkPEtleXBhaXJUeXBlLCBzdHJpbmc+O1xuICAgIGxldCBjaGFuZ2VkQWNjb3VudCA9IGZhbHNlO1xuICAgIGNvbnN0IGhhc01hc3RlclBhc3N3b3JkID0ga2V5cmluZy5rZXlyaW5nLmhhc01hc3RlclBhc3N3b3JkO1xuXG4gICAgaWYgKCFoYXNNYXN0ZXJQYXNzd29yZCkge1xuICAgICAgaWYgKCFwYXNzd29yZCkge1xuICAgICAgICB0aHJvdyBFcnJvcih0KCdUaGUgcGFzc3dvcmQgb2YgZWFjaCBhY2NvdW50IGlzIG5lZWRlZCB0byBzZXQgdXAgbWFzdGVyIHBhc3N3b3JkJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAga2V5cmluZy5jaGFuZ2VNYXN0ZXJQYXNzd29yZChwYXNzd29yZCk7XG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS51cGRhdGVLZXlyaW5nU3RhdGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50QWNjb3VudCA9IHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudDtcbiAgICBjb25zdCBhbGxHZW5lc2lzSGFzaCA9IGN1cnJlbnRBY2NvdW50Py5hbGxHZW5lc2lzSGFzaCB8fCB1bmRlZmluZWQ7XG5cbiAgICB0eXBlcz8uZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgY29uc3Qgc3VyaSA9IGdldFN1cmkoX3N1cmksIHR5cGUpO1xuICAgICAgY29uc3QgYWRkcmVzcyA9IGtleXJpbmcuY3JlYXRlRnJvbVVyaShzdXJpLCB7fSwgdHlwZSkuYWRkcmVzcztcblxuICAgICAgYWRkcmVzc0RpY3RbdHlwZV0gPSBhZGRyZXNzO1xuICAgICAgY29uc3QgbmV3QWNjb3VudE5hbWUgPSB0eXBlID09PSAnZXRoZXJldW0nID8gYCR7bmFtZX0gLSBFVk1gIDogbmFtZTtcblxuICAgICAga2V5cmluZy5hZGRVcmkoc3VyaSwgeyBnZW5lc2lzSGFzaCwgbmFtZTogbmV3QWNjb3VudE5hbWUgfSwgdHlwZSk7XG4gICAgICB0aGlzLl9hZGRBZGRyZXNzVG9BdXRoTGlzdChhZGRyZXNzLCBpc0FsbG93ZWQpO1xuXG4gICAgICBpZiAoIWNoYW5nZWRBY2NvdW50KSB7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB0aGlzLiNrb25pU3RhdGUuc2V0Q3VycmVudEFjY291bnQoeyBhZGRyZXNzLCBjdXJyZW50R2VuZXNpc0hhc2g6IGdlbmVzaXNIYXNoIHx8IG51bGwsIGFsbEdlbmVzaXNIYXNoIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRDdXJyZW50QWNjb3VudCh7XG4gICAgICAgICAgICBhZGRyZXNzOiBBTExfQUNDT1VOVF9LRVksXG4gICAgICAgICAgICBjdXJyZW50R2VuZXNpc0hhc2g6IGFsbEdlbmVzaXNIYXNoIHx8IG51bGwsXG4gICAgICAgICAgICBhbGxHZW5lc2lzSGFzaFxuICAgICAgICAgIH0sIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjaGFuZ2VkQWNjb3VudCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy4ja29uaVN0YXRlLmFkZEFjY291bnRSZWYoT2JqZWN0LnZhbHVlcyhhZGRyZXNzRGljdCksICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy4jYWx3YXlzTG9jaykge1xuICAgICAgdGhpcy5rZXlyaW5nTG9jaygpO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRyZXNzRGljdDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYWNjb3VudHNGb3JnZXRPdmVycmlkZSAoeyBhZGRyZXNzLCBsb2NrQWZ0ZXIgfTogUmVxdWVzdEFjY291bnRGb3JnZXQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBrZXlyaW5nLmZvcmdldEFjY291bnQoYWRkcmVzcyk7XG4gICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5yZW1vdmVBY2NvdW50UmVmKGFkZHJlc3MsICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgZnJvbSBhdXRoIGxpc3RcbiAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy4ja29uaVN0YXRlLmdldEF1dGhvcml6ZSgodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHZhbHVlICYmIE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGgpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaCgodXJsKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdmFsdWVbdXJsXS5pc0FsbG93ZWRNYXBbYWRkcmVzc107XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLiNrb25pU3RhdGUuc2V0QXV0aG9yaXplKHZhbHVlLCByZXNvbHZlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gU2V0IGN1cnJlbnQgYWNjb3VudCB0byBhbGwgYWNjb3VudFxuICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50QWNjb3VudEluZm8gPSB0aGlzLiNrb25pU3RhdGUua2V5cmluZ1NlcnZpY2UuY3VycmVudEFjY291bnQ7XG5cbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRDdXJyZW50QWNjb3VudCh7XG4gICAgICAgIGN1cnJlbnRHZW5lc2lzSGFzaDogY3VycmVudEFjY291bnRJbmZvPy5hbGxHZW5lc2lzSGFzaCB8fCBudWxsLFxuICAgICAgICBhZGRyZXNzOiBBTExfQUNDT1VOVF9LRVlcbiAgICAgIH0sIHJlc29sdmUpO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy4ja29uaVN0YXRlLmRpc2FibGVNYW50YVBheShhZGRyZXNzKTtcblxuICAgIGlmIChsb2NrQWZ0ZXIpIHtcbiAgICAgIHRoaXMuY2hlY2tMb2NrQWZ0ZXJNaWdyYXRlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHNlZWRDcmVhdGVWMiAoeyBsZW5ndGggPSBTRUVEX0RFRkFVTFRfTEVOR1RILFxuICAgIHNlZWQ6IF9zZWVkLFxuICAgIHR5cGVzIH06IFJlcXVlc3RTZWVkQ3JlYXRlVjIpOiBSZXNwb25zZVNlZWRDcmVhdGVWMiB7XG4gICAgY29uc3Qgc2VlZCA9IF9zZWVkIHx8IG1uZW1vbmljR2VuZXJhdGUobGVuZ3RoKTtcbiAgICBjb25zdCBycyA9IHsgc2VlZDogc2VlZCwgYWRkcmVzc01hcDoge30gfSBhcyBSZXNwb25zZVNlZWRDcmVhdGVWMjtcblxuICAgIHR5cGVzPy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgICBycy5hZGRyZXNzTWFwW3R5cGVdID0ga2V5cmluZy5jcmVhdGVGcm9tVXJpKGdldFN1cmkoc2VlZCwgdHlwZSksIHt9LCB0eXBlKS5hZGRyZXNzO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgcHJpdmF0ZSBzZWVkVmFsaWRhdGVWMiAoeyBzdXJpLCB0eXBlcyB9OiBSZXF1ZXN0U2VlZFZhbGlkYXRlVjIpOiBSZXNwb25zZVNlZWRWYWxpZGF0ZVYyIHtcbiAgICBjb25zdCB7IHBocmFzZSB9ID0ga2V5RXh0cmFjdFN1cmkoc3VyaSk7XG5cbiAgICBpZiAoaXNIZXgocGhyYXNlKSkge1xuICAgICAgYXNzZXJ0KGlzSGV4KHBocmFzZSwgMjU2KSwgdCgnSW52YWxpZCBzZWVkIHBocmFzZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHNhZGx5IGlzSGV4IGRldGVjdHMgYXMgc3RyaW5nLCBzbyB3ZSBuZWVkIGEgY2FzdCBoZXJlXG4gICAgICBhc3NlcnQoU0VFRF9MRU5HVEhTLmluY2x1ZGVzKChwaHJhc2UpLnNwbGl0KCcgJykubGVuZ3RoKSwgdCgnU2VlZCBwaHJhc2UgbmVlZHMgdG8gY29udGFpbiB7e3h9fSB3b3JkcycsIHsgcmVwbGFjZTogeyB4OiBTRUVEX0xFTkdUSFMuam9pbignLCAnKSB9IH0pKTtcbiAgICAgIGFzc2VydChtbmVtb25pY1ZhbGlkYXRlKHBocmFzZSksIHQoJ0ludmFsaWQgc2VlZCBwaHJhc2UuIFBsZWFzZSB0cnkgYWdhaW4uJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHJzID0geyBzZWVkOiBzdXJpLCBhZGRyZXNzTWFwOiB7fSB9IGFzIFJlc3BvbnNlU2VlZFZhbGlkYXRlVjI7XG5cbiAgICB0eXBlcyAmJiB0eXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgICBycy5hZGRyZXNzTWFwW3R5cGVdID0ga2V5cmluZy5jcmVhdGVGcm9tVXJpKGdldFN1cmkoc3VyaSwgdHlwZSksIHt9LCB0eXBlKS5hZGRyZXNzO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2hlY2tWYWxpZGF0ZVByaXZhdGVLZXkgKHsgc3VyaSxcbiAgICB0eXBlcyB9OiBSZXF1ZXN0U2VlZFZhbGlkYXRlVjIsIGF1dG9BZGRQcmVmaXggPSBmYWxzZSk6IFJlc3BvbnNlUHJpdmF0ZUtleVZhbGlkYXRlVjIge1xuICAgIGNvbnN0IHsgcGhyYXNlIH0gPSBrZXlFeHRyYWN0U3VyaShzdXJpKTtcbiAgICBjb25zdCBycyA9IHsgYXV0b0FkZFByZWZpeDogYXV0b0FkZFByZWZpeCwgYWRkcmVzc01hcDoge30gfSBhcyBSZXNwb25zZVByaXZhdGVLZXlWYWxpZGF0ZVYyO1xuXG4gICAgdHlwZXMgJiYgdHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgcnMuYWRkcmVzc01hcFt0eXBlXSA9ICcnO1xuICAgIH0pO1xuXG4gICAgaWYgKGlzSGV4KHBocmFzZSkgJiYgaXNIZXgocGhyYXNlLCAyNTYpKSB7XG4gICAgICB0eXBlcyAmJiB0eXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgICAgIHJzLmFkZHJlc3NNYXBbdHlwZV0gPSBrZXlyaW5nLmNyZWF0ZUZyb21VcmkoZ2V0U3VyaShzdXJpLCB0eXBlKSwge30sIHR5cGUpLmFkZHJlc3M7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcnMuYXV0b0FkZFByZWZpeCA9IGZhbHNlO1xuICAgICAgYXNzZXJ0KGZhbHNlLCB0KCdJbnZhbGlkIHByaXZhdGUga2V5LiBQbGVhc2UgdHJ5IGFnYWluLicpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBwcml2YXRlIG1ldGFtYXNrUHJpdmF0ZUtleVZhbGlkYXRlVjIgKHsgc3VyaSwgdHlwZXMgfTogUmVxdWVzdFNlZWRWYWxpZGF0ZVYyKTogUmVzcG9uc2VQcml2YXRlS2V5VmFsaWRhdGVWMiB7XG4gICAgY29uc3QgaXNWYWxpZFN1cmkgPSBzdXJpLnN0YXJ0c1dpdGgoJzB4Jyk7XG5cbiAgICBpZiAoaXNWYWxpZFN1cmkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1ZhbGlkYXRlUHJpdmF0ZUtleSh7IHN1cmksIHR5cGVzIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tWYWxpZGF0ZVByaXZhdGVLZXkoeyBzdXJpOiBgMHgke3N1cml9YCwgdHlwZXMgfSwgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkZXJpdmVWMiAocGFyZW50QWRkcmVzczogc3RyaW5nLCBzdXJpOiBzdHJpbmcsIG1ldGFkYXRhOiBLZXlyaW5nUGFpciRNZXRhKTogS2V5cmluZ1BhaXIge1xuICAgIGNvbnN0IHBhcmVudFBhaXIgPSBrZXlyaW5nLmdldFBhaXIocGFyZW50QWRkcmVzcyk7XG5cbiAgICBpZiAocGFyZW50UGFpci5pc0xvY2tlZCkge1xuICAgICAga2V5cmluZy51bmxvY2tQYWlyKHBhcmVudFBhaXIuYWRkcmVzcyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBwYXJlbnRQYWlyLmRlcml2ZShzdXJpLCBtZXRhZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodCgnXCJ7e3N1cml9fVwiIGlzIG5vdCBhIHZhbGlkIGRlcml2YXRpb24gcGF0aCcsIHsgcmVwbGFjZTogeyBzdXJpIH0gfSkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGVyaXZhdGlvbkNyZWF0ZVYyICh7IGdlbmVzaXNIYXNoLFxuICAgIGlzQWxsb3dlZCxcbiAgICBuYW1lLFxuICAgIHBhcmVudEFkZHJlc3MsXG4gICAgc3VyaSB9OiBSZXF1ZXN0RGVyaXZlQ3JlYXRlVjIpOiBib29sZWFuIHtcbiAgICBjb25zdCBjaGlsZFBhaXIgPSB0aGlzLmRlcml2ZVYyKHBhcmVudEFkZHJlc3MsIHN1cmksIHtcbiAgICAgIGdlbmVzaXNIYXNoLFxuICAgICAgbmFtZSxcbiAgICAgIHBhcmVudEFkZHJlc3MsXG4gICAgICBzdXJpXG4gICAgfSk7XG5cbiAgICBjb25zdCBhZGRyZXNzID0gY2hpbGRQYWlyLmFkZHJlc3M7XG5cbiAgICB0aGlzLl9zYXZlQ3VycmVudEFjY291bnRBZGRyZXNzKGFkZHJlc3MsICgpID0+IHtcbiAgICAgIGtleXJpbmcuYWRkUGFpcihjaGlsZFBhaXIsIHRydWUpO1xuICAgICAgdGhpcy5fYWRkQWRkcmVzc1RvQXV0aExpc3QoYWRkcmVzcywgaXNBbGxvd2VkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBqc29uUmVzdG9yZVYyICh7IGFkZHJlc3MsIGZpbGUsIGlzQWxsb3dlZCwgcGFzc3dvcmQsIHdpdGhNYXN0ZXJQYXNzd29yZCB9OiBSZXF1ZXN0SnNvblJlc3RvcmVWMik6IHZvaWQge1xuICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZGF0ZWQgPSB0aGlzLnZhbGlkYXRlUGFzc3dvcmQoZmlsZSwgcGFzc3dvcmQpO1xuXG4gICAgaWYgKGlzUGFzc3dvcmRWYWxpZGF0ZWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuX3NhdmVDdXJyZW50QWNjb3VudEFkZHJlc3MoYWRkcmVzcywgKCkgPT4ge1xuICAgICAgICAgIGtleXJpbmcucmVzdG9yZUFjY291bnQoZmlsZSwgcGFzc3dvcmQsIHdpdGhNYXN0ZXJQYXNzd29yZCk7XG4gICAgICAgICAgdGhpcy5fYWRkQWRkcmVzc1RvQXV0aExpc3QoYWRkcmVzcywgaXNBbGxvd2VkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuI2Fsd2F5c0xvY2spIHtcbiAgICAgICAgICB0aGlzLmtleXJpbmdMb2NrKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodCgnV3JvbmcgcGFzc3dvcmQnKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBiYXRjaFJlc3RvcmVWMiAoeyBhY2NvdW50c0luZm8sIGZpbGUsIGlzQWxsb3dlZCwgcGFzc3dvcmQgfTogUmVxdWVzdEJhdGNoUmVzdG9yZVYyKTogdm9pZCB7XG4gICAgY29uc3QgYWRkcmVzc0xpc3Q6IHN0cmluZ1tdID0gYWNjb3VudHNJbmZvLm1hcCgoYWNjKSA9PiBhY2MuYWRkcmVzcyk7XG4gICAgY29uc3QgaXNQYXNzd29yZFZhbGlkYXRlZCA9IHRoaXMudmFsaWRhdGVkQWNjb3VudHNQYXNzd29yZChmaWxlLCBwYXNzd29yZCk7XG5cbiAgICBpZiAoaXNQYXNzd29yZFZhbGlkYXRlZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5fc2F2ZUN1cnJlbnRBY2NvdW50QWRkcmVzcyhBTExfQUNDT1VOVF9LRVksICgpID0+IHtcbiAgICAgICAgICBrZXlyaW5nLnJlc3RvcmVBY2NvdW50cyhmaWxlLCBwYXNzd29yZCk7XG4gICAgICAgICAgdGhpcy5fYWRkQWRkcmVzc2VzVG9BdXRoTGlzdChhZGRyZXNzTGlzdCwgaXNBbGxvd2VkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gaWYgKHRoaXMuI2Fsd2F5c0xvY2spIHtcbiAgICAgICAgLy8gICB0aGlzLmtleXJpbmdMb2NrKCk7XG4gICAgICAgIC8vIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodCgnV3JvbmcgcGFzc3dvcmQnKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXROZnRDb2xsZWN0aW9uICgpOiBQcm9taXNlPE5mdENvbGxlY3Rpb25bXT4ge1xuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUuZ2V0TmZ0Q29sbGVjdGlvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVOZnRDb2xsZWN0aW9uIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxOZnRDb2xsZWN0aW9uW10+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKG5mdENvbGxlY3Rpb24uZ2V0U3Vic2NyaXB0aW9uKSc+KGlkLCBwb3J0KTtcbiAgICBjb25zdCBuZnRDb2xsZWN0aW9uU3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZU5mdENvbGxlY3Rpb24oKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIG5mdENvbGxlY3Rpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0TmZ0Q29sbGVjdGlvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXROZnQgKCk6IFByb21pc2U8TmZ0SnNvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUuZ2V0TmZ0KCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1YnNjcmliZU5mdCAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8TmZ0SnNvbiB8IG51bGwgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKG5mdC5nZXRTdWJzY3JpcHRpb24pJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IG5mdFN1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5zdWJzY3JpYmVOZnQoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIG5mdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5nZXROZnQoKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U3Rha2luZ1Jld2FyZCAoKTogUHJvbWlzZTxTdGFraW5nUmV3YXJkSnNvbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxTdGFraW5nUmV3YXJkSnNvbj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4ja29uaVN0YXRlLmdldFN0YWtpbmdSZXdhcmQoKHJzOiBTdGFraW5nUmV3YXJkSnNvbikgPT4ge1xuICAgICAgICByZXNvbHZlKHJzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVTdGFraW5nUmV3YXJkIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxTdGFraW5nUmV3YXJkSnNvbiB8IG51bGw+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKHN0YWtpbmdSZXdhcmQuZ2V0U3Vic2NyaXB0aW9uKSc+KGlkLCBwb3J0KTtcbiAgICBjb25zdCBzdGFraW5nUmV3YXJkU3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZVN0YWtpbmdSZXdhcmQoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIHN0YWtpbmdSZXdhcmRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0U3Rha2luZ1Jld2FyZCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRTdGFraW5nICgpOiBQcm9taXNlPFN0YWtpbmdKc29uPiB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5nZXRTdGFraW5nKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1YnNjcmliZVN0YWtpbmcgKGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBQcm9taXNlPFN0YWtpbmdKc29uPiB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShzdGFraW5nLmdldFN1YnNjcmlwdGlvbiknPihpZCwgcG9ydCk7XG4gICAgY29uc3Qgc3Rha2luZ1N1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5zdWJzY3JpYmVTdGFraW5nKCkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChycykgPT4ge1xuICAgICAgICBjYihycyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCBzdGFraW5nU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFN0YWtpbmcoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3Vic2NyaWJlSGlzdG9yeSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8VHJhbnNhY3Rpb25IaXN0b3J5SXRlbVtdPiB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaSh0cmFuc2FjdGlvbi5oaXN0b3J5LmdldFN1YnNjcmlwdGlvbiknPihpZCwgcG9ydCk7XG5cbiAgICBjb25zdCBoaXN0b3J5U3ViamVjdCA9IGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5oaXN0b3J5U2VydmljZS5nZXRIaXN0b3J5U3ViamVjdCgpO1xuXG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gaGlzdG9yeVN1YmplY3Quc3Vic2NyaWJlKChoaXN0b3JpZXMpID0+IHtcbiAgICAgIGNvbnN0IGFkZHJlc3NlcyA9IGtleXJpbmcuZ2V0QWNjb3VudHMoKS5tYXAoKGEpID0+IGEuYWRkcmVzcyk7XG5cbiAgICAgIC8vIFJlLWZpbHRlclxuICAgICAgY2IoaGlzdG9yaWVzLmZpbHRlcigoaXRlbSkgPT4gYWRkcmVzc2VzLnNvbWUoKGFkZHJlc3MpID0+IGlzU2FtZUFkZHJlc3MoaXRlbS5hZGRyZXNzLCBhZGRyZXNzKSkpKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBhZGRyZXNzZXMgPSBrZXlyaW5nLmdldEFjY291bnRzKCkubWFwKChhKSA9PiBhLmFkZHJlc3MpO1xuXG4gICAgLy8gUmUtZmlsdGVyXG4gICAgcmV0dXJuIGhpc3RvcnlTdWJqZWN0LmdldFZhbHVlKCkuZmlsdGVyKChpdGVtKSA9PiBhZGRyZXNzZXMuc29tZSgoYWRkcmVzcykgPT4gaXNTYW1lQWRkcmVzcyhpdGVtLmFkZHJlc3MsIGFkZHJlc3MpKSk7XG4gIH1cblxuICAvLyBTYXZlIGFkZHJlc3MgdG8gY29udGFjdFxuICAvLyBwcml2YXRlIGFkZENvbnRhY3QgKHRvOiBzdHJpbmcpIHtcbiAgLy8gICBjb25zdCB0b0FkZHJlc3MgPSByZWZvcm1hdEFkZHJlc3ModG8pO1xuICAvLyAgIGNvbnN0IGFjY291bnQgPSBrZXlyaW5nLmdldEFjY291bnQodG9BZGRyZXNzKTtcbiAgLy8gICBjb25zdCBjb250YWN0ID0ga2V5cmluZy5nZXRBZGRyZXNzKHRvQWRkcmVzcyk7XG4gIC8vXG4gIC8vICAgaWYgKCFhY2NvdW50ICYmICghY29udGFjdCB8fCBjb250YWN0Lm1ldGEuaXNSZWNlbnQpKSB7XG4gIC8vICAgICBrZXlyaW5nLnNhdmVBZGRyZXNzKHRvQWRkcmVzcywge30pO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVUcmFuc2ZlciAodG9rZW5TbHVnOiBzdHJpbmcsIGZyb206IHN0cmluZywgdG86IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgdHJhbnNmZXJBbGw6IGJvb2xlYW4gfCB1bmRlZmluZWQpOiBbVHJhbnNhY3Rpb25FcnJvcltdLCBLZXlyaW5nUGFpciB8IHVuZGVmaW5lZCwgQk4gfCB1bmRlZmluZWQsIF9DaGFpbkFzc2V0XSB7XG4gICAgY29uc3QgZXJyb3JzOiBUcmFuc2FjdGlvbkVycm9yW10gPSBbXTtcbiAgICBjb25zdCBrZXlwYWlyID0ga2V5cmluZy5nZXRQYWlyKGZyb20pO1xuICAgIGxldCB0cmFuc2ZlclZhbHVlO1xuXG4gICAgaWYgKCF0cmFuc2ZlckFsbCkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5JTlZBTElEX1BBUkFNUywgdCgnVHJhbnNmZXIgYW1vdW50IGlzIHJlcXVpcmVkJykpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZmVyVmFsdWUgPSBuZXcgQk4odmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRva2VuSW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRBc3NldEJ5U2x1Zyh0b2tlblNsdWcpO1xuXG4gICAgaWYgKCF0b2tlbkluZm8pIHtcbiAgICAgIGVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsIHQoJ05vdCBmb3VuZCB0b2tlbiBmcm9tIHJlZ2lzdHJ5JykpKTtcbiAgICB9XG5cbiAgICBpZiAoaXNFdGhlcmV1bUFkZHJlc3MoZnJvbSkgJiYgaXNFdGhlcmV1bUFkZHJlc3ModG8pICYmIF9pc1Rva2VuRXZtU21hcnRDb250cmFjdCh0b2tlbkluZm8pICYmIF9nZXRDb250cmFjdEFkZHJlc3NPZlRva2VuKHRva2VuSW5mbykubGVuZ3RoID09PSAwKSB7XG4gICAgICBlcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLklOVkFMSURfUEFSQU1TLCB0KCdOb3QgZm91bmQgRVJDMjAgYWRkcmVzcyBmb3IgdGhpcyB0b2tlbicpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtlcnJvcnMsIGtleXBhaXIsIHRyYW5zZmVyVmFsdWUsIHRva2VuSW5mb107XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VUcmFuc2ZlciAoaW5wdXREYXRhOiBSZXF1ZXN0VHJhbnNmZXIpOiBQcm9taXNlPFNXVHJhbnNhY3Rpb25SZXNwb25zZT4ge1xuICAgIGNvbnN0IHsgZnJvbSwgbmV0d29ya0tleSwgdG8sIHRva2VuU2x1ZywgdHJhbnNmZXJBbGwsIHZhbHVlIH0gPSBpbnB1dERhdGE7XG4gICAgY29uc3QgW2Vycm9ycywgLCAsIHRva2VuSW5mb10gPSB0aGlzLnZhbGlkYXRlVHJhbnNmZXIodG9rZW5TbHVnLCBmcm9tLCB0bywgdmFsdWUsIHRyYW5zZmVyQWxsKTtcblxuICAgIGNvbnN0IHdhcm5pbmdzOiBUcmFuc2FjdGlvbldhcm5pbmdbXSA9IFtdO1xuICAgIGNvbnN0IGV2bUFwaU1hcCA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRFdm1BcGlNYXAoKTtcbiAgICBjb25zdCBjaGFpbkluZm8gPSB0aGlzLiNrb25pU3RhdGUuZ2V0Q2hhaW5JbmZvKG5ldHdvcmtLZXkpO1xuXG4gICAgY29uc3QgbmF0aXZlVG9rZW5JbmZvID0gdGhpcy4ja29uaVN0YXRlLmdldE5hdGl2ZVRva2VuSW5mbyhuZXR3b3JrS2V5KTtcbiAgICBjb25zdCBuYXRpdmVUb2tlblNsdWc6IHN0cmluZyA9IG5hdGl2ZVRva2VuSW5mby5zbHVnO1xuICAgIGNvbnN0IGlzVHJhbnNmZXJOYXRpdmVUb2tlbiA9IG5hdGl2ZVRva2VuU2x1ZyA9PT0gdG9rZW5TbHVnO1xuICAgIGxldCBjaGFpblR5cGUgPSBDaGFpblR5cGUuU1VCU1RSQVRFO1xuXG4gICAgY29uc3QgdG9rZW5CYXNlQW1vdW50OiBBbW91bnREYXRhID0geyB2YWx1ZTogJzAnLCBzeW1ib2w6IHRva2VuSW5mby5zeW1ib2wsIGRlY2ltYWxzOiB0b2tlbkluZm8uZGVjaW1hbHMgfHwgMCB9O1xuICAgIGNvbnN0IHRyYW5zZmVyQW1vdW50OiBBbW91bnREYXRhID0geyAuLi50b2tlbkJhc2VBbW91bnQgfTtcblxuICAgIGxldCB0cmFuc2FjdGlvbjogVmFsaWRhdGVUcmFuc2FjdGlvblJlc3BvbnNlSW5wdXRbJ3RyYW5zYWN0aW9uJ107XG5cbiAgICAvLyBHZXQgbmF0aXZlIHRva2VuIGFtb3VudFxuICAgIGNvbnN0IGZyZWVCYWxhbmNlID0gYXdhaXQgdGhpcy5nZXRBZGRyZXNzRnJlZUJhbGFuY2UoeyBhZGRyZXNzOiBmcm9tLCBuZXR3b3JrS2V5LCB0b2tlbjogdG9rZW5TbHVnIH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChpc0V0aGVyZXVtQWRkcmVzcyhmcm9tKSAmJiBpc0V0aGVyZXVtQWRkcmVzcyh0bykgJiYgX2lzVG9rZW5UcmFuc2ZlcnJlZEJ5RXZtKHRva2VuSW5mbykpIHsgLy8gVE9ETzogcmV2aWV3IHRoaXNcbiAgICAgICAgY2hhaW5UeXBlID0gQ2hhaW5UeXBlLkVWTTtcbiAgICAgICAgY29uc3QgdHhWYWw6IHN0cmluZyA9IHRyYW5zZmVyQWxsID8gZnJlZUJhbGFuY2UudmFsdWUgOiAodmFsdWUgfHwgJzAnKTtcblxuICAgICAgICAvLyBFc3RpbWF0ZSB3aXRoIEVWTSBBUElcbiAgICAgICAgaWYgKF9pc1Rva2VuRXZtU21hcnRDb250cmFjdCh0b2tlbkluZm8pIHx8IF9pc0xvY2FsVG9rZW4odG9rZW5JbmZvKSkge1xuICAgICAgICAgIFtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgdHJhbnNmZXJBbW91bnQudmFsdWVcbiAgICAgICAgICBdID0gYXdhaXQgZ2V0RVJDMjBUcmFuc2FjdGlvbk9iamVjdChfZ2V0Q29udHJhY3RBZGRyZXNzT2ZUb2tlbih0b2tlbkluZm8pLCBjaGFpbkluZm8sIGZyb20sIHRvLCB0eFZhbCwgISF0cmFuc2ZlckFsbCwgZXZtQXBpTWFwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBbXG4gICAgICAgICAgICB0cmFuc2FjdGlvbixcbiAgICAgICAgICAgIHRyYW5zZmVyQW1vdW50LnZhbHVlXG4gICAgICAgICAgXSA9IGF3YWl0IGdldEVWTVRyYW5zYWN0aW9uT2JqZWN0KGNoYWluSW5mbywgZnJvbSwgdG8sIHR4VmFsLCAhIXRyYW5zZmVyQWxsLCBldm1BcGlNYXApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKF9pc01hbnRhWmtBc3NldCh0b2tlbkluZm8pKSB7IC8vIFRPRE9cbiAgICAgICAgdHJhbnNhY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRyYW5zZmVyQW1vdW50LnZhbHVlID0gJzAnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3Vic3RyYXRlQXBpID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShuZXR3b3JrS2V5KTtcblxuICAgICAgICBbdHJhbnNhY3Rpb24sIHRyYW5zZmVyQW1vdW50LnZhbHVlXSA9IGF3YWl0IGNyZWF0ZVRyYW5zZmVyRXh0cmluc2ljKHtcbiAgICAgICAgICB0cmFuc2ZlckFsbDogISF0cmFuc2ZlckFsbCxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUgfHwgJzAnLFxuICAgICAgICAgIGZyb206IGZyb20sXG4gICAgICAgICAgbmV0d29ya0tleSxcbiAgICAgICAgICB0b2tlbkluZm8sXG4gICAgICAgICAgdG86IHRvLFxuICAgICAgICAgIHN1YnN0cmF0ZUFwaVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCBlcnJvciA9IGUgYXMgRXJyb3I7XG5cbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd0cmFuc2ZlciBhbW91bnQgZXhjZWVkcyBiYWxhbmNlJykpIHtcbiAgICAgICAgZXJyb3IubWVzc2FnZSA9IHQoJ0luc3VmZmljaWVudCBiYWxhbmNlJyk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIGNvbnN0IHRyYW5zZmVyTmF0aXZlQW1vdW50ID0gaXNUcmFuc2Zlck5hdGl2ZVRva2VuID8gdHJhbnNmZXJBbW91bnQudmFsdWUgOiAnMCc7XG5cbiAgICAvLyB0aGlzLmFkZENvbnRhY3QodG8pO1xuXG4gICAgY29uc3QgYWRkaXRpb25hbFZhbGlkYXRvciA9IGFzeW5jIChpbnB1dFRyYW5zYWN0aW9uOiBTV1RyYW5zYWN0aW9uUmVzcG9uc2UpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGNvbnN0IG1pbkFtb3VudCA9IHRva2VuSW5mby5taW5BbW91bnQgfHwgJzAnO1xuXG4gICAgICAvLyBDaGVjayBlZCBmb3Igc2VuZGVyXG4gICAgICBpZiAoIWlzVHJhbnNmZXJOYXRpdmVUb2tlbikge1xuICAgICAgICBjb25zdCB7IHZhbHVlOiBiYWxhbmNlIH0gPSBhd2FpdCB0aGlzLmdldEFkZHJlc3NGcmVlQmFsYW5jZSh7IGFkZHJlc3M6IGZyb20sIG5ldHdvcmtLZXksIHRva2VuOiB0b2tlblNsdWcgfSk7XG5cbiAgICAgICAgaWYgKG5ldyBCaWdOKGJhbGFuY2UpLm1pbnVzKHRyYW5zZmVyQW1vdW50LnZhbHVlKS5sdChtaW5BbW91bnQpKSB7XG4gICAgICAgICAgaW5wdXRUcmFuc2FjdGlvbi53YXJuaW5ncy5wdXNoKG5ldyBUcmFuc2FjdGlvbldhcm5pbmcoQmFzaWNUeFdhcm5pbmdDb2RlLk5PVF9FTk9VR0hfRVhJU1RFTlRJQUxfREVQT1NJVCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgdmFsdWU6IHJlY2VpdmVyQmFsYW5jZSB9ID0gYXdhaXQgdGhpcy5nZXRBZGRyZXNzRnJlZUJhbGFuY2UoeyBhZGRyZXNzOiB0bywgbmV0d29ya0tleSwgdG9rZW46IHRva2VuU2x1ZyB9KTtcblxuICAgICAgLy8gQ2hlY2sgZWQgZm9yIHJlY2VpdmVyXG4gICAgICBpZiAobmV3IEJpZ04ocmVjZWl2ZXJCYWxhbmNlKS5wbHVzKHRyYW5zZmVyQW1vdW50LnZhbHVlKS5sdChtaW5BbW91bnQpKSB7XG4gICAgICAgIGNvbnN0IGF0TGVhc3QgPSBuZXcgQmlnTihtaW5BbW91bnQpLm1pbnVzKHJlY2VpdmVyQmFsYW5jZSkucGx1cygodG9rZW5JbmZvLmRlY2ltYWxzIHx8IDApID09PSAwID8gMCA6IDEpO1xuXG4gICAgICAgIGNvbnN0IGF0TGVhc3RTdHIgPSBmb3JtYXROdW1iZXIoYXRMZWFzdCwgdG9rZW5JbmZvLmRlY2ltYWxzIHx8IDAsIGJhbGFuY2VGb3JtYXR0ZXIpO1xuXG4gICAgICAgIGlucHV0VHJhbnNhY3Rpb24uZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoVHJhbnNmZXJUeEVycm9yVHlwZS5SRUNFSVZFUl9OT1RfRU5PVUdIX0VYSVNURU5USUFMX0RFUE9TSVQsIHQoJ1lvdSBtdXN0IHRyYW5zZmVyIGF0IGxlYXN0IHt7YW1vdW50fX17e3N5bWJvbH19IHRvIGtlZXAgdGhlIGRlc3RpbmF0aW9uIGFjY291bnQgYWxpdmUnLCB7IHJlcGxhY2U6IHsgYW1vdW50OiBhdExlYXN0U3RyLCBzeW1ib2w6IHRva2VuSW5mby5zeW1ib2wgfSB9KSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnRyYW5zYWN0aW9uU2VydmljZS5oYW5kbGVUcmFuc2FjdGlvbih7XG4gICAgICBlcnJvcnMsXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIGFkZHJlc3M6IGZyb20sXG4gICAgICBjaGFpbjogbmV0d29ya0tleSxcbiAgICAgIGNoYWluVHlwZSxcbiAgICAgIHRyYW5zZmVyTmF0aXZlQW1vdW50LFxuICAgICAgdHJhbnNhY3Rpb24sXG4gICAgICBkYXRhOiBpbnB1dERhdGEsXG4gICAgICBleHRyaW5zaWNUeXBlOiBpc1RyYW5zZmVyTmF0aXZlVG9rZW4gPyBFeHRyaW5zaWNUeXBlLlRSQU5TRkVSX0JBTEFOQ0UgOiBFeHRyaW5zaWNUeXBlLlRSQU5TRkVSX1RPS0VOLFxuICAgICAgaWdub3JlV2FybmluZ3M6IHRyYW5zZmVyQWxsLFxuICAgICAgaXNUcmFuc2ZlckFsbDogaXNUcmFuc2Zlck5hdGl2ZVRva2VuID8gdHJhbnNmZXJBbGwgOiBmYWxzZSxcbiAgICAgIGVkQXNXYXJuaW5nOiBpc1RyYW5zZmVyTmF0aXZlVG9rZW4sXG4gICAgICBhZGRpdGlvbmFsVmFsaWRhdG9yOiBhZGRpdGlvbmFsVmFsaWRhdG9yXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlQ3Jvc3NDaGFpblRyYW5zZmVyIChcbiAgICBkZXN0aW5hdGlvbk5ldHdvcmtLZXk6IHN0cmluZyxcbiAgICBzZW5kaW5nVG9rZW5TbHVnOiBzdHJpbmcsXG4gICAgc2VuZGVyOiBzdHJpbmcsXG4gICAgc2VuZGluZ1ZhbHVlOiBzdHJpbmcpOiBbVHJhbnNhY3Rpb25FcnJvcltdLCBLZXlyaW5nUGFpciB8IHVuZGVmaW5lZCwgQk4gfCB1bmRlZmluZWQsIF9DaGFpbkFzc2V0LCBfQ2hhaW5Bc3NldCB8IHVuZGVmaW5lZF0ge1xuICAgIGNvbnN0IGVycm9ycyA9IFtdIGFzIFRyYW5zYWN0aW9uRXJyb3JbXTtcbiAgICBjb25zdCBrZXlwYWlyID0ga2V5cmluZy5nZXRQYWlyKHNlbmRlcik7XG4gICAgY29uc3QgdHJhbnNmZXJWYWx1ZSA9IG5ldyBCTihzZW5kaW5nVmFsdWUpO1xuXG4gICAgY29uc3Qgb3JpZ2luVG9rZW5JbmZvID0gdGhpcy4ja29uaVN0YXRlLmdldEFzc2V0QnlTbHVnKHNlbmRpbmdUb2tlblNsdWcpO1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uVG9rZW5JbmZvID0gdGhpcy4ja29uaVN0YXRlLmdldFhjbUVxdWFsQXNzZXRCeUNoYWluKGRlc3RpbmF0aW9uTmV0d29ya0tleSwgc2VuZGluZ1Rva2VuU2x1Zyk7XG5cbiAgICBpZiAoIWRlc3RpbmF0aW9uVG9rZW5JbmZvKSB7XG4gICAgICBlcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihUcmFuc2ZlclR4RXJyb3JUeXBlLklOVkFMSURfVE9LRU4sIHQoJ05vdCBmb3VuZCB0b2tlbiBmcm9tIHJlZ2lzdHJ5JykpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2Vycm9ycywga2V5cGFpciwgdHJhbnNmZXJWYWx1ZSwgb3JpZ2luVG9rZW5JbmZvLCBkZXN0aW5hdGlvblRva2VuSW5mb107XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VDcm9zc0NoYWluVHJhbnNmZXIgKGlucHV0RGF0YTogUmVxdWVzdENyb3NzQ2hhaW5UcmFuc2Zlcik6IFByb21pc2U8U1dUcmFuc2FjdGlvblJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyBkZXN0aW5hdGlvbk5ldHdvcmtLZXksIGZyb20sIG9yaWdpbk5ldHdvcmtLZXksIHRvLCB0b2tlblNsdWcsIHZhbHVlIH0gPSBpbnB1dERhdGE7XG4gICAgY29uc3QgW2Vycm9ycywgZnJvbUtleVBhaXIsICwgb3JpZ2luVG9rZW5JbmZvLCBkZXN0aW5hdGlvblRva2VuSW5mb10gPSB0aGlzLnZhbGlkYXRlQ3Jvc3NDaGFpblRyYW5zZmVyKGRlc3RpbmF0aW9uTmV0d29ya0tleSwgdG9rZW5TbHVnLCBmcm9tLCB2YWx1ZSk7XG4gICAgbGV0IGV4dHJpbnNpYzogU3VibWl0dGFibGVFeHRyaW5zaWM8J3Byb21pc2UnPiB8IG51bGwgPSBudWxsO1xuXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnRyYW5zYWN0aW9uU2VydmljZS5nZW5lcmF0ZUJlZm9yZUhhbmRsZVJlc3BvbnNlRXJyb3JzKGVycm9ycyk7XG4gICAgfVxuXG4gICAgbGV0IGFkZGl0aW9uYWxWYWxpZGF0b3I6IHVuZGVmaW5lZCB8ICgoaW5wdXRUcmFuc2FjdGlvbjogU1dUcmFuc2FjdGlvblJlc3BvbnNlKSA9PiBQcm9taXNlPHZvaWQ+KTtcbiAgICBsZXQgZXZlbnRzSGFuZGxlcjogdW5kZWZpbmVkIHwgKChldmVudEVtaXR0ZXI6IFRyYW5zYWN0aW9uRW1pdHRlcikgPT4gdm9pZCk7XG5cbiAgICBpZiAoZnJvbUtleVBhaXIgJiYgZGVzdGluYXRpb25Ub2tlbkluZm8pIHtcbiAgICAgIGNvbnN0IHN1YnN0cmF0ZUFwaSA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRTdWJzdHJhdGVBcGkob3JpZ2luTmV0d29ya0tleSk7XG4gICAgICBjb25zdCBjaGFpbkluZm9NYXAgPSB0aGlzLiNrb25pU3RhdGUuZ2V0Q2hhaW5JbmZvTWFwKCk7XG5cbiAgICAgIGV4dHJpbnNpYyA9IGF3YWl0IGNyZWF0ZVhjbUV4dHJpbnNpYyh7XG4gICAgICAgIGRlc3RpbmF0aW9uVG9rZW5JbmZvLFxuICAgICAgICBvcmlnaW5Ub2tlbkluZm8sXG4gICAgICAgIHNlbmRpbmdWYWx1ZTogdmFsdWUsXG4gICAgICAgIHJlY2lwaWVudDogdG8sXG4gICAgICAgIGNoYWluSW5mb01hcCxcbiAgICAgICAgc3Vic3RyYXRlQXBpXG4gICAgICB9KTtcblxuICAgICAgYWRkaXRpb25hbFZhbGlkYXRvciA9IGFzeW5jIChpbnB1dFRyYW5zYWN0aW9uOiBTV1RyYW5zYWN0aW9uUmVzcG9uc2UpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgY29uc3QgZGVzdE1pbkFtb3VudCA9IGRlc3RpbmF0aW9uVG9rZW5JbmZvLm1pbkFtb3VudCB8fCAnMCc7XG4gICAgICAgIGNvbnN0IGF0TGVhc3QgPSBuZXcgQmlnTihkZXN0TWluQW1vdW50KS5tdWx0aXBsaWVkQnkoWENNX01JTl9BTU9VTlRfUkFUSU8pO1xuXG4gICAgICAgIC8vIENoZWNrIGVkIGZvciByZWNlaXZlclxuICAgICAgICBpZiAobmV3IEJpZ04odmFsdWUpLmx0KGF0TGVhc3QpKSB7XG4gICAgICAgICAgY29uc3QgYXRMZWFzdFN0ciA9IGZvcm1hdE51bWJlcihhdExlYXN0LCBkZXN0aW5hdGlvblRva2VuSW5mby5kZWNpbWFscyB8fCAwLCBiYWxhbmNlRm9ybWF0dGVyKTtcblxuICAgICAgICAgIGlucHV0VHJhbnNhY3Rpb24uZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoVHJhbnNmZXJUeEVycm9yVHlwZS5SRUNFSVZFUl9OT1RfRU5PVUdIX0VYSVNURU5USUFMX0RFUE9TSVQsIHQoJ1lvdSBtdXN0IHRyYW5zZmVyIGF0IGxlYXN0IHt7YW1vdW50fX17e3N5bWJvbH19IHRvIGtlZXAgdGhlIGRlc3RpbmF0aW9uIGFjY291bnQgYWxpdmUnLCB7IHJlcGxhY2U6IHsgYW1vdW50OiBhdExlYXN0U3RyLCBzeW1ib2w6IG9yaWdpblRva2VuSW5mby5zeW1ib2wgfSB9KSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3JjTWluQW1vdW50ID0gb3JpZ2luVG9rZW5JbmZvLm1pbkFtb3VudCB8fCAnMCc7XG4gICAgICAgIGNvbnN0IGlzVHJhbnNmZXJOYXRpdmVUb2tlbiA9IG9yaWdpblRva2VuSW5mby5hc3NldFR5cGUgPT09IF9Bc3NldFR5cGUuTkFUSVZFO1xuXG4gICAgICAgIC8vIENoZWNrIGVkIGZvciBzZW5kZXJcbiAgICAgICAgaWYgKCFpc1RyYW5zZmVyTmF0aXZlVG9rZW4pIHtcbiAgICAgICAgICBjb25zdCB7IHZhbHVlOiBiYWxhbmNlIH0gPSBhd2FpdCB0aGlzLmdldEFkZHJlc3NGcmVlQmFsYW5jZSh7IGFkZHJlc3M6IGZyb20sIG5ldHdvcmtLZXk6IG9yaWdpbk5ldHdvcmtLZXksIHRva2VuOiBvcmlnaW5Ub2tlbkluZm8uc2x1ZyB9KTtcblxuICAgICAgICAgIGlmIChuZXcgQmlnTihiYWxhbmNlKS5taW51cyh2YWx1ZSkubHQoc3JjTWluQW1vdW50KSkge1xuICAgICAgICAgICAgaW5wdXRUcmFuc2FjdGlvbi53YXJuaW5ncy5wdXNoKG5ldyBUcmFuc2FjdGlvbldhcm5pbmcoQmFzaWNUeFdhcm5pbmdDb2RlLk5PVF9FTk9VR0hfRVhJU1RFTlRJQUxfREVQT1NJVCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZXZlbnRzSGFuZGxlciA9IChldmVudEVtaXR0ZXI6IFRyYW5zYWN0aW9uRW1pdHRlcikgPT4ge1xuICAgICAgICBldmVudEVtaXR0ZXIub24oJ3NlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRlc3QgPSBrZXlyaW5nLmdldFBhaXIodG8pO1xuXG4gICAgICAgICAgICBpZiAoZGVzdCkge1xuICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFzc2V0U2V0dGluZyh7XG4gICAgICAgICAgICAgICAgYXV0b0VuYWJsZU5hdGl2ZVRva2VuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0b2tlblNsdWc6IGRlc3RpbmF0aW9uVG9rZW5JbmZvLnNsdWcsXG4gICAgICAgICAgICAgICAgYXNzZXRTZXR0aW5nOiB7IHZpc2libGU6IHRydWUgfVxuICAgICAgICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gdGhpcy5hZGRDb250YWN0KHRvKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmhhbmRsZVRyYW5zYWN0aW9uKHtcbiAgICAgIHVybDogRVhURU5TSU9OX1JFUVVFU1RfVVJMLFxuICAgICAgYWRkcmVzczogZnJvbSxcbiAgICAgIGNoYWluOiBvcmlnaW5OZXR3b3JrS2V5LFxuICAgICAgdHJhbnNhY3Rpb246IGV4dHJpbnNpYyxcbiAgICAgIGRhdGE6IGlucHV0RGF0YSxcbiAgICAgIGV4dHJpbnNpY1R5cGU6IEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfWENNLFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuU1VCU1RSQVRFLFxuICAgICAgdHJhbnNmZXJOYXRpdmVBbW91bnQ6IF9pc05hdGl2ZVRva2VuKG9yaWdpblRva2VuSW5mbykgPyB2YWx1ZSA6ICcwJyxcbiAgICAgIGlnbm9yZVdhcm5pbmdzOiBpbnB1dERhdGEudHJhbnNmZXJBbGwsXG4gICAgICBpc1RyYW5zZmVyQWxsOiBpbnB1dERhdGEudHJhbnNmZXJBbGwsXG4gICAgICBlcnJvcnMsXG4gICAgICBhZGRpdGlvbmFsVmFsaWRhdG9yOiBhZGRpdGlvbmFsVmFsaWRhdG9yLFxuICAgICAgZXZlbnRzSGFuZGxlcjogZXZlbnRzSGFuZGxlclxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBldm1OZnRTdWJtaXRUcmFuc2FjdGlvbiAoaW5wdXREYXRhOiBOZnRUcmFuc2FjdGlvblJlcXVlc3QpOiBQcm9taXNlPFNXVHJhbnNhY3Rpb25SZXNwb25zZT4ge1xuICAgIGNvbnN0IHsgbmV0d29ya0tleSwgcGFyYW1zLCByZWNpcGllbnRBZGRyZXNzLCBzZW5kZXJBZGRyZXNzIH0gPSBpbnB1dERhdGE7XG4gICAgY29uc3QgY29udHJhY3RBZGRyZXNzID0gcGFyYW1zLmNvbnRyYWN0QWRkcmVzcyBhcyBzdHJpbmc7XG4gICAgY29uc3QgdG9rZW5JZCA9IHBhcmFtcy50b2tlbklkIGFzIHN0cmluZztcblxuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgZ2V0RVJDNzIxVHJhbnNhY3Rpb24odGhpcy4ja29uaVN0YXRlLmdldEV2bUFwaShuZXR3b3JrS2V5KSwgY29udHJhY3RBZGRyZXNzLCBzZW5kZXJBZGRyZXNzLCByZWNpcGllbnRBZGRyZXNzLCB0b2tlbklkKTtcblxuICAgIC8vIHRoaXMuYWRkQ29udGFjdChyZWNpcGllbnRBZGRyZXNzKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmhhbmRsZVRyYW5zYWN0aW9uKHtcbiAgICAgIGFkZHJlc3M6IHNlbmRlckFkZHJlc3MsXG4gICAgICBjaGFpbjogbmV0d29ya0tleSxcbiAgICAgIGNoYWluVHlwZTogQ2hhaW5UeXBlLkVWTSxcbiAgICAgIGRhdGE6IGlucHV0RGF0YSxcbiAgICAgIGV4dHJpbnNpY1R5cGU6IEV4dHJpbnNpY1R5cGUuU0VORF9ORlQsXG4gICAgICB0cmFuc2FjdGlvbixcbiAgICAgIHVybDogRVhURU5TSU9OX1JFUVVFU1RfVVJMXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwc2VydENoYWluIChkYXRhOiBfTmV0d29ya1Vwc2VydFBhcmFtcyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLnVwc2VydENoYWluSW5mbyhkYXRhKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVDdXN0b21DaGFpbiAobmV0d29ya0tleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5yZW1vdmVDdXN0b21DaGFpbihuZXR3b3JrS2V5KTtcbiAgfVxuXG4gIHByaXZhdGUgZGlzYWJsZUNoYWluIChuZXR3b3JrS2V5OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmRpc2FibGVDaGFpbihuZXR3b3JrS2V5KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZW5hYmxlQ2hhaW4gKHsgY2hhaW5TbHVnLCBlbmFibGVUb2tlbnMgfTogRW5hYmxlQ2hhaW5QYXJhbXMpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmVuYWJsZUNoYWluKGNoYWluU2x1ZywgZW5hYmxlVG9rZW5zKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVjb25uZWN0Q2hhaW4gKGNoYWluU2x1Zzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2UucmVjb25uZWN0Q2hhaW4oY2hhaW5TbHVnKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVOZXR3b3JrICh7IGV4aXN0ZWRDaGFpblNsdWcsXG4gICAgcHJvdmlkZXIgfTogVmFsaWRhdGVOZXR3b3JrUmVxdWVzdCk6IFByb21pc2U8VmFsaWRhdGVOZXR3b3JrUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLnZhbGlkYXRlQ3VzdG9tQ2hhaW4ocHJvdmlkZXIsIGV4aXN0ZWRDaGFpblNsdWcpO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldERlZmF1bHROZXR3b3JrICgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnJlc2V0RGVmYXVsdENoYWlucygpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNvdmVyRG90U2FtYUFwaSAobmV0d29ya0tleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUucmVmcmVzaFN1YnN0cmF0ZUFwaShuZXR3b3JrS2V5KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cHNlcnRDdXN0b21Ub2tlbiAoZGF0YTogX0NoYWluQXNzZXQpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy4ja29uaVN0YXRlLnVwc2VydEN1c3RvbVRva2VuKGRhdGEpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVDdXN0b21Bc3NldCAoYXNzZXRTbHVnOiBzdHJpbmcpIHtcbiAgICBjb25zdCBhc3NldEluZm8gPSB0aGlzLiNrb25pU3RhdGUuZ2V0QXNzZXRCeVNsdWcoYXNzZXRTbHVnKTtcblxuICAgIGlmIChhc3NldEluZm8gJiYgX2lzQ3VzdG9tQXNzZXQoYXNzZXRTbHVnKSkge1xuICAgICAgaWYgKF9pc0Fzc2V0U21hcnRDb250cmFjdE5mdChhc3NldEluZm8pKSB7IC8vIGNoZWNrIGlmIGRlbGV0aW5nIGEgc21hcnQgY29udHJhY3QgTkZUXG4gICAgICAgIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5kZWxldGVOZnRDb2xsZWN0aW9uKGFzc2V0SW5mby5vcmlnaW5DaGFpbiwgX2dldENvbnRyYWN0QWRkcmVzc09mVG9rZW4oYXNzZXRJbmZvKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5kZWxldGVDdXN0b21Bc3NldHMoW2Fzc2V0U2x1Z10pO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlQ3VzdG9tQXNzZXQgKGRhdGE6IF9WYWxpZGF0ZUN1c3RvbUFzc2V0UmVxdWVzdCk6IFByb21pc2U8X1ZhbGlkYXRlQ3VzdG9tQXNzZXRSZXNwb25zZT4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUudmFsaWRhdGVDdXN0b21Bc3NldChkYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0QWRkcmVzc0ZyZWVCYWxhbmNlICh7IGFkZHJlc3MsIG5ldHdvcmtLZXksIHRva2VuIH06IFJlcXVlc3RGcmVlQmFsYW5jZSk6IFByb21pc2U8QW1vdW50RGF0YT4ge1xuICAgIGlmICh0b2tlbiAmJiBfTUFOVEFfWktfQ0hBSU5fR1JPVVAuaW5jbHVkZXMobmV0d29ya0tleSkpIHtcbiAgICAgIGNvbnN0IHRva2VuSW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2UuZ2V0QXNzZXRCeVNsdWcodG9rZW4pO1xuXG4gICAgICBpZiAodG9rZW5JbmZvLnN5bWJvbC5zdGFydHNXaXRoKF9aS19BU1NFVF9QUkVGSVgpKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUuZ2V0TWFudGFQYXlaa0JhbGFuY2UoYWRkcmVzcywgdG9rZW5JbmZvKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmJhbGFuY2VTZXJ2aWNlLmdldFRva2VuRnJlZUJhbGFuY2UoYWRkcmVzcywgbmV0d29ya0tleSwgdG9rZW4pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0cmFuc2ZlckdldE1heFRyYW5zZmVyYWJsZSAoeyBhZGRyZXNzLCBkZXN0Q2hhaW4sIGlzWGNtVHJhbnNmZXIsIG5ldHdvcmtLZXksIHRva2VuIH06IFJlcXVlc3RNYXhUcmFuc2ZlcmFibGUpOiBQcm9taXNlPEFtb3VudERhdGE+IHtcbiAgICBjb25zdCBmcmVlQmFsYW5jZSA9IGF3YWl0IHRoaXMuZ2V0QWRkcmVzc0ZyZWVCYWxhbmNlKHsgYWRkcmVzcywgbmV0d29ya0tleSwgdG9rZW4gfSk7XG4gICAgY29uc3QgdG9rZW5JbmZvID0gdG9rZW4gPyB0aGlzLiNrb25pU3RhdGUuY2hhaW5TZXJ2aWNlLmdldEFzc2V0QnlTbHVnKHRva2VuKSA6IHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2UuZ2V0TmF0aXZlVG9rZW5JbmZvKG5ldHdvcmtLZXkpO1xuXG4gICAgaWYgKCFfaXNOYXRpdmVUb2tlbih0b2tlbkluZm8pKSB7XG4gICAgICByZXR1cm4gZnJlZUJhbGFuY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN1YnN0cmF0ZUFwaSA9IHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2UuZ2V0U3Vic3RyYXRlQXBpKG5ldHdvcmtLZXkpO1xuICAgICAgbGV0IGVzdGltYXRlZEZlZTogc3RyaW5nO1xuICAgICAgbGV0IG1heFRyYW5zZmVyYWJsZSA9IG5ldyBCTihmcmVlQmFsYW5jZS52YWx1ZSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChpc1hjbVRyYW5zZmVyKSB7XG4gICAgICAgICAgY29uc3QgY2hhaW5JbmZvTWFwID0gdGhpcy4ja29uaVN0YXRlLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9NYXAoKTtcbiAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvblRva2VuSW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRYY21FcXVhbEFzc2V0QnlDaGFpbihkZXN0Q2hhaW4sIHRva2VuSW5mby5zbHVnKTtcblxuICAgICAgICAgIGlmICghZGVzdGluYXRpb25Ub2tlbkluZm8pIHtcbiAgICAgICAgICAgIGVzdGltYXRlZEZlZSA9ICcwJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF4VHJhbnNmZXJhYmxlID0gbWF4VHJhbnNmZXJhYmxlLnN1YihuZXcgQk4odG9rZW5JbmZvLm1pbkFtb3VudCB8fCAnMCcpKTtcbiAgICAgICAgICAgIGNvbnN0IGRlc0NoYWluSW5mbyA9IGNoYWluSW5mb01hcFtkZXN0Q2hhaW5dO1xuICAgICAgICAgICAgY29uc3Qgb3JnQ2hhaW5JbmZvID0gY2hhaW5JbmZvTWFwW25ldHdvcmtLZXldO1xuICAgICAgICAgICAgY29uc3QgcmVjaXBpZW50ID0gIWlzRXRoZXJldW1BZGRyZXNzKGFkZHJlc3MpICYmIF9pc0NoYWluRXZtQ29tcGF0aWJsZShkZXNDaGFpbkluZm8pICYmICFfaXNDaGFpbkV2bUNvbXBhdGlibGUob3JnQ2hhaW5JbmZvKVxuICAgICAgICAgICAgICA/IHU4YVRvSGV4KGFkZHJlc3NUb0V2bShhZGRyZXNzKSlcbiAgICAgICAgICAgICAgOiBhZGRyZXNzXG4gICAgICAgICAgICA7XG5cbiAgICAgICAgICAgIGNvbnN0IG1vY2tUeCA9IGF3YWl0IGNyZWF0ZVhjbUV4dHJpbnNpYyh7XG4gICAgICAgICAgICAgIGNoYWluSW5mb01hcCxcbiAgICAgICAgICAgICAgZGVzdGluYXRpb25Ub2tlbkluZm8sXG4gICAgICAgICAgICAgIG9yaWdpblRva2VuSW5mbzogdG9rZW5JbmZvLFxuICAgICAgICAgICAgICByZWNpcGllbnQ6IHJlY2lwaWVudCxcbiAgICAgICAgICAgICAgc2VuZGluZ1ZhbHVlOiAnMCcsXG4gICAgICAgICAgICAgIHN1YnN0cmF0ZUFwaVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRJbmZvID0gYXdhaXQgbW9ja1R4LnBheW1lbnRJbmZvKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBlc3RpbWF0ZWRGZWUgPSBwYXltZW50SW5mbz8ucGFydGlhbEZlZT8udG9TdHJpbmcoKSB8fCAnMCc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGNoYWluSW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvQnlLZXkobmV0d29ya0tleSk7XG5cbiAgICAgICAgICBpZiAoX2lzQ2hhaW5Fdm1Db21wYXRpYmxlKGNoYWluSW5mbykgJiYgX2lzVG9rZW5UcmFuc2ZlcnJlZEJ5RXZtKHRva2VuSW5mbykpIHtcbiAgICAgICAgICAgIGNvbnN0IHdlYjMgPSB0aGlzLiNrb25pU3RhdGUuY2hhaW5TZXJ2aWNlLmdldEV2bUFwaShuZXR3b3JrS2V5KTtcblxuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgICAgdG86ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLCAvLyBudWxsIGFkZHJlc3NcbiAgICAgICAgICAgICAgZnJvbTogYWRkcmVzc1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgZ2FzUHJpY2UgPSBhd2FpdCB3ZWIzLmFwaS5ldGguZ2V0R2FzUHJpY2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGdhc0xpbWl0ID0gYXdhaXQgd2ViMy5hcGkuZXRoLmVzdGltYXRlR2FzKHRyYW5zYWN0aW9uKTtcblxuICAgICAgICAgICAgZXN0aW1hdGVkRmVlID0gKGdhc0xpbWl0ICogcGFyc2VJbnQoZ2FzUHJpY2UpKS50b1N0cmluZygpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBbbW9ja1R4XSA9IGF3YWl0IGNyZWF0ZVRyYW5zZmVyRXh0cmluc2ljKHtcbiAgICAgICAgICAgICAgZnJvbTogYWRkcmVzcyxcbiAgICAgICAgICAgICAgbmV0d29ya0tleSxcbiAgICAgICAgICAgICAgc3Vic3RyYXRlQXBpLFxuICAgICAgICAgICAgICB0bzogYWRkcmVzcyxcbiAgICAgICAgICAgICAgdG9rZW5JbmZvLFxuICAgICAgICAgICAgICB0cmFuc2ZlckFsbDogdHJ1ZSxcbiAgICAgICAgICAgICAgdmFsdWU6ICcwJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRJbmZvID0gYXdhaXQgbW9ja1R4Py5wYXltZW50SW5mbyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgZXN0aW1hdGVkRmVlID0gcGF5bWVudEluZm8/LnBhcnRpYWxGZWU/LnRvU3RyaW5nKCkgfHwgJzAnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlc3RpbWF0ZWRGZWUgPSAnMCc7XG4gICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIGVzdGltYXRlIGZlZScsIGUpO1xuICAgICAgfVxuXG4gICAgICBtYXhUcmFuc2ZlcmFibGUgPSBtYXhUcmFuc2ZlcmFibGUuc3ViKG5ldyBCTihlc3RpbWF0ZWRGZWUpKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZnJlZUJhbGFuY2UsXG4gICAgICAgIHZhbHVlOiBtYXhUcmFuc2ZlcmFibGUuZ3QoQk5fWkVSTykgPyAobWF4VHJhbnNmZXJhYmxlLnRvU3RyaW5nKCkgfHwgJzAnKSA6ICcwJ1xuICAgICAgfSBhcyBBbW91bnREYXRhO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3Vic2NyaWJlQWRkcmVzc0ZyZWVCYWxhbmNlICh7IGFkZHJlc3MsIG5ldHdvcmtLZXksIHRva2VuIH06IFJlcXVlc3RGcmVlQmFsYW5jZSwgaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8QW1vdW50RGF0YT4ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoZnJlZUJhbGFuY2Uuc3Vic2NyaWJlKSc+KGlkLCBwb3J0KTtcblxuICAgIGNvbnN0IFt1bnN1YiwgY3VycmVudEZyZWVCYWxhbmNlXSA9IGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5iYWxhbmNlU2VydmljZS5zdWJzY3JpYmVUb2tlbkZyZWVCYWxhbmNlKGFkZHJlc3MsIG5ldHdvcmtLZXksIHRva2VuLCBjYik7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKFxuICAgICAgaWQsXG4gICAgICB1bnN1YlxuICAgICk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY3VycmVudEZyZWVCYWxhbmNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0cmFuc2ZlckNoZWNrUmVmZXJlbmNlQ291bnQgKHsgYWRkcmVzcyxcbiAgICBuZXR3b3JrS2V5IH06IFJlcXVlc3RUcmFuc2ZlckNoZWNrUmVmZXJlbmNlQ291bnQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrUmVmZXJlbmNlQ291bnQobmV0d29ya0tleSwgYWRkcmVzcywgdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaU1hcCgpLCB0aGlzLiNrb25pU3RhdGUuZ2V0Q2hhaW5JbmZvKG5ldHdvcmtLZXkpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdHJhbnNmZXJDaGVja1N1cHBvcnRpbmcgKHsgbmV0d29ya0tleSxcbiAgICB0b2tlblNsdWcgfTogUmVxdWVzdFRyYW5zZmVyQ2hlY2tTdXBwb3J0aW5nKTogUHJvbWlzZTxTdXBwb3J0VHJhbnNmZXJSZXNwb25zZT4ge1xuICAgIGNvbnN0IHRva2VuSW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRBc3NldEJ5U2x1Zyh0b2tlblNsdWcpO1xuXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrU3VwcG9ydFRyYW5zZmVyKG5ldHdvcmtLZXksIHRva2VuSW5mbywgdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaU1hcCgpLCB0aGlzLiNrb25pU3RhdGUuZ2V0Q2hhaW5JbmZvKG5ldHdvcmtLZXkpKTtcbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNmZXJHZXRFeGlzdGVudGlhbERlcG9zaXQgKHsgdG9rZW5TbHVnIH06IFJlcXVlc3RUcmFuc2ZlckV4aXN0ZW50aWFsRGVwb3NpdCk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9rZW5JbmZvID0gdGhpcy4ja29uaVN0YXRlLmdldEFzc2V0QnlTbHVnKHRva2VuU2x1Zyk7XG5cbiAgICByZXR1cm4gX2dldFRva2VuTWluQW1vdW50KHRva2VuSW5mbyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1YnN0cmF0ZU5mdFN1Ym1pdFRyYW5zYWN0aW9uIChpbnB1dERhdGE6IFJlcXVlc3RTdWJzdHJhdGVOZnRTdWJtaXRUcmFuc2FjdGlvbik6IFByb21pc2U8TmZ0VHJhbnNhY3Rpb25SZXNwb25zZT4ge1xuICAgIGNvbnN0IHsgcGFyYW1zLCByZWNpcGllbnRBZGRyZXNzLCBzZW5kZXJBZGRyZXNzIH0gPSBpbnB1dERhdGE7XG4gICAgY29uc3QgaXNTZW5kaW5nU2VsZiA9IGlzUmVjaXBpZW50U2VsZihzZW5kZXJBZGRyZXNzLCByZWNpcGllbnRBZGRyZXNzKTtcblxuICAgIC8vIFRPRE86IGRvIGJldHRlciB0byBkZXRlY3QgdG9rZW5UeXBlXG4gICAgY29uc3QgaXNQU1AzNCA9IHBhcmFtcz8uaXNQc3AzNCBhcyBib29sZWFuIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IG5ldHdvcmtLZXkgPSBwYXJhbXM/Lm5ldHdvcmtLZXkgYXMgc3RyaW5nO1xuXG4gICAgY29uc3QgYXBpUHJvcHMgPSB0aGlzLiNrb25pU3RhdGUuZ2V0U3Vic3RyYXRlQXBpKG5ldHdvcmtLZXkpO1xuICAgIGNvbnN0IGV4dHJpbnNpYyA9ICFpc1BTUDM0XG4gICAgICA/IGdldE5mdFRyYW5zZmVyRXh0cmluc2ljKG5ldHdvcmtLZXksIGFwaVByb3BzLCBzZW5kZXJBZGRyZXNzLCByZWNpcGllbnRBZGRyZXNzLCBwYXJhbXMgfHwge30pXG4gICAgICA6IGF3YWl0IGdldFBTUDM0VHJhbnNmZXJFeHRyaW5zaWMobmV0d29ya0tleSwgYXBpUHJvcHMsIHNlbmRlckFkZHJlc3MsIHJlY2lwaWVudEFkZHJlc3MsIHBhcmFtcyB8fCB7fSk7XG5cbiAgICAvLyB0aGlzLmFkZENvbnRhY3QocmVjaXBpZW50QWRkcmVzcyk7XG5cbiAgICBjb25zdCBycyA9IGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS50cmFuc2FjdGlvblNlcnZpY2UuaGFuZGxlVHJhbnNhY3Rpb24oe1xuICAgICAgYWRkcmVzczogc2VuZGVyQWRkcmVzcyxcbiAgICAgIGNoYWluOiBuZXR3b3JrS2V5LFxuICAgICAgdHJhbnNhY3Rpb246IGV4dHJpbnNpYyxcbiAgICAgIGRhdGE6IHsgLi4uaW5wdXREYXRhLCBpc1NlbmRpbmdTZWxmIH0sXG4gICAgICBleHRyaW5zaWNUeXBlOiBFeHRyaW5zaWNUeXBlLlNFTkRfTkZULFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuU1VCU1RSQVRFXG4gICAgfSk7XG5cbiAgICByZXR1cm4geyAuLi5ycywgaXNTZW5kaW5nU2VsZiB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBlbmFibGVDaGFpbnMgKHsgY2hhaW5TbHVncywgZW5hYmxlVG9rZW5zIH06IEVuYWJsZU11bHRpQ2hhaW5QYXJhbXMpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2hhaW5TbHVncy5tYXAoKGNoYWluU2x1ZykgPT4gdGhpcy5lbmFibGVDaGFpbih7IGNoYWluU2x1ZywgZW5hYmxlVG9rZW5zIH0pKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRBY2NvdW50TWV0YSAoeyBhZGRyZXNzIH06IFJlcXVlc3RBY2NvdW50TWV0YSk6IFJlc3BvbnNlQWNjb3VudE1ldGEge1xuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBhc3NlcnQocGFpciwgdCgnVW5hYmxlIHRvIGZpbmQgYWNjb3VudCcpKTtcblxuICAgIHJldHVybiB7XG4gICAgICBtZXRhOiBwYWlyLm1ldGFcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c1RpZTIgKHsgYWRkcmVzcywgZ2VuZXNpc0hhc2ggfTogUmVxdWVzdEFjY291bnRUaWUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnNldEFjY291bnRUaWUoYWRkcmVzcywgZ2VuZXNpc0hhc2gpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhY2NvdW50c0NyZWF0ZUV4dGVybmFsVjIgKHsgYWRkcmVzcyxcbiAgICBnZW5lc2lzSGFzaCxcbiAgICBpc0FsbG93ZWQsXG4gICAgaXNFdGhlcmV1bSxcbiAgICBpc1JlYWRPbmx5LFxuICAgIG5hbWUgfTogUmVxdWVzdEFjY291bnRDcmVhdGVFeHRlcm5hbFYyKTogUHJvbWlzZTxBY2NvdW50RXh0ZXJuYWxFcnJvcltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXN1bHQ6IEtleXJpbmdQYWlyO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBleGlzdHMgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgIGlmIChleGlzdHMudHlwZSA9PT0gKGlzRXRoZXJldW0gPyAnZXRoZXJldW0nIDogJ3NyMjU1MTknKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt7IGNvZGU6IEFjY291bnRFeHRlcm5hbEVycm9yQ29kZS5JTlZBTElEX0FERFJFU1MsIG1lc3NhZ2U6IHQoJ0FjY291bnQgZXhpc3RzJykgfV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG5cbiAgICAgIH1cblxuICAgICAgaWYgKGlzRXRoZXJldW0pIHtcbiAgICAgICAgY29uc3QgY2hhaW5JbmZvTWFwID0gdGhpcy4ja29uaVN0YXRlLmdldENoYWluSW5mb01hcCgpO1xuICAgICAgICBsZXQgX2dlbiA9ICcnO1xuXG4gICAgICAgIGlmIChnZW5lc2lzSGFzaCkge1xuICAgICAgICAgIGZvciAoY29uc3QgbmV0d29yayBvZiBPYmplY3QudmFsdWVzKGNoYWluSW5mb01hcCkpIHtcbiAgICAgICAgICAgIGlmIChfZ2V0RXZtQ2hhaW5JZChuZXR3b3JrKSA9PT0gcGFyc2VJbnQoZ2VuZXNpc0hhc2gpKSB7XG4gICAgICAgICAgICAgIC8vIFRPRE86IHB1cmUgRVZNIGNoYWlucyBkbyBub3QgaGF2ZSBnZW5lc2lzSGFzaFxuICAgICAgICAgICAgICBfZ2VuID0gX2dldFN1YnN0cmF0ZUdlbmVzaXNIYXNoKG5ldHdvcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdCA9IGtleXJpbmcua2V5cmluZy5hZGRGcm9tQWRkcmVzcyhhZGRyZXNzLCB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBpc0V4dGVybmFsOiB0cnVlLFxuICAgICAgICAgIGlzUmVhZE9ubHksXG4gICAgICAgICAgZ2VuZXNpc0hhc2g6IF9nZW5cbiAgICAgICAgfSwgbnVsbCwgJ2V0aGVyZXVtJyk7XG5cbiAgICAgICAga2V5cmluZy5zYXZlQWNjb3VudChyZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0ga2V5cmluZy5hZGRFeHRlcm5hbChhZGRyZXNzLCB7IGdlbmVzaXNIYXNoLCBuYW1lLCBpc1JlYWRPbmx5IH0pLnBhaXI7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IF9hZGRyZXNzID0gcmVzdWx0LmFkZHJlc3M7XG5cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5hZGRBY2NvdW50UmVmKFtfYWRkcmVzc10sICgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRoaXMuX3NhdmVDdXJyZW50QWNjb3VudEFkZHJlc3MoX2FkZHJlc3MsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9hZGRBZGRyZXNzVG9BdXRoTGlzdChfYWRkcmVzcywgaXNBbGxvd2VkKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gW3sgY29kZTogQWNjb3VudEV4dGVybmFsRXJyb3JDb2RlLktFWVJJTkdfRVJST1IsIG1lc3NhZ2U6IChlIGFzIEVycm9yKS5tZXNzYWdlIH1dO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYWNjb3VudHNDcmVhdGVIYXJkd2FyZVYyICh7IGFjY291bnRJbmRleCxcbiAgICBhZGRyZXNzLFxuICAgIGFkZHJlc3NPZmZzZXQsXG4gICAgZ2VuZXNpc0hhc2gsXG4gICAgaGFyZHdhcmVUeXBlLFxuICAgIGlzQWxsb3dlZCxcbiAgICBuYW1lIH06IFJlcXVlc3RBY2NvdW50Q3JlYXRlSGFyZHdhcmVWMik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGtleSA9IGtleXJpbmcuYWRkSGFyZHdhcmUoYWRkcmVzcywgaGFyZHdhcmVUeXBlLCB7XG4gICAgICBhY2NvdW50SW5kZXgsXG4gICAgICBhZGRyZXNzT2Zmc2V0LFxuICAgICAgZ2VuZXNpc0hhc2gsXG4gICAgICBuYW1lLFxuICAgICAgb3JpZ2luR2VuZXNpc0hhc2g6IGdlbmVzaXNIYXNoXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBrZXkucGFpcjtcblxuICAgIGNvbnN0IF9hZGRyZXNzID0gcmVzdWx0LmFkZHJlc3M7XG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy4ja29uaVN0YXRlLmFkZEFjY291bnRSZWYoW19hZGRyZXNzXSwgKCkgPT4ge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLl9zYXZlQ3VycmVudEFjY291bnRBZGRyZXNzKF9hZGRyZXNzLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2FkZEFkZHJlc3NUb0F1dGhMaXN0KF9hZGRyZXNzLCBpc0FsbG93ZWQgfHwgZmFsc2UpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhY2NvdW50c0NyZWF0ZUhhcmR3YXJlTXVsdGlwbGUgKHsgYWNjb3VudHMgfTogUmVxdWVzdEFjY291bnRDcmVhdGVIYXJkd2FyZU11bHRpcGxlKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgYWRkcmVzc2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKCFhY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0KFwiQ2FuJ3QgZmluZCBhbiBhY2NvdW50LiBQbGVhc2UgdHJ5IGFnYWluXCIpKTtcbiAgICB9XG5cbiAgICBjb25zdCBzbHVnTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG5cbiAgICBmb3IgKGNvbnN0IGFjY291bnQgb2YgYWNjb3VudHMpIHtcbiAgICAgIGNvbnN0IHsgYWNjb3VudEluZGV4LCBhZGRyZXNzLCBhZGRyZXNzT2Zmc2V0LCBnZW5lc2lzSGFzaCwgaGFyZHdhcmVUeXBlLCBpc0V0aGVyZXVtLCBuYW1lIH0gPSBhY2NvdW50O1xuXG4gICAgICBsZXQgcmVzdWx0OiBLZXlyaW5nUGFpcjtcblxuICAgICAgY29uc3QgYmFzZU1ldGE6IEtleXJpbmdQYWlyJE1ldGEgPSB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGhhcmR3YXJlVHlwZSxcbiAgICAgICAgYWNjb3VudEluZGV4LFxuICAgICAgICBhZGRyZXNzT2Zmc2V0LFxuICAgICAgICBnZW5lc2lzSGFzaCxcbiAgICAgICAgb3JpZ2luR2VuZXNpc0hhc2g6IGdlbmVzaXNIYXNoXG4gICAgICB9O1xuXG4gICAgICBpZiAoaXNFdGhlcmV1bSkge1xuICAgICAgICByZXN1bHQgPSBrZXlyaW5nLmtleXJpbmcuYWRkRnJvbUFkZHJlc3MoYWRkcmVzcywge1xuICAgICAgICAgIC4uLmJhc2VNZXRhLFxuICAgICAgICAgIGlzRXh0ZXJuYWw6IHRydWUsXG4gICAgICAgICAgaXNIYXJkd2FyZTogdHJ1ZVxuICAgICAgICB9LCBudWxsLCAnZXRoZXJldW0nKTtcblxuICAgICAgICBrZXlyaW5nLnNhdmVBY2NvdW50KHJlc3VsdCk7XG4gICAgICAgIHNsdWdNYXAuZXRoZXJldW0gPSAnZXRoZXJldW0nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0ga2V5cmluZy5hZGRIYXJkd2FyZShhZGRyZXNzLCBoYXJkd2FyZVR5cGUsIHtcbiAgICAgICAgICAuLi5iYXNlTWV0YSxcbiAgICAgICAgICBhdmFpbGFibGVHZW5lc2lzSGFzaGVzOiBbZ2VuZXNpc0hhc2hdXG4gICAgICAgIH0pLnBhaXI7XG5cbiAgICAgICAgY29uc3QgW3NsdWddID0gdGhpcy4ja29uaVN0YXRlLmZpbmROZXR3b3JrS2V5QnlHZW5lc2lzSGFzaChnZW5lc2lzSGFzaCk7XG5cbiAgICAgICAgaWYgKHNsdWcpIHtcbiAgICAgICAgICBzbHVnTWFwW3NsdWddID0gc2x1ZztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBfYWRkcmVzcyA9IHJlc3VsdC5hZGRyZXNzO1xuXG4gICAgICBhZGRyZXNzZXMucHVzaChfYWRkcmVzcyk7XG5cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRoaXMuX2FkZEFkZHJlc3NUb0F1dGhMaXN0KF9hZGRyZXNzLCB0cnVlKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudEFjY291bnQgPSB0aGlzLiNrb25pU3RhdGUua2V5cmluZ1NlcnZpY2UuY3VycmVudEFjY291bnQ7XG4gICAgY29uc3QgYWxsR2VuZXNpc0hhc2ggPSBjdXJyZW50QWNjb3VudD8uYWxsR2VuZXNpc0hhc2ggfHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKGFkZHJlc3Nlcy5sZW5ndGggPD0gMSkge1xuICAgICAgdGhpcy4ja29uaVN0YXRlLnNldEN1cnJlbnRBY2NvdW50KHsgYWRkcmVzczogYWRkcmVzc2VzWzBdLCBjdXJyZW50R2VuZXNpc0hhc2g6IG51bGwsIGFsbEdlbmVzaXNIYXNoIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNrb25pU3RhdGUuc2V0Q3VycmVudEFjY291bnQoe1xuICAgICAgICBhZGRyZXNzOiBBTExfQUNDT1VOVF9LRVksXG4gICAgICAgIGN1cnJlbnRHZW5lc2lzSGFzaDogYWxsR2VuZXNpc0hhc2ggfHwgbnVsbCxcbiAgICAgICAgYWxsR2VuZXNpc0hhc2hcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLiNrb25pU3RhdGUuYWRkQWNjb3VudFJlZihhZGRyZXNzZXMsICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoc2x1Z01hcCkubGVuZ3RoKSB7XG4gICAgICB0aGlzLmVuYWJsZUNoYWlucyh7IGNoYWluU2x1Z3M6IE9iamVjdC5rZXlzKHNsdWdNYXApLCBlbmFibGVUb2tlbnM6IHRydWUgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFjY291bnRzQ3JlYXRlV2l0aFNlY3JldCAoeyBpc0FsbG93LFxuICAgIGlzRXRoZXJldW0sXG4gICAgbmFtZSxcbiAgICBwdWJsaWNLZXksXG4gICAgc2VjcmV0S2V5IH06IFJlcXVlc3RBY2NvdW50Q3JlYXRlV2l0aFNlY3JldEtleSk6IFByb21pc2U8UmVzcG9uc2VBY2NvdW50Q3JlYXRlV2l0aFNlY3JldEtleT4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQga2V5cmluZ1BhaXI6IEtleXJpbmdQYWlyIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIGlmIChpc0V0aGVyZXVtKSB7XG4gICAgICAgIGNvbnN0IF9zZWNyZXQgPSBoZXhTdHJpcFByZWZpeChzZWNyZXRLZXkpO1xuXG4gICAgICAgIGlmIChfc2VjcmV0Lmxlbmd0aCA9PT0gNjQpIHtcbiAgICAgICAgICBjb25zdCBzdXJpID0gYDB4JHtfc2VjcmV0fWA7XG4gICAgICAgICAgY29uc3QgeyBwaHJhc2UgfSA9IGtleUV4dHJhY3RTdXJpKHN1cmkpO1xuXG4gICAgICAgICAgaWYgKGlzSGV4KHBocmFzZSkgJiYgaXNIZXgocGhyYXNlLCAyNTYpKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlOiBLZXlwYWlyVHlwZSA9ICdldGhlcmV1bSc7XG5cbiAgICAgICAgICAgIGtleXJpbmdQYWlyID0ga2V5cmluZy5hZGRVcmkoZ2V0U3VyaShzdXJpLCB0eXBlKSwgeyBuYW1lOiBuYW1lIH0sIHR5cGUpLnBhaXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrZXlyaW5nUGFpciA9IGtleXJpbmcua2V5cmluZy5hZGRGcm9tUGFpcih7XG4gICAgICAgICAgcHVibGljS2V5OiBoZXhUb1U4YShwdWJsaWNLZXkpLFxuICAgICAgICAgIHNlY3JldEtleTogaGV4VG9VOGEoc2VjcmV0S2V5KVxuICAgICAgICB9LCB7IG5hbWUgfSk7XG4gICAgICAgIGtleXJpbmcuYWRkUGFpcihrZXlyaW5nUGFpciwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICgha2V5cmluZ1BhaXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcnM6IFt7IGNvZGU6IEFjY291bnRFeHRlcm5hbEVycm9yQ29kZS5LRVlSSU5HX0VSUk9SLCBtZXNzYWdlOiB0KCdDYW5ub3QgY3JlYXRlIGFjY291bnQnKSB9XVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBfYWRkcmVzcyA9IGtleXJpbmdQYWlyLmFkZHJlc3M7XG5cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5hZGRBY2NvdW50UmVmKFtfYWRkcmVzc10sICgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRoaXMuX3NhdmVDdXJyZW50QWNjb3VudEFkZHJlc3MoX2FkZHJlc3MsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9hZGRBZGRyZXNzVG9BdXRoTGlzdChfYWRkcmVzcywgaXNBbGxvdyk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy4jYWx3YXlzTG9jaykge1xuICAgICAgICB0aGlzLmtleXJpbmdMb2NrKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yczogW3sgY29kZTogQWNjb3VudEV4dGVybmFsRXJyb3JDb2RlLktFWVJJTkdfRVJST1IsIG1lc3NhZ2U6IChlIGFzIEVycm9yKS5tZXNzYWdlIH1dXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vLyBFeHRlcm5hbCBhY2NvdW50XG5cbiAgcHJpdmF0ZSByZWplY3RFeHRlcm5hbFJlcXVlc3QgKHJlcXVlc3Q6IFJlcXVlc3RSZWplY3RFeHRlcm5hbFJlcXVlc3QpOiBSZXNwb25zZVJlamVjdEV4dGVybmFsUmVxdWVzdCB7XG4gICAgY29uc3QgeyBpZCwgbWVzc2FnZSwgdGhyb3dFcnJvciB9ID0gcmVxdWVzdDtcblxuICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLiNrb25pU3RhdGUuZ2V0RXh0ZXJuYWxSZXF1ZXN0KGlkKTtcblxuICAgIGlmIChwcm9taXNlLnN0YXR1cyA9PT0gRXh0ZXJuYWxSZXF1ZXN0UHJvbWlzZVN0YXR1cy5QRU5ESU5HICYmIHByb21pc2UucmVqZWN0KSB7XG4gICAgICBpZiAodGhyb3dFcnJvcikge1xuICAgICAgICBwcm9taXNlLnJlamVjdChuZXcgRXJyb3IobWVzc2FnZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZS5yZWplY3QoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4ja29uaVN0YXRlLnVwZGF0ZUV4dGVybmFsUmVxdWVzdChpZCwge1xuICAgICAgICBzdGF0dXM6IEV4dGVybmFsUmVxdWVzdFByb21pc2VTdGF0dXMuUkVKRUNURUQsXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHJlamVjdDogdW5kZWZpbmVkLFxuICAgICAgICByZXNvbHZlOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVzb2x2ZVFyVHJhbnNmZXIgKHJlcXVlc3Q6IFJlcXVlc3RSZXNvbHZlRXh0ZXJuYWxSZXF1ZXN0KTogUmVzcG9uc2VSZXNvbHZlRXh0ZXJuYWxSZXF1ZXN0IHtcbiAgICBjb25zdCB7IGRhdGEsIGlkIH0gPSByZXF1ZXN0O1xuXG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRFeHRlcm5hbFJlcXVlc3QoaWQpO1xuXG4gICAgaWYgKHByb21pc2Uuc3RhdHVzID09PSBFeHRlcm5hbFJlcXVlc3RQcm9taXNlU3RhdHVzLlBFTkRJTkcpIHtcbiAgICAgIHByb21pc2UucmVzb2x2ZSAmJiBwcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICB0aGlzLiNrb25pU3RhdGUudXBkYXRlRXh0ZXJuYWxSZXF1ZXN0KGlkLCB7XG4gICAgICAgIHN0YXR1czogRXh0ZXJuYWxSZXF1ZXN0UHJvbWlzZVN0YXR1cy5DT01QTEVURUQsXG4gICAgICAgIHJlamVjdDogdW5kZWZpbmVkLFxuICAgICAgICByZXNvbHZlOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlQ29uZmlybWF0aW9ucyAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoY29uZmlybWF0aW9ucy5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuXG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLmdldENvbmZpcm1hdGlvbnNRdWV1ZVN1YmplY3QoKS5zdWJzY3JpYmUoY2IpO1xuXG4gICAgdGhpcy5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUuZ2V0Q29uZmlybWF0aW9uc1F1ZXVlU3ViamVjdCgpLmdldFZhbHVlKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNvbXBsZXRlQ29uZmlybWF0aW9uIChyZXF1ZXN0OiBSZXF1ZXN0Q29uZmlybWF0aW9uQ29tcGxldGUpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmNvbXBsZXRlQ29uZmlybWF0aW9uKHJlcXVlc3QpO1xuICB9XG5cbiAgLy8vIFNpZ24gUXJcblxuICBwcml2YXRlIGdldE5ldHdvcmtKc29uQnlDaGFpbklkIChjaGFpbklkPzogbnVtYmVyKTogX0NoYWluSW5mbyB8IG51bGwge1xuICAgIGNvbnN0IGNoYWluSW5mb01hcCA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRDaGFpbkluZm9NYXAoKTtcblxuICAgIGlmICghY2hhaW5JZCkge1xuICAgICAgZm9yIChjb25zdCBuIGluIGNoYWluSW5mb01hcCkge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjaGFpbkluZm9NYXAsIG4pKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXR3b3JrSW5mbyA9IGNoYWluSW5mb01hcFtuXTtcblxuICAgICAgICBpZiAoX2lzQ2hhaW5Fdm1Db21wYXRpYmxlKG5ldHdvcmtJbmZvKSkge1xuICAgICAgICAgIHJldHVybiBuZXR3b3JrSW5mbztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IG4gaW4gY2hhaW5JbmZvTWFwKSB7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjaGFpbkluZm9NYXAsIG4pKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXR3b3JrSW5mbyA9IGNoYWluSW5mb01hcFtuXTtcblxuICAgICAgaWYgKF9nZXRFdm1DaGFpbklkKG5ldHdvcmtJbmZvKSA9PT0gY2hhaW5JZCkge1xuICAgICAgICByZXR1cm4gbmV0d29ya0luZm87XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBQYXJzZSB0cmFuc2FjdGlvblxuXG4gIHByaXZhdGUgcGFyc2VTdWJzdHJhdGVUcmFuc2FjdGlvbiAoeyBkYXRhLFxuICAgIG5ldHdvcmtLZXkgfTogUmVxdWVzdFBhcnNlVHJhbnNhY3Rpb25TdWJzdHJhdGUpOiBSZXNwb25zZVBhcnNlVHJhbnNhY3Rpb25TdWJzdHJhdGUge1xuICAgIGNvbnN0IGFwaVByb3BzID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShuZXR3b3JrS2V5KTtcbiAgICBjb25zdCBhcGlQcm9taXNlID0gYXBpUHJvcHMuYXBpO1xuXG4gICAgcmV0dXJuIHBhcnNlU3Vic3RyYXRlVHJhbnNhY3Rpb24oZGF0YSwgYXBpUHJvbWlzZSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHBhcnNlRVZNUkxQICh7IGRhdGEgfTogUmVxdWVzdFFyUGFyc2VSTFApOiBQcm9taXNlPFJlc3BvbnNlUXJQYXJzZVJMUD4ge1xuICAgIHJldHVybiBhd2FpdCBwYXJzZUV2bVJscChkYXRhLCB0aGlzLiNrb25pU3RhdGUuZ2V0Q2hhaW5JbmZvTWFwKCksIHRoaXMuI2tvbmlTdGF0ZS5nZXRFdm1BcGlNYXAoKSk7XG4gIH1cblxuICAvLyBTaWduXG5cbiAgcHJpdmF0ZSBxclNpZ25TdWJzdHJhdGUgKHsgYWRkcmVzcywgZGF0YSwgbmV0d29ya0tleSB9OiBSZXF1ZXN0UXJTaWduU3Vic3RyYXRlKTogUmVzcG9uc2VRclNpZ25TdWJzdHJhdGUge1xuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBhc3NlcnQocGFpciwgdCgnVW5hYmxlIHRvIGZpbmQgYWNjb3VudCcpKTtcblxuICAgIGlmIChwYWlyLmlzTG9ja2VkKSB7XG4gICAgICBrZXlyaW5nLnVubG9ja1BhaXIocGFpci5hZGRyZXNzKTtcbiAgICB9XG5cbiAgICBsZXQgc2lnbmVkID0gaGV4U3RyaXBQcmVmaXgodThhVG9IZXgocGFpci5zaWduKGRhdGEsIHsgd2l0aFR5cGU6IHRydWUgfSkpKTtcbiAgICBjb25zdCBuZXR3b3JrID0gdGhpcy4ja29uaVN0YXRlLmdldENoYWluSW5mbyhuZXR3b3JrS2V5KTtcblxuICAgIGlmIChfaXNDaGFpbkV2bUNvbXBhdGlibGUobmV0d29yaykpIHtcbiAgICAgIHNpZ25lZCA9IHNpZ25lZC5zdWJzdHJpbmcoMik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNpZ25hdHVyZTogc2lnbmVkXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcXJTaWduRVZNICh7IGFkZHJlc3MsIGNoYWluSWQsIG1lc3NhZ2UsIHR5cGUgfTogUmVxdWVzdFFyU2lnbkV2bSk6IFByb21pc2U8UmVzcG9uc2VRclNpZ25Fdm0+IHtcbiAgICBsZXQgc2lnbmVkOiBzdHJpbmc7XG4gICAgY29uc3QgbmV0d29yazogX0NoYWluSW5mbyB8IG51bGwgPSB0aGlzLmdldE5ldHdvcmtKc29uQnlDaGFpbklkKGNoYWluSWQpO1xuXG4gICAgaWYgKCFuZXR3b3JrKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodCgnQ2Fubm90IGZpbmQgbmV0d29yaycpKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKGFkZHJlc3MpO1xuXG4gICAgaWYgKCFwYWlyKSB7XG4gICAgICB0aHJvdyBFcnJvcih0KCdVbmFibGUgdG8gZmluZCBhY2NvdW50JykpO1xuICAgIH1cblxuICAgIGlmIChwYWlyLmlzTG9ja2VkKSB7XG4gICAgICBrZXlyaW5nLnVubG9ja1BhaXIocGFpci5hZGRyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICBsZXQgZGF0YSA9IG1lc3NhZ2U7XG5cbiAgICAgIGlmIChpc0hleChtZXNzYWdlKSkge1xuICAgICAgICBkYXRhID0gbWVzc2FnZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNBc2NpaShtZXNzYWdlKSkge1xuICAgICAgICBkYXRhID0gYDB4JHttZXNzYWdlfWA7XG4gICAgICB9XG5cbiAgICAgIHNpZ25lZCA9IGF3YWl0IHBhaXIuZXZtU2lnbmVyLnNpZ25NZXNzYWdlKGRhdGEsICdwZXJzb25hbF9zaWduJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHR4OiBRclRyYW5zYWN0aW9uIHwgbnVsbCA9IGNyZWF0ZVRyYW5zYWN0aW9uRnJvbVJMUChtZXNzYWdlKTtcblxuICAgICAgaWYgKCF0eCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodCgnRmFpbGVkIHRvIGRlY29kZSBkYXRhLiBQbGVhc2UgdXNlIGEgdmFsaWQgUVIgY29kZScpKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdHhPYmplY3Q6IFRyYW5zYWN0aW9uQ29uZmlnID0ge1xuICAgICAgICBnYXNQcmljZTogbmV3IEJpZ04odHguZ2FzUHJpY2UpLnRvTnVtYmVyKCksXG4gICAgICAgIHRvOiB0eC50byxcbiAgICAgICAgdmFsdWU6IG5ldyBCaWdOKHR4LnZhbHVlKS50b051bWJlcigpLFxuICAgICAgICBkYXRhOiB0eC5kYXRhLFxuICAgICAgICBub25jZTogbmV3IEJpZ04odHgubm9uY2UpLnRvTnVtYmVyKCksXG4gICAgICAgIGdhczogbmV3IEJpZ04odHguZ2FzKS50b051bWJlcigpXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjb21tb24gPSBDb21tb24uZm9yQ3VzdG9tQ2hhaW4oJ21haW5uZXQnLCB7XG4gICAgICAgIG5hbWU6IG5ldHdvcmsubmFtZSxcbiAgICAgICAgbmV0d29ya0lkOiBfZ2V0RXZtQ2hhaW5JZChuZXR3b3JrKSxcbiAgICAgICAgY2hhaW5JZDogX2dldEV2bUNoYWluSWQobmV0d29yaylcbiAgICAgIH0sICdwZXRlcnNidXJnJyk7XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gbmV3IFRyYW5zYWN0aW9uKHR4T2JqZWN0LCB7IGNvbW1vbiB9KTtcblxuICAgICAgcGFpci5ldm1TaWduZXIuc2lnblRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICAgIHNpZ25lZCA9IHNpZ25hdHVyZVRvSGV4KHtcbiAgICAgICAgcjogdThhVG9IZXgodHJhbnNhY3Rpb24uciksXG4gICAgICAgIHM6IHU4YVRvSGV4KHRyYW5zYWN0aW9uLnMpLFxuICAgICAgICB2OiB1OGFUb0hleCh0cmFuc2FjdGlvbi52KVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNpZ25hdHVyZTogaGV4U3RyaXBQcmVmaXgoc2lnbmVkKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1YnNjcmliZUNoYWluU3Rha2luZ01ldGFkYXRhIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShib25kaW5nLnN1YnNjcmliZUNoYWluU3Rha2luZ01ldGFkYXRhKSc+KGlkLCBwb3J0KTtcblxuICAgIGNvbnN0IGNoYWluU3Rha2luZ01ldGFkYXRhID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZUNoYWluU3Rha2luZ01ldGFkYXRhKCkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChycykgPT4ge1xuICAgICAgICBjYihycyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCBjaGFpblN0YWtpbmdNZXRhZGF0YS51bnN1YnNjcmliZSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmdldENoYWluU3Rha2luZ01ldGFkYXRhKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1YnNjcmliZVN0YWtpbmdOb21pbmF0b3JNZXRhZGF0YSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoYm9uZGluZy5zdWJzY3JpYmVOb21pbmF0b3JNZXRhZGF0YSknPihpZCwgcG9ydCk7XG5cbiAgICBjb25zdCBub21pbmF0b3JNZXRhZGF0YSA9IHRoaXMuI2tvbmlTdGF0ZS5zdWJzY3JpYmVOb21pbmF0b3JNZXRhZGF0YSgpLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiAocnMpID0+IHtcbiAgICAgICAgY2IocnMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgbm9taW5hdG9yTWV0YWRhdGEudW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5nZXROb21pbmF0b3JNZXRhZGF0YSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRCb25kaW5nT3B0aW9ucyAoeyBjaGFpbiwgdHlwZSB9OiBCb25kaW5nT3B0aW9uUGFyYW1zKTogUHJvbWlzZTxWYWxpZGF0b3JJbmZvW10gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBhcGlQcm9wcyA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRTdWJzdHJhdGVBcGkoY2hhaW4pO1xuICAgIGNvbnN0IGNoYWluSW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRDaGFpbkluZm8oY2hhaW4pO1xuICAgIGNvbnN0IGNoYWluU3Rha2luZ01ldGFkYXRhID0gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmdldFN0YWtpbmdNZXRhZGF0YUJ5Q2hhaW4oY2hhaW4sIHR5cGUpO1xuXG4gICAgaWYgKCFjaGFpblN0YWtpbmdNZXRhZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGVjaW1hbHMgfSA9IF9nZXRDaGFpbk5hdGl2ZVRva2VuQmFzaWNJbmZvKGNoYWluSW5mbyk7XG5cbiAgICByZXR1cm4gYXdhaXQgZ2V0VmFsaWRhdG9yc0luZm8oY2hhaW4sIGFwaVByb3BzLCBkZWNpbWFscywgY2hhaW5TdGFraW5nTWV0YWRhdGEpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXROb21pbmF0aW9uUG9vbE9wdGlvbnMgKGNoYWluOiBzdHJpbmcpOiBQcm9taXNlPE5vbWluYXRpb25Qb29sSW5mb1tdPiB7XG4gICAgY29uc3Qgc3Vic3RyYXRlQXBpID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShjaGFpbik7XG5cbiAgICByZXR1cm4gYXdhaXQgZ2V0Tm9taW5hdGlvblBvb2xzSW5mbyhjaGFpbiwgc3Vic3RyYXRlQXBpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3VibWl0Qm9uZGluZyAoaW5wdXREYXRhOiBSZXF1ZXN0Qm9uZGluZ1N1Ym1pdCk6IFByb21pc2U8U1dUcmFuc2FjdGlvblJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyBhZGRyZXNzLCBhbW91bnQsIGNoYWluLCBub21pbmF0b3JNZXRhZGF0YSwgc2VsZWN0ZWRWYWxpZGF0b3JzIH0gPSBpbnB1dERhdGE7XG4gICAgY29uc3QgY2hhaW5JbmZvID0gdGhpcy4ja29uaVN0YXRlLmdldENoYWluSW5mbyhjaGFpbik7XG4gICAgY29uc3QgY2hhaW5TdGFraW5nTWV0YWRhdGEgPSBhd2FpdCB0aGlzLiNrb25pU3RhdGUuZ2V0U3Rha2luZ01ldGFkYXRhQnlDaGFpbihjaGFpbiwgU3Rha2luZ1R5cGUuTk9NSU5BVEVEKTtcblxuICAgIGlmICghY2hhaW5TdGFraW5nTWV0YWRhdGEpIHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlXG4gICAgICAgIC5nZW5lcmF0ZUJlZm9yZUhhbmRsZVJlc3BvbnNlRXJyb3JzKFtuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SKV0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJvbmRpbmdWYWxpZGF0aW9uID0gdmFsaWRhdGVCb25kaW5nQ29uZGl0aW9uKGNoYWluSW5mbywgYW1vdW50LCBzZWxlY3RlZFZhbGlkYXRvcnMsIGFkZHJlc3MsIGNoYWluU3Rha2luZ01ldGFkYXRhLCBub21pbmF0b3JNZXRhZGF0YSk7XG5cbiAgICBpZiAoIWFtb3VudCB8fCAhc2VsZWN0ZWRWYWxpZGF0b3JzIHx8IGJvbmRpbmdWYWxpZGF0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlXG4gICAgICAgIC5nZW5lcmF0ZUJlZm9yZUhhbmRsZVJlc3BvbnNlRXJyb3JzKGJvbmRpbmdWYWxpZGF0aW9uKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdWJzdHJhdGVBcGkgPSB0aGlzLiNrb25pU3RhdGUuZ2V0U3Vic3RyYXRlQXBpKGNoYWluKTtcbiAgICBjb25zdCBleHRyaW5zaWMgPSBhd2FpdCBnZXRCb25kaW5nRXh0cmluc2ljKGNoYWluSW5mbywgYW1vdW50LCBzZWxlY3RlZFZhbGlkYXRvcnMsIHN1YnN0cmF0ZUFwaSwgYWRkcmVzcywgbm9taW5hdG9yTWV0YWRhdGEpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS50cmFuc2FjdGlvblNlcnZpY2UuaGFuZGxlVHJhbnNhY3Rpb24oe1xuICAgICAgYWRkcmVzcyxcbiAgICAgIGNoYWluOiBjaGFpbixcbiAgICAgIGNoYWluVHlwZTogQ2hhaW5UeXBlLlNVQlNUUkFURSxcbiAgICAgIGRhdGE6IGlucHV0RGF0YSxcbiAgICAgIGV4dHJpbnNpY1R5cGU6IEV4dHJpbnNpY1R5cGUuU1RBS0lOR19CT05ELFxuICAgICAgdHJhbnNhY3Rpb246IGV4dHJpbnNpYyxcbiAgICAgIHVybDogRVhURU5TSU9OX1JFUVVFU1RfVVJMLFxuICAgICAgdHJhbnNmZXJOYXRpdmVBbW91bnQ6IGFtb3VudFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdWJtaXRVbmJvbmRpbmcgKGlucHV0RGF0YTogUmVxdWVzdFVuYm9uZGluZ1N1Ym1pdCk6IFByb21pc2U8U1dUcmFuc2FjdGlvblJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyBhbW91bnQsIGNoYWluLCBub21pbmF0b3JNZXRhZGF0YSwgdmFsaWRhdG9yQWRkcmVzcyB9ID0gaW5wdXREYXRhO1xuXG4gICAgY29uc3QgY2hhaW5TdGFraW5nTWV0YWRhdGEgPSBhd2FpdCB0aGlzLiNrb25pU3RhdGUuZ2V0U3Rha2luZ01ldGFkYXRhQnlDaGFpbihjaGFpbiwgU3Rha2luZ1R5cGUuTk9NSU5BVEVEKTtcblxuICAgIGlmICghY2hhaW5TdGFraW5nTWV0YWRhdGEgfHwgIW5vbWluYXRvck1ldGFkYXRhKSB7XG4gICAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnRyYW5zYWN0aW9uU2VydmljZS5nZW5lcmF0ZUJlZm9yZUhhbmRsZVJlc3BvbnNlRXJyb3JzKFtuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SKV0pO1xuICAgIH1cblxuICAgIGNvbnN0IHVuYm9uZGluZ1ZhbGlkYXRpb24gPSB2YWxpZGF0ZVVuYm9uZGluZ0NvbmRpdGlvbihub21pbmF0b3JNZXRhZGF0YSwgYW1vdW50LCBjaGFpbiwgY2hhaW5TdGFraW5nTWV0YWRhdGEsIHZhbGlkYXRvckFkZHJlc3MpO1xuXG4gICAgaWYgKCFhbW91bnQgfHwgdW5ib25kaW5nVmFsaWRhdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnRyYW5zYWN0aW9uU2VydmljZS5nZW5lcmF0ZUJlZm9yZUhhbmRsZVJlc3BvbnNlRXJyb3JzKHVuYm9uZGluZ1ZhbGlkYXRpb24pO1xuICAgIH1cblxuICAgIGNvbnN0IHN1YnN0cmF0ZUFwaSA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRTdWJzdHJhdGVBcGkoY2hhaW4pO1xuICAgIGNvbnN0IGV4dHJpbnNpYyA9IGF3YWl0IGdldFVuYm9uZGluZ0V4dHJpbnNpYyhub21pbmF0b3JNZXRhZGF0YSwgYW1vdW50LCBjaGFpbiwgc3Vic3RyYXRlQXBpLCB2YWxpZGF0b3JBZGRyZXNzKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmhhbmRsZVRyYW5zYWN0aW9uKHtcbiAgICAgIGFkZHJlc3M6IG5vbWluYXRvck1ldGFkYXRhLmFkZHJlc3MsXG4gICAgICBjaGFpbjogY2hhaW4sXG4gICAgICB0cmFuc2FjdGlvbjogZXh0cmluc2ljLFxuICAgICAgZGF0YTogaW5wdXREYXRhLFxuICAgICAgZXh0cmluc2ljVHlwZTogRXh0cmluc2ljVHlwZS5TVEFLSU5HX1VOQk9ORCxcbiAgICAgIGNoYWluVHlwZTogQ2hhaW5UeXBlLlNVQlNUUkFURVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdWJtaXRTdGFrZVdpdGhkcmF3YWwgKGlucHV0RGF0YTogUmVxdWVzdFN0YWtlV2l0aGRyYXdhbCk6IFByb21pc2U8U1dUcmFuc2FjdGlvblJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyBjaGFpbiwgbm9taW5hdG9yTWV0YWRhdGEsIHZhbGlkYXRvckFkZHJlc3MgfSA9IGlucHV0RGF0YTtcblxuICAgIGlmICghbm9taW5hdG9yTWV0YWRhdGEpIHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmdlbmVyYXRlQmVmb3JlSGFuZGxlUmVzcG9uc2VFcnJvcnMoW25ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMpXSk7XG4gICAgfVxuXG4gICAgY29uc3QgZG90U2FtYUFwaSA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRTdWJzdHJhdGVBcGkoY2hhaW4pO1xuICAgIGNvbnN0IGV4dHJpbnNpYyA9IGF3YWl0IGdldFdpdGhkcmF3YWxFeHRyaW5zaWMoZG90U2FtYUFwaSwgY2hhaW4sIG5vbWluYXRvck1ldGFkYXRhLCB2YWxpZGF0b3JBZGRyZXNzKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmhhbmRsZVRyYW5zYWN0aW9uKHtcbiAgICAgIGFkZHJlc3M6IG5vbWluYXRvck1ldGFkYXRhLmFkZHJlc3MsXG4gICAgICBjaGFpbjogY2hhaW4sXG4gICAgICB0cmFuc2FjdGlvbjogZXh0cmluc2ljLFxuICAgICAgZGF0YTogaW5wdXREYXRhLFxuICAgICAgZXh0cmluc2ljVHlwZTogRXh0cmluc2ljVHlwZS5TVEFLSU5HX1dJVEhEUkFXLFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuU1VCU1RSQVRFXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdFN0YWtlQ2xhaW1SZXdhcmQgKGlucHV0RGF0YTogUmVxdWVzdFN0YWtlQ2xhaW1SZXdhcmQpOiBQcm9taXNlPFNXVHJhbnNhY3Rpb25SZXNwb25zZT4ge1xuICAgIGNvbnN0IHsgYWRkcmVzcywgYm9uZFJld2FyZCwgY2hhaW4sIHN0YWtpbmdUeXBlIH0gPSBpbnB1dERhdGE7XG5cbiAgICBpZiAoIWFkZHJlc3MpIHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmdlbmVyYXRlQmVmb3JlSGFuZGxlUmVzcG9uc2VFcnJvcnMoW25ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMpXSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3Vic3RyYXRlQXBpID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShjaGFpbik7XG4gICAgY29uc3QgZXh0cmluc2ljID0gYXdhaXQgZ2V0Q2xhaW1SZXdhcmRFeHRyaW5zaWMoc3Vic3RyYXRlQXBpLCBjaGFpbiwgYWRkcmVzcywgc3Rha2luZ1R5cGUsIGJvbmRSZXdhcmQpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS50cmFuc2FjdGlvblNlcnZpY2UuaGFuZGxlVHJhbnNhY3Rpb24oe1xuICAgICAgYWRkcmVzcyxcbiAgICAgIGNoYWluOiBjaGFpbixcbiAgICAgIHRyYW5zYWN0aW9uOiBleHRyaW5zaWMsXG4gICAgICBkYXRhOiBpbnB1dERhdGEsXG4gICAgICBleHRyaW5zaWNUeXBlOiBFeHRyaW5zaWNUeXBlLlNUQUtJTkdfQ0xBSU1fUkVXQVJELFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuU1VCU1RSQVRFXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdENhbmNlbFN0YWtlV2l0aGRyYXdhbCAoaW5wdXREYXRhOiBSZXF1ZXN0U3Rha2VDYW5jZWxXaXRoZHJhd2FsKTogUHJvbWlzZTxTV1RyYW5zYWN0aW9uUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IGFkZHJlc3MsIGNoYWluLCBzZWxlY3RlZFVuc3Rha2luZyB9ID0gaW5wdXREYXRhO1xuXG4gICAgaWYgKCFjaGFpbiB8fCAhc2VsZWN0ZWRVbnN0YWtpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmdlbmVyYXRlQmVmb3JlSGFuZGxlUmVzcG9uc2VFcnJvcnMoW25ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMpXSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3Vic3RyYXRlQXBpID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShjaGFpbik7XG4gICAgY29uc3QgZXh0cmluc2ljID0gYXdhaXQgZ2V0Q2FuY2VsV2l0aGRyYXdhbEV4dHJpbnNpYyhzdWJzdHJhdGVBcGksIGNoYWluLCBzZWxlY3RlZFVuc3Rha2luZyk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLnRyYW5zYWN0aW9uU2VydmljZS5oYW5kbGVUcmFuc2FjdGlvbih7XG4gICAgICBhZGRyZXNzLFxuICAgICAgY2hhaW4sXG4gICAgICB0cmFuc2FjdGlvbjogZXh0cmluc2ljLFxuICAgICAgZGF0YTogaW5wdXREYXRhLFxuICAgICAgZXh0cmluc2ljVHlwZTogRXh0cmluc2ljVHlwZS5TVEFLSU5HX0NBTkNFTF9VTlNUQUtFLFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuU1VCU1RSQVRFXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdFBvb2xCb25kaW5nIChpbnB1dERhdGE6IFJlcXVlc3RTdGFrZVBvb2xpbmdCb25kaW5nKTogUHJvbWlzZTxTV1RyYW5zYWN0aW9uUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IGFkZHJlc3MsIGFtb3VudCwgY2hhaW4sIG5vbWluYXRvck1ldGFkYXRhLCBzZWxlY3RlZFBvb2wgfSA9IGlucHV0RGF0YTtcblxuICAgIGNvbnN0IGNoYWluSW5mbyA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRDaGFpbkluZm8oY2hhaW4pO1xuICAgIGNvbnN0IGNoYWluU3Rha2luZ01ldGFkYXRhID0gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmdldFN0YWtpbmdNZXRhZGF0YUJ5Q2hhaW4oY2hhaW4sIFN0YWtpbmdUeXBlLk5PTUlOQVRFRCk7XG5cbiAgICBpZiAoIWNoYWluU3Rha2luZ01ldGFkYXRhKSB7XG4gICAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnRyYW5zYWN0aW9uU2VydmljZVxuICAgICAgICAuZ2VuZXJhdGVCZWZvcmVIYW5kbGVSZXNwb25zZUVycm9ycyhbbmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5JTlRFUk5BTF9FUlJPUildKTtcbiAgICB9XG5cbiAgICBjb25zdCBib25kaW5nVmFsaWRhdGlvbiA9IHZhbGlkYXRlUG9vbEJvbmRpbmdDb25kaXRpb24oY2hhaW5JbmZvLCBhbW91bnQsIHNlbGVjdGVkUG9vbCwgYWRkcmVzcywgY2hhaW5TdGFraW5nTWV0YWRhdGEsIG5vbWluYXRvck1ldGFkYXRhKTtcblxuICAgIGlmICghYW1vdW50IHx8IGJvbmRpbmdWYWxpZGF0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlXG4gICAgICAgIC5nZW5lcmF0ZUJlZm9yZUhhbmRsZVJlc3BvbnNlRXJyb3JzKGJvbmRpbmdWYWxpZGF0aW9uKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdWJzdHJhdGVBcGkgPSB0aGlzLiNrb25pU3RhdGUuZ2V0U3Vic3RyYXRlQXBpKGNoYWluKTtcbiAgICBjb25zdCBleHRyaW5zaWMgPSBhd2FpdCBnZXRQb29saW5nQm9uZGluZ0V4dHJpbnNpYyhzdWJzdHJhdGVBcGksIGFtb3VudCwgc2VsZWN0ZWRQb29sLmlkLCBub21pbmF0b3JNZXRhZGF0YSk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLnRyYW5zYWN0aW9uU2VydmljZS5oYW5kbGVUcmFuc2FjdGlvbih7XG4gICAgICBhZGRyZXNzLFxuICAgICAgY2hhaW4sXG4gICAgICB0cmFuc2FjdGlvbjogZXh0cmluc2ljLFxuICAgICAgZGF0YTogaW5wdXREYXRhLFxuICAgICAgZXh0cmluc2ljVHlwZTogRXh0cmluc2ljVHlwZS5TVEFLSU5HX0pPSU5fUE9PTCxcbiAgICAgIGNoYWluVHlwZTogQ2hhaW5UeXBlLlNVQlNUUkFURSxcbiAgICAgIHRyYW5zZmVyTmF0aXZlQW1vdW50OiBhbW91bnRcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3VibWl0UG9vbGluZ1VuYm9uZGluZyAoaW5wdXREYXRhOiBSZXF1ZXN0U3Rha2VQb29saW5nVW5ib25kaW5nKTogUHJvbWlzZTxTV1RyYW5zYWN0aW9uUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IGFtb3VudCwgY2hhaW4sIG5vbWluYXRvck1ldGFkYXRhIH0gPSBpbnB1dERhdGE7XG5cbiAgICBjb25zdCBjaGFpblN0YWtpbmdNZXRhZGF0YSA9IGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5nZXRTdGFraW5nTWV0YWRhdGFCeUNoYWluKGNoYWluLCBTdGFraW5nVHlwZS5OT01JTkFURUQpO1xuXG4gICAgaWYgKCFjaGFpblN0YWtpbmdNZXRhZGF0YSB8fCAhbm9taW5hdG9yTWV0YWRhdGEpIHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlXG4gICAgICAgIC5nZW5lcmF0ZUJlZm9yZUhhbmRsZVJlc3BvbnNlRXJyb3JzKFtuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SKV0pO1xuICAgIH1cblxuICAgIGNvbnN0IHVuYm9uZGluZ1ZhbGlkYXRpb24gPSB2YWxpZGF0ZVJlbGF5VW5ib25kaW5nQ29uZGl0aW9uKGFtb3VudCwgY2hhaW5TdGFraW5nTWV0YWRhdGEsIG5vbWluYXRvck1ldGFkYXRhKTtcblxuICAgIGlmICghYW1vdW50IHx8IHVuYm9uZGluZ1ZhbGlkYXRpb24ubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS50cmFuc2FjdGlvblNlcnZpY2VcbiAgICAgICAgLmdlbmVyYXRlQmVmb3JlSGFuZGxlUmVzcG9uc2VFcnJvcnModW5ib25kaW5nVmFsaWRhdGlvbik7XG4gICAgfVxuXG4gICAgY29uc3Qgc3Vic3RyYXRlQXBpID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShjaGFpbik7XG4gICAgY29uc3QgZXh0cmluc2ljID0gYXdhaXQgZ2V0UG9vbGluZ1VuYm9uZGluZ0V4dHJpbnNpYyhzdWJzdHJhdGVBcGksIGFtb3VudCwgbm9taW5hdG9yTWV0YWRhdGEpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS50cmFuc2FjdGlvblNlcnZpY2UuaGFuZGxlVHJhbnNhY3Rpb24oe1xuICAgICAgYWRkcmVzczogbm9taW5hdG9yTWV0YWRhdGEuYWRkcmVzcyxcbiAgICAgIGNoYWluLFxuICAgICAgdHJhbnNhY3Rpb246IGV4dHJpbnNpYyxcbiAgICAgIGRhdGE6IGlucHV0RGF0YSxcbiAgICAgIGV4dHJpbnNpY1R5cGU6IEV4dHJpbnNpY1R5cGUuU1RBS0lOR19MRUFWRV9QT09MLFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuU1VCU1RSQVRFXG4gICAgfSk7XG4gIH1cblxuICAvLyBFVk0gVHJhbnNhY3Rpb25cbiAgcHJpdmF0ZSBhc3luYyBwYXJzZUNvbnRyYWN0SW5wdXQgKHsgY2hhaW5JZCxcbiAgICBjb250cmFjdCxcbiAgICBkYXRhIH06IFJlcXVlc3RQYXJzZUV2bUNvbnRyYWN0SW5wdXQpOiBQcm9taXNlPFJlc3BvbnNlUGFyc2VFdm1Db250cmFjdElucHV0PiB7XG4gICAgY29uc3QgbmV0d29yayA9IHRoaXMuZ2V0TmV0d29ya0pzb25CeUNoYWluSWQoY2hhaW5JZCk7XG5cbiAgICByZXR1cm4gYXdhaXQgcGFyc2VDb250cmFjdElucHV0KGRhdGEsIGNvbnRyYWN0LCBuZXR3b3JrKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3VibWl0VHVyaW5nU3Rha2VDb21wb3VuZGluZyAoaW5wdXREYXRhOiBSZXF1ZXN0VHVyaW5nU3Rha2VDb21wb3VuZCkge1xuICAgIGNvbnN0IHsgYWNjb3VudE1pbmltdW0sIGFkZHJlc3MsIGJvbmRlZEFtb3VudCwgY29sbGF0b3JBZGRyZXNzLCBuZXR3b3JrS2V5IH0gPSBpbnB1dERhdGE7XG5cbiAgICBpZiAoIWFkZHJlc3MpIHtcbiAgICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmdlbmVyYXRlQmVmb3JlSGFuZGxlUmVzcG9uc2VFcnJvcnMoW25ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMpXSk7XG4gICAgfVxuXG4gICAgY29uc3QgZG90U2FtYUFwaSA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRTdWJzdHJhdGVBcGkobmV0d29ya0tleSk7XG4gICAgY29uc3QgY2hhaW5JbmZvID0gdGhpcy4ja29uaVN0YXRlLmdldENoYWluSW5mbyhuZXR3b3JrS2V5KTtcbiAgICBjb25zdCB7IGRlY2ltYWxzIH0gPSBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyhjaGFpbkluZm8pO1xuICAgIGNvbnN0IHBhcnNlZEFjY291bnRNaW5pbXVtID0gcGFyc2VGbG9hdChhY2NvdW50TWluaW11bSkgKiAxMCAqKiBkZWNpbWFscztcbiAgICBjb25zdCBleHRyaW5zaWMgPSBhd2FpdCBnZXRUdXJpbmdDb21wb3VuZEV4dHJpbnNpYyhkb3RTYW1hQXBpLCBhZGRyZXNzLCBjb2xsYXRvckFkZHJlc3MsIHBhcnNlZEFjY291bnRNaW5pbXVtLnRvU3RyaW5nKCksIGJvbmRlZEFtb3VudCk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLnRyYW5zYWN0aW9uU2VydmljZS5oYW5kbGVUcmFuc2FjdGlvbih7XG4gICAgICBhZGRyZXNzLFxuICAgICAgY2hhaW46IG5ldHdvcmtLZXksXG4gICAgICB0cmFuc2FjdGlvbjogZXh0cmluc2ljLFxuICAgICAgZGF0YTogaW5wdXREYXRhLFxuICAgICAgZXh0cmluc2ljVHlwZTogRXh0cmluc2ljVHlwZS5TVEFLSU5HX0NPTVBPVU5ESU5HLFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuU1VCU1RSQVRFXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdFR1cmluZ0NhbmNlbFN0YWtlQ29tcG91bmQgKGlucHV0RGF0YTogUmVxdWVzdFR1cmluZ0NhbmNlbFN0YWtlQ29tcG91bmQpIHtcbiAgICBjb25zdCB7IGFkZHJlc3MsIG5ldHdvcmtLZXksIHRhc2tJZCB9ID0gaW5wdXREYXRhO1xuICAgIGNvbnN0IHR4U3RhdGU6IFRyYW5zYWN0aW9uUmVzcG9uc2UgPSB7fTtcblxuICAgIGlmICghYWRkcmVzcykge1xuICAgICAgdHhTdGF0ZS50eEVycm9yID0gdHJ1ZTtcblxuICAgICAgcmV0dXJuIHR4U3RhdGU7XG4gICAgfVxuXG4gICAgY29uc3QgZG90U2FtYUFwaSA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRTdWJzdHJhdGVBcGkobmV0d29ya0tleSk7XG4gICAgY29uc3QgZXh0cmluc2ljID0gYXdhaXQgZ2V0VHVyaW5nQ2FuY2VsQ29tcG91bmRpbmdFeHRyaW5zaWMoZG90U2FtYUFwaSwgdGFza0lkKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmhhbmRsZVRyYW5zYWN0aW9uKHtcbiAgICAgIGFkZHJlc3MsXG4gICAgICBjaGFpbjogbmV0d29ya0tleSxcbiAgICAgIHRyYW5zYWN0aW9uOiBleHRyaW5zaWMsXG4gICAgICBkYXRhOiBpbnB1dERhdGEsXG4gICAgICBleHRyaW5zaWNUeXBlOiBFeHRyaW5zaWNUeXBlLlNUQUtJTkdfQ0FOQ0VMX0NPTVBPVU5ESU5HLFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuU1VCU1RSQVRFXG4gICAgfSk7XG4gIH1cblxuICAvLy8gS2V5cmluZyBzdGF0ZVxuXG4gIC8vIFN1YnNjcmliZSBrZXlyaW5nIHN0YXRlXG5cbiAgcHJpdmF0ZSBrZXlyaW5nU3RhdGVTdWJzY3JpYmUgKGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBLZXlyaW5nU3RhdGUge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoa2V5cmluZy5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IGtleXJpbmdTdGF0ZVN1YmplY3QgPSB0aGlzLiNrb25pU3RhdGUua2V5cmluZ1NlcnZpY2Uua2V5cmluZ1N0YXRlU3ViamVjdDtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBrZXlyaW5nU3RhdGVTdWJqZWN0LnN1YnNjcmliZSgodmFsdWUpOiB2b2lkID0+XG4gICAgICBjYih2YWx1ZSlcbiAgICApO1xuXG4gICAgdGhpcy5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUua2V5cmluZ1NlcnZpY2Uua2V5cmluZ1N0YXRlO1xuICB9XG5cbiAgLy8gQ2hhbmdlIG1hc3RlciBwYXNzd29yZFxuXG4gIHByaXZhdGUga2V5cmluZ0NoYW5nZU1hc3RlclBhc3N3b3JkICh7IGNyZWF0ZU5ldyxcbiAgICBuZXdQYXNzd29yZCxcbiAgICBvbGRQYXNzd29yZCB9OiBSZXF1ZXN0Q2hhbmdlTWFzdGVyUGFzc3dvcmQpOiBSZXNwb25zZUNoYW5nZU1hc3RlclBhc3N3b3JkIHtcbiAgICB0cnkge1xuICAgICAgLy8gUmVtb3ZlIGlzTWFzdGVyUGFzc3dvcmQgbWV0YSBpZiBjcmVhdGVOZXdcbiAgICAgIGlmIChjcmVhdGVOZXcpIHtcbiAgICAgICAgY29uc3QgcGFpcnMgPSBrZXlyaW5nLmdldFBhaXJzKCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgaWYgKHBhaXIubWV0YS5pc0luamVjdGVkKSB7XG4gICAgICAgICAgICAvLyBFbXB0eVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhOiBLZXlyaW5nUGFpciRNZXRhID0ge1xuICAgICAgICAgICAgICAuLi5wYWlyLm1ldGEsXG4gICAgICAgICAgICAgIGlzTWFzdGVyUGFzc3dvcmQ6IGZhbHNlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoIW1ldGEub3JpZ2luR2VuZXNpc0hhc2gpIHtcbiAgICAgICAgICAgICAgbWV0YS5nZW5lc2lzSGFzaCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYWlyLnNldE1ldGEobWV0YSk7XG4gICAgICAgICAgICBrZXlyaW5nLnNhdmVBY2NvdW50TWV0YShwYWlyLCBwYWlyLm1ldGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBrZXlyaW5nLmNoYW5nZU1hc3RlclBhc3N3b3JkKG5ld1Bhc3N3b3JkLCBvbGRQYXNzd29yZCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3JzOiBbdCgoZSBhcyBFcnJvcikubWVzc2FnZSldLFxuICAgICAgICBzdGF0dXM6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuI2tvbmlTdGF0ZS51cGRhdGVLZXlyaW5nU3RhdGUoKTtcblxuICAgIGlmICh0aGlzLiNhbHdheXNMb2NrICYmICFjcmVhdGVOZXcpIHtcbiAgICAgIHRoaXMua2V5cmluZ0xvY2soKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgZXJyb3JzOiBbXVxuICAgIH07XG4gIH1cblxuICAvLyBNaWdyYXRlIHBhc3N3b3JkXG5cbiAgcHJpdmF0ZSBjaGVja0xvY2tBZnRlck1pZ3JhdGUgKCkge1xuICAgIGNvbnN0IHBhaXJzID0ga2V5cmluZy5nZXRQYWlycygpO1xuXG4gICAgY29uc3QgbmVlZE1pZ3JhdGUgPSAhIXBhaXJzXG4gICAgICAuZmlsdGVyKChhY2MpID0+IGFjYy5hZGRyZXNzICE9PSBBTExfQUNDT1VOVF9LRVkgJiYgIWFjYy5tZXRhLmlzRXh0ZXJuYWwgJiYgIWFjYy5tZXRhLmlzSW5qZWN0ZWQpXG4gICAgICAuZmlsdGVyKChhY2MpID0+ICFhY2MubWV0YS5pc01hc3RlclBhc3N3b3JkKVxuICAgICAgLmxlbmd0aDtcblxuICAgIGlmICghbmVlZE1pZ3JhdGUpIHtcbiAgICAgIGlmICh0aGlzLiNhbHdheXNMb2NrKSB7XG4gICAgICAgIHRoaXMua2V5cmluZ0xvY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGtleXJpbmdNaWdyYXRlTWFzdGVyUGFzc3dvcmQgKHsgYWRkcmVzcywgcGFzc3dvcmQgfTogUmVxdWVzdE1pZ3JhdGVQYXNzd29yZCk6IFJlc3BvbnNlTWlncmF0ZVBhc3N3b3JkIHtcbiAgICB0cnkge1xuICAgICAga2V5cmluZy5taWdyYXRlV2l0aE1hc3RlclBhc3N3b3JkKGFkZHJlc3MsIHBhc3N3b3JkKTtcblxuICAgICAgdGhpcy5jaGVja0xvY2tBZnRlck1pZ3JhdGUoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBlcnJvcnM6IFsoZSBhcyBFcnJvcikubWVzc2FnZV0sXG4gICAgICAgIHN0YXR1czogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgIGVycm9yczogW11cbiAgICB9O1xuICB9XG5cbiAgLy8gVW5sb2NrIHdhbGxldFxuXG4gIHByaXZhdGUga2V5cmluZ1VubG9jayAoeyBwYXNzd29yZCB9OiBSZXF1ZXN0VW5sb2NrS2V5cmluZyk6IFJlc3BvbnNlVW5sb2NrS2V5cmluZyB7XG4gICAgdHJ5IHtcbiAgICAgIGtleXJpbmcudW5sb2NrS2V5cmluZyhwYXNzd29yZCk7XG4gICAgICB0aGlzLiNrb25pU3RhdGUuaW5pdE1hbnRhUGF5KHBhc3N3b3JkKVxuICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3JzOiBbKGUgYXMgRXJyb3IpLm1lc3NhZ2VdLFxuICAgICAgICBzdGF0dXM6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuI2tvbmlTdGF0ZS51cGRhdGVLZXlyaW5nU3RhdGUoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IHRydWUsXG4gICAgICBlcnJvcnM6IFtdXG4gICAgfTtcbiAgfVxuXG4gIC8vIExvY2sgd2FsbGV0XG5cbiAgcHJpdmF0ZSBrZXlyaW5nTG9jayAoKTogdm9pZCB7XG4gICAgdGhpcy4ja29uaVN0YXRlLmtleXJpbmdTZXJ2aWNlLmxvY2soKTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy4jbG9ja1RpbWVPdXQpO1xuICB9XG5cbiAgLy8gRXhwb3J0IG1uZW1vbmljXG5cbiAgcHJpdmF0ZSBrZXlyaW5nRXhwb3J0TW5lbW9uaWMgKHsgYWRkcmVzcywgcGFzc3dvcmQgfTogUmVxdWVzdEtleXJpbmdFeHBvcnRNbmVtb25pYyk6IFJlc3BvbnNlS2V5cmluZ0V4cG9ydE1uZW1vbmljIHtcbiAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKGFkZHJlc3MpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gcGFpci5leHBvcnRNbmVtb25pYyhwYXNzd29yZCk7XG5cbiAgICByZXR1cm4geyByZXN1bHQgfTtcbiAgfVxuXG4gIC8vIFJlc2V0IHdhbGxldFxuXG4gIHByaXZhdGUgYXN5bmMgcmVzZXRXYWxsZXQgKHsgcmVzZXRBbGwgfTogUmVxdWVzdFJlc2V0V2FsbGV0KTogUHJvbWlzZTxSZXNwb25zZVJlc2V0V2FsbGV0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5yZXNldFdhbGxldChyZXNldEFsbCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIHN0YXR1czogdHJ1ZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlcnJvcnM6IFsoZSBhcyBFcnJvcikubWVzc2FnZV0sXG4gICAgICAgIHN0YXR1czogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8vIFNpZ25pbmcgc3Vic3RyYXRlIHJlcXVlc3RcbiAgcHJpdmF0ZSBzaWduaW5nQXBwcm92ZVBhc3N3b3JkVjIgKHsgaWQgfTogUmVxdWVzdFNpZ25pbmdBcHByb3ZlUGFzc3dvcmRWMik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHF1ZXVlZCA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRTaWduUmVxdWVzdChpZCk7XG5cbiAgICBhc3NlcnQocXVldWVkLCB0KCdVbmFibGUgdG8gcHJvY2VlZC4gUGxlYXNlIHRyeSBhZ2FpbicpKTtcblxuICAgIGNvbnN0IHsgcmVqZWN0LCByZXF1ZXN0LCByZXNvbHZlIH0gPSBxdWV1ZWQ7XG4gICAgY29uc3QgcGFpciA9IGtleXJpbmcuZ2V0UGFpcihxdWV1ZWQuYWNjb3VudC5hZGRyZXNzKTtcblxuICAgIC8vIHVubGlrZSBxdWV1ZWQuYWNjb3VudC5hZGRyZXNzIHRoZSBmb2xsb3dpbmdcbiAgICAvLyBhZGRyZXNzIGlzIGVuY29kZWQgd2l0aCB0aGUgZGVmYXVsdCBwcmVmaXhcbiAgICAvLyB3aGljaCB3aGF0IGlzIHVzZWQgZm9yIHBhc3N3b3JkIGNhY2hpbmcgbWFwcGluZ1xuICAgIGNvbnN0IHsgYWRkcmVzcyB9ID0gcGFpcjtcblxuICAgIGlmICghcGFpcikge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcih0KCdVbmFibGUgdG8gZmluZCBhY2NvdW50JykpKTtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChwYWlyLmlzTG9ja2VkKSB7XG4gICAgICBrZXlyaW5nLnVubG9ja1BhaXIoYWRkcmVzcyk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBwYXlsb2FkIH0gPSByZXF1ZXN0O1xuXG4gICAgbGV0IHJlZ2lzdHJ5ID0gbmV3IFR5cGVSZWdpc3RyeSgpO1xuXG4gICAgbGV0IGlzRXZtID0gZmFsc2U7XG5cbiAgICBpZiAoaXNKc29uUGF5bG9hZChwYXlsb2FkKSkge1xuICAgICAgLy8gR2V0IHRoZSBtZXRhZGF0YSBmb3IgdGhlIGdlbmVzaXNIYXNoXG4gICAgICBjb25zdCBjdXJyZW50TWV0YWRhdGEgPSB0aGlzLiNrb25pU3RhdGUua25vd25NZXRhZGF0YS5maW5kKChtZXRhOiBNZXRhZGF0YURlZikgPT5cbiAgICAgICAgbWV0YS5nZW5lc2lzSGFzaCA9PT0gcGF5bG9hZC5nZW5lc2lzSGFzaCk7XG5cbiAgICAgIC8vIHNldCB0aGUgcmVnaXN0cnkgYmVmb3JlIGNhbGxpbmcgdGhlIHNpZ24gZnVuY3Rpb25cbiAgICAgIHJlZ2lzdHJ5LnNldFNpZ25lZEV4dGVuc2lvbnMocGF5bG9hZC5zaWduZWRFeHRlbnNpb25zLCBjdXJyZW50TWV0YWRhdGE/LnVzZXJFeHRlbnNpb25zKTtcblxuICAgICAgaWYgKGN1cnJlbnRNZXRhZGF0YSkge1xuICAgICAgICByZWdpc3RyeS5yZWdpc3RlcihjdXJyZW50TWV0YWRhdGE/LnR5cGVzKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgWywgY2hhaW5JbmZvXSA9IHRoaXMuI2tvbmlTdGF0ZS5maW5kTmV0d29ya0tleUJ5R2VuZXNpc0hhc2gocGF5bG9hZC5nZW5lc2lzSGFzaCk7XG5cbiAgICAgIGlmIChjaGFpbkluZm8gJiYgX0FQSV9PUFRJT05TX0NIQUlOX0dST1VQLmF2YWlsLmluY2x1ZGVzKGNoYWluSW5mby5zbHVnKSkge1xuICAgICAgICBjb25zdCBpc0NoYWluQWN0aXZlID0gdGhpcy4ja29uaVN0YXRlLmdldENoYWluU3RhdGVCeUtleShjaGFpbkluZm8uc2x1ZykuYWN0aXZlO1xuXG4gICAgICAgIGlmICghaXNDaGFpbkFjdGl2ZSkge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1VuYWJsZSB0byBzaWduJykpO1xuXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlZ2lzdHJ5ID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShjaGFpbkluZm8uc2x1ZykuYXBpLnJlZ2lzdHJ5IGFzIHVua25vd24gYXMgVHlwZVJlZ2lzdHJ5O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFpbkluZm8pIHtcbiAgICAgICAgaXNFdm0gPSBfaXNDaGFpbkV2bUNvbXBhdGlibGUoY2hhaW5JbmZvKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSByZXF1ZXN0LnNpZ24ocmVnaXN0cnkgYXMgdW5rbm93biBhcyBUeXBlUmVnaXN0cnksIHBhaXIpO1xuXG4gICAgcmVzb2x2ZSh7XG4gICAgICBpZCxcbiAgICAgIC8vIEluIGNhc2UgZXZtIGNoYWluLCBtdXN0IGJlIGN1dCAyIGNoYXJhY3RlciBhZnRlciAweFxuICAgICAgc2lnbmF0dXJlOiBpc0V2bSA/IGAweCR7cmVzdWx0LnNpZ25hdHVyZS5zbGljZSg0KX1gIDogcmVzdWx0LnNpZ25hdHVyZVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuI2Fsd2F5c0xvY2spIHtcbiAgICAgIHRoaXMua2V5cmluZ0xvY2soKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vLyBEZXJpdmUgYWNjb3VudFxuXG4gIHByaXZhdGUgZGVyaXZhdGlvbkNyZWF0ZU11bHRpcGxlICh7IGlzQWxsb3dlZCwgaXRlbXMsIHBhcmVudEFkZHJlc3MgfTogUmVxdWVzdERlcml2ZUNyZWF0ZU11bHRpcGxlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcGFyZW50UGFpciA9IGtleXJpbmcuZ2V0UGFpcihwYXJlbnRBZGRyZXNzKTtcbiAgICBjb25zdCBpc0V2bSA9IHBhcmVudFBhaXIudHlwZSA9PT0gJ2V0aGVyZXVtJztcblxuICAgIGlmIChwYXJlbnRQYWlyLmlzTG9ja2VkKSB7XG4gICAgICBrZXlyaW5nLnVubG9ja1BhaXIocGFyZW50UGFpci5hZGRyZXNzKTtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVDaGlsZCA9ICh7IG5hbWUsIHN1cmkgfTogQ3JlYXRlRGVyaXZlQWNjb3VudEluZm8pOiBLZXlyaW5nUGFpciA9PiB7XG4gICAgICBjb25zdCBtZXRhOiBLZXlyaW5nUGFpciRNZXRhID0ge1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBwYXJlbnRBZGRyZXNzXG4gICAgICB9O1xuXG4gICAgICBpZiAoaXNFdm0pIHtcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlZyA9IC9eXFxkKyQvO1xuICAgICAgICAgIGNvbnN0IHBhdGggPSBzdXJpLnNwbGl0KCcvLycpWzFdO1xuXG4gICAgICAgICAgaWYgKHJlZy50ZXN0KHBhdGgpKSB7XG4gICAgICAgICAgICBpbmRleCA9IHBhcnNlSW50KHBhdGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWluZGV4KSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IodCgnSW52YWxpZCBkZXJpdmUgcGF0aCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1ldGEuc3VyaSA9IGAvLyR7aW5kZXh9YDtcblxuICAgICAgICByZXR1cm4gcGFyZW50UGFpci5kZXJpdmVFdm0oaW5kZXgsIG1ldGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWV0YS5zdXJpID0gc3VyaTtcblxuICAgICAgICByZXR1cm4gcGFyZW50UGFpci5kZXJpdmUoc3VyaSwgbWV0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3VsdDogS2V5cmluZ1BhaXJbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjaGlsZFBhaXIgPSBjcmVhdGVDaGlsZChpdGVtKTtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IGNoaWxkUGFpci5hZGRyZXNzO1xuXG4gICAgICAgIGtleXJpbmcuYWRkUGFpcihjaGlsZFBhaXIsIHRydWUpO1xuICAgICAgICB0aGlzLl9hZGRBZGRyZXNzVG9BdXRoTGlzdChhZGRyZXNzLCBpc0FsbG93ZWQpO1xuICAgICAgICByZXN1bHQucHVzaChjaGlsZFBhaXIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5fc2F2ZUN1cnJlbnRBY2NvdW50QWRkcmVzcyhyZXN1bHRbMF0uYWRkcmVzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXRDdXJyZW50QWNjb3VudCh7IGFkZHJlc3M6IEFMTF9BQ0NPVU5UX0tFWSwgY3VycmVudEdlbmVzaXNIYXNoOiBudWxsIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBkZXJpdmF0aW9uQ3JlYXRlVjMgKHsgYWRkcmVzczogcGFyZW50QWRkcmVzcyB9OiBSZXF1ZXN0RGVyaXZlQ3JlYXRlVjMpOiBib29sZWFuIHtcbiAgICBjb25zdCBwYXJlbnRQYWlyID0ga2V5cmluZy5nZXRQYWlyKHBhcmVudEFkZHJlc3MpO1xuICAgIGNvbnN0IGlzRXZtID0gcGFyZW50UGFpci50eXBlID09PSAnZXRoZXJldW0nO1xuXG4gICAgaWYgKHBhcmVudFBhaXIuaXNMb2NrZWQpIHtcbiAgICAgIGtleXJpbmcudW5sb2NrUGFpcihwYXJlbnRQYWlyLmFkZHJlc3MpO1xuICAgIH1cblxuICAgIGNvbnN0IHBhaXJzID0ga2V5cmluZy5nZXRQYWlycygpO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gcGFpcnMuZmlsdGVyKChwKSA9PiBwLm1ldGEucGFyZW50QWRkcmVzcyA9PT0gcGFyZW50QWRkcmVzcyk7XG4gICAgY29uc3QgbmFtZSA9IGBBY2NvdW50ICR7cGFpcnMubGVuZ3RofWA7XG5cbiAgICBsZXQgaW5kZXggPSBpc0V2bSA/IDEgOiAwO1xuICAgIGxldCB2YWxpZCA9IGZhbHNlO1xuXG4gICAgZG8ge1xuICAgICAgY29uc3QgZXhpc3QgPSBjaGlsZHJlbi5maW5kKChwKSA9PiBwLm1ldGEuc3VyaSA9PT0gYC8vJHtpbmRleH1gKTtcblxuICAgICAgaWYgKGV4aXN0KSB7XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxpZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoIXZhbGlkKTtcblxuICAgIGNvbnN0IG1ldGEgPSB7XG4gICAgICBuYW1lLFxuICAgICAgcGFyZW50QWRkcmVzcyxcbiAgICAgIHN1cmk6IGAvLyR7aW5kZXh9YFxuICAgIH07XG4gICAgY29uc3QgY2hpbGRQYWlyID0gaXNFdm0gPyBwYXJlbnRQYWlyLmRlcml2ZUV2bShpbmRleCwgbWV0YSkgOiBwYXJlbnRQYWlyLmRlcml2ZShtZXRhLnN1cmksIG1ldGEpO1xuICAgIGNvbnN0IGFkZHJlc3MgPSBjaGlsZFBhaXIuYWRkcmVzcztcblxuICAgIHRoaXMuX3NhdmVDdXJyZW50QWNjb3VudEFkZHJlc3MoYWRkcmVzcywgKCkgPT4ge1xuICAgICAga2V5cmluZy5hZGRQYWlyKGNoaWxkUGFpciwgdHJ1ZSk7XG4gICAgICB0aGlzLl9hZGRBZGRyZXNzVG9BdXRoTGlzdChhZGRyZXNzLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLiNhbHdheXNMb2NrKSB7XG4gICAgICB0aGlzLmtleXJpbmdMb2NrKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlRGVyaXZlUGF0aCAoeyBwYXJlbnRBZGRyZXNzLCBzdXJpIH06IFJlcXVlc3REZXJpdmVWYWxpZGF0ZVYyKTogUmVzcG9uc2VEZXJpdmVWYWxpZGF0ZVYyIHtcbiAgICBjb25zdCBwYXJlbnRQYWlyID0ga2V5cmluZy5nZXRQYWlyKHBhcmVudEFkZHJlc3MpO1xuICAgIGNvbnN0IGlzRXZtID0gcGFyZW50UGFpci50eXBlID09PSAnZXRoZXJldW0nO1xuXG4gICAgaWYgKHBhcmVudFBhaXIuaXNMb2NrZWQpIHtcbiAgICAgIGtleXJpbmcudW5sb2NrUGFpcihwYXJlbnRQYWlyLmFkZHJlc3MpO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGE6IEtleXJpbmdQYWlyJE1ldGEgPSB7XG4gICAgICBwYXJlbnRBZGRyZXNzXG4gICAgfTtcblxuICAgIGxldCBjaGlsZFBhaXI6IEtleXJpbmdQYWlyO1xuXG4gICAgaWYgKGlzRXZtKSB7XG4gICAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZWcgPSAvXlxcZCskLztcbiAgICAgICAgY29uc3QgcGF0aCA9IHN1cmkuc3BsaXQoJy8vJylbMV07XG5cbiAgICAgICAgaWYgKHJlZy50ZXN0KHBhdGgpKSB7XG4gICAgICAgICAgaW5kZXggPSBwYXJzZUludChwYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICB9XG5cbiAgICAgIGlmICghaW5kZXgpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IodCgnSW52YWxpZCBkZXJpdmUgcGF0aCcpKTtcbiAgICAgIH1cblxuICAgICAgbWV0YS5zdXJpID0gYC8vJHtpbmRleH1gO1xuXG4gICAgICBjaGlsZFBhaXIgPSBwYXJlbnRQYWlyLmRlcml2ZUV2bShpbmRleCwgbWV0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1ldGEuc3VyaSA9IHN1cmk7XG4gICAgICBjaGlsZFBhaXIgPSBwYXJlbnRQYWlyLmRlcml2ZShzdXJpLCBtZXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWRkcmVzczogY2hpbGRQYWlyLmFkZHJlc3MsXG4gICAgICBzdXJpOiBtZXRhLnN1cmkgYXMgc3RyaW5nXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TGlzdERlcml2ZUFjY291bnRzICh7IGxpbWl0LCBwYWdlLCBwYXJlbnRBZGRyZXNzIH06IFJlcXVlc3RHZXREZXJpdmVBY2NvdW50cyk6IFJlc3BvbnNlR2V0RGVyaXZlQWNjb3VudHMge1xuICAgIGNvbnN0IHBhcmVudFBhaXIgPSBrZXlyaW5nLmdldFBhaXIocGFyZW50QWRkcmVzcyk7XG4gICAgY29uc3QgaXNFdm0gPSBwYXJlbnRQYWlyLnR5cGUgPT09ICdldGhlcmV1bSc7XG5cbiAgICBpZiAocGFyZW50UGFpci5pc0xvY2tlZCkge1xuICAgICAga2V5cmluZy51bmxvY2tQYWlyKHBhcmVudFBhaXIuYWRkcmVzcyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSAocGFnZSAtIDEpICogbGltaXQgKyAoaXNFdm0gPyAxIDogMCk7XG4gICAgY29uc3QgZW5kID0gc3RhcnQgKyBsaW1pdDtcblxuICAgIGNvbnN0IHJlc3VsdDogRGVyaXZlQWNjb3VudEluZm9bXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIGNvbnN0IHN1cmkgPSBgLy8ke2l9YDtcbiAgICAgIGNvbnN0IHBhaXIgPSBpc0V2bSA/IHBhcmVudFBhaXIuZGVyaXZlRXZtKGksIHt9KSA6IHBhcmVudFBhaXIuZGVyaXZlKHN1cmksIHt9KTtcblxuICAgICAgcmVzdWx0LnB1c2goeyBhZGRyZXNzOiBwYWlyLmFkZHJlc3MsIHN1cmk6IHN1cmkgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdDogcmVzdWx0XG4gICAgfTtcbiAgfVxuXG4gIC8vIENoYWluU2VydmljZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHByaXZhdGUgYXN5bmMgc3Vic2NyaWJlQ2hhaW5JbmZvTWFwIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPj4ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoY2hhaW5TZXJ2aWNlLnN1YnNjcmliZUNoYWluSW5mb01hcCknPihpZCwgcG9ydCk7XG4gICAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICAgY29uc3QgY2hhaW5JbmZvTWFwU3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZUNoYWluSW5mb01hcCgpLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiAocnMpID0+IHtcbiAgICAgICAgaWYgKHJlYWR5KSB7XG4gICAgICAgICAgY2IocnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCBjaGFpbkluZm9NYXBTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy4ja29uaVN0YXRlLmV2ZW50U2VydmljZS53YWl0Q2hhaW5SZWFkeTtcbiAgICByZWFkeSA9IHRydWU7XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmdldENoYWluSW5mb01hcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVDaGFpblN0YXRlTWFwIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUmVjb3JkPHN0cmluZywgX0NoYWluU3RhdGU+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKGNoYWluU2VydmljZS5zdWJzY3JpYmVDaGFpblN0YXRlTWFwKSc+KGlkLCBwb3J0KTtcbiAgICBjb25zdCBjaGFpblN0YXRlTWFwU3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZUNoYWluU3RhdGVNYXAoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIGNoYWluU3RhdGVNYXBTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5nZXRDaGFpblN0YXRlTWFwKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1YnNjcmliZUFzc2V0UmVnaXN0cnkgKGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIF9DaGFpbkFzc2V0Pj4ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkoY2hhaW5TZXJ2aWNlLnN1YnNjcmliZUFzc2V0UmVnaXN0cnkpJz4oaWQsIHBvcnQpO1xuICAgIGxldCByZWFkeSA9IGZhbHNlO1xuICAgIGNvbnN0IGFzc2V0UmVnaXN0cnlTdWJzY3JpcHRpb24gPSB0aGlzLiNrb25pU3RhdGUuc3Vic2NyaWJlQXNzZXRSZWdpc3RyeSgpLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiAocnMpID0+IHtcbiAgICAgICAgaWYgKHJlYWR5KSB7XG4gICAgICAgICAgY2IocnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCBhc3NldFJlZ2lzdHJ5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5ldmVudFNlcnZpY2Uud2FpdEFzc2V0UmVhZHk7XG4gICAgcmVhZHkgPSB0cnVlO1xuXG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5nZXRBc3NldFJlZ2lzdHJ5KCk7XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZU11bHRpQ2hhaW5Bc3NldE1hcCAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFJlY29yZDxzdHJpbmcsIF9NdWx0aUNoYWluQXNzZXQ+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKGNoYWluU2VydmljZS5zdWJzY3JpYmVNdWx0aUNoYWluQXNzZXRNYXApJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IG11bHRpQ2hhaW5Bc3NldFN1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5zdWJzY3JpYmVNdWx0aUNoYWluQXNzZXRNYXAoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIG11bHRpQ2hhaW5Bc3NldFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmdldE11bHRpQ2hhaW5Bc3NldE1hcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVYY21SZWZNYXAgKGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBSZWNvcmQ8c3RyaW5nLCBfQXNzZXRSZWY+IHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKGNoYWluU2VydmljZS5zdWJzY3JpYmVYY21SZWZNYXApJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IHhjbVJlZlN1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5zdWJzY3JpYmVYY21SZWZNYXAoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHJzKSA9PiB7XG4gICAgICAgIGNiKHJzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIHhjbVJlZlN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmdldFhjbVJlZk1hcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTdXBwb3J0ZWRTbWFydENvbnRyYWN0VHlwZXMgKCkge1xuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUuZ2V0U3VwcG9ydGVkU21hcnRDb250cmFjdFR5cGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGdldFRyYW5zYWN0aW9uICh7IGlkIH06IFJlcXVlc3RHZXRUcmFuc2FjdGlvbik6IFNXVHJhbnNhY3Rpb25SZXN1bHQge1xuICAgIGNvbnN0IHsgdHJhbnNhY3Rpb24sIC4uLnRyYW5zYWN0aW9uUmVzdWx0IH0gPSB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmdldFRyYW5zYWN0aW9uKGlkKTtcblxuICAgIHJldHVybiB0cmFuc2FjdGlvblJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlVHJhbnNhY3Rpb25zIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUmVjb3JkPHN0cmluZywgU1dUcmFuc2FjdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkodHJhbnNhY3Rpb25zLnN1YnNjcmliZSknPihpZCwgcG9ydCk7XG5cbiAgICBmdW5jdGlvbiBjb252ZXJ0UnMgKHJzOiBSZWNvcmQ8c3RyaW5nLCBTV1RyYW5zYWN0aW9uPik6IFJlY29yZDxzdHJpbmcsIFNXVHJhbnNhY3Rpb25SZXN1bHQ+IHtcbiAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMocnMpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgYWRkaXRpb25hbFZhbGlkYXRvciwgZXZlbnRzSGFuZGxlciwgdHJhbnNhY3Rpb24sIC4uLnRyYW5zYWN0aW9uUmVzdWx0IH0gPSB2YWx1ZTtcblxuICAgICAgICByZXR1cm4gW2tleSwgdHJhbnNhY3Rpb25SZXN1bHRdO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGNvbnN0IHRyYW5zYWN0aW9uc1N1YmplY3QgPSB0aGlzLiNrb25pU3RhdGUudHJhbnNhY3Rpb25TZXJ2aWNlLmdldFRyYW5zYWN0aW9uU3ViamVjdCgpO1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uc1N1YnNjcmlwdGlvbiA9IHRyYW5zYWN0aW9uc1N1YmplY3Quc3Vic2NyaWJlKChycykgPT4ge1xuICAgICAgY2IoY29udmVydFJzKHJzKSk7XG4gICAgfSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0cmFuc2FjdGlvbnNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb252ZXJ0UnModHJhbnNhY3Rpb25zU3ViamVjdC5nZXRWYWx1ZSgpKTtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlTm90aWZpY2F0aW9ucyAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCkge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkobm90aWZpY2F0aW9ucy5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IG5vdGlmaWNhdGlvblN1YmplY3QgPSB0aGlzLiNrb25pU3RhdGUubm90aWZpY2F0aW9uU2VydmljZS5nZXROb3RpZmljYXRpb25TdWJqZWN0KCk7XG5cbiAgICBjb25zdCBub3RpZmljYXRpb25TdWJzY3JpcHRpb24gPSBub3RpZmljYXRpb25TdWJqZWN0LnN1YnNjcmliZSgocnMpID0+IHtcbiAgICAgIGNiKHJzKTtcbiAgICB9KTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIG5vdGlmaWNhdGlvblN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvblN1YmplY3QudmFsdWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbG9hZENyb24gKHsgZGF0YSB9OiBDcm9uUmVsb2FkUmVxdWVzdCkge1xuICAgIGlmIChkYXRhID09PSAnbmZ0Jykge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5yZWxvYWROZnQoKTtcbiAgICB9IGVsc2UgaWYgKGRhdGEgPT09ICdzdGFraW5nJykge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5yZWxvYWRTdGFraW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldExvZ29NYXAgKCkge1xuICAgIGNvbnN0IFtjaGFpbkxvZ29NYXAsIGFzc2V0TG9nb01hcF0gPSBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy4ja29uaVN0YXRlLmNoYWluU2VydmljZS5nZXRDaGFpbkxvZ29NYXAoKSwgdGhpcy4ja29uaVN0YXRlLmNoYWluU2VydmljZS5nZXRBc3NldExvZ29NYXAoKV0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluTG9nb01hcCxcbiAgICAgIGFzc2V0TG9nb01hcFxuICAgIH07XG4gIH1cblxuICAvLyBQaGlzaGluZyBkZXRlY3RcblxuICBwcml2YXRlIGFzeW5jIHBhc3NQaGlzaGluZ1BhZ2UgKHsgdXJsIH06IFJlcXVlc3RQYXNzUGhpc2hpbmdQYWdlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5hcHByb3ZlUGFzc1BoaXNoaW5nUGFnZSh1cmwpO1xuICB9XG5cbiAgLy8vIFdhbGxldCBjb25uZWN0XG5cbiAgLy8gQ29ubmVjdFxuICBwcml2YXRlIGFzeW5jIGNvbm5lY3RXYWxsZXRDb25uZWN0ICh7IHVyaSB9OiBSZXF1ZXN0Q29ubmVjdFdhbGxldENvbm5lY3QpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBhd2FpdCB0aGlzLiNrb25pU3RhdGUud2FsbGV0Q29ubmVjdFNlcnZpY2UuY29ubmVjdCh1cmkpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGNvbm5lY3RXQ1N1YnNjcmliZSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFdhbGxldENvbm5lY3RTZXNzaW9uUmVxdWVzdFtdIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKHdhbGxldENvbm5lY3QucmVxdWVzdHMuY29ubmVjdC5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5yZXF1ZXN0U2VydmljZS5jb25uZWN0V0NTdWJqZWN0LnN1YnNjcmliZSgocmVxdWVzdHM6IFdhbGxldENvbm5lY3RTZXNzaW9uUmVxdWVzdFtdKTogdm9pZCA9PlxuICAgICAgY2IocmVxdWVzdHMpXG4gICAgKTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5yZXF1ZXN0U2VydmljZS5hbGxDb25uZWN0V0NSZXF1ZXN0cztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYXBwcm92ZVdhbGxldENvbm5lY3RTZXNzaW9uICh7IGFjY291bnRzOiBzZWxlY3RlZEFjY291bnRzLCBpZCB9OiBSZXF1ZXN0QXBwcm92ZUNvbm5lY3RXYWxsZXRTZXNzaW9uKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuI2tvbmlTdGF0ZS5yZXF1ZXN0U2VydmljZS5nZXRDb25uZWN0V0NSZXF1ZXN0KGlkKTtcblxuICAgIGlmIChpc1Byb3Bvc2FsRXhwaXJlZChyZXF1ZXN0LnJlcXVlc3QucGFyYW1zKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcHJvcG9zYWwgaGFzIGJlZW4gZXhwaXJlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHdjSWQgPSByZXF1ZXN0LnJlcXVlc3QuaWQ7XG4gICAgY29uc3QgcGFyYW1zID0gcmVxdWVzdC5yZXF1ZXN0LnBhcmFtcztcblxuICAgIGNvbnN0IHJlcXVpcmVkTmFtZXNwYWNlczogUHJvcG9zYWxUeXBlcy5SZXF1aXJlZE5hbWVzcGFjZXMgPSBwYXJhbXMucmVxdWlyZWROYW1lc3BhY2VzO1xuICAgIGNvbnN0IG9wdGlvbmFsTmFtZXNwYWNlczogUHJvcG9zYWxUeXBlcy5PcHRpb25hbE5hbWVzcGFjZXMgPSBwYXJhbXMub3B0aW9uYWxOYW1lc3BhY2VzIHx8IHt9O1xuXG4gICAgY29uc3QgYXZhaWxhYmxlTmFtZXNwYWNlczogUHJvcG9zYWxUeXBlcy5SZXF1aXJlZE5hbWVzcGFjZXMgPSB7fTtcblxuICAgIGNvbnN0IG5hbWVzcGFjZXM6IFNlc3Npb25UeXBlcy5OYW1lc3BhY2VzID0ge307XG4gICAgY29uc3QgY2hhaW5JbmZvTWFwID0gdGhpcy4ja29uaVN0YXRlLmdldENoYWluSW5mb01hcCgpO1xuXG4gICAgT2JqZWN0LmVudHJpZXMocmVxdWlyZWROYW1lc3BhY2VzKVxuICAgICAgLmZvckVhY2goKFtrZXksIG5hbWVzcGFjZV0pID0+IHtcbiAgICAgICAgaWYgKGlzU3VwcG9ydFdhbGxldENvbm5lY3ROYW1lc3BhY2Uoa2V5KSkge1xuICAgICAgICAgIGlmIChuYW1lc3BhY2UuY2hhaW5zKSB7XG4gICAgICAgICAgICBjb25zdCB1blN1cHBvcnRDaGFpbnMgPSBuYW1lc3BhY2UuY2hhaW5zLmZpbHRlcigoY2hhaW4pID0+ICFpc1N1cHBvcnRXYWxsZXRDb25uZWN0Q2hhaW4oY2hhaW4sIGNoYWluSW5mb01hcCkpO1xuXG4gICAgICAgICAgICBpZiAodW5TdXBwb3J0Q2hhaW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0U2RrRXJyb3IoJ1VOU1VQUE9SVEVEX0NIQUlOUycpLm1lc3NhZ2UgKyAnICcgKyB1blN1cHBvcnRDaGFpbnMudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF2YWlsYWJsZU5hbWVzcGFjZXNba2V5XSA9IG5hbWVzcGFjZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGdldFNka0Vycm9yKCdVTlNVUFBPUlRFRF9OQU1FU1BBQ0VfS0VZJykubWVzc2FnZSArICcgJyArIGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgT2JqZWN0LmVudHJpZXMob3B0aW9uYWxOYW1lc3BhY2VzKVxuICAgICAgLmZvckVhY2goKFtrZXksIG5hbWVzcGFjZV0pID0+IHtcbiAgICAgICAgaWYgKGlzU3VwcG9ydFdhbGxldENvbm5lY3ROYW1lc3BhY2Uoa2V5KSkge1xuICAgICAgICAgIGlmIChuYW1lc3BhY2UuY2hhaW5zKSB7XG4gICAgICAgICAgICBjb25zdCBzdXBwb3J0Q2hhaW5zID0gbmFtZXNwYWNlLmNoYWlucy5maWx0ZXIoKGNoYWluKSA9PiBpc1N1cHBvcnRXYWxsZXRDb25uZWN0Q2hhaW4oY2hhaW4sIGNoYWluSW5mb01hcCkpIHx8IFtdO1xuXG4gICAgICAgICAgICBjb25zdCByZXF1aXJlZE5hbWVTcGFjZSA9IGF2YWlsYWJsZU5hbWVzcGFjZXNba2V5XTtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRDaGFpbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgIGlmIChyZXF1aXJlZE5hbWVTcGFjZSkge1xuICAgICAgICAgICAgICBhdmFpbGFibGVOYW1lc3BhY2VzW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgY2hhaW5zOiBbLi4uKHJlcXVpcmVkTmFtZVNwYWNlLmNoYWlucyB8fCBkZWZhdWx0Q2hhaW5zKSwgLi4uKHN1cHBvcnRDaGFpbnMgfHwgZGVmYXVsdENoYWlucyldLFxuICAgICAgICAgICAgICAgIGV2ZW50czogcmVxdWlyZWROYW1lU3BhY2UuZXZlbnRzLFxuICAgICAgICAgICAgICAgIG1ldGhvZHM6IHJlcXVpcmVkTmFtZVNwYWNlLm1ldGhvZHNcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChzdXBwb3J0Q2hhaW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGF2YWlsYWJsZU5hbWVzcGFjZXNba2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgIGNoYWluczogc3VwcG9ydENoYWlucyxcbiAgICAgICAgICAgICAgICAgIGV2ZW50czogbmFtZXNwYWNlLmV2ZW50cyxcbiAgICAgICAgICAgICAgICAgIG1ldGhvZHM6IG5hbWVzcGFjZS5tZXRob2RzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBPYmplY3QuZW50cmllcyhhdmFpbGFibGVOYW1lc3BhY2VzKVxuICAgICAgLmZvckVhY2goKFtrZXksIG5hbWVzcGFjZV0pID0+IHtcbiAgICAgICAgaWYgKG5hbWVzcGFjZS5jaGFpbnMpIHtcbiAgICAgICAgICBjb25zdCBhY2NvdW50czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICAgIGNvbnN0IGNoYWlucyA9IHVuaXF1ZVN0cmluZ0FycmF5KG5hbWVzcGFjZS5jaGFpbnMpO1xuXG4gICAgICAgICAgY2hhaW5zLmZvckVhY2goKGNoYWluKSA9PiB7XG4gICAgICAgICAgICBhY2NvdW50cy5wdXNoKC4uLihzZWxlY3RlZEFjY291bnRzLmZpbHRlcigoYWRkcmVzcykgPT4gaXNFdGhlcmV1bUFkZHJlc3MoYWRkcmVzcykgPT09IChrZXkgPT09IFdBTExFVF9DT05ORUNUX0VJUDE1NV9OQU1FU1BBQ0UpKS5tYXAoKGFkZHJlc3MpID0+IGAke2NoYWlufToke2FkZHJlc3N9YCkpKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG5hbWVzcGFjZXNba2V5XSA9IHtcbiAgICAgICAgICAgIGFjY291bnRzLFxuICAgICAgICAgICAgbWV0aG9kczogbmFtZXNwYWNlLm1ldGhvZHMsXG4gICAgICAgICAgICBldmVudHM6IG5hbWVzcGFjZS5ldmVudHMsXG4gICAgICAgICAgICBjaGFpbnM6IGNoYWluc1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0OiBSZXN1bHRBcHByb3ZlV2FsbGV0Q29ubmVjdFNlc3Npb24gPSB7XG4gICAgICBpZDogd2NJZCxcbiAgICAgIG5hbWVzcGFjZXM6IG5hbWVzcGFjZXMsXG4gICAgICByZWxheVByb3RvY29sOiBwYXJhbXMucmVsYXlzWzBdLnByb3RvY29sXG4gICAgfTtcblxuICAgIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS53YWxsZXRDb25uZWN0U2VydmljZS5hcHByb3ZlU2Vzc2lvbihyZXN1bHQpO1xuICAgIHJlcXVlc3QucmVzb2x2ZSgpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlamVjdFdhbGxldENvbm5lY3RTZXNzaW9uICh7IGlkIH06IFJlcXVlc3RSZWplY3RDb25uZWN0V2FsbGV0U2Vzc2lvbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLiNrb25pU3RhdGUucmVxdWVzdFNlcnZpY2UuZ2V0Q29ubmVjdFdDUmVxdWVzdChpZCk7XG5cbiAgICBjb25zdCB3Y0lkID0gcmVxdWVzdC5yZXF1ZXN0LmlkO1xuXG4gICAgaWYgKGlzUHJvcG9zYWxFeHBpcmVkKHJlcXVlc3QucmVxdWVzdC5wYXJhbXMpKSB7XG4gICAgICByZXF1ZXN0LnJlamVjdChuZXcgRXJyb3IoJ1RoZSBwcm9wb3NhbCBoYXMgYmVlbiBleHBpcmVkJykpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLiNrb25pU3RhdGUud2FsbGV0Q29ubmVjdFNlcnZpY2UucmVqZWN0U2Vzc2lvbih3Y0lkKTtcbiAgICByZXF1ZXN0LnJlamVjdChuZXcgRXJyb3IoJ1VTRVJfUkVKRUNURUQnKSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlV2FsbGV0Q29ubmVjdFNlc3Npb25zIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogU2Vzc2lvblR5cGVzLlN0cnVjdFtdIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKHdhbGxldENvbm5lY3Quc2Vzc2lvbi5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuXG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLndhbGxldENvbm5lY3RTZXJ2aWNlLnNlc3Npb25TdWJqZWN0LnN1YnNjcmliZSgocnMpID0+IHtcbiAgICAgIGNiKHJzKTtcbiAgICB9KTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS53YWxsZXRDb25uZWN0U2VydmljZS5zZXNzaW9ucztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGlzY29ubmVjdFdhbGxldENvbm5lY3RTZXNzaW9uICh7IHRvcGljIH06IFJlcXVlc3REaXNjb25uZWN0V2FsbGV0Q29ubmVjdFNlc3Npb24pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBhd2FpdCB0aGlzLiNrb25pU3RhdGUud2FsbGV0Q29ubmVjdFNlcnZpY2UuZGlzY29ubmVjdCh0b3BpYyk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgV0NOb3RTdXBwb3J0U3Vic2NyaWJlIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogV2FsbGV0Q29ubmVjdE5vdFN1cHBvcnRSZXF1ZXN0W10ge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwcmkod2FsbGV0Q29ubmVjdC5yZXF1ZXN0cy5ub3RTdXBwb3J0LnN1YnNjcmliZSknPihpZCwgcG9ydCk7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnJlcXVlc3RTZXJ2aWNlLm5vdFN1cHBvcnRXQ1N1YmplY3Quc3Vic2NyaWJlKChyZXF1ZXN0czogV2FsbGV0Q29ubmVjdE5vdFN1cHBvcnRSZXF1ZXN0W10pOiB2b2lkID0+XG4gICAgICBjYihyZXF1ZXN0cylcbiAgICApO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnJlcXVlc3RTZXJ2aWNlLmFsbE5vdFN1cHBvcnRXQ1JlcXVlc3RzO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHByb3ZlV2FsbGV0Q29ubmVjdE5vdFN1cHBvcnQgKHsgaWQgfTogUmVxdWVzdEFwcHJvdmVXYWxsZXRDb25uZWN0Tm90U3VwcG9ydCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLiNrb25pU3RhdGUucmVxdWVzdFNlcnZpY2UuZ2V0Tm90U3VwcG9ydFdDUmVxdWVzdChpZCk7XG5cbiAgICByZXF1ZXN0LnJlc29sdmUoKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSByZWplY3RXYWxsZXRDb25uZWN0Tm90U3VwcG9ydCAoeyBpZCB9OiBSZXF1ZXN0UmVqZWN0V2FsbGV0Q29ubmVjdE5vdFN1cHBvcnQpOiBib29sZWFuIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy4ja29uaVN0YXRlLnJlcXVlc3RTZXJ2aWNlLmdldE5vdFN1cHBvcnRXQ1JlcXVlc3QoaWQpO1xuXG4gICAgcmVxdWVzdC5yZWplY3QobmV3IEVycm9yKCdVU0VSX1JFSkVDVEVEJykpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLy8gTWFudGFcblxuICBwcml2YXRlIGFzeW5jIGVuYWJsZU1hbnRhUGF5ICh7IGFkZHJlc3MsIHBhc3N3b3JkIH06IE1hbnRhUGF5RW5hYmxlUGFyYW1zKTogUHJvbWlzZTxNYW50YVBheUVuYWJsZVJlc3BvbnNlPiB7IC8vIGFsd2F5cyB0YWtlcyB0aGUgY3VycmVudCBhY2NvdW50XG4gICAgZnVuY3Rpb24gdGltZW91dCAoKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTUwMCkpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLiNrb25pU3RhdGUuY2hhaW5TZXJ2aWNlLmVuYWJsZUNoYWluKF9ERUZBVUxUX01BTlRBX1pLX0NIQUlOKTtcbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2Uuc2V0TWFudGFaa0Fzc2V0U2V0dGluZ3ModHJ1ZSk7XG5cbiAgICAgIGNvbnN0IG1uZW1vbmljID0gdGhpcy5rZXlyaW5nRXhwb3J0TW5lbW9uaWMoeyBhZGRyZXNzLCBwYXNzd29yZCB9KTtcbiAgICAgIGNvbnN0IHsgY29ubmVjdGlvblN0YXR1cyB9ID0gdGhpcy4ja29uaVN0YXRlLmNoYWluU2VydmljZS5nZXRDaGFpblN0YXRlQnlLZXkoX0RFRkFVTFRfTUFOVEFfWktfQ0hBSU4pO1xuXG4gICAgICBpZiAoY29ubmVjdGlvblN0YXR1cyAhPT0gX0NoYWluQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQpIHsgLy8gVE9ETzogZG8gYmV0dGVyXG4gICAgICAgIGF3YWl0IHRpbWVvdXQoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmVuYWJsZU1hbnRhUGF5KHRydWUsIGFkZHJlc3MsIHBhc3N3b3JkLCBtbmVtb25pYy5yZXN1bHQpO1xuXG4gICAgICB0aGlzLiNza2lwQXV0b0xvY2sgPSB0cnVlO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlQ3VycmVudEFjY291bnRBZGRyZXNzKHsgYWRkcmVzcyB9KTtcbiAgICAgIGNvbnN0IHVuc3ViU3luY1Byb2dyZXNzID0gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmNoYWluU2VydmljZT8ubWFudGFQYXk/LnN1YnNjcmliZVN5bmNQcm9ncmVzcygpO1xuXG4gICAgICBjb25zb2xlLmRlYnVnKCdTdGFydCBpbml0aWFsIHN5bmMgZm9yIE1hbnRhUGF5Jyk7XG5cbiAgICAgIHRoaXMuI2tvbmlTdGF0ZS5pbml0aWFsU3luY01hbnRhUGF5KGFkZHJlc3MpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKCdGaW5pc2hlZCBpbml0aWFsIHN5bmMgZm9yIE1hbnRhUGF5Jyk7XG5cbiAgICAgICAgICB0aGlzLiNza2lwQXV0b0xvY2sgPSBmYWxzZTtcbiAgICAgICAgICB1bnN1YlN5bmNQcm9ncmVzcyAmJiB1bnN1YlN5bmNQcm9ncmVzcygpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIE1hbnRhUGF5JywgZSk7XG5cbiAgICAgICAgICB0aGlzLiNza2lwQXV0b0xvY2sgPSBmYWxzZTtcbiAgICAgICAgICB1bnN1YlN5bmNQcm9ncmVzcyAmJiB1bnN1YlN5bmNQcm9ncmVzcygpO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogISFyZXN1bHQsXG4gICAgICAgIG1lc3NhZ2U6IHJlc3VsdCA/IE1hbnRhUGF5RW5hYmxlTWVzc2FnZS5TVUNDRVNTIDogTWFudGFQYXlFbmFibGVNZXNzYWdlLlVOS05PV05fRVJST1JcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbFxuICAgICAgaWYgKGUudG9TdHJpbmcoKSA9PT0gJ0Vycm9yOiBVbmFibGUgdG8gZGVjb2RlIHVzaW5nIHRoZSBzdXBwbGllZCBwYXNzcGhyYXNlJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IE1hbnRhUGF5RW5hYmxlTWVzc2FnZS5XUk9OR19QQVNTV09SRFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogTWFudGFQYXlFbmFibGVNZXNzYWdlLlVOS05PV05fRVJST1JcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0U3luY01hbnRhUGF5IChhZGRyZXNzOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy4ja29uaVN0YXRlLmNoYWluU2VydmljZT8ubWFudGFQYXk/LmdldFN5bmNTdGF0ZSgpLmlzU3luY2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuI3NraXBBdXRvTG9jayA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy5zYXZlQ3VycmVudEFjY291bnRBZGRyZXNzKHsgYWRkcmVzcyB9KTtcbiAgICBjb25zdCB1bnN1YlN5bmNQcm9ncmVzcyA9IGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5zdWJzY3JpYmVTeW5jUHJvZ3Jlc3MoKTtcblxuICAgIGNvbnNvbGUuZGVidWcoJ1N0YXJ0IGluaXRpYWwgc3luYyBmb3IgTWFudGFQYXknKTtcblxuICAgIHRoaXMuI2tvbmlTdGF0ZS5pbml0aWFsU3luY01hbnRhUGF5KGFkZHJlc3MpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ0ZpbmlzaGVkIGluaXRpYWwgc3luYyBmb3IgTWFudGFQYXknKTtcblxuICAgICAgICB0aGlzLiNza2lwQXV0b0xvY2sgPSBmYWxzZTtcbiAgICAgICAgdW5zdWJTeW5jUHJvZ3Jlc3MgJiYgdW5zdWJTeW5jUHJvZ3Jlc3MoKTtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBzeW5jIHN0YXRlIGlzIHNldCwganVzdCBpbiBjYXNlIGl0IGdldHMgdW5zdWJzY3JpYmVkXG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5zZXRTeW5jU3RhdGUoe1xuICAgICAgICAgIHByb2dyZXNzOiAxMDAsXG4gICAgICAgICAgaXNTeW5jaW5nOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBNYW50YVBheScsIGUpO1xuXG4gICAgICAgIHRoaXMuI3NraXBBdXRvTG9jayA9IGZhbHNlO1xuICAgICAgICB1bnN1YlN5bmNQcm9ncmVzcyAmJiB1bnN1YlN5bmNQcm9ncmVzcygpO1xuICAgICAgICB0aGlzLiNrb25pU3RhdGUuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8uc2V0U3luY1N0YXRlKHtcbiAgICAgICAgICBwcm9ncmVzczogMCxcbiAgICAgICAgICBpc1N5bmNpbmc6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRpc2FibGVNYW50YVBheSAoYWRkcmVzczogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5kaXNhYmxlTWFudGFQYXkoYWRkcmVzcyk7XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZU1hbnRhUGF5Q29uZmlnIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSB7XG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J3ByaShtYW50YVBheS5zdWJzY3JpYmVDb25maWcpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IG1hbnRhUGF5Q29uZmlnU3Vic2NyaXB0aW9uID0gdGhpcy4ja29uaVN0YXRlLnN1YnNjcmliZU1hbnRhUGF5Q29uZmlnKCkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChycykgPT4ge1xuICAgICAgICBjYihycyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCBtYW50YVBheUNvbmZpZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLmNhbmNlbFN1YnNjcmlwdGlvbihpZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmdldE1hbnRhUGF5Q29uZmlnKCdjYWxhbWFyaScpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVNYW50YVBheVN5bmNTdGF0ZSAoaWQ6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IE1hbnRhUGF5U3luY1N0YXRlIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHJpKG1hbnRhUGF5LnN1YnNjcmliZVN5bmNpbmdTdGF0ZSknPihpZCwgcG9ydCk7XG5cbiAgICBjb25zdCBzeW5jaW5nU3RhdGVTdWJzY3JpcHRpb24gPSB0aGlzLiNrb25pU3RhdGUuc3Vic2NyaWJlTWFudGFQYXlTeW5jU3RhdGUoKT8uc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChycykgPT4ge1xuICAgICAgICBjYihycyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlKGlkLCBzeW5jaW5nU3RhdGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5nZXRTeW5jU3RhdGUoKSB8fCB7XG4gICAgICBpc1N5bmNpbmc6IGZhbHNlLFxuICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICBuZWVkTWFudWFsU3luYzogZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgLy8vIE1ldGFkYXRhXG5cbiAgcHJpdmF0ZSBhc3luYyBmaW5kUmF3TWV0YWRhdGEgKHsgZ2VuZXNpc0hhc2ggfTogUmVxdWVzdEZpbmRSYXdNZXRhZGF0YSk6IFByb21pc2U8UmVzcG9uc2VGaW5kUmF3TWV0YWRhdGE+IHtcbiAgICBjb25zdCB7IG1ldGFkYXRhLCBzcGVjVmVyc2lvbiB9ID0gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmZpbmRNZXRhZGF0YShnZW5lc2lzSGFzaCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmF3TWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgICAgc3BlY1ZlcnNpb25cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXNvbHZlRG9tYWluQnlBZGRyZXNzIChyZXF1ZXN0OiBSZXNvbHZlRG9tYWluUmVxdWVzdCkge1xuICAgIGNvbnN0IGNoYWluQXBpID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShyZXF1ZXN0LmNoYWluKTtcblxuICAgIHJldHVybiBhd2FpdCByZXNvbHZlQXplcm9Eb21haW5Ub0FkZHJlc3MocmVxdWVzdC5kb21haW4sIHJlcXVlc3QuY2hhaW4sIGNoYWluQXBpLmFwaSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlc29sdmVBZGRyZXNzQnlEb21haW4gKHJlcXVlc3Q6IFJlc29sdmVBZGRyZXNzVG9Eb21haW5SZXF1ZXN0KSB7XG4gICAgY29uc3QgY2hhaW5BcGkgPSB0aGlzLiNrb25pU3RhdGUuZ2V0U3Vic3RyYXRlQXBpKHJlcXVlc3QuY2hhaW4pO1xuXG4gICAgcmV0dXJuIGF3YWl0IHJlc29sdmVBemVyb0FkZHJlc3NUb0RvbWFpbihyZXF1ZXN0LmFkZHJlc3MsIHJlcXVlc3QuY2hhaW4sIGNoYWluQXBpLmFwaSk7XG4gIH1cblxuICAvLy8gSW5qZWN0IGFjY291bnRcbiAgcHJpdmF0ZSBhZGRJbmplY3RzIChyZXF1ZXN0OiBSZXF1ZXN0QWRkSW5qZWN0ZWRBY2NvdW50cyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5hZGRJbmplY3RBY2NvdW50cyhyZXF1ZXN0LmFjY291bnRzKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVJbmplY3RzIChyZXF1ZXN0OiBSZXF1ZXN0UmVtb3ZlSW5qZWN0ZWRBY2NvdW50cyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5yZW1vdmVJbmplY3RBY2NvdW50cyhyZXF1ZXN0LmFkZHJlc3Nlcyk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVxdWlyZS1hd2FpdFxuICBwdWJsaWMgYXN5bmMgaGFuZGxlPFRNZXNzYWdlVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlcz4gKGlkOiBzdHJpbmcsIHR5cGU6IFRNZXNzYWdlVHlwZSwgcmVxdWVzdDogUmVxdWVzdFR5cGVzW1RNZXNzYWdlVHlwZV0sIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBQcm9taXNlPFJlc3BvbnNlVHlwZTxUTWVzc2FnZVR5cGU+PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuI2xvY2tUaW1lT3V0KTtcblxuICAgIGlmICh0aGlzLiN0aW1lQXV0b0xvY2sgPiAwKSB7XG4gICAgICB0aGlzLiNsb2NrVGltZU91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuI3NraXBBdXRvTG9jaykge1xuICAgICAgICAgIHRoaXMua2V5cmluZ0xvY2soKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcy4jdGltZUF1dG9Mb2NrICogNjAgKiAxMDAwKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIC8vLyBDbG9uZSBmcm9tIFBvbGthZG90SnNcbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5jcmVhdGUuZXh0ZXJuYWwpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNDcmVhdGVFeHRlcm5hbChyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50Q3JlYXRlRXh0ZXJuYWwpO1xuXG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMuY3JlYXRlLmhhcmR3YXJlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzQ3JlYXRlSGFyZHdhcmUocmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudENyZWF0ZUhhcmR3YXJlKTtcblxuICAgICAgY2FzZSAncHJpKGFjY291bnRzLmNyZWF0ZS5zdXJpKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzQ3JlYXRlU3VyaShyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50Q3JlYXRlU3VyaSk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5jaGFuZ2VQYXNzd29yZCknOlxuICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50c0NoYW5nZVBhc3N3b3JkKHJlcXVlc3QgYXMgUmVxdWVzdEFjY291bnRDaGFuZ2VQYXNzd29yZCk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5leHBvcnQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNFeHBvcnQocmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudEV4cG9ydCk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5zaG93KSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzU2hvdyhyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50U2hvdyk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5zdWJzY3JpYmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNTdWJzY3JpYmUoaWQsIHBvcnQpO1xuXG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMudmFsaWRhdGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNWYWxpZGF0ZShyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50VmFsaWRhdGUpO1xuXG4gICAgICBjYXNlICdwcmkobWV0YWRhdGEuYXBwcm92ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YUFwcHJvdmUocmVxdWVzdCBhcyBSZXF1ZXN0TWV0YWRhdGFBcHByb3ZlKTtcblxuICAgICAgY2FzZSAncHJpKG1ldGFkYXRhLmdldCknOlxuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YUdldChyZXF1ZXN0IGFzIHN0cmluZyk7XG5cbiAgICAgIGNhc2UgJ3ByaShtZXRhZGF0YS5saXN0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhTGlzdCgpO1xuXG4gICAgICBjYXNlICdwcmkobWV0YWRhdGEucmVqZWN0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhUmVqZWN0KHJlcXVlc3QgYXMgUmVxdWVzdE1ldGFkYXRhUmVqZWN0KTtcblxuICAgICAgY2FzZSAncHJpKG1ldGFkYXRhLnJlcXVlc3RzKSc6XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhU3Vic2NyaWJlKGlkLCBwb3J0KTtcblxuICAgICAgY2FzZSAncHJpKGRlcml2YXRpb24uY3JlYXRlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmRlcml2YXRpb25DcmVhdGUocmVxdWVzdCBhcyBSZXF1ZXN0RGVyaXZlQ3JlYXRlKTtcblxuICAgICAgY2FzZSAncHJpKGRlcml2YXRpb24udmFsaWRhdGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVyaXZhdGlvblZhbGlkYXRlKHJlcXVlc3QgYXMgUmVxdWVzdERlcml2ZVZhbGlkYXRlKTtcblxuICAgICAgY2FzZSAncHJpKGpzb24ucmVzdG9yZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5qc29uUmVzdG9yZShyZXF1ZXN0IGFzIFJlcXVlc3RKc29uUmVzdG9yZSk7XG5cbiAgICAgIGNhc2UgJ3ByaShqc29uLmJhdGNoUmVzdG9yZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaFJlc3RvcmUocmVxdWVzdCBhcyBSZXF1ZXN0QmF0Y2hSZXN0b3JlKTtcblxuICAgICAgY2FzZSAncHJpKGpzb24uYWNjb3VudC5pbmZvKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmpzb25HZXRBY2NvdW50SW5mbyhyZXF1ZXN0IGFzIEtleXJpbmdQYWlyJEpzb24pO1xuXG4gICAgICBjYXNlICdwcmkoc2VlZC5jcmVhdGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VlZENyZWF0ZShyZXF1ZXN0IGFzIFJlcXVlc3RTZWVkQ3JlYXRlKTtcblxuICAgICAgY2FzZSAncHJpKHNlZWQudmFsaWRhdGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VlZFZhbGlkYXRlKHJlcXVlc3QgYXMgUmVxdWVzdFNlZWRWYWxpZGF0ZSk7XG5cbiAgICAgIGNhc2UgJ3ByaShzaWduaW5nLmFwcHJvdmUuc2lnbmF0dXJlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnNpZ25pbmdBcHByb3ZlU2lnbmF0dXJlKHJlcXVlc3QgYXMgUmVxdWVzdFNpZ25pbmdBcHByb3ZlU2lnbmF0dXJlKTtcblxuICAgICAgY2FzZSAncHJpKHNpZ25pbmcuY2FuY2VsKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnNpZ25pbmdDYW5jZWwocmVxdWVzdCBhcyBSZXF1ZXN0U2lnbmluZ0NhbmNlbCk7XG5cbiAgICAgIGNhc2UgJ3ByaShzaWduaW5nLnJlcXVlc3RzKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnNpZ25pbmdTdWJzY3JpYmUoaWQsIHBvcnQpO1xuXG4gICAgICBjYXNlICdwcmkod2luZG93Lm9wZW4pJzpcbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93T3BlbihyZXF1ZXN0IGFzIFdpbmRvd09wZW5QYXJhbXMpO1xuXG4gICAgICAvLy9cbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUuY2hhbmdlU2l0ZUFsbCknOlxuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VBdXRob3JpemF0aW9uQWxsKHJlcXVlc3QgYXMgUmVxdWVzdEF1dGhvcml6YXRpb24sIGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUuY2hhbmdlU2l0ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VBdXRob3JpemF0aW9uKHJlcXVlc3QgYXMgUmVxdWVzdEF1dGhvcml6YXRpb24sIGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUuY2hhbmdlU2l0ZVBlckFjY291bnQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlQXV0aG9yaXphdGlvblBlckFjYyhyZXF1ZXN0IGFzIFJlcXVlc3RBdXRob3JpemF0aW9uUGVyQWNjb3VudCwgaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKGF1dGhvcml6ZS5jaGFuZ2VTaXRlUGVyU2l0ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VBdXRob3JpemF0aW9uUGVyU2l0ZShyZXF1ZXN0IGFzIFJlcXVlc3RBdXRob3JpemF0aW9uUGVyU2l0ZSk7XG4gICAgICBjYXNlICdwcmkoYXV0aG9yaXplLmNoYW5nZVNpdGVCbG9jayknOlxuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VBdXRob3JpemF0aW9uQmxvY2socmVxdWVzdCBhcyBSZXF1ZXN0QXV0aG9yaXphdGlvbkJsb2NrKTtcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUuZm9yZ2V0U2l0ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5mb3JnZXRTaXRlKHJlcXVlc3QgYXMgUmVxdWVzdEZvcmdldFNpdGUsIGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUuZm9yZ2V0QWxsU2l0ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5mb3JnZXRBbGxTaXRlKGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUuYXBwcm92ZVYyKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhvcml6ZUFwcHJvdmVWMihyZXF1ZXN0IGFzIFJlcXVlc3RBdXRob3JpemVBcHByb3ZlVjIpO1xuICAgICAgY2FzZSAncHJpKGF1dGhvcml6ZS5yZWplY3RWMiknOlxuICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JpemVSZWplY3RWMihyZXF1ZXN0IGFzIFJlcXVlc3RBdXRob3JpemVSZWplY3QpO1xuICAgICAgY2FzZSAncHJpKGF1dGhvcml6ZS5jYW5jZWxWMiknOlxuICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JpemVDYW5jZWxWMihyZXF1ZXN0IGFzIFJlcXVlc3RBdXRob3JpemVDYW5jZWwpO1xuICAgICAgY2FzZSAncHJpKGF1dGhvcml6ZS5yZXF1ZXN0c1YyKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhvcml6ZVN1YnNjcmliZVYyKGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUubGlzdFYyKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmdldEF1dGhMaXN0VjIoKTtcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUudG9nZ2xlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZUF1dGhvcml6YXRpb24yKHJlcXVlc3QgYXMgc3RyaW5nKTtcbiAgICAgIGNhc2UgJ3ByaShzZXR0aW5ncy5jaGFuZ2VCYWxhbmNlc1Zpc2liaWxpdHkpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudG9nZ2xlQmFsYW5jZXNWaXNpYmlsaXR5KCk7XG5cbiAgICAgIC8vIFNldHRpbmdzXG4gICAgICBjYXNlICdwcmkoc2V0dGluZ3Muc3Vic2NyaWJlKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1YnNjcmliZVNldHRpbmdzKGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShzZXR0aW5ncy5zYXZlQWNjb3VudEFsbExvZ28pJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZUFjY291bnRBbGxMb2dvKHJlcXVlc3QgYXMgc3RyaW5nLCBpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkoc2V0dGluZ3Muc2F2ZUNhbWVyYSknOlxuICAgICAgICByZXR1cm4gdGhpcy5zZXRDYW1lcmEocmVxdWVzdCBhcyBSZXF1ZXN0Q2FtZXJhU2V0dGluZ3MpO1xuICAgICAgY2FzZSAncHJpKHNldHRpbmdzLnNhdmVUaGVtZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5zYXZlVGhlbWUocmVxdWVzdCBhcyBUaGVtZU5hbWVzKTtcbiAgICAgIGNhc2UgJ3ByaShzZXR0aW5ncy5zYXZlQnJvd3NlckNvbmZpcm1hdGlvblR5cGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZUJyb3dzZXJDb25maXJtYXRpb25UeXBlKHJlcXVlc3QgYXMgQnJvd3NlckNvbmZpcm1hdGlvblR5cGUpO1xuICAgICAgY2FzZSAncHJpKHNldHRpbmdzLnNhdmVBdXRvTG9ja1RpbWUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0QXV0b0xvY2tUaW1lKHJlcXVlc3QgYXMgUmVxdWVzdENoYW5nZVRpbWVBdXRvTG9jayk7XG4gICAgICBjYXNlICdwcmkoc2V0dGluZ3Muc2F2ZVVubG9ja1R5cGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0VW5sb2NrVHlwZShyZXF1ZXN0IGFzIFJlcXVlc3RVbmxvY2tUeXBlKTtcbiAgICAgIGNhc2UgJ3ByaShzZXR0aW5ncy5zYXZlRW5hYmxlQ2hhaW5QYXRyb2wpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0RW5hYmxlQ2hhaW5QYXRyb2wocmVxdWVzdCBhcyBSZXF1ZXN0Q2hhbmdlRW5hYmxlQ2hhaW5QYXRyb2wpO1xuICAgICAgY2FzZSAncHJpKHNldHRpbmdzLnNhdmVTaG93WmVyb0JhbGFuY2UpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0U2hvd1plcm9CYWxhbmNlKHJlcXVlc3QgYXMgUmVxdWVzdENoYW5nZVNob3daZXJvQmFsYW5jZSk7XG4gICAgICBjYXNlICdwcmkoc2V0dGluZ3Muc2F2ZUxhbmd1YWdlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnNldExhbmd1YWdlKHJlcXVlc3QgYXMgUmVxdWVzdENoYW5nZUxhbmd1YWdlKTtcbiAgICAgIGNhc2UgJ3ByaShzZXR0aW5ncy5zYXZlU2hvd0JhbGFuY2UpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0U2hvd0JhbGFuY2UocmVxdWVzdCBhcyBSZXF1ZXN0Q2hhbmdlU2hvd0JhbGFuY2UpO1xuXG4gICAgICBjYXNlICdwcmkocHJpY2UuZ2V0UHJpY2UpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0UHJpY2UoKTtcbiAgICAgIGNhc2UgJ3ByaShwcmljZS5nZXRTdWJzY3JpcHRpb24pJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc3Vic2NyaWJlUHJpY2UoaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKGJhbGFuY2UuZ2V0QmFsYW5jZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRCYWxhbmNlKCk7XG4gICAgICBjYXNlICdwcmkoYmFsYW5jZS5nZXRTdWJzY3JpcHRpb24pJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlQmFsYW5jZShpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkoY3Jvd2Rsb2FuLmdldENyb3dkbG9hbiknOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDcm93ZGxvYW4oKTtcbiAgICAgIGNhc2UgJ3ByaShjcm93ZGxvYW4uZ2V0U3Vic2NyaXB0aW9uKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZUNyb3dkbG9hbihpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkoZGVyaXZhdGlvbi5jcmVhdGVWMiknOlxuICAgICAgICByZXR1cm4gdGhpcy5kZXJpdmF0aW9uQ3JlYXRlVjIocmVxdWVzdCBhcyBSZXF1ZXN0RGVyaXZlQ3JlYXRlVjIpO1xuICAgICAgY2FzZSAncHJpKGpzb24ucmVzdG9yZVYyKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmpzb25SZXN0b3JlVjIocmVxdWVzdCBhcyBSZXF1ZXN0SnNvblJlc3RvcmVWMik7XG4gICAgICBjYXNlICdwcmkoanNvbi5iYXRjaFJlc3RvcmVWMiknOlxuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaFJlc3RvcmVWMihyZXF1ZXN0IGFzIFJlcXVlc3RCYXRjaFJlc3RvcmVWMik7XG4gICAgICBjYXNlICdwcmkobmZ0LmdldE5mdCknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXROZnQoKTtcbiAgICAgIGNhc2UgJ3ByaShuZnQuZ2V0U3Vic2NyaXB0aW9uKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1YnNjcmliZU5mdChpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkobmZ0Q29sbGVjdGlvbi5nZXROZnRDb2xsZWN0aW9uKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE5mdENvbGxlY3Rpb24oKTtcbiAgICAgIGNhc2UgJ3ByaShuZnRDb2xsZWN0aW9uLmdldFN1YnNjcmlwdGlvbiknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zdWJzY3JpYmVOZnRDb2xsZWN0aW9uKGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShzdGFraW5nLmdldFN0YWtpbmcpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3Rha2luZygpO1xuICAgICAgY2FzZSAncHJpKHN0YWtpbmcuZ2V0U3Vic2NyaXB0aW9uKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1YnNjcmliZVN0YWtpbmcoaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKHN0YWtpbmdSZXdhcmQuZ2V0U3Rha2luZ1Jld2FyZCknOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGFraW5nUmV3YXJkKCk7XG4gICAgICBjYXNlICdwcmkoc3Rha2luZ1Jld2FyZC5nZXRTdWJzY3JpcHRpb24pJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlU3Rha2luZ1Jld2FyZChpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkodHJhbnNhY3Rpb24uaGlzdG9yeS5nZXRTdWJzY3JpcHRpb24pJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc3Vic2NyaWJlSGlzdG9yeShpZCwgcG9ydCk7XG5cbiAgICAgIC8qIEFjY291bnQgbWFuYWdlbWVudCAqL1xuICAgICAgLy8gQWRkIGFjY291bnRcbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5jcmVhdGUuc3VyaVYyKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFjY291bnRzQ3JlYXRlU3VyaVYyKHJlcXVlc3QgYXMgUmVxdWVzdEFjY291bnRDcmVhdGVTdXJpVjIpO1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLmNyZWF0ZS5leHRlcm5hbFYyKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFjY291bnRzQ3JlYXRlRXh0ZXJuYWxWMihyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50Q3JlYXRlRXh0ZXJuYWxWMik7XG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMuY3JlYXRlLmhhcmR3YXJlVjIpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWNjb3VudHNDcmVhdGVIYXJkd2FyZVYyKHJlcXVlc3QgYXMgUmVxdWVzdEFjY291bnRDcmVhdGVIYXJkd2FyZVYyKTtcbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5jcmVhdGUuaGFyZHdhcmVNdWx0aXBsZSknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5hY2NvdW50c0NyZWF0ZUhhcmR3YXJlTXVsdGlwbGUocmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudENyZWF0ZUhhcmR3YXJlTXVsdGlwbGUpO1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLmNyZWF0ZS53aXRoU2VjcmV0KSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFjY291bnRzQ3JlYXRlV2l0aFNlY3JldChyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50Q3JlYXRlV2l0aFNlY3JldEtleSk7XG4gICAgICBjYXNlICdwcmkoc2VlZC5jcmVhdGVWMiknOlxuICAgICAgICByZXR1cm4gdGhpcy5zZWVkQ3JlYXRlVjIocmVxdWVzdCBhcyBSZXF1ZXN0U2VlZENyZWF0ZVYyKTtcblxuICAgICAgLy8gUmVtb3ZlIGFjY291bnRcbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5mb3JnZXQpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWNjb3VudHNGb3JnZXRPdmVycmlkZShyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50Rm9yZ2V0KTtcblxuICAgICAgLy8gVmFsaWRhdGUgYWNjb3VudFxuICAgICAgY2FzZSAncHJpKHNlZWQudmFsaWRhdGVWMiknOlxuICAgICAgICByZXR1cm4gdGhpcy5zZWVkVmFsaWRhdGVWMihyZXF1ZXN0IGFzIFJlcXVlc3RTZWVkVmFsaWRhdGVWMik7XG4gICAgICBjYXNlICdwcmkocHJpdmF0ZUtleS52YWxpZGF0ZVYyKSc6XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFtYXNrUHJpdmF0ZUtleVZhbGlkYXRlVjIocmVxdWVzdCBhcyBSZXF1ZXN0U2VlZFZhbGlkYXRlVjIpO1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLmNoZWNrUHVibGljQW5kU2VjcmV0S2V5KSc6XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrUHVibGljQW5kU2VjcmV0S2V5KHJlcXVlc3QgYXMgUmVxdWVzdENoZWNrUHVibGljQW5kU2VjcmV0S2V5KTtcblxuICAgICAgLy8gRXhwb3J0IGFjY291bnRcbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5leHBvcnRQcml2YXRlS2V5KSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRFeHBvcnRQcml2YXRlS2V5KHJlcXVlc3QgYXMgUmVxdWVzdEFjY291bnRFeHBvcnRQcml2YXRlS2V5KTtcblxuICAgICAgLy8gU3Vic2NyaWJlIGFjY291bnRcbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5zdWJzY3JpYmVXaXRoQ3VycmVudEFkZHJlc3MpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWNjb3VudHNHZXRBbGxXaXRoQ3VycmVudEFkZHJlc3MoaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLnN1YnNjcmliZUFjY291bnRzSW5wdXRBZGRyZXNzKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzR2V0QWxsKGlkLCBwb3J0KTtcblxuICAgICAgLy8gU2F2ZSBjdXJyZW50IGFjY291bnRcbiAgICAgIGNhc2UgJ3ByaShjdXJyZW50QWNjb3VudC5zYXZlQWRkcmVzcyknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYXZlQ3VycmVudEFjY291bnRBZGRyZXNzKHJlcXVlc3QgYXMgUmVxdWVzdEN1cnJlbnRBY2NvdW50QWRkcmVzcyk7XG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMudXBkYXRlQ3VycmVudEFkZHJlc3MpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ3VycmVudEFjY291bnRBZGRyZXNzKHJlcXVlc3QgYXMgc3RyaW5nKTtcblxuICAgICAgLy8gRWRpdCBhY2NvdW50XG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMuZWRpdCknOlxuICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50c0VkaXQocmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudEVkaXQpO1xuXG4gICAgICAvLyBTYXZlIGNvbnRhY3QgYWRkcmVzc1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLnNhdmVSZWNlbnQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVJlY2VudEFjY291bnQocmVxdWVzdCBhcyBSZXF1ZXN0U2F2ZVJlY2VudEFjY291bnQpO1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLmVkaXRDb250YWN0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLmVkaXRDb250YWN0QWNjb3VudChyZXF1ZXN0IGFzIFJlcXVlc3RFZGl0Q29udGFjdEFjY291bnQpO1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLmRlbGV0ZUNvbnRhY3QpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlQ29udGFjdEFjY291bnQocmVxdWVzdCBhcyBSZXF1ZXN0RGVsZXRlQ29udGFjdEFjY291bnQpO1xuXG4gICAgICAvLyBTdWJzY3JpYmUgYWRkcmVzc1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLnN1YnNjcmliZUFkZHJlc3NlcyknOlxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVBZGRyZXNzZXMoaWQsIHBvcnQpO1xuXG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMucmVzb2x2ZURvbWFpblRvQWRkcmVzcyknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZXNvbHZlRG9tYWluQnlBZGRyZXNzKHJlcXVlc3QgYXMgUmVzb2x2ZURvbWFpblJlcXVlc3QpO1xuICAgICAgY2FzZSAncHJpKGFjY291bnRzLnJlc29sdmVBZGRyZXNzVG9Eb21haW4pJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVzb2x2ZUFkZHJlc3NCeURvbWFpbihyZXF1ZXN0IGFzIFJlc29sdmVBZGRyZXNzVG9Eb21haW5SZXF1ZXN0KTtcblxuICAgICAgLy8gSW5qZWN0IGFjY291bnRcbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5pbmplY3QuYWRkKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFkZEluamVjdHMocmVxdWVzdCBhcyBSZXF1ZXN0QWRkSW5qZWN0ZWRBY2NvdW50cyk7XG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMuaW5qZWN0LnJlbW92ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVJbmplY3RzKHJlcXVlc3QgYXMgUmVxdWVzdFJlbW92ZUluamVjdGVkQWNjb3VudHMpO1xuXG4gICAgICAgIC8qIEFjY291bnQgbWFuYWdlbWVudCAqL1xuXG4gICAgICAvLyBDaGFpblNlcnZpY2VcbiAgICAgIGNhc2UgJ3ByaShjaGFpblNlcnZpY2Uuc3Vic2NyaWJlQ2hhaW5JbmZvTWFwKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZUNoYWluSW5mb01hcChpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkoY2hhaW5TZXJ2aWNlLnN1YnNjcmliZUNoYWluU3RhdGVNYXApJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlQ2hhaW5TdGF0ZU1hcChpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkoY2hhaW5TZXJ2aWNlLnN1YnNjcmliZVhjbVJlZk1hcCknOlxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVYY21SZWZNYXAoaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKGNoYWluU2VydmljZS5nZXRTdXBwb3J0ZWRDb250cmFjdFR5cGVzKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmdldFN1cHBvcnRlZFNtYXJ0Q29udHJhY3RUeXBlcygpO1xuICAgICAgY2FzZSAncHJpKGNoYWluU2VydmljZS5lbmFibGVDaGFpbiknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5lbmFibGVDaGFpbihyZXF1ZXN0IGFzIEVuYWJsZUNoYWluUGFyYW1zKTtcbiAgICAgIGNhc2UgJ3ByaShjaGFpblNlcnZpY2UucmVjb25uZWN0Q2hhaW4pJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVjb25uZWN0Q2hhaW4ocmVxdWVzdCBhcyBzdHJpbmcpO1xuICAgICAgY2FzZSAncHJpKGNoYWluU2VydmljZS5kaXNhYmxlQ2hhaW4pJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZGlzYWJsZUNoYWluKHJlcXVlc3QgYXMgc3RyaW5nKTtcbiAgICAgIGNhc2UgJ3ByaShjaGFpblNlcnZpY2UucmVtb3ZlQ2hhaW4pJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQ3VzdG9tQ2hhaW4ocmVxdWVzdCBhcyBzdHJpbmcpO1xuICAgICAgY2FzZSAncHJpKGNoYWluU2VydmljZS52YWxpZGF0ZUN1c3RvbUNoYWluKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnZhbGlkYXRlTmV0d29yayhyZXF1ZXN0IGFzIFZhbGlkYXRlTmV0d29ya1JlcXVlc3QpO1xuICAgICAgY2FzZSAncHJpKGNoYWluU2VydmljZS51cHNlcnRDaGFpbiknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy51cHNlcnRDaGFpbihyZXF1ZXN0IGFzIF9OZXR3b3JrVXBzZXJ0UGFyYW1zKTtcbiAgICAgIGNhc2UgJ3ByaShjaGFpblNlcnZpY2UucmVzZXREZWZhdWx0Q2hhaW5zKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnJlc2V0RGVmYXVsdE5ldHdvcmsoKTtcbiAgICAgIGNhc2UgJ3ByaShjaGFpblNlcnZpY2UuZW5hYmxlQ2hhaW5zKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmVuYWJsZUNoYWlucyhyZXF1ZXN0IGFzIEVuYWJsZU11bHRpQ2hhaW5QYXJhbXMpO1xuICAgICAgY2FzZSAncHJpKGNoYWluU2VydmljZS5zdWJzY3JpYmVBc3NldFJlZ2lzdHJ5KSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZUFzc2V0UmVnaXN0cnkoaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKGNoYWluU2VydmljZS5zdWJzY3JpYmVNdWx0aUNoYWluQXNzZXRNYXApJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlTXVsdGlDaGFpbkFzc2V0TWFwKGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShjaGFpblNlcnZpY2UudXBzZXJ0Q3VzdG9tQXNzZXQpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBzZXJ0Q3VzdG9tVG9rZW4ocmVxdWVzdCBhcyBfQ2hhaW5Bc3NldCk7XG4gICAgICBjYXNlICdwcmkoY2hhaW5TZXJ2aWNlLmRlbGV0ZUN1c3RvbUFzc2V0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGV0ZUN1c3RvbUFzc2V0KHJlcXVlc3QgYXMgc3RyaW5nKTtcbiAgICAgIGNhc2UgJ3ByaShjaGFpblNlcnZpY2UudmFsaWRhdGVDdXN0b21Bc3NldCknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy52YWxpZGF0ZUN1c3RvbUFzc2V0KHJlcXVlc3QgYXMgX1ZhbGlkYXRlQ3VzdG9tQXNzZXRSZXF1ZXN0KTtcbiAgICAgIGNhc2UgJ3ByaShhc3NldFNldHRpbmcuZ2V0U3Vic2NyaXB0aW9uKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZUFzc2V0U2V0dGluZyhpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkoYXNzZXRTZXR0aW5nLnVwZGF0ZSknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVBc3NldFNldHRpbmcocmVxdWVzdCBhcyBBc3NldFNldHRpbmdVcGRhdGVSZXEpO1xuXG4gICAgICBjYXNlICdwcmkodHJhbnNmZXIuY2hlY2tSZWZlcmVuY2VDb3VudCknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy50cmFuc2ZlckNoZWNrUmVmZXJlbmNlQ291bnQocmVxdWVzdCBhcyBSZXF1ZXN0VHJhbnNmZXJDaGVja1JlZmVyZW5jZUNvdW50KTtcbiAgICAgIGNhc2UgJ3ByaSh0cmFuc2Zlci5jaGVja1N1cHBvcnRpbmcpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmZXJDaGVja1N1cHBvcnRpbmcocmVxdWVzdCBhcyBSZXF1ZXN0VHJhbnNmZXJDaGVja1N1cHBvcnRpbmcpO1xuICAgICAgY2FzZSAncHJpKHRyYW5zZmVyLmdldEV4aXN0ZW50aWFsRGVwb3NpdCknOlxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2ZlckdldEV4aXN0ZW50aWFsRGVwb3NpdChyZXF1ZXN0IGFzIFJlcXVlc3RUcmFuc2ZlckV4aXN0ZW50aWFsRGVwb3NpdCk7XG4gICAgICBjYXNlICdwcmkodHJhbnNmZXIuZ2V0TWF4VHJhbnNmZXJhYmxlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZmVyR2V0TWF4VHJhbnNmZXJhYmxlKHJlcXVlc3QgYXMgUmVxdWVzdE1heFRyYW5zZmVyYWJsZSk7XG4gICAgICBjYXNlICdwcmkoZnJlZUJhbGFuY2UuZ2V0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFkZHJlc3NGcmVlQmFsYW5jZShyZXF1ZXN0IGFzIFJlcXVlc3RGcmVlQmFsYW5jZSk7XG4gICAgICBjYXNlICdwcmkoZnJlZUJhbGFuY2Uuc3Vic2NyaWJlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZUFkZHJlc3NGcmVlQmFsYW5jZShyZXF1ZXN0IGFzIFJlcXVlc3RGcmVlQmFsYW5jZSwgaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKHN1YnNjcmlwdGlvbi5jYW5jZWwpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKHJlcXVlc3QgYXMgc3RyaW5nKTtcbiAgICAgIGNhc2UgJ3ByaShjaGFpblNlcnZpY2UucmVjb3ZlclN1YnN0cmF0ZUFwaSknOlxuICAgICAgICByZXR1cm4gdGhpcy5yZWNvdmVyRG90U2FtYUFwaShyZXF1ZXN0IGFzIHN0cmluZyk7XG5cbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5nZXQubWV0YSknOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBY2NvdW50TWV0YShyZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50TWV0YSk7XG5cbiAgICAgIC8vLyBTZW5kIE5GVFxuICAgICAgY2FzZSAncHJpKGV2bU5mdC5zdWJtaXRUcmFuc2FjdGlvbiknOlxuICAgICAgICByZXR1cm4gdGhpcy5ldm1OZnRTdWJtaXRUcmFuc2FjdGlvbihyZXF1ZXN0IGFzIE5mdFRyYW5zYWN0aW9uUmVxdWVzdCk7XG4gICAgICBjYXNlICdwcmkoc3Vic3RyYXRlTmZ0LnN1Ym1pdFRyYW5zYWN0aW9uKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnN0cmF0ZU5mdFN1Ym1pdFRyYW5zYWN0aW9uKHJlcXVlc3QgYXMgUmVxdWVzdFN1YnN0cmF0ZU5mdFN1Ym1pdFRyYW5zYWN0aW9uKTtcblxuICAgICAgLy8vIFRyYW5zZmVyXG4gICAgICBjYXNlICdwcmkoYWNjb3VudHMudHJhbnNmZXIpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubWFrZVRyYW5zZmVyKHJlcXVlc3QgYXMgUmVxdWVzdFRyYW5zZmVyKTtcbiAgICAgIGNhc2UgJ3ByaShhY2NvdW50cy5jcm9zc0NoYWluVHJhbnNmZXIpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubWFrZUNyb3NzQ2hhaW5UcmFuc2ZlcihyZXF1ZXN0IGFzIFJlcXVlc3RDcm9zc0NoYWluVHJhbnNmZXIpO1xuXG4gICAgICAvLy8gU2lnbiBRUlxuICAgICAgY2FzZSAncHJpKHFyLnRyYW5zYWN0aW9uLnBhcnNlLnN1YnN0cmF0ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVN1YnN0cmF0ZVRyYW5zYWN0aW9uKHJlcXVlc3QgYXMgUmVxdWVzdFBhcnNlVHJhbnNhY3Rpb25TdWJzdHJhdGUpO1xuICAgICAgY2FzZSAncHJpKHFyLnRyYW5zYWN0aW9uLnBhcnNlLmV2bSknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wYXJzZUVWTVJMUChyZXF1ZXN0IGFzIFJlcXVlc3RRclBhcnNlUkxQKTtcbiAgICAgIGNhc2UgJ3ByaShxci5zaWduLnN1YnN0cmF0ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5xclNpZ25TdWJzdHJhdGUocmVxdWVzdCBhcyBSZXF1ZXN0UXJTaWduU3Vic3RyYXRlKTtcbiAgICAgIGNhc2UgJ3ByaShxci5zaWduLmV2bSknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5xclNpZ25FVk0ocmVxdWVzdCBhcyBSZXF1ZXN0UXJTaWduRXZtKTtcblxuICAgICAgLy8vIEV4dGVybmFsIGFjY291bnQgcmVxdWVzdFxuICAgICAgY2FzZSAncHJpKGFjY291bnQuZXh0ZXJuYWwucmVqZWN0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLnJlamVjdEV4dGVybmFsUmVxdWVzdChyZXF1ZXN0IGFzIFJlcXVlc3RSZWplY3RFeHRlcm5hbFJlcXVlc3QpO1xuICAgICAgY2FzZSAncHJpKGFjY291bnQuZXh0ZXJuYWwucmVzb2x2ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlUXJUcmFuc2ZlcihyZXF1ZXN0IGFzIFJlcXVlc3RSZXNvbHZlRXh0ZXJuYWxSZXF1ZXN0KTtcblxuICAgICAgY2FzZSAncHJpKGFjY291bnRzLnRpZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50c1RpZTIocmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudFRpZSk7XG4gICAgICBjYXNlICdwcmkoY29uZmlybWF0aW9ucy5zdWJzY3JpYmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlQ29uZmlybWF0aW9ucyhpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkoY29uZmlybWF0aW9ucy5jb21wbGV0ZSknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb21wbGV0ZUNvbmZpcm1hdGlvbihyZXF1ZXN0IGFzIFJlcXVlc3RDb25maXJtYXRpb25Db21wbGV0ZSk7XG5cbiAgICAgIC8vLyBTdGFrZVxuICAgICAgY2FzZSAncHJpKGJvbmRpbmcuZ2V0Qm9uZGluZ09wdGlvbnMpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0Qm9uZGluZ09wdGlvbnMocmVxdWVzdCBhcyBCb25kaW5nT3B0aW9uUGFyYW1zKTtcbiAgICAgIGNhc2UgJ3ByaShib25kaW5nLmdldE5vbWluYXRpb25Qb29sT3B0aW9ucyknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXROb21pbmF0aW9uUG9vbE9wdGlvbnMocmVxdWVzdCBhcyBzdHJpbmcpO1xuICAgICAgY2FzZSAncHJpKGJvbmRpbmcuc3Vic2NyaWJlQ2hhaW5TdGFraW5nTWV0YWRhdGEpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc3Vic2NyaWJlQ2hhaW5TdGFraW5nTWV0YWRhdGEoaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKGJvbmRpbmcuc3Vic2NyaWJlTm9taW5hdG9yTWV0YWRhdGEpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc3Vic2NyaWJlU3Rha2luZ05vbWluYXRvck1ldGFkYXRhKGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaShib25kaW5nLnN1Ym1pdEJvbmRpbmdUcmFuc2FjdGlvbiknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zdWJtaXRCb25kaW5nKHJlcXVlc3QgYXMgUmVxdWVzdEJvbmRpbmdTdWJtaXQpO1xuICAgICAgY2FzZSAncHJpKHVuYm9uZGluZy5zdWJtaXRUcmFuc2FjdGlvbiknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zdWJtaXRVbmJvbmRpbmcocmVxdWVzdCBhcyBSZXF1ZXN0VW5ib25kaW5nU3VibWl0KTtcbiAgICAgIGNhc2UgJ3ByaSh1bmJvbmRpbmcuc3VibWl0V2l0aGRyYXdhbCknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zdWJtaXRTdGFrZVdpdGhkcmF3YWwocmVxdWVzdCBhcyBSZXF1ZXN0U3Rha2VXaXRoZHJhd2FsKTtcbiAgICAgIGNhc2UgJ3ByaShzdGFraW5nLnN1Ym1pdENsYWltUmV3YXJkKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1Ym1pdFN0YWtlQ2xhaW1SZXdhcmQocmVxdWVzdCBhcyBSZXF1ZXN0U3Rha2VDbGFpbVJld2FyZCk7XG4gICAgICBjYXNlICdwcmkoc3Rha2luZy5zdWJtaXRDYW5jZWxXaXRoZHJhd2FsKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1Ym1pdENhbmNlbFN0YWtlV2l0aGRyYXdhbChyZXF1ZXN0IGFzIFJlcXVlc3RTdGFrZUNhbmNlbFdpdGhkcmF3YWwpO1xuICAgICAgY2FzZSAncHJpKHN0YWtpbmcuc3VibWl0VHVyaW5nQ29tcG91bmQpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc3VibWl0VHVyaW5nU3Rha2VDb21wb3VuZGluZyhyZXF1ZXN0IGFzIFJlcXVlc3RUdXJpbmdTdGFrZUNvbXBvdW5kKTtcbiAgICAgIGNhc2UgJ3ByaShzdGFraW5nLnN1Ym1pdFR1cmluZ0NhbmNlbENvbXBvdW5kKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1Ym1pdFR1cmluZ0NhbmNlbFN0YWtlQ29tcG91bmQocmVxdWVzdCBhcyBSZXF1ZXN0VHVyaW5nQ2FuY2VsU3Rha2VDb21wb3VuZCk7XG4gICAgICBjYXNlICdwcmkoYm9uZGluZy5ub21pbmF0aW9uUG9vbC5zdWJtaXRCb25kaW5nKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1Ym1pdFBvb2xCb25kaW5nKHJlcXVlc3QgYXMgUmVxdWVzdFN0YWtlUG9vbGluZ0JvbmRpbmcpO1xuICAgICAgY2FzZSAncHJpKGJvbmRpbmcubm9taW5hdGlvblBvb2wuc3VibWl0VW5ib25kaW5nKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1Ym1pdFBvb2xpbmdVbmJvbmRpbmcocmVxdWVzdCBhcyBSZXF1ZXN0U3Rha2VQb29saW5nVW5ib25kaW5nKTtcblxuICAgICAgLy8gRVZNIFRyYW5zYWN0aW9uXG4gICAgICBjYXNlICdwcmkoZXZtLnRyYW5zYWN0aW9uLnBhcnNlLmlucHV0KSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBhcnNlQ29udHJhY3RJbnB1dChyZXF1ZXN0IGFzIFJlcXVlc3RQYXJzZUV2bUNvbnRyYWN0SW5wdXQpO1xuXG4gICAgICAvLyBBdXRoIFVybCBzdWJzY3JpYmVcbiAgICAgIGNhc2UgJ3ByaShhdXRob3JpemUuc3Vic2NyaWJlKSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1YnNjcmliZUF1dGhVcmxzKGlkLCBwb3J0KTtcblxuICAgICAgLy8gUGhpc2hpbmcgcGFnZVxuICAgICAgY2FzZSAncHJpKHBoaXNoaW5nLnBhc3MpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGFzc1BoaXNoaW5nUGFnZShyZXF1ZXN0IGFzIFJlcXVlc3RQYXNzUGhpc2hpbmdQYWdlKTtcblxuICAgICAgLy8vIEtleXJpbmcgc3RhdGVcbiAgICAgIGNhc2UgJ3ByaShrZXlyaW5nLnN1YnNjcmliZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5rZXlyaW5nU3RhdGVTdWJzY3JpYmUoaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKGtleXJpbmcuY2hhbmdlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmtleXJpbmdDaGFuZ2VNYXN0ZXJQYXNzd29yZChyZXF1ZXN0IGFzIFJlcXVlc3RDaGFuZ2VNYXN0ZXJQYXNzd29yZCk7XG4gICAgICBjYXNlICdwcmkoa2V5cmluZy5taWdyYXRlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmtleXJpbmdNaWdyYXRlTWFzdGVyUGFzc3dvcmQocmVxdWVzdCBhcyBSZXF1ZXN0TWlncmF0ZVBhc3N3b3JkKTtcbiAgICAgIGNhc2UgJ3ByaShrZXlyaW5nLnVubG9jayknOlxuICAgICAgICByZXR1cm4gdGhpcy5rZXlyaW5nVW5sb2NrKHJlcXVlc3QgYXMgUmVxdWVzdFVubG9ja0tleXJpbmcpO1xuICAgICAgY2FzZSAncHJpKGtleXJpbmcubG9jayknOlxuICAgICAgICByZXR1cm4gdGhpcy5rZXlyaW5nTG9jaygpO1xuICAgICAgY2FzZSAncHJpKGtleXJpbmcuZXhwb3J0Lm1uZW1vbmljKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmtleXJpbmdFeHBvcnRNbmVtb25pYyhyZXF1ZXN0IGFzIFJlcXVlc3RLZXlyaW5nRXhwb3J0TW5lbW9uaWMpO1xuICAgICAgY2FzZSAncHJpKGtleXJpbmcucmVzZXQpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVzZXRXYWxsZXQocmVxdWVzdCBhcyBSZXF1ZXN0UmVzZXRXYWxsZXQpO1xuXG4gICAgICAvLy8gU2lnbmluZyBleHRlcm5hbFxuICAgICAgY2FzZSAncHJpKHNpZ25pbmcuYXBwcm92ZS5wYXNzd29yZFYyKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnNpZ25pbmdBcHByb3ZlUGFzc3dvcmRWMihyZXF1ZXN0IGFzIFJlcXVlc3RTaWduaW5nQXBwcm92ZVBhc3N3b3JkVjIpO1xuXG4gICAgICAvLy8gRGVyaXZlIGFjY291bnRcbiAgICAgIGNhc2UgJ3ByaShkZXJpdmF0aW9uLnZhbGlkYXRlVjIpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVEZXJpdmVQYXRoKHJlcXVlc3QgYXMgUmVxdWVzdERlcml2ZVZhbGlkYXRlVjIpO1xuICAgICAgY2FzZSAncHJpKGRlcml2YXRpb24uZ2V0TGlzdCknOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRMaXN0RGVyaXZlQWNjb3VudHMocmVxdWVzdCBhcyBSZXF1ZXN0R2V0RGVyaXZlQWNjb3VudHMpO1xuICAgICAgY2FzZSAncHJpKGRlcml2YXRpb24uY3JlYXRlLm11bHRpcGxlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmRlcml2YXRpb25DcmVhdGVNdWx0aXBsZShyZXF1ZXN0IGFzIFJlcXVlc3REZXJpdmVDcmVhdGVNdWx0aXBsZSk7XG4gICAgICBjYXNlICdwcmkoZGVyaXZhdGlvbi5jcmVhdGVWMyknOlxuICAgICAgICByZXR1cm4gdGhpcy5kZXJpdmF0aW9uQ3JlYXRlVjMocmVxdWVzdCBhcyBSZXF1ZXN0RGVyaXZlQ3JlYXRlVjMpO1xuXG4gICAgICAvLyBUcmFuc2FjdGlvblxuICAgICAgY2FzZSAncHJpKHRyYW5zYWN0aW9ucy5nZXRPbmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHJhbnNhY3Rpb24ocmVxdWVzdCBhcyBSZXF1ZXN0R2V0VHJhbnNhY3Rpb24pO1xuICAgICAgY2FzZSAncHJpKHRyYW5zYWN0aW9ucy5zdWJzY3JpYmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlVHJhbnNhY3Rpb25zKGlkLCBwb3J0KTtcblxuICAgICAgLy8gTm90aWZpY2F0aW9uXG4gICAgICBjYXNlICdwcmkobm90aWZpY2F0aW9ucy5zdWJzY3JpYmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlTm90aWZpY2F0aW9ucyhpZCwgcG9ydCk7XG5cbiAgICAgIGNhc2UgJ3ByaShjcm9uLnJlbG9hZCknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZWxvYWRDcm9uKHJlcXVlc3QgYXMgQ3JvblJlbG9hZFJlcXVlc3QpO1xuXG4gICAgICBjYXNlICdwcmkoc2V0dGluZ3MuZ2V0TG9nb01hcHMpJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TG9nb01hcCgpO1xuXG4gICAgICAvLy8gV2FsbGV0IENvbm5lY3RcbiAgICAgIGNhc2UgJ3ByaSh3YWxsZXRDb25uZWN0LmNvbm5lY3QpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdFdhbGxldENvbm5lY3QocmVxdWVzdCBhcyBSZXF1ZXN0Q29ubmVjdFdhbGxldENvbm5lY3QpO1xuICAgICAgY2FzZSAncHJpKHdhbGxldENvbm5lY3QucmVxdWVzdHMuY29ubmVjdC5zdWJzY3JpYmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdFdDU3Vic2NyaWJlKGlkLCBwb3J0KTtcbiAgICAgIGNhc2UgJ3ByaSh3YWxsZXRDb25uZWN0LnNlc3Npb24uYXBwcm92ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5hcHByb3ZlV2FsbGV0Q29ubmVjdFNlc3Npb24ocmVxdWVzdCBhcyBSZXF1ZXN0QXBwcm92ZUNvbm5lY3RXYWxsZXRTZXNzaW9uKTtcbiAgICAgIGNhc2UgJ3ByaSh3YWxsZXRDb25uZWN0LnNlc3Npb24ucmVqZWN0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLnJlamVjdFdhbGxldENvbm5lY3RTZXNzaW9uKHJlcXVlc3QgYXMgUmVxdWVzdFJlamVjdENvbm5lY3RXYWxsZXRTZXNzaW9uKTtcbiAgICAgIGNhc2UgJ3ByaSh3YWxsZXRDb25uZWN0LnNlc3Npb24uc3Vic2NyaWJlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZVdhbGxldENvbm5lY3RTZXNzaW9ucyhpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkod2FsbGV0Q29ubmVjdC5zZXNzaW9uLmRpc2Nvbm5lY3QpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdFdhbGxldENvbm5lY3RTZXNzaW9uKHJlcXVlc3QgYXMgUmVxdWVzdERpc2Nvbm5lY3RXYWxsZXRDb25uZWN0U2Vzc2lvbik7XG5cbiAgICAgIC8vIE5vdCBzdXBwb3J0XG4gICAgICBjYXNlICdwcmkod2FsbGV0Q29ubmVjdC5yZXF1ZXN0cy5ub3RTdXBwb3J0LnN1YnNjcmliZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5XQ05vdFN1cHBvcnRTdWJzY3JpYmUoaWQsIHBvcnQpO1xuICAgICAgY2FzZSAncHJpKHdhbGxldENvbm5lY3Qubm90U3VwcG9ydC5hcHByb3ZlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFwcHJvdmVXYWxsZXRDb25uZWN0Tm90U3VwcG9ydChyZXF1ZXN0IGFzIFJlcXVlc3RBcHByb3ZlV2FsbGV0Q29ubmVjdE5vdFN1cHBvcnQpO1xuICAgICAgY2FzZSAncHJpKHdhbGxldENvbm5lY3Qubm90U3VwcG9ydC5yZWplY3QpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucmVqZWN0V2FsbGV0Q29ubmVjdE5vdFN1cHBvcnQocmVxdWVzdCBhcyBSZXF1ZXN0UmVqZWN0V2FsbGV0Q29ubmVjdE5vdFN1cHBvcnQpO1xuXG4gICAgICAvLyBNYW50YVxuICAgICAgY2FzZSAncHJpKG1hbnRhUGF5LmVuYWJsZSknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5lbmFibGVNYW50YVBheShyZXF1ZXN0IGFzIE1hbnRhUGF5RW5hYmxlUGFyYW1zKTtcbiAgICAgIGNhc2UgJ3ByaShtYW50YVBheS5pbml0U3luY01hbnRhUGF5KSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmluaXRTeW5jTWFudGFQYXkocmVxdWVzdCBhcyBzdHJpbmcpO1xuICAgICAgY2FzZSAncHJpKG1hbnRhUGF5LnN1YnNjcmliZUNvbmZpZyknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zdWJzY3JpYmVNYW50YVBheUNvbmZpZyhpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwcmkobWFudGFQYXkuZGlzYWJsZSknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5kaXNhYmxlTWFudGFQYXkocmVxdWVzdCBhcyBzdHJpbmcpO1xuICAgICAgY2FzZSAncHJpKG1hbnRhUGF5LnN1YnNjcmliZVN5bmNpbmdTdGF0ZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVNYW50YVBheVN5bmNTdGF0ZShpZCwgcG9ydCk7XG5cbiAgICAgIC8vIE1ldGFkYXRhXG4gICAgICBjYXNlICdwcmkobWV0YWRhdGEuZmluZCknOlxuICAgICAgICByZXR1cm4gdGhpcy5maW5kUmF3TWV0YWRhdGEocmVxdWVzdCBhcyBSZXF1ZXN0RmluZFJhd01ldGFkYXRhKTtcbiAgICAgIC8vIERlZmF1bHRcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGhhbmRsZSBtZXNzYWdlIG9mIHR5cGUgJHt0eXBlfWApO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IEFjdGl2ZUNyb25BbmRTdWJzY3JpcHRpb25NYXAsIENyb25TZXJ2aWNlVHlwZSwgUmVxdWVzdENyb25BbmRTdWJzY3JpcHRpb25BY3Rpb24sIFJlcXVlc3RJbml0Q3JvbkFuZFN1YnNjcmlwdGlvbiwgU3Vic2NyaXB0aW9uU2VydmljZVR5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IE1lc3NhZ2VUeXBlcywgUmVxdWVzdFR5cGVzLCBSZXNwb25zZVR5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvdHlwZXMnO1xuaW1wb3J0IEtvbmlTdGF0ZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYmFja2dyb3VuZC9oYW5kbGVycy9TdGF0ZSc7XG5cbmNvbnN0IERFRkFVTFRfU0VSVklDRV9NQVAgPSB7XG4gIHN1YnNjcmlwdGlvbjoge1xuICAgIGNoYWluUmVnaXN0cnk6IHRydWUsXG4gICAgYmFsYW5jZTogdHJ1ZSxcbiAgICBjcm93ZGxvYW46IHRydWUsXG4gICAgc3Rha2luZzogdHJ1ZVxuICB9LFxuICBjcm9uOiB7XG4gICAgcHJpY2U6IHRydWUsXG4gICAgbmZ0OiB0cnVlLFxuICAgIHN0YWtpbmc6IHRydWUsXG4gICAgaGlzdG9yeTogdHJ1ZSxcbiAgICByZWNvdmVyQXBpOiB0cnVlLFxuICAgIGNoZWNrQXBpU3RhdHVzOiB0cnVlXG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vYmlsZSB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgcHJpdmF0ZSBzdGF0ZTogS29uaVN0YXRlO1xuXG4gIGNvbnN0cnVjdG9yIChzdGF0ZTogS29uaVN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgcHVibGljIHBpbmcgKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdtb2JpbGU6cGluZyc7XG4gIH1cblxuICBwdWJsaWMgaW5pdENyb25BbmRTdWJzY3JpcHRpb24gKFxuICAgIHsgY3JvbjogeyBhY3RpdmVTZXJ2aWNlczogYWN0aXZlQ3JvblNlcnZpY2VzLCBpbnRlcnZhbE1hcDogY3JvbkludGVydmFsTWFwIH0sXG4gICAgICBzdWJzY3JpcHRpb246IHsgYWN0aXZlU2VydmljZXM6IGFjdGl2ZVN1YnNjcmlwdGlvblNlcnZpY2VzIH0gfTogUmVxdWVzdEluaXRDcm9uQW5kU3Vic2NyaXB0aW9uKTogQWN0aXZlQ3JvbkFuZFN1YnNjcmlwdGlvbk1hcCB7XG4gICAgY29uc29sZS5sb2coJ2luaXRDcm9uQW5kU3Vic2NyaXB0aW9uJyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3Vic2NyaXB0aW9uOiB7XG4gICAgICAgIGNoYWluUmVnaXN0cnk6IHRydWUsXG4gICAgICAgIGJhbGFuY2U6IHRydWUsXG4gICAgICAgIGNyb3dkbG9hbjogdHJ1ZSxcbiAgICAgICAgc3Rha2luZzogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGNyb246IHtcbiAgICAgICAgcHJpY2U6IHRydWUsXG4gICAgICAgIG5mdDogdHJ1ZSxcbiAgICAgICAgc3Rha2luZzogdHJ1ZSxcbiAgICAgICAgaGlzdG9yeTogdHJ1ZSxcbiAgICAgICAgcmVjb3ZlckFwaTogdHJ1ZSxcbiAgICAgICAgY2hlY2tBcGlTdGF0dXM6IHRydWVcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZUFjdGl2ZUNyb25BbmRTdWJzY3JpcHRpb25TZXJ2aWNlTWFwIChpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogQWN0aXZlQ3JvbkFuZFN1YnNjcmlwdGlvbk1hcCB7XG4gICAgcmV0dXJuIERFRkFVTFRfU0VSVklDRV9NQVA7XG4gIH1cblxuICBwdWJsaWMgc3RhcnRDcm9uQW5kU3Vic2NyaXB0aW9uU2VydmljZXMgKHsgY3JvblNlcnZpY2VzLCBzdWJzY3JpcHRpb25TZXJ2aWNlcyB9OiBSZXF1ZXN0Q3JvbkFuZFN1YnNjcmlwdGlvbkFjdGlvbik6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdzdGFydENyb25BbmRTdWJzY3JpcHRpb25TZXJ2aWNlcycpO1xuICB9XG5cbiAgcHVibGljIHN0b3BDcm9uQW5kU3Vic2NyaXB0aW9uU2VydmljZXMgKHsgY3JvblNlcnZpY2VzLCBzdWJzY3JpcHRpb25TZXJ2aWNlcyB9OiBSZXF1ZXN0Q3JvbkFuZFN1YnNjcmlwdGlvbkFjdGlvbik6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdzdG9wQ3JvbkFuZFN1YnNjcmlwdGlvblNlcnZpY2VzJyk7XG4gIH1cblxuICBwdWJsaWMgcmVzdGFydENyb25BbmRTdWJzY3JpcHRpb25TZXJ2aWNlcyAoeyBjcm9uU2VydmljZXMsIHN1YnNjcmlwdGlvblNlcnZpY2VzIH06IFJlcXVlc3RDcm9uQW5kU3Vic2NyaXB0aW9uQWN0aW9uKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ3Jlc3RhcnRDcm9uQW5kU3Vic2NyaXB0aW9uU2VydmljZXMnKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGFydENyb25TZXJ2aWNlcyAoc2VydmljZXM6IENyb25TZXJ2aWNlVHlwZVtdKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ3N0YXJ0Q3JvblNlcnZpY2VzJyk7XG4gIH1cblxuICBwdWJsaWMgc3RvcENyb25TZXJ2aWNlcyAoc2VydmljZXM6IENyb25TZXJ2aWNlVHlwZVtdKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ3N0b3BDcm9uU2VydmljZXMnKTtcbiAgfVxuXG4gIHB1YmxpYyByZXN0YXJ0Q3JvblNlcnZpY2VzIChzZXJ2aWNlczogQ3JvblNlcnZpY2VUeXBlW10pOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnc3RvcENyb25TZXJ2aWNlcycpO1xuICB9XG5cbiAgcHVibGljIHN0YXJ0U3Vic2NyaXB0aW9uU2VydmljZXMgKHNlcnZpY2VzOiBTdWJzY3JpcHRpb25TZXJ2aWNlVHlwZVtdKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ3N0YXJ0U3Vic2NyaXB0aW9uU2VydmljZXMnKTtcbiAgfVxuXG4gIHB1YmxpYyBzdG9wU3Vic2NyaXB0aW9uU2VydmljZXMgKHNlcnZpY2VzOiBTdWJzY3JpcHRpb25TZXJ2aWNlVHlwZVtdKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ3N0b3BTdWJzY3JpcHRpb25TZXJ2aWNlcycpO1xuICB9XG5cbiAgcHVibGljIHJlc3RhcnRTdWJzY3JpcHRpb25TZXJ2aWNlcyAoc2VydmljZXM6IFN1YnNjcmlwdGlvblNlcnZpY2VUeXBlW10pOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygncmVzdGFydFN1YnNjcmlwdGlvblNlcnZpY2VzJyk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3JlcXVpcmUtYXdhaXRcbiAgcHVibGljIGFzeW5jIGhhbmRsZTxUTWVzc2FnZVR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZXM+IChcbiAgICBpZDogc3RyaW5nLFxuICAgIHR5cGU6IFRNZXNzYWdlVHlwZSxcbiAgICByZXF1ZXN0OiBSZXF1ZXN0VHlwZXNbVE1lc3NhZ2VUeXBlXSxcbiAgICBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxSZXNwb25zZVR5cGU8VE1lc3NhZ2VUeXBlPj4ge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbW9iaWxlKHBpbmcpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucGluZygpO1xuICAgICAgY2FzZSAnbW9iaWxlKGNyb25BbmRTdWJzY3JpcHRpb24uaW5pdCknOlxuICAgICAgICByZXR1cm4gdGhpcy5pbml0Q3JvbkFuZFN1YnNjcmlwdGlvbihyZXF1ZXN0IGFzIFJlcXVlc3RJbml0Q3JvbkFuZFN1YnNjcmlwdGlvbik7XG4gICAgICBjYXNlICdtb2JpbGUoY3JvbkFuZFN1YnNjcmlwdGlvbi5hY3RpdmVTZXJ2aWNlLnN1YnNjcmliZSknOlxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVBY3RpdmVDcm9uQW5kU3Vic2NyaXB0aW9uU2VydmljZU1hcChpZCwgcG9ydCk7XG4gICAgICBjYXNlICdtb2JpbGUoY3JvbkFuZFN1YnNjcmlwdGlvbi5zdGFydCknOlxuICAgICAgICByZXR1cm4gdGhpcy5zdGFydENyb25BbmRTdWJzY3JpcHRpb25TZXJ2aWNlcyhyZXF1ZXN0IGFzIFJlcXVlc3RDcm9uQW5kU3Vic2NyaXB0aW9uQWN0aW9uKTtcbiAgICAgIGNhc2UgJ21vYmlsZShjcm9uQW5kU3Vic2NyaXB0aW9uLnN0b3ApJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcENyb25BbmRTdWJzY3JpcHRpb25TZXJ2aWNlcyhyZXF1ZXN0IGFzIFJlcXVlc3RDcm9uQW5kU3Vic2NyaXB0aW9uQWN0aW9uKTtcbiAgICAgIGNhc2UgJ21vYmlsZShjcm9uQW5kU3Vic2NyaXB0aW9uLnJlc3RhcnQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdGFydENyb25BbmRTdWJzY3JpcHRpb25TZXJ2aWNlcyhyZXF1ZXN0IGFzIFJlcXVlc3RDcm9uQW5kU3Vic2NyaXB0aW9uQWN0aW9uKTtcbiAgICAgIGNhc2UgJ21vYmlsZShjcm9uLnN0YXJ0KSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0Q3JvblNlcnZpY2VzKHJlcXVlc3QgYXMgQ3JvblNlcnZpY2VUeXBlW10pO1xuICAgICAgY2FzZSAnbW9iaWxlKGNyb24uc3RvcCknOlxuICAgICAgICByZXR1cm4gdGhpcy5zdG9wQ3JvblNlcnZpY2VzKHJlcXVlc3QgYXMgQ3JvblNlcnZpY2VUeXBlW10pO1xuICAgICAgY2FzZSAnbW9iaWxlKGNyb24ucmVzdGFydCknOlxuICAgICAgICByZXR1cm4gdGhpcy5yZXN0YXJ0Q3JvblNlcnZpY2VzKHJlcXVlc3QgYXMgQ3JvblNlcnZpY2VUeXBlW10pO1xuICAgICAgY2FzZSAnbW9iaWxlKHN1YnNjcmlwdGlvbi5zdGFydCknOlxuICAgICAgICByZXR1cm4gdGhpcy5zdGFydFN1YnNjcmlwdGlvblNlcnZpY2VzKHJlcXVlc3QgYXMgU3Vic2NyaXB0aW9uU2VydmljZVR5cGVbXSk7XG4gICAgICBjYXNlICdtb2JpbGUoc3Vic2NyaXB0aW9uLnN0b3ApJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcFN1YnNjcmlwdGlvblNlcnZpY2VzKHJlcXVlc3QgYXMgU3Vic2NyaXB0aW9uU2VydmljZVR5cGVbXSk7XG4gICAgICBjYXNlICdtb2JpbGUoc3Vic2NyaXB0aW9uLnJlc3RhcnQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdGFydFN1YnNjcmlwdGlvblNlcnZpY2VzKHJlcXVlc3QgYXMgU3Vic2NyaXB0aW9uU2VydmljZVR5cGVbXSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBoYW5kbGUgbWVzc2FnZSBvZiB0eXBlICR7dHlwZX1gKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBDaGFpbkluZm9NYXAgfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QnO1xuaW1wb3J0IHsgX0Fzc2V0UmVmLCBfQXNzZXRUeXBlLCBfQ2hhaW5Bc3NldCwgX0NoYWluSW5mbywgX011bHRpQ2hhaW5Bc3NldCB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBFdm1Qcm92aWRlckVycm9yIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL2Vycm9ycy9Fdm1Qcm92aWRlckVycm9yJztcbmltcG9ydCB7IHdpdGhFcnJvckxvZyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9oYW5kbGVycy9oZWxwZXJzJztcbmltcG9ydCB7IGlzU3Vic2NyaXB0aW9uUnVubmluZywgdW5zdWJzY3JpYmUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvaGFuZGxlcnMvc3Vic2NyaXB0aW9ucyc7XG5pbXBvcnQgeyBBY2NvdW50UmVmTWFwLCBBZGRUb2tlblJlcXVlc3RFeHRlcm5hbCwgQW1vdW50RGF0YSwgQVBJSXRlbVN0YXRlLCBBcGlNYXAsIEF1dGhSZXF1ZXN0VjIsIEJhbGFuY2VJdGVtLCBCYWxhbmNlSnNvbiwgQmFzaWNUeEVycm9yVHlwZSwgQ2hhaW5TdGFraW5nTWV0YWRhdGEsIENoYWluVHlwZSwgQ29uZmlybWF0aW9uc1F1ZXVlLCBDcm93ZGxvYW5JdGVtLCBDcm93ZGxvYW5Kc29uLCBDdXJyZW50QWNjb3VudEluZm8sIEV2bVByb3ZpZGVyRXJyb3JUeXBlLCBFdm1TZW5kVHJhbnNhY3Rpb25QYXJhbXMsIEV2bVNlbmRUcmFuc2FjdGlvblJlcXVlc3QsIEV2bVNpZ25hdHVyZVJlcXVlc3QsIEV4dGVybmFsUmVxdWVzdFByb21pc2UsIEV4dGVybmFsUmVxdWVzdFByb21pc2VTdGF0dXMsIEV4dHJpbnNpY1R5cGUsIE1hbnRhQXV0aG9yaXphdGlvbkNvbnRleHQsIE1hbnRhUGF5Q29uZmlnLCBNYW50YVBheVN5bmNTdGF0ZSwgTmZ0Q29sbGVjdGlvbiwgTmZ0SXRlbSwgTmZ0SnNvbiwgTm9taW5hdG9yTWV0YWRhdGEsIFJlcXVlc3RBY2NvdW50RXhwb3J0UHJpdmF0ZUtleSwgUmVxdWVzdENoZWNrUHVibGljQW5kU2VjcmV0S2V5LCBSZXF1ZXN0Q29uZmlybWF0aW9uQ29tcGxldGUsIFJlcXVlc3RTZXR0aW5nc1R5cGUsIFJlc3BvbnNlQWNjb3VudEV4cG9ydFByaXZhdGVLZXksIFJlc3BvbnNlQ2hlY2tQdWJsaWNBbmRTZWNyZXRLZXksIFNlcnZpY2VJbmZvLCBTaW5nbGVNb2RlSnNvbiwgU3Rha2luZ0l0ZW0sIFN0YWtpbmdKc29uLCBTdGFraW5nUmV3YXJkSXRlbSwgU3Rha2luZ1Jld2FyZEpzb24sIFN0YWtpbmdUeXBlLCBVaVNldHRpbmdzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBBY2NvdW50SnNvbiwgUmVxdWVzdEF1dGhvcml6ZVRhYiwgUmVxdWVzdFJwY1NlbmQsIFJlcXVlc3RScGNTdWJzY3JpYmUsIFJlcXVlc3RScGNVbnN1YnNjcmliZSwgUmVxdWVzdFNpZ24sIFJlc3BvbnNlUnBjTGlzdFByb3ZpZGVycywgUmVzcG9uc2VTaWduaW5nIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL3R5cGVzJztcbmltcG9ydCB7IEFMTF9BQ0NPVU5UX0tFWSwgQUxMX0dFTkVTSVNfSEFTSCwgTUFOVEFfUEFZX0JBTEFOQ0VfSU5URVJWQUwgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBCYWxhbmNlU2VydmljZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvYmFsYW5jZS1zZXJ2aWNlJztcbmltcG9ydCB7IFNlcnZpY2VTdGF0dXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2Jhc2UvdHlwZXMnO1xuaW1wb3J0IHsgQ2hhaW5TZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlJztcbmltcG9ydCB7IF9ERUZBVUxUX01BTlRBX1pLX0NIQUlOLCBfTUFOVEFfWktfQ0hBSU5fR1JPVVAsIF9QUkVERUZJTkVEX1NJTkdMRV9NT0RFUyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgX0NoYWluU3RhdGUsIF9OZXR3b3JrVXBzZXJ0UGFyYW1zLCBfVmFsaWRhdGVDdXN0b21Bc3NldFJlcXVlc3QgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgX2dldEV2bUNoYWluSWQsIF9nZXRTdWJzdHJhdGVHZW5lc2lzSGFzaCwgX2dldFRva2VuT25DaGFpbkFzc2V0SWQsIF9pc0Fzc2V0RnVuZ2libGVUb2tlbiwgX2lzQ2hhaW5FbmFibGVkLCBfaXNDaGFpblRlc3ROZXQsIF9pc1N1YnN0cmF0ZVBhcmFDaGFpbiwgX3BhcnNlTWV0YWRhdGFGb3JTbWFydENvbnRyYWN0QXNzZXQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9ldmVudC1zZXJ2aWNlJztcbmltcG9ydCB7IEhpc3RvcnlTZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9oaXN0b3J5LXNlcnZpY2UnO1xuaW1wb3J0IHsgS2V5cmluZ1NlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2tleXJpbmctc2VydmljZSc7XG5pbXBvcnQgTWlncmF0aW9uU2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCBOb3RpZmljYXRpb25TZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvbm90aWZpY2F0aW9uLXNlcnZpY2UvTm90aWZpY2F0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBQcmljZVNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3ByaWNlLXNlcnZpY2UnO1xuaW1wb3J0IFJlcXVlc3RTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlJztcbmltcG9ydCB7IEF1dGhVcmxzLCBNZXRhUmVxdWVzdCwgU2lnblJlcXVlc3QgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS90eXBlcyc7XG5pbXBvcnQgU2V0dGluZ1NlcnZpY2UgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zZXR0aW5nLXNlcnZpY2UvU2V0dGluZ1NlcnZpY2UnO1xuaW1wb3J0IERhdGFiYXNlU2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9EYXRhYmFzZVNlcnZpY2UnO1xuaW1wb3J0IHsgU3Vic2NhblNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N1YnNjYW4tc2VydmljZSc7XG5pbXBvcnQgeyBTVUJTQ0FOX0NIQUlOX01BUF9SRVZFUlNFIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zdWJzY2FuLXNlcnZpY2Uvc3Vic2Nhbi1jaGFpbi1tYXAnO1xuaW1wb3J0IFRyYW5zYWN0aW9uU2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3RyYW5zYWN0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25FdmVudFJlc3BvbnNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy90cmFuc2FjdGlvbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCBXYWxsZXRDb25uZWN0U2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3dhbGxldC1jb25uZWN0LXNlcnZpY2UnO1xuaW1wb3J0IEFjY291bnRSZWZTdG9yZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcy9BY2NvdW50UmVmJztcbmltcG9ydCB7IHN0cmlwVXJsIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgeyBpc0NvbnRyYWN0QWRkcmVzcywgcGFyc2VDb250cmFjdElucHV0IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscy9ldGgvcGFyc2VUcmFuc2FjdGlvbic7XG5pbXBvcnQgeyBjcmVhdGVQcm9taXNlSGFuZGxlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQgeyBNZXRhZGF0YURlZiwgUHJvdmlkZXJNZXRhIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24taW5qZWN0L3R5cGVzJztcbmltcG9ydCB7IGRlY29kZVBhaXIgfSBmcm9tICdAc3Vid2FsbGV0L2tleXJpbmcvcGFpci9kZWNvZGUnO1xuaW1wb3J0IHsga2V5cmluZyB9IGZyb20gJ0BzdWJ3YWxsZXQvdWkta2V5cmluZyc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdkZXhpZSc7XG5pbXBvcnQgU2ltcGxlS2V5cmluZyBmcm9tICdldGgtc2ltcGxlLWtleXJpbmcnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuaW1wb3J0IHsgaW50ZXJmYWNlcyB9IGZyb20gJ21hbnRhLWV4dGVuc2lvbi1zZGsnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbkNvbmZpZyB9IGZyb20gJ3dlYjMtY29yZSc7XG5cbmltcG9ydCB7IEpzb25ScGNSZXNwb25zZSwgUHJvdmlkZXJJbnRlcmZhY2UsIFByb3ZpZGVySW50ZXJmYWNlQ2FsbGJhY2sgfSBmcm9tICdAcG9sa2Fkb3QvcnBjLXByb3ZpZGVyL3R5cGVzJztcbmltcG9ydCB7IGFzc2VydCwgQk4sIGhleFN0cmlwUHJlZml4LCBoZXhUb1U4YSwgaXNIZXgsIGxvZ2dlciBhcyBjcmVhdGVMb2dnZXIsIHU4YVRvSGV4IH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvdHlwZXMnO1xuaW1wb3J0IHsgYmFzZTY0RGVjb2RlLCBpc0V0aGVyZXVtQWRkcmVzcywga2V5RXh0cmFjdFN1cmkgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC1jcnlwdG8nO1xuaW1wb3J0IHsgS2V5cGFpclR5cGUgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC1jcnlwdG8vdHlwZXMnO1xuXG5pbXBvcnQgeyBLb25pQ3JvbiB9IGZyb20gJy4uL2Nyb24nO1xuaW1wb3J0IHsgS29uaVN1YnNjcmlwdGlvbiB9IGZyb20gJy4uL3N1YnNjcmlwdGlvbic7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuY29uc3QgcGFzc3dvcmRlciA9IHJlcXVpcmUoJ2Jyb3dzZXItcGFzc3dvcmRlcicpO1xuXG5jb25zdCBFVEhfREVSSVZFX0RFRkFVTFQgPSAnL20vNDRcXCcvNjBcXCcvMFxcJy8wLzAnO1xuXG4vLyBMaXN0IG9mIHByb3ZpZGVycyBwYXNzZWQgaW50byBjb25zdHJ1Y3Rvci4gVGhpcyBpcyB0aGUgbGlzdCBvZiBwcm92aWRlcnNcbi8vIGV4cG9zZWQgYnkgdGhlIGV4dGVuc2lvbi5cbnR5cGUgUHJvdmlkZXJzID0gUmVjb3JkPHN0cmluZywge1xuICBtZXRhOiBQcm92aWRlck1ldGE7XG4gIC8vIFRoZSBwcm92aWRlciBpcyBub3QgcnVubmluZyBhdCBpbml0LCBjYWxsaW5nIHRoaXMgd2lsbCBpbnN0YW50aWF0ZSB0aGVcbiAgLy8gcHJvdmlkZXIuXG4gIHN0YXJ0OiAoKSA9PiBQcm92aWRlckludGVyZmFjZTtcbn0+XG5cbmNvbnN0IGdldFN1cmkgPSAoc2VlZDogc3RyaW5nLCB0eXBlPzogS2V5cGFpclR5cGUpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gdHlwZSA9PT0gJ2V0aGVyZXVtJ1xuICAgID8gYCR7c2VlZH0ke0VUSF9ERVJJVkVfREVGQVVMVH1gXG4gICAgOiBzZWVkO1xufTtcblxuY29uc3QgZ2VuZXJhdGVEZWZhdWx0Q3Jvd2Rsb2FuTWFwID0gKCk6IFJlY29yZDxzdHJpbmcsIENyb3dkbG9hbkl0ZW0+ID0+IHtcbiAgY29uc3QgY3Jvd2Rsb2FuTWFwOiBSZWNvcmQ8c3RyaW5nLCBDcm93ZGxvYW5JdGVtPiA9IHt9O1xuXG4gIE9iamVjdC5lbnRyaWVzKENoYWluSW5mb01hcCkuZm9yRWFjaCgoW25ldHdvcmtLZXksIGNoYWluSW5mb10pID0+IHtcbiAgICBpZiAoX2lzU3Vic3RyYXRlUGFyYUNoYWluKGNoYWluSW5mbykpIHtcbiAgICAgIGNyb3dkbG9hbk1hcFtuZXR3b3JrS2V5XSA9IHtcbiAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5QRU5ESU5HLFxuICAgICAgICBjb250cmlidXRlOiAnMCdcbiAgICAgIH07XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gY3Jvd2Rsb2FuTWFwO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS29uaVN0YXRlIHtcbiAgcHJpdmF0ZSBpbmplY3RlZFByb3ZpZGVycyA9IG5ldyBNYXA8Y2hyb21lLnJ1bnRpbWUuUG9ydCwgUHJvdmlkZXJJbnRlcmZhY2U+KCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgcHJvdmlkZXJzOiBQcm92aWRlcnM7XG4gIHByaXZhdGUgcmVhZG9ubHkgdW5zdWJzY3JpcHRpb25NYXA6IFJlY29yZDxzdHJpbmcsICgpID0+IHZvaWQ+ID0ge307XG4gIHByaXZhdGUgcmVhZG9ubHkgYWNjb3VudFJlZlN0b3JlID0gbmV3IEFjY291bnRSZWZTdG9yZSgpO1xuICBwcml2YXRlIGV4dGVybmFsUmVxdWVzdDogUmVjb3JkPHN0cmluZywgRXh0ZXJuYWxSZXF1ZXN0UHJvbWlzZT4gPSB7fTtcbiAgcHJpdmF0ZSBiYWxhbmNlTWFwOiBSZWNvcmQ8c3RyaW5nLCBCYWxhbmNlSXRlbT4gPSB7fTtcbiAgcHJpdmF0ZSBiYWxhbmNlU3ViamVjdCA9IG5ldyBTdWJqZWN0PEJhbGFuY2VKc29uPigpO1xuXG4gIHByaXZhdGUgY3Jvd2Rsb2FuTWFwOiBSZWNvcmQ8c3RyaW5nLCBDcm93ZGxvYW5JdGVtPiA9IGdlbmVyYXRlRGVmYXVsdENyb3dkbG9hbk1hcCgpO1xuICBwcml2YXRlIGNyb3dkbG9hblN1YmplY3QgPSBuZXcgU3ViamVjdDxDcm93ZGxvYW5Kc29uPigpO1xuXG4gIHByaXZhdGUgbmZ0U3ViamVjdCA9IG5ldyBTdWJqZWN0PE5mdEpzb24+KCk7XG5cbiAgcHJpdmF0ZSBtYW50YVBheUNvbmZpZ1N1YmplY3QgPSBuZXcgU3ViamVjdDxNYW50YVBheUNvbmZpZ1tdPigpO1xuICBwdWJsaWMgaXNNYW50YVBheUVuYWJsZWQgPSBmYWxzZTtcblxuICBwcml2YXRlIHN0YWtpbmdTdWJqZWN0ID0gbmV3IFN1YmplY3Q8U3Rha2luZ0pzb24+KCk7XG4gIHByaXZhdGUgY2hhaW5TdGFraW5nTWV0YWRhdGFTdWJqZWN0ID0gbmV3IFN1YmplY3Q8Q2hhaW5TdGFraW5nTWV0YWRhdGFbXT4oKTtcbiAgcHJpdmF0ZSBzdGFraW5nTm9taW5hdG9yTWV0YWRhdGFTdWJqZWN0ID0gbmV3IFN1YmplY3Q8Tm9taW5hdG9yTWV0YWRhdGFbXT4oKTtcbiAgcHJpdmF0ZSBzdGFraW5nUmV3YXJkU3ViamVjdCA9IG5ldyBTdWJqZWN0PFN0YWtpbmdSZXdhcmRKc29uPigpO1xuICBwcml2YXRlIHN0YWtpbmdSZXdhcmRTdGF0ZTogU3Rha2luZ1Jld2FyZEpzb24gPSB7XG4gICAgcmVhZHk6IGZhbHNlLFxuICAgIGRhdGE6IHt9XG4gIH0gYXMgU3Rha2luZ1Jld2FyZEpzb247XG5cbiAgcHJpdmF0ZSBsYXp5TWFwOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuXG4gIHJlYWRvbmx5IG5vdGlmaWNhdGlvblNlcnZpY2U6IE5vdGlmaWNhdGlvblNlcnZpY2U7XG4gIC8vIFRPRE86IGNvbnNpZGVyIG1ha2luZyBjaGFpblNlcnZpY2UgcHVibGljIChvciBnZXR0ZXIpIGFuZCBjYWxsIGZ1bmN0aW9uIGRpcmVjdGx5XG4gIHJlYWRvbmx5IGV2ZW50U2VydmljZTogRXZlbnRTZXJ2aWNlO1xuICByZWFkb25seSBrZXlyaW5nU2VydmljZTogS2V5cmluZ1NlcnZpY2U7XG4gIHJlYWRvbmx5IGNoYWluU2VydmljZTogQ2hhaW5TZXJ2aWNlO1xuICByZWFkb25seSBkYlNlcnZpY2U6IERhdGFiYXNlU2VydmljZTtcbiAgcHJpdmF0ZSBjcm9uOiBLb25pQ3JvbjtcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb246IEtvbmlTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG4gIHJlYWRvbmx5IHNldHRpbmdTZXJ2aWNlOiBTZXR0aW5nU2VydmljZTtcbiAgcmVhZG9ubHkgcmVxdWVzdFNlcnZpY2U6IFJlcXVlc3RTZXJ2aWNlO1xuICByZWFkb25seSB0cmFuc2FjdGlvblNlcnZpY2U6IFRyYW5zYWN0aW9uU2VydmljZTtcbiAgcmVhZG9ubHkgaGlzdG9yeVNlcnZpY2U6IEhpc3RvcnlTZXJ2aWNlO1xuICByZWFkb25seSBwcmljZVNlcnZpY2U6IFByaWNlU2VydmljZTtcbiAgcmVhZG9ubHkgYmFsYW5jZVNlcnZpY2U6IEJhbGFuY2VTZXJ2aWNlO1xuICByZWFkb25seSBtaWdyYXRpb25TZXJ2aWNlOiBNaWdyYXRpb25TZXJ2aWNlO1xuICByZWFkb25seSBzdWJzY2FuU2VydmljZTogU3Vic2NhblNlcnZpY2U7XG4gIHJlYWRvbmx5IHdhbGxldENvbm5lY3RTZXJ2aWNlOiBXYWxsZXRDb25uZWN0U2VydmljZTtcblxuICAvLyBIYW5kbGUgdGhlIGdlbmVyYWwgc3RhdHVzIG9mIHRoZSBleHRlbnNpb25cbiAgcHJpdmF0ZSBnZW5lcmFsU3RhdHVzOiBTZXJ2aWNlU3RhdHVzID0gU2VydmljZVN0YXR1cy5JTklUSUFMSVpJTkc7XG4gIHByaXZhdGUgd2FpdFNsZWVwaW5nOiBQcm9taXNlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgd2FpdFN0YXJ0aW5nOiBQcm9taXNlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IgKHByb3ZpZGVyczogUHJvdmlkZXJzID0ge30pIHtcbiAgICB0aGlzLnByb3ZpZGVycyA9IHByb3ZpZGVycztcblxuICAgIHRoaXMuZXZlbnRTZXJ2aWNlID0gbmV3IEV2ZW50U2VydmljZSgpO1xuICAgIHRoaXMuZGJTZXJ2aWNlID0gbmV3IERhdGFiYXNlU2VydmljZSh0aGlzLmV2ZW50U2VydmljZSk7XG4gICAgdGhpcy5rZXlyaW5nU2VydmljZSA9IG5ldyBLZXlyaW5nU2VydmljZSh0aGlzLmV2ZW50U2VydmljZSk7XG4gICAgdGhpcy5zdWJzY2FuU2VydmljZSA9IG5ldyBTdWJzY2FuU2VydmljZSgpO1xuXG4gICAgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlID0gbmV3IE5vdGlmaWNhdGlvblNlcnZpY2UoKTtcbiAgICB0aGlzLmNoYWluU2VydmljZSA9IG5ldyBDaGFpblNlcnZpY2UodGhpcy5kYlNlcnZpY2UsIHRoaXMuZXZlbnRTZXJ2aWNlKTtcbiAgICB0aGlzLnNldHRpbmdTZXJ2aWNlID0gbmV3IFNldHRpbmdTZXJ2aWNlKCk7XG4gICAgdGhpcy5yZXF1ZXN0U2VydmljZSA9IG5ldyBSZXF1ZXN0U2VydmljZSh0aGlzLmNoYWluU2VydmljZSwgdGhpcy5zZXR0aW5nU2VydmljZSwgdGhpcy5rZXlyaW5nU2VydmljZSk7XG4gICAgdGhpcy5wcmljZVNlcnZpY2UgPSBuZXcgUHJpY2VTZXJ2aWNlKHRoaXMuZGJTZXJ2aWNlLCB0aGlzLmV2ZW50U2VydmljZSwgdGhpcy5jaGFpblNlcnZpY2UpO1xuICAgIHRoaXMuYmFsYW5jZVNlcnZpY2UgPSBuZXcgQmFsYW5jZVNlcnZpY2UodGhpcy5jaGFpblNlcnZpY2UpO1xuICAgIHRoaXMuaGlzdG9yeVNlcnZpY2UgPSBuZXcgSGlzdG9yeVNlcnZpY2UodGhpcy5kYlNlcnZpY2UsIHRoaXMuY2hhaW5TZXJ2aWNlLCB0aGlzLmV2ZW50U2VydmljZSwgdGhpcy5rZXlyaW5nU2VydmljZSk7XG4gICAgdGhpcy50cmFuc2FjdGlvblNlcnZpY2UgPSBuZXcgVHJhbnNhY3Rpb25TZXJ2aWNlKHRoaXMuY2hhaW5TZXJ2aWNlLCB0aGlzLmV2ZW50U2VydmljZSwgdGhpcy5yZXF1ZXN0U2VydmljZSwgdGhpcy5iYWxhbmNlU2VydmljZSwgdGhpcy5oaXN0b3J5U2VydmljZSwgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlLCB0aGlzLmRiU2VydmljZSk7XG4gICAgdGhpcy53YWxsZXRDb25uZWN0U2VydmljZSA9IG5ldyBXYWxsZXRDb25uZWN0U2VydmljZSh0aGlzLCB0aGlzLnJlcXVlc3RTZXJ2aWNlKTtcbiAgICB0aGlzLm1pZ3JhdGlvblNlcnZpY2UgPSBuZXcgTWlncmF0aW9uU2VydmljZSh0aGlzKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG5ldyBLb25pU3Vic2NyaXB0aW9uKHRoaXMsIHRoaXMuZGJTZXJ2aWNlKTtcbiAgICB0aGlzLmNyb24gPSBuZXcgS29uaUNyb24odGhpcywgdGhpcy5zdWJzY3JpcHRpb24sIHRoaXMuZGJTZXJ2aWNlKTtcbiAgICB0aGlzLmxvZ2dlciA9IGNyZWF0ZUxvZ2dlcignU3RhdGUnKTtcblxuICAgIC8vIEluaXQgc3RhdGVcbiAgICB0aGlzLmluaXQoKVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG5cbiAgLy8gQ2xvbmUgZnJvbSBwb2xrYWRvdC5qc1xuICBwdWJsaWMgZ2V0IGtub3duTWV0YWRhdGEgKCk6IE1ldGFkYXRhRGVmW10ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLmtub3duTWV0YWRhdGE7XG4gIH1cblxuICBwdWJsaWMgaW5qZWN0TWV0YWRhdGEgKHVybDogc3RyaW5nLCByZXF1ZXN0OiBNZXRhZGF0YURlZik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLmluamVjdE1ldGFkYXRhKHVybCwgcmVxdWVzdCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TWV0YVJlcXVlc3QgKGlkOiBzdHJpbmcpOiBNZXRhUmVxdWVzdCB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFNlcnZpY2UuZ2V0TWV0YVJlcXVlc3QoaWQpO1xuICB9XG5cbiAgcHVibGljIGdldFNpZ25SZXF1ZXN0IChpZDogc3RyaW5nKTogU2lnblJlcXVlc3QgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLmdldFNpZ25SZXF1ZXN0KGlkKTtcbiAgfVxuXG4gIC8vIExpc3QgYWxsIHByb3ZpZGVycyB0aGUgZXh0ZW5zaW9uIGlzIGV4cG9zaW5nXG4gIHB1YmxpYyBycGNMaXN0UHJvdmlkZXJzICgpOiBQcm9taXNlPFJlc3BvbnNlUnBjTGlzdFByb3ZpZGVycz4ge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoT2JqZWN0LmtleXModGhpcy5wcm92aWRlcnMpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgIGFjY1trZXldID0gdGhpcy5wcm92aWRlcnNba2V5XS5tZXRhO1xuXG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9IGFzIFJlc3BvbnNlUnBjTGlzdFByb3ZpZGVycykpO1xuICB9XG5cbiAgcHVibGljIHJwY1NlbmQgKHJlcXVlc3Q6IFJlcXVlc3RScGNTZW5kLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxKc29uUnBjUmVzcG9uc2U8dW5rbm93bj4+IHtcbiAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuaW5qZWN0ZWRQcm92aWRlcnMuZ2V0KHBvcnQpO1xuXG4gICAgYXNzZXJ0KHByb3ZpZGVyLCAnQ2Fubm90IGNhbGwgcHViKHJwYy5zdWJzY3JpYmUpIGJlZm9yZSBwcm92aWRlciBpcyBzZXQnKTtcblxuICAgIHJldHVybiBwcm92aWRlci5zZW5kKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnBhcmFtcyk7XG4gIH1cblxuICAvLyBTdGFydCBhIHByb3ZpZGVyLCByZXR1cm4gaXRzIG1ldGFcbiAgcHVibGljIHJwY1N0YXJ0UHJvdmlkZXIgKGtleTogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxQcm92aWRlck1ldGE+IHtcbiAgICBhc3NlcnQoT2JqZWN0LmtleXModGhpcy5wcm92aWRlcnMpLmluY2x1ZGVzKGtleSksICdQcm92aWRlciBjYW5ub3QgYmUgZm91bmQuJyk7XG5cbiAgICBpZiAodGhpcy5pbmplY3RlZFByb3ZpZGVycy5nZXQocG9ydCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5wcm92aWRlcnNba2V5XS5tZXRhKTtcbiAgICB9XG5cbiAgICAvLyBJbnN0YW50aWF0ZSB0aGUgcHJvdmlkZXJcbiAgICB0aGlzLmluamVjdGVkUHJvdmlkZXJzLnNldChwb3J0LCB0aGlzLnByb3ZpZGVyc1trZXldLnN0YXJ0KCkpO1xuXG4gICAgLy8gQ2xvc2UgcHJvdmlkZXIgY29ubmVjdGlvbiB3aGVuIHBhZ2UgaXMgY2xvc2VkXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmluamVjdGVkUHJvdmlkZXJzLmdldChwb3J0KTtcblxuICAgICAgaWYgKHByb3ZpZGVyKSB7XG4gICAgICAgIHdpdGhFcnJvckxvZygoKSA9PiBwcm92aWRlci5kaXNjb25uZWN0KCkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmluamVjdGVkUHJvdmlkZXJzLmRlbGV0ZShwb3J0KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5wcm92aWRlcnNba2V5XS5tZXRhKTtcbiAgfVxuXG4gIHB1YmxpYyBycGNTdWJzY3JpYmUgKHsgbWV0aG9kLFxuICAgIHBhcmFtcyxcbiAgICB0eXBlIH06IFJlcXVlc3RScGNTdWJzY3JpYmUsIGNiOiBQcm92aWRlckludGVyZmFjZUNhbGxiYWNrLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxudW1iZXIgfCBzdHJpbmc+IHtcbiAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuaW5qZWN0ZWRQcm92aWRlcnMuZ2V0KHBvcnQpO1xuXG4gICAgYXNzZXJ0KHByb3ZpZGVyLCAnQ2Fubm90IGNhbGwgcHViKHJwYy5zdWJzY3JpYmUpIGJlZm9yZSBwcm92aWRlciBpcyBzZXQnKTtcblxuICAgIHJldHVybiBwcm92aWRlci5zdWJzY3JpYmUodHlwZSwgbWV0aG9kLCBwYXJhbXMsIGNiKTtcbiAgfVxuXG4gIHB1YmxpYyBycGNTdWJzY3JpYmVDb25uZWN0ZWQgKF9yZXF1ZXN0OiBudWxsLCBjYjogUHJvdmlkZXJJbnRlcmZhY2VDYWxsYmFjaywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IHZvaWQge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5pbmplY3RlZFByb3ZpZGVycy5nZXQocG9ydCk7XG5cbiAgICBhc3NlcnQocHJvdmlkZXIsICdDYW5ub3QgY2FsbCBwdWIocnBjLnN1YnNjcmliZUNvbm5lY3RlZCkgYmVmb3JlIHByb3ZpZGVyIGlzIHNldCcpO1xuXG4gICAgY2IobnVsbCwgcHJvdmlkZXIuaXNDb25uZWN0ZWQpOyAvLyBJbW1lZGlhdGVseSBzZW5kIGJhY2sgY3VycmVudCBpc0Nvbm5lY3RlZFxuICAgIHByb3ZpZGVyLm9uKCdjb25uZWN0ZWQnLCAoKSA9PiBjYihudWxsLCB0cnVlKSk7XG4gICAgcHJvdmlkZXIub24oJ2Rpc2Nvbm5lY3RlZCcsICgpID0+IGNiKG51bGwsIGZhbHNlKSk7XG4gIH1cblxuICBwdWJsaWMgcnBjVW5zdWJzY3JpYmUgKHJlcXVlc3Q6IFJlcXVlc3RScGNVbnN1YnNjcmliZSwgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5pbmplY3RlZFByb3ZpZGVycy5nZXQocG9ydCk7XG5cbiAgICBhc3NlcnQocHJvdmlkZXIsICdDYW5ub3QgY2FsbCBwdWIocnBjLnVuc3Vic2NyaWJlKSBiZWZvcmUgcHJvdmlkZXIgaXMgc2V0Jyk7XG5cbiAgICByZXR1cm4gcHJvdmlkZXIudW5zdWJzY3JpYmUocmVxdWVzdC50eXBlLCByZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC5zdWJzY3JpcHRpb25JZCk7XG4gIH1cblxuICBwdWJsaWMgc2F2ZU1ldGFkYXRhIChtZXRhOiBNZXRhZGF0YURlZik6IHZvaWQge1xuICAgIHRoaXMucmVxdWVzdFNlcnZpY2Uuc2F2ZU1ldGFkYXRhKG1ldGEpO1xuICB9XG5cbiAgcHVibGljIHNpZ24gKHVybDogc3RyaW5nLCByZXF1ZXN0OiBSZXF1ZXN0U2lnbiwgYWNjb3VudDogQWNjb3VudEpzb24pOiBQcm9taXNlPFJlc3BvbnNlU2lnbmluZz4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLnNpZ24odXJsLCByZXF1ZXN0LCBhY2NvdW50KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYXV0aFN1YmplY3RWMiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFNlcnZpY2UuYXV0aFN1YmplY3RWMjtcbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZURlZmF1bHRCYWxhbmNlTWFwICgpIHtcbiAgICBjb25zdCBiYWxhbmNlTWFwOiBSZWNvcmQ8c3RyaW5nLCBCYWxhbmNlSXRlbT4gPSB7fTtcbiAgICBjb25zdCBhY3RpdmVDaGFpbnMgPSB0aGlzLmNoYWluU2VydmljZS5nZXRBY3RpdmVDaGFpbkluZm9NYXAoKTtcblxuICAgIE9iamVjdC52YWx1ZXMoYWN0aXZlQ2hhaW5zKS5mb3JFYWNoKChjaGFpbkluZm8pID0+IHtcbiAgICAgIGNvbnN0IGNoYWluQXNzZXRNYXAgPSB0aGlzLmNoYWluU2VydmljZS5nZXRGdW5naWJsZVRva2Vuc0J5Q2hhaW4oY2hhaW5JbmZvLnNsdWcpO1xuXG4gICAgICBPYmplY3Qua2V5cyhjaGFpbkFzc2V0TWFwKS5mb3JFYWNoKChhc3NldFNsdWcpID0+IHtcbiAgICAgICAgYmFsYW5jZU1hcFthc3NldFNsdWddID0ge1xuICAgICAgICAgIHRva2VuU2x1ZzogYXNzZXRTbHVnLFxuICAgICAgICAgIGZyZWU6ICcnLFxuICAgICAgICAgIGxvY2tlZDogJycsXG4gICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5QRU5ESU5HXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBiYWxhbmNlTWFwO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGluaXQgKCkge1xuICAgIGF3YWl0IHRoaXMuZXZlbnRTZXJ2aWNlLndhaXRDcnlwdG9SZWFkeTtcbiAgICBhd2FpdCB0aGlzLmNoYWluU2VydmljZS5pbml0KCk7XG4gICAgYXdhaXQgdGhpcy5taWdyYXRpb25TZXJ2aWNlLnJ1bigpO1xuICAgIHRoaXMuZXZlbnRTZXJ2aWNlLmVtaXQoJ2NoYWluLnJlYWR5JywgdHJ1ZSk7XG5cbiAgICB0aGlzLm9uUmVhZHkoKTtcbiAgICB0aGlzLm9uQWNjb3VudEFkZCgpO1xuICAgIHRoaXMub25BY2NvdW50UmVtb3ZlKCk7XG5cbiAgICBhd2FpdCB0aGlzLnN0YXJ0U3Vic2NyaXB0aW9uKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaW5pdE1hbnRhUGF5IChwYXNzd29yZDogc3RyaW5nKSB7XG4gICAgY29uc3QgbWFudGFQYXlDb25maWcgPSBhd2FpdCB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LmdldE1hbnRhUGF5Rmlyc3RDb25maWcoX0RFRkFVTFRfTUFOVEFfWktfQ0hBSU4pIGFzIE1hbnRhUGF5Q29uZmlnO1xuXG4gICAgaWYgKG1hbnRhUGF5Q29uZmlnICYmIG1hbnRhUGF5Q29uZmlnLmVuYWJsZWQgJiYgIXRoaXMuaXNNYW50YVBheUVuYWJsZWQpIHsgLy8gb25seSBpbml0IHRoZSBmaXJzdCBsb2dpblxuICAgICAgY29uc29sZS5kZWJ1ZygnSW5pdGlhdGluZyBNYW50YVBheSBmb3InLCBtYW50YVBheUNvbmZpZy5hZGRyZXNzKTtcbiAgICAgIGF3YWl0IHRoaXMuZW5hYmxlTWFudGFQYXkoZmFsc2UsIG1hbnRhUGF5Q29uZmlnLmFkZHJlc3MsIHBhc3N3b3JkKTtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ0luaXRpYXRlZCBNYW50YVBheSBmb3InLCBtYW50YVBheUNvbmZpZy5hZGRyZXNzKTtcblxuICAgICAgdGhpcy5pc01hbnRhUGF5RW5hYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdtYW50YVBheS5lbmFibGUnLCBtYW50YVBheUNvbmZpZy5hZGRyZXNzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN0YXJ0U3Vic2NyaXB0aW9uICgpIHtcbiAgICBhd2FpdCB0aGlzLmV2ZW50U2VydmljZS53YWl0S2V5cmluZ1JlYWR5O1xuXG4gICAgdGhpcy5kYlNlcnZpY2Uuc3Vic2NyaWJlQ2hhaW5TdGFraW5nTWV0YWRhdGEoW10sIChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmNoYWluU3Rha2luZ01ldGFkYXRhU3ViamVjdC5uZXh0KGRhdGEpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5kYlNlcnZpY2Uuc3Vic2NyaWJlTWFudGFQYXlDb25maWcoX0RFRkFVTFRfTUFOVEFfWktfQ0hBSU4sIChkYXRhKSA9PiB7XG4gICAgICB0aGlzLm1hbnRhUGF5Q29uZmlnU3ViamVjdC5uZXh0KGRhdGEpO1xuICAgIH0pO1xuXG4gICAgbGV0IHVuc3ViOiBTdWJzY3JpcHRpb24gfCB1bmRlZmluZWQ7XG5cbiAgICB0aGlzLmtleXJpbmdTZXJ2aWNlLmFjY291bnRTdWJqZWN0LnN1YnNjcmliZSgoYWNjb3VudHMpID0+IHsgLy8gVE9ETzogaW1wcm92ZSB0aGlzXG4gICAgICB1bnN1YiAmJiB1bnN1Yi51bnN1YnNjcmliZSgpO1xuXG4gICAgICB1bnN1YiA9IHRoaXMuZGJTZXJ2aWNlLnN1YnNjcmliZU5vbWluYXRvck1ldGFkYXRhKE9iamVjdC5rZXlzKGFjY291bnRzKSwgKGRhdGEpID0+IHtcbiAgICAgICAgdGhpcy5zdGFraW5nTm9taW5hdG9yTWV0YWRhdGFTdWJqZWN0Lm5leHQoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBvblJlYWR5ICgpIHtcbiAgICAvLyBUb2RvOiBOZWVkIG9wdGltaXplIGluIHRoZSBmdXR1cmUgdG8sIG9ubHkgcnVuIGltcG9ydGFudCBzZXJ2aWNlcyBvbmV0aW1lIHRvIHNhdmUgcmVzb3VyY2VzXG4gICAgLy8gVG9kbzogSWYgb3B0aW1pemUgbXVzdCBjaGVjayBhY3Rpdml0eSBvZiB3ZWItcnVubmVyIG9mIG1vYmlsZVxuICAgIHRoaXMuX3N0YXJ0KCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlS2V5cmluZ1N0YXRlIChpc1JlYWR5ID0gdHJ1ZSwgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5rZXlyaW5nU2VydmljZS51cGRhdGVLZXlyaW5nU3RhdGUoaXNSZWFkeSk7XG4gICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgfVxuXG4gIHByaXZhdGUgbGF6eU5leHQgPSAoa2V5OiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgaWYgKHRoaXMubGF6eU1hcFtrZXldKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5sYXp5TWFwW2tleV0pO1xuICAgIH1cblxuICAgIGNvbnN0IGxhenkgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICBjbGVhclRpbWVvdXQobGF6eSk7XG4gICAgfSwgMzAwKTtcblxuICAgIHRoaXMubGF6eU1hcFtrZXldID0gbGF6eTtcbiAgfTtcblxuICBwdWJsaWMgZ2V0QXV0aFJlcXVlc3RWMiAoaWQ6IHN0cmluZyk6IEF1dGhSZXF1ZXN0VjIge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLmdldEF1dGhSZXF1ZXN0VjIoaWQpO1xuICB9XG5cbiAgcHVibGljIHNldEF1dGhvcml6ZSAoZGF0YTogQXV0aFVybHMsIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmVxdWVzdFNlcnZpY2Uuc2V0QXV0aG9yaXplKGRhdGEsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdXRob3JpemUgKHVwZGF0ZTogKHZhbHVlOiBBdXRoVXJscykgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmVxdWVzdFNlcnZpY2UuZ2V0QXV0aG9yaXplKHVwZGF0ZSk7XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlRXZtQ2hhaW5DaGFuZ2UgKCk6IFN1YmplY3Q8QXV0aFVybHM+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0U2VydmljZS5zdWJzY3JpYmVFdm1DaGFpbkNoYW5nZTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVBdXRob3JpemVVcmxTdWJqZWN0ICgpOiBTdWJqZWN0PEF1dGhVcmxzPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFNlcnZpY2Uuc3Vic2NyaWJlQXV0aG9yaXplVXJsU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdXRoTGlzdCAoKTogUHJvbWlzZTxBdXRoVXJscz4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLmdldEF1dGhMaXN0KCk7XG4gIH1cblxuICBnZXRBZGRyZXNzTGlzdCAodmFsdWUgPSBmYWxzZSk6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+IHtcbiAgICBjb25zdCBhZGRyZXNzTGlzdCA9IE9iamVjdC5rZXlzKHRoaXMua2V5cmluZ1NlcnZpY2UuYWNjb3VudHMpO1xuXG4gICAgcmV0dXJuIGFkZHJlc3NMaXN0LnJlZHVjZSgoYWRkcmVzc0xpc3QsIHYpID0+ICh7IC4uLmFkZHJlc3NMaXN0LCBbdl06IHZhbHVlIH0pLCB7fSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYXV0aG9yaXplVXJsVjIgKHVybDogc3RyaW5nLCByZXF1ZXN0OiBSZXF1ZXN0QXV0aG9yaXplVGFiKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFNlcnZpY2UuYXV0aG9yaXplVXJsVjIodXJsLCByZXF1ZXN0KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXROYXRpdmVUb2tlbkluZm8gKG5ldHdvcmtLZXk6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5nZXROYXRpdmVUb2tlbkluZm8obmV0d29ya0tleSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2hhaW5JbmZvIChuZXR3b3JrS2V5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvQnlLZXkobmV0d29ya0tleSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0Q2hhaW5TdGFraW5nTWV0YWRhdGEgKCk6IFByb21pc2U8Q2hhaW5TdGFraW5nTWV0YWRhdGFbXT4ge1xuICAgIHJldHVybiB0aGlzLmRiU2VydmljZS5nZXRDaGFpblN0YWtpbmdNZXRhZGF0YSgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFN0YWtpbmdNZXRhZGF0YUJ5Q2hhaW4gKGNoYWluOiBzdHJpbmcsIHR5cGU6IFN0YWtpbmdUeXBlKSB7XG4gICAgcmV0dXJuIHRoaXMuZGJTZXJ2aWNlLmdldFN0YWtpbmdNZXRhZGF0YUJ5Q2hhaW4oY2hhaW4sIHR5cGUpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldE5vbWluYXRvck1ldGFkYXRhICgpOiBQcm9taXNlPE5vbWluYXRvck1ldGFkYXRhW10+IHtcbiAgICByZXR1cm4gdGhpcy5kYlNlcnZpY2UuZ2V0Tm9taW5hdG9yTWV0YWRhdGEoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRNYW50YVBheUNvbmZpZyAoY2hhaW46IHN0cmluZyk6IFByb21pc2U8TWFudGFQYXlDb25maWdbXT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgIHJldHVybiB0aGlzLmRiU2VydmljZS5nZXRNYW50YVBheUNvbmZpZyhjaGFpbik7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0U3Rha2luZyAoKTogUHJvbWlzZTxTdGFraW5nSnNvbj4ge1xuICAgIGNvbnN0IGFkZHJlc3NlcyA9IHRoaXMuZ2V0RGVjb2RlZEFkZHJlc3NlcygpO1xuXG4gICAgY29uc3Qgc3Rha2luZ3MgPSBhd2FpdCB0aGlzLmRiU2VydmljZS5nZXRTdGFraW5ncyhhZGRyZXNzZXMsIHRoaXMuYWN0aXZlQ2hhaW5TbHVncyk7XG5cbiAgICByZXR1cm4geyByZWFkeTogdHJ1ZSwgZGV0YWlsczogc3Rha2luZ3MgfSBhcyBTdGFraW5nSnNvbjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRTdGFraW5nT3duZXJzQnlDaGFpbnMgKGNoYWluczogc3RyaW5nW10pOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3Qgc3Rha2luZ3MgPSBhd2FpdCB0aGlzLmRiU2VydmljZS5nZXRTdGFraW5nc0J5Q2hhaW5zKGNoYWlucyk7XG4gICAgY29uc3QgYWRkcmVzc2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgc3Rha2luZ3MuZm9yRWFjaCgoc3Rha2luZykgPT4ge1xuICAgICAgaWYgKCFhZGRyZXNzZXMuaW5jbHVkZXMoc3Rha2luZy5hZGRyZXNzKSkge1xuICAgICAgICBhZGRyZXNzZXMucHVzaChzdGFraW5nLmFkZHJlc3MpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFkZHJlc3NlcztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRQb29sZWRTdGFraW5nUmVjb3Jkc0J5QWRkcmVzcyAoYWRkcmVzc2VzOiBzdHJpbmdbXSk6IFByb21pc2U8U3Rha2luZ0l0ZW1bXT4ge1xuICAgIHJldHVybiB0aGlzLmRiU2VydmljZS5nZXRQb29sZWRTdGFraW5ncyhhZGRyZXNzZXMsIHRoaXMuYWN0aXZlQ2hhaW5TbHVncyk7XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlTWFudGFQYXlDb25maWcgKCkge1xuICAgIHJldHVybiB0aGlzLm1hbnRhUGF5Q29uZmlnU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVTdGFraW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFraW5nU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVDaGFpblN0YWtpbmdNZXRhZGF0YSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TdGFraW5nTWV0YWRhdGFTdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZU5vbWluYXRvck1ldGFkYXRhICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFraW5nTm9taW5hdG9yTWV0YWRhdGFTdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIGVuc3VyZVVybEF1dGhvcml6ZWRWMiAodXJsOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0U2VydmljZS5lbnN1cmVVcmxBdXRob3JpemVkVjIodXJsKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTdGFraW5nSXRlbSAobmV0d29ya0tleTogc3RyaW5nLCBpdGVtOiBTdGFraW5nSXRlbSk6IHZvaWQge1xuICAgIHRoaXMuZGJTZXJ2aWNlLnVwZGF0ZVN0YWtpbmcobmV0d29ya0tleSwgaXRlbS5hZGRyZXNzLCBpdGVtKS5jYXRjaCgoZSkgPT4gdGhpcy5sb2dnZXIud2FybihlKSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlQ2hhaW5TdGFraW5nTWV0YWRhdGEgKGl0ZW06IENoYWluU3Rha2luZ01ldGFkYXRhLCBjaGFuZ2VzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgICB0aGlzLmRiU2VydmljZS51cGRhdGVDaGFpblN0YWtpbmdNZXRhZGF0YShpdGVtLCBjaGFuZ2VzKS5jYXRjaCgoZSkgPT4gdGhpcy5sb2dnZXIud2FybihlKSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlU3Rha2luZ05vbWluYXRvck1ldGFkYXRhIChpdGVtOiBOb21pbmF0b3JNZXRhZGF0YSkge1xuICAgIHRoaXMuZGJTZXJ2aWNlLnVwZGF0ZU5vbWluYXRvck1ldGFkYXRhKGl0ZW0pLmNhdGNoKChlKSA9PiB0aGlzLmxvZ2dlci53YXJuKGUpKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXROZnRDb2xsZWN0aW9uIChuZXR3b3JrOiBzdHJpbmcsIGRhdGE6IE5mdENvbGxlY3Rpb24sIGNhbGxiYWNrPzogKGRhdGE6IE5mdENvbGxlY3Rpb24pID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmRiU2VydmljZS5hZGROZnRDb2xsZWN0aW9uKGRhdGEpLmNhdGNoKChlKSA9PiB0aGlzLmxvZ2dlci53YXJuKGUpKTtcbiAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhkYXRhKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXROZnRDb2xsZWN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYlNlcnZpY2UuZ2V0QWxsTmZ0Q29sbGVjdGlvbih0aGlzLmFjdGl2ZUNoYWluU2x1Z3MpO1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZU5mdENvbGxlY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRiU2VydmljZS5zdG9yZXMubmZ0Q29sbGVjdGlvbi5zdWJzY3JpYmVOZnRDb2xsZWN0aW9uKHRoaXMuYWN0aXZlQ2hhaW5TbHVncyk7XG4gIH1cblxuICByZXNldE5mdCAobmV3QWRkcmVzczogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5nZXROZnQoKS50aGVuKChkYXRhKSA9PiB0aGlzLm5mdFN1YmplY3QubmV4dChkYXRhIHx8IHtcbiAgICAgIG5mdExpc3Q6IFtdLFxuICAgICAgdG90YWw6IDBcbiAgICB9KSkuY2F0Y2goKGUpID0+IHRoaXMubG9nZ2VyLndhcm4oZSkpO1xuXG4gICAgY29uc3QgYWRkcmVzc2VzID0gdGhpcy5nZXREZWNvZGVkQWRkcmVzc2VzKG5ld0FkZHJlc3MpO1xuXG4gICAgdGhpcy5kYlNlcnZpY2Uuc3Vic2NyaWJlTmZ0KGFkZHJlc3NlcywgdGhpcy5hY3RpdmVDaGFpblNsdWdzLCAobmZ0cykgPT4ge1xuICAgICAgdGhpcy5uZnRTdWJqZWN0Lm5leHQoe1xuICAgICAgICBuZnRMaXN0OiBuZnRzLFxuICAgICAgICB0b3RhbDogbmZ0cy5sZW5ndGhcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZU5mdERhdGEgKG5ldHdvcms6IHN0cmluZywgbmZ0RGF0YTogTmZ0SXRlbSwgYWRkcmVzczogc3RyaW5nLCBjYWxsYmFjaz86IChuZnREYXRhOiBOZnRJdGVtKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5kYlNlcnZpY2UuYWRkTmZ0KGFkZHJlc3MsIG5mdERhdGEpLmNhdGNoKChlKSA9PiB0aGlzLmxvZ2dlci53YXJuKGUpKTtcblxuICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKG5mdERhdGEpO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZU5mdENvbGxlY3Rpb24gKGNoYWluOiBzdHJpbmcsIGNvbGxlY3Rpb25JZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZGJTZXJ2aWNlLmRlbGV0ZU5mdENvbGxlY3Rpb24oY2hhaW4sIGNvbGxlY3Rpb25JZCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYW5VcE5mdHMgKGNoYWluOiBzdHJpbmcsIG93bmVyOiBzdHJpbmcsIGNvbGxlY3Rpb25JZDogc3RyaW5nW10sIG5mdElkczogc3RyaW5nW10sIG93bk5vdGhpbmc/OiBib29sZWFuKSB7XG4gICAgdGhpcy5kYlNlcnZpY2UuY2xlYW5VcE5mdChjaGFpbiwgb3duZXIsIGNvbGxlY3Rpb25JZCwgbmZ0SWRzLCBvd25Ob3RoaW5nKS5jYXRjaCgoZSkgPT4gdGhpcy5sb2dnZXIud2FybihlKSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0TmZ0ICgpOiBQcm9taXNlPE5mdEpzb24gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBhZGRyZXNzZXMgPSB0aGlzLmdldERlY29kZWRBZGRyZXNzZXMoKTtcblxuICAgIGlmICghYWRkcmVzc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5mdHMgPSBhd2FpdCB0aGlzLmRiU2VydmljZS5nZXROZnQoYWRkcmVzc2VzLCB0aGlzLmFjdGl2ZUNoYWluU2x1Z3MpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5mdExpc3Q6IG5mdHMsXG4gICAgICB0b3RhbDogbmZ0cy5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZU5mdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubmZ0U3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyByZXNldFN0YWtpbmdSZXdhcmQgKCkge1xuICAgIHRoaXMuc3Rha2luZ1Jld2FyZFN0YXRlLmRhdGEgPSB7fTtcblxuICAgIHRoaXMuc3Rha2luZ1Jld2FyZFN1YmplY3QubmV4dCh0aGlzLnN0YWtpbmdSZXdhcmRTdGF0ZSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlU3Rha2luZ1Jld2FyZCAoc3Rha2luZ1Jld2FyZERhdGE6IFN0YWtpbmdSZXdhcmRJdGVtLCBjYWxsYmFjaz86IChzdGFraW5nUmV3YXJkRGF0YTogU3Rha2luZ1Jld2FyZEpzb24pID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnN0YWtpbmdSZXdhcmRTdGF0ZS5yZWFkeSA9IHRydWU7XG4gICAgY29uc3Qga2V5ID0gYCR7c3Rha2luZ1Jld2FyZERhdGEuY2hhaW59X19fJHtzdGFraW5nUmV3YXJkRGF0YS5hZGRyZXNzfV9fXyR7c3Rha2luZ1Jld2FyZERhdGEudHlwZX1gO1xuXG4gICAgdGhpcy5zdGFraW5nUmV3YXJkU3RhdGUuZGF0YVtrZXldID0gc3Rha2luZ1Jld2FyZERhdGE7XG5cbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKHRoaXMuc3Rha2luZ1Jld2FyZFN0YXRlKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YWtpbmdSZXdhcmRTdWJqZWN0Lm5leHQodGhpcy5zdGFraW5nUmV3YXJkU3RhdGUpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZVN0YWtpbmdSZXdhcmRSZWFkeSAocmVhZHk6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0YWtpbmdSZXdhcmRTdGF0ZS5yZWFkeSA9IHJlYWR5O1xuICAgIHRoaXMuc3Rha2luZ1Jld2FyZFN1YmplY3QubmV4dCh0aGlzLnN0YWtpbmdSZXdhcmRTdGF0ZSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QWNjb3VudFJlZk1hcCAoY2FsbGJhY2s6IChyZWZNYXA6IFJlY29yZDxzdHJpbmcsIEFycmF5PHN0cmluZz4+KSA9PiB2b2lkKSB7XG4gICAgY29uc3QgcmVmTWFwOiBBY2NvdW50UmVmTWFwID0ge307XG5cbiAgICB0aGlzLmFjY291bnRSZWZTdG9yZS5nZXQoJ3JlZkxpc3QnLCAocmVmTGlzdCkgPT4ge1xuICAgICAgaWYgKHJlZkxpc3QpIHtcbiAgICAgICAgcmVmTGlzdC5mb3JFYWNoKChhY2NSZWYpID0+IHtcbiAgICAgICAgICBhY2NSZWYuZm9yRWFjaCgoYWNjKSA9PiB7XG4gICAgICAgICAgICByZWZNYXBbYWNjXSA9IFsuLi5hY2NSZWZdLmZpbHRlcigocikgPT4gIShyID09PSBhY2MpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKHJlZk1hcCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYWRkQWNjb3VudFJlZiAoYWRkcmVzc2VzOiBzdHJpbmdbXSwgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICB0aGlzLmFjY291bnRSZWZTdG9yZS5nZXQoJ3JlZkxpc3QnLCAocmVmTGlzdCkgPT4ge1xuICAgICAgY29uc3QgbmV3TGlzdCA9IHJlZkxpc3QgPyBbLi4ucmVmTGlzdF0gOiBbXTtcblxuICAgICAgbmV3TGlzdC5wdXNoKGFkZHJlc3Nlcyk7XG5cbiAgICAgIHRoaXMuYWNjb3VudFJlZlN0b3JlLnNldCgncmVmTGlzdCcsIG5ld0xpc3QsIGNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVBY2NvdW50UmVmIChhZGRyZXNzOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5hY2NvdW50UmVmU3RvcmUuZ2V0KCdyZWZMaXN0JywgKHJlZkxpc3QpID0+IHtcbiAgICAgIGlmIChyZWZMaXN0KSB7XG4gICAgICAgIHJlZkxpc3QuZm9yRWFjaCgoYWNjUmVmKSA9PiB7XG4gICAgICAgICAgaWYgKGFjY1JlZi5pbmRleE9mKGFkZHJlc3MpID4gLTEpIHtcbiAgICAgICAgICAgIGFjY1JlZi5zcGxpY2UoYWNjUmVmLmluZGV4T2YoYWRkcmVzcyksIDEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhY2NSZWYubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgcmVmTGlzdC5zcGxpY2UocmVmTGlzdC5pbmRleE9mKGFjY1JlZiksIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hY2NvdW50UmVmU3RvcmUuc2V0KCdyZWZMaXN0JywgcmVmTGlzdCwgKCkgPT4ge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGFraW5nUmV3YXJkICh1cGRhdGU6ICh2YWx1ZTogU3Rha2luZ1Jld2FyZEpzb24pID0+IHZvaWQpOiB2b2lkIHtcbiAgICB1cGRhdGUodGhpcy5zdGFraW5nUmV3YXJkU3RhdGUpO1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZVN0YWtpbmdSZXdhcmQgKCkge1xuICAgIHJldHVybiB0aGlzLnN0YWtpbmdSZXdhcmRTdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIHNldEN1cnJlbnRBY2NvdW50IChkYXRhOiBDdXJyZW50QWNjb3VudEluZm8sIGNhbGxiYWNrPzogKCkgPT4gdm9pZCwgcHJldmVudE9uZUFjY291bnQ/OiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgeyBhZGRyZXNzLCBjdXJyZW50R2VuZXNpc0hhc2ggfSA9IGRhdGE7XG5cbiAgICBjb25zdCByZXN1bHQ6IEN1cnJlbnRBY2NvdW50SW5mbyA9IHsgLi4uZGF0YSB9O1xuXG4gICAgaWYgKGFkZHJlc3MgPT09IEFMTF9BQ0NPVU5UX0tFWSkge1xuICAgICAgY29uc3QgcGFpcnMgPSBrZXlyaW5nLmdldEFjY291bnRzKCk7XG4gICAgICBjb25zdCBwYWlyID0gcGFpcnNbMF07XG4gICAgICBjb25zdCBwYWlyR2VuZXNpc0hhc2ggPSBwYWlyPy5tZXRhLmdlbmVzaXNIYXNoIGFzIHN0cmluZyB8fCAnJztcblxuICAgICAgaWYgKHBhaXJzLmxlbmd0aCA+IDEgfHwgIXBhaXIpIHtcbiAgICAgICAgcmVzdWx0LmFsbEdlbmVzaXNIYXNoID0gY3VycmVudEdlbmVzaXNIYXNoIHx8IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghcHJldmVudE9uZUFjY291bnQpIHtcbiAgICAgICAgICByZXN1bHQuYWRkcmVzcyA9IHBhaXIuYWRkcmVzcztcbiAgICAgICAgICByZXN1bHQuY3VycmVudEdlbmVzaXNIYXNoID0gcGFpckdlbmVzaXNIYXNoIHx8ICcnO1xuICAgICAgICAgIHJlc3VsdC5hbGxHZW5lc2lzSGFzaCA9IHBhaXJHZW5lc2lzSGFzaCB8fCB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmFsbEdlbmVzaXNIYXNoID0gY3VycmVudEdlbmVzaXNIYXNoIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMua2V5cmluZ1NlcnZpY2Uuc2V0Q3VycmVudEFjY291bnQocmVzdWx0KTtcbiAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICB9XG5cbiAgcHVibGljIHNldEFjY291bnRUaWUgKGFkZHJlc3M6IHN0cmluZywgZ2VuZXNpc0hhc2g6IHN0cmluZyB8IG51bGwpOiBib29sZWFuIHtcbiAgICBpZiAoYWRkcmVzcyAhPT0gQUxMX0FDQ09VTlRfS0VZKSB7XG4gICAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKGFkZHJlc3MpO1xuXG4gICAgICBhc3NlcnQocGFpciwgdCgnVW5hYmxlIHRvIGZpbmQgYWNjb3VudCcpKTtcblxuICAgICAga2V5cmluZy5zYXZlQWNjb3VudE1ldGEocGFpciwgeyAuLi5wYWlyLm1ldGEsIGdlbmVzaXNIYXNoIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGFjY291bnRJbmZvID0gdGhpcy5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudDtcblxuICAgIGlmIChhZGRyZXNzID09PSBhY2NvdW50SW5mby5hZGRyZXNzKSB7XG4gICAgICBhY2NvdW50SW5mby5jdXJyZW50R2VuZXNpc0hhc2ggPSBnZW5lc2lzSGFzaCBhcyBzdHJpbmcgfHwgQUxMX0dFTkVTSVNfSEFTSDtcblxuICAgICAgdGhpcy5zZXRDdXJyZW50QWNjb3VudChhY2NvdW50SW5mbyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc3dpdGNoRXZtTmV0d29ya0J5VXJsIChzaG9ydGVuVXJsOiBzdHJpbmcsIG5ldHdvcmtLZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGF1dGhVcmxzID0gYXdhaXQgdGhpcy5nZXRBdXRoTGlzdCgpO1xuICAgIGNvbnN0IGNoYWluSW5mbyA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldENoYWluSW5mb0J5S2V5KG5ldHdvcmtLZXkpO1xuICAgIGNvbnN0IGNoYWluU3RhdGUgPSB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpblN0YXRlQnlLZXkobmV0d29ya0tleSk7XG5cbiAgICBpZiAoYXV0aFVybHNbc2hvcnRlblVybF0pIHtcbiAgICAgIGlmIChjaGFpbkluZm8gJiYgIV9pc0NoYWluRW5hYmxlZChjaGFpblN0YXRlKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmVuYWJsZUNoYWluKG5ldHdvcmtLZXkpO1xuICAgICAgfVxuXG4gICAgICBhdXRoVXJsc1tzaG9ydGVuVXJsXS5jdXJyZW50RXZtTmV0d29ya0tleSA9IG5ldHdvcmtLZXk7XG4gICAgICB0aGlzLnNldEF1dGhvcml6ZShhdXRoVXJscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SLCB0KCdOb3QgZm91bmQge3tzaG9ydGVuVXJsfX0gaW4gYXV0aCBsaXN0JywgeyByZXBsYWNlOiB7IHNob3J0ZW5VcmwgfSB9KSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHN3aXRjaE5ldHdvcmtBY2NvdW50IChpZDogc3RyaW5nLCB1cmw6IHN0cmluZywgbmV0d29ya0tleTogc3RyaW5nLCBjaGFuZ2VBZGRyZXNzPzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgY2hhaW5JbmZvID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvQnlLZXkobmV0d29ya0tleSk7XG4gICAgY29uc3QgY2hhaW5TdGF0ZSA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldENoYWluU3RhdGVCeUtleShuZXR3b3JrS2V5KTtcbiAgICBjb25zdCB7IGFkZHJlc3MsIGN1cnJlbnRHZW5lc2lzSGFzaCB9ID0gdGhpcy5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudDtcblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLmFkZENvbmZpcm1hdGlvbihpZCwgdXJsLCAnc3dpdGNoTmV0d29ya1JlcXVlc3QnLCB7XG4gICAgICBuZXR3b3JrS2V5LFxuICAgICAgYWRkcmVzczogY2hhbmdlQWRkcmVzc1xuICAgIH0sIHsgYWRkcmVzczogY2hhbmdlQWRkcmVzcyB9KVxuICAgICAgLnRoZW4oKHsgaXNBcHByb3ZlZCB9KSA9PiB7XG4gICAgICAgIGlmIChpc0FwcHJvdmVkKSB7XG4gICAgICAgICAgY29uc3QgdXNlQWRkcmVzcyA9IGNoYW5nZUFkZHJlc3MgfHwgYWRkcmVzcztcblxuICAgICAgICAgIGlmIChjaGFpbkluZm8gJiYgIV9pc0NoYWluRW5hYmxlZChjaGFpblN0YXRlKSkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGVDaGFpbihuZXR3b3JrS2V5KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXNlQWRkcmVzcyAhPT0gQUxMX0FDQ09VTlRfS0VZKSB7XG4gICAgICAgICAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKHVzZUFkZHJlc3MpO1xuXG4gICAgICAgICAgICBhc3NlcnQocGFpciwgdCgnVW5hYmxlIHRvIGZpbmQgYWNjb3VudCcpKTtcblxuICAgICAgICAgICAga2V5cmluZy5zYXZlQWNjb3VudE1ldGEocGFpciwgeyAuLi5wYWlyLm1ldGEsIGdlbmVzaXNIYXNoOiBfZ2V0U3Vic3RyYXRlR2VuZXNpc0hhc2goY2hhaW5JbmZvKSB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYWRkcmVzcyAhPT0gY2hhbmdlQWRkcmVzcyB8fCBfZ2V0U3Vic3RyYXRlR2VuZXNpc0hhc2goY2hhaW5JbmZvKSAhPT0gY3VycmVudEdlbmVzaXNIYXNoIHx8IGlzQXBwcm92ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudEFjY291bnQoe1xuICAgICAgICAgICAgICBhZGRyZXNzOiB1c2VBZGRyZXNzLFxuICAgICAgICAgICAgICBjdXJyZW50R2VuZXNpc0hhc2g6IF9nZXRTdWJzdHJhdGVHZW5lc2lzSGFzaChjaGFpbkluZm8pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaXNBcHByb3ZlZDtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGFkZE5ldHdvcmtDb25maXJtIChpZDogc3RyaW5nLCB1cmw6IHN0cmluZywgbmV0d29ya0RhdGE6IF9OZXR3b3JrVXBzZXJ0UGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFNlcnZpY2UuYWRkQ29uZmlybWF0aW9uKGlkLCB1cmwsICdhZGROZXR3b3JrUmVxdWVzdCcsIG5ldHdvcmtEYXRhKVxuICAgICAgLnRoZW4oYXN5bmMgKHsgaXNBcHByb3ZlZCB9KSA9PiB7XG4gICAgICAgIGlmIChpc0FwcHJvdmVkKSB7XG4gICAgICAgICAgaWYgKG5ldHdvcmtEYXRhLm1vZGUgPT09ICdpbnNlcnQnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwc2VydENoYWluSW5mbyhuZXR3b3JrRGF0YSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRPRE86IHVwZGF0ZSBleGlzdGVkIG5ldHdvcmsgKG5lZWQgbW9yZSBkaXNjdXNzaW9uKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLlVTRVJfUkVKRUNURURfUkVRVUVTVCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGFkZFRva2VuQ29uZmlybSAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIHRva2VuSW5mbzogQWRkVG9rZW5SZXF1ZXN0RXh0ZXJuYWwpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0U2VydmljZS5hZGRDb25maXJtYXRpb24oaWQsIHVybCwgJ2FkZFRva2VuUmVxdWVzdCcsIHRva2VuSW5mbylcbiAgICAgIC50aGVuKGFzeW5jICh7IGlzQXBwcm92ZWQgfSkgPT4ge1xuICAgICAgICBpZiAoaXNBcHByb3ZlZCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBzZXJ0Q3VzdG9tVG9rZW4oe1xuICAgICAgICAgICAgb3JpZ2luQ2hhaW46IHRva2VuSW5mby5vcmlnaW5DaGFpbixcbiAgICAgICAgICAgIHNsdWc6ICcnLFxuICAgICAgICAgICAgbmFtZTogdG9rZW5JbmZvLm5hbWUsXG4gICAgICAgICAgICBzeW1ib2w6IHRva2VuSW5mby5zeW1ib2wsXG4gICAgICAgICAgICBkZWNpbWFsczogdG9rZW5JbmZvLmRlY2ltYWxzLFxuICAgICAgICAgICAgcHJpY2VJZDogbnVsbCxcbiAgICAgICAgICAgIG1pbkFtb3VudDogbnVsbCxcbiAgICAgICAgICAgIGFzc2V0VHlwZTogdG9rZW5JbmZvLnR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YTogX3BhcnNlTWV0YWRhdGFGb3JTbWFydENvbnRyYWN0QXNzZXQodG9rZW5JbmZvLmNvbnRyYWN0QWRkcmVzcyksXG4gICAgICAgICAgICBtdWx0aUNoYWluQXNzZXQ6IG51bGwsXG4gICAgICAgICAgICBoYXNWYWx1ZTogX2lzQ2hhaW5UZXN0TmV0KHRoaXMuY2hhaW5TZXJ2aWNlLmdldENoYWluSW5mb0J5S2V5KHRva2VuSW5mby5vcmlnaW5DaGFpbikpLFxuICAgICAgICAgICAgaWNvbjogJydcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBpc0FwcHJvdmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLlVTRVJfUkVKRUNURURfUkVRVUVTVCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGdldCBtZXRhU3ViamVjdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFNlcnZpY2UubWV0YVN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHNpZ25TdWJqZWN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0U2VydmljZS5zaWduU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXR0aW5ncyAoY2FsbGJhY2s6IChzZXR0aW5nczogVWlTZXR0aW5ncykgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UuZ2V0U2V0dGluZ3MoY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIHNldFNldHRpbmdzIChzZXR0aW5nczogVWlTZXR0aW5ncywgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5zZXR0aW5nU2VydmljZS5zZXRTZXR0aW5ncyhzZXR0aW5ncywgY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZVNldHRpbmcgPFQgZXh0ZW5kcyBrZXlvZiBVaVNldHRpbmdzPiAoa2V5OiBULCB2YWx1ZTogVWlTZXR0aW5nc1tUXSk6IHZvaWQge1xuICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UuZ2V0U2V0dGluZ3MoKHNldHRpbmdzKSA9PiB7XG4gICAgICBjb25zdCBuZXdTZXR0aW5nczogVWlTZXR0aW5ncyA9IHtcbiAgICAgICAgLi4uc2V0dGluZ3MsXG4gICAgICAgIFtrZXldOiB2YWx1ZVxuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5zZXRTZXR0aW5ncyhuZXdTZXR0aW5ncyk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc2V0U2hvd0JhbGFuY2UgKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5zZXR0aW5nU2VydmljZS5nZXRTZXR0aW5ncygoc2V0dGluZ3MpID0+IHtcbiAgICAgIGNvbnN0IG5ld1NldHRpbmdzID0ge1xuICAgICAgICAuLi5zZXR0aW5ncyxcbiAgICAgICAgaXNTaG93QmFsYW5jZTogdmFsdWVcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2Uuc2V0U2V0dGluZ3MobmV3U2V0dGluZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZVNldHRpbmdzU3ViamVjdCAoKTogU3ViamVjdDxSZXF1ZXN0U2V0dGluZ3NUeXBlPiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ1NlcnZpY2UuZ2V0U3ViamVjdCgpO1xuICB9XG5cbiAgcHVibGljIGdldEFjY291bnRBZGRyZXNzICgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudC5hZGRyZXNzO1xuXG4gICAgaWYgKGFkZHJlc3MgPT09ICcnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkcmVzcztcbiAgfVxuXG4gIHB1YmxpYyBnZXREZWNvZGVkQWRkcmVzc2VzIChhZGRyZXNzPzogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGxldCBjaGVja2luZ0FkZHJlc3M6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQgPSBhZGRyZXNzO1xuXG4gICAgaWYgKCFhZGRyZXNzKSB7XG4gICAgICBjaGVja2luZ0FkZHJlc3MgPSB0aGlzLmdldEFjY291bnRBZGRyZXNzKCk7XG4gICAgfVxuXG4gICAgaWYgKCFjaGVja2luZ0FkZHJlc3MpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBpZiAoY2hlY2tpbmdBZGRyZXNzID09PSBBTExfQUNDT1VOVF9LRVkpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldEFsbEFkZHJlc3NlcygpO1xuICAgIH1cblxuICAgIHJldHVybiBbY2hlY2tpbmdBZGRyZXNzXTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBbGxBZGRyZXNzZXMgKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4ga2V5cmluZy5nZXRBY2NvdW50cygpLm1hcCgoYWNjb3VudCkgPT4gYWNjb3VudC5hZGRyZXNzKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlSW5hY3RpdmVDaGFpbkJhbGFuY2VzIChiYWxhbmNlTWFwOiBSZWNvcmQ8c3RyaW5nLCBCYWxhbmNlSXRlbT4pIHtcbiAgICBjb25zdCBhY3RpdmVCYWxhbmNlTWFwOiBSZWNvcmQ8c3RyaW5nLCBCYWxhbmNlSXRlbT4gPSB7fTtcblxuICAgIE9iamVjdC5lbnRyaWVzKGJhbGFuY2VNYXApLmZvckVhY2goKFt0b2tlblNsdWcsIGJhbGFuY2VJdGVtXSkgPT4ge1xuICAgICAgY29uc3QgdG9rZW5JbmZvID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0QXNzZXRCeVNsdWcodG9rZW5TbHVnKTtcblxuICAgICAgaWYgKHRva2VuSW5mbykge1xuICAgICAgICBjb25zdCBjaGFpbkluZm8gPSB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9CeUtleSh0b2tlbkluZm8ub3JpZ2luQ2hhaW4pO1xuXG4gICAgICAgIGlmIChjaGFpbkluZm8gJiYgdGhpcy5nZXRDaGFpblN0YXRlQnlLZXkoY2hhaW5JbmZvLnNsdWcpLmFjdGl2ZSkge1xuICAgICAgICAgIGFjdGl2ZUJhbGFuY2VNYXBbdG9rZW5TbHVnXSA9IGJhbGFuY2VJdGVtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYWN0aXZlQmFsYW5jZU1hcDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCYWxhbmNlIChyZXNldD86IGJvb2xlYW4pOiBCYWxhbmNlSnNvbiB7XG4gICAgY29uc3QgYWN0aXZlRGF0YSA9IHRoaXMucmVtb3ZlSW5hY3RpdmVDaGFpbkJhbGFuY2VzKHRoaXMuYmFsYW5jZU1hcCk7XG5cbiAgICByZXR1cm4geyBkZXRhaWxzOiBhY3RpdmVEYXRhLCByZXNldCB9IGFzIEJhbGFuY2VKc29uO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFN0b3JlZEJhbGFuY2UgKGFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgQmFsYW5jZUl0ZW0+PiB7XG4gICAgY29uc3QgaXRlbXMgPSBhd2FpdCB0aGlzLmRiU2VydmljZS5zdG9yZXMuYmFsYW5jZS5nZXRCYWxhbmNlTWFwQnlBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgcmV0dXJuIGl0ZW1zIHx8IHt9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZVN3aXRjaEFjY291bnQgKG5ld0FkZHJlc3M6IHN0cmluZykge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMucmVzZXRCYWxhbmNlTWFwKG5ld0FkZHJlc3MpLFxuICAgICAgdGhpcy5yZXNldENyb3dkbG9hbk1hcChuZXdBZGRyZXNzKVxuICAgIF0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlc2V0QmFsYW5jZU1hcCAobmV3QWRkcmVzczogc3RyaW5nKSB7XG4gICAgY29uc3QgZGVmYXVsdERhdGEgPSB0aGlzLmdlbmVyYXRlRGVmYXVsdEJhbGFuY2VNYXAoKTtcbiAgICBsZXQgc3RvcmVkRGF0YSA9IGF3YWl0IHRoaXMuZ2V0U3RvcmVkQmFsYW5jZShuZXdBZGRyZXNzKTtcblxuICAgIHN0b3JlZERhdGEgPSB0aGlzLnJlbW92ZUluYWN0aXZlQ2hhaW5CYWxhbmNlcyhzdG9yZWREYXRhKTtcblxuICAgIHRoaXMuYmFsYW5jZU1hcCA9IHsgLi4uZGVmYXVsdERhdGEsIC4uLnN0b3JlZERhdGEgfSBhcyBSZWNvcmQ8c3RyaW5nLCBCYWxhbmNlSXRlbT47XG4gICAgdGhpcy5wdWJsaXNoQmFsYW5jZSh0cnVlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZXNldENyb3dkbG9hbk1hcCAobmV3QWRkcmVzczogc3RyaW5nKSB7XG4gICAgY29uc3QgZGVmYXVsdERhdGEgPSBnZW5lcmF0ZURlZmF1bHRDcm93ZGxvYW5NYXAoKTtcbiAgICBjb25zdCBzdG9yZWREYXRhID0gYXdhaXQgdGhpcy5nZXRTdG9yZWRDcm93ZGxvYW4obmV3QWRkcmVzcyk7XG5cbiAgICB0aGlzLmNyb3dkbG9hbk1hcCA9IHsgLi4uZGVmYXVsdERhdGEsIC4uLnN0b3JlZERhdGEgfSBhcyBSZWNvcmQ8c3RyaW5nLCBDcm93ZGxvYW5JdGVtPjtcbiAgICB0aGlzLnB1Ymxpc2hDcm93ZGxvYW4odHJ1ZSk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXRTdGFraW5nIChuZXdBZGRyZXNzOiBzdHJpbmcpIHtcbiAgICB0aGlzLmdldFN0YWtpbmcoKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdGhpcy5zdGFraW5nU3ViamVjdC5uZXh0KGRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZSkgPT4gdGhpcy5sb2dnZXIud2FybihlKSk7XG5cbiAgICBjb25zdCBhZGRyZXNzZXMgPSB0aGlzLmdldERlY29kZWRBZGRyZXNzZXMobmV3QWRkcmVzcyk7XG5cbiAgICB0aGlzLmRiU2VydmljZS5zdWJzY3JpYmVTdGFraW5nKGFkZHJlc3NlcywgdGhpcy5hY3RpdmVDaGFpblNsdWdzLCAoc3Rha2luZ3MpID0+IHtcbiAgICAgIHRoaXMuc3Rha2luZ1N1YmplY3QubmV4dCh7XG4gICAgICAgIHJlYWR5OiB0cnVlLFxuICAgICAgICBkZXRhaWxzOiBzdGFraW5nc1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc2V0QmFsYW5jZUl0ZW0gKHRva2VuU2x1Zzogc3RyaW5nLCBpdGVtOiBCYWxhbmNlSXRlbSkge1xuICAgIHRoaXMuYmFsYW5jZU1hcFt0b2tlblNsdWddID0geyB0aW1lc3RhbXA6ICtuZXcgRGF0ZSgpLCAuLi5pdGVtIH07XG4gICAgdGhpcy51cGRhdGVCYWxhbmNlU3RvcmUoaXRlbSk7XG5cbiAgICB0aGlzLmxhenlOZXh0KCdzZXRCYWxhbmNlSXRlbScsICgpID0+IHtcbiAgICAgIHRoaXMucHVibGlzaEJhbGFuY2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQmFsYW5jZVN0b3JlIChpdGVtOiBCYWxhbmNlSXRlbSkge1xuICAgIGNvbnN0IGN1cnJlbnRBY2NvdW50SW5mbyA9IHRoaXMua2V5cmluZ1NlcnZpY2UuY3VycmVudEFjY291bnQ7XG5cbiAgICB0aGlzLmRiU2VydmljZS51cGRhdGVCYWxhbmNlU3RvcmUoY3VycmVudEFjY291bnRJbmZvLmFkZHJlc3MsIGl0ZW0pLmNhdGNoKChlKSA9PiB0aGlzLmxvZ2dlci53YXJuKGUpKTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVCYWxhbmNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5iYWxhbmNlU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDcm93ZGxvYW4gKHJlc2V0PzogYm9vbGVhbik6IENyb3dkbG9hbkpzb24ge1xuICAgIHJldHVybiB7IGRldGFpbHM6IHRoaXMuY3Jvd2Rsb2FuTWFwLCByZXNldCB9IGFzIENyb3dkbG9hbkpzb247XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0U3RvcmVkQ3Jvd2Rsb2FuIChhZGRyZXNzOiBzdHJpbmcpIHtcbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnN0b3Jlcy5jcm93ZGxvYW4uZ2V0RGF0YUJ5QWRkcmVzc0FzT2JqZWN0KGFkZHJlc3MpO1xuXG4gICAgcmV0dXJuIGl0ZW1zIHx8IHt9O1xuICB9XG5cbiAgcHVibGljIHNldENyb3dkbG9hbkl0ZW0gKG5ldHdvcmtLZXk6IHN0cmluZywgaXRlbTogQ3Jvd2Rsb2FuSXRlbSkge1xuICAgIGNvbnN0IGl0ZW1EYXRhID0geyAuLi5pdGVtLCB0aW1lc3RhbXA6ICtuZXcgRGF0ZSgpIH07XG5cbiAgICAvLyBVcGRhdGUgY3Jvd2Rsb2FuIG1hcFxuICAgIHRoaXMuY3Jvd2Rsb2FuTWFwW25ldHdvcmtLZXldID0gaXRlbURhdGE7XG4gICAgdGhpcy51cGRhdGVDcm93ZGxvYW5TdG9yZShuZXR3b3JrS2V5LCBpdGVtRGF0YSk7XG5cbiAgICB0aGlzLmxhenlOZXh0KCdzZXRDcm93ZGxvYW5JdGVtJywgKCkgPT4ge1xuICAgICAgdGhpcy5wdWJsaXNoQ3Jvd2Rsb2FuKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUNyb3dkbG9hblN0b3JlIChuZXR3b3JrS2V5OiBzdHJpbmcsIGl0ZW06IENyb3dkbG9hbkl0ZW0pIHtcbiAgICBjb25zdCBjdXJyZW50QWNjb3VudEluZm8gPSB0aGlzLmtleXJpbmdTZXJ2aWNlLmN1cnJlbnRBY2NvdW50O1xuXG4gICAgdGhpcy5kYlNlcnZpY2UudXBkYXRlQ3Jvd2Rsb2FuU3RvcmUobmV0d29ya0tleSwgY3VycmVudEFjY291bnRJbmZvLmFkZHJlc3MsIGl0ZW0pLmNhdGNoKChlKSA9PiB0aGlzLmxvZ2dlci53YXJuKGUpKTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVDcm93ZGxvYW4gKCkge1xuICAgIHJldHVybiB0aGlzLmNyb3dkbG9hblN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgZ2V0U21hcnRDb250cmFjdE5mdHMgKCkge1xuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5nZXRTbWFydENvbnRyYWN0TmZ0cygpO1xuICB9XG5cbiAgLy8gQ2hhaW5TZXJ2aWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHB1YmxpYyBnZXRDaGFpbkluZm9NYXAgKCkge1xuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9NYXAoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGFpblN0YXRlTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5TdGF0ZU1hcCgpO1xuICB9XG5cbiAgcHVibGljIGdldEFzc2V0UmVmTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0QXNzZXRSZWZNYXAoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGFpblN0YXRlQnlLZXkgKGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLmdldENoYWluU3RhdGVCeUtleShrZXkpO1xuICB9XG5cbiAgcHVibGljIGdldEFzc2V0UmVnaXN0cnkgKCkge1xuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5nZXRBc3NldFJlZ2lzdHJ5KCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TXVsdGlDaGFpbkFzc2V0TWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0TXVsdGlDaGFpbkFzc2V0TWFwKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0WGNtUmVmTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0WGNtUmVmTWFwKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXNzZXRCeUNoYWluQW5kQXNzZXQgKGNoYWluOiBzdHJpbmcsIGFzc2V0VHlwZXM6IF9Bc3NldFR5cGVbXSkge1xuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5nZXRBc3NldEJ5Q2hhaW5BbmRUeXBlKGNoYWluLCBhc3NldFR5cGVzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBc3NldEJ5U2x1ZyAoc2x1Zzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLmdldEFzc2V0QnlTbHVnKHNsdWcpO1xuICB9XG5cbiAgcHVibGljIGdldFhjbUVxdWFsQXNzZXRCeUNoYWluIChkZXN0aW5hdGlvbkNoYWluOiBzdHJpbmcsIG9yaWdpblRva2VuU2x1Zzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLmdldFhjbUVxdWFsQXNzZXRCeUNoYWluKGRlc3RpbmF0aW9uQ2hhaW4sIG9yaWdpblRva2VuU2x1Zyk7XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlQ2hhaW5JbmZvTWFwICgpOiBTdWJqZWN0PFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+PiB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLnN1YnNjcmliZUNoYWluSW5mb01hcCgpO1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZUNoYWluU3RhdGVNYXAgKCk6IFN1YmplY3Q8UmVjb3JkPHN0cmluZywgX0NoYWluU3RhdGU+PiB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLnN1YnNjcmliZUNoYWluU3RhdGVNYXAoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVBc3NldFJlZ2lzdHJ5ICgpOiBTdWJqZWN0PFJlY29yZDxzdHJpbmcsIF9DaGFpbkFzc2V0Pj4ge1xuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5zdWJzY3JpYmVBc3NldFJlZ2lzdHJ5KCk7XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlTXVsdGlDaGFpbkFzc2V0TWFwICgpOiBTdWJqZWN0PFJlY29yZDxzdHJpbmcsIF9NdWx0aUNoYWluQXNzZXQ+PiB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLnN1YnNjcmliZU11bHRpQ2hhaW5Bc3NldE1hcCgpO1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZVhjbVJlZk1hcCAoKTogU3ViamVjdDxSZWNvcmQ8c3RyaW5nLCBfQXNzZXRSZWY+PiB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLnN1YnNjcmliZVhjbVJlZk1hcCgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHVwc2VydEN1c3RvbVRva2VuIChkYXRhOiBfQ2hhaW5Bc3NldCkge1xuICAgIGNvbnN0IHRva2VuU2x1ZyA9IHRoaXMuY2hhaW5TZXJ2aWNlLnVwc2VydEN1c3RvbVRva2VuKGRhdGEpO1xuXG4gICAgaWYgKF9pc0Fzc2V0RnVuZ2libGVUb2tlbihkYXRhKSkge1xuICAgICAgYXdhaXQgdGhpcy5jaGFpblNlcnZpY2UudXBkYXRlQXNzZXRTZXR0aW5nKHRva2VuU2x1ZywgeyB2aXNpYmxlOiB0cnVlIH0pO1xuICAgICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgnYXNzZXQudXBkYXRlU3RhdGUnLCB0b2tlblNsdWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdhc3NldC51cGRhdGVTdGF0ZScsIHRva2VuU2x1Zyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlbGV0ZUN1c3RvbUFzc2V0cyAodGFyZ2V0VG9rZW5zOiBzdHJpbmdbXSkge1xuICAgIHRoaXMuY2hhaW5TZXJ2aWNlLmRlbGV0ZUN1c3RvbUFzc2V0cyh0YXJnZXRUb2tlbnMpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlQ3VzdG9tQ2hhaW4gKHByb3ZpZGVyOiBzdHJpbmcsIGV4aXN0ZWRDaGFpblNsdWc/OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jaGFpblNlcnZpY2UudmFsaWRhdGVDdXN0b21DaGFpbihwcm92aWRlciwgZXhpc3RlZENoYWluU2x1Zyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3VwcG9ydGVkU21hcnRDb250cmFjdFR5cGVzICgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0U3VwcG9ydGVkU21hcnRDb250cmFjdFR5cGVzKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGVDdXN0b21Bc3NldCAoZGF0YTogX1ZhbGlkYXRlQ3VzdG9tQXNzZXRSZXF1ZXN0KSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlLnZhbGlkYXRlQ3VzdG9tVG9rZW4oZGF0YSk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBwdWJsaWMgZ2V0QWN0aXZlQ2hhaW5JbmZvTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0QWN0aXZlQ2hhaW5JbmZvTWFwKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBzZXJ0Q2hhaW5JbmZvIChkYXRhOiBfTmV0d29ya1Vwc2VydFBhcmFtcyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IG5ld05hdGl2ZVRva2VuU2x1ZyA9IGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlLnVwc2VydENoYWluKGRhdGEpO1xuXG4gICAgaWYgKG5ld05hdGl2ZVRva2VuU2x1Zykge1xuICAgICAgYXdhaXQgdGhpcy5jaGFpblNlcnZpY2UudXBkYXRlQXNzZXRTZXR0aW5nKG5ld05hdGl2ZVRva2VuU2x1ZywgeyB2aXNpYmxlOiB0cnVlIH0pO1xuICAgICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgnYXNzZXQudXBkYXRlU3RhdGUnLCBuZXdOYXRpdmVUb2tlblNsdWcpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZUN1c3RvbUNoYWluIChuZXR3b3JrS2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UucmVtb3ZlQ3VzdG9tQ2hhaW4obmV0d29ya0tleSk7XG4gIH1cblxuICBwdWJsaWMgZm9yY2VSZW1vdmVDaGFpbiAobmV0d29ya0tleTogc3RyaW5nKSB7XG4gICAgdGhpcy5jaGFpblNlcnZpY2UuZm9yY2VSZW1vdmVDaGFpbihuZXR3b3JrS2V5KTtcbiAgfVxuXG4gIC8vIFRPRE86IGF2b2lkcyB0dXJuaW5nIG9mZiBjaGFpbnMgcmVsYXRlZCB0byBsZWRnZXIgYWNjb3VudFxuICBwcml2YXRlIGdldERlZmF1bHROZXR3b3JrS2V5cyA9ICgpOiBzdHJpbmdbXSA9PiB7XG4gICAgY29uc3QgZ2VuZXNpc0hhc2hlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gICAgY29uc3QgcGFpcnMgPSBrZXlyaW5nLmdldFBhaXJzKCk7XG5cbiAgICBwYWlycy5mb3JFYWNoKChwYWlyKSA9PiB7XG4gICAgICBjb25zdCBvcmlnaW5HZW5lc2lzSGFzaCA9IHBhaXIubWV0YS5vcmlnaW5HZW5lc2lzSGFzaDtcblxuICAgICAgaWYgKG9yaWdpbkdlbmVzaXNIYXNoICYmIHR5cGVvZiBvcmlnaW5HZW5lc2lzSGFzaCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZ2VuZXNpc0hhc2hlc1tvcmlnaW5HZW5lc2lzSGFzaF0gPSBvcmlnaW5HZW5lc2lzSGFzaDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGhhc2hlcyA9IE9iamVjdC5rZXlzKGdlbmVzaXNIYXNoZXMpO1xuXG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBba2V5LCBuZXR3b3JrXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9NYXAoKSkpIHtcbiAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IGhhc2hlcy5pbmNsdWRlcyhfZ2V0U3Vic3RyYXRlR2VuZXNpc0hhc2gobmV0d29yaykgfHwgJycpO1xuXG4gICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBwdWJsaWMgYXN5bmMgZGlzYWJsZUNoYWluIChjaGFpblNsdWc6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlLnVwZGF0ZUFzc2V0U2V0dGluZ0J5Q2hhaW4oY2hhaW5TbHVnLCBmYWxzZSk7XG5cbiAgICBpZiAoX01BTlRBX1pLX0NIQUlOX0dST1VQLmluY2x1ZGVzKGNoYWluU2x1ZykpIHtcbiAgICAgIGNvbnN0IG1hbnRhUGF5Q29uZmlnID0gYXdhaXQgdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5nZXRNYW50YVBheUZpcnN0Q29uZmlnKF9ERUZBVUxUX01BTlRBX1pLX0NIQUlOKSBhcyBNYW50YVBheUNvbmZpZztcblxuICAgICAgaWYgKG1hbnRhUGF5Q29uZmlnICYmIG1hbnRhUGF5Q29uZmlnLmVuYWJsZWQgJiYgdGhpcy5pc01hbnRhUGF5RW5hYmxlZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmRpc2FibGVNYW50YVBheShtYW50YVBheUNvbmZpZy5hZGRyZXNzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZGlzYWJsZUNoYWluKGNoYWluU2x1Zyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZW5hYmxlQ2hhaW4gKGNoYWluU2x1Zzogc3RyaW5nLCBlbmFibGVUb2tlbnMgPSB0cnVlKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKGVuYWJsZVRva2Vucykge1xuICAgICAgYXdhaXQgdGhpcy5jaGFpblNlcnZpY2UudXBkYXRlQXNzZXRTZXR0aW5nQnlDaGFpbihjaGFpblNsdWcsIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5lbmFibGVDaGFpbihjaGFpblNsdWcpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0RGVmYXVsdENoYWlucyAoKSB7XG4gICAgY29uc3QgZGVmYXVsdENoYWlucyA9IHRoaXMuZ2V0RGVmYXVsdE5ldHdvcmtLZXlzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UucmVzZXRDaGFpbkluZm9NYXAoZGVmYXVsdENoYWlucyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3Vic3RyYXRlQXBpTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0U3Vic3RyYXRlQXBpTWFwKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3Vic3RyYXRlQXBpIChuZXR3b3JrS2V5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpblNlcnZpY2UuZ2V0U3Vic3RyYXRlQXBpKG5ldHdvcmtLZXkpO1xuICB9XG5cbiAgcHVibGljIGdldEV2bUFwaU1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLmdldEV2bUFwaU1hcCgpO1xuICB9XG5cbiAgcHVibGljIGdldEV2bUFwaSAobmV0d29ya0tleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLmdldEV2bUFwaShuZXR3b3JrS2V5KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBcGlNYXAgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdWJzdHJhdGU6IHRoaXMuY2hhaW5TZXJ2aWNlLmdldFN1YnN0cmF0ZUFwaU1hcCgpLFxuICAgICAgZXZtOiB0aGlzLmNoYWluU2VydmljZS5nZXRFdm1BcGlNYXAoKVxuICAgIH0gYXMgQXBpTWFwO1xuICB9XG5cbiAgcHVibGljIHJlZnJlc2hTdWJzdHJhdGVBcGkgKGtleTogc3RyaW5nKSB7XG4gICAgdGhpcy5jaGFpblNlcnZpY2UucmVmcmVzaFN1YnN0cmF0ZUFwaShrZXkpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgcmVmcmVzaFdlYjNBcGkgKGtleTogc3RyaW5nKSB7XG4gICAgdGhpcy5jaGFpblNlcnZpY2UucmVmcmVzaEV2bUFwaShrZXkpO1xuICB9XG5cbiAgcHVibGljIGdldFNlcnZpY2VJbmZvICgpOiBTZXJ2aWNlSW5mbyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluSW5mb01hcDogdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvTWFwKCksXG4gICAgICBjaGFpbkFwaU1hcDogdGhpcy5nZXRBcGlNYXAoKSxcbiAgICAgIGN1cnJlbnRBY2NvdW50SW5mbzogdGhpcy5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudCxcbiAgICAgIGFzc2V0UmVnaXN0cnk6IHRoaXMuY2hhaW5TZXJ2aWNlLmdldEFzc2V0UmVnaXN0cnkoKSxcbiAgICAgIGNoYWluU3RhdGVNYXA6IHRoaXMuY2hhaW5TZXJ2aWNlLmdldENoYWluU3RhdGVNYXAoKVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgZ2V0RXh0ZXJuYWxSZXF1ZXN0TWFwICgpOiBSZWNvcmQ8c3RyaW5nLCBFeHRlcm5hbFJlcXVlc3RQcm9taXNlPiB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZXJuYWxSZXF1ZXN0O1xuICB9XG5cbiAgcHVibGljIHNldEV4dGVybmFsUmVxdWVzdE1hcCAoaWQ6IHN0cmluZywgdmFsdWU6IEV4dGVybmFsUmVxdWVzdFByb21pc2UpIHtcbiAgICB0aGlzLmV4dGVybmFsUmVxdWVzdFtpZF0gPSB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFeHRlcm5hbFJlcXVlc3QgKGlkOiBzdHJpbmcpOiBFeHRlcm5hbFJlcXVlc3RQcm9taXNlIHtcbiAgICByZXR1cm4gdGhpcy5leHRlcm5hbFJlcXVlc3RbaWRdO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUV4dGVybmFsUmVxdWVzdCAoaWQ6IHN0cmluZywgdmFsdWU6IFBhcnRpYWw8RXh0ZXJuYWxSZXF1ZXN0UHJvbWlzZT4pOiB2b2lkIHtcbiAgICBjb25zdCBycyA9IHRoaXMuZXh0ZXJuYWxSZXF1ZXN0W2lkXTtcblxuICAgIGlmIChycykge1xuICAgICAgZm9yIChjb25zdCBbX2tleSwgX3ZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByc1tfa2V5XSA9IF92YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY2xlYW5FeHRlcm5hbFJlcXVlc3QgKCk6IHZvaWQge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZXh0ZXJuYWxSZXF1ZXN0O1xuXG4gICAgY29uc3QgYXJyOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgaGFuZGxlclB1c2hUb0RlbGV0ZSA9IChrZXk6IHN0cmluZywgdmFsdWU6IEV4dGVybmFsUmVxdWVzdFByb21pc2UpID0+IHtcbiAgICAgIGFyci5wdXNoKGtleSk7XG4gICAgICB2YWx1ZS5yZXNvbHZlID0gdW5kZWZpbmVkO1xuICAgICAgdmFsdWUucmVqZWN0ID0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhtYXApKSB7XG4gICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBFeHRlcm5hbFJlcXVlc3RQcm9taXNlU3RhdHVzLkNPTVBMRVRFRCB8fCB2YWx1ZS5zdGF0dXMgPT09IEV4dGVybmFsUmVxdWVzdFByb21pc2VTdGF0dXMuUkVKRUNURUQpIHtcbiAgICAgICAgaGFuZGxlclB1c2hUb0RlbGV0ZShrZXksIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChub3cgLSB2YWx1ZS5jcmVhdGVkQXQgPiAxNSAqIDYwICogNjApIHtcbiAgICAgICAgICBoYW5kbGVyUHVzaFRvRGVsZXRlKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBrZXkgb2YgYXJyKSB7XG4gICAgICBkZWxldGUgbWFwW2tleV07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHBhdXNlQWxsTmV0d29ya3MgKGNvZGU/OiBudW1iZXIsIHJlYXNvbj86IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5zdG9wQWxsQ2hhaW5BcGlzKCk7XG4gIH1cblxuICBhc3luYyByZXN1bWVBbGxOZXR3b3JrcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlLnJlc3VtZUFsbENoYWluQXBpcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBwdWJsaXNoQmFsYW5jZSAocmVzZXQ/OiBib29sZWFuKSB7XG4gICAgdGhpcy5iYWxhbmNlU3ViamVjdC5uZXh0KHRoaXMuZ2V0QmFsYW5jZShyZXNldCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBwdWJsaXNoQ3Jvd2Rsb2FuIChyZXNldD86IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNyb3dkbG9hblN1YmplY3QubmV4dCh0aGlzLmdldENyb3dkbG9hbihyZXNldCkpO1xuICB9XG5cbiAgLy8gcHJpdmF0ZSBwdWJsaXNoSGlzdG9yeSAoKSB7XG4gIC8vICAgdGhpcy5oaXN0b3J5U3ViamVjdC5uZXh0KHRoaXMuZ2V0SGlzdG9yeU1hcCgpKTtcbiAgLy8gfVxuXG4gIC8vIHByaXZhdGUgcmVtb3ZlSW5hY3RpdmVEYXRhQnlDaGFpbjxUPiAoZGF0YTogUmVjb3JkPHN0cmluZywgVD4pIHtcbiAgLy8gICBjb25zdCBhY3RpdmVEYXRhOiBSZWNvcmQ8c3RyaW5nLCBUPiA9IHt9O1xuICAvL1xuICAvLyAgIE9iamVjdC5lbnRyaWVzKGRhdGEpLmZvckVhY2goKFtuZXR3b3JrS2V5LCBpdGVtc10pID0+IHtcbiAgLy8gICAgIGlmICh0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpblN0YXRlQnlLZXkobmV0d29ya0tleSkuYWN0aXZlKSB7XG4gIC8vICAgICAgIGFjdGl2ZURhdGFbbmV0d29ya0tleV0gPSBpdGVtcztcbiAgLy8gICAgIH1cbiAgLy8gICB9KTtcbiAgLy9cbiAgLy8gICByZXR1cm4gYWN0aXZlRGF0YTtcbiAgLy8gfVxuXG4gIGZpbmROZXR3b3JrS2V5QnlHZW5lc2lzSGFzaCAoZ2VuZXNpc0hhc2g/OiBzdHJpbmcgfCBudWxsKTogW3N0cmluZyB8IHVuZGVmaW5lZCwgX0NoYWluSW5mbyB8IHVuZGVmaW5lZF0ge1xuICAgIGlmICghZ2VuZXNpc0hhc2gpIHtcbiAgICAgIHJldHVybiBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICAgIH1cblxuICAgIGNvbnN0IHJzID0gT2JqZWN0LmVudHJpZXModGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvTWFwKCkpLmZpbmQoKFtuZXR3b3JrS2V5LCBjaGFpbkluZm9dKSA9PiAoX2dldFN1YnN0cmF0ZUdlbmVzaXNIYXNoKGNoYWluSW5mbykgPT09IGdlbmVzaXNIYXNoKSk7XG5cbiAgICBpZiAocnMpIHtcbiAgICAgIHJldHVybiBycztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFt1bmRlZmluZWQsIHVuZGVmaW5lZF07XG4gICAgfVxuICB9XG5cbiAgZmluZENoYWluSWRHZW5lc2lzSGFzaCAoZ2VuZXNpc0hhc2g/OiBzdHJpbmcgfCBudWxsKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBjaGFpbkluZm8gPSB0aGlzLmZpbmROZXR3b3JrS2V5QnlHZW5lc2lzSGFzaChnZW5lc2lzSGFzaClbMV07XG5cbiAgICByZXR1cm4gY2hhaW5JbmZvID8gX2dldEV2bUNoYWluSWQoY2hhaW5JbmZvKSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZpbmROZXR3b3JrS2V5QnlDaGFpbklkIChjaGFpbklkPzogbnVtYmVyIHwgbnVsbCk6IFtzdHJpbmcgfCB1bmRlZmluZWQsIF9DaGFpbkluZm8gfCB1bmRlZmluZWRdIHtcbiAgICBpZiAoIWNoYWluSWQpIHtcbiAgICAgIHJldHVybiBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICAgIH1cblxuICAgIGNvbnN0IHJzID0gT2JqZWN0LmVudHJpZXModGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvTWFwKCkpLmZpbmQoKFtuZXR3b3JrS2V5LCBjaGFpbkluZm9dKSA9PiAoY2hhaW5JbmZvPy5ldm1JbmZvPy5ldm1DaGFpbklkID09PSBjaGFpbklkKSk7XG5cbiAgICBpZiAocnMpIHtcbiAgICAgIHJldHVybiBycztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFt1bmRlZmluZWQsIHVuZGVmaW5lZF07XG4gICAgfVxuICB9XG5cbiAgZmluZFNpbmdsZU1vZGUgKGdlbmVzaXNIYXNoOiBzdHJpbmcpOiBTaW5nbGVNb2RlSnNvbiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgW25ldHdvcmtLZXldID0gdGhpcy5maW5kTmV0d29ya0tleUJ5R2VuZXNpc0hhc2goZ2VuZXNpc0hhc2gpO1xuXG4gICAgaWYgKCFuZXR3b3JrS2V5KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiAoT2JqZWN0LnZhbHVlcyhfUFJFREVGSU5FRF9TSU5HTEVfTU9ERVMpKS5maW5kKChpdGVtKSA9PiAoaXRlbS5uZXR3b3JrS2V5cy5pbmNsdWRlcyhuZXR3b3JrS2V5KSkpO1xuICB9XG5cbiAgcHVibGljIGFjY291bnRFeHBvcnRQcml2YXRlS2V5ICh7IGFkZHJlc3MsXG4gICAgcGFzc3dvcmQgfTogUmVxdWVzdEFjY291bnRFeHBvcnRQcml2YXRlS2V5KTogUmVzcG9uc2VBY2NvdW50RXhwb3J0UHJpdmF0ZUtleSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICBjb25zdCBleHBvcnRlZEpzb24gPSBrZXlyaW5nLmJhY2t1cEFjY291bnQoa2V5cmluZy5nZXRQYWlyKGFkZHJlc3MpLCBwYXNzd29yZCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlUGFpcihwYXNzd29yZCwgYmFzZTY0RGVjb2RlKGV4cG9ydGVkSnNvbi5lbmNvZGVkKSwgZXhwb3J0ZWRKc29uLmVuY29kaW5nLnR5cGUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHByaXZhdGVLZXk6IHU4YVRvSGV4KGRlY29kZWQuc2VjcmV0S2V5KSxcbiAgICAgIHB1YmxpY0tleTogdThhVG9IZXgoZGVjb2RlZC5wdWJsaWNLZXkpXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBjaGVja1B1YmxpY0FuZFNlY3JldEtleSAoeyBwdWJsaWNLZXksXG4gICAgc2VjcmV0S2V5IH06IFJlcXVlc3RDaGVja1B1YmxpY0FuZFNlY3JldEtleSk6IFJlc3BvbnNlQ2hlY2tQdWJsaWNBbmRTZWNyZXRLZXkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBfc2VjcmV0ID0gaGV4U3RyaXBQcmVmaXgoc2VjcmV0S2V5KTtcblxuICAgICAgaWYgKF9zZWNyZXQubGVuZ3RoID09PSA2NCkge1xuICAgICAgICBjb25zdCBzdXJpID0gYDB4JHtfc2VjcmV0fWA7XG4gICAgICAgIGNvbnN0IHsgcGhyYXNlIH0gPSBrZXlFeHRyYWN0U3VyaShzdXJpKTtcblxuICAgICAgICBpZiAoaXNIZXgocGhyYXNlKSAmJiBpc0hleChwaHJhc2UsIDI1NikpIHtcbiAgICAgICAgICBjb25zdCB0eXBlOiBLZXlwYWlyVHlwZSA9ICdldGhlcmV1bSc7XG4gICAgICAgICAgY29uc3QgYWRkcmVzcyA9IGtleXJpbmcuY3JlYXRlRnJvbVVyaShnZXRTdXJpKHN1cmksIHR5cGUpLCB7fSwgdHlwZSkuYWRkcmVzcztcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLFxuICAgICAgICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgICAgICAgIGlzRXRoZXJldW06IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhZGRyZXNzOiAnJyxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNFdGhlcmV1bTogdHJ1ZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qga2V5UGFpciA9IGtleXJpbmcua2V5cmluZy5hZGRGcm9tUGFpcih7IHB1YmxpY0tleTogaGV4VG9VOGEocHVibGljS2V5KSwgc2VjcmV0S2V5OiBoZXhUb1U4YShzZWNyZXRLZXkpIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhZGRyZXNzOiBrZXlQYWlyLmFkZHJlc3MsXG4gICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgIGlzRXRoZXJldW06IGZhbHNlXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFkZHJlc3M6ICcnLFxuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgaXNFdGhlcmV1bTogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEV0aEtleXJpbmcgKGFkZHJlc3M6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8U2ltcGxlS2V5cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxTaW1wbGVLZXlyaW5nPigocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgeyBwcml2YXRlS2V5IH0gPSB0aGlzLmFjY291bnRFeHBvcnRQcml2YXRlS2V5KHsgYWRkcmVzcywgcGFzc3dvcmQ6IHBhc3N3b3JkIH0pO1xuICAgICAgY29uc3QgZXRoS2V5cmluZyA9IG5ldyBTaW1wbGVLZXlyaW5nKFtwcml2YXRlS2V5XSk7XG5cbiAgICAgIHJlc29sdmUoZXRoS2V5cmluZyk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZXZtU2lnbiAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nLCBwYXJhbXM6IGFueSwgYWxsb3dlZEFjY291bnRzOiBzdHJpbmdbXSk6IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgbGV0IGFkZHJlc3MgPSAnJztcbiAgICBsZXQgcGF5bG9hZDogYW55O1xuICAgIGNvbnN0IFtwMSwgcDJdID0gcGFyYW1zIGFzIFtzdHJpbmcsIHN0cmluZ107XG5cbiAgICBpZiAodHlwZW9mIHAxID09PSAnc3RyaW5nJyAmJiBpc0V0aGVyZXVtQWRkcmVzcyhwMSkpIHtcbiAgICAgIGFkZHJlc3MgPSBwMTtcbiAgICAgIHBheWxvYWQgPSBwMjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwMiA9PT0gJ3N0cmluZycgJiYgaXNFdGhlcmV1bUFkZHJlc3MocDIpKSB7XG4gICAgICBhZGRyZXNzID0gcDI7XG4gICAgICBwYXlsb2FkID0gcDE7XG4gICAgfVxuXG4gICAgaWYgKGFkZHJlc3MgPT09ICcnIHx8ICFwYXlsb2FkKSB7XG4gICAgICB0aHJvdyBuZXcgRXZtUHJvdmlkZXJFcnJvcihFdm1Qcm92aWRlckVycm9yVHlwZS5JTlZBTElEX1BBUkFNUywgdCgnTm90IGZvdW5kIGFkZHJlc3Mgb3IgcGF5bG9hZCB0byBzaWduJykpO1xuICAgIH1cblxuICAgIGlmIChbJ2V0aF9zaWduJywgJ3BlcnNvbmFsX3NpZ24nLCAnZXRoX3NpZ25UeXBlZERhdGEnLCAnZXRoX3NpZ25UeXBlZERhdGFfdjEnLCAnZXRoX3NpZ25UeXBlZERhdGFfdjMnLCAnZXRoX3NpZ25UeXBlZERhdGFfdjQnXS5pbmRleE9mKG1ldGhvZCkgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXZtUHJvdmlkZXJFcnJvcihFdm1Qcm92aWRlckVycm9yVHlwZS5JTlZBTElEX1BBUkFNUywgdCgnVW5zdXBwb3J0ZWQgYWN0aW9uJykpO1xuICAgIH1cblxuICAgIGlmIChbJ2V0aF9zaWduVHlwZWREYXRhX3YzJywgJ2V0aF9zaWduVHlwZWREYXRhX3Y0J10uaW5kZXhPZihtZXRob2QpID4gLTEpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgcGF5bG9hZCA9IEpTT04ucGFyc2UocGF5bG9hZCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgc2lnbiBhYmlibGl0eVxuICAgIGlmICghYWxsb3dlZEFjY291bnRzLmZpbmQoKGFjYykgPT4gKGFjYy50b0xvd2VyQ2FzZSgpID09PSBhZGRyZXNzLnRvTG93ZXJDYXNlKCkpKSkge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsIHQoJ1lvdSBoYXZlIHJlc2NpbmRlZCBhbGxvd2FuY2UgZm9yIHRoaXMgYWNjb3VudCBpbiB3YWxsZXQnKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFpciA9IGtleXJpbmcuZ2V0UGFpcihhZGRyZXNzKTtcblxuICAgIGlmICghcGFpcikge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsIHQoJ1VuYWJsZSB0byBmaW5kIGFjY291bnQnKSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWNjb3VudDogQWNjb3VudEpzb24gPSB7IGFkZHJlc3M6IHBhaXIuYWRkcmVzcywgLi4ucGFpci5tZXRhIH07XG5cbiAgICBsZXQgaGFzaFBheWxvYWQgPSAnJztcbiAgICBsZXQgY2FuU2lnbiA9IGZhbHNlO1xuXG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ3BlcnNvbmFsX3NpZ24nOlxuICAgICAgICBjYW5TaWduID0gdHJ1ZTtcbiAgICAgICAgaGFzaFBheWxvYWQgPSBwYXlsb2FkIGFzIHN0cmluZztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdldGhfc2lnbic6XG4gICAgICBjYXNlICdldGhfc2lnblR5cGVkRGF0YSc6XG4gICAgICBjYXNlICdldGhfc2lnblR5cGVkRGF0YV92MSc6XG4gICAgICBjYXNlICdldGhfc2lnblR5cGVkRGF0YV92Myc6XG4gICAgICBjYXNlICdldGhfc2lnblR5cGVkRGF0YV92NCc6XG4gICAgICAgIGlmICghYWNjb3VudC5pc0V4dGVybmFsKSB7XG4gICAgICAgICAgY2FuU2lnbiA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLklOVkFMSURfUEFSQU1TLCB0KCdVbnN1cHBvcnRlZCBhY3Rpb24nKSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2lnblBheWxvYWQ6IEV2bVNpZ25hdHVyZVJlcXVlc3QgPSB7XG4gICAgICBhY2NvdW50OiBhY2NvdW50LFxuICAgICAgdHlwZTogbWV0aG9kLFxuICAgICAgcGF5bG9hZDogcGF5bG9hZCBhcyB1bmtub3duLFxuICAgICAgaGFzaFBheWxvYWQ6IGhhc2hQYXlsb2FkLFxuICAgICAgY2FuU2lnbjogY2FuU2lnbixcbiAgICAgIGlkXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLmFkZENvbmZpcm1hdGlvbihpZCwgdXJsLCAnZXZtU2lnbmF0dXJlUmVxdWVzdCcsIHNpZ25QYXlsb2FkLCB7XG4gICAgICByZXF1aXJlZFBhc3N3b3JkOiBmYWxzZSxcbiAgICAgIGFkZHJlc3NcbiAgICB9KVxuICAgICAgLnRoZW4oKHsgaXNBcHByb3ZlZCwgcGF5bG9hZCB9KSA9PiB7XG4gICAgICAgIGlmIChpc0FwcHJvdmVkKSB7XG4gICAgICAgICAgaWYgKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXZtUHJvdmlkZXJFcnJvcihFdm1Qcm92aWRlckVycm9yVHlwZS5JTlZBTElEX1BBUkFNUywgdCgnTm90IGZvdW5kIHNpZ25hdHVyZScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuVVNFUl9SRUpFQ1RFRF9SRVFVRVNUKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZXZtU2VuZFRyYW5zYWN0aW9uIChpZDogc3RyaW5nLCB1cmw6IHN0cmluZywgbmV0d29ya0tleTogc3RyaW5nLCBhbGxvd2VkQWNjb3VudHM6IHN0cmluZ1tdLCB0cmFuc2FjdGlvblBhcmFtczogRXZtU2VuZFRyYW5zYWN0aW9uUGFyYW1zKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBldm1BcGkgPSB0aGlzLmdldEV2bUFwaShuZXR3b3JrS2V5KTtcbiAgICBjb25zdCBldm1OZXR3b3JrID0gdGhpcy5nZXRDaGFpbkluZm8obmV0d29ya0tleSk7XG4gICAgY29uc3Qgd2ViMyA9IGV2bUFwaS5hcGk7XG5cbiAgICBjb25zdCBhdXRvRm9ybWF0TnVtYmVyID0gKHZhbD86IHN0cmluZyB8IG51bWJlcik6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgJiYgdmFsLnN0YXJ0c1dpdGgoJzB4JykpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCTih2YWwucmVwbGFjZSgnMHgnLCAnJyksIDE2KS50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIGlmICh0cmFuc2FjdGlvblBhcmFtcy5mcm9tID09PSB0cmFuc2FjdGlvblBhcmFtcy50bykge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsIHQoJ1JlY2VpdmluZyBhZGRyZXNzIG11c3QgYmUgZGlmZmVyZW50IGZyb20gc2VuZGluZyBhZGRyZXNzJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbkNvbmZpZyA9IHtcbiAgICAgIGZyb206IHRyYW5zYWN0aW9uUGFyYW1zLmZyb20sXG4gICAgICB0bzogdHJhbnNhY3Rpb25QYXJhbXMudG8sXG4gICAgICB2YWx1ZTogYXV0b0Zvcm1hdE51bWJlcih0cmFuc2FjdGlvblBhcmFtcy52YWx1ZSksXG4gICAgICBnYXNQcmljZTogYXV0b0Zvcm1hdE51bWJlcih0cmFuc2FjdGlvblBhcmFtcy5nYXNQcmljZSksXG4gICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogYXV0b0Zvcm1hdE51bWJlcih0cmFuc2FjdGlvblBhcmFtcy5tYXhQcmlvcml0eUZlZVBlckdhcyksXG4gICAgICBtYXhGZWVQZXJHYXM6IGF1dG9Gb3JtYXROdW1iZXIodHJhbnNhY3Rpb25QYXJhbXMubWF4RmVlUGVyR2FzKSxcbiAgICAgIGRhdGE6IHRyYW5zYWN0aW9uUGFyYW1zLmRhdGFcbiAgICB9O1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRyYW5zYWN0aW9uIGRhdGFcbiAgICB0cnkge1xuICAgICAgdHJhbnNhY3Rpb24uZ2FzID0gYXdhaXQgd2ViMy5ldGguZXN0aW1hdGVHYXMoeyAuLi50cmFuc2FjdGlvbiB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsIGU/Lm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGNvbnN0IGdhc1ByaWNlID0gYXdhaXQgd2ViMy5ldGguZ2V0R2FzUHJpY2UoKTtcblxuICAgIHRyYW5zYWN0aW9uLmdhc1ByaWNlID0gZ2FzUHJpY2U7XG5cbiAgICBjb25zdCBlc3RpbWF0ZUdhcyA9IG5ldyBCTihnYXNQcmljZS50b1N0cmluZygpKS5tdWwobmV3IEJOKHRyYW5zYWN0aW9uLmdhcykpLnRvU3RyaW5nKCk7XG5cbiAgICAvLyBBZGRyZXNzIGlzIHZhbGlkYXRlZCBpbiBiZWZvcmUgc3RlcFxuICAgIGNvbnN0IGZyb21BZGRyZXNzID0gYWxsb3dlZEFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IChhY2NvdW50LnRvTG93ZXJDYXNlKCkgPT09ICh0cmFuc2FjdGlvbi5mcm9tIGFzIHN0cmluZykudG9Mb3dlckNhc2UoKSkpO1xuXG4gICAgaWYgKCFmcm9tQWRkcmVzcykge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsIHQoJ1lvdSBoYXZlIHJlc2NpbmRlZCBhbGxvd2FuY2UgZm9yIHRoaXMgYWNjb3VudCBpbiB3YWxsZXQnKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFpciA9IGtleXJpbmcuZ2V0UGFpcihmcm9tQWRkcmVzcyk7XG5cbiAgICBpZiAoIXBhaXIpIHtcbiAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLklOVkFMSURfUEFSQU1TLCB0KCdVbmFibGUgdG8gZmluZCBhY2NvdW50JykpO1xuICAgIH1cblxuICAgIGNvbnN0IGFjY291bnQ6IEFjY291bnRKc29uID0geyBhZGRyZXNzOiBwYWlyLmFkZHJlc3MsIC4uLnBhaXIubWV0YSB9O1xuXG4gICAgLy8gVmFsaWRhdGUgYmFsYW5jZVxuICAgIGNvbnN0IGJhbGFuY2UgPSBuZXcgQk4oYXdhaXQgd2ViMy5ldGguZ2V0QmFsYW5jZShmcm9tQWRkcmVzcykgfHwgMCk7XG5cbiAgICBpZiAoYmFsYW5jZS5sdChuZXcgQk4oZ2FzUHJpY2UudG9TdHJpbmcoKSkubXVsKG5ldyBCTih0cmFuc2FjdGlvbi5nYXMpKS5hZGQobmV3IEJOKGF1dG9Gb3JtYXROdW1iZXIodHJhbnNhY3Rpb25QYXJhbXMudmFsdWUpIHx8ICcwJykpKSkge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsIHQoJ0luc3VmZmljaWVudCBiYWxhbmNlJykpO1xuICAgIH1cblxuICAgIHRyYW5zYWN0aW9uLm5vbmNlID0gYXdhaXQgd2ViMy5ldGguZ2V0VHJhbnNhY3Rpb25Db3VudChmcm9tQWRkcmVzcyk7XG5cbiAgICBjb25zdCBoYXNoUGF5bG9hZCA9IHRoaXMudHJhbnNhY3Rpb25TZXJ2aWNlLmdlbmVyYXRlSGFzaFBheWxvYWQobmV0d29ya0tleSwgdHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IGlzVG9Db250cmFjdCA9IGF3YWl0IGlzQ29udHJhY3RBZGRyZXNzKHRyYW5zYWN0aW9uLnRvIHx8ICcnLCBldm1BcGkpO1xuICAgIGNvbnN0IHBhcnNlRGF0YSA9IGlzVG9Db250cmFjdFxuICAgICAgPyB0cmFuc2FjdGlvbi5kYXRhXG4gICAgICAgID8gKGF3YWl0IHBhcnNlQ29udHJhY3RJbnB1dCh0cmFuc2FjdGlvbi5kYXRhLCB0cmFuc2FjdGlvbi50byB8fCAnJywgZXZtTmV0d29yaykpLnJlc3VsdFxuICAgICAgICA6ICcnXG4gICAgICA6IHRyYW5zYWN0aW9uLmRhdGEgfHwgJyc7XG5cbiAgICBjb25zdCByZXF1ZXN0UGF5bG9hZDogRXZtU2VuZFRyYW5zYWN0aW9uUmVxdWVzdCA9IHtcbiAgICAgIC4uLnRyYW5zYWN0aW9uLFxuICAgICAgZXN0aW1hdGVHYXMsXG4gICAgICBoYXNoUGF5bG9hZCxcbiAgICAgIGlzVG9Db250cmFjdCxcbiAgICAgIHBhcnNlRGF0YTogcGFyc2VEYXRhLFxuICAgICAgYWNjb3VudDogYWNjb3VudCxcbiAgICAgIGNhblNpZ246IHRydWVcbiAgICB9O1xuXG4gICAgY29uc3QgZVR5cGUgPSB0cmFuc2FjdGlvbi52YWx1ZSA/IEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfQkFMQU5DRSA6IEV4dHJpbnNpY1R5cGUuRVZNX0VYRUNVVEU7XG5cbiAgICBjb25zdCB0cmFuc2FjdGlvbkRhdGEgPSB7IC4uLnRyYW5zYWN0aW9uIH07XG4gICAgY29uc3QgdG9rZW4gPSB0aGlzLmNoYWluU2VydmljZS5nZXROYXRpdmVUb2tlbkluZm8obmV0d29ya0tleSk7XG5cbiAgICBpZiAoZVR5cGUgPT09IEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfQkFMQU5DRSkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdHJhbnNhY3Rpb25EYXRhLnRva2VuU2x1ZyA9IHRva2VuLnNsdWc7XG4gICAgfVxuXG4gICAgLy8gQ3VzdG9tIGhhbmRsZSB0aGlzIGluc3RlYWQgb2YgZ2VuZXJhbCBoYW5kbGVyIHRyYW5zYWN0aW9uXG4gICAgY29uc3QgdHJhbnNhY3Rpb25FbWl0dGVyID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblNlcnZpY2UuYWRkVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb246IHJlcXVlc3RQYXlsb2FkLFxuICAgICAgYWRkcmVzczogcmVxdWVzdFBheWxvYWQuZnJvbSBhcyBzdHJpbmcsXG4gICAgICBjaGFpbjogbmV0d29ya0tleSxcbiAgICAgIHVybCxcbiAgICAgIGRhdGE6IHRyYW5zYWN0aW9uRGF0YSxcbiAgICAgIGV4dHJpbnNpY1R5cGU6IGVUeXBlLFxuICAgICAgY2hhaW5UeXBlOiBDaGFpblR5cGUuRVZNLFxuICAgICAgZXN0aW1hdGVGZWU6IHtcbiAgICAgICAgdmFsdWU6IGVzdGltYXRlR2FzLFxuICAgICAgICBzeW1ib2w6IHRva2VuLnN5bWJvbCxcbiAgICAgICAgZGVjaW1hbHM6IHRva2VuLmRlY2ltYWxzIHx8IDE4XG4gICAgICB9LFxuICAgICAgaWRcbiAgICB9KTtcblxuICAgIC8vIFdhaXQgZXh0cmluc2ljIGhhc2hcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJhbnNhY3Rpb25FbWl0dGVyLm9uKCdleHRyaW5zaWNIYXNoJywgKHJzOiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVzb2x2ZShycy5leHRyaW5zaWNIYXNoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNYXBwaW5nIGVycm9yIGZvciBldm1Qcm92aWRlclxuICAgICAgdHJhbnNhY3Rpb25FbWl0dGVyLm9uKCdlcnJvcicsIChyczogVHJhbnNhY3Rpb25FdmVudFJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGxldCBldm1Qcm92aWRlckVycm9yID0gbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5URVJOQUxfRVJST1IpO1xuXG4gICAgICAgIGNvbnN0IGVycm9yVHlwZSA9IChycy5lcnJvcnNbMF0/LmVycm9yVHlwZSB8fCBCYXNpY1R4RXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SKTtcblxuICAgICAgICBpZiAoZXJyb3JUeXBlID09PSBCYXNpY1R4RXJyb3JUeXBlLlVTRVJfUkVKRUNUX1JFUVVFU1QgfHwgZXJyb3JUeXBlID09PSBCYXNpY1R4RXJyb3JUeXBlLlVOQUJMRV9UT19TSUdOKSB7XG4gICAgICAgICAgZXZtUHJvdmlkZXJFcnJvciA9IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLlVTRVJfUkVKRUNURURfUkVRVUVTVCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JUeXBlID09PSBCYXNpY1R4RXJyb3JUeXBlLlVOQUJMRV9UT19TRU5EKSB7XG4gICAgICAgICAgZXZtUHJvdmlkZXJFcnJvciA9IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SLCBycy5lcnJvcnNbMF0/Lm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVqZWN0KGV2bVByb3ZpZGVyRXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29uZmlybWF0aW9uc1F1ZXVlU3ViamVjdCAoKTogQmVoYXZpb3JTdWJqZWN0PENvbmZpcm1hdGlvbnNRdWV1ZT4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlLmNvbmZpcm1hdGlvbnNRdWV1ZVN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY29tcGxldGVDb25maXJtYXRpb24gKHJlcXVlc3Q6IFJlcXVlc3RDb25maXJtYXRpb25Db21wbGV0ZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlcXVlc3RTZXJ2aWNlLmNvbXBsZXRlQ29uZmlybWF0aW9uKHJlcXVlc3QpO1xuICB9XG5cbiAgcHVibGljIG9uSW5zdGFsbCAoKSB7XG4gICAgLy8gY29uc3Qgc2luZ2xlTW9kZXMgPSBPYmplY3QudmFsdWVzKF9QUkVERUZJTkVEX1NJTkdMRV9NT0RFUyk7XG5cbiAgICAvLyBUaGlzIGxvZ2ljIGlzIG1vdmVkIHRvIGluc3RhbGxhdGlvbi50c1xuICAgIC8vIHRyeSB7XG4gICAgLy8gICAvLyBPcGVuIGV4cGFuZCBwYWdlXG4gICAgLy8gICBjb25zdCB1cmwgPSBgJHtjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnaW5kZXguaHRtbCcpfSMvYDtcbiAgICAvL1xuICAgIC8vICAgd2l0aEVycm9yTG9nKCgpID0+IGNocm9tZS50YWJzLmNyZWF0ZSh7IHVybCB9KSk7XG4gICAgLy8gfSBjYXRjaCAoZSkge1xuICAgIC8vICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAvLyB9XG5cbiAgICAvLyBjb25zdCBzZXRVcFNpbmdsZU1vZGUgPSAoeyBuZXR3b3JrS2V5cywgdGhlbWUgfTogU2luZ2xlTW9kZUpzb24pID0+IHtcbiAgICAvLyAgIG5ldHdvcmtLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIC8vICAgICB0aGlzLmVuYWJsZUNoYWluKGtleSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgLy8gICB9KTtcbiAgICAvL1xuICAgIC8vICAgY29uc3QgY2hhaW5JbmZvID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvQnlLZXkobmV0d29ya0tleXNbMF0pO1xuICAgIC8vICAgY29uc3QgZ2VuZXNpc0hhc2ggPSBfZ2V0U3Vic3RyYXRlR2VuZXNpc0hhc2goY2hhaW5JbmZvKTtcbiAgICAvL1xuICAgIC8vICAgdGhpcy5zZXRDdXJyZW50QWNjb3VudCh7XG4gICAgLy8gICAgIGFkZHJlc3M6IEFMTF9BQ0NPVU5UX0tFWSxcbiAgICAvLyAgICAgY3VycmVudEdlbmVzaXNIYXNoOiBnZW5lc2lzSGFzaC5sZW5ndGggPiAwID8gZ2VuZXNpc0hhc2ggOiBudWxsXG4gICAgLy8gICB9KTtcbiAgICAvLyAgIHRoaXMuc2V0VGhlbWUodGhlbWUpO1xuICAgIC8vIH07XG4gICAgLy9cbiAgICAvLyBjaHJvbWUudGFicy5xdWVyeSh7fSwgZnVuY3Rpb24gKHRhYnMpIHtcbiAgICAvLyAgIGNvbnN0IG9wZW5pbmdVcmxzID0gdGFicy5tYXAoKHQpID0+IHQudXJsKTtcbiAgICAvL1xuICAgIC8vICAgY29uc3Qgc2luZ2xlTW9kZSA9IHNpbmdsZU1vZGVzLmZpbmQoKHsgYXV0b1RyaWdnZXJEb21haW4gfSkgPT4ge1xuICAgIC8vICAgICBjb25zdCB1cmxSZWdleCA9IG5ldyBSZWdFeHAoYXV0b1RyaWdnZXJEb21haW4pO1xuICAgIC8vXG4gICAgLy8gICAgIHJldHVybiBCb29sZWFuKG9wZW5pbmdVcmxzLmZpbmQoKHVybCkgPT4ge1xuICAgIC8vICAgICAgIHJldHVybiB1cmwgJiYgdXJsUmVnZXgudGVzdCh1cmwpO1xuICAgIC8vICAgICB9KSk7XG4gICAgLy8gICB9KTtcbiAgICAvL1xuICAgIC8vICAgaWYgKHNpbmdsZU1vZGUpIHtcbiAgICAvLyAgICAgLy8gV2FpdCBmb3IgZXZlcnl0aGluZyBpcyByZWFkeSBiZWZvcmUgZW5hYmxlIHNpbmdsZSBtb2RlXG4gICAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIC8vICAgICAgIHNldFVwU2luZ2xlTW9kZShzaW5nbGVNb2RlKTtcbiAgICAvLyAgICAgfSwgOTk5KTtcbiAgICAvLyAgIH1cbiAgICAvLyB9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlTmV0d29ya3MgKCkge1xuICAgIHJldHVybiB0aGlzLmNoYWluU2VydmljZS5nZXRBY3RpdmVDaGFpbkluZm9zKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGFjdGl2ZUNoYWluU2x1Z3MgKCkge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuYWN0aXZlTmV0d29ya3MpLm1hcCgoY2hhaW5JbmZvKSA9PiB7XG4gICAgICByZXR1cm4gY2hhaW5JbmZvLnNsdWc7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2xlZXAgKCkge1xuICAgIC8vIFdhaXQgc3RhcnRpbmcgZmluaXNoIGJlZm9yZSBzbGVlcCB0byBhdm9pZCBjb25mbGljdFxuICAgIHRoaXMuZ2VuZXJhbFN0YXR1cyA9PT0gU2VydmljZVN0YXR1cy5TVEFSVElORyAmJiB0aGlzLndhaXRTdGFydGluZyAmJiBhd2FpdCB0aGlzLndhaXRTdGFydGluZztcbiAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdnZW5lcmFsLnNsZWVwJywgdHJ1ZSk7XG5cbiAgICAvLyBBdm9pZCBzbGVlcCBtdWx0aXBsZSB0aW1lc1xuICAgIGlmICh0aGlzLmdlbmVyYWxTdGF0dXMgPT09IFNlcnZpY2VTdGF0dXMuU1RPUFBFRCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENvbnRpbnVlIHdhaXQgZXhpc3RlZCBzdG9wcGluZyBwcm9jZXNzXG4gICAgaWYgKHRoaXMuZ2VuZXJhbFN0YXR1cyA9PT0gU2VydmljZVN0YXR1cy5TVE9QUElORykge1xuICAgICAgYXdhaXQgdGhpcy53YWl0U2xlZXBpbmc7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzbGVlcGluZyA9IGNyZWF0ZVByb21pc2VIYW5kbGVyPHZvaWQ+KCk7XG5cbiAgICB0aGlzLmdlbmVyYWxTdGF0dXMgPSBTZXJ2aWNlU3RhdHVzLlNUT1BQSU5HO1xuICAgIHRoaXMud2FpdFNsZWVwaW5nID0gc2xlZXBpbmcucHJvbWlzZTtcblxuICAgIC8vIFN0b3BwaW5nIHNlcnZpY2VzXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuY3Jvbi5zdG9wKCksIHRoaXMuc3Vic2NyaXB0aW9uLnN0b3AoKV0pO1xuICAgIGF3YWl0IHRoaXMucGF1c2VBbGxOZXR3b3Jrcyh1bmRlZmluZWQsICdJRExFIG1vZGUnKTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5oaXN0b3J5U2VydmljZS5zdG9wKCksIHRoaXMucHJpY2VTZXJ2aWNlLnN0b3AoKV0pO1xuXG4gICAgLy8gQ29tcGxldGUgc2xlZXBpbmdcbiAgICBzbGVlcGluZy5yZXNvbHZlKCk7XG4gICAgdGhpcy5nZW5lcmFsU3RhdHVzID0gU2VydmljZVN0YXR1cy5TVE9QUEVEO1xuICAgIHRoaXMud2FpdFNsZWVwaW5nID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX3N0YXJ0IChpc1dha2V1cCA9IGZhbHNlKSB7XG4gICAgLy8gV2FpdCBzbGVlcCBmaW5pc2ggYmVmb3JlIHN0YXJ0IHRvIGF2b2lkIGNvbmZsaWN0XG4gICAgdGhpcy5nZW5lcmFsU3RhdHVzID09PSBTZXJ2aWNlU3RhdHVzLlNUT1BQSU5HICYmIHRoaXMud2FpdFNsZWVwaW5nICYmIGF3YWl0IHRoaXMud2FpdFNsZWVwaW5nO1xuXG4gICAgLy8gQXZvaWQgc3RhcnQgbXVsdGlwbGUgdGltZXNcbiAgICBpZiAodGhpcy5nZW5lcmFsU3RhdHVzID09PSBTZXJ2aWNlU3RhdHVzLlNUQVJURUQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDb250aW51ZSB3YWl0IGV4aXN0ZWQgc3RhcnRpbmcgcHJvY2Vzc1xuICAgIGlmICh0aGlzLmdlbmVyYWxTdGF0dXMgPT09IFNlcnZpY2VTdGF0dXMuU1RBUlRJTkcpIHtcbiAgICAgIGF3YWl0IHRoaXMud2FpdFN0YXJ0aW5nO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRpbmcgPSBjcmVhdGVQcm9taXNlSGFuZGxlcjx2b2lkPigpO1xuXG4gICAgdGhpcy5nZW5lcmFsU3RhdHVzID0gU2VydmljZVN0YXR1cy5TVEFSVElORztcbiAgICB0aGlzLndhaXRTdGFydGluZyA9IHN0YXJ0aW5nLnByb21pc2U7XG5cbiAgICAvLyBSZXN1bWUgYWxsIG5ldHdvcmtzIGlmIHdha2V1cCBmcm9tIHNsZWVwXG4gICAgaWYgKGlzV2FrZXVwKSB7XG4gICAgICBhd2FpdCB0aGlzLnJlc3VtZUFsbE5ldHdvcmtzKCk7XG4gICAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdnZW5lcmFsLndha2V1cCcsIHRydWUpO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0IHNlcnZpY2VzXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuY3Jvbi5zdGFydCgpLCB0aGlzLnN1YnNjcmlwdGlvbi5zdGFydCgpLCB0aGlzLmhpc3RvcnlTZXJ2aWNlLnN0YXJ0KCksIHRoaXMucHJpY2VTZXJ2aWNlLnN0YXJ0KCldKTtcblxuICAgIC8vIENvbXBsZXRlIHN0YXJ0aW5nXG4gICAgc3RhcnRpbmcucmVzb2x2ZSgpO1xuICAgIHRoaXMud2FpdFN0YXJ0aW5nID0gbnVsbDtcbiAgICB0aGlzLmdlbmVyYWxTdGF0dXMgPSBTZXJ2aWNlU3RhdHVzLlNUQVJURUQ7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgd2FrZXVwICgpIHtcbiAgICBhd2FpdCB0aGlzLl9zdGFydCh0cnVlKTtcbiAgfVxuXG4gIHB1YmxpYyBjYW5jZWxTdWJzY3JpcHRpb24gKGlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoaXNTdWJzY3JpcHRpb25SdW5uaW5nKGlkKSkge1xuICAgICAgdW5zdWJzY3JpYmUoaWQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVuc3Vic2NyaXB0aW9uTWFwW2lkXSkge1xuICAgICAgdGhpcy51bnN1YnNjcmlwdGlvbk1hcFtpZF0oKTtcblxuICAgICAgZGVsZXRlIHRoaXMudW5zdWJzY3JpcHRpb25NYXBbaWRdO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlIChpZDogc3RyaW5nLCB1bnN1YnNjcmliZTogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMudW5zdWJzY3JpcHRpb25NYXBbaWRdID0gdW5zdWJzY3JpYmU7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYXV0b0VuYWJsZUNoYWlucyAoYWRkcmVzc2VzOiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGFzc2V0TWFwID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0QXNzZXRSZWdpc3RyeSgpO1xuICAgIGNvbnN0IHByb21pc2VMaXN0ID0gYWRkcmVzc2VzLm1hcCgoYWRkcmVzcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc3Vic2NhblNlcnZpY2UuZ2V0TXVsdGlDaGFpbkJhbGFuY2UoYWRkcmVzcylcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcblxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IG5lZWRFbmFibGVDaGFpbnM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgbmVlZEFjdGl2ZVRva2Vuczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBjdXJyZW50QXNzZXRTZXR0aW5ncyA9IGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlLmdldEFzc2V0U2V0dGluZ3MoKTtcbiAgICBjb25zdCBjaGFpbk1hcCA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldENoYWluSW5mb01hcCgpO1xuICAgIGNvbnN0IGJhbGFuY2VEYXRhTGlzdCA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VMaXN0KTtcblxuICAgIGJhbGFuY2VEYXRhTGlzdC5mb3JFYWNoKChiYWxhbmNlRGF0YSkgPT4ge1xuICAgICAgYmFsYW5jZURhdGEgJiYgYmFsYW5jZURhdGEuZm9yRWFjaCgoeyBiYWxhbmNlLCBib25kZWQsIGNhdGVnb3J5LCBsb2NrZWQsIG5ldHdvcmssIHN5bWJvbCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoYWluID0gU1VCU0NBTl9DSEFJTl9NQVBfUkVWRVJTRVtuZXR3b3JrXTtcbiAgICAgICAgY29uc3QgY2hhaW5JbmZvID0gY2hhaW4gPyBjaGFpbk1hcFtjaGFpbl0gOiBudWxsO1xuICAgICAgICBjb25zdCBiYWxhbmNlSXNFbXB0eSA9ICghYmFsYW5jZSB8fCBiYWxhbmNlID09PSAnMCcpICYmICghbG9ja2VkIHx8IGxvY2tlZCA9PT0gJzAnKSAmJiAoIWJvbmRlZCB8fCBib25kZWQgPT09ICcwJyk7XG5cbiAgICAgICAgLy8gQ2FuY2VsIGlmIGNoYWluIGlzIG5vdCBzdXBwb3J0ZWQgb3IgaXMgdGVzdG5ldCBvciBiYWxhbmNlIGlzIDBcbiAgICAgICAgaWYgKCFjaGFpbkluZm8gfHwgY2hhaW5JbmZvLmlzVGVzdG5ldCB8fCBiYWxhbmNlSXNFbXB0eSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRva2VuS2V5ID0gYCR7Y2hhaW59LSR7Y2F0ZWdvcnkgPT09ICduYXRpdmUnID8gJ05BVElWRScgOiAnTE9DQUwnfS0ke3N5bWJvbC50b1VwcGVyQ2FzZSgpfWA7XG5cbiAgICAgICAgaWYgKGFzc2V0TWFwW3Rva2VuS2V5XSAmJiAhY3VycmVudEFzc2V0U2V0dGluZ3NbdG9rZW5LZXldPy52aXNpYmxlKSB7XG4gICAgICAgICAgbmVlZEVuYWJsZUNoYWlucy5wdXNoKGNoYWluKTtcbiAgICAgICAgICBuZWVkQWN0aXZlVG9rZW5zLnB1c2godG9rZW5LZXkpO1xuICAgICAgICAgIGN1cnJlbnRBc3NldFNldHRpbmdzW3Rva2VuS2V5XSA9IHsgdmlzaWJsZTogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmIChuZWVkQWN0aXZlVG9rZW5zLmxlbmd0aCkge1xuICAgICAgYXdhaXQgdGhpcy5jaGFpblNlcnZpY2UuZW5hYmxlQ2hhaW5zKG5lZWRFbmFibGVDaGFpbnMpO1xuICAgICAgdGhpcy5jaGFpblNlcnZpY2Uuc2V0QXNzZXRTZXR0aW5ncyh7IC4uLmN1cnJlbnRBc3NldFNldHRpbmdzIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkFjY291bnRBZGQgKCkge1xuICAgIHRoaXMuZXZlbnRTZXJ2aWNlLm9uKCdhY2NvdW50LmFkZCcsIChhZGRyZXNzKSA9PiB7XG4gICAgICB0aGlzLmF1dG9FbmFibGVDaGFpbnMoW2FkZHJlc3NdKS5jYXRjaCh0aGlzLmxvZ2dlci5lcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb25BY2NvdW50UmVtb3ZlICgpIHtcbiAgICB0aGlzLmV2ZW50U2VydmljZS5vbignYWNjb3VudC5yZW1vdmUnLCAoYWRkcmVzcykgPT4ge1xuICAgICAgLy8gU29tZSBzZXBhcmF0ZSBzZXJ2aWNlIGxpa2UgaGlzdG9yeVNlcnZpY2Ugd2lsbCBsaXN0ZW4gdG8gdGhpcyBldmVudCBhbmQgcmVtb3ZlIGluc2lkZSB0aGF0IHNlcnZpY2VcblxuICAgICAgY29uc3Qgc3RvcmVzID0gdGhpcy5kYlNlcnZpY2Uuc3RvcmVzO1xuXG4gICAgICAvLyBSZW1vdmUgQmFsYW5jZVxuICAgICAgc3RvcmVzLmJhbGFuY2UucmVtb3ZlQWxsQnlBZGRyZXNzKGFkZHJlc3MpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgc3RvcmVzLmJhbGFuY2UucmVtb3ZlQWxsQnlBZGRyZXNzKEFMTF9BQ0NPVU5UX0tFWSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbiAgICAgIC8vIFJlbW92ZSBORlRcbiAgICAgIHN0b3Jlcy5uZnQuZGVsZXRlTmZ0QnlBZGRyZXNzKFthZGRyZXNzXSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbiAgICAgIC8vIFJlbW92ZSBTdGFraW5nIERhdGFcbiAgICAgIHN0b3Jlcy5zdGFraW5nLnJlbW92ZUFsbEJ5QWRkcmVzcyhhZGRyZXNzKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZWxvYWROZnQgKCkge1xuICAgIGNvbnN0IGN1cnJlbnRBZGRyZXNzID0gdGhpcy5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudC5hZGRyZXNzO1xuXG4gICAgYXdhaXQgdGhpcy5kYlNlcnZpY2UucmVtb3ZlTmZ0c0J5QWRkcmVzcyhjdXJyZW50QWRkcmVzcyk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jcm9uLnJlbG9hZE5mdCgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlbG9hZFN0YWtpbmcgKCkge1xuICAgIGF3YWl0IHRoaXMuc3Vic2NyaXB0aW9uLnJlbG9hZFN0YWtpbmcoKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGFwcHJvdmVQYXNzUGhpc2hpbmdQYWdlIChfdXJsOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UuZ2V0UGFzc1BoaXNoaW5nTGlzdCgodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyAuLi52YWx1ZSB9O1xuICAgICAgICBjb25zdCB1cmwgPSBzdHJpcFVybChfdXJsKTtcblxuICAgICAgICByZXN1bHRbdXJsXSA9IHsgcGFzczogdHJ1ZSB9O1xuXG4gICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2Uuc2V0UGFzc1BoaXNoaW5nKHJlc3VsdCwgKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVzZXRXYWxsZXQgKHJlc2V0QWxsOiBib29sZWFuKSB7XG4gICAgYXdhaXQgdGhpcy5rZXlyaW5nU2VydmljZS5yZXNldFdhbGxldChyZXNldEFsbCk7XG4gICAgdGhpcy5yZXF1ZXN0U2VydmljZS5yZXNldFdhbGxldCgpO1xuICAgIHRoaXMudHJhbnNhY3Rpb25TZXJ2aWNlLnJlc2V0V2FsbGV0KCk7XG4gICAgYXdhaXQgdGhpcy5kYlNlcnZpY2UucmVzZXRXYWxsZXQocmVzZXRBbGwpO1xuICAgIHRoaXMuYWNjb3VudFJlZlN0b3JlLnNldCgncmVmTGlzdCcsIFtdKTtcblxuICAgIGlmIChyZXNldEFsbCkge1xuICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5yZXNldFdhbGxldCgpO1xuICAgIH1cblxuICAgIHRoaXMuY2hhaW5TZXJ2aWNlLnJlc2V0V2FsbGV0KHJlc2V0QWxsKTtcbiAgICBhd2FpdCB0aGlzLndhbGxldENvbm5lY3RTZXJ2aWNlLnJlc2V0V2FsbGV0KHJlc2V0QWxsKTtcblxuICAgIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlLmluaXQoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBlbmFibGVNYW50YVBheSAodXBkYXRlU3RvcmU6IGJvb2xlYW4sIGFkZHJlc3M6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgc2VlZFBocmFzZT86IHN0cmluZykge1xuICAgIGlmICghYWRkcmVzcyB8fCBpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8uc2V0Q3VycmVudEFkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICBhd2FpdCB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LnByaXZhdGVXYWxsZXQ/LmluaXRpYWxTaWduZXIoKTtcblxuICAgIGlmICh1cGRhdGVTdG9yZSAmJiBzZWVkUGhyYXNlKSB7IC8vIGZpcnN0IHRpbWUgaW5pdGlhdGlvblxuICAgICAgYXdhaXQgdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5wcml2YXRlV2FsbGV0Py5sb2FkVXNlclNlZWRQaHJhc2Uoc2VlZFBocmFzZSk7XG4gICAgICBjb25zdCBhdXRoQ29udGV4dCA9IGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8ucHJpdmF0ZVdhbGxldD8uZ2V0QXV0aG9yaXphdGlvbkNvbnRleHQoKTtcblxuICAgICAgYXdhaXQgdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5wcml2YXRlV2FsbGV0Py5sb2FkQXV0aG9yaXphdGlvbkNvbnRleHQoYXV0aENvbnRleHQgYXMgaW50ZXJmYWNlcy5BdXRoQ29udGV4dFR5cGUpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICBjb25zdCBlbmNyeXB0ZWREYXRhID0gYXdhaXQgcGFzc3dvcmRlci5lbmNyeXB0KHBhc3N3b3JkLCBhdXRoQ29udGV4dCk7XG5cbiAgICAgIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8uc2F2ZU1hbnRhQXV0aENvbnRleHQoe1xuICAgICAgICBjaGFpbjogX0RFRkFVTFRfTUFOVEFfWktfQ0hBSU4sXG4gICAgICAgIGFkZHJlc3MsXG4gICAgICAgIGRhdGE6IGVuY3J5cHRlZERhdGFcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhdXRoQ29udGV4dCA9IChhd2FpdCB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LmdldE1hbnRhQXV0aENvbnRleHQoYWRkcmVzcywgX0RFRkFVTFRfTUFOVEFfWktfQ0hBSU4pKSBhcyBNYW50YUF1dGhvcml6YXRpb25Db250ZXh0O1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgIGNvbnN0IGRlY3J5cHRlZERhdGEgPSBhd2FpdCBwYXNzd29yZGVyLmRlY3J5cHQocGFzc3dvcmQsIGF1dGhDb250ZXh0LmRhdGEpO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgIGNvbnN0IHByb29mQXV0aEtleSA9IG5ldyBVaW50OEFycmF5KE9iamVjdC52YWx1ZXMoZGVjcnlwdGVkRGF0YS5wcm9vZl9hdXRob3JpemF0aW9uX2tleSkpO1xuXG4gICAgICBhd2FpdCB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LnByaXZhdGVXYWxsZXQ/LmxvYWRBdXRob3JpemF0aW9uQ29udGV4dCh7XG4gICAgICAgIHByb29mX2F1dGhvcml6YXRpb25fa2V5OiBwcm9vZkF1dGhLZXlcbiAgICAgIH0gYXMgaW50ZXJmYWNlcy5BdXRoQ29udGV4dFR5cGUpO1xuICAgIH1cblxuICAgIGNvbnN0IHprQWRkcmVzcyA9IGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8ucHJpdmF0ZVdhbGxldD8uZ2V0WmtBZGRyZXNzKCk7XG5cbiAgICBpZiAodXBkYXRlU3RvcmUpIHtcbiAgICAgIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8uc2F2ZU1hbnRhUGF5Q29uZmlnKHtcbiAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgemtBZGRyZXNzOiB6a0FkZHJlc3MsXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGNoYWluOiB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LnByaXZhdGVXYWxsZXQ/Lm5ldHdvcms/LnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGlzSW5pdGlhbFN5bmM6IGZhbHNlXG4gICAgICB9IGFzIE1hbnRhUGF5Q29uZmlnKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzTWFudGFQYXlFbmFibGVkID0gdHJ1ZTtcblxuICAgIHJldHVybiB6a0FkZHJlc3M7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGlzYWJsZU1hbnRhUGF5IChhZGRyZXNzOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LmdldE1hbnRhUGF5Q29uZmlnKGFkZHJlc3MsIF9ERUZBVUxUX01BTlRBX1pLX0NIQUlOKSBhcyBNYW50YVBheUNvbmZpZztcblxuICAgIGlmICghY29uZmlnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5wcml2YXRlV2FsbGV0Py5kcm9wQXV0aG9yaXphdGlvbkNvbnRleHQoKTtcbiAgICBhd2FpdCB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LnByaXZhdGVXYWxsZXQ/LmRyb3BVc2VyU2VlZFBocmFzZSgpO1xuICAgIC8vIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8ucHJpdmF0ZVdhbGxldD8ucmVzZXRTdGF0ZSgpO1xuICAgIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8uZGVsZXRlTWFudGFQYXlDb25maWcoYWRkcmVzcywgX0RFRkFVTFRfTUFOVEFfWktfQ0hBSU4pO1xuICAgIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8uZGVsZXRlTWFudGFBdXRoQ29udGV4dChhZGRyZXNzLCBfREVGQVVMVF9NQU5UQV9aS19DSEFJTik7XG5cbiAgICB0aGlzLmNoYWluU2VydmljZS5zZXRNYW50YVprQXNzZXRTZXR0aW5ncyhmYWxzZSk7XG4gICAgdGhpcy5pc01hbnRhUGF5RW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaW5pdGlhbFN5bmNNYW50YVBheSAoYWRkcmVzczogc3RyaW5nKSB7XG4gICAgaWYgKCFhZGRyZXNzIHx8IGlzRXRoZXJldW1BZGRyZXNzKGFkZHJlc3MpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5zZXRDdXJyZW50QWRkcmVzcyhhZGRyZXNzKTtcblxuICAgIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8ucHJpdmF0ZVdhbGxldD8uYmFzZVdhbGxldD8uaXNBcGlSZWFkeSgpO1xuXG4gICAgY29uc3Qgc3luY1Jlc3VsdCA9IGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8ucHJpdmF0ZVdhbGxldD8uaW5pdGlhbFdhbGxldFN5bmMoKTtcblxuICAgIGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8udXBkYXRlTWFudGFQYXlDb25maWcoYWRkcmVzcywgX0RFRkFVTFRfTUFOVEFfWktfQ0hBSU4sIHsgaXNJbml0aWFsU3luYzogdHJ1ZSB9KTtcblxuICAgIHRoaXMuZXZlbnRTZXJ2aWNlLmVtaXQoJ21hbnRhUGF5LmluaXRTeW5jJywgdW5kZWZpbmVkKTtcblxuICAgIHJldHVybiBzeW5jUmVzdWx0O1xuICB9XG5cbiAgcHVibGljIGdldE1hbnRhWmtCYWxhbmNlICgpIHtcbiAgICBpZiAoIXRoaXMuY2hhaW5TZXJ2aWNlIHx8ICF0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8ucHJpdmF0ZVdhbGxldD8uaW5pdGlhbFN5bmNJc0ZpbmlzaGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2hhaW4gPSB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXkucHJpdmF0ZVdhbGxldD8ubmV0d29yaztcblxuICAgIGlmICghY2hhaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhc3NldE1hcCA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldE1hbnRhWmtBc3NldHMoY2hhaW4/LnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5wcml2YXRlV2FsbGV0Py5nZXRNdWx0aVprQmFsYW5jZShPYmplY3QudmFsdWVzKGFzc2V0TWFwKS5tYXAoKHRva2VuSW5mbykgPT4gbmV3IEJOKF9nZXRUb2tlbk9uQ2hhaW5Bc3NldElkKHRva2VuSW5mbykpKSlcbiAgICAgIC50aGVuKCh6a0JhbGFuY2VzKSA9PiB7XG4gICAgICAgIGNvbnN0IGFzc2V0TGlzdCA9IE9iamVjdC52YWx1ZXMoYXNzZXRNYXApO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXNzZXRMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgYmFsYW5jZUl0ZW0gPSB7XG4gICAgICAgICAgICB0b2tlblNsdWc6IGFzc2V0TGlzdFtpXS5zbHVnLFxuICAgICAgICAgICAgc3RhdGU6IEFQSUl0ZW1TdGF0ZS5QRU5ESU5HLFxuICAgICAgICAgICAgZnJlZTogJzAnLFxuICAgICAgICAgICAgbG9ja2VkOiAnMCdcbiAgICAgICAgICB9IGFzIEJhbGFuY2VJdGVtO1xuXG4gICAgICAgICAgYmFsYW5jZUl0ZW0uZnJlZSA9IHprQmFsYW5jZXNbaV0/LnRvU3RyaW5nKCkgfHwgJzAnO1xuICAgICAgICAgIGJhbGFuY2VJdGVtLnN0YXRlID0gQVBJSXRlbVN0YXRlLlJFQURZO1xuICAgICAgICAgIHRoaXMuc2V0QmFsYW5jZUl0ZW0oYmFsYW5jZUl0ZW0udG9rZW5TbHVnLCBiYWxhbmNlSXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS53YXJuKTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVNYW50YVBheUJhbGFuY2UgKCkge1xuICAgIGxldCBpbnRlcnZhbDogTm9kZUpTLlRpbWVyIHwgdW5kZWZpbmVkO1xuXG4gICAgdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5nZXRNYW50YVBheUNvbmZpZyh0aGlzLmtleXJpbmdTZXJ2aWNlLmN1cnJlbnRBY2NvdW50LmFkZHJlc3MsIF9ERUZBVUxUX01BTlRBX1pLX0NIQUlOKVxuICAgICAgLnRoZW4oKGNvbmZpZzogTWFudGFQYXlDb25maWcpID0+IHtcbiAgICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcuZW5hYmxlZCAmJiBjb25maWcuaXNJbml0aWFsU3luYykge1xuICAgICAgICAgIHRoaXMuZ2V0TWFudGFaa0JhbGFuY2UoKTtcblxuICAgICAgICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5nZXRNYW50YVprQmFsYW5jZSwgTUFOVEFfUEFZX0JBTEFOQ0VfSU5URVJWQUwpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUud2Fybik7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzeW5jTWFudGFQYXkgKCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8uZ2V0TWFudGFQYXlGaXJzdENvbmZpZyhfREVGQVVMVF9NQU5UQV9aS19DSEFJTikgYXMgTWFudGFQYXlDb25maWc7XG5cbiAgICBpZiAoIWNvbmZpZy5pc0luaXRpYWxTeW5jKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8ucHJpdmF0ZVdhbGxldD8uaW5pdGlhbFN5bmNJc0ZpbmlzaGVkKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LnByaXZhdGVXYWxsZXQ/LndhbGxldFN5bmMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5Py5wcml2YXRlV2FsbGV0Py5pbml0aWFsV2FsbGV0U3luYygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRNYW50YVBheVprQmFsYW5jZSAoYWRkcmVzczogc3RyaW5nLCB0b2tlbkluZm86IF9DaGFpbkFzc2V0KTogUHJvbWlzZTxBbW91bnREYXRhPiB7XG4gICAgY29uc3QgYm5Bc3NldElkID0gbmV3IEJOKF9nZXRUb2tlbk9uQ2hhaW5Bc3NldElkKHRva2VuSW5mbykpO1xuICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLmNoYWluU2VydmljZT8ubWFudGFQYXk/LnByaXZhdGVXYWxsZXQ/LmdldFprQmFsYW5jZShibkFzc2V0SWQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRlY2ltYWxzOiB0b2tlbkluZm8uZGVjaW1hbHMgfHwgMCxcbiAgICAgIHN5bWJvbDogdG9rZW5JbmZvLnN5bWJvbCxcbiAgICAgIHZhbHVlOiBiYWxhbmNlPy50b1N0cmluZygpIHx8ICcwJ1xuICAgIH07XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlTWFudGFQYXlTeW5jU3RhdGUgKCkge1xuICAgIGlmICghdGhpcy5jaGFpblNlcnZpY2U/Lm1hbnRhUGF5KSB7XG4gICAgICByZXR1cm4gbmV3IFN1YmplY3Q8TWFudGFQYXlTeW5jU3RhdGU+KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY2hhaW5TZXJ2aWNlPy5tYW50YVBheT8uc3Vic2NyaWJlU3luY1N0YXRlKCk7XG4gIH1cblxuICAvLyBNZXRhZGF0YVxuICBwdWJsaWMgYXN5bmMgZmluZE1ldGFkYXRhIChoYXNoOiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMuY2hhaW5TZXJ2aWNlLmdldE1ldGFkYXRhQnlIYXNoKGhhc2gpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YT8uaGV4VmFsdWUgfHwgJycsXG4gICAgICBzcGVjVmVyc2lvbjogcGFyc2VJbnQobWV0YWRhdGE/LnNwZWNWZXJzaW9uIHx8ICcwJylcbiAgICB9O1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHR5cGUgeyBJbmplY3RlZEFjY291bnQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1pbmplY3QvdHlwZXMnO1xuXG5pbXBvcnQgeyBfQXNzZXRUeXBlIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IEV2bVByb3ZpZGVyRXJyb3IgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvZXJyb3JzL0V2bVByb3ZpZGVyRXJyb3InO1xuaW1wb3J0IHsgd2l0aEVycm9yTG9nIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL2hhbmRsZXJzL2hlbHBlcnMnO1xuaW1wb3J0IHsgQXV0aFVybEluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvaGFuZGxlcnMvU3RhdGUnO1xuaW1wb3J0IHsgY3JlYXRlU3Vic2NyaXB0aW9uLCB1bnN1YnNjcmliZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9oYW5kbGVycy9zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7IEFkZE5ldHdvcmtSZXF1ZXN0RXh0ZXJuYWwsIEFkZFRva2VuUmVxdWVzdEV4dGVybmFsLCBFdm1BcHBTdGF0ZSwgRXZtRXZlbnRUeXBlLCBFdm1Qcm92aWRlckVycm9yVHlwZSwgRXZtU2VuZFRyYW5zYWN0aW9uUGFyYW1zLCBQYXNzUGhpc2hpbmcsIFJlcXVlc3RBZGRQc3BUb2tlbiwgUmVxdWVzdEV2bVByb3ZpZGVyU2VuZCwgUmVxdWVzdFNldHRpbmdzVHlwZSwgVmFsaWRhdGVOZXR3b3JrUmVzcG9uc2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCBSZXF1ZXN0Qnl0ZXNTaWduIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9SZXF1ZXN0Qnl0ZXNTaWduJztcbmltcG9ydCBSZXF1ZXN0RXh0cmluc2ljU2lnbiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvUmVxdWVzdEV4dHJpbnNpY1NpZ24nO1xuaW1wb3J0IHsgQWNjb3VudEF1dGhUeXBlLCBNZXNzYWdlVHlwZXMsIFJlcXVlc3RBY2NvdW50TGlzdCwgUmVxdWVzdEFjY291bnRTdWJzY3JpYmUsIFJlcXVlc3RBY2NvdW50VW5zdWJzY3JpYmUsIFJlcXVlc3RBdXRob3JpemVUYWIsIFJlcXVlc3RScGNTZW5kLCBSZXF1ZXN0UnBjU3Vic2NyaWJlLCBSZXF1ZXN0UnBjVW5zdWJzY3JpYmUsIFJlcXVlc3RUeXBlcywgUmVzcG9uc2VScGNMaXN0UHJvdmlkZXJzLCBSZXNwb25zZVNpZ25pbmcsIFJlc3BvbnNlVHlwZXMsIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC90eXBlcyc7XG5pbXBvcnQgeyBBTExfQUNDT1VOVF9LRVksIENST05fR0VUX0FQSV9NQVBfU1RBVFVTIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgUEhJU0hJTkdfUEFHRV9SRURJUkVDVCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvZGVmYXVsdHMnO1xuaW1wb3J0IEtvbmlTdGF0ZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYmFja2dyb3VuZC9oYW5kbGVycy9TdGF0ZSc7XG5pbXBvcnQgeyBfQ0hBSU5fVkFMSURBVElPTl9FUlJPUiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL3R5cGVzJztcbmltcG9ydCB7IF9OZXR3b3JrVXBzZXJ0UGFyYW1zIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IF9nZW5lcmF0ZUN1c3RvbVByb3ZpZGVyS2V5IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3V0aWxzJztcbmltcG9ydCB7IEF1dGhVcmxzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9yZXF1ZXN0LXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9DSEFJTl9QQVRST0xfRU5BQkxFIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zZXR0aW5nLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IGNhbkRlcml2ZSwgc3RyaXBVcmwgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzJztcbmltcG9ydCB7IEluamVjdGVkTWV0YWRhdGFLbm93biwgTWV0YWRhdGFEZWYsIFByb3ZpZGVyTWV0YSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWluamVjdC90eXBlcyc7XG5pbXBvcnQgeyBLZXlyaW5nUGFpciB9IGZyb20gJ0BzdWJ3YWxsZXQva2V5cmluZy90eXBlcyc7XG5pbXBvcnQga2V5cmluZyBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcnO1xuaW1wb3J0IHsgU2luZ2xlQWRkcmVzcywgU3ViamVjdEluZm8gfSBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcvb2JzZXJ2YWJsZS90eXBlcyc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCBXZWIzIGZyb20gJ3dlYjMnO1xuaW1wb3J0IHsgSHR0cFByb3ZpZGVyLCBSZXF1ZXN0QXJndW1lbnRzLCBXZWJzb2NrZXRQcm92aWRlciB9IGZyb20gJ3dlYjMtY29yZSc7XG5pbXBvcnQgeyBKc29uUnBjUGF5bG9hZCB9IGZyb20gJ3dlYjMtY29yZS1oZWxwZXJzJztcblxuaW1wb3J0IHsgY2hlY2tJZkRlbmllZCB9IGZyb20gJ0Bwb2xrYWRvdC9waGlzaGluZyc7XG5pbXBvcnQgeyBKc29uUnBjUmVzcG9uc2UgfSBmcm9tICdAcG9sa2Fkb3QvcnBjLXByb3ZpZGVyL3R5cGVzJztcbmltcG9ydCB7IFNpZ25lclBheWxvYWRKU09OLCBTaWduZXJQYXlsb2FkUmF3IH0gZnJvbSAnQHBvbGthZG90L3R5cGVzL3R5cGVzJztcbmltcG9ydCB7IGFzc2VydCwgaXNOdW1iZXIgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5cbmludGVyZmFjZSBBY2NvdW50U3ViIHtcbiAgc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHVybDogc3RyaW5nO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1BY2NvdW50c1YyIChhY2NvdW50czogU3ViamVjdEluZm8sIGFueVR5cGUgPSBmYWxzZSwgYXV0aEluZm8/OiBBdXRoVXJsSW5mbywgYWNjb3VudEF1dGhUeXBlPzogQWNjb3VudEF1dGhUeXBlKTogSW5qZWN0ZWRBY2NvdW50W10ge1xuICBjb25zdCBhY2NvdW50U2VsZWN0ZWQgPSBhdXRoSW5mb1xuICAgID8gKFxuICAgICAgYXV0aEluZm8uaXNBbGxvd2VkXG4gICAgICAgID8gKFxuICAgICAgICAgIE9iamVjdC5rZXlzKGF1dGhJbmZvLmlzQWxsb3dlZE1hcClcbiAgICAgICAgICAgIC5maWx0ZXIoKGFkZHJlc3MpID0+IGF1dGhJbmZvLmlzQWxsb3dlZE1hcFthZGRyZXNzXSlcbiAgICAgICAgKVxuICAgICAgICA6IFtdXG4gICAgKVxuICAgIDogW107XG5cbiAgbGV0IGF1dGhUeXBlRmlsdGVyID0gKHsgdHlwZSB9OiBTaW5nbGVBZGRyZXNzKSA9PiB0cnVlO1xuXG4gIGlmIChhY2NvdW50QXV0aFR5cGUgPT09ICdzdWJzdHJhdGUnKSB7XG4gICAgYXV0aFR5cGVGaWx0ZXIgPSAoeyB0eXBlIH06IFNpbmdsZUFkZHJlc3MpID0+ICh0eXBlICE9PSAnZXRoZXJldW0nKTtcbiAgfSBlbHNlIGlmIChhY2NvdW50QXV0aFR5cGUgPT09ICdldm0nKSB7XG4gICAgYXV0aFR5cGVGaWx0ZXIgPSAoeyB0eXBlIH06IFNpbmdsZUFkZHJlc3MpID0+ICh0eXBlID09PSAnZXRoZXJldW0nKTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3RcbiAgICAudmFsdWVzKGFjY291bnRzKVxuICAgIC5maWx0ZXIoKHsganNvbjogeyBtZXRhOiB7IGlzSGlkZGVuIH0gfSB9KSA9PiAhaXNIaWRkZW4pXG4gICAgLmZpbHRlcigoeyB0eXBlIH0pID0+IGFueVR5cGUgPyB0cnVlIDogY2FuRGVyaXZlKHR5cGUpKVxuICAgIC5maWx0ZXIoYXV0aFR5cGVGaWx0ZXIpXG4gICAgLmZpbHRlcigoeyBqc29uOiB7IGFkZHJlc3MgfSB9KSA9PiBhY2NvdW50U2VsZWN0ZWQuaW5jbHVkZXMoYWRkcmVzcykpXG4gICAgLnNvcnQoKGEsIGIpID0+IChhLmpzb24ubWV0YS53aGVuQ3JlYXRlZCB8fCAwKSAtIChiLmpzb24ubWV0YS53aGVuQ3JlYXRlZCB8fCAwKSlcbiAgICAubWFwKCh7IGpzb246IHsgYWRkcmVzcywgbWV0YTogeyBnZW5lc2lzSGFzaCwgbmFtZSB9IH0sIHR5cGUgfSk6IEluamVjdGVkQWNjb3VudCA9PiAoe1xuICAgICAgYWRkcmVzcyxcbiAgICAgIGdlbmVzaXNIYXNoLFxuICAgICAgbmFtZSxcbiAgICAgIHR5cGVcbiAgICB9KSk7XG59XG5cbmludGVyZmFjZSBDaGFpblBhdHJvbFJlc3BvbnNlIHtcbiAgcmVhc29uOiBzdHJpbmc7XG4gIHJlcG9ydHM6IEFycmF5PHsgY3JlYXRlZEF0OiBzdHJpbmcsIGlkOiBudW1iZXIgfT47XG4gIHN0YXR1czogJ1VOS05PV04nIHwgJ0FMTE9XRUQnIHwgJ0JMT0NLRUQnO1xufVxuXG4vLyBjaGVjayBpZiBhIFVSTCBpcyBibG9ja2VkXG5leHBvcnQgY29uc3QgY2hhaW5QYXRyb2xDaGVja1VybCA9IGFzeW5jICh1cmw6IHN0cmluZykgPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICdodHRwczovL2FwcC5jaGFpbnBhdHJvbC5pby9hcGkvdjIvYXNzZXQvY2hlY2snLFxuICAgIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnWC1BUEktS0VZJzogJ2U1ZTg4Y2QwLTc5OTQtNDY2Ny05MDcxLWJhYjg0OWMyYmE3MSdcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdVUkwnLCBjb250ZW50OiB1cmwgfSlcbiAgICB9XG4gICk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkgYXMgQ2hhaW5QYXRyb2xSZXNwb25zZTtcblxuICByZXR1cm4gZGF0YS5zdGF0dXMgPT09ICdCTE9DS0VEJztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtvbmlUYWJzIHtcbiAgcmVhZG9ubHkgI2FjY291bnRTdWJzOiBSZWNvcmQ8c3RyaW5nLCBBY2NvdW50U3ViPiA9IHt9O1xuXG4gIHJlYWRvbmx5ICNrb25pU3RhdGU6IEtvbmlTdGF0ZTtcblxuICBwcml2YXRlIGV2bUV2ZW50RW1pdHRlck1hcDogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgKGV2ZW50TmFtZTogRXZtRXZlbnRUeXBlLCBwYXlsb2FkOiBhbnkpID0+IHZvaWQ+PiA9IHt9O1xuICAjY2hhaW5QYXRyb2xTZXJ2aWNlOiBib29sZWFuID0gREVGQVVMVF9DSEFJTl9QQVRST0xfRU5BQkxFO1xuICAjcGFzc1BoaXNoaW5nOiBSZWNvcmQ8c3RyaW5nLCBQYXNzUGhpc2hpbmc+ID0ge307XG5cbiAgY29uc3RydWN0b3IgKGtvbmlTdGF0ZTogS29uaVN0YXRlKSB7XG4gICAgdGhpcy4ja29uaVN0YXRlID0ga29uaVN0YXRlO1xuXG4gICAgY29uc3QgdXBkYXRlQ2hhaW5QYXRyb2xTZXJ2aWNlID0gKHJzOiBSZXF1ZXN0U2V0dGluZ3NUeXBlKSA9PiB7XG4gICAgICB0aGlzLiNjaGFpblBhdHJvbFNlcnZpY2UgPSBycy5lbmFibGVDaGFpblBhdHJvbDtcbiAgICB9O1xuXG4gICAgdGhpcy4ja29uaVN0YXRlLnNldHRpbmdTZXJ2aWNlLmdldFNldHRpbmdzKHVwZGF0ZUNoYWluUGF0cm9sU2VydmljZSk7XG4gICAgdGhpcy4ja29uaVN0YXRlLnNldHRpbmdTZXJ2aWNlLmdldFN1YmplY3QoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogdXBkYXRlQ2hhaW5QYXRyb2xTZXJ2aWNlXG4gICAgfSk7XG5cbiAgICBjb25zdCB1cGRhdGVQYXNzUGhpc2hpbmcgPSAocnM6IFJlY29yZDxzdHJpbmcsIFBhc3NQaGlzaGluZz4pID0+IHtcbiAgICAgIHRoaXMuI3Bhc3NQaGlzaGluZyA9IHJzO1xuICAgIH07XG5cbiAgICB0aGlzLiNrb25pU3RhdGUuc2V0dGluZ1NlcnZpY2UuZ2V0UGFzc1BoaXNoaW5nTGlzdCh1cGRhdGVQYXNzUGhpc2hpbmcpO1xuICAgIHRoaXMuI2tvbmlTdGF0ZS5zZXR0aW5nU2VydmljZS5wYXNzUGhpc2hpbmdTdWJqZWN0KCkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IHVwZGF0ZVBhc3NQaGlzaGluZ1xuICAgIH0pO1xuICB9XG5cbiAgLy8vIENsb25lIGZyb20gUG9sa2Fkb3QuanNcbiAgcHJpdmF0ZSBnZXRTaWduaW5nUGFpciAoYWRkcmVzczogc3RyaW5nKTogS2V5cmluZ1BhaXIge1xuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBhc3NlcnQocGFpciwgdCgnVW5hYmxlIHRvIGZpbmQgYWNjb3VudCcpKTtcblxuICAgIHJldHVybiBwYWlyO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBieXRlc1NpZ24gKHVybDogc3RyaW5nLCByZXF1ZXN0OiBTaWduZXJQYXlsb2FkUmF3KTogUHJvbWlzZTxSZXNwb25zZVNpZ25pbmc+IHtcbiAgICBjb25zdCBhZGRyZXNzID0gcmVxdWVzdC5hZGRyZXNzO1xuICAgIGNvbnN0IHBhaXIgPSB0aGlzLmdldFNpZ25pbmdQYWlyKGFkZHJlc3MpO1xuICAgIGNvbnN0IGF1dGhJbmZvID0gYXdhaXQgdGhpcy5nZXRBdXRoSW5mbyh1cmwpO1xuXG4gICAgaWYgKCFhdXRoSW5mbyB8fCAhYXV0aEluZm8uaXNBbGxvd2VkIHx8ICFhdXRoSW5mby5pc0FsbG93ZWRNYXBbcGFpci5hZGRyZXNzXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY2NvdW50IHt7YWRkcmVzc319IG5vdCBpbiBhbGxvd2VkIGxpc3QnLnJlcGxhY2UoJ3t7YWRkcmVzc319JywgYWRkcmVzcykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUuc2lnbih1cmwsIG5ldyBSZXF1ZXN0Qnl0ZXNTaWduKHJlcXVlc3QpLCB7IGFkZHJlc3MsIC4uLnBhaXIubWV0YSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXh0cmluc2ljU2lnbiAodXJsOiBzdHJpbmcsIHJlcXVlc3Q6IFNpZ25lclBheWxvYWRKU09OKTogUHJvbWlzZTxSZXNwb25zZVNpZ25pbmc+IHtcbiAgICBjb25zdCBhZGRyZXNzID0gcmVxdWVzdC5hZGRyZXNzO1xuICAgIGNvbnN0IHBhaXIgPSB0aGlzLmdldFNpZ25pbmdQYWlyKGFkZHJlc3MpO1xuICAgIGNvbnN0IGF1dGhJbmZvID0gYXdhaXQgdGhpcy5nZXRBdXRoSW5mbyh1cmwpO1xuXG4gICAgaWYgKCFhdXRoSW5mbyB8fCAhYXV0aEluZm8uaXNBbGxvd2VkIHx8ICFhdXRoSW5mby5pc0FsbG93ZWRNYXBbcGFpci5hZGRyZXNzXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY2NvdW50IHt7YWRkcmVzc319IG5vdCBpbiBhbGxvd2VkIGxpc3QnLnJlcGxhY2UoJ3t7YWRkcmVzc319JywgYWRkcmVzcykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLiNrb25pU3RhdGUuc2lnbih1cmwsIG5ldyBSZXF1ZXN0RXh0cmluc2ljU2lnbihyZXF1ZXN0KSwgeyBhZGRyZXNzLCAuLi5wYWlyLm1ldGEgfSk7XG4gIH1cblxuICBwcml2YXRlIG1ldGFkYXRhUHJvdmlkZSAodXJsOiBzdHJpbmcsIHJlcXVlc3Q6IE1ldGFkYXRhRGVmKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5pbmplY3RNZXRhZGF0YSh1cmwsIHJlcXVlc3QpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICBwcml2YXRlIG1ldGFkYXRhTGlzdCAodXJsOiBzdHJpbmcpOiBJbmplY3RlZE1ldGFkYXRhS25vd25bXSB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5rbm93bk1ldGFkYXRhLm1hcCgoeyBnZW5lc2lzSGFzaCwgc3BlY1ZlcnNpb24gfSkgPT4gKHtcbiAgICAgIGdlbmVzaXNIYXNoLFxuICAgICAgc3BlY1ZlcnNpb25cbiAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIHJwY0xpc3RQcm92aWRlcnMgKCk6IFByb21pc2U8UmVzcG9uc2VScGNMaXN0UHJvdmlkZXJzPiB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5ycGNMaXN0UHJvdmlkZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHJwY1NlbmQgKHJlcXVlc3Q6IFJlcXVlc3RScGNTZW5kLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxKc29uUnBjUmVzcG9uc2U8dW5rbm93bj4+IHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnJwY1NlbmQocmVxdWVzdCwgcG9ydCk7XG4gIH1cblxuICBwcml2YXRlIHJwY1N0YXJ0UHJvdmlkZXIgKGtleTogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxQcm92aWRlck1ldGE+IHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnJwY1N0YXJ0UHJvdmlkZXIoa2V5LCBwb3J0KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnBjU3Vic2NyaWJlIChyZXF1ZXN0OiBSZXF1ZXN0UnBjU3Vic2NyaWJlLCBpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgaW5uZXJDYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwncHViKHJwYy5zdWJzY3JpYmUpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IGNiID0gKF9lcnJvcjogRXJyb3IgfCBudWxsLCBkYXRhOiBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZXNbJ3B1YihycGMuc3Vic2NyaWJlKSddKTogdm9pZCA9PiBpbm5lckNiKGRhdGEpO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbklkID0gYXdhaXQgdGhpcy4ja29uaVN0YXRlLnJwY1N1YnNjcmliZShyZXF1ZXN0LCBjYiwgcG9ydCk7XG5cbiAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKTogdm9pZCA9PiB7XG4gICAgICB1bnN1YnNjcmliZShpZCk7XG4gICAgICB3aXRoRXJyb3JMb2coKCkgPT4gdGhpcy5ycGNVbnN1YnNjcmliZSh7IC4uLnJlcXVlc3QsIHN1YnNjcmlwdGlvbklkIH0sIHBvcnQpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBycGNTdWJzY3JpYmVDb25uZWN0ZWQgKHJlcXVlc3Q6IG51bGwsIGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBpbm5lckNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwdWIocnBjLnN1YnNjcmliZUNvbm5lY3RlZCknPihpZCwgcG9ydCk7XG4gICAgY29uc3QgY2IgPSAoX2Vycm9yOiBFcnJvciB8IG51bGwsIGRhdGE6IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlc1sncHViKHJwYy5zdWJzY3JpYmVDb25uZWN0ZWQpJ10pOiB2b2lkID0+IGlubmVyQ2IoZGF0YSk7XG5cbiAgICB0aGlzLiNrb25pU3RhdGUucnBjU3Vic2NyaWJlQ29ubmVjdGVkKHJlcXVlc3QsIGNiLCBwb3J0KTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHVuc3Vic2NyaWJlKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJwY1Vuc3Vic2NyaWJlIChyZXF1ZXN0OiBSZXF1ZXN0UnBjVW5zdWJzY3JpYmUsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLnJwY1Vuc3Vic2NyaWJlKHJlcXVlc3QsIHBvcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWRpcmVjdFBoaXNoaW5nTGFuZGluZyAocGhpc2hpbmdXZWJzaXRlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub25GcmFnbWVudCA9IHBoaXNoaW5nV2Vic2l0ZS5zcGxpdCgnIycpWzBdO1xuICAgIGNvbnN0IGVuY29kZWRXZWJzaXRlID0gZW5jb2RlVVJJQ29tcG9uZW50KG5vbkZyYWdtZW50KTtcbiAgICBjb25zdCB1cmwgPSBgJHtjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnaW5kZXguaHRtbCcpfSMke1BISVNISU5HX1BBR0VfUkVESVJFQ1R9LyR7ZW5jb2RlZFdlYnNpdGV9YDtcblxuICAgIGNocm9tZS50YWJzLnF1ZXJ5KHsgdXJsOiBub25GcmFnbWVudCB9LCAodGFicykgPT4ge1xuICAgICAgdGFic1xuICAgICAgICAubWFwKCh7IGlkIH0pID0+IGlkKVxuICAgICAgICAuZmlsdGVyKChpZCk6IGlkIGlzIG51bWJlciA9PiBpc051bWJlcihpZCkpXG4gICAgICAgIC5mb3JFYWNoKChpZCkgPT5cbiAgICAgICAgICB3aXRoRXJyb3JMb2coKCkgPT4gY2hyb21lLnRhYnMudXBkYXRlKGlkLCB7IHVybCB9KSlcbiAgICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tQYXNzTGlzdCAoX3VybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdXJsID0gc3RyaXBVcmwoX3VybCk7XG5cbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLiNwYXNzUGhpc2hpbmdbdXJsXTtcblxuICAgIHJldHVybiByZXN1bHQgPyAhcmVzdWx0LnBhc3MgOiB0cnVlO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGNoZWNrUGhpc2hpbmcgKHVybDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgaXNJbkRlbnlMaXN0ID0gYXdhaXQgY2hlY2tJZkRlbmllZCh1cmwpO1xuXG4gICAgaWYgKGlzSW5EZW55TGlzdCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2hlY2tQYXNzTGlzdCh1cmwpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLiNjaGFpblBhdHJvbFNlcnZpY2UpIHtcbiAgICAgIGNvbnN0IGlzSW5DaGFpblBhdHJvbERlbnlMaXN0ID0gYXdhaXQgY2hhaW5QYXRyb2xDaGVja1VybCh1cmwpO1xuXG4gICAgICBpZiAoaXNJbkNoYWluUGF0cm9sRGVueUxpc3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tQYXNzTGlzdCh1cmwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyByZWRpcmVjdElmUGhpc2hpbmcgKHVybDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jaGVja1BoaXNoaW5nKHVybCk7XG5cbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICB0aGlzLnJlZGlyZWN0UGhpc2hpbmdMYW5kaW5nKHVybCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vL1xuXG4gIHByaXZhdGUgY2FuY2VsU3Vic2NyaXB0aW9uIChpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2tvbmlTdGF0ZS5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZSAoaWQ6IHN0cmluZywgdW5zdWJzY3JpYmU6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLiNrb25pU3RhdGUuY3JlYXRlVW5zdWJzY3JpcHRpb25IYW5kbGUoaWQsIHVuc3Vic2NyaWJlKTtcbiAgfVxuXG4gIGFzeW5jIGdldEF1dGhJbmZvICh1cmw6IHN0cmluZywgZnJvbUxpc3Q/OiBBdXRoVXJscyk6IFByb21pc2U8QXV0aFVybEluZm8gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBhdXRoTGlzdCA9IGZyb21MaXN0IHx8IChhd2FpdCB0aGlzLiNrb25pU3RhdGUuZ2V0QXV0aExpc3QoKSk7XG4gICAgY29uc3Qgc2hvcnRlblVybCA9IHN0cmlwVXJsKHVybCk7XG5cbiAgICByZXR1cm4gYXV0aExpc3Rbc2hvcnRlblVybF07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFjY291bnRzTGlzdFYyICh1cmw6IHN0cmluZywgeyBhY2NvdW50QXV0aFR5cGUsXG4gICAgYW55VHlwZSB9OiBSZXF1ZXN0QWNjb3VudExpc3QpOiBQcm9taXNlPEluamVjdGVkQWNjb3VudFtdPiB7XG4gICAgY29uc3QgYXV0aEluZm8gPSBhd2FpdCB0aGlzLmdldEF1dGhJbmZvKHVybCk7XG5cbiAgICByZXR1cm4gdHJhbnNmb3JtQWNjb3VudHNWMih0aGlzLiNrb25pU3RhdGUua2V5cmluZ1NlcnZpY2UuYWNjb3VudHMsIGFueVR5cGUsIGF1dGhJbmZvLCBhY2NvdW50QXV0aFR5cGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBhY2NvdW50c1N1YnNjcmliZVYyICh1cmw6IHN0cmluZywgeyBhY2NvdW50QXV0aFR5cGUgfTogUmVxdWVzdEFjY291bnRTdWJzY3JpYmUsIGlkOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNiID0gY3JlYXRlU3Vic2NyaXB0aW9uPCdwdWIoYWNjb3VudHMuc3Vic2NyaWJlVjIpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IGF1dGhJbmZvU3ViamVjdCA9IHRoaXMuI2tvbmlTdGF0ZS5yZXF1ZXN0U2VydmljZS5zdWJzY3JpYmVBdXRob3JpemVVcmxTdWJqZWN0O1xuXG4gICAgLy8gVXBkYXRlIHVuc3Vic2NyaWJlIGZyb20gQHBvbGthZG90L2V4dGVuc2lvbi1iYXNlXG4gICAgdGhpcy4jYWNjb3VudFN1YnNbaWRdID0ge1xuICAgICAgc3Vic2NyaXB0aW9uOiBhdXRoSW5mb1N1YmplY3Quc3Vic2NyaWJlKChpbmZvczogQXV0aFVybHMpID0+IHtcbiAgICAgICAgdGhpcy5nZXRBdXRoSW5mbyh1cmwsIGluZm9zKVxuICAgICAgICAgIC50aGVuKChhdXRoSW5mbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudHMgPSB0aGlzLiNrb25pU3RhdGUua2V5cmluZ1NlcnZpY2UuYWNjb3VudHM7XG5cbiAgICAgICAgICAgIHJldHVybiBjYih0cmFuc2Zvcm1BY2NvdW50c1YyKGFjY291bnRzLCBmYWxzZSwgYXV0aEluZm8sIGFjY291bnRBdXRoVHlwZSkpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfSksXG4gICAgICB1cmxcbiAgICB9O1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5hY2NvdW50c1Vuc3Vic2NyaWJlKHVybCwgeyBpZCB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpZDtcbiAgfVxuXG4gIHByaXZhdGUgYWNjb3VudHNVbnN1YnNjcmliZSAodXJsOiBzdHJpbmcsIHsgaWQgfTogUmVxdWVzdEFjY291bnRVbnN1YnNjcmliZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHN1YiA9IHRoaXMuI2FjY291bnRTdWJzW2lkXTtcblxuICAgIGlmICghc3ViIHx8IHN1Yi51cmwgIT09IHVybCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLiNhY2NvdW50U3Vic1tpZF07XG5cbiAgICB1bnN1YnNjcmliZShpZCk7XG4gICAgc3ViLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGF1dGhvcml6ZVYyICh1cmw6IHN0cmluZywgcmVxdWVzdDogUmVxdWVzdEF1dGhvcml6ZVRhYik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmIChyZXF1ZXN0LmFjY291bnRBdXRoVHlwZSA9PT0gJ2V2bScpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5hdXRob3JpemVVcmxWMih1cmwsIHJlcXVlc3QpLnRoZW4ocmVzb2x2ZSkuY2F0Y2goKGU6IEVycm9yKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLlVTRVJfUkVKRUNURURfUkVRVUVTVCkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy4ja29uaVN0YXRlLmF1dGhvcml6ZVVybFYyKHVybCwgcmVxdWVzdCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRFdm1DdXJyZW50QWNjb3VudCAodXJsOiBzdHJpbmcsIGdldEFsbCA9IGZhbHNlKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5nZXRBdXRoSW5mbyh1cmwpLnRoZW4oKGF1dGhJbmZvKSA9PiB7XG4gICAgICAgIGNvbnN0IGFsbEFjY291bnRzID0gdGhpcy4ja29uaVN0YXRlLmtleXJpbmdTZXJ2aWNlLmFjY291bnRzO1xuICAgICAgICBjb25zdCBhY2NvdW50TGlzdCA9IHRyYW5zZm9ybUFjY291bnRzVjIoYWxsQWNjb3VudHMsIGZhbHNlLCBhdXRoSW5mbywgJ2V2bScpLm1hcCgoYSkgPT4gYS5hZGRyZXNzKTtcbiAgICAgICAgbGV0IGFjY291bnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLiNrb25pU3RhdGUua2V5cmluZ1NlcnZpY2UuY3VycmVudEFjY291bnQuYWRkcmVzcztcblxuICAgICAgICBpZiAoYWRkcmVzcyA9PT0gQUxMX0FDQ09VTlRfS0VZIHx8ICFhY2NvdW50TGlzdC5pbmNsdWRlcyhhZGRyZXNzKSB8fCBnZXRBbGwpIHtcbiAgICAgICAgICBhY2NvdW50cyA9IGFjY291bnRMaXN0O1xuICAgICAgICB9IGVsc2UgaWYgKGFkZHJlc3MgJiYgYWNjb3VudExpc3QuaW5jbHVkZXMoYWRkcmVzcykpIHtcbiAgICAgICAgICBhY2NvdW50cyA9IChbYWRkcmVzc10pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzb2x2ZShhY2NvdW50cyk7XG4gICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0RXZtU3RhdGUgKHVybD86IHN0cmluZyk6IFByb21pc2U8RXZtQXBwU3RhdGU+IHtcbiAgICBsZXQgY3VycmVudENoYWluOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGF1dG9BY3RpdmVDaGFpbiA9IGZhbHNlO1xuXG4gICAgaWYgKHVybCkge1xuICAgICAgY29uc3QgYXV0aEluZm8gPSBhd2FpdCB0aGlzLmdldEF1dGhJbmZvKHVybCk7XG5cbiAgICAgIGlmIChhdXRoSW5mbz8uY3VycmVudEV2bU5ldHdvcmtLZXkpIHtcbiAgICAgICAgY3VycmVudENoYWluID0gYXV0aEluZm8/LmN1cnJlbnRFdm1OZXR3b3JrS2V5O1xuICAgICAgfVxuXG4gICAgICBpZiAoYXV0aEluZm8/LmlzQWxsb3dlZCkge1xuICAgICAgICBhdXRvQWN0aXZlQ2hhaW4gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRFdm1OZXR3b3JrID0gdGhpcy4ja29uaVN0YXRlLnJlcXVlc3RTZXJ2aWNlLmdldERBcHBDaGFpbkluZm8oe1xuICAgICAgYXV0b0FjdGl2ZTogYXV0b0FjdGl2ZUNoYWluLFxuICAgICAgYWNjZXNzVHlwZTogJ2V2bScsXG4gICAgICBkZWZhdWx0Q2hhaW46IGN1cnJlbnRDaGFpbixcbiAgICAgIHVybFxuICAgIH0pO1xuXG4gICAgaWYgKGN1cnJlbnRFdm1OZXR3b3JrKSB7XG4gICAgICBjb25zdCB7IGV2bUluZm8sIHNsdWcgfSA9IGN1cnJlbnRFdm1OZXR3b3JrO1xuICAgICAgY29uc3QgZXZtQXBpID0gdGhpcy4ja29uaVN0YXRlLmdldEV2bUFwaShzbHVnKTtcbiAgICAgIGNvbnN0IHdlYjMgPSBldm1BcGk/LmFwaTtcblxuICAgICAgaWYgKHdlYjM/LmN1cnJlbnRQcm92aWRlciBpbnN0YW5jZW9mIFdlYjMucHJvdmlkZXJzLldlYnNvY2tldFByb3ZpZGVyKSB7XG4gICAgICAgIGlmICghd2ViMy5jdXJyZW50UHJvdmlkZXIuY29ubmVjdGVkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYCR7c2x1Z30gaXMgZGlzY29ubmVjdGVkLCB0cnlpbmcgdG8gY29ubmVjdC4uLmApO1xuICAgICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5yZWZyZXNoV2ViM0FwaShzbHVnKTtcbiAgICAgICAgICBsZXQgY2hlY2tpbmdOdW0gPSAwO1xuXG4gICAgICAgICAgY29uc3QgcG9sbCA9IChyZXNvbHZlOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpID0+IHtcbiAgICAgICAgICAgIGNoZWNraW5nTnVtICs9IDE7XG5cbiAgICAgICAgICAgIGlmICgod2ViMy5jdXJyZW50UHJvdmlkZXIgYXMgV2Vic29ja2V0UHJvdmlkZXIpLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtzbHVnfSBpcyBjb25uZWN0ZWQuYCk7XG4gICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQ29ubmVjdGluZyB0byBuZXR3b3JrIFske3NsdWd9XWApO1xuXG4gICAgICAgICAgICAgIGlmIChjaGVja2luZ051bSA8IDEwKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBwb2xsKHJlc29sdmUpLCA5MDApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNYXggcmV0cnksIHN0b3AgY2hlY2tpbmcgWyR7c2x1Z31dYCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocG9sbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV0d29ya0tleTogc2x1ZyxcbiAgICAgICAgY2hhaW5JZDogYDB4JHsoZXZtSW5mbz8uZXZtQ2hhaW5JZCB8fCAwKS50b1N0cmluZygxNil9YCxcbiAgICAgICAgd2ViM1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0RXZtUGVybWlzc2lvbiAodXJsOiBzdHJpbmcsIGlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHRoaXMuZ2V0RXZtQ3VycmVudEFjY291bnQodXJsLCB0cnVlKTtcblxuICAgIHJldHVybiBbe1xuICAgICAgaWQ6IGlkLFxuICAgICAgaW52b2tlcjogdXJsLFxuICAgICAgcGFyZW50Q2FwYWJpbGl0eTogJ2V0aF9hY2NvdW50cycsXG4gICAgICBjYXZlYXRzOiBbeyB0eXBlOiAncmVzdHJpY3RSZXR1cm5lZEFjY291bnRzJywgdmFsdWU6IGFjY291bnRzIH1dLFxuICAgICAgZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICB9XTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3dpdGNoRXZtQ2hhaW4gKGlkOiBzdHJpbmcsIHVybDogc3RyaW5nLCB7IHBhcmFtcyB9OiBSZXF1ZXN0QXJndW1lbnRzKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgIGNvbnN0IGNoYWluSWQgPSBwYXJhbXNbMF0uY2hhaW5JZCBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBldm1TdGF0ZSA9IGF3YWl0IHRoaXMuZ2V0RXZtU3RhdGUodXJsKTtcblxuICAgIGlmIChldm1TdGF0ZS5jaGFpbklkID09PSBjaGFpbklkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBbbmV0d29ya0tleV0gPSB0aGlzLiNrb25pU3RhdGUuZmluZE5ldHdvcmtLZXlCeUNoYWluSWQocGFyc2VJbnQoY2hhaW5JZCwgMTYpKTtcblxuICAgIGlmIChuZXR3b3JrS2V5KSB7XG4gICAgICBhd2FpdCB0aGlzLiNrb25pU3RhdGUuc3dpdGNoRXZtTmV0d29ya0J5VXJsKHN0cmlwVXJsKHVybCksIG5ldHdvcmtLZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXZtUHJvdmlkZXJFcnJvcihFdm1Qcm92aWRlckVycm9yVHlwZS5JTlZBTElEX1BBUkFNUywgJ1RoaXMgbmV0d29yayBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhZGRFdm1Ub2tlbiAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIHsgcGFyYW1zIH06IFJlcXVlc3RBcmd1bWVudHMpIHtcbiAgICBjb25zdCBpbnB1dCA9IHBhcmFtcyBhcyB7XG4gICAgICB0eXBlOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgYWRkcmVzczogc3RyaW5nXG4gICAgICAgIGRlY2ltYWxzOiBudW1iZXJcbiAgICAgICAgaW1hZ2U6IHN0cmluZ1xuICAgICAgICBzeW1ib2w6IHN0cmluZ1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBfdG9rZW5UeXBlID0gaW5wdXQ/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgJyc7XG5cbiAgICBpZiAoX3Rva2VuVHlwZSAhPT0gJ2VyYzIwJyAmJiBfdG9rZW5UeXBlICE9PSAnZXJjNzIxJykge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsICdBc3NldHMgdHlwZSB7e3Rva2VuVHlwZX19IGlzIG5vdCBzdXBwb3J0ZWQnLnJlcGxhY2UoJ3t7dG9rZW5UeXBlfX0nLCBfdG9rZW5UeXBlKSk7XG4gICAgfVxuXG4gICAgaWYgKCFpbnB1dD8ub3B0aW9ucz8uYWRkcmVzcyB8fCAhaW5wdXQ/Lm9wdGlvbnM/LnN5bWJvbCkge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsICdVbmFibGUgdG8gZ2V0IGNvbnRyYWN0IGFkZHJlc3MgYW5kIHRva2VuIHN5bWJvbCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGV2bVN0YXRlID0gYXdhaXQgdGhpcy5nZXRFdm1TdGF0ZSh1cmwpO1xuICAgIGNvbnN0IGNoYWluID0gZXZtU3RhdGUubmV0d29ya0tleTtcblxuICAgIGlmICghY2hhaW4pIHtcbiAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SLCAnVGhlIG5ldHdvcmsgb24gZEFwcCBpcyBub3Qgc3VwcG9ydGVkIGluIHdhbGxldC4gUGxlYXNlIG1hbnVhbGx5IGFkZCB0aGUgbmV0d29yayB0byB3YWxsZXQnKTtcbiAgICB9XG5cbiAgICBjb25zdCB0b2tlblR5cGUgPSBfdG9rZW5UeXBlID09PSAnZXJjMjAnID8gX0Fzc2V0VHlwZS5FUkMyMCA6IF9Bc3NldFR5cGUuRVJDNzIxO1xuXG4gICAgY29uc3QgdG9rZW5JbmZvOiBBZGRUb2tlblJlcXVlc3RFeHRlcm5hbCA9IHtcbiAgICAgIHNsdWc6ICcnLFxuICAgICAgdHlwZTogdG9rZW5UeXBlLFxuICAgICAgbmFtZTogaW5wdXQ/Lm9wdGlvbnM/LnN5bWJvbCB8fCAnJyxcbiAgICAgIGNvbnRyYWN0QWRkcmVzczogaW5wdXQub3B0aW9ucy5hZGRyZXNzLFxuICAgICAgc3ltYm9sOiBpbnB1dD8ub3B0aW9ucz8uc3ltYm9sIHx8ICcnLFxuICAgICAgZGVjaW1hbHM6IGlucHV0Py5vcHRpb25zPy5kZWNpbWFscyB8fCAwLFxuICAgICAgb3JpZ2luQ2hhaW46IGNoYWluLFxuICAgICAgY29udHJhY3RFcnJvcjogZmFsc2UsXG4gICAgICB2YWxpZGF0ZWQ6IGZhbHNlXG4gICAgfTtcblxuICAgIHRoaXMuI2tvbmlTdGF0ZS52YWxpZGF0ZUN1c3RvbUFzc2V0KHtcbiAgICAgIHR5cGU6IHRva2VuVHlwZSxcbiAgICAgIGNvbnRyYWN0QWRkcmVzczogaW5wdXQub3B0aW9ucy5hZGRyZXNzLFxuICAgICAgb3JpZ2luQ2hhaW46IGNoYWluXG4gICAgfSlcbiAgICAgIC50aGVuKCh2YWxpZGF0ZSkgPT4ge1xuICAgICAgICBpZiAodmFsaWRhdGUuY29udHJhY3RFcnJvcikge1xuICAgICAgICAgIHRva2VuSW5mby5jb250cmFjdEVycm9yID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbkluZm8uc2x1ZyA9IHZhbGlkYXRlPy5leGlzdGVkU2x1ZztcbiAgICAgICAgICB0b2tlbkluZm8ubmFtZSA9IHZhbGlkYXRlLm5hbWUgfHwgdG9rZW5JbmZvLm5hbWU7XG4gICAgICAgICAgdG9rZW5JbmZvLnN5bWJvbCA9IHZhbGlkYXRlLnN5bWJvbDtcbiAgICAgICAgICB0b2tlbkluZm8uZGVjaW1hbHMgPSB2YWxpZGF0ZS5kZWNpbWFscztcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIHRva2VuSW5mby5jb250cmFjdEVycm9yID0gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHRva2VuSW5mby52YWxpZGF0ZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5yZXF1ZXN0U2VydmljZS51cGRhdGVDb25maXJtYXRpb24oaWQsICdhZGRUb2tlblJlcXVlc3QnLCB0b2tlbkluZm8pO1xuICAgICAgfSk7XG5cbiAgICAvLyBCZWxvdyBjb2RlIGlzIGNvbW1lbnQgYmVjYXVzZSB3ZSB3aWxsIGhhbmRsZSBleGl0ZWQgdG9rZW4gaW4gdGhlIHVpLXZpZXdcbiAgICAvLyBpZiAodmFsaWRhdGUuaXNFeGlzdCkge1xuICAgIC8vICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5URVJOQUxfRVJST1IsICdDdXJyZW50IHRva2VuIGlzIGV4aXN0ZWQnKTtcbiAgICAvLyB9IGVsc2VcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUuYWRkVG9rZW5Db25maXJtKGlkLCB1cmwsIHRva2VuSW5mbyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFkZEV2bUNoYWluIChpZDogc3RyaW5nLCB1cmw6IHN0cmluZywgeyBwYXJhbXMgfTogUmVxdWVzdEFyZ3VtZW50cykge1xuICAgIGNvbnN0IGlucHV0ID0gcGFyYW1zIGFzIEFkZE5ldHdvcmtSZXF1ZXN0RXh0ZXJuYWxbXTtcblxuICAgIGlmIChpbnB1dCAmJiBpbnB1dC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB7IGJsb2NrRXhwbG9yZXJVcmxzLCBjaGFpbklkLCBjaGFpbk5hbWUsIG5hdGl2ZUN1cnJlbmN5OiB7IGRlY2ltYWxzLCBzeW1ib2wgfSwgcnBjVXJscyB9ID0gaW5wdXRbMF07XG5cbiAgICAgIGlmIChjaGFpbklkKSB7XG4gICAgICAgIGNvbnN0IGNoYWluSWROdW0gPSBwYXJzZUludChjaGFpbklkLCAxNik7XG4gICAgICAgIGNvbnN0IFtleGlzdGVkTmV0d29ya1NsdWcsIGV4aXN0ZWRDaGFpbkluZm9dID0gdGhpcy4ja29uaVN0YXRlLmZpbmROZXR3b3JrS2V5QnlDaGFpbklkKGNoYWluSWROdW0pO1xuXG4gICAgICAgIGlmIChleGlzdGVkTmV0d29ya1NsdWcgJiYgZXhpc3RlZENoYWluSW5mbyAmJiBleGlzdGVkQ2hhaW5JbmZvPy5ldm1JbmZvKSB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc3dpdGNoRXZtQ2hhaW4oaWQsIHVybCwgeyBtZXRob2Q6ICd3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpbicsIHBhcmFtczogW3sgY2hhaW5JZCB9XSB9KTtcbiAgICAgICAgICAvLyBjb25zdCBldm1JbmZvID0gZXhpc3RlZENoYWluSW5mby5ldm1JbmZvO1xuICAgICAgICAgIC8vIGNvbnN0IHN1YnN0cmF0ZUluZm8gPSBleGlzdGVkQ2hhaW5JbmZvLnN1YnN0cmF0ZUluZm87XG4gICAgICAgICAgLy8gY29uc3QgY2hhaW5TdGF0ZSA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRDaGFpblN0YXRlQnlLZXkoZXhpc3RlZE5ldHdvcmtTbHVnKTtcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIHJldHVybiBhd2FpdCB0aGlzLiNrb25pU3RhdGUuYWRkTmV0d29ya0NvbmZpcm0oaWQsIHVybCwge1xuICAgICAgICAgIC8vICAgbW9kZTogJ3VwZGF0ZScsXG4gICAgICAgICAgLy8gICBjaGFpblNwZWM6IHtcbiAgICAgICAgICAvLyAgICAgZXZtQ2hhaW5JZDogZXZtSW5mby5ldm1DaGFpbklkLFxuICAgICAgICAgIC8vICAgICBkZWNpbWFsczogZXZtSW5mby5kZWNpbWFscyxcbiAgICAgICAgICAvLyAgICAgZXhpc3RlbnRpYWxEZXBvc2l0OiBldm1JbmZvLmV4aXN0ZW50aWFsRGVwb3NpdCxcbiAgICAgICAgICAvLyAgICAgZ2VuZXNpc0hhc2g6IHN1YnN0cmF0ZUluZm8/LmdlbmVzaXNIYXNoIHx8ICcnLFxuICAgICAgICAgIC8vICAgICBwYXJhSWQ6IHN1YnN0cmF0ZUluZm8/LnBhcmFJZCB8fCBudWxsLFxuICAgICAgICAgIC8vICAgICBhZGRyZXNzUHJlZml4OiBzdWJzdHJhdGVJbmZvPy5hZGRyZXNzUHJlZml4IHx8IDBcbiAgICAgICAgICAvLyAgIH0sXG4gICAgICAgICAgLy8gICBjaGFpbkVkaXRJbmZvOiB7XG4gICAgICAgICAgLy8gICAgIGJsb2NrRXhwbG9yZXI6IGJsb2NrRXhwbG9yZXJVcmxzPy5bMF0sXG4gICAgICAgICAgLy8gICAgIHNsdWc6IGV4aXN0ZWROZXR3b3JrU2x1ZyxcbiAgICAgICAgICAvLyAgICAgY3VycmVudFByb3ZpZGVyOiBjaGFpblN0YXRlLmN1cnJlbnRQcm92aWRlcixcbiAgICAgICAgICAvLyAgICAgcHJvdmlkZXJzOiBleGlzdGVkQ2hhaW5JbmZvLnByb3ZpZGVycyxcbiAgICAgICAgICAvLyAgICAgc3ltYm9sOiBldm1JbmZvLnN5bWJvbCxcbiAgICAgICAgICAvLyAgICAgY2hhaW5UeXBlOiAnRVZNJyxcbiAgICAgICAgICAvLyAgICAgbmFtZTogZXhpc3RlZENoYWluSW5mby5uYW1lXG4gICAgICAgICAgLy8gICB9XG4gICAgICAgICAgLy8gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAocnBjVXJscyAmJiBjaGFpbk5hbWUpIHtcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZFVybHMgPSBycGNVcmxzLmZpbHRlcigodGFyZ2V0U3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBsZXQgdXJsO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKHRhcmdldFN0cmluZyk7XG4gICAgICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVybC5wcm90b2NvbCA9PT0gJ2h0dHA6JyB8fCB1cmwucHJvdG9jb2wgPT09ICdodHRwczonO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKCFmaWx0ZXJlZFVybHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXZtUHJvdmlkZXJFcnJvcihFdm1Qcm92aWRlckVycm9yVHlwZS5JTlRFUk5BTF9FUlJPUiwgJ0N1cnJlbnRseSBzdXBwb3J0IFdTUyBwcm92aWRlciBmb3IgU3Vic3RyYXRlIG5ldHdvcmtzIGFuZCBIVFRQIHByb3ZpZGVyIGZvciBFVk0gbmV0d29yaycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gZmlsdGVyZWRVcmxzWzBdO1xuXG4gICAgICAgICAgY29uc3QgY2hhaW5JbmZvOiBWYWxpZGF0ZU5ldHdvcmtSZXNwb25zZSA9IHtcbiAgICAgICAgICAgIGV4aXN0ZW50aWFsRGVwb3NpdDogJzAnLFxuICAgICAgICAgICAgZ2VuZXNpc0hhc2g6ICcnLFxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGFkZHJlc3NQcmVmaXg6ICcnLFxuICAgICAgICAgICAgZXZtQ2hhaW5JZDogY2hhaW5JZE51bSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBkZWNpbWFscyxcbiAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICAgICAgcGFyYUlkOiBudWxsLFxuICAgICAgICAgICAgbmFtZTogY2hhaW5OYW1lXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IG5ld1Byb3ZpZGVyS2V5ID0gX2dlbmVyYXRlQ3VzdG9tUHJvdmlkZXJLZXkoMCk7XG5cbiAgICAgICAgICBjb25zdCBuZXR3b3JrRGF0YTogX05ldHdvcmtVcHNlcnRQYXJhbXMgPSB7XG4gICAgICAgICAgICBtb2RlOiAnaW5zZXJ0JyxcbiAgICAgICAgICAgIGNoYWluU3BlYzoge1xuICAgICAgICAgICAgICBldm1DaGFpbklkOiBjaGFpbkluZm8uZXZtQ2hhaW5JZCxcbiAgICAgICAgICAgICAgZGVjaW1hbHM6IGNoYWluSW5mby5kZWNpbWFscyxcbiAgICAgICAgICAgICAgZXhpc3RlbnRpYWxEZXBvc2l0OiBjaGFpbkluZm8uZXhpc3RlbnRpYWxEZXBvc2l0LFxuICAgICAgICAgICAgICBnZW5lc2lzSGFzaDogY2hhaW5JbmZvLmdlbmVzaXNIYXNoLFxuICAgICAgICAgICAgICBwYXJhSWQ6IGNoYWluSW5mby5wYXJhSWQsXG4gICAgICAgICAgICAgIGFkZHJlc3NQcmVmaXg6IGNoYWluSW5mby5hZGRyZXNzUHJlZml4ID8gcGFyc2VJbnQoY2hhaW5JbmZvLmFkZHJlc3NQcmVmaXgpIDogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoYWluRWRpdEluZm86IHtcbiAgICAgICAgICAgICAgYmxvY2tFeHBsb3JlcjogYmxvY2tFeHBsb3JlclVybHM/LlswXSxcbiAgICAgICAgICAgICAgc2x1ZzogJycsXG4gICAgICAgICAgICAgIGN1cnJlbnRQcm92aWRlcjogbmV3UHJvdmlkZXJLZXksXG4gICAgICAgICAgICAgIHByb3ZpZGVyczogeyBbbmV3UHJvdmlkZXJLZXldOiBwcm92aWRlciB9LFxuICAgICAgICAgICAgICBzeW1ib2w6IGNoYWluSW5mby5zeW1ib2wsXG4gICAgICAgICAgICAgIGNoYWluVHlwZTogJ0VWTScsXG4gICAgICAgICAgICAgIG5hbWU6IGNoYWluSW5mby5uYW1lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5jb25maXJtZWQ6IHRydWVcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdGhpcy4ja29uaVN0YXRlLnZhbGlkYXRlQ3VzdG9tQ2hhaW4ocHJvdmlkZXIpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICBuZXR3b3JrRGF0YS5wcm92aWRlckVycm9yID0gcmVzLmVycm9yO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbmV0d29ya0RhdGEuY2hhaW5TcGVjID0ge1xuICAgICAgICAgICAgICAgIGV2bUNoYWluSWQ6IHJlcy5ldm1DaGFpbklkLFxuICAgICAgICAgICAgICAgIGRlY2ltYWxzOiByZXMuZGVjaW1hbHMsXG4gICAgICAgICAgICAgICAgZXhpc3RlbnRpYWxEZXBvc2l0OiByZXMuZXhpc3RlbnRpYWxEZXBvc2l0LFxuICAgICAgICAgICAgICAgIGdlbmVzaXNIYXNoOiByZXMuZ2VuZXNpc0hhc2gsXG4gICAgICAgICAgICAgICAgcGFyYUlkOiByZXMucGFyYUlkLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NQcmVmaXg6IHJlcy5hZGRyZXNzUHJlZml4ID8gcGFyc2VJbnQocmVzLmFkZHJlc3NQcmVmaXgpIDogMFxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIG5ldHdvcmtEYXRhLmNoYWluRWRpdEluZm8uc3ltYm9sID0gcmVzLnN5bWJvbDtcbiAgICAgICAgICAgICAgbmV0d29ya0RhdGEuY2hhaW5FZGl0SW5mby5uYW1lID0gcmVzLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgbmV0d29ya0RhdGEucHJvdmlkZXJFcnJvciA9IF9DSEFJTl9WQUxJREFUSU9OX0VSUk9SLk5PTkU7XG4gICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBuZXR3b3JrRGF0YS51bmNvbmZpcm1lZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy4ja29uaVN0YXRlLnJlcXVlc3RTZXJ2aWNlLnVwZGF0ZUNvbmZpcm1hdGlvbihpZCwgJ2FkZE5ldHdvcmtSZXF1ZXN0JywgbmV0d29ya0RhdGEpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5hZGROZXR3b3JrQ29uZmlybShpZCwgdXJsLCBuZXR3b3JrRGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsICdJbnZhbGlkIHByb3ZpZGVyJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0RXZtQ3VycmVudENoYWluSWQgKHVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBldm1TdGF0ZSA9IGF3YWl0IHRoaXMuZ2V0RXZtU3RhdGUodXJsKTtcblxuICAgIHJldHVybiBldm1TdGF0ZS5jaGFpbklkIHx8ICcweDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBldm1TdWJzY3JpYmVFdmVudHMgKHVybDogc3RyaW5nLCBpZDogc3RyaW5nLCBwb3J0OiBjaHJvbWUucnVudGltZS5Qb3J0KSB7XG4gICAgLy8gVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgREFwcCByZXF1ZXN0IGNvbm5lY3QgdG8gZXh0ZW5zaW9uXG4gICAgY29uc3QgY2IgPSBjcmVhdGVTdWJzY3JpcHRpb248J2V2bShldmVudHMuc3Vic2NyaWJlKSc+KGlkLCBwb3J0KTtcbiAgICBsZXQgaXNDb25uZWN0ZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0IGVtaXRFdmVudCA9IChldmVudE5hbWU6IEV2bUV2ZW50VHlwZSwgcGF5bG9hZDogYW55KSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm9kZS9uby1jYWxsYmFjay1saXRlcmFsXG4gICAgICBjYih7IHR5cGU6IGV2ZW50TmFtZSwgcGF5bG9hZDogcGF5bG9hZCB9KTtcbiAgICB9O1xuXG4gICAgLy8gRGV0ZWN0IGFjY291bnRzIGNoYW5nZWRcbiAgICBsZXQgY3VycmVudEFjY291bnRMaXN0ID0gYXdhaXQgdGhpcy5nZXRFdm1DdXJyZW50QWNjb3VudCh1cmwpO1xuXG4gICAgY29uc3Qgb25DdXJyZW50QWNjb3VudENoYW5nZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdBY2NvdW50TGlzdCA9IGF3YWl0IHRoaXMuZ2V0RXZtQ3VycmVudEFjY291bnQodXJsKTtcblxuICAgICAgLy8gQ29tcGFyZSB0byB2b2lkIGxvb3BpbmcgcmVsb2FkXG4gICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoY3VycmVudEFjY291bnRMaXN0KSAhPT0gSlNPTi5zdHJpbmdpZnkobmV3QWNjb3VudExpc3QpKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBub2RlL25vLWNhbGxiYWNrLWxpdGVyYWxcbiAgICAgICAgZW1pdEV2ZW50KCdhY2NvdW50c0NoYW5nZWQnLCBuZXdBY2NvdW50TGlzdCk7XG4gICAgICAgIGN1cnJlbnRBY2NvdW50TGlzdCA9IG5ld0FjY291bnRMaXN0O1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBhY2NvdW50TGlzdFN1YnNjcmlwdGlvbiA9IHRoaXMuI2tvbmlTdGF0ZS5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudFN1YmplY3RcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICBvbkN1cnJlbnRBY2NvdW50Q2hhbmdlZCgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfSk7XG5cbiAgICAvLyBEZXRlY3QgbmV0d29yayBjaGFpblxuICAgIGNvbnN0IGV2bVN0YXRlID0gYXdhaXQgdGhpcy5nZXRFdm1TdGF0ZSh1cmwpO1xuICAgIGxldCBjdXJyZW50Q2hhaW5JZCA9IGV2bVN0YXRlLmNoYWluSWQ7XG5cbiAgICBjb25zdCBfb25BdXRoQ2hhbmdlZCA9IGFzeW5jICgpID0+IHtcbiAgICAgIC8vIERldGVjdCBuZXR3b3JrXG4gICAgICBjb25zdCB7IGNoYWluSWQgfSA9IGF3YWl0IHRoaXMuZ2V0RXZtU3RhdGUodXJsKTtcblxuICAgICAgaWYgKGNoYWluSWQgIT09IGN1cnJlbnRDaGFpbklkKSB7XG4gICAgICAgIGVtaXRFdmVudCgnY2hhaW5DaGFuZ2VkJywgY2hhaW5JZCk7XG4gICAgICAgIGN1cnJlbnRDaGFpbklkID0gY2hhaW5JZDtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZWN0IGFjY291bnRcbiAgICAgIGNvbnN0IG5ld0FjY291bnRMaXN0ID0gYXdhaXQgdGhpcy5nZXRFdm1DdXJyZW50QWNjb3VudCh1cmwpO1xuXG4gICAgICAvLyBDb21wYXJlIHRvIHZvaWQgbG9vcGluZyByZWxvYWRcbiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShjdXJyZW50QWNjb3VudExpc3QpICE9PSBKU09OLnN0cmluZ2lmeShuZXdBY2NvdW50TGlzdCkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vZGUvbm8tY2FsbGJhY2stbGl0ZXJhbFxuICAgICAgICBlbWl0RXZlbnQoJ2FjY291bnRzQ2hhbmdlZCcsIG5ld0FjY291bnRMaXN0KTtcbiAgICAgICAgY3VycmVudEFjY291bnRMaXN0ID0gbmV3QWNjb3VudExpc3Q7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGF1dGhVcmxTdWJzY3JpcHRpb24gPSB0aGlzLiNrb25pU3RhdGUuc3Vic2NyaWJlRXZtQ2hhaW5DaGFuZ2UoKVxuICAgICAgLnN1YnNjcmliZSgocnMpID0+IHtcbiAgICAgICAgX29uQXV0aENoYW5nZWQoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgLy8gRGV0ZWN0IG5ldHdvcmsgY29ubmVjdGlvblxuICAgIGNvbnN0IG5ldHdvcmtDaGVjayA9ICgpID0+IHtcbiAgICAgIHRoaXMuZ2V0RXZtU3RhdGUodXJsKS50aGVuKChldm1TdGF0ZSkgPT4ge1xuICAgICAgICBldm1TdGF0ZS53ZWIzPy5ldGgubmV0LmlzTGlzdGVuaW5nKClcbiAgICAgICAgICAudGhlbigoY29ubmVjdGluZykgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3RpbmcgJiYgIWlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgIGVtaXRFdmVudCgnY29ubmVjdCcsIHsgY2hhaW5JZDogZXZtU3RhdGUuY2hhaW5JZCB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNvbm5lY3RpbmcgJiYgaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgZW1pdEV2ZW50KCdkaXNjb25uZWN0JywgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuQ0hBSU5fRElTQ09OTkVDVEVEKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlzQ29ubmVjdGVkID0gY29ubmVjdGluZztcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH07XG5cbiAgICBjb25zdCBuZXR3b3JrQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKG5ldHdvcmtDaGVjaywgQ1JPTl9HRVRfQVBJX01BUF9TVEFUVVMpO1xuXG4gICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCB0aGlzLmdldEV2bVByb3ZpZGVyKHVybCk7XG5cbiAgICBjb25zdCBldmVudE1hcDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gICAgZXZlbnRNYXAuZGF0YSA9ICh7IG1ldGhvZCwgcGFyYW1zIH06IEpzb25ScGNQYXlsb2FkKSA9PiB7XG4gICAgICBlbWl0RXZlbnQoJ21lc3NhZ2UnLCB7XG4gICAgICAgIHR5cGU6IG1ldGhvZCxcbiAgICAgICAgZGF0YTogcGFyYW1zXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZXZlbnRNYXAuZXJyb3IgPSAocnM6IEVycm9yKSA9PiB7XG4gICAgICBlbWl0RXZlbnQoJ2Vycm9yJywgcnMpO1xuICAgIH07XG5cbiAgICBPYmplY3QuZW50cmllcyhldmVudE1hcCkuZm9yRWFjaCgoW2V2ZW50LCBjYWxsYmFja10pID0+IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICBwcm92aWRlcj8ub24gJiYgcHJvdmlkZXI/Lm9uKGV2ZW50LCBjYWxsYmFjayk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgZXZlbnQgZW1pdHRlclxuICAgIGlmICghdGhpcy5ldm1FdmVudEVtaXR0ZXJNYXBbdXJsXSkge1xuICAgICAgdGhpcy5ldm1FdmVudEVtaXR0ZXJNYXBbdXJsXSA9IHt9O1xuICAgIH1cblxuICAgIHRoaXMuZXZtRXZlbnRFbWl0dGVyTWFwW3VybF1baWRdID0gZW1pdEV2ZW50O1xuXG4gICAgdGhpcy5jcmVhdGVVbnN1YnNjcmlwdGlvbkhhbmRsZShpZCwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZXZtRXZlbnRFbWl0dGVyTWFwW3VybF1baWRdKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmV2bUV2ZW50RW1pdHRlck1hcFt1cmxdW2lkXTtcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmVudHJpZXMoZXZlbnRNYXApLmZvckVhY2goKFtldmVudCwgY2FsbGJhY2tdKSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgIHByb3ZpZGVyPy5yZW1vdmVMaXN0ZW5lciAmJiBwcm92aWRlcj8ucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcbiAgICAgIH0pO1xuICAgICAgYWNjb3VudExpc3RTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIGF1dGhVcmxTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIGNsZWFySW50ZXJ2YWwobmV0d29ya0NoZWNrSW50ZXJ2YWwpO1xuICAgIH0pO1xuXG4gICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24oaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrQW5kSGFuZGxlUHJvdmlkZXJTdGF0dXMgKHByb3ZpZGVyOiBXZWJzb2NrZXRQcm92aWRlciB8IEh0dHBQcm92aWRlciB8IHVuZGVmaW5lZCkge1xuICAgIGlmICgoIXByb3ZpZGVyIHx8ICFwcm92aWRlcj8uY29ubmVjdGVkKSAmJiBwcm92aWRlcj8uc3VwcG9ydHNTdWJzY3JpcHRpb25zKCkpIHsgLy8gZXhjbHVkZXMgSHR0cFByb3ZpZGVyXG4gICAgICBPYmplY3QudmFsdWVzKHRoaXMuZXZtRXZlbnRFbWl0dGVyTWFwKS5mb3JFYWNoKChtKSA9PiB7XG4gICAgICAgIE9iamVjdC52YWx1ZXMobSkuZm9yRWFjaCgoZW1pdHRlcikgPT4ge1xuICAgICAgICAgIGVtaXR0ZXIoJ2Rpc2Nvbm5lY3QnLCBuZXcgRXZtUHJvdmlkZXJFcnJvcihFdm1Qcm92aWRlckVycm9yVHlwZS5DSEFJTl9ESVNDT05ORUNURUQpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLkNIQUlOX0RJU0NPTk5FQ1RFRCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRFdm1Qcm92aWRlciAodXJsOiBzdHJpbmcpOiBQcm9taXNlPFdlYnNvY2tldFByb3ZpZGVyIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXZtU3RhdGUgPSBhd2FpdCB0aGlzLmdldEV2bVN0YXRlKHVybCk7XG4gICAgbGV0IHByb3ZpZGVyID0gZXZtU3RhdGUud2ViMz8uY3VycmVudFByb3ZpZGVyIGFzIFdlYnNvY2tldFByb3ZpZGVyO1xuXG4gICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgYXdhaXQgdGhpcy5nZXRFdm1DdXJyZW50Q2hhaW5JZCh1cmwpO1xuICAgICAgcHJvdmlkZXIgPSBldm1TdGF0ZS53ZWIzPy5jdXJyZW50UHJvdmlkZXIgYXMgV2Vic29ja2V0UHJvdmlkZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3ZpZGVyO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwZXJmb3JtV2ViM01ldGhvZCAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIHsgbWV0aG9kLFxuICAgIHBhcmFtcyB9OiBSZXF1ZXN0QXJndW1lbnRzLCBjYWxsYmFjaz86IChyZXN1bHQ/OiBhbnkpID0+IHZvaWQpIHtcbiAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IHRoaXMuZ2V0RXZtUHJvdmlkZXIodXJsKTtcblxuICAgIHRoaXMuY2hlY2tBbmRIYW5kbGVQcm92aWRlclN0YXR1cyhwcm92aWRlcik7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcHJvdmlkZXI/LnNlbmQoe1xuICAgICAgICBqc29ucnBjOiAnMi4wJyxcbiAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgIHBhcmFtczogcGFyYW1zIGFzIGFueVtdLFxuICAgICAgICBpZFxuICAgICAgfSwgKGVycm9yLCByZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgZXJyID0gcmVzdWx0Py5lcnJvciB8fCBlcnJvcjtcblxuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcnMgPSByZXN1bHQ/LnJlc3VsdCBhcyB1bmtub3duO1xuXG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socnMpO1xuICAgICAgICAgIHJlc29sdmUocnMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjYW5Vc2VBY2NvdW50IChhZGRyZXNzOiBzdHJpbmcsIHVybDogc3RyaW5nKSB7XG4gICAgY29uc3QgYWxsb3dlZEFjY291bnRzID0gYXdhaXQgdGhpcy5nZXRFdm1DdXJyZW50QWNjb3VudCh1cmwsIHRydWUpO1xuXG4gICAgcmV0dXJuICEhYWxsb3dlZEFjY291bnRzLmZpbmQoKGFjYykgPT4gKGFjYy50b0xvd2VyQ2FzZSgpID09PSBhZGRyZXNzLnRvTG93ZXJDYXNlKCkpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXZtU2lnbiAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIHsgbWV0aG9kLCBwYXJhbXMgfTogUmVxdWVzdEFyZ3VtZW50cykge1xuICAgIGNvbnN0IGFsbG93ZWRBY2NvdW50cyA9IChhd2FpdCB0aGlzLmdldEV2bUN1cnJlbnRBY2NvdW50KHVybCwgdHJ1ZSkpO1xuICAgIGNvbnN0IHNpZ25SZXN1bHQgPSBhd2FpdCB0aGlzLiNrb25pU3RhdGUuZXZtU2lnbihpZCwgdXJsLCBtZXRob2QsIHBhcmFtcywgYWxsb3dlZEFjY291bnRzKTtcblxuICAgIGlmIChzaWduUmVzdWx0KSB7XG4gICAgICByZXR1cm4gc2lnblJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsICdGYWlsZWQgdG8gc2lnbiBtZXNzYWdlJyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGV2bVNlbmRUcmFuc2FjdGlvbiAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIHsgcGFyYW1zIH06IFJlcXVlc3RBcmd1bWVudHMpIHtcbiAgICBjb25zdCB0cmFuc2FjdGlvblBhcmFtcyA9IChwYXJhbXMgYXMgRXZtU2VuZFRyYW5zYWN0aW9uUGFyYW1zW10pWzBdO1xuICAgIGNvbnN0IGNhblVzZUFjY291bnQgPSB0cmFuc2FjdGlvblBhcmFtcy5mcm9tICYmIHRoaXMuY2FuVXNlQWNjb3VudCh0cmFuc2FjdGlvblBhcmFtcy5mcm9tLCB1cmwpO1xuICAgIGNvbnN0IGV2bVN0YXRlID0gYXdhaXQgdGhpcy5nZXRFdm1TdGF0ZSh1cmwpO1xuICAgIGNvbnN0IG5ldHdvcmtLZXkgPSBldm1TdGF0ZS5uZXR3b3JrS2V5O1xuXG4gICAgaWYgKCFjYW5Vc2VBY2NvdW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodCgnWW91IGhhdmUgcmVzY2luZGVkIGFsbG93YW5jZSBmb3IgdGhpcyBhY2NvdW50IGluIHdhbGxldCcpKTtcbiAgICB9XG5cbiAgICBpZiAoIW5ldHdvcmtLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTmV0d29yayB1bmF2YWlsYWJsZS4gUGxlYXNlIHN3aXRjaCBuZXR3b3JrIG9yIG1hbnVhbGx5IGFkZCBuZXR3b3JrIHRvIHdhbGxldCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGFsbG93ZWRBY2NvdW50cyA9IGF3YWl0IHRoaXMuZ2V0RXZtQ3VycmVudEFjY291bnQodXJsLCB0cnVlKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLiNrb25pU3RhdGUuZXZtU2VuZFRyYW5zYWN0aW9uKGlkLCB1cmwsIG5ldHdvcmtLZXksIGFsbG93ZWRBY2NvdW50cywgdHJhbnNhY3Rpb25QYXJhbXMpO1xuXG4gICAgaWYgKCF0cmFuc2FjdGlvbkhhc2gpIHtcbiAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLlVTRVJfUkVKRUNURURfUkVRVUVTVCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uSGFzaDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlRXZtUmVxdWVzdCAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIHJlcXVlc3Q6IFJlcXVlc3RBcmd1bWVudHMpOiBQcm9taXNlPHVua25vd24+IHtcbiAgICBjb25zdCB7IG1ldGhvZCB9ID0gcmVxdWVzdDtcblxuICAgIHRyeSB7XG4gICAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgICBjYXNlICdldGhfY2hhaW5JZCc6XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RXZtQ3VycmVudENoYWluSWQodXJsKTtcbiAgICAgICAgY2FzZSAnbmV0X3ZlcnNpb24nOlxuICAgICAgICAgIHJldHVybiBwYXJzZUludChhd2FpdCB0aGlzLmdldEV2bUN1cnJlbnRDaGFpbklkKHVybCksIDE2KTtcbiAgICAgICAgY2FzZSAnZXRoX2FjY291bnRzJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRFdm1DdXJyZW50QWNjb3VudCh1cmwpO1xuICAgICAgICBjYXNlICdldGhfc2VuZFRyYW5zYWN0aW9uJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ldm1TZW5kVHJhbnNhY3Rpb24oaWQsIHVybCwgcmVxdWVzdCk7XG4gICAgICAgIGNhc2UgJ2V0aF9zaWduJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ldm1TaWduKGlkLCB1cmwsIHJlcXVlc3QpO1xuICAgICAgICBjYXNlICdwZXJzb25hbF9zaWduJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ldm1TaWduKGlkLCB1cmwsIHJlcXVlc3QpO1xuICAgICAgICBjYXNlICdldGhfc2lnblR5cGVkRGF0YSc6XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXZtU2lnbihpZCwgdXJsLCByZXF1ZXN0KTtcbiAgICAgICAgY2FzZSAnZXRoX3NpZ25UeXBlZERhdGFfdjEnOlxuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV2bVNpZ24oaWQsIHVybCwgcmVxdWVzdCk7XG4gICAgICAgIGNhc2UgJ2V0aF9zaWduVHlwZWREYXRhX3YzJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ldm1TaWduKGlkLCB1cmwsIHJlcXVlc3QpO1xuICAgICAgICBjYXNlICdldGhfc2lnblR5cGVkRGF0YV92NCc6XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXZtU2lnbihpZCwgdXJsLCByZXF1ZXN0KTtcbiAgICAgICAgY2FzZSAnd2FsbGV0X3JlcXVlc3RQZXJtaXNzaW9ucyc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5hdXRob3JpemVWMih1cmwsIHsgb3JpZ2luOiAnJywgYWNjb3VudEF1dGhUeXBlOiAnZXZtJywgcmVDb25maXJtOiB0cnVlIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RXZtUGVybWlzc2lvbih1cmwsIGlkKTtcbiAgICAgICAgY2FzZSAnd2FsbGV0X2dldFBlcm1pc3Npb25zJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRFdm1QZXJtaXNzaW9uKHVybCwgaWQpO1xuICAgICAgICBjYXNlICd3YWxsZXRfYWRkRXRoZXJldW1DaGFpbic6XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWRkRXZtQ2hhaW4oaWQsIHVybCwgcmVxdWVzdCk7XG4gICAgICAgIGNhc2UgJ3dhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zd2l0Y2hFdm1DaGFpbihpZCwgdXJsLCByZXF1ZXN0KTtcbiAgICAgICAgY2FzZSAnd2FsbGV0X3dhdGNoQXNzZXQnOlxuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFkZEV2bVRva2VuKGlkLCB1cmwsIHJlcXVlc3QpO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGVyZm9ybVdlYjNNZXRob2QoaWQsIHVybCwgcmVxdWVzdCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgaWYgKGUuY29kZSkge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5URVJOQUxfRVJST1IsIGU/LnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlRXZtU2VuZCAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIHBvcnQ6IGNocm9tZS5ydW50aW1lLlBvcnQsIHJlcXVlc3Q6IFJlcXVlc3RFdm1Qcm92aWRlclNlbmQpIHtcbiAgICBjb25zdCBjYiA9IGNyZWF0ZVN1YnNjcmlwdGlvbjwnZXZtKHByb3ZpZGVyLnNlbmQpJz4oaWQsIHBvcnQpO1xuICAgIGNvbnN0IGV2bVN0YXRlID0gYXdhaXQgdGhpcy5nZXRFdm1TdGF0ZSh1cmwpO1xuICAgIGNvbnN0IHByb3ZpZGVyID0gZXZtU3RhdGUud2ViMz8uY3VycmVudFByb3ZpZGVyIGFzIFdlYnNvY2tldFByb3ZpZGVyO1xuXG4gICAgdGhpcy5jaGVja0FuZEhhbmRsZVByb3ZpZGVyU3RhdHVzKHByb3ZpZGVyKTtcblxuICAgIHByb3ZpZGVyLnNlbmQocmVxdWVzdCwgKGVycm9yLCByZXN1bHQ/KSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm9kZS9uby1jYWxsYmFjay1saXRlcmFsXG4gICAgICBjYih7IGVycm9yLCByZXN1bHQgfSk7XG5cbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsU3Vic2NyaXB0aW9uKGlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGlzRXZtUHVibGljUmVxdWVzdCAodHlwZTogc3RyaW5nLCByZXF1ZXN0OiBSZXF1ZXN0QXJndW1lbnRzKSB7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdldm0ocmVxdWVzdCknICYmXG4gICAgICBbXG4gICAgICAgICdldGhfY2hhaW5JZCcsXG4gICAgICAgICduZXRfdmVyc2lvbidcbiAgICAgIF0uaW5jbHVkZXMocmVxdWVzdD8ubWV0aG9kKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBhZGRQc3BUb2tlbiAoaWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIHsgZ2VuZXNpc0hhc2gsIHRva2VuSW5mbzogaW5wdXQgfTogUmVxdWVzdEFkZFBzcFRva2VuKSB7XG4gICAgY29uc3QgX3Rva2VuVHlwZSA9IGlucHV0LnR5cGU7XG5cbiAgICBpZiAoX3Rva2VuVHlwZSAhPT0gJ3BzcDIyJyAmJiBfdG9rZW5UeXBlICE9PSAncHNwMzQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXZtUHJvdmlkZXJFcnJvcihFdm1Qcm92aWRlckVycm9yVHlwZS5JTlZBTElEX1BBUkFNUywgJ0Fzc2V0cyB0eXBlIHt7dG9rZW5UeXBlfX0gaXMgbm90IHN1cHBvcnRlZCcucmVwbGFjZSgne3t0b2tlblR5cGV9fScsIF90b2tlblR5cGUpKTtcbiAgICB9XG5cbiAgICBpZiAoIWlucHV0LmFkZHJlc3MgfHwgIWlucHV0LnN5bWJvbCkge1xuICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsICdVbmFibGUgdG8gZ2V0IGNvbnRyYWN0IGFkZHJlc3MgYW5kIHRva2VuIHN5bWJvbCcpO1xuICAgIH1cblxuICAgIGNvbnN0IFtjaGFpbl0gPSB0aGlzLiNrb25pU3RhdGUuZmluZE5ldHdvcmtLZXlCeUdlbmVzaXNIYXNoKGdlbmVzaXNIYXNoKTtcblxuICAgIGlmICghY2hhaW4pIHtcbiAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SLCAnVGhlIG5ldHdvcmsgb24gZEFwcCBpcyBub3Qgc3VwcG9ydGVkIGluIHdhbGxldC4gUGxlYXNlIG1hbnVhbGx5IGFkZCB0aGUgbmV0d29yayB0byB3YWxsZXQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRDaGFpblN0YXRlQnlLZXkoY2hhaW4pO1xuXG4gICAgaWYgKCFzdGF0ZS5hY3RpdmUpIHtcbiAgICAgIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5lbmFibGVDaGFpbihjaGFpbiwgZmFsc2UpO1xuICAgICAgY29uc3QgYXBpID0gdGhpcy4ja29uaVN0YXRlLmdldFN1YnN0cmF0ZUFwaShjaGFpbik7XG5cbiAgICAgIGF3YWl0IGFwaS5pc1JlYWR5O1xuICAgIH1cblxuICAgIGNvbnN0IHRva2VuVHlwZSA9IF90b2tlblR5cGUgPT09ICdwc3AyMicgPyBfQXNzZXRUeXBlLlBTUDIyIDogX0Fzc2V0VHlwZS5QU1AzNDtcblxuICAgIGNvbnN0IHRva2VuSW5mbzogQWRkVG9rZW5SZXF1ZXN0RXh0ZXJuYWwgPSB7XG4gICAgICBzbHVnOiAnJyxcbiAgICAgIHR5cGU6IHRva2VuVHlwZSxcbiAgICAgIG5hbWU6IGlucHV0LnN5bWJvbCB8fCAnJyxcbiAgICAgIGNvbnRyYWN0QWRkcmVzczogaW5wdXQuYWRkcmVzcyxcbiAgICAgIHN5bWJvbDogaW5wdXQuc3ltYm9sIHx8ICcnLFxuICAgICAgZGVjaW1hbHM6IGlucHV0LmRlY2ltYWxzIHx8IDAsXG4gICAgICBvcmlnaW5DaGFpbjogY2hhaW4sXG4gICAgICBjb250cmFjdEVycm9yOiBmYWxzZSxcbiAgICAgIHZhbGlkYXRlZDogZmFsc2VcbiAgICB9O1xuXG4gICAgdGhpcy4ja29uaVN0YXRlLnZhbGlkYXRlQ3VzdG9tQXNzZXQoe1xuICAgICAgdHlwZTogdG9rZW5UeXBlLFxuICAgICAgY29udHJhY3RBZGRyZXNzOiBpbnB1dC5hZGRyZXNzLFxuICAgICAgb3JpZ2luQ2hhaW46IGNoYWluXG4gICAgfSlcbiAgICAgIC50aGVuKCh2YWxpZGF0ZSkgPT4ge1xuICAgICAgICBpZiAodmFsaWRhdGUuY29udHJhY3RFcnJvcikge1xuICAgICAgICAgIHRva2VuSW5mby5jb250cmFjdEVycm9yID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbkluZm8uc2x1ZyA9IHZhbGlkYXRlPy5leGlzdGVkU2x1ZztcbiAgICAgICAgICB0b2tlbkluZm8ubmFtZSA9IHZhbGlkYXRlLm5hbWUgfHwgdG9rZW5JbmZvLm5hbWU7XG4gICAgICAgICAgdG9rZW5JbmZvLnN5bWJvbCA9IHZhbGlkYXRlLnN5bWJvbDtcbiAgICAgICAgICB0b2tlbkluZm8uZGVjaW1hbHMgPSB2YWxpZGF0ZS5kZWNpbWFscztcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIHRva2VuSW5mby5jb250cmFjdEVycm9yID0gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHRva2VuSW5mby52YWxpZGF0ZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5yZXF1ZXN0U2VydmljZS51cGRhdGVDb25maXJtYXRpb24oaWQsICdhZGRUb2tlblJlcXVlc3QnLCB0b2tlbkluZm8pO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4ja29uaVN0YXRlLmFkZFRva2VuQ29uZmlybShpZCwgdXJsLCB0b2tlbkluZm8pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZTxUTWVzc2FnZVR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZXM+IChpZDogc3RyaW5nLCB0eXBlOiBUTWVzc2FnZVR5cGUsIHJlcXVlc3Q6IFJlcXVlc3RUeXBlc1tUTWVzc2FnZVR5cGVdLCB1cmw6IHN0cmluZywgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCk6IFByb21pc2U8UmVzcG9uc2VUeXBlc1trZXlvZiBSZXNwb25zZVR5cGVzXT4ge1xuICAgIGlmICh0eXBlID09PSAncHViKHBoaXNoaW5nLnJlZGlyZWN0SWZEZW5pZWQpJykge1xuICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3RJZlBoaXNoaW5nKHVybCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgIT09ICdwdWIoYXV0aG9yaXplLnRhYlYyKScgJiYgIXRoaXMuaXNFdm1QdWJsaWNSZXF1ZXN0KHR5cGUsIHJlcXVlc3QgYXMgUmVxdWVzdEFyZ3VtZW50cykpIHtcbiAgICAgIGF3YWl0IHRoaXMuI2tvbmlTdGF0ZS5lbnN1cmVVcmxBdXRob3JpemVkVjIodXJsKVxuICAgICAgICAuY2F0Y2goKGU6IEVycm9yKSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGUuc3RhcnRzV2l0aCgnZXZtJykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SLCBlLm1lc3NhZ2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAvLy8gQ2xvbmUgZnJvbSBQb2xrYWRvdEpzXG4gICAgICBjYXNlICdwdWIoYnl0ZXMuc2lnbiknOlxuICAgICAgICByZXR1cm4gdGhpcy5ieXRlc1NpZ24odXJsLCByZXF1ZXN0IGFzIFNpZ25lclBheWxvYWRSYXcpO1xuXG4gICAgICBjYXNlICdwdWIoZXh0cmluc2ljLnNpZ24pJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmluc2ljU2lnbih1cmwsIHJlcXVlc3QgYXMgU2lnbmVyUGF5bG9hZEpTT04pO1xuXG4gICAgICBjYXNlICdwdWIobWV0YWRhdGEubGlzdCknOlxuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YUxpc3QodXJsKTtcblxuICAgICAgY2FzZSAncHViKG1ldGFkYXRhLnByb3ZpZGUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGFQcm92aWRlKHVybCwgcmVxdWVzdCBhcyBNZXRhZGF0YURlZik7XG5cbiAgICAgIGNhc2UgJ3B1YihwaW5nKSc6XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG5cbiAgICAgIGNhc2UgJ3B1YihycGMubGlzdFByb3ZpZGVycyknOlxuICAgICAgICByZXR1cm4gdGhpcy5ycGNMaXN0UHJvdmlkZXJzKCk7XG5cbiAgICAgIGNhc2UgJ3B1YihycGMuc2VuZCknOlxuICAgICAgICByZXR1cm4gdGhpcy5ycGNTZW5kKHJlcXVlc3QgYXMgUmVxdWVzdFJwY1NlbmQsIHBvcnQpO1xuXG4gICAgICBjYXNlICdwdWIocnBjLnN0YXJ0UHJvdmlkZXIpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucnBjU3RhcnRQcm92aWRlcihyZXF1ZXN0IGFzIHN0cmluZywgcG9ydCk7XG5cbiAgICAgIGNhc2UgJ3B1YihycGMuc3Vic2NyaWJlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnJwY1N1YnNjcmliZShyZXF1ZXN0IGFzIFJlcXVlc3RScGNTdWJzY3JpYmUsIGlkLCBwb3J0KTtcblxuICAgICAgY2FzZSAncHViKHJwYy5zdWJzY3JpYmVDb25uZWN0ZWQpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucnBjU3Vic2NyaWJlQ29ubmVjdGVkKHJlcXVlc3QgYXMgbnVsbCwgaWQsIHBvcnQpO1xuXG4gICAgICBjYXNlICdwdWIocnBjLnVuc3Vic2NyaWJlKSc6XG4gICAgICAgIHJldHVybiB0aGlzLnJwY1Vuc3Vic2NyaWJlKHJlcXVlc3QgYXMgUmVxdWVzdFJwY1Vuc3Vic2NyaWJlLCBwb3J0KTtcblxuICAgICAgY2FzZSAncHViKHRva2VuLmFkZCknOlxuICAgICAgICByZXR1cm4gdGhpcy5hZGRQc3BUb2tlbihpZCwgdXJsLCByZXF1ZXN0IGFzIFJlcXVlc3RBZGRQc3BUb2tlbik7XG5cbiAgICAgIC8vL1xuICAgICAgY2FzZSAncHViKGF1dGhvcml6ZS50YWJWMiknOlxuICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JpemVWMih1cmwsIHJlcXVlc3QgYXMgUmVxdWVzdEF1dGhvcml6ZVRhYik7XG4gICAgICBjYXNlICdwdWIoYWNjb3VudHMubGlzdFYyKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzTGlzdFYyKHVybCwgcmVxdWVzdCBhcyBSZXF1ZXN0QWNjb3VudExpc3QpO1xuICAgICAgY2FzZSAncHViKGFjY291bnRzLnN1YnNjcmliZVYyKSc6XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRzU3Vic2NyaWJlVjIodXJsLCByZXF1ZXN0IGFzIFJlcXVlc3RBY2NvdW50U3Vic2NyaWJlLCBpZCwgcG9ydCk7XG4gICAgICBjYXNlICdwdWIoYWNjb3VudHMudW5zdWJzY3JpYmUpJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudHNVbnN1YnNjcmliZSh1cmwsIHJlcXVlc3QgYXMgUmVxdWVzdEFjY291bnRVbnN1YnNjcmliZSk7XG4gICAgICBjYXNlICdldm0oZXZlbnRzLnN1YnNjcmliZSknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ldm1TdWJzY3JpYmVFdmVudHModXJsLCBpZCwgcG9ydCk7XG4gICAgICBjYXNlICdldm0ocmVxdWVzdCknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5oYW5kbGVFdm1SZXF1ZXN0KGlkLCB1cmwsIHJlcXVlc3QgYXMgUmVxdWVzdEFyZ3VtZW50cyk7XG4gICAgICBjYXNlICdldm0ocHJvdmlkZXIuc2VuZCknOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5oYW5kbGVFdm1TZW5kKGlkLCB1cmwsIHBvcnQsIHJlcXVlc3QgYXMgUmVxdWVzdEV2bVByb3ZpZGVyU2VuZCk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBoYW5kbGUgbWVzc2FnZSBvZiB0eXBlICR7dHlwZX1gKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBQcm92aWRlckVycm9yIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL2Vycm9ycy9Qcm92aWRlckVycm9yJztcbmltcG9ydCB7IE1lc3NhZ2VUeXBlcywgVHJhbnNwb3J0UmVxdWVzdE1lc3NhZ2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvdHlwZXMnO1xuaW1wb3J0IHsgUE9SVF9FWFRFTlNJT04sIFBPUlRfTU9CSUxFIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9kZWZhdWx0cyc7XG5pbXBvcnQgeyBOZnRIYW5kbGVyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9uZnQnO1xuaW1wb3J0IEtvbmlFeHRlbnNpb24gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMvRXh0ZW5zaW9uJztcbmltcG9ydCBNb2JpbGUgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMvTW9iaWxlJztcbmltcG9ydCBLb25pU3RhdGUgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMvU3RhdGUnO1xuaW1wb3J0IEtvbmlUYWJzIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9iYWNrZ3JvdW5kL2hhbmRsZXJzL1RhYnMnO1xuXG4vLyBpbXBvcnQgTWlncmF0aW9uIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9taWdyYXRpb24nO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuXG5leHBvcnQgY29uc3Qgc3RhdGUgPSBuZXcgS29uaVN0YXRlKCk7XG5leHBvcnQgY29uc3QgZXh0ZW5zaW9uID0gbmV3IEtvbmlFeHRlbnNpb24oc3RhdGUpO1xuZXhwb3J0IGNvbnN0IHRhYnMgPSBuZXcgS29uaVRhYnMoc3RhdGUpO1xuZXhwb3J0IGNvbnN0IG1vYmlsZSA9IG5ldyBNb2JpbGUoc3RhdGUpO1xuZXhwb3J0IGNvbnN0IG5mdEhhbmRsZXIgPSBuZXcgTmZ0SGFuZGxlcigpO1xuXG4vLyBNaWdyYXRpb25cbi8vIGFzeW5jIGZ1bmN0aW9uIG1ha2VTdXJlU3RhdGVSZWFkeSAoKSB7XG4vLyAgIGNvbnN0IHBvbGwgPSAocmVzb2x2ZTogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSA9PiB7XG4vLyAgICAgaWYgKHN0YXRlLmlzUmVhZHkoKSkge1xuLy8gICAgICAgcmVzb2x2ZSh0cnVlKTtcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgY29uc29sZS5sb2coJ1dhaXRpbmcgZm9yIFN0YXRlIGlzIHJlYWR5Li4uJyk7XG4vLyAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBvbGwocmVzb2x2ZSksIDQwMCk7XG4vLyAgICAgfVxuLy8gICB9O1xuLy9cbi8vICAgcmV0dXJuIG5ldyBQcm9taXNlKHBvbGwpO1xuLy8gfVxuXG4vLyBtYWtlU3VyZVN0YXRlUmVhZHkoKS50aGVuKCgpID0+IHtcbi8vICAgY29uc3QgbWlncmF0aW9uID0gbmV3IE1pZ3JhdGlvbihzdGF0ZSk7XG4vL1xuLy8gICBtaWdyYXRpb24ucnVuKCkuY2F0Y2goKGVycikgPT4gY29uc29sZS53YXJuKGVycikpO1xuLy8gfSkuY2F0Y2goKGUpID0+IGNvbnNvbGUud2FybihlKSk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhhbmRsZXJzPFRNZXNzYWdlVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlcz4gKHsgaWQsIG1lc3NhZ2UsIHJlcXVlc3QgfTogVHJhbnNwb3J0UmVxdWVzdE1lc3NhZ2U8VE1lc3NhZ2VUeXBlPiwgcG9ydDogY2hyb21lLnJ1bnRpbWUuUG9ydCwgZXh0ZW5zaW9uUG9ydE5hbWUgPSBQT1JUX0VYVEVOU0lPTik6IHZvaWQge1xuICBjb25zdCBpc01vYmlsZSA9IHBvcnQubmFtZSA9PT0gUE9SVF9NT0JJTEU7XG4gIGNvbnN0IGlzRXh0ZW5zaW9uID0gcG9ydC5uYW1lID09PSBleHRlbnNpb25Qb3J0TmFtZTtcbiAgY29uc3Qgc2VuZGVyID0gcG9ydC5zZW5kZXIgYXMgY2hyb21lLnJ1bnRpbWUuTWVzc2FnZVNlbmRlcjtcbiAgY29uc3QgZnJvbSA9IGlzRXh0ZW5zaW9uXG4gICAgPyAnZXh0ZW5zaW9uJ1xuICAgIDogKHNlbmRlci50YWIgJiYgc2VuZGVyLnRhYi51cmwpIHx8IHNlbmRlci51cmwgfHwgJzx1bmtub3duPic7XG4gIGNvbnN0IHNvdXJjZSA9IGAke2Zyb219OiAke2lkfTogJHttZXNzYWdlfWA7XG5cbiAgLy8gY29uc29sZS5sb2coYCBbaW5dICR7c291cmNlfWApOyAvLyA6OiAke0pTT04uc3RyaW5naWZ5KHJlcXVlc3QpfWApO1xuXG4gIGNvbnN0IHByb21pc2UgPSBpc01vYmlsZVxuICAgID8gbW9iaWxlLmhhbmRsZShpZCwgbWVzc2FnZSwgcmVxdWVzdCwgcG9ydClcbiAgICA6IGlzRXh0ZW5zaW9uXG4gICAgICA/IGV4dGVuc2lvbi5oYW5kbGUoaWQsIG1lc3NhZ2UsIHJlcXVlc3QsIHBvcnQpXG4gICAgICA6IHRhYnMuaGFuZGxlKGlkLCBtZXNzYWdlLCByZXF1ZXN0LCBmcm9tLCBwb3J0KTtcblxuICBwcm9taXNlXG4gICAgLnRoZW4oKHJlc3BvbnNlKTogdm9pZCA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgW291dF0gJHtzb3VyY2V9YCk7IC8vIDo6ICR7SlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpfWApO1xuXG4gICAgICAvLyBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgdGhlIGVuZCBvZiB0aGUgcHJvbWlzZSwgdGhlIHVzZXIgbWF5IGhhdmUgY2xvc2VkXG4gICAgICAvLyB0aGUgdGFiLCBpbiB3aGljaCBjYXNlIHBvcnQgd2lsbCBiZSB1bmRlZmluZWRcbiAgICAgIGFzc2VydChwb3J0LCAnUG9ydCBoYXMgYmVlbiBkaXNjb25uZWN0ZWQnKTtcblxuICAgICAgcG9ydC5wb3N0TWVzc2FnZSh7IGlkLCByZXNwb25zZSB9KTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3I6IFByb3ZpZGVyRXJyb3IpOiB2b2lkID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgY29uc29sZS5sb2coYFtlcnJdICR7c291cmNlfTo6ICR7ZXJyb3IubWVzc2FnZX1gKTtcblxuICAgICAgLy8gb25seSBzZW5kIG1lc3NhZ2UgYmFjayB0byBwb3J0IGlmIGl0J3Mgc3RpbGwgY29ubmVjdGVkXG4gICAgICBpZiAocG9ydCkge1xuICAgICAgICBwb3J0LnBvc3RNZXNzYWdlKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UsIGVycm9yQ29kZTogZXJyb3IuY29kZSwgZXJyb3JEYXRhOiBlcnJvci5kYXRhLCBpZCB9KTtcbiAgICAgIH1cbiAgICB9KTtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQ2hhaW5Bc3NldCwgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBOb21pbmF0b3JNZXRhZGF0YSwgU3Rha2luZ0l0ZW0sIFN0YWtpbmdSZXdhcmRJdGVtIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBzdWJzY3JpYmVCYWxhbmNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9kb3RzYW1hL2JhbGFuY2UnO1xuaW1wb3J0IHsgc3Vic2NyaWJlQ3Jvd2Rsb2FuIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9kb3RzYW1hL2Nyb3dkbG9hbic7XG5pbXBvcnQgeyBnZXROb21pbmF0aW9uU3Rha2luZ1Jld2FyZERhdGEsIGdldFBvb2xpbmdTdGFraW5nUmV3YXJkRGF0YSwgc3Rha2luZ09uQ2hhaW5BcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3N0YWtpbmcnO1xuaW1wb3J0IHsgc3Vic2NyaWJlRXNzZW50aWFsQ2hhaW5TdGFraW5nTWV0YWRhdGEgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2tvbmkvYXBpL3N0YWtpbmcvYm9uZGluZyc7XG5pbXBvcnQgeyBnZXRBbXBsaXR1ZGVVbmNsYWltZWRTdGFraW5nUmV3YXJkIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS9zdGFraW5nL3BhcmFDaGFpbic7XG5pbXBvcnQgeyBuZnRIYW5kbGVyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMnO1xuaW1wb3J0IHsgX0NoYWluU3RhdGUsIF9Fdm1BcGksIF9TdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgX2lzQ2hhaW5FbmFibGVkLCBfaXNDaGFpblN1cHBvcnRTdWJzdHJhdGVTdGFraW5nIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3V0aWxzJztcbmltcG9ydCB7IENPTU1PTl9SRUxPQURfRVZFTlRTLCBFdmVudEl0ZW0sIEV2ZW50VHlwZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvZXZlbnQtc2VydmljZS90eXBlcyc7XG5pbXBvcnQgRGF0YWJhc2VTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL0RhdGFiYXNlU2VydmljZSc7XG5pbXBvcnQgeyB3YWl0VGltZW91dCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuXG5pbXBvcnQgeyBsb2dnZXIgYXMgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvdHlwZXMnO1xuXG5pbXBvcnQgS29uaVN0YXRlIGZyb20gJy4vaGFuZGxlcnMvU3RhdGUnO1xuXG50eXBlIFN1YnNjcmlwdGlvbk5hbWUgPSAnYmFsYW5jZScgfCAnY3Jvd2Rsb2FuJyB8ICdzdGFraW5nT25DaGFpbicgfCAnZXNzZW50aWFsQ2hhaW5TdGFraW5nTWV0YWRhdGEnO1xuXG5leHBvcnQgY2xhc3MgS29uaVN1YnNjcmlwdGlvbiB7XG4gIHByaXZhdGUgZXZlbnRIYW5kbGVyPzogKGV2ZW50czogRXZlbnRJdGVtPEV2ZW50VHlwZT5bXSwgZXZlbnRUeXBlczogRXZlbnRUeXBlW10pID0+IHZvaWQ7XG4gIHByaXZhdGUgc3Vic2NyaXB0aW9uTWFwOiBSZWNvcmQ8U3Vic2NyaXB0aW9uTmFtZSwgKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkPiA9IHtcbiAgICBjcm93ZGxvYW46IHVuZGVmaW5lZCxcbiAgICBiYWxhbmNlOiB1bmRlZmluZWQsXG4gICAgc3Rha2luZ09uQ2hhaW46IHVuZGVmaW5lZCxcbiAgICBlc3NlbnRpYWxDaGFpblN0YWtpbmdNZXRhZGF0YTogdW5kZWZpbmVkXG4gIH07XG5cbiAgcHVibGljIGRiU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlO1xuICBwcml2YXRlIHN0YXRlOiBLb25pU3RhdGU7XG4gIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgY29uc3RydWN0b3IgKHN0YXRlOiBLb25pU3RhdGUsIGRiU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlKSB7XG4gICAgdGhpcy5kYlNlcnZpY2UgPSBkYlNlcnZpY2U7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMubG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCdTdWJzY3JpcHRpb24nKTtcbiAgfVxuXG4gIGdldFN1YnNjcmlwdGlvbk1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9uTWFwO1xuICB9XG5cbiAgZ2V0U3Vic2NyaXB0aW9uIChuYW1lOiBTdWJzY3JpcHRpb25OYW1lKTogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25NYXBbbmFtZV07XG4gIH1cblxuICB1cGRhdGVTdWJzY3JpcHRpb24gKG5hbWU6IFN1YnNjcmlwdGlvbk5hbWUsIGZ1bmM6ICgoKSA9PiB2b2lkKSB8IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IG9sZEZ1bmMgPSB0aGlzLnN1YnNjcmlwdGlvbk1hcFtuYW1lXTtcblxuICAgIG9sZEZ1bmMgJiYgb2xkRnVuYygpO1xuICAgIGZ1bmMgJiYgKHRoaXMuc3Vic2NyaXB0aW9uTWFwW25hbWVdID0gZnVuYyk7XG4gIH1cblxuICBzdG9wQWxsU3Vic2NyaXB0aW9uICgpIHtcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25NYXAuYmFsYW5jZSkge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYXAuYmFsYW5jZSgpO1xuICAgICAgZGVsZXRlIHRoaXMuc3Vic2NyaXB0aW9uTWFwLmJhbGFuY2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uTWFwLmNyb3dkbG9hbikge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYXAuY3Jvd2Rsb2FuKCk7XG4gICAgICBkZWxldGUgdGhpcy5zdWJzY3JpcHRpb25NYXAuY3Jvd2Rsb2FuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbk1hcC5zdGFraW5nT25DaGFpbikge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYXAuc3Rha2luZ09uQ2hhaW4oKTtcbiAgICAgIGRlbGV0ZSB0aGlzLnN1YnNjcmlwdGlvbk1hcC5zdGFraW5nT25DaGFpbjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzdGFydCAoKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuc3RhdGUuZXZlbnRTZXJ2aWNlLndhaXRLZXlyaW5nUmVhZHksIHRoaXMuc3RhdGUuZXZlbnRTZXJ2aWNlLndhaXRBc3NldFJlYWR5XSk7XG4gICAgY29uc3QgY3VycmVudEFkZHJlc3MgPSB0aGlzLnN0YXRlLmtleXJpbmdTZXJ2aWNlLmN1cnJlbnRBY2NvdW50Py5hZGRyZXNzO1xuXG4gICAgaWYgKGN1cnJlbnRBZGRyZXNzKSB7XG4gICAgICB0aGlzLnN1YnNjcmliZUJhbGFuY2VzQW5kQ3Jvd2Rsb2FucyhjdXJyZW50QWRkcmVzcywgdGhpcy5zdGF0ZS5nZXRDaGFpbkluZm9NYXAoKSwgdGhpcy5zdGF0ZS5nZXRDaGFpblN0YXRlTWFwKCksIHRoaXMuc3RhdGUuZ2V0U3Vic3RyYXRlQXBpTWFwKCksIHRoaXMuc3RhdGUuZ2V0RXZtQXBpTWFwKCkpO1xuICAgICAgdGhpcy5zdWJzY3JpYmVTdGFraW5nT25DaGFpbihjdXJyZW50QWRkcmVzcywgdGhpcy5zdGF0ZS5nZXRTdWJzdHJhdGVBcGlNYXAoKSk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudEhhbmRsZXIgPSAoZXZlbnRzLCBldmVudFR5cGVzKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlSW5mbyA9IHRoaXMuc3RhdGUuZ2V0U2VydmljZUluZm8oKTtcbiAgICAgIGNvbnN0IG5lZWRSZWxvYWQgPSBldmVudFR5cGVzLnNvbWUoKGV2ZW50VHlwZSkgPT4gQ09NTU9OX1JFTE9BRF9FVkVOVFMuaW5jbHVkZXMoZXZlbnRUeXBlKSk7XG5cbiAgICAgIGlmICghbmVlZFJlbG9hZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFkZHJlc3MgPSBzZXJ2aWNlSW5mby5jdXJyZW50QWNjb3VudEluZm8/LmFkZHJlc3M7XG5cbiAgICAgIGlmICghYWRkcmVzcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3Vic2NyaWJlQmFsYW5jZXNBbmRDcm93ZGxvYW5zKGFkZHJlc3MsIHNlcnZpY2VJbmZvLmNoYWluSW5mb01hcCwgc2VydmljZUluZm8uY2hhaW5TdGF0ZU1hcCwgc2VydmljZUluZm8uY2hhaW5BcGlNYXAuc3Vic3RyYXRlLCBzZXJ2aWNlSW5mby5jaGFpbkFwaU1hcC5ldm0pO1xuICAgICAgdGhpcy5zdWJzY3JpYmVTdGFraW5nT25DaGFpbihhZGRyZXNzLCBzZXJ2aWNlSW5mby5jaGFpbkFwaU1hcC5zdWJzdHJhdGUpO1xuICAgIH07XG5cbiAgICB0aGlzLnN0YXRlLmV2ZW50U2VydmljZS5vbkxhenkodGhpcy5ldmVudEhhbmRsZXIpO1xuICB9XG5cbiAgYXN5bmMgc3RvcCAoKSB7XG4gICAgaWYgKHRoaXMuZXZlbnRIYW5kbGVyKSB7XG4gICAgICB0aGlzLnN0YXRlLmV2ZW50U2VydmljZS5vZmZMYXp5KHRoaXMuZXZlbnRIYW5kbGVyKTtcbiAgICAgIHRoaXMuZXZlbnRIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMuc3RvcEFsbFN1YnNjcmlwdGlvbigpO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgc3Vic2NyaWJlQmFsYW5jZXNBbmRDcm93ZGxvYW5zIChhZGRyZXNzOiBzdHJpbmcsIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNoYWluU3RhdGVNYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpblN0YXRlPiwgc3Vic3RyYXRlQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfU3Vic3RyYXRlQXBpPiwgd2ViM0FwaU1hcDogUmVjb3JkPHN0cmluZywgX0V2bUFwaT4sIG9ubHlSdW5PbkZpcnN0VGltZT86IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0YXRlLmhhbmRsZVN3aXRjaEFjY291bnQoYWRkcmVzcykudGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBhZGRyZXNzZXMgPSB0aGlzLnN0YXRlLmdldERlY29kZWRBZGRyZXNzZXMoYWRkcmVzcyk7XG5cbiAgICAgIGlmICghYWRkcmVzc2VzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMudXBkYXRlU3Vic2NyaXB0aW9uKCdiYWxhbmNlJywgdGhpcy5pbml0QmFsYW5jZVN1YnNjcmlwdGlvbihhZGRyZXNzZXMsIGNoYWluSW5mb01hcCwgY2hhaW5TdGF0ZU1hcCwgc3Vic3RyYXRlQXBpTWFwLCB3ZWIzQXBpTWFwLCBvbmx5UnVuT25GaXJzdFRpbWUpKTtcbiAgICAgIHRoaXMudXBkYXRlU3Vic2NyaXB0aW9uKCdjcm93ZGxvYW4nLCB0aGlzLmluaXRDcm93ZGxvYW5TdWJzY3JpcHRpb24oYWRkcmVzc2VzLCBzdWJzdHJhdGVBcGlNYXAsIG9ubHlSdW5PbkZpcnN0VGltZSkpO1xuICAgIH0pLmNhdGNoKChlcnIpID0+IHRoaXMubG9nZ2VyLndhcm4oZXJyKSk7XG4gIH1cblxuICBzdWJzY3JpYmVTdGFraW5nT25DaGFpbiAoYWRkcmVzczogc3RyaW5nLCBzdWJzdHJhdGVBcGlNYXA6IFJlY29yZDxzdHJpbmcsIF9TdWJzdHJhdGVBcGk+LCBvbmx5UnVuT25GaXJzdFRpbWU/OiBib29sZWFuKSB7XG4gICAgdGhpcy5zdGF0ZS5yZXNldFN0YWtpbmcoYWRkcmVzcyk7XG4gICAgY29uc3QgYWRkcmVzc2VzID0gdGhpcy5zdGF0ZS5nZXREZWNvZGVkQWRkcmVzc2VzKGFkZHJlc3MpO1xuXG4gICAgaWYgKCFhZGRyZXNzZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTdWJzY3JpcHRpb24oJ3N0YWtpbmdPbkNoYWluJywgdGhpcy5pbml0U3Rha2luZ09uQ2hhaW5TdWJzY3JpcHRpb24oYWRkcmVzc2VzLCBzdWJzdHJhdGVBcGlNYXAsIG9ubHlSdW5PbkZpcnN0VGltZSkpO1xuICAgIHRoaXMudXBkYXRlU3Vic2NyaXB0aW9uKCdlc3NlbnRpYWxDaGFpblN0YWtpbmdNZXRhZGF0YScsIHRoaXMuaW5pdEVzc2VudGlhbENoYWluU3Rha2luZ01ldGFkYXRhU3Vic2NyaXB0aW9uKHN1YnN0cmF0ZUFwaU1hcCwgb25seVJ1bk9uRmlyc3RUaW1lKSk7IC8vIFRPRE86IG1pZ2h0IG5vdCBuZWVkIHRvIHJlLXN1YnNjcmliZSBvbiBjaGFuZ2luZyBhY2NvdW50XG4gIH1cblxuICBpbml0U3Rha2luZ09uQ2hhaW5TdWJzY3JpcHRpb24gKGFkZHJlc3Nlczogc3RyaW5nW10sIHN1YnN0cmF0ZUFwaU1hcDogUmVjb3JkPHN0cmluZywgX1N1YnN0cmF0ZUFwaT4sIG9ubHlSdW5PbkZpcnN0VGltZT86IGJvb2xlYW4pIHtcbiAgICBjb25zdCBzdGFraW5nQ2FsbGJhY2sgPSAobmV0d29ya0tleTogc3RyaW5nLCByczogU3Rha2luZ0l0ZW0pID0+IHtcbiAgICAgIHRoaXMuc3RhdGUuc2V0U3Rha2luZ0l0ZW0obmV0d29ya0tleSwgcnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBub21pbmF0b3JTdGF0ZUNhbGxiYWNrID0gKG5vbWluYXRvck1ldGFkYXRhOiBOb21pbmF0b3JNZXRhZGF0YSkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZS51cGRhdGVTdGFraW5nTm9taW5hdG9yTWV0YWRhdGEobm9taW5hdG9yTWV0YWRhdGEpO1xuICAgIH07XG5cbiAgICBjb25zdCB1bnN1YiA9IHN0YWtpbmdPbkNoYWluQXBpKGFkZHJlc3Nlcywgc3Vic3RyYXRlQXBpTWFwLCB0aGlzLnN0YXRlLmdldEFjdGl2ZUNoYWluSW5mb01hcCgpLCBzdGFraW5nQ2FsbGJhY2ssIG5vbWluYXRvclN0YXRlQ2FsbGJhY2spO1xuXG4gICAgaWYgKG9ubHlSdW5PbkZpcnN0VGltZSkge1xuICAgICAgdW5zdWIgJiYgdW5zdWIoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1YiAmJiB1bnN1YigpO1xuICAgIH07XG4gIH1cblxuICBpbml0RXNzZW50aWFsQ2hhaW5TdGFraW5nTWV0YWRhdGFTdWJzY3JpcHRpb24gKHN1YnN0cmF0ZUFwaU1hcDogUmVjb3JkPHN0cmluZywgX1N1YnN0cmF0ZUFwaT4sIG9ubHlSdW5PbkZpcnN0VGltZT86IGJvb2xlYW4pIHtcbiAgICBjb25zdCB1bnN1YiA9IHN1YnNjcmliZUVzc2VudGlhbENoYWluU3Rha2luZ01ldGFkYXRhKHN1YnN0cmF0ZUFwaU1hcCwgdGhpcy5zdGF0ZS5nZXRBY3RpdmVDaGFpbkluZm9NYXAoKSwgKG5ldHdvcmtLZXksIHJzKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlLnVwZGF0ZUNoYWluU3Rha2luZ01ldGFkYXRhKHJzLCB7XG4gICAgICAgIGVyYTogcnMuZXJhLFxuICAgICAgICBtaW5TdGFrZTogcnMubWluU3Rha2UsXG4gICAgICAgIG1heFZhbGlkYXRvclBlck5vbWluYXRvcjogcnMubWF4VmFsaWRhdG9yUGVyTm9taW5hdG9yLCAvLyB0ZW1wb3JhcnkgZml4IGZvciBBc3RhciwgdGhlcmUncyBubyBsaW1pdCBmb3Igbm93XG4gICAgICAgIG1heFdpdGhkcmF3YWxSZXF1ZXN0UGVyVmFsaWRhdG9yOiBycy5tYXhXaXRoZHJhd2FsUmVxdWVzdFBlclZhbGlkYXRvciwgLy8gYnkgZGVmYXVsdFxuICAgICAgICBhbGxvd0NhbmNlbFVuc3Rha2luZzogcnMuYWxsb3dDYW5jZWxVbnN0YWtpbmcsXG4gICAgICAgIHVuc3Rha2luZ1BlcmlvZDogcnMudW5zdGFraW5nUGVyaW9kLFxuICAgICAgICBleHBlY3RlZFJldHVybjogcnMuZXhwZWN0ZWRSZXR1cm4sXG4gICAgICAgIGluZmxhdGlvbjogcnMuaW5mbGF0aW9uXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmIChvbmx5UnVuT25GaXJzdFRpbWUpIHtcbiAgICAgIHVuc3ViICYmIHVuc3ViKCk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdW5zdWIgJiYgdW5zdWIoKTtcbiAgICB9O1xuICB9XG5cbiAgaW5pdEJhbGFuY2VTdWJzY3JpcHRpb24gKGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGNoYWluU3RhdGVNYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpblN0YXRlPiwgc3Vic3RyYXRlQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfU3Vic3RyYXRlQXBpPiwgZXZtQXBpTWFwOiBSZWNvcmQ8c3RyaW5nLCBfRXZtQXBpPiwgb25seVJ1bk9uRmlyc3RUaW1lPzogYm9vbGVhbikge1xuICAgIGNvbnN0IGZpbHRlcmVkQ2hhaW5JbmZvTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPiA9IHt9O1xuXG4gICAgT2JqZWN0LnZhbHVlcyhjaGFpblN0YXRlTWFwKS5mb3JFYWNoKChjaGFpblN0YXRlKSA9PiB7XG4gICAgICBpZiAoY2hhaW5TdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgZmlsdGVyZWRDaGFpbkluZm9NYXBbY2hhaW5TdGF0ZS5zbHVnXSA9IGNoYWluSW5mb01hcFtjaGFpblN0YXRlLnNsdWddO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgdW5zdWIgPSBzdWJzY3JpYmVCYWxhbmNlKGFkZHJlc3NlcywgZmlsdGVyZWRDaGFpbkluZm9NYXAsIHN1YnN0cmF0ZUFwaU1hcCwgZXZtQXBpTWFwLCAocmVzdWx0KSA9PiB7XG4gICAgICB0aGlzLnN0YXRlLnNldEJhbGFuY2VJdGVtKHJlc3VsdC50b2tlblNsdWcsIHJlc3VsdCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCB1bnN1YjIgPSB0aGlzLnN0YXRlLnN1YnNjcmliZU1hbnRhUGF5QmFsYW5jZSgpO1xuXG4gICAgaWYgKG9ubHlSdW5PbkZpcnN0VGltZSkge1xuICAgICAgdW5zdWIgJiYgdW5zdWIoKTtcbiAgICAgIHVuc3ViMiAmJiB1bnN1YjIoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1YiAmJiB1bnN1YigpO1xuICAgICAgdW5zdWIyICYmIHVuc3ViMigpO1xuICAgIH07XG4gIH1cblxuICBpbml0Q3Jvd2Rsb2FuU3Vic2NyaXB0aW9uIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBzdWJzdHJhdGVBcGlNYXA6IFJlY29yZDxzdHJpbmcsIF9TdWJzdHJhdGVBcGk+LCBvbmx5UnVuT25GaXJzdFRpbWU/OiBib29sZWFuKSB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uUHJvbWlzZSA9IHN1YnNjcmliZUNyb3dkbG9hbihhZGRyZXNzZXMsIHN1YnN0cmF0ZUFwaU1hcCwgKG5ldHdvcmtLZXksIHJzKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlLnNldENyb3dkbG9hbkl0ZW0obmV0d29ya0tleSwgcnMpO1xuICAgIH0sIHRoaXMuc3RhdGUuZ2V0Q2hhaW5JbmZvTWFwKCkpO1xuXG4gICAgaWYgKG9ubHlSdW5PbkZpcnN0VGltZSkge1xuICAgICAgc3Vic2NyaXB0aW9uUHJvbWlzZS50aGVuKCh1bnN1YikgPT4gdW5zdWIoKSkuY2F0Y2godGhpcy5sb2dnZXIud2Fybik7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3Vic2NyaXB0aW9uUHJvbWlzZS50aGVuKCh1bnN1YikgPT4gdW5zdWIoKSkuY2F0Y2godGhpcy5sb2dnZXIud2Fybik7XG4gICAgfTtcbiAgfVxuXG4gIHN1YnNjcmliZU5mdCAoYWRkcmVzczogc3RyaW5nLCBzdWJzdHJhdGVBcGlNYXA6IFJlY29yZDxzdHJpbmcsIF9TdWJzdHJhdGVBcGk+LCBldm1BcGlNYXA6IFJlY29yZDxzdHJpbmcsIF9Fdm1BcGk+LCBzbWFydENvbnRyYWN0TmZ0czogX0NoYWluQXNzZXRbXSwgY2hhaW5JbmZvTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPikge1xuICAgIGNvbnN0IGFkZHJlc3NlcyA9IHRoaXMuc3RhdGUuZ2V0RGVjb2RlZEFkZHJlc3NlcyhhZGRyZXNzKTtcblxuICAgIGlmICghYWRkcmVzc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaW5pdE5mdFN1YnNjcmlwdGlvbihhZGRyZXNzZXMsIHN1YnN0cmF0ZUFwaU1hcCwgZXZtQXBpTWFwLCBzbWFydENvbnRyYWN0TmZ0cywgY2hhaW5JbmZvTWFwKTtcbiAgfVxuXG4gIGluaXROZnRTdWJzY3JpcHRpb24gKGFkZHJlc3Nlczogc3RyaW5nW10sIHN1YnN0cmF0ZUFwaU1hcDogUmVjb3JkPHN0cmluZywgX1N1YnN0cmF0ZUFwaT4sIGV2bUFwaU1hcDogUmVjb3JkPHN0cmluZywgX0V2bUFwaT4sIHNtYXJ0Q29udHJhY3ROZnRzOiBfQ2hhaW5Bc3NldFtdLCBjaGFpbkluZm9NYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+KSB7XG4gICAgbmZ0SGFuZGxlci5zZXRDaGFpbkluZm9NYXAoY2hhaW5JbmZvTWFwKTtcbiAgICBuZnRIYW5kbGVyLnNldERvdFNhbWFBcGlNYXAoc3Vic3RyYXRlQXBpTWFwKTtcbiAgICBuZnRIYW5kbGVyLnNldFdlYjNBcGlNYXAoZXZtQXBpTWFwKTtcbiAgICBuZnRIYW5kbGVyLnNldEFkZHJlc3NlcyhhZGRyZXNzZXMpO1xuXG4gICAgbmZ0SGFuZGxlci5oYW5kbGVOZnRzKFxuICAgICAgc21hcnRDb250cmFjdE5mdHMsXG4gICAgICAoLi4uYXJncykgPT4gdGhpcy5zdGF0ZS51cGRhdGVOZnREYXRhKC4uLmFyZ3MpLFxuICAgICAgKC4uLmFyZ3MpID0+IHRoaXMuc3RhdGUuc2V0TmZ0Q29sbGVjdGlvbiguLi5hcmdzKVxuICAgICkuY2F0Y2godGhpcy5sb2dnZXIubG9nKTtcbiAgfVxuXG4gIGFzeW5jIHN1YnNjcmliZVN0YWtpbmdSZXdhcmQgKGFkZHJlc3M6IHN0cmluZykge1xuICAgIGNvbnN0IGFkZHJlc3NlcyA9IHRoaXMuc3RhdGUuZ2V0RGVjb2RlZEFkZHJlc3NlcyhhZGRyZXNzKTtcblxuICAgIGlmICghYWRkcmVzc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYWluSW5mb01hcCA9IHRoaXMuc3RhdGUuZ2V0Q2hhaW5JbmZvTWFwKCk7XG4gICAgY29uc3QgdGFyZ2V0TmV0d29ya01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4gPSB7fTtcblxuICAgIE9iamVjdC5lbnRyaWVzKGNoYWluSW5mb01hcCkuZm9yRWFjaCgoW2tleSwgbmV0d29ya10pID0+IHtcbiAgICAgIGNvbnN0IGNoYWluU3RhdGUgPSB0aGlzLnN0YXRlLmdldENoYWluU3RhdGVCeUtleShrZXkpO1xuXG4gICAgICBpZiAoX2lzQ2hhaW5FbmFibGVkKGNoYWluU3RhdGUpICYmIF9pc0NoYWluU3VwcG9ydFN1YnN0cmF0ZVN0YWtpbmcobmV0d29yaykpIHtcbiAgICAgICAgdGFyZ2V0TmV0d29ya01hcFtrZXldID0gbmV0d29yaztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGF3YWl0IGdldE5vbWluYXRpb25TdGFraW5nUmV3YXJkRGF0YShhZGRyZXNzZXMsIHRhcmdldE5ldHdvcmtNYXAsIChyZXdhcmRJdGVtOiBTdGFraW5nUmV3YXJkSXRlbSkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZS51cGRhdGVTdGFraW5nUmV3YXJkKHJld2FyZEl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc3Vic2NyaWJlU3Rha2luZ1Jld2FyZEZhc3RJbnRlcnZhbCAoYWRkcmVzczogc3RyaW5nKSB7XG4gICAgY29uc3QgYWRkcmVzc2VzID0gdGhpcy5zdGF0ZS5nZXREZWNvZGVkQWRkcmVzc2VzKGFkZHJlc3MpO1xuXG4gICAgaWYgKCFhZGRyZXNzZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9vbGVkU3Rha2luZ0l0ZW1zID0gYXdhaXQgdGhpcy5zdGF0ZS5nZXRQb29sZWRTdGFraW5nUmVjb3Jkc0J5QWRkcmVzcyhhZGRyZXNzZXMpO1xuXG4gICAgY29uc3QgcG9vbGVkQWRkcmVzc2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgcG9vbGVkU3Rha2luZ0l0ZW1zLmZvckVhY2goKHBvb2xlZEl0ZW0pID0+IHtcbiAgICAgIGlmICghcG9vbGVkQWRkcmVzc2VzLmluY2x1ZGVzKHBvb2xlZEl0ZW0uYWRkcmVzcykpIHtcbiAgICAgICAgcG9vbGVkQWRkcmVzc2VzLnB1c2gocG9vbGVkSXRlbS5hZGRyZXNzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGNoYWluSW5mb01hcCA9IHRoaXMuc3RhdGUuZ2V0Q2hhaW5JbmZvTWFwKCk7XG4gICAgY29uc3QgdGFyZ2V0Q2hhaW5NYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+ID0ge307XG5cbiAgICBPYmplY3QuZW50cmllcyhjaGFpbkluZm9NYXApLmZvckVhY2goKFtrZXksIG5ldHdvcmtdKSA9PiB7XG4gICAgICBjb25zdCBjaGFpblN0YXRlID0gdGhpcy5zdGF0ZS5nZXRDaGFpblN0YXRlQnlLZXkoa2V5KTtcblxuICAgICAgaWYgKF9pc0NoYWluRW5hYmxlZChjaGFpblN0YXRlKSAmJiBfaXNDaGFpblN1cHBvcnRTdWJzdHJhdGVTdGFraW5nKG5ldHdvcmspKSB7XG4gICAgICAgIHRhcmdldENoYWluTWFwW2tleV0gPSBuZXR3b3JrO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgYWN0aXZlTmV0d29ya3M6IHN0cmluZ1tdID0gW107XG5cbiAgICBPYmplY3Qua2V5cyh0YXJnZXRDaGFpbk1hcCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBhY3RpdmVOZXR3b3Jrcy5wdXNoKGtleSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCB1cGRhdGVTdGF0ZSA9IChyZXN1bHQ6IFN0YWtpbmdSZXdhcmRJdGVtKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlLnVwZGF0ZVN0YWtpbmdSZXdhcmQocmVzdWx0KTtcbiAgICB9O1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgZ2V0UG9vbGluZ1N0YWtpbmdSZXdhcmREYXRhKHBvb2xlZEFkZHJlc3NlcywgdGFyZ2V0Q2hhaW5NYXAsIHRoaXMuc3RhdGUuZ2V0U3Vic3RyYXRlQXBpTWFwKCksIHVwZGF0ZVN0YXRlKSxcbiAgICAgIGdldEFtcGxpdHVkZVVuY2xhaW1lZFN0YWtpbmdSZXdhcmQodGhpcy5zdGF0ZS5nZXRTdWJzdHJhdGVBcGlNYXAoKSwgYWRkcmVzc2VzLCBjaGFpbkluZm9NYXAsIGFjdGl2ZU5ldHdvcmtzLCB1cGRhdGVTdGF0ZSlcbiAgICBdKTtcbiAgfVxuXG4gIGFzeW5jIHJlbG9hZFN0YWtpbmcgKCkge1xuICAgIGNvbnN0IGN1cnJlbnRBZGRyZXNzID0gdGhpcy5zdGF0ZS5rZXlyaW5nU2VydmljZS5jdXJyZW50QWNjb3VudD8uYWRkcmVzcztcblxuICAgIHRoaXMuc3Vic2NyaWJlU3Rha2luZ09uQ2hhaW4oY3VycmVudEFkZHJlc3MsIHRoaXMuc3RhdGUuZ2V0U3Vic3RyYXRlQXBpTWFwKCkpO1xuXG4gICAgYXdhaXQgd2FpdFRpbWVvdXQoMTgwMCk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBCYWxhbmNlRXJyb3IgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvZXJyb3JzL0JhbGFuY2VFcnJvcic7XG5pbXBvcnQgeyBBbW91bnREYXRhLCBCYWxhbmNlRXJyb3JUeXBlLCBCYWxhbmNlSXRlbSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgc3Vic2NyaWJlRVZNQmFsYW5jZSwgc3Vic2NyaWJlU3Vic3RyYXRlQmFsYW5jZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9hcGkvZG90c2FtYS9iYWxhbmNlJztcbmltcG9ydCB7IHN0YXRlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2JhY2tncm91bmQvaGFuZGxlcnMnO1xuaW1wb3J0IHsgQ2hhaW5TZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlJztcbmltcG9ydCB7IF9QVVJFX0VWTV9DSEFJTlMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9nZXRDaGFpbk5hdGl2ZVRva2VuU2x1ZywgX2lzQ2hhaW5Fdm1Db21wYXRpYmxlLCBfaXNQdXJlRXZtQ2hhaW4gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgY2F0ZWdvcnlBZGRyZXNzZXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuZXhwb3J0IGNsYXNzIEJhbGFuY2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjaGFpblNlcnZpY2U6IENoYWluU2VydmljZTtcblxuICBjb25zdHJ1Y3RvciAoY2hhaW5TZXJ2aWNlOiBDaGFpblNlcnZpY2UpIHtcbiAgICB0aGlzLmNoYWluU2VydmljZSA9IGNoYWluU2VydmljZTtcblxuICAgIC8vIFRvZG86IExvYWQgZGF0YSBmcm9tIGRiIHRvIGJhbGFuY2VTdWJqZWN0XG4gICAgLy8gVG9kbzogU3RhcnQgIHN1YnNjcmliZSBiYWxhbmNlIGFuZCBkYXRhXG4gICAgLy8gVG9kbzogTGlzdGVuIGNoYW5nZSBhbmQgYXBwbHkgdG8gYmFsYW5jZVN1YmplY3RcbiAgICAvLyBUb2RvOiBBY3RpdmUvQ2hhaW5cbiAgICAvLyBUb2RvOiBBZGQvcmVtb3ZlIGFjY291bnRcbiAgICAvLyBUb2RvOiBBZGQgbmV3IGFjY291bnRcbiAgICAvLyBUb2RvOiBPcHRpbWl6ZSBnZXQgYmFsYW5jZSBmb3Igc2luZ2xlIGFjY291bnQgYW5kIGNoYWluIHdpdGggY2FjaGVcbiAgICAvLyBUb2RvOiBNb3ZlIGV2ZXJ5dGhpbmcgb2YgZmV0Y2hpbmcgYmFsYW5jZSB0byB0aGlzIHNlcnZpY2VcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdWJzY3JpYmVUb2tlbkZyZWVCYWxhbmNlIChhZGRyZXNzOiBzdHJpbmcsIGNoYWluOiBzdHJpbmcsIHRva2VuU2x1Zzogc3RyaW5nIHwgdW5kZWZpbmVkLCBjYWxsYmFjaz86IChyczogQW1vdW50RGF0YSkgPT4gdm9pZCk6IFByb21pc2U8WygpID0+IHZvaWQsIEFtb3VudERhdGFdPiB7XG4gICAgY29uc3QgY2hhaW5JbmZvID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvQnlLZXkoY2hhaW4pO1xuICAgIGNvbnN0IGNoYWluU3RhdGUgPSB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpblN0YXRlQnlLZXkoY2hhaW4pO1xuXG4gICAgaWYgKCFjaGFpbkluZm8gfHwgIWNoYWluU3RhdGUgfHwgIWNoYWluU3RhdGUuYWN0aXZlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEJhbGFuY2VFcnJvcihCYWxhbmNlRXJyb3JUeXBlLk5FVFdPUktfRVJST1IsIHQoJ3t7Y2hhaW59fSBpcyBpbmFjdGl2ZS4gUGxlYXNlIGVuYWJsZSBuZXR3b3JrJywgeyByZXBsYWNlOiB7IGNoYWluIH0gfSkpKTtcbiAgICB9XG5cbiAgICBjb25zdCB0U2x1ZyA9IHRva2VuU2x1ZyB8fCBfZ2V0Q2hhaW5OYXRpdmVUb2tlblNsdWcoY2hhaW5JbmZvKTtcbiAgICBjb25zdCB0b2tlbkluZm8gPSB0aGlzLmNoYWluU2VydmljZS5nZXRBc3NldEJ5U2x1Zyh0U2x1Zyk7XG5cbiAgICBpZiAoIXRva2VuSW5mbykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBCYWxhbmNlRXJyb3IoQmFsYW5jZUVycm9yVHlwZS5UT0tFTl9FUlJPUiwgdCgnVHJhbnNmZXIgaXMgY3VycmVudGx5IG5vdCBhdmFpbGFibGUgZm9yIHRoaXMgdG9rZW46IHt7dFNsdWd9fScsIHsgcmVwbGFjZTogeyBzbHVnOiB0U2x1ZyB9IH0pKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBoYXNFcnJvciA9IHRydWU7XG5cbiAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy5zdWJzY3JpYmVCYWxhbmNlKFthZGRyZXNzXSwgW2NoYWluXSwgKHJzKSA9PiB7XG4gICAgICAgIGlmIChycy50b2tlblNsdWcgPT09IHRTbHVnKSB7XG4gICAgICAgICAgaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICBjb25zdCBiYWxhbmNlID0ge1xuICAgICAgICAgICAgdmFsdWU6IHJzLmZyZWUsXG4gICAgICAgICAgICBkZWNpbWFsczogdG9rZW5JbmZvLmRlY2ltYWxzIHx8IDAsXG4gICAgICAgICAgICBzeW1ib2w6IHRva2VuSW5mby5zeW1ib2xcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhiYWxhbmNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQXV0byB1bnN1YnNjcmliZSBpZiBubyBjYWxsYmFja1xuICAgICAgICAgICAgdW5zdWIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXNvbHZlKFt1bnN1YiwgYmFsYW5jZV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgICAgIHVuc3ViKCk7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0KCdGYWlsZWQgdG8gZ2V0IGJhbGFuY2UuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gb3IgY2hhbmdlIHlvdXIgbmV0d29yayBlbmRwb2ludCcpKSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDk5OTkpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFRva2VuRnJlZUJhbGFuY2UgKGFkZHJlc3M6IHN0cmluZywgY2hhaW46IHN0cmluZywgdG9rZW5TbHVnPzogc3RyaW5nKSB7XG4gICAgY29uc3QgWywgYmFsYW5jZV0gPSBhd2FpdCB0aGlzLnN1YnNjcmliZVRva2VuRnJlZUJhbGFuY2UoYWRkcmVzcywgY2hhaW4sIHRva2VuU2x1Zyk7XG5cbiAgICByZXR1cm4gYmFsYW5jZTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVCYWxhbmNlIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbnM6IHN0cmluZ1tdIHwgbnVsbCwgY2FsbGJhY2s6IChyczogQmFsYW5jZUl0ZW0pID0+IHZvaWQpIHtcbiAgICBjb25zdCBbc3Vic3RyYXRlQWRkcmVzc2VzLCBldm1BZGRyZXNzZXNdID0gY2F0ZWdvcnlBZGRyZXNzZXMoYWRkcmVzc2VzKTtcbiAgICBjb25zdCBjaGFpbkluZm9NYXAgPSB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9NYXAoKTtcbiAgICBjb25zdCBjaGFpblN0YXRlTWFwID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5TdGF0ZU1hcCgpO1xuICAgIGNvbnN0IHN1YnN0cmF0ZUFwaU1hcCA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldFN1YnN0cmF0ZUFwaU1hcCgpO1xuICAgIGNvbnN0IGV2bUFwaU1hcCA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldEV2bUFwaU1hcCgpO1xuXG4gICAgLy8gR2V0IGRhdGEgZnJvbSBjaGFpbiBvciBhbGwgY2hhaW5zXG4gICAgY29uc3QgY2hhaW5MaXN0ID0gY2hhaW5zIHx8IE9iamVjdC5rZXlzKGNoYWluSW5mb01hcCk7XG4gICAgLy8gRmlsdGVyIGFjdGl2ZSBjaGFpbiBvbmx5XG4gICAgY29uc3QgdXNlQ2hhaW5JbmZvcyA9IGNoYWluTGlzdC5maWx0ZXIoKGMpID0+IGNoYWluU3RhdGVNYXBbY10gJiYgY2hhaW5TdGF0ZU1hcFtjXS5hY3RpdmUpLm1hcCgoYykgPT4gY2hhaW5JbmZvTWFwW2NdKTtcblxuICAgIC8vIExvb3Bpbmcgb3ZlciBlYWNoIGNoYWluXG4gICAgY29uc3QgdW5zdWJMaXN0ID0gdXNlQ2hhaW5JbmZvcy5tYXAoYXN5bmMgKGNoYWluSW5mbykgPT4ge1xuICAgICAgY29uc3QgY2hhaW5TbHVnID0gY2hhaW5JbmZvLnNsdWc7XG4gICAgICBjb25zdCB1c2VBZGRyZXNzZXMgPSBfaXNDaGFpbkV2bUNvbXBhdGlibGUoY2hhaW5JbmZvKSA/IGV2bUFkZHJlc3NlcyA6IHN1YnN0cmF0ZUFkZHJlc3NlcztcblxuICAgICAgaWYgKF9pc1B1cmVFdm1DaGFpbihjaGFpbkluZm8pKSB7XG4gICAgICAgIGNvbnN0IG5hdGl2ZVRva2VuSW5mbyA9IHN0YXRlLmdldE5hdGl2ZVRva2VuSW5mbyhjaGFpblNsdWcpO1xuXG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVFVk1CYWxhbmNlKGNoYWluU2x1ZywgdXNlQWRkcmVzc2VzLCBldm1BcGlNYXAsIGNhbGxiYWNrLCBuYXRpdmVUb2tlbkluZm8pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXVzZUFkZHJlc3NlcyB8fCB1c2VBZGRyZXNzZXMubGVuZ3RoID09PSAwIHx8IF9QVVJFX0VWTV9DSEFJTlMuaW5kZXhPZihjaGFpblNsdWcpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV0d29ya0FQSSA9IGF3YWl0IHN1YnN0cmF0ZUFwaU1hcFtjaGFpblNsdWddLmlzUmVhZHk7XG5cbiAgICAgIHJldHVybiBzdWJzY3JpYmVTdWJzdHJhdGVCYWxhbmNlKHVzZUFkZHJlc3NlcywgY2hhaW5JbmZvLCBjaGFpblNsdWcsIG5ldHdvcmtBUEksIGV2bUFwaU1hcCwgY2FsbGJhY2spO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHVuc3ViTGlzdC5mb3JFYWNoKChzdWJQcm9tKSA9PiB7XG4gICAgICAgIHN1YlByb20udGhlbigodW5zdWIpID0+IHtcbiAgICAgICAgICB1bnN1YiAmJiB1bnN1YigpO1xuICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuLy8gJ2luaXQnIHwgJ3N0YXJ0ZWQnIHwgJ3N0YXJ0aW5nJyB8ICdzdG9wcGVkJyB8ICdzdG9wcGluZydcbmltcG9ydCB7IFByb21pc2VIYW5kbGVyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscy9wcm9taXNlJztcblxuZXhwb3J0IGVudW0gU2VydmljZVN0YXR1cyB7XG4gIE5PVF9JTklUSUFMSVpFRCA9ICdub3RfaW5pdGlhbGl6ZWQnLFxuICBJTklUSUFMSVpJTkcgPSAnaW5pdGlhbGl6aW5nJyxcbiAgSU5JVElBTElaRUQgPSAnaW5pdGlhbGl6ZWQnLFxuICBTVEFSVEVEID0gJ3N0YXJ0ZWQnLFxuICBTVEFSVElORyA9ICdzdGFydGluZycsXG4gIFNUT1BQRUQgPSAnc3RvcHBlZCcsXG4gIFNUT1BQSU5HID0gJ3N0b3BwaW5nJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb3JlU2VydmljZUludGVyZmFjZSB7XG4gIHN0YXR1czogU2VydmljZVN0YXR1cztcbiAgaW5pdDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgc3RhcnRQcm9taXNlSGFuZGxlcjogUHJvbWlzZUhhbmRsZXI8dm9pZD47XG4gIHN0YXJ0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB3YWl0Rm9yU3RhcnRlZDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdG9wcGFibGVTZXJ2aWNlSW50ZXJmYWNlIGV4dGVuZHMgQ29yZVNlcnZpY2VJbnRlcmZhY2Uge1xuICBzdG9wUHJvbWlzZUhhbmRsZXI6IFByb21pc2VIYW5kbGVyPHZvaWQ+O1xuICBzdG9wOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB3YWl0Rm9yU3RvcHBlZDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJzaXN0RGF0YVNlcnZpY2VJbnRlcmZhY2Uge1xuICBsb2FkRGF0YTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcGVyc2lzdERhdGE6ICgpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaWJlU2VydmljZUludGVyZmFjZSB7XG4gIHN1YnNjcmliZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgdW5zdWJzY3JpYmU6ICgpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JvblNlcnZpY2VJbnRlcmZhY2Uge1xuICBzdGFydENyb246ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHN0b3BDcm9uOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgaGVhZGVyL2hlYWRlciAqL1xyXG5leHBvcnQgY29uc3QgQXNzZXRMb2dvTWFwID0ge1xyXG4gIGRlZmF1bHQ6ICdodHRwczovL2dmeHZzc3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvZ2Z4dnNjb250YWluZXIvYWlnZW50LWxvZ28ucG5nJyxcclxuICAvLyAna3VzYW1hLW5hdGl2ZS1rc20nOiAnaHR0cHM6Ly9jaGFpbi1saXN0LWFzc2V0cy5zdWJ3YWxsZXQuYXBwL2Fzc2V0cy9jaGFpbi1hc3NldHMva3VzYW1hLW5hdGl2ZS1rc20ucG5nJyxcclxuICBhaWdlbnQ6ICdodHRwczovL2dmeHZzc3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvZ2Z4dnNjb250YWluZXIvYWlnZW50LWxvZ28ucG5nJyxcclxuICAnZXRoZXJldW0tbmF0aXZlLWV0aCc6ICdodHRwczovL2Rldi5zdy1jaGFpbi1saXN0LWFzc2V0cy5wYWdlcy5kZXYvYXNzZXRzL2NoYWluLWFzc2V0cy9ldGhlcmV1bS1uYXRpdmUtZXRoLnBuZycsXHJcbiAgJ3NvcmFfc3Vic3RyYXRlLW5hdGl2ZS14b3InOiAnaHR0cHM6Ly9kZXYuc3ctY2hhaW4tbGlzdC1hc3NldHMucGFnZXMuZGV2L2Fzc2V0cy9jaGFpbi1hc3NldHMvc29yYV9zdWJzdHJhdGUtbmF0aXZlLXhvci5wbmcnLFxyXG59O1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBoZWFkZXIvaGVhZGVyICovXHJcbmV4cG9ydCBjb25zdCBBc3NldFJlZk1hcCA9IHtcclxuICAnYWlnZW50LU5BVElWRS1BSUdFTlQnOiB7XHJcbiAgICBzcmNBc3NldDogJ2FpZ2VudC1OQVRJVkUtQUlHRU5UJyxcclxuICAgIGRlc3RBc3NldDogJ2FpZ2VudC1MT0NBTC14Y0FJR0VOVCcsXHJcbiAgICBzcmNDaGFpbjogJ2FpZ2VudCcsXHJcbiAgICBkZXN0Q2hhaW46ICdhaWdlbnQnLFxyXG4gICAgcGF0aDogJ0FJR0VOVCdcclxuICB9XHJcbiAgLy8gJ2t1c2FtYS1OQVRJVkUtS1NNX19fc3RhdGVtaW5lLU5BVElWRS1LU00nOiB7XHJcbiAgLy8gICBzcmNBc3NldDogJ2t1c2FtYS1OQVRJVkUtS1NNJyxcclxuICAvLyAgIGRlc3RBc3NldDogJ3N0YXRlbWluZS1OQVRJVkUtS1NNJyxcclxuICAvLyAgIHNyY0NoYWluOiAna3VzYW1hJyxcclxuICAvLyAgIGRlc3RDaGFpbjogJ3N0YXRlbWluZScsXHJcbiAgLy8gICBwYXRoOiAnWENNJ1xyXG4gIC8vIH1cclxufTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgaGVhZGVyL2hlYWRlciAqL1xyXG5leHBvcnQgY29uc3QgQ2hhaW5Bc3NldE1hcCA9IHtcclxuICAvLyAna3VzYW1hLU5BVElWRS1LU00nOiB7XHJcbiAgLy8gICBvcmlnaW5DaGFpbjogJ2t1c2FtYScsXHJcbiAgLy8gICBzbHVnOiAna3VzYW1hLU5BVElWRS1LU00nLFxyXG4gIC8vICAgbmFtZTogJ0t1c2FtYScsXHJcbiAgLy8gICBzeW1ib2w6ICdLU00nLFxyXG4gIC8vICAgZGVjaW1hbHM6IDEyLFxyXG4gIC8vICAgcHJpY2VJZDogJ2t1c2FtYScsXHJcbiAgLy8gICBtaW5BbW91bnQ6ICczMzMzMzMzMzMnLFxyXG4gIC8vICAgYXNzZXRUeXBlOiAnTkFUSVZFJyxcclxuICAvLyAgIG1ldGFkYXRhOiB7XHJcbiAgLy8gICAgIG11bHRpbG9jYXRpb246IHtcclxuICAvLyAgICAgICBwYXJlbnRzOiAwLFxyXG4gIC8vICAgICAgIGludGVyaW9yOiAnSGVyZSdcclxuICAvLyAgICAgfVxyXG4gIC8vICAgfSxcclxuICAvLyAgIG11bHRpQ2hhaW5Bc3NldDogJ0tTTS1LdXNhbWEnLFxyXG4gIC8vICAgaGFzVmFsdWU6IHRydWUsXHJcbiAgLy8gICBpY29uOiAnaHR0cHM6Ly9jaGFpbi1saXN0LWFzc2V0cy5zdWJ3YWxsZXQuYXBwL2Fzc2V0cy9jaGFpbi1hc3NldHMva3VzYW1hLW5hdGl2ZS1rc20ucG5nJ1xyXG4gIC8vIH0sXHJcbiAgJ2FpZ2VudC1OQVRJVkUtQUlHRU5UJzoge1xyXG4gICAgb3JpZ2luQ2hhaW46ICdhaWdlbnQnLFxyXG4gICAgc2x1ZzogJ2FpZ2VudC1OQVRJVkUtQUlHRU5UJyxcclxuICAgIG5hbWU6ICdBSUdFTlQnLFxyXG4gICAgc3ltYm9sOiAnQUlHRU5UJyxcclxuICAgIGRlY2ltYWxzOiAxOCxcclxuICAgIHByaWNlSWQ6ICdhaWdlbnQnLFxyXG4gICAgbWluQW1vdW50OiAnNTAwJyxcclxuICAgIGFzc2V0VHlwZTogJ05BVElWRScsXHJcbiAgICBtZXRhZGF0YTogbnVsbCxcclxuICAgIG11bHRpQ2hhaW5Bc3NldDogbnVsbCxcclxuICAgIGhhc1ZhbHVlOiB0cnVlLFxyXG4gICAgaWNvbjogJ2h0dHBzOi8vZ2Z4dnNzdG9yYWdlLmJsb2IuY29yZS53aW5kb3dzLm5ldC9nZnh2c2NvbnRhaW5lci9haWdlbnQtbG9nby5wbmcnXHJcbiAgfVxyXG59O1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBoZWFkZXIvaGVhZGVyICovXHJcbmV4cG9ydCBjb25zdCBDaGFpbkluZm9NYXAgPSB7XHJcbiAgLy8ga3VzYW1hOiB7XHJcbiAgLy8gICBzbHVnOiAna3VzYW1hJyxcclxuICAvLyAgIG5hbWU6ICdLdXNhbWEnLFxyXG4gIC8vICAgaXNUZXN0bmV0OiBmYWxzZSxcclxuICAvLyAgIGNoYWluU3RhdHVzOiAnQUNUSVZFJyxcclxuICAvLyAgIGljb246ICdodHRwczovL2NoYWluLWxpc3QtYXNzZXRzLnN1YndhbGxldC5hcHAvYXNzZXRzL2NoYWlucy9rdXNhbWEucG5nJyxcclxuICAvLyAgIHByb3ZpZGVyczoge1xyXG4gIC8vICAgICBSYWRpdW1CbG9jazogJ3dzczovL2t1c2FtYS5wdWJsaWMuY3VyaWUucmFkaXVtYmxvY2suY28vd3MnLFxyXG4gIC8vICAgICBMdWNreUZyaWRheTogJ3dzczovL3JwYy1rdXNhbWEubHVja3lmcmlkYXkuaW8nLFxyXG4gIC8vICAgICBTdGFrZXdvcmxkOiAnd3NzOi8va3NtLXJwYy5zdGFrZXdvcmxkLmlvJyxcclxuICAvLyAgICAgJ0lCUC1HZW9ETlMxJzogJ3dzczovL3JwYy5pYnAubmV0d29yay9rdXNhbWEnLFxyXG4gIC8vICAgICAnTGlnaHQgQ2xpZW50JzogJ2xpZ2h0Oi8vc3Vic3RyYXRlLWNvbm5lY3Qva3VzYW1hJ1xyXG4gIC8vICAgfSxcclxuICAvLyAgIGV2bUluZm86IG51bGwsXHJcbiAgLy8gICBzdWJzdHJhdGVJbmZvOiB7XHJcbiAgLy8gICAgIHJlbGF5U2x1ZzogbnVsbCxcclxuICAvLyAgICAgcGFyYUlkOiBudWxsLFxyXG4gIC8vICAgICBnZW5lc2lzSGFzaDogJzB4YjBhOGQ0OTMyODVjMmRmNzMyOTBkZmI3ZTYxZjg3MGYxN2I0MTgwMTE5N2ExNDljYTkzNjU0NDk5ZWEzZGFmZScsXHJcbiAgLy8gICAgIGFkZHJlc3NQcmVmaXg6IDIsXHJcbiAgLy8gICAgIGNoYWluVHlwZTogJ1JFTEFZQ0hBSU4nLFxyXG4gIC8vICAgICBjcm93ZGxvYW5Vcmw6IG51bGwsXHJcbiAgLy8gICAgIGJsb2NrRXhwbG9yZXI6ICdodHRwczovL2t1c2FtYS5zdWJzY2FuLmlvLycsXHJcbiAgLy8gICAgIGV4aXN0ZW50aWFsRGVwb3NpdDogJzMzMzMzMzMzMycsXHJcbiAgLy8gICAgIHN5bWJvbDogJ0tTTScsXHJcbiAgLy8gICAgIGRlY2ltYWxzOiAxMixcclxuICAvLyAgICAgaGFzTmF0aXZlTmZ0OiB0cnVlLFxyXG4gIC8vICAgICBzdXBwb3J0U3Rha2luZzogdHJ1ZSxcclxuICAvLyAgICAgc3VwcG9ydFNtYXJ0Q29udHJhY3Q6IG51bGwsXHJcbiAgLy8gICAgIGNyb3dkbG9hblBhcmFJZDogbnVsbCxcclxuICAvLyAgICAgY3Jvd2Rsb2FuRnVuZHM6IFtdXHJcbiAgLy8gICB9LFxyXG4gIC8vICAgZXh0cmFJbmZvOiB7XHJcbiAgLy8gICAgIHN1YnNjYW5TbHVnOiAna3VzYW1hJyxcclxuICAvLyAgICAgY2hhaW5CYWxhbmNlU2x1ZzogJ2t1c2FtYSdcclxuICAvLyAgIH0sXHJcbiAgLy8gICBiaXRjb2luSW5mbzogbnVsbCxcclxuICAvLyAgIHRvbkluZm86IG51bGxcclxuICAvLyB9LFxyXG4gIGFpZ2VudDoge1xyXG4gICAgc2x1ZzogJ2FpZ2VudCcsXHJcbiAgICBuYW1lOiAnQUlHRU5UJyxcclxuICAgIGlzVGVzdG5ldDogZmFsc2UsXHJcbiAgICBjaGFpblN0YXR1czogJ0FDVElWRScsXHJcbiAgICBpY29uOiAnaHR0cHM6Ly9nZnh2c3N0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L2dmeHZzY29udGFpbmVyL2FpZ2VudC1sb2dvLnBuZycsXHJcbiAgICBwcm92aWRlcnM6IHtcclxuICAgICAgYWlnZW50OiAnd3NzOi8vYmFja2VuZC5haS1nZW50cy5pbydcclxuICAgIH0sXHJcbiAgICBldm1JbmZvOiBudWxsLFxyXG4gICAgc3Vic3RyYXRlSW5mbzoge1xyXG4gICAgICByZWxheVNsdWc6IG51bGwsXHJcbiAgICAgIHBhcmFJZDogMCxcclxuICAgICAgZ2VuZXNpc0hhc2g6ICcweDkxNzgxM2MzNmM3YjEzNDZkNjg5NTQ1OGRkYTA0ZjI0YzBmZjc3MWVjN2NkNjc2ZmM1ZmU5M2ZiYzIyM2UwOTgnLFxyXG4gICAgICBhZGRyZXNzUHJlZml4OiA0MixcclxuICAgICAgY2hhaW5UeXBlOiAnUkVMQVlDSEFJTicsXHJcbiAgICAgIGNyb3dkbG9hblVybDogbnVsbCxcclxuICAgICAgYmxvY2tFeHBsb3JlcjogJ2h0dHBzOi8vdGVzdG5ldC5haS1nZW50cy5pby8jL2V4cGxvcmVyJyxcclxuICAgICAgZXhpc3RlbnRpYWxEZXBvc2l0OiAnNTAwJyxcclxuICAgICAgc3ltYm9sOiAnQUlHRU5UJyxcclxuICAgICAgZGVjaW1hbHM6IDE4LFxyXG4gICAgICBoYXNOYXRpdmVOZnQ6IGZhbHNlLFxyXG4gICAgICBzdXBwb3J0U3Rha2luZzogdHJ1ZSxcclxuICAgICAgc3VwcG9ydFNtYXJ0Q29udHJhY3Q6IG51bGwsXHJcbiAgICAgIGNyb3dkbG9hblBhcmFJZDogbnVsbCxcclxuICAgICAgY3Jvd2Rsb2FuRnVuZHM6IFtdXHJcbiAgICB9LFxyXG4gICAgZXh0cmFJbmZvOiB7XHJcbiAgICAgIHN1YnNjYW5TbHVnOiAnYWlnZW50J1xyXG4gICAgfSxcclxuICAgIGJpdGNvaW5JbmZvOiBudWxsLFxyXG4gICAgdG9uSW5mbzogbnVsbFxyXG4gIH1cclxufTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgaGVhZGVyL2hlYWRlciAqL1xyXG5leHBvcnQgY29uc3QgQ2hhaW5Mb2dvTWFwID0ge1xyXG4gIGRlZmF1bHQ6ICdodHRwczovL2dmeHZzc3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvZ2Z4dnNjb250YWluZXIvYWlnZW50LWxvZ28ucG5nJyxcclxuICAvLyBrdXNhbWE6ICdodHRwczovL2NoYWluLWxpc3QtYXNzZXRzLnN1YndhbGxldC5hcHAvYXNzZXRzL2NoYWlucy9rdXNhbWEucG5nJyxcclxuICBhaWdlbnQ6ICdodHRwczovL2dmeHZzc3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvZ2Z4dnNjb250YWluZXIvYWlnZW50LWxvZ28ucG5nJ1xyXG59O1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBoZWFkZXIvaGVhZGVyICovXHJcbmV4cG9ydCBjb25zdCBNdWx0aUNoYWluQXNzZXRNYXAgPSB7XHJcbiAgYWlnZW50OiB7XHJcbiAgICBzbHVnOiAnYWlnZW50JyxcclxuICAgIG9yaWdpbkNoYWluQXNzZXQ6ICdhaWdlbnQnLFxyXG4gICAgbmFtZTogJ0FJR0VOVCcsXHJcbiAgICBzeW1ib2w6ICdBSUdFTlQnLFxyXG4gICAgcHJpY2VJZDogJ2FpZ2VudCcsXHJcbiAgICBoYXNWYWx1ZTogdHJ1ZSxcclxuICAgIGljb246ICdodHRwczovL2dmeHZzc3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvZ2Z4dnNjb250YWluZXIvYWlnZW50LWxvZ28ucG5nJ1xyXG4gIH1cclxuICAvLyAnS1NNLUt1c2FtYSc6IHtcclxuICAvLyAgIHNsdWc6ICdLU00tS3VzYW1hJyxcclxuICAvLyAgIG9yaWdpbkNoYWluQXNzZXQ6ICdrdXNhbWEtTkFUSVZFLUtTTScsXHJcbiAgLy8gICBuYW1lOiAnS3VzYW1hJyxcclxuICAvLyAgIHN5bWJvbDogJ0tTTScsXHJcbiAgLy8gICBwcmljZUlkOiAna3VzYW1hJyxcclxuICAvLyAgIGhhc1ZhbHVlOiB0cnVlLFxyXG4gIC8vICAgaWNvbjogJ2h0dHBzOi8vY2hhaW4tbGlzdC1hc3NldHMuc3Vid2FsbGV0LmFwcC9hc3NldHMvbXVsdGktY2hhaW4tYXNzZXRzL2tzbS1rdXNhbWEucG5nJ1xyXG4gIC8vIH1cclxufTtcclxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IENoYWluU2VydmljZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZSc7XG5pbXBvcnQgeyBfQXBpT3B0aW9ucyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL3R5cGVzJztcbmltcG9ydCB7IF9DaGFpbkJhc2VBcGksIF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmNvbnN0IE1BWF9SRUNPVkVSX1JFVFJZID0gNjtcblxuZXhwb3J0IGNvbnN0IEZJUlNUX1JFQ09OTkVDVF9USU1FID0gMzAwMDtcbmV4cG9ydCBjb25zdCBTSE9SVF9SRVRSWV9USU1FID0gMjAwMDA7XG4vLyBleHBvcnQgY29uc3QgTE9OR19SRVRSWV9USU1FID0gNjAwMDA7XG5cbmludGVyZmFjZSBSZXRyeU9iamVjdCB7XG4gIHJldHJ5VGltZXM6IG51bWJlcjtcbiAgdGltZW91dD86IE5vZGVKUy5UaW1lcjtcbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0Q2hhaW5IYW5kbGVyIHtcbiAgcmVhZG9ubHkgYXBpU3RhdGVNYXBTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzPj4oe30pO1xuICAvLyBSZWNvdmVyIHJldHJ5IHRpbWVzXG4gIHByb3RlY3RlZCByZWNvdmVyTWFwOiBSZWNvcmQ8c3RyaW5nLCBSZXRyeU9iamVjdD47XG4gIHByb3RlY3RlZCBpc1NsZWVwaW5nID0gZmFsc2U7XG5cbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yIChwcm90ZWN0ZWQgcGFyZW50PzogQ2hhaW5TZXJ2aWNlKSB7XG4gICAgdGhpcy5yZWNvdmVyTWFwID0ge307XG4gIH1cblxuICBhYnN0cmFjdCBnZXRBcGlCeUNoYWluIChjaGFpbjogc3RyaW5nKTogX0NoYWluQmFzZUFwaSB8IHVuZGVmaW5lZDtcbiAgYWJzdHJhY3QgaW5pdEFwaSAoY2hhaW5TbHVnOiBzdHJpbmcsIGFwaVVybDogc3RyaW5nLCBvcHRpb25zOiBPbWl0PF9BcGlPcHRpb25zLCAnbWV0YWRhdGEnPik6IFByb21pc2U8X0NoYWluQmFzZUFwaT47XG4gIGFic3RyYWN0IHJlY292ZXJBcGkgKGNoYWluU2x1Zzogc3RyaW5nKTogdm9pZDtcbiAgYWJzdHJhY3Qgc2xlZXAgKCk6IFByb21pc2U8dm9pZD47XG4gIGFic3RyYWN0IHdha2VVcCAoKTogUHJvbWlzZTx2b2lkPjtcblxuICBoYW5kbGVDb25uZWN0aW9uIChjaGFpbjogc3RyaW5nLCBuZXdTdGF0dXM6IF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMsIGZvcmNlUmVjb3ZlciA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudE1hcCA9IHRoaXMuYXBpU3RhdGVNYXBTdWJqZWN0LmdldFZhbHVlKCk7XG4gICAgY29uc3Qgb2xkU3RhdHVzID0gY3VycmVudE1hcFtjaGFpbl07XG5cbiAgICAvLyBVcGRhdGUgYXBpIHN0YXRlXG4gICAgaWYgKG9sZFN0YXR1cyAhPT0gbmV3U3RhdHVzKSB7XG4gICAgICB0aGlzLmFwaVN0YXRlTWFwU3ViamVjdC5uZXh0KHtcbiAgICAgICAgLi4uY3VycmVudE1hcCxcbiAgICAgICAgW2NoYWluXTogbmV3U3RhdHVzXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXNldCByZXRyeSB3aGVuIGNvbm5lY3RlZCBpcyBzdWNjZXNzZnVsXG4gICAgaWYgKG5ld1N0YXR1cyA9PT0gX0NoYWluQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQpIHtcbiAgICAgIHRoaXMuY2FuY2VsUmVjb3ZlcihjaGFpbik7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNvbm5lY3Rpb24gY2hhbmdlXG4gICAgaWYgKCghdGhpcy5pc1JlY292ZXJpbmcoY2hhaW4pIHx8IGZvcmNlUmVjb3ZlcikgJiYgbmV3U3RhdHVzID09PSBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCkge1xuICAgICAgdGhpcy5oYW5kbGVSZWNvdmVyKGNoYWluKTtcbiAgICB9XG4gIH1cblxuICAvLyBSZWNvdmVyIGFwaSBpZiBpdCBpcyBkaXNjb25uZWN0ZWRcbiAgcHJvdGVjdGVkIGhhbmRsZVJlY292ZXIgKGNoYWluOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBOb3QgcmVjb3ZlciBpbmFjdGl2ZSBjaGFpblxuICAgIGlmICghdGhpcy5wYXJlbnQ/LmdldENoYWluU3RhdGVCeUtleShjaGFpbik/LmFjdGl2ZSkge1xuICAgICAgdGhpcy5jYW5jZWxSZWNvdmVyKGNoYWluKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEdldCByZXRyeSByZWNvcmRcbiAgICBjb25zdCByZXRyeVJlY29yZDogUmV0cnlPYmplY3QgPSB0aGlzLnJlY292ZXJNYXBbY2hhaW5dIHx8IHsgcmV0cnlUaW1lczogMCB9O1xuXG4gICAgY2xlYXJUaW1lb3V0KHJldHJ5UmVjb3JkLnRpbWVvdXQpO1xuXG4gICAgY29uc3QgcmV0cnlUaW1lcyA9IHJldHJ5UmVjb3JkLnJldHJ5VGltZXM7XG5cbiAgICBpZiAocmV0cnlUaW1lcyA+PSBNQVhfUkVDT1ZFUl9SRVRSWSkge1xuICAgICAgdGhpcy5oYW5kbGVDb25uZWN0aW9uKGNoYWluLCBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLlVOU1RBQkxFKTtcbiAgICAgIHRoaXMuY2FuY2VsUmVjb3ZlcihjaGFpbik7IC8vIE5lZWQgbWFudWFsIHJlY292ZXJcbiAgICB9XG5cbiAgICAvLyBTbG93IGRvd24gcmVjb3ZlciBmcmVxdWVuY3kgaWYgaW5jcmVhc2luZyByZWNvdmVyIHRpbWVzXG4gICAgY29uc3QgcmV0cnlUaW1lb3V0ID0gcmV0cnlUaW1lcyA9PT0gMCA/IEZJUlNUX1JFQ09OTkVDVF9USU1FIDogU0hPUlRfUkVUUllfVElNRTtcblxuICAgIC8vIFJlY292ZXIgYXBpIGFmdGVyIHJldHJ5IHRpbWVvdXRcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5nZXRBcGlCeUNoYWluKGNoYWluKT8uaXNBcGlDb25uZWN0ZWQgfHwgdGhpcy5pc1NsZWVwaW5nKSB7XG4gICAgICAgIC8vIENhbmNlbCByZWNvdmVyIGlmIGFwaSBpcyBjb25uZWN0ZWRcbiAgICAgICAgdGhpcy5jYW5jZWxSZWNvdmVyKGNoYWluKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVjb3ZlckFwaShjaGFpbik7XG4gICAgICAgIHRoaXMuaGFuZGxlUmVjb3ZlcihjaGFpbik7IC8vIFRoaXMgd2lsbCBiZSBjYW5jZWwgaWYgYXBpIGlzIGNvbm5lY3RlZFxuICAgICAgfVxuICAgIH0sIHJldHJ5VGltZW91dCk7XG5cbiAgICB0aGlzLnJlY292ZXJNYXBbY2hhaW5dID0geyAuLi5yZXRyeVJlY29yZCwgcmV0cnlUaW1lczogcmV0cnlUaW1lcyArIDEsIHRpbWVvdXQgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBpc1JlY292ZXJpbmcgKGNoYWluOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLnJlY292ZXJNYXBbY2hhaW5dO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNhbmNlbFJlY292ZXIgKGNoYWluOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCByZXRyeVJlY29yZCA9IHRoaXMucmVjb3Zlck1hcFtjaGFpbl07XG5cbiAgICBpZiAocmV0cnlSZWNvcmQpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZXRyeVJlY29yZC50aW1lb3V0KTtcbiAgICAgIGRlbGV0ZSB0aGlzLnJlY292ZXJNYXBbY2hhaW5dO1xuICAgIH1cbiAgfVxuXG4gIGNhbmNlbEFsbFJlY292ZXIgKCk6IHZvaWQge1xuICAgIE9iamVjdC5rZXlzKHRoaXMucmVjb3Zlck1hcCkuZm9yRWFjaCgoY2hhaW4pID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsUmVjb3ZlcihjaGFpbik7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgJ0Bwb2xrYWRvdC90eXBlcy1hdWdtZW50JztcblxuaW1wb3J0IHsgRVZNX1BBU1NfQ09OTkVDVF9TVEFUVVMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9BcGlPcHRpb25zIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2hhbmRsZXIvdHlwZXMnO1xuaW1wb3J0IHsgX0NoYWluQ29ubmVjdGlvblN0YXR1cywgX0V2bUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVQcm9taXNlSGFuZGxlciwgUHJvbWlzZUhhbmRsZXIgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgV2ViMyBmcm9tICd3ZWIzJztcbmltcG9ydCB7IEh0dHBQcm92aWRlciwgV2Vic29ja2V0UHJvdmlkZXIgfSBmcm9tICd3ZWIzLWNvcmUnO1xuXG5jb25zdCBhY2FsYUV2bU5ldHdvcmtzOiBzdHJpbmdbXSA9IEVWTV9QQVNTX0NPTk5FQ1RfU1RBVFVTLmFjYWxhO1xuXG5leHBvcnQgY2xhc3MgRXZtQXBpIGltcGxlbWVudHMgX0V2bUFwaSB7XG4gIGNoYWluU2x1Zzogc3RyaW5nO1xuICBhcGk6IFdlYjM7XG4gIGFwaVVybDogc3RyaW5nO1xuICBwcm92aWRlcjogSHR0cFByb3ZpZGVyIHwgV2Vic29ja2V0UHJvdmlkZXI7XG4gIGFwaUVycm9yPzogc3RyaW5nO1xuICBhcGlSZXRyeSA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBpc0FwaUNvbm5lY3RlZFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcbiAgcHVibGljIHJlYWRvbmx5IGNvbm5lY3Rpb25TdGF0dXNTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdChfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XG4gIGlzQXBpUmVhZHkgPSBmYWxzZTtcbiAgaXNBcGlSZWFkeU9uY2UgPSBmYWxzZTtcbiAgaXNSZWFkeUhhbmRsZXI6IFByb21pc2VIYW5kbGVyPF9Fdm1BcGk+O1xuICBpbnRlcnZhbENoZWNrQXBpOiBOb2RlSlMuVGltZXI7XG5cbiAgcHJvdmlkZXJOYW1lOiBzdHJpbmc7XG5cbiAgZ2V0IGlzQXBpQ29ubmVjdGVkICgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc0FwaUNvbm5lY3RlZFN1YmplY3QuZ2V0VmFsdWUoKTtcbiAgfVxuXG4gIGdldCBjb25uZWN0aW9uU3RhdHVzICgpOiBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uU3RhdHVzU3ViamVjdC5nZXRWYWx1ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDb25uZWN0aW9uU3RhdHVzIChzdGF0dXM6IF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMpOiB2b2lkIHtcbiAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IHN0YXR1cyA9PT0gX0NoYWluQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQ7XG5cbiAgICBpZiAoaXNDb25uZWN0ZWQgIT09IHRoaXMuaXNBcGlDb25uZWN0ZWRTdWJqZWN0LnZhbHVlKSB7XG4gICAgICB0aGlzLmlzQXBpQ29ubmVjdGVkU3ViamVjdC5uZXh0KGlzQ29ubmVjdGVkKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzICE9PSB0aGlzLmNvbm5lY3Rpb25TdGF0dXNTdWJqZWN0LnZhbHVlKSB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0dXNTdWJqZWN0Lm5leHQoc3RhdHVzKTtcbiAgICB9XG4gIH1cblxuICBnZXQgaXNSZWFkeSAoKTogUHJvbWlzZTxfRXZtQXBpPiB7XG4gICAgcmV0dXJuIHRoaXMuaXNSZWFkeUhhbmRsZXIucHJvbWlzZTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUFwaVVybCAoYXBpVXJsOiBzdHJpbmcpIHtcbiAgICB0aGlzLmFwaVVybCA9IGFwaVVybDtcblxuICAgIGF3YWl0IHRoaXMuZGlzY29ubmVjdCgpO1xuICAgIHRoaXMuYXBpLnNldFByb3ZpZGVyKHRoaXMuY3JlYXRlUHJvdmlkZXIoYXBpVXJsKSk7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gIH1cblxuICBhc3luYyByZWNvdmVyQ29ubmVjdCAoKSB7XG4gICAgY29uc3Qgd3NQcm92aWRlciA9IHRoaXMucHJvdmlkZXIgYXMgV2Vic29ja2V0UHJvdmlkZXI7XG5cbiAgICBpZiAod3NQcm92aWRlci5yZWNvbm5lY3QpIHtcbiAgICAgIHdzUHJvdmlkZXIucmVjb25uZWN0KCk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5pc1JlYWR5SGFuZGxlci5wcm9taXNlO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQcm92aWRlciAoYXBpVXJsOiBzdHJpbmcpOiBIdHRwUHJvdmlkZXIgfCBXZWJzb2NrZXRQcm92aWRlciB7XG4gICAgaWYgKGFwaVVybC5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgIHJldHVybiBuZXcgV2ViMy5wcm92aWRlcnMuSHR0cFByb3ZpZGVyKGFwaVVybCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgV2ViMy5wcm92aWRlcnMuV2Vic29ja2V0UHJvdmlkZXIoYXBpVXJsKTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvciAoY2hhaW5TbHVnOiBzdHJpbmcsIGFwaVVybDogc3RyaW5nLCB7IHByb3ZpZGVyTmFtZSB9OiBfQXBpT3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5jaGFpblNsdWcgPSBjaGFpblNsdWc7XG4gICAgdGhpcy5hcGlVcmwgPSBhcGlVcmw7XG4gICAgdGhpcy5wcm92aWRlck5hbWUgPSBwcm92aWRlck5hbWUgfHwgJ3Vua25vd24nO1xuICAgIHRoaXMucHJvdmlkZXIgPSB0aGlzLmNyZWF0ZVByb3ZpZGVyKGFwaVVybCk7XG4gICAgdGhpcy5hcGkgPSBuZXcgV2ViMyh0aGlzLnByb3ZpZGVyKTtcbiAgICB0aGlzLmlzUmVhZHlIYW5kbGVyID0gY3JlYXRlUHJvbWlzZUhhbmRsZXI8X0V2bUFwaT4oKTtcblxuICAgIC8vIENyZWF0ZSBpdCBvbmx5IHRvIGF2b2lkIHVuZGVmaW5lZCBlcnJvciwgaXQgd2lsbCBiZSBvdmVyd3JpdGUgaW4gY29ubmVjdCgpXG4gICAgdGhpcy5pbnRlcnZhbENoZWNrQXBpID0gdGhpcy5jcmVhdGVJbnRlcnZhbENoZWNrQXBpKCk7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gIH1cblxuICBjcmVhdGVJbnRlcnZhbENoZWNrQXBpICgpOiBOb2RlSlMuVGltZXIge1xuICAgIHRoaXMuY2xlYXJJbnRlcnZhbENoZWNrQXBpKCk7XG5cbiAgICByZXR1cm4gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKCFhY2FsYUV2bU5ldHdvcmtzLmluY2x1ZGVzKHRoaXMuY2hhaW5TbHVnKSkge1xuICAgICAgICB0aGlzLmFwaS5ldGgubmV0LmlzTGlzdGVuaW5nKClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ29ubmVjdCgpO1xuICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uQ29ubmVjdCgpO1xuICAgICAgfVxuICAgIH0sIDEwMDAwKTtcbiAgfVxuXG4gIGNsZWFySW50ZXJ2YWxDaGVja0FwaSAoKTogdm9pZCB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsQ2hlY2tBcGkpO1xuICB9XG5cbiAgY29ubmVjdCAoKTogdm9pZCB7XG4gICAgLy8gRm9yIHdlYnNvY2tldCBwcm92aWRlciwgY29ubmVjdCBpdFxuICAgIGNvbnN0IHdzUHJvdmlkZXIgPSB0aGlzLnByb3ZpZGVyIGFzIFdlYnNvY2tldFByb3ZpZGVyO1xuXG4gICAgd3NQcm92aWRlci5jb25uZWN0ICYmIHdzUHJvdmlkZXIuY29ubmVjdCgpO1xuICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvblN0YXR1cyhfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RJTkcpO1xuXG4gICAgLy8gQ2hlY2sgaWYgYXBpIGlzIHJlYWR5XG4gICAgaWYgKCFhY2FsYUV2bU5ldHdvcmtzLmluY2x1ZGVzKHRoaXMuY2hhaW5TbHVnKSkge1xuICAgICAgdGhpcy5hcGkuZXRoLm5ldC5pc0xpc3RlbmluZygpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmlzQXBpUmVhZHlPbmNlID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29ubmVjdCgpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICB0aGlzLmlzQXBpUmVhZHlPbmNlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5pc0FwaVJlYWR5ID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5pc1JlYWR5SGFuZGxlci5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvblN0YXR1cyhfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBDYW4gbm90IGNvbm5lY3QgdG8gJHt0aGlzLmNoYWluU2x1Z30gKEVWTSkgYXQgJHt0aGlzLmFwaVVybH1gKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaXNBcGlSZWFkeU9uY2UgPSB0cnVlO1xuICAgICAgdGhpcy5vbkNvbm5lY3QoKTtcbiAgICB9XG5cbiAgICAvLyBJbnRlcnZhbCB0byBjaGVjayBjb25uZWN0aW5nIHN0YXR1c1xuICAgIHRoaXMuaW50ZXJ2YWxDaGVja0FwaSA9IHRoaXMuY3JlYXRlSW50ZXJ2YWxDaGVja0FwaSgpO1xuICB9XG5cbiAgYXN5bmMgZGlzY29ubmVjdCAoKSB7XG4gICAgdGhpcy5jbGVhckludGVydmFsQ2hlY2tBcGkoKTtcbiAgICB0aGlzLm9uRGlzY29ubmVjdCgpO1xuXG4gICAgLy8gRm9yIHdlYnNvY2tldCBwcm92aWRlciwgZGlzY29ubmVjdCBpdFxuICAgIGNvbnN0IHdzUHJvdmlkZXIgPSB0aGlzLnByb3ZpZGVyIGFzIFdlYnNvY2tldFByb3ZpZGVyO1xuXG4gICAgd3NQcm92aWRlci5kaXNjb25uZWN0ICYmIHdzUHJvdmlkZXIuZGlzY29ubmVjdCgpO1xuXG4gICAgdGhpcy51cGRhdGVDb25uZWN0aW9uU3RhdHVzKF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMuRElTQ09OTkVDVEVEKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGRlc3Ryb3kgKCkge1xuICAgIC8vIFRvZG86IGltcGxlbWVudCB0aGlzIGluIHRoZSBmdXR1cmVcbiAgICByZXR1cm4gdGhpcy5kaXNjb25uZWN0KCk7XG4gIH1cblxuICBvbkNvbm5lY3QgKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0FwaUNvbm5lY3RlZCkge1xuICAgICAgY29uc29sZS5sb2coYENvbm5lY3RlZCB0byAke3RoaXMuY2hhaW5TbHVnfSBhdCAke3RoaXMuYXBpVXJsfWApO1xuICAgICAgdGhpcy5pc0FwaVJlYWR5ID0gdHJ1ZTtcblxuICAgICAgaWYgKHRoaXMuaXNBcGlSZWFkeU9uY2UpIHtcbiAgICAgICAgdGhpcy5pc1JlYWR5SGFuZGxlci5yZXNvbHZlKHRoaXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvblN0YXR1cyhfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RFRCk7XG4gIH1cblxuICBvbkRpc2Nvbm5lY3QgKCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvblN0YXR1cyhfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XG5cbiAgICBpZiAodGhpcy5pc0FwaUNvbm5lY3RlZCkge1xuICAgICAgY29uc29sZS53YXJuKGBEaXNjb25uZWN0ZWQgZnJvbSAke3RoaXMuY2hhaW5TbHVnfSBvZiAke3RoaXMuYXBpVXJsfSAoRVZNKWApO1xuICAgICAgdGhpcy5pc0FwaVJlYWR5ID0gZmFsc2U7XG4gICAgICB0aGlzLmlzUmVhZHlIYW5kbGVyID0gY3JlYXRlUHJvbWlzZUhhbmRsZXI8X0V2bUFwaT4oKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQXNzZXRUeXBlIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IENoYWluU2VydmljZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZSc7XG5pbXBvcnQgeyBBYnN0cmFjdENoYWluSGFuZGxlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL0Fic3RyYWN0Q2hhaW5IYW5kbGVyJztcbmltcG9ydCB7IEV2bUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL0V2bUFwaSc7XG5pbXBvcnQgeyBfQXBpT3B0aW9ucywgX0V2bUNoYWluU3BlYyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL3R5cGVzJztcbmltcG9ydCB7IF9FUkMyMF9BQkksIF9FUkM3MjFfQUJJIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2hlbHBlcic7XG5pbXBvcnQgeyBfRXZtQXBpLCBfU21hcnRDb250cmFjdFRva2VuSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgQmlnTiBmcm9tICdiaWdudW1iZXIuanMnO1xuaW1wb3J0IHsgQ29udHJhY3QgfSBmcm9tICd3ZWIzLWV0aC1jb250cmFjdCc7XG5cbmltcG9ydCB7IGxvZ2dlciBhcyBjcmVhdGVMb2dnZXIgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC9sb2dnZXInO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRXZtQ2hhaW5IYW5kbGVyIGV4dGVuZHMgQWJzdHJhY3RDaGFpbkhhbmRsZXIge1xuICBwcml2YXRlIGV2bUFwaU1hcDogUmVjb3JkPHN0cmluZywgRXZtQXBpPiA9IHt9O1xuICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuXG4gIGNvbnN0cnVjdG9yIChwYXJlbnQ/OiBDaGFpblNlcnZpY2UpIHtcbiAgICBzdXBlcihwYXJlbnQpO1xuICAgIHRoaXMubG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCdldm0tY2hhaW4taGFuZGxlcicpO1xuICB9XG5cbiAgcHVibGljIGdldEV2bUFwaU1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZtQXBpTWFwO1xuICB9XG5cbiAgcHVibGljIGdldEV2bUFwaUJ5Q2hhaW4gKGNoYWluU2x1Zzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZtQXBpTWFwW2NoYWluU2x1Z107XG4gIH1cblxuICBwdWJsaWMgZ2V0QXBpQnlDaGFpbiAoY2hhaW46IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmdldEV2bUFwaUJ5Q2hhaW4oY2hhaW4pO1xuICB9XG5cbiAgcHVibGljIHNldEV2bUFwaSAoY2hhaW5TbHVnOiBzdHJpbmcsIGV2bUFwaTogRXZtQXBpKSB7XG4gICAgdGhpcy5ldm1BcGlNYXBbY2hhaW5TbHVnXSA9IGV2bUFwaTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBpbml0QXBpIChjaGFpblNsdWc6IHN0cmluZywgYXBpVXJsOiBzdHJpbmcsIHsgb25VcGRhdGVTdGF0dXMsIHByb3ZpZGVyTmFtZSB9OiBPbWl0PF9BcGlPcHRpb25zLCAnbWV0YWRhdGEnPiA9IHt9KSB7XG4gICAgY29uc3QgZXhpc3RlZCA9IHRoaXMuZ2V0RXZtQXBpQnlDaGFpbihjaGFpblNsdWcpO1xuXG4gICAgaWYgKGV4aXN0ZWQpIHtcbiAgICAgIGV4aXN0ZWQuY29ubmVjdCgpO1xuXG4gICAgICBpZiAoYXBpVXJsICE9PSBleGlzdGVkLmFwaVVybCkge1xuICAgICAgICBleGlzdGVkLnVwZGF0ZUFwaVVybChhcGlVcmwpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXhpc3RlZDtcbiAgICB9XG5cbiAgICBjb25zdCBhcGlPYmplY3QgPSBuZXcgRXZtQXBpKGNoYWluU2x1ZywgYXBpVXJsLCB7IHByb3ZpZGVyTmFtZSB9KTtcblxuICAgIGFwaU9iamVjdC5jb25uZWN0aW9uU3RhdHVzU3ViamVjdC5zdWJzY3JpYmUodGhpcy5oYW5kbGVDb25uZWN0aW9uLmJpbmQodGhpcywgY2hhaW5TbHVnKSk7XG4gICAgYXBpT2JqZWN0LmNvbm5lY3Rpb25TdGF0dXNTdWJqZWN0LnN1YnNjcmliZShvblVwZGF0ZVN0YXR1cyk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFwaU9iamVjdCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVjb3ZlckFwaSAoY2hhaW5TbHVnOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGlzdGVkID0gdGhpcy5nZXRFdm1BcGlCeUNoYWluKGNoYWluU2x1Zyk7XG5cbiAgICBpZiAoZXhpc3RlZCAmJiAhZXhpc3RlZC5pc0FwaVJlYWR5T25jZSkge1xuICAgICAgY29uc29sZS5sb2coYFJlY29ubmVjdCAke2V4aXN0ZWQucHJvdmlkZXJOYW1lIHx8IGV4aXN0ZWQuY2hhaW5TbHVnfSBhdCAke2V4aXN0ZWQuYXBpVXJsfWApO1xuXG4gICAgICByZXR1cm4gZXhpc3RlZC5yZWNvdmVyQ29ubmVjdCgpO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lFdm1BcGkgKGNoYWluOiBzdHJpbmcpIHtcbiAgICBjb25zdCBldm1BcGkgPSB0aGlzLmdldEV2bUFwaUJ5Q2hhaW4oY2hhaW4pO1xuXG4gICAgZXZtQXBpPy5kZXN0cm95KCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH1cblxuICBhc3luYyBzbGVlcCAoKSB7XG4gICAgdGhpcy5pc1NsZWVwaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmNhbmNlbEFsbFJlY292ZXIoKTtcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKE9iamVjdC52YWx1ZXModGhpcy5nZXRFdm1BcGlNYXAoKSkubWFwKChldm1BcGkpID0+IHtcbiAgICAgIHJldHVybiBldm1BcGkuZGlzY29ubmVjdCgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0pKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIHdha2VVcCAoKSB7XG4gICAgdGhpcy5pc1NsZWVwaW5nID0gZmFsc2U7XG4gICAgY29uc3QgYWN0aXZlQ2hhaW5zID0gdGhpcy5wYXJlbnQ/LmdldEFjdGl2ZUNoYWlucygpIHx8IFtdO1xuXG4gICAgZm9yIChjb25zdCBjaGFpbiBvZiBhY3RpdmVDaGFpbnMpIHtcbiAgICAgIGNvbnN0IGV2bUFwaSA9IHRoaXMuZ2V0RXZtQXBpQnlDaGFpbihjaGFpbik7XG5cbiAgICAgIC8vIE5vdCBmb3VuZCBldm1BcGkgbWVhbiBpdCBhY3RpdmUgd2l0aCBzdWJzdHJhdGUgaW50ZXJmYWNlXG4gICAgICBldm1BcGk/LmNvbm5lY3QoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0Q2hhaW5TcGVjIChldm1BcGk6IF9Fdm1BcGkpIHtcbiAgICBjb25zdCBjaGFpbklkID0gYXdhaXQgZXZtQXBpLmFwaS5ldGguZ2V0Q2hhaW5JZCgpO1xuICAgIGxldCBjaGFpbkluZm9MaXN0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+W10gfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgcmVzdWx0OiBfRXZtQ2hhaW5TcGVjID0ge1xuICAgICAgZXZtQ2hhaW5JZDogY2hhaW5JZCxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgc3ltYm9sOiAnJyxcbiAgICAgIGRlY2ltYWxzOiAxOCwgLy8gYnkgZGVmYXVsdCwgbWlnaHQgY2hhbmdlXG4gICAgICBleGlzdGVudGlhbERlcG9zaXQ6ICcwJ1xuICAgIH07XG5cbiAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jaGFpbmlkLm5ldHdvcmsvY2hhaW5zLmpzb24nKVxuICAgICAgLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKVxuICAgICAgLnRoZW4oKGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT5bXSkgPT4ge1xuICAgICAgICBjaGFpbkluZm9MaXN0ID0gZGF0YTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKGNoYWluSW5mb0xpc3QpIHtcbiAgICAgIGNoYWluSW5mb0xpc3QuZm9yRWFjaCgoX2NoYWluSW5mbykgPT4ge1xuICAgICAgICBjb25zdCBfY2hhaW5JZCA9IF9jaGFpbkluZm8uY2hhaW5JZCBhcyBudW1iZXI7XG5cbiAgICAgICAgaWYgKGNoYWluSWQgPT09IF9jaGFpbklkKSB7XG4gICAgICAgICAgcmVzdWx0Lm5hbWUgPSBfY2hhaW5JbmZvLm5hbWUgYXMgc3RyaW5nO1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICByZXN1bHQuc3ltYm9sID0gX2NoYWluSW5mby5uYXRpdmVDdXJyZW5jeS5zeW1ib2wgYXMgc3RyaW5nO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFNtYXJ0Q29udHJhY3RUb2tlbkluZm8gKGNvbnRyYWN0QWRkcmVzczogc3RyaW5nLCB0b2tlblR5cGU6IF9Bc3NldFR5cGUsIG9yaWdpbkNoYWluOiBzdHJpbmcpOiBQcm9taXNlPF9TbWFydENvbnRyYWN0VG9rZW5JbmZvPiB7XG4gICAgbGV0IHRva2VuQ29udHJhY3Q6IENvbnRyYWN0O1xuICAgIGxldCBuYW1lID0gJyc7XG4gICAgbGV0IGRlY2ltYWxzOiBudW1iZXIgfCB1bmRlZmluZWQgPSAtMTtcbiAgICBsZXQgc3ltYm9sID0gJyc7XG4gICAgbGV0IGNvbnRyYWN0RXJyb3IgPSBmYWxzZTtcblxuICAgIGNvbnN0IGV2bUFwaSA9IHRoaXMuZ2V0RXZtQXBpQnlDaGFpbihvcmlnaW5DaGFpbik7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHRva2VuVHlwZSA9PT0gX0Fzc2V0VHlwZS5FUkM3MjEpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnQsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgIHRva2VuQ29udHJhY3QgPSBuZXcgZXZtQXBpLmFwaS5ldGguQ29udHJhY3QoX0VSQzcyMV9BQkksIGNvbnRyYWN0QWRkcmVzcyk7XG5cbiAgICAgICAgY29uc3QgW19uYW1lLCBfc3ltYm9sXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIHRva2VuQ29udHJhY3QubWV0aG9kcy5uYW1lKCkuY2FsbCgpIGFzIHN0cmluZyxcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIHRva2VuQ29udHJhY3QubWV0aG9kcy5zeW1ib2woKS5jYWxsKCkgYXMgc3RyaW5nXG4gICAgICAgIF0pO1xuXG4gICAgICAgIG5hbWUgPSBfbmFtZTtcbiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICB0b2tlbkNvbnRyYWN0ID0gbmV3IGV2bUFwaS5hcGkuZXRoLkNvbnRyYWN0KF9FUkMyMF9BQkksIGNvbnRyYWN0QWRkcmVzcyk7XG5cbiAgICAgICAgY29uc3QgW19kZWNpbWFscywgX3N5bWJvbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICB0b2tlbkNvbnRyYWN0Lm1ldGhvZHMuZGVjaW1hbHMoKS5jYWxsKCkgYXMgbnVtYmVyLFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgdG9rZW5Db250cmFjdC5tZXRob2RzLnN5bWJvbCgpLmNhbGwoKSBhcyBzdHJpbmdcbiAgICAgICAgXSk7XG5cbiAgICAgICAgbmFtZSA9IF9zeW1ib2w7XG4gICAgICAgIGRlY2ltYWxzID0gbmV3IEJpZ04oX2RlY2ltYWxzKS50b051bWJlcigpO1xuICAgICAgICBzeW1ib2wgPSBfc3ltYm9sO1xuICAgICAgfVxuXG4gICAgICBpZiAobmFtZSA9PT0gJycgfHwgc3ltYm9sID09PSAnJykge1xuICAgICAgICBjb250cmFjdEVycm9yID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVjaW1hbHMsXG4gICAgICAgIHN5bWJvbCxcbiAgICAgICAgY29udHJhY3RFcnJvclxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVjaW1hbHMsXG4gICAgICAgIHN5bWJvbCxcbiAgICAgICAgY29udHJhY3RFcnJvcjogdHJ1ZVxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgJ0Bwb2xrYWRvdC90eXBlcy1hdWdtZW50JztcblxuaW1wb3J0IHsgb3B0aW9ucyBhcyBhY2FsYU9wdGlvbnMgfSBmcm9tICdAYWNhbGEtbmV0d29yay9hcGknO1xuaW1wb3J0IHsgcnBjIGFzIG9ha1JwYywgdHlwZXMgYXMgb2FrVHlwZXMgfSBmcm9tICdAb2FrLWZvdW5kYXRpb24vdHlwZXMnO1xuaW1wb3J0IHsgTWV0YWRhdGFJdGVtIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBfQVBJX09QVElPTlNfQ0hBSU5fR1JPVVAsIEFQSV9BVVRPX0NPTk5FQ1RfTVMsIEFQSV9DT05ORUNUX1RJTUVPVVQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IGdldFN1YnN0cmF0ZUNvbm5lY3RQcm92aWRlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL2xpZ2h0LWNsaWVudCc7XG5pbXBvcnQgeyBERUZBVUxUX0FVWCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL1N1YnN0cmF0ZUNoYWluSGFuZGxlcic7XG5pbXBvcnQgeyBfQXBpT3B0aW9ucyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL3R5cGVzJztcbmltcG9ydCB7IF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMsIF9TdWJzdHJhdGVBcGksIF9TdWJzdHJhdGVEZWZhdWx0Rm9ybWF0QmFsYW5jZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVQcm9taXNlSGFuZGxlciwgUHJvbWlzZUhhbmRsZXIgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHsgc3BlYyBhcyBhdmFpbFNwZWMgfSBmcm9tICdhdmFpbC1qcy1zZGsnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IEFwaVByb21pc2UsIFdzUHJvdmlkZXIgfSBmcm9tICdAcG9sa2Fkb3QvYXBpJztcbmltcG9ydCB7IFN1Ym1pdHRhYmxlRXh0cmluc2ljRnVuY3Rpb24gfSBmcm9tICdAcG9sa2Fkb3QvYXBpL3Byb21pc2UvdHlwZXMnO1xuaW1wb3J0IHsgQXBpT3B0aW9ucyB9IGZyb20gJ0Bwb2xrYWRvdC9hcGkvdHlwZXMnO1xuaW1wb3J0IHsgdHlwZXNCdW5kbGUgfSBmcm9tICdAcG9sa2Fkb3QvYXBwcy1jb25maWcvYXBpJztcbmltcG9ydCB7IFByb3ZpZGVySW50ZXJmYWNlIH0gZnJvbSAnQHBvbGthZG90L3JwYy1wcm92aWRlci90eXBlcyc7XG5pbXBvcnQgeyBUeXBlUmVnaXN0cnkgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMvY3JlYXRlJztcbmltcG9ydCB7IFJlZ2lzdHJ5IH0gZnJvbSAnQHBvbGthZG90L3R5cGVzL3R5cGVzJztcbmltcG9ydCB7IEJOLCBmb3JtYXRCYWxhbmNlIH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuaW1wb3J0IHsgZGVmYXVsdHMgYXMgYWRkcmVzc0RlZmF1bHRzIH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvL2FkZHJlc3MvZGVmYXVsdHMnO1xuXG5leHBvcnQgY2xhc3MgU3Vic3RyYXRlQXBpIGltcGxlbWVudHMgX1N1YnN0cmF0ZUFwaSB7XG4gIGNoYWluU2x1Zzogc3RyaW5nO1xuICBhcGk6IEFwaVByb21pc2U7XG4gIHByb3ZpZGVyTmFtZT86IHN0cmluZztcbiAgcHJvdmlkZXI6IFByb3ZpZGVySW50ZXJmYWNlO1xuICBhcGlVcmw6IHN0cmluZztcbiAgbWV0YWRhdGE/OiBNZXRhZGF0YUl0ZW07XG5cbiAgdXNlTGlnaHRDbGllbnQgPSBmYWxzZTtcbiAgaXNBcGlSZWFkeSA9IGZhbHNlO1xuICBpc0FwaVJlYWR5T25jZSA9IGZhbHNlO1xuICBhcGlFcnJvcj86IHN0cmluZztcbiAgcHJpdmF0ZSBoYW5kbGVBcGlSZWFkeTogUHJvbWlzZUhhbmRsZXI8X1N1YnN0cmF0ZUFwaT47XG4gIHB1YmxpYyByZWFkb25seSBpc0FwaUNvbm5lY3RlZFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcbiAgcHVibGljIHJlYWRvbmx5IGNvbm5lY3Rpb25TdGF0dXNTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdChfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XG4gIGdldCBpc0FwaUNvbm5lY3RlZCAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNBcGlDb25uZWN0ZWRTdWJqZWN0LmdldFZhbHVlKCk7XG4gIH1cblxuICBzdWJzdHJhdGVSZXRyeSA9IDA7XG5cbiAgZ2V0IGNvbm5lY3Rpb25TdGF0dXMgKCk6IF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25TdGF0dXNTdWJqZWN0LmdldFZhbHVlKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUNvbm5lY3Rpb25TdGF0dXMgKHN0YXR1czogX0NoYWluQ29ubmVjdGlvblN0YXR1cyk6IHZvaWQge1xuICAgIGNvbnN0IGlzQ29ubmVjdGVkID0gc3RhdHVzID09PSBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RFRDtcblxuICAgIGlmIChpc0Nvbm5lY3RlZCAhPT0gdGhpcy5pc0FwaUNvbm5lY3RlZFN1YmplY3QudmFsdWUpIHtcbiAgICAgIHRoaXMuaXNBcGlDb25uZWN0ZWRTdWJqZWN0Lm5leHQoaXNDb25uZWN0ZWQpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgIT09IHRoaXMuY29ubmVjdGlvblN0YXR1c1N1YmplY3QudmFsdWUpIHtcbiAgICAgIHRoaXMuY29ubmVjdGlvblN0YXR1c1N1YmplY3QubmV4dChzdGF0dXMpO1xuICAgIH1cbiAgfVxuXG4gIGFwaURlZmF1bHRUeD86IFN1Ym1pdHRhYmxlRXh0cmluc2ljRnVuY3Rpb247XG4gIGFwaURlZmF1bHRUeFN1ZG8/OiBTdWJtaXR0YWJsZUV4dHJpbnNpY0Z1bmN0aW9uO1xuICBkZWZhdWx0Rm9ybWF0QmFsYW5jZT86IF9TdWJzdHJhdGVEZWZhdWx0Rm9ybWF0QmFsYW5jZTtcblxuICByZWdpc3RyeTogUmVnaXN0cnk7XG4gIHNwZWNOYW1lID0gJyc7XG4gIHNwZWNWZXJzaW9uID0gJyc7XG4gIHN5c3RlbUNoYWluID0gJyc7XG4gIHN5c3RlbU5hbWUgPSAnJztcbiAgc3lzdGVtVmVyc2lvbiA9ICcnO1xuXG4gIHByaXZhdGUgY3JlYXRlUHJvdmlkZXIgKGFwaVVybDogc3RyaW5nKTogUHJvdmlkZXJJbnRlcmZhY2Uge1xuICAgIGlmIChhcGlVcmwuc3RhcnRzV2l0aCgnbGlnaHQ6Ly8nKSkge1xuICAgICAgdGhpcy51c2VMaWdodENsaWVudCA9IHRydWU7XG5cbiAgICAgIHJldHVybiBnZXRTdWJzdHJhdGVDb25uZWN0UHJvdmlkZXIoYXBpVXJsLnJlcGxhY2UoJ2xpZ2h0Oi8vc3Vic3RyYXRlLWNvbm5lY3QvJywgJycpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51c2VMaWdodENsaWVudCA9IHRydWU7XG5cbiAgICAgIHJldHVybiBuZXcgV3NQcm92aWRlcihhcGlVcmwsIEFQSV9BVVRPX0NPTk5FQ1RfTVMsIHt9LCBBUElfQ09OTkVDVF9USU1FT1VUKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUFwaSAocHJvdmlkZXI6IFByb3ZpZGVySW50ZXJmYWNlLCBleHRlcm5hbEFwaVByb21pc2U/OiBBcGlQcm9taXNlKTogQXBpUHJvbWlzZSB7XG4gICAgY29uc3QgYXBpT3B0aW9uOiBBcGlPcHRpb25zID0ge1xuICAgICAgcHJvdmlkZXIsXG4gICAgICB0eXBlc0J1bmRsZSxcbiAgICAgIHJlZ2lzdHJ5OiB0aGlzLnJlZ2lzdHJ5XG4gICAgfTtcblxuICAgIGlmICh0aGlzLm1ldGFkYXRhKSB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMubWV0YWRhdGE7XG5cbiAgICAgIGFwaU9wdGlvbi5tZXRhZGF0YSA9IHtcbiAgICAgICAgW2Ake21ldGFkYXRhLmdlbmVzaXNIYXNofS0ke21ldGFkYXRhLnNwZWNWZXJzaW9ufWBdOiBtZXRhZGF0YS5oZXhWYWx1ZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUNvbm5lY3Rpb25TdGF0dXMoX0NoYWluQ29ubmVjdGlvblN0YXR1cy5DT05ORUNUSU5HKTtcblxuICAgIGxldCBhcGk6IEFwaVByb21pc2U7XG5cbiAgICBpZiAoZXh0ZXJuYWxBcGlQcm9taXNlKSB7XG4gICAgICBhcGkgPSBleHRlcm5hbEFwaVByb21pc2U7XG4gICAgfSBlbHNlIGlmIChfQVBJX09QVElPTlNfQ0hBSU5fR1JPVVAuYWNhbGEuaW5jbHVkZXModGhpcy5jaGFpblNsdWcpKSB7XG4gICAgICBhcGkgPSBuZXcgQXBpUHJvbWlzZShhY2FsYU9wdGlvbnMoeyBwcm92aWRlciB9KSk7XG4gICAgfSBlbHNlIGlmIChfQVBJX09QVElPTlNfQ0hBSU5fR1JPVVAudHVyaW5nLmluY2x1ZGVzKHRoaXMuY2hhaW5TbHVnKSkge1xuICAgICAgYXBpID0gbmV3IEFwaVByb21pc2Uoe1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgcnBjOiBvYWtScGMsXG4gICAgICAgIHR5cGVzOiBvYWtUeXBlc1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChfQVBJX09QVElPTlNfQ0hBSU5fR1JPVVAuYXZhaWwuaW5jbHVkZXModGhpcy5jaGFpblNsdWcpKSB7XG4gICAgICBhcGkgPSBuZXcgQXBpUHJvbWlzZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICBycGM6IGF2YWlsU3BlYy5ycGMsXG4gICAgICAgIHR5cGVzOiBhdmFpbFNwZWMudHlwZXMsXG4gICAgICAgIHNpZ25lZEV4dGVuc2lvbnM6IGF2YWlsU3BlYy5zaWduZWRFeHRlbnNpb25zXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpID0gbmV3IEFwaVByb21pc2UoYXBpT3B0aW9uKTtcbiAgICB9XG5cbiAgICBhcGkub24oJ3JlYWR5JywgdGhpcy5vblJlYWR5LmJpbmQodGhpcykpO1xuICAgIGFwaS5vbignY29ubmVjdGVkJywgdGhpcy5vbkNvbm5lY3QuYmluZCh0aGlzKSk7XG4gICAgYXBpLm9uKCdkaXNjb25uZWN0ZWQnLCB0aGlzLm9uRGlzY29ubmVjdC5iaW5kKHRoaXMpKTtcbiAgICBhcGkub24oJ2Vycm9yJywgdGhpcy5vbkVycm9yLmJpbmQodGhpcykpO1xuXG4gICAgcmV0dXJuIGFwaTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yIChjaGFpblNsdWc6IHN0cmluZywgYXBpVXJsOiBzdHJpbmcsIHsgZXh0ZXJuYWxBcGlQcm9taXNlLCBtZXRhZGF0YSwgcHJvdmlkZXJOYW1lIH06IF9BcGlPcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmNoYWluU2x1ZyA9IGNoYWluU2x1ZztcbiAgICB0aGlzLmFwaVVybCA9IGFwaVVybDtcbiAgICB0aGlzLnByb3ZpZGVyTmFtZSA9IHByb3ZpZGVyTmFtZTtcbiAgICB0aGlzLnJlZ2lzdHJ5ID0gbmV3IFR5cGVSZWdpc3RyeSgpO1xuICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICB0aGlzLnByb3ZpZGVyID0gdGhpcy5jcmVhdGVQcm92aWRlcihhcGlVcmwpO1xuICAgIHRoaXMuYXBpID0gdGhpcy5jcmVhdGVBcGkodGhpcy5wcm92aWRlciwgZXh0ZXJuYWxBcGlQcm9taXNlKTtcblxuICAgIHRoaXMuaGFuZGxlQXBpUmVhZHkgPSBjcmVhdGVQcm9taXNlSGFuZGxlcjxfU3Vic3RyYXRlQXBpPigpO1xuICB9XG5cbiAgZ2V0IGlzUmVhZHkgKCk6IFByb21pc2U8X1N1YnN0cmF0ZUFwaT4ge1xuICAgIHJldHVybiB0aGlzLmhhbmRsZUFwaVJlYWR5LnByb21pc2U7XG4gIH1cblxuICBhc3luYyB1cGRhdGVBcGlVcmwgKGFwaVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuYXBpVXJsID09PSBhcGlVcmwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEaXNjb25uZWN0IHdpdGggb2xkIHByb3ZpZGVyXG4gICAgYXdhaXQgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5pc0FwaVJlYWR5T25jZSA9IGZhbHNlO1xuICAgIHRoaXMuYXBpLm9mZigncmVhZHknLCB0aGlzLm9uUmVhZHkuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5hcGkub2ZmKCdjb25uZWN0ZWQnLCB0aGlzLm9uQ29ubmVjdC5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmFwaS5vZmYoJ2Rpc2Nvbm5lY3RlZCcsIHRoaXMub25EaXNjb25uZWN0LmJpbmQodGhpcykpO1xuICAgIHRoaXMuYXBpLm9mZignZXJyb3InLCB0aGlzLm9uRXJyb3IuYmluZCh0aGlzKSk7XG5cbiAgICAvLyBDcmVhdGUgbmV3IHByb3ZpZGVyIGFuZCBhcGlcbiAgICB0aGlzLmFwaVVybCA9IGFwaVVybDtcbiAgICB0aGlzLnByb3ZpZGVyID0gdGhpcy5jcmVhdGVQcm92aWRlcihhcGlVcmwpO1xuICAgIHRoaXMuYXBpID0gdGhpcy5jcmVhdGVBcGkodGhpcy5wcm92aWRlcik7XG4gIH1cblxuICBjb25uZWN0ICgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hcGkuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvblN0YXR1cyhfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RFRCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvblN0YXR1cyhfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RJTkcpO1xuXG4gICAgICB0aGlzLmFwaS5jb25uZWN0KClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYXBpLmlzUmVhZHkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbm5lY3Rpb25TdGF0dXMoX0NoYWluQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQpO1xuICAgICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0ICgpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5hcGkuZGlzY29ubmVjdCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVDb25uZWN0aW9uU3RhdHVzKF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMuRElTQ09OTkVDVEVEKTtcbiAgfVxuXG4gIGFzeW5jIHJlY292ZXJDb25uZWN0ICgpIHtcbiAgICBhd2FpdCB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgICBhd2FpdCB0aGlzLmhhbmRsZUFwaVJlYWR5LnByb21pc2U7XG4gIH1cblxuICBkZXN0cm95ICgpIHtcbiAgICAvLyBUb2RvOiBpbXBsZW1lbnQgdGhpcyBpbiB0aGUgZnV0dXJlXG4gICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgb25SZWFkeSAoKTogdm9pZCB7XG4gICAgdGhpcy5maWxsQXBpSW5mbygpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVBcGlSZWFkeS5yZXNvbHZlKHRoaXMpO1xuICAgICAgdGhpcy5pc0FwaVJlYWR5ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaXNBcGlSZWFkeU9uY2UgPSB0cnVlO1xuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgdGhpcy5hcGlFcnJvciA9IChlcnJvciBhcyBFcnJvcik/Lm1lc3NhZ2U7XG4gICAgICB0aGlzLmhhbmRsZUFwaVJlYWR5LnJlamVjdChlcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICBvbkNvbm5lY3QgKCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvblN0YXR1cyhfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RFRCk7XG4gICAgdGhpcy5zdWJzdHJhdGVSZXRyeSA9IDA7XG4gICAgY29uc29sZS5sb2coYENvbm5lY3RlZCB0byAke3RoaXMuY2hhaW5TbHVnIHx8ICcnfSBhdCAke3RoaXMuYXBpVXJsfWApO1xuXG4gICAgaWYgKHRoaXMuaXNBcGlSZWFkeU9uY2UpIHtcbiAgICAgIHRoaXMuaGFuZGxlQXBpUmVhZHkucmVzb2x2ZSh0aGlzKTtcbiAgICB9XG4gIH1cblxuICBvbkRpc2Nvbm5lY3QgKCk6IHZvaWQge1xuICAgIHRoaXMuaXNBcGlSZWFkeSA9IGZhbHNlO1xuICAgIGNvbnNvbGUubG9nKGBEaXNjb25uZWN0ZWQgZnJvbSAke3RoaXMuY2hhaW5TbHVnfSBhdCAke3RoaXMuYXBpVXJsfWApO1xuICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvblN0YXR1cyhfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XG4gICAgdGhpcy5oYW5kbGVBcGlSZWFkeSA9IGNyZWF0ZVByb21pc2VIYW5kbGVyPF9TdWJzdHJhdGVBcGk+KCk7XG4gICAgdGhpcy5zdWJzdHJhdGVSZXRyeSArPSAxO1xuXG4gICAgaWYgKHRoaXMuc3Vic3RyYXRlUmV0cnkgPiA5KSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKS50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVDb25uZWN0aW9uU3RhdHVzKF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMuVU5TVEFCTEUpO1xuICAgICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfVxuICB9XG5cbiAgb25FcnJvciAoZTogRXJyb3IpOiB2b2lkIHtcbiAgICBjb25zb2xlLndhcm4oYCR7dGhpcy5jaGFpblNsdWd9IGNvbm5lY3Rpb24gZ290IGVycm9yYCwgZSk7XG4gIH1cblxuICBhc3luYyBmaWxsQXBpSW5mbyAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgeyBhcGksIHJlZ2lzdHJ5IH0gPSB0aGlzO1xuICAgIGNvbnN0IERFRkFVTFRfREVDSU1BTFMgPSByZWdpc3RyeS5jcmVhdGVUeXBlKCd1MzInLCAxMik7XG4gICAgY29uc3QgREVGQVVMVF9TUzU4ID0gcmVnaXN0cnkuY3JlYXRlVHlwZSgndTMyJywgYWRkcmVzc0RlZmF1bHRzLnByZWZpeCk7XG5cbiAgICB0aGlzLnNwZWNOYW1lID0gdGhpcy5hcGkucnVudGltZVZlcnNpb24uc3BlY05hbWUudG9TdHJpbmcoKTtcbiAgICB0aGlzLnNwZWNWZXJzaW9uID0gdGhpcy5hcGkucnVudGltZVZlcnNpb24uc3BlY1ZlcnNpb24udG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IFtzeXN0ZW1DaGFpbiwgc3lzdGVtTmFtZSwgc3lzdGVtVmVyc2lvbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBhcGkucnBjLnN5c3RlbT8uY2hhaW4oKSxcbiAgICAgIGFwaS5ycGMuc3lzdGVtPy5uYW1lKCksXG4gICAgICBhcGkucnBjLnN5c3RlbT8udmVyc2lvbigpXG4gICAgXSk7XG5cbiAgICB0aGlzLnN5c3RlbUNoYWluID0gc3lzdGVtQ2hhaW4udG9TdHJpbmcoKTtcbiAgICB0aGlzLnN5c3RlbU5hbWUgPSBzeXN0ZW1OYW1lLnRvU3RyaW5nKCk7XG4gICAgdGhpcy5zeXN0ZW1WZXJzaW9uID0gc3lzdGVtVmVyc2lvbi50b1N0cmluZygpO1xuXG4gICAgY29uc3QgcHJvcGVydGllcyA9IHJlZ2lzdHJ5LmNyZWF0ZVR5cGUoJ0NoYWluUHJvcGVydGllcycsIHsgc3M1OEZvcm1hdDogYXBpLnJlZ2lzdHJ5LmNoYWluU1M1OCwgdG9rZW5EZWNpbWFsczogYXBpLnJlZ2lzdHJ5LmNoYWluRGVjaW1hbHMsIHRva2VuU3ltYm9sOiBhcGkucmVnaXN0cnkuY2hhaW5Ub2tlbnMgfSk7XG4gICAgY29uc3Qgc3M1OEZvcm1hdCA9IHByb3BlcnRpZXMuc3M1OEZvcm1hdC51bndyYXBPcihERUZBVUxUX1NTNTgpLnRvTnVtYmVyKCk7XG4gICAgY29uc3QgdG9rZW5TeW1ib2wgPSBwcm9wZXJ0aWVzLnRva2VuU3ltYm9sLnVud3JhcE9yKFtmb3JtYXRCYWxhbmNlLmdldERlZmF1bHRzKCkudW5pdCwgLi4uREVGQVVMVF9BVVhdKTtcbiAgICBjb25zdCB0b2tlbkRlY2ltYWxzID0gcHJvcGVydGllcy50b2tlbkRlY2ltYWxzLnVud3JhcE9yKFtERUZBVUxUX0RFQ0lNQUxTXSk7XG5cbiAgICByZWdpc3RyeS5zZXRDaGFpblByb3BlcnRpZXMocmVnaXN0cnkuY3JlYXRlVHlwZSgnQ2hhaW5Qcm9wZXJ0aWVzJywgeyBzczU4Rm9ybWF0LCB0b2tlbkRlY2ltYWxzLCB0b2tlblN5bWJvbCB9KSk7XG5cbiAgICAvLyBmaXJzdCBzZXQgdXAgdGhlIFVJIGhlbHBlcnNcbiAgICB0aGlzLmRlZmF1bHRGb3JtYXRCYWxhbmNlID0ge1xuICAgICAgZGVjaW1hbHM6IHRva2VuRGVjaW1hbHMubWFwKChiOiBCTikgPT4ge1xuICAgICAgICByZXR1cm4gYi50b051bWJlcigpO1xuICAgICAgfSksXG4gICAgICB1bml0OiB0b2tlblN5bWJvbFswXS50b1N0cmluZygpXG4gICAgfTtcblxuICAgIGNvbnN0IGRlZmF1bHRTZWN0aW9uID0gT2JqZWN0LmtleXMoYXBpLnR4KVswXTtcbiAgICBjb25zdCBkZWZhdWx0TWV0aG9kID0gT2JqZWN0LmtleXMoYXBpLnR4W2RlZmF1bHRTZWN0aW9uXSlbMF07XG5cbiAgICB0aGlzLmFwaURlZmF1bHRUeCA9IGFwaS50eFtkZWZhdWx0U2VjdGlvbl1bZGVmYXVsdE1ldGhvZF07XG4gICAgdGhpcy5hcGlEZWZhdWx0VHhTdWRvID0gKGFwaS50eC5zeXN0ZW0gJiYgYXBpLnR4LnN5c3RlbS5zZXRDb2RlKSB8fCB0aGlzLmFwaURlZmF1bHRUeDtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9Bc3NldFR5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFdlaWdodFYyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9rb25pL2FwaS90b2tlbnMvd2FzbS91dGlscyc7XG5pbXBvcnQgeyBDaGFpblNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UnO1xuaW1wb3J0IHsgQWJzdHJhY3RDaGFpbkhhbmRsZXIgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaGFuZGxlci9BYnN0cmFjdENoYWluSGFuZGxlcic7XG5pbXBvcnQgeyBTdWJzdHJhdGVBcGkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaGFuZGxlci9TdWJzdHJhdGVBcGknO1xuaW1wb3J0IHsgX0FwaU9wdGlvbnMsIF9TdWJzdHJhdGVDaGFpblNwZWMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaGFuZGxlci90eXBlcyc7XG5pbXBvcnQgeyBfU21hcnRDb250cmFjdFRva2VuSW5mbywgX1N1YnN0cmF0ZUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5cbmltcG9ydCB7IENvbnRyYWN0UHJvbWlzZSB9IGZyb20gJ0Bwb2xrYWRvdC9hcGktY29udHJhY3QnO1xuaW1wb3J0IHsgQk4gfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5pbXBvcnQgeyBsb2dnZXIgYXMgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvbG9nZ2VyJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsL3R5cGVzJztcblxuaW1wb3J0IHsgX1BTUDIyX0FCSSwgX1BTUDM0X0FCSSB9IGZyb20gJy4uL2hlbHBlcic7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0FVWCA9IFsnQXV4MScsICdBdXgyJywgJ0F1eDMnLCAnQXV4NCcsICdBdXg1JywgJ0F1eDYnLCAnQXV4NycsICdBdXg4JywgJ0F1eDknXTtcblxuZXhwb3J0IGNsYXNzIFN1YnN0cmF0ZUNoYWluSGFuZGxlciBleHRlbmRzIEFic3RyYWN0Q2hhaW5IYW5kbGVyIHtcbiAgcHJpdmF0ZSBzdWJzdHJhdGVBcGlNYXA6IFJlY29yZDxzdHJpbmcsIFN1YnN0cmF0ZUFwaT4gPSB7fTtcblxuICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuXG4gIGNvbnN0cnVjdG9yIChwYXJlbnQ/OiBDaGFpblNlcnZpY2UpIHtcbiAgICBzdXBlcihwYXJlbnQpO1xuICAgIHRoaXMubG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCdzdWJzdHJhdGUtY2hhaW4taGFuZGxlcicpO1xuICB9XG5cbiAgcHVibGljIGdldFN1YnN0cmF0ZUFwaU1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic3RyYXRlQXBpTWFwO1xuICB9XG5cbiAgcHVibGljIGdldFN1YnN0cmF0ZUFwaUJ5Q2hhaW4gKGNoYWluU2x1Zzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic3RyYXRlQXBpTWFwW2NoYWluU2x1Z107XG4gIH1cblxuICBwdWJsaWMgZ2V0QXBpQnlDaGFpbiAoY2hhaW46IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmdldFN1YnN0cmF0ZUFwaUJ5Q2hhaW4oY2hhaW4pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHdha2VVcCAoKSB7XG4gICAgdGhpcy5pc1NsZWVwaW5nID0gZmFsc2U7XG4gICAgY29uc3QgYWN0aXZlQ2hhaW5zID0gdGhpcy5wYXJlbnQ/LmdldEFjdGl2ZUNoYWlucygpIHx8IFtdO1xuXG4gICAgZm9yIChjb25zdCBjaGFpbiBvZiBhY3RpdmVDaGFpbnMpIHtcbiAgICAgIGNvbnN0IGFwaSA9IHRoaXMuZ2V0U3Vic3RyYXRlQXBpQnlDaGFpbihjaGFpbik7XG5cbiAgICAgIC8vIE5vdCBmb3VuZCBzdWJzdHJhdGVJbnRlcmZhY2UgbWVhbiBpdCBhY3RpdmUgd2l0aCBldm0gaW50ZXJmYWNlXG4gICAgICBpZiAoYXBpKSB7XG4gICAgICAgIGFwaS5jb25uZWN0KCk7XG5cbiAgICAgICAgaWYgKCFhcGkudXNlTGlnaHRDbGllbnQpIHtcbiAgICAgICAgICAvLyBNYW51YWwgZmlyZSBoYW5kbGUgY29ubmVjdCB0byBhdm9pZCBzb21lIGNoYWluIGNhbiBub3QgcmVjb25uZWN0XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNvbm5lY3Rpb24oY2hhaW4sIGFwaS5jb25uZWN0aW9uU3RhdHVzKTtcbiAgICAgICAgICB9LCAxMDAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2xlZXAgKCkge1xuICAgIHRoaXMuaXNTbGVlcGluZyA9IHRydWU7XG4gICAgdGhpcy5jYW5jZWxBbGxSZWNvdmVyKCk7XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QudmFsdWVzKHRoaXMuZ2V0U3Vic3RyYXRlQXBpTWFwKCkpLm1hcCgoc3Vic3RyYXRlQXBpKSA9PiB7XG4gICAgICByZXR1cm4gc3Vic3RyYXRlQXBpLmRpc2Nvbm5lY3QoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9KSk7XG4gIH1cblxuICBhc3luYyByZWNvdmVyQXBpIChjaGFpblNsdWc6IHN0cmluZykge1xuICAgIGNvbnN0IGV4aXN0ZWQgPSB0aGlzLmdldFN1YnN0cmF0ZUFwaUJ5Q2hhaW4oY2hhaW5TbHVnKTtcblxuICAgIGlmIChleGlzdGVkICYmICFleGlzdGVkLmlzQXBpUmVhZHlPbmNlKSB7XG4gICAgICBjb25zb2xlLmxvZyhgUmVjb25uZWN0ICR7ZXhpc3RlZC5wcm92aWRlck5hbWUgfHwgZXhpc3RlZC5jaGFpblNsdWd9IGF0ICR7ZXhpc3RlZC5hcGlVcmx9YCk7XG5cbiAgICAgIHJldHVybiBleGlzdGVkLnJlY292ZXJDb25uZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldENoYWluU3BlYyAoc3Vic3RyYXRlQXBpOiBfU3Vic3RyYXRlQXBpKSB7XG4gICAgY29uc3QgcmVzdWx0OiBfU3Vic3RyYXRlQ2hhaW5TcGVjID0ge1xuICAgICAgYWRkcmVzc1ByZWZpeDogLTEsXG4gICAgICBkZWNpbWFsczogMCxcbiAgICAgIGV4aXN0ZW50aWFsRGVwb3NpdDogJycsXG4gICAgICBnZW5lc2lzSGFzaDogc3Vic3RyYXRlQXBpLmFwaS5nZW5lc2lzSGFzaD8udG9IZXgoKSxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgc3ltYm9sOiAnJyxcbiAgICAgIHBhcmFJZDogbnVsbFxuICAgIH07XG5cbiAgICBjb25zdCB7IGNoYWluRGVjaW1hbHMsIGNoYWluVG9rZW5zIH0gPSBzdWJzdHJhdGVBcGkuYXBpLnJlZ2lzdHJ5O1xuXG4gICAgaWYgKHN1YnN0cmF0ZUFwaS5hcGkucXVlcnkucGFyYWNoYWluSW5mbykge1xuICAgICAgcmVzdWx0LnBhcmFJZCA9IChhd2FpdCBzdWJzdHJhdGVBcGkuYXBpLnF1ZXJ5LnBhcmFjaGFpbkluZm8ucGFyYWNoYWluSWQoKSkudG9QcmltaXRpdmUoKSBhcyBudW1iZXI7XG4gICAgfVxuXG4gICAgLy8gZ2V0IGZpcnN0IHRva2VuIGJ5IGRlZmF1bHQsIG1pZ2h0IGNoYW5nZVxuICAgIHJlc3VsdC5uYW1lID0gKGF3YWl0IHN1YnN0cmF0ZUFwaS5hcGkucnBjLnN5c3RlbS5jaGFpbigpKS50b1ByaW1pdGl2ZSgpO1xuICAgIHJlc3VsdC5zeW1ib2wgPSBjaGFpblRva2Vuc1swXTtcbiAgICByZXN1bHQuZGVjaW1hbHMgPSBjaGFpbkRlY2ltYWxzWzBdO1xuICAgIHJlc3VsdC5hZGRyZXNzUHJlZml4ID0gc3Vic3RyYXRlQXBpLmFwaT8uY29uc3RzPy5zeXN0ZW0/LnNzNThQcmVmaXg/LnRvUHJpbWl0aXZlKCkgYXMgbnVtYmVyO1xuICAgIHJlc3VsdC5leGlzdGVudGlhbERlcG9zaXQgPSBzdWJzdHJhdGVBcGkuYXBpLmNvbnN0cy5iYWxhbmNlcy5leGlzdGVudGlhbERlcG9zaXQudG9TdHJpbmcoKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0U21hcnRDb250cmFjdFRva2VuSW5mbyAoY29udHJhY3RBZGRyZXNzOiBzdHJpbmcsIHRva2VuVHlwZTogX0Fzc2V0VHlwZSwgb3JpZ2luQ2hhaW46IHN0cmluZywgY29udHJhY3RDYWxsZXI/OiBzdHJpbmcpOiBQcm9taXNlPF9TbWFydENvbnRyYWN0VG9rZW5JbmZvPiB7XG4gICAgbGV0IHRva2VuQ29udHJhY3Q6IENvbnRyYWN0UHJvbWlzZTtcbiAgICBsZXQgbmFtZSA9ICcnO1xuICAgIGxldCBkZWNpbWFsczogbnVtYmVyIHwgdW5kZWZpbmVkID0gLTE7XG4gICAgbGV0IHN5bWJvbCA9ICcnO1xuICAgIGxldCBjb250cmFjdEVycm9yID0gZmFsc2U7XG5cbiAgICBjb25zdCBzdWJzdHJhdGVBcGkgPSB0aGlzLmdldFN1YnN0cmF0ZUFwaUJ5Q2hhaW4ob3JpZ2luQ2hhaW4pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0b2tlblR5cGUgPT09IF9Bc3NldFR5cGUuUFNQMjIpIHtcbiAgICAgICAgdG9rZW5Db250cmFjdCA9IG5ldyBDb250cmFjdFByb21pc2Uoc3Vic3RyYXRlQXBpLmFwaSwgX1BTUDIyX0FCSSwgY29udHJhY3RBZGRyZXNzKTtcblxuICAgICAgICBjb25zdCBbbmFtZVJlc3AsIHN5bWJvbFJlc3AsIGRlY2ltYWxzUmVzcF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgdG9rZW5Db250cmFjdC5xdWVyeVsncHNwMjJNZXRhZGF0YTo6dG9rZW5OYW1lJ10oY29udHJhY3RDYWxsZXIgfHwgY29udHJhY3RBZGRyZXNzLCB7IGdhc0xpbWl0OiBnZXREZWZhdWx0V2VpZ2h0VjIoc3Vic3RyYXRlQXBpLmFwaSkgfSksIC8vIHJlYWQtb25seSBvcGVyYXRpb24gc28gbm8gZ2FzIGxpbWl0XG4gICAgICAgICAgdG9rZW5Db250cmFjdC5xdWVyeVsncHNwMjJNZXRhZGF0YTo6dG9rZW5TeW1ib2wnXShjb250cmFjdENhbGxlciB8fCBjb250cmFjdEFkZHJlc3MsIHsgZ2FzTGltaXQ6IGdldERlZmF1bHRXZWlnaHRWMihzdWJzdHJhdGVBcGkuYXBpKSB9KSxcbiAgICAgICAgICB0b2tlbkNvbnRyYWN0LnF1ZXJ5Wydwc3AyMk1ldGFkYXRhOjp0b2tlbkRlY2ltYWxzJ10oY29udHJhY3RDYWxsZXIgfHwgY29udHJhY3RBZGRyZXNzLCB7IGdhc0xpbWl0OiBnZXREZWZhdWx0V2VpZ2h0VjIoc3Vic3RyYXRlQXBpLmFwaSkgfSlcbiAgICAgICAgXSk7XG5cbiAgICAgICAgaWYgKCEobmFtZVJlc3AucmVzdWx0LmlzT2sgJiYgc3ltYm9sUmVzcC5yZXN1bHQuaXNPayAmJiBkZWNpbWFsc1Jlc3AucmVzdWx0LmlzT2spIHx8ICFuYW1lUmVzcC5vdXRwdXQgfHwgIWRlY2ltYWxzUmVzcC5vdXRwdXQgfHwgIXN5bWJvbFJlc3Aub3V0cHV0KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgZGVjaW1hbHM6IC0xLFxuICAgICAgICAgICAgc3ltYm9sOiAnJyxcbiAgICAgICAgICAgIGNvbnRyYWN0RXJyb3I6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHN5bWJvbE9iaiA9IHN5bWJvbFJlc3Aub3V0cHV0Py50b0h1bWFuKCkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICAgICAgICBjb25zdCBkZWNpbWFsc09iaiA9IGRlY2ltYWxzUmVzcC5vdXRwdXQ/LnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgICAgICAgIGNvbnN0IG5hbWVPYmogPSBuYW1lUmVzcC5vdXRwdXQ/LnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gICAgICAgICAgbmFtZSA9IG5hbWVSZXNwLm91dHB1dCA/IChuYW1lT2JqLk9rIGFzIHN0cmluZyB8fCBuYW1lT2JqLm9rIGFzIHN0cmluZykgOiAnJztcbiAgICAgICAgICBkZWNpbWFscyA9IGRlY2ltYWxzUmVzcC5vdXRwdXQgPyAobmV3IEJOKChkZWNpbWFsc09iai5PayB8fCBkZWNpbWFsc09iai5vaykgYXMgc3RyaW5nIHwgbnVtYmVyKSkudG9OdW1iZXIoKSA6IDA7XG4gICAgICAgICAgc3ltYm9sID0gZGVjaW1hbHNSZXNwLm91dHB1dCA/IChzeW1ib2xPYmouT2sgYXMgc3RyaW5nIHx8IHN5bWJvbE9iai5vayBhcyBzdHJpbmcpIDogJyc7XG5cbiAgICAgICAgICBpZiAoIW5hbWUgfHwgIXN5bWJvbCB8fCB0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHN5bWJvbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnRyYWN0RXJyb3IgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKCd2YWxpZGF0ZSBQU1AyMicsIG5hbWUsIHN5bWJvbCwgZGVjaW1hbHMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b2tlbkNvbnRyYWN0ID0gbmV3IENvbnRyYWN0UHJvbWlzZShzdWJzdHJhdGVBcGkuYXBpLCBfUFNQMzRfQUJJLCBjb250cmFjdEFkZHJlc3MpO1xuXG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25JZFJlc3AgPSBhd2FpdCB0b2tlbkNvbnRyYWN0LnF1ZXJ5Wydwc3AzNDo6Y29sbGVjdGlvbklkJ10oY29udHJhY3RDYWxsZXIgfHwgY29udHJhY3RBZGRyZXNzLCB7IGdhc0xpbWl0OiBnZXREZWZhdWx0V2VpZ2h0VjIoc3Vic3RyYXRlQXBpLmFwaSkgfSk7IC8vIHJlYWQtb25seSBvcGVyYXRpb24gc28gbm8gZ2FzIGxpbWl0XG5cbiAgICAgICAgaWYgKCFjb2xsZWN0aW9uSWRSZXNwLnJlc3VsdC5pc09rIHx8ICFjb2xsZWN0aW9uSWRSZXNwLm91dHB1dCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICAgIGRlY2ltYWxzOiAtMSxcbiAgICAgICAgICAgIHN5bWJvbDogJycsXG4gICAgICAgICAgICBjb250cmFjdEVycm9yOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uSWREaWN0ID0gY29sbGVjdGlvbklkUmVzcC5vdXRwdXQ/LnRvSHVtYW4oKSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb25JZERpY3QuQnl0ZXMgPT09ICcnKSB7XG4gICAgICAgICAgICBjb250cmFjdEVycm9yID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmFtZSA9ICcnOyAvLyBubyBmdW5jdGlvbiB0byBnZXQgY29sbGVjdGlvbiBuYW1lLCBsZXQgdXNlciBtYW51YWxseSBwdXQgaW4gdGhlIG5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVjaW1hbHMsXG4gICAgICAgIHN5bWJvbCxcbiAgICAgICAgY29udHJhY3RFcnJvclxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGRlY2ltYWxzOiAtMSxcbiAgICAgICAgc3ltYm9sOiAnJyxcbiAgICAgICAgY29udHJhY3RFcnJvcjogdHJ1ZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0U3Vic3RyYXRlQXBpIChjaGFpblNsdWc6IHN0cmluZywgc3Vic3RyYXRlQXBpOiBTdWJzdHJhdGVBcGkpIHtcbiAgICB0aGlzLnN1YnN0cmF0ZUFwaU1hcFtjaGFpblNsdWddID0gc3Vic3RyYXRlQXBpO1xuICB9XG5cbiAgcHVibGljIGRlc3Ryb3lTdWJzdHJhdGVBcGkgKGNoYWluU2x1Zzogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3Vic3RyYXRlQVBJID0gdGhpcy5zdWJzdHJhdGVBcGlNYXBbY2hhaW5TbHVnXTtcblxuICAgIHN1YnN0cmF0ZUFQST8uZGVzdHJveSgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGluaXRBcGkgKGNoYWluU2x1Zzogc3RyaW5nLCBhcGlVcmw6IHN0cmluZywgeyBleHRlcm5hbEFwaVByb21pc2UsIG9uVXBkYXRlU3RhdHVzLCBwcm92aWRlck5hbWUgfTogT21pdDxfQXBpT3B0aW9ucywgJ21ldGFkYXRhJz4gPSB7fSk6IFByb21pc2U8U3Vic3RyYXRlQXBpPiB7XG4gICAgY29uc3QgZXhpc3RlZCA9IHRoaXMuc3Vic3RyYXRlQXBpTWFwW2NoYWluU2x1Z107XG5cbiAgICAvLyBSZXR1cm4gZXhpc3RlZCB0byBhdm9pZCByZS1pbml0IG1ldGFkYXRhXG4gICAgaWYgKGV4aXN0ZWQpIHtcbiAgICAgIGV4aXN0ZWQuY29ubmVjdCgpO1xuXG4gICAgICBpZiAoYXBpVXJsICE9PSBleGlzdGVkLmFwaVVybCkge1xuICAgICAgICBhd2FpdCBleGlzdGVkLnVwZGF0ZUFwaVVybChhcGlVcmwpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXhpc3RlZDtcbiAgICB9XG5cbiAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMucGFyZW50Py5nZXRNZXRhZGF0YShjaGFpblNsdWcpO1xuICAgIGNvbnN0IGFwaU9iamVjdCA9IG5ldyBTdWJzdHJhdGVBcGkoY2hhaW5TbHVnLCBhcGlVcmwsIHsgcHJvdmlkZXJOYW1lLCBtZXRhZGF0YSwgZXh0ZXJuYWxBcGlQcm9taXNlIH0pO1xuXG4gICAgYXBpT2JqZWN0LmNvbm5lY3Rpb25TdGF0dXNTdWJqZWN0LnN1YnNjcmliZSh0aGlzLmhhbmRsZUNvbm5lY3Rpb24uYmluZCh0aGlzLCBjaGFpblNsdWcpKTtcbiAgICBvblVwZGF0ZVN0YXR1cyAmJiBhcGlPYmplY3QuY29ubmVjdGlvblN0YXR1c1N1YmplY3Quc3Vic2NyaWJlKG9uVXBkYXRlU3RhdHVzKTtcblxuICAgIC8vIFVwZGF0ZSBtZXRhZGF0YSB0byBkYXRhYmFzZSB3aXRoIGFzeW5jIG1ldGhvZHNcbiAgICBhcGlPYmplY3QuaXNSZWFkeS50aGVuKChhcGkpID0+IHtcbiAgICAgIC8vIEF2b2lkIGRhdGUgZXhpc3RlZCBtZXRhZGF0YVxuICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLnNwZWNWZXJzaW9uID09PSBhcGkuc3BlY1ZlcnNpb24gJiYgbWV0YWRhdGEuZ2VuZXNpc0hhc2ggPT09IGFwaS5hcGkuZ2VuZXNpc0hhc2gudG9IZXgoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGFyZW50Py51cHNlcnRNZXRhZGF0YShjaGFpblNsdWcsIHtcbiAgICAgICAgY2hhaW46IGNoYWluU2x1ZyxcbiAgICAgICAgZ2VuZXNpc0hhc2g6IGFwaS5hcGkuZ2VuZXNpc0hhc2gudG9IZXgoKSxcbiAgICAgICAgc3BlY1ZlcnNpb246IGFwaS5zcGVjVmVyc2lvbixcbiAgICAgICAgaGV4VmFsdWU6IGFwaS5hcGkucnVudGltZU1ldGFkYXRhLnRvSGV4KClcbiAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG4gICAgcmV0dXJuIGFwaU9iamVjdDtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCAqIGFzIFNjIGZyb20gJ0BzdWJzdHJhdGUvY29ubmVjdCc7XG5pbXBvcnQgeyBXZWxsS25vd25DaGFpbiB9IGZyb20gJ0BzdWJzdHJhdGUvY29ubmVjdCc7XG5cbmltcG9ydCB7IFNjUHJvdmlkZXIgfSBmcm9tICdAcG9sa2Fkb3QvcnBjLXByb3ZpZGVyJztcbmltcG9ydCB7IFByb3ZpZGVySW50ZXJmYWNlLCBQcm92aWRlckludGVyZmFjZUNhbGxiYWNrLCBQcm92aWRlckludGVyZmFjZUVtaXRDYiwgUHJvdmlkZXJJbnRlcmZhY2VFbWl0dGVkIH0gZnJvbSAnQHBvbGthZG90L3JwYy1wcm92aWRlci90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCByZWxheUNoYWluU3BlY3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIGt1c2FtYTogV2VsbEtub3duQ2hhaW4ua3NtY2MzLFxuICBwb2xrYWRvdDogV2VsbEtub3duQ2hhaW4ucG9sa2Fkb3QsXG4gIHJvY29jbzogV2VsbEtub3duQ2hhaW4ucm9jb2NvX3YyXzIsXG4gIHdlc3RlbmQ6IFdlbGxLbm93bkNoYWluLndlc3RlbmQyXG59O1xuXG4vLyBEaXJlY3QgZ2V0IHNwZWMgZGF0YSBmcm9tIEBwb2xrYWRvdC9yZWFjdC1hcGkgcmVwb3NpdG9yeVxuY29uc3Qgc291cmNlRm9sZGVyVXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9wb2xrYWRvdC1qcy9hcHBzL21hc3Rlci9wYWNrYWdlcy9yZWFjdC1hcGkvc3JjL2xpZ2h0Lyc7XG5cbmV4cG9ydCBjb25zdCBwYXJhQ2hhaW5TcGVjczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgJ2t1c2FtYS9zaGlkZW4nOiBgJHtzb3VyY2VGb2xkZXJVcmx9a3VzYW1hL3NoaWRlbi5qc29uYCxcbiAgJ2t1c2FtYS90aW5rZXJuZXQnOiBgJHtzb3VyY2VGb2xkZXJVcmx9a3VzYW1hL3Rpbmtlcm5ldC5qc29uYCxcbiAgJ3BvbGthZG90L2FzdGFyJzogYCR7c291cmNlRm9sZGVyVXJsfXBvbGthZG90L2FzdGFyLmpzb25gXG59O1xuXG5jbGFzcyBQcm92aWRlclBsYWNlaG9sZGVyIGltcGxlbWVudHMgUHJvdmlkZXJJbnRlcmZhY2Uge1xuICBwcml2YXRlIHJlYWRvbmx5IHByb3ZpZGVyUHJvbWlzZTogUHJvbWlzZTxTY1Byb3ZpZGVyPjtcblxuICBwcml2YXRlIHByb3ZpZGVyPzogU2NQcm92aWRlcjtcblxuICBjb25zdHJ1Y3RvciAocHJvdmlkZXJQcm9taXNlOiBQcm9taXNlPFNjUHJvdmlkZXI+KSB7XG4gICAgdGhpcy5wcm92aWRlclByb21pc2UgPSBwcm92aWRlclByb21pc2U7XG5cbiAgICBwcm92aWRlclByb21pc2VcbiAgICAgIC50aGVuKChwcm92aWRlcikgPT4ge1xuICAgICAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXI7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG5cbiAgZ2V0IGhhc1N1YnNjcmlwdGlvbnMgKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0IGlzQ2xvbmFibGUgKCkge1xuICAgIGlmICh0aGlzLnByb3ZpZGVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm92aWRlci5pc0Nsb25hYmxlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzQ29ubmVjdGVkICgpIHtcbiAgICBpZiAodGhpcy5wcm92aWRlcikge1xuICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXIuaXNDb25uZWN0ZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBjbG9uZSAoKTogUHJvdmlkZXJJbnRlcmZhY2Uge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gdGhpcy5wcm92aWRlcj8uY2xvbmUoKTtcbiAgfVxuXG4gIGFzeW5jIGNvbm5lY3QgKCkge1xuICAgIGF3YWl0IHRoaXMucHJvdmlkZXJQcm9taXNlO1xuICAgIGF3YWl0IHRoaXMucHJvdmlkZXI/LmNvbm5lY3QoKTtcbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QgKCkge1xuICAgIGF3YWl0IHRoaXMucHJvdmlkZXJQcm9taXNlO1xuICAgIGF3YWl0IHRoaXMucHJvdmlkZXI/LmRpc2Nvbm5lY3QoKTtcbiAgfVxuXG4gIG9uICh0eXBlOiBQcm92aWRlckludGVyZmFjZUVtaXR0ZWQsIHN1YjogUHJvdmlkZXJJbnRlcmZhY2VFbWl0Q2IpOiAoKSA9PiB2b2lkIHtcbiAgICBsZXQgY2FuY2VsID0gZmFsc2U7XG5cbiAgICBsZXQgdW5zdWIgPSAoKSA9PiB7XG4gICAgICBjYW5jZWwgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5wcm92aWRlclByb21pc2UudGhlbigocHJvdmlkZXI6IFByb3ZpZGVySW50ZXJmYWNlKSA9PiB7XG4gICAgICBpZiAoIWNhbmNlbCkge1xuICAgICAgICB1bnN1YiA9IHByb3ZpZGVyLm9uKHR5cGUsIHN1Yik7XG4gICAgICB9XG4gICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdW5zdWIoKTtcbiAgICB9O1xuICB9XG5cbiAgc2VuZDxUID0gYW55PiAobWV0aG9kOiBzdHJpbmcsIHBhcmFtczogdW5rbm93bltdLCBpc0NhY2hlYWJsZT86IGJvb2xlYW4pOiBQcm9taXNlPFQ+IHtcbiAgICBpZiAodGhpcy5wcm92aWRlcikge1xuICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXIuc2VuZDxUPihtZXRob2QsIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvdmlkZXJQcm9taXNlLnRoZW4oKHByb3ZpZGVyKSA9PiB7XG4gICAgICByZXR1cm4gcHJvdmlkZXIuc2VuZDxUPihtZXRob2QsIHBhcmFtcyk7XG4gICAgfSk7XG4gIH1cblxuICBzdWJzY3JpYmUgKHR5cGU6IHN0cmluZywgbWV0aG9kOiBzdHJpbmcsIHBhcmFtczogdW5rbm93bltdLCBjYjogUHJvdmlkZXJJbnRlcmZhY2VDYWxsYmFjayk6IFByb21pc2U8bnVtYmVyIHwgc3RyaW5nPiB7XG4gICAgaWYgKHRoaXMucHJvdmlkZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyLnN1YnNjcmliZSh0eXBlLCBtZXRob2QsIHBhcmFtcywgY2IpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByb3ZpZGVyUHJvbWlzZS50aGVuKChwcm92aWRlcikgPT4ge1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnN1YnNjcmliZSh0eXBlLCBtZXRob2QsIHBhcmFtcywgY2IpO1xuICAgIH0pO1xuICB9XG5cbiAgdW5zdWJzY3JpYmUgKHR5cGU6IHN0cmluZywgbWV0aG9kOiBzdHJpbmcsIGlkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodGhpcy5wcm92aWRlcikge1xuICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXIudW5zdWJzY3JpYmUodHlwZSwgbWV0aG9kLCBpZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvdmlkZXJQcm9taXNlLnRoZW4oKHByb3ZpZGVyKSA9PiB7XG4gICAgICByZXR1cm4gcHJvdmlkZXIudW5zdWJzY3JpYmUodHlwZSwgbWV0aG9kLCBpZCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnN0cmF0ZUNvbm5lY3RQcm92aWRlciAoc3BlY0xpbms6IHN0cmluZyk6IFByb3ZpZGVySW50ZXJmYWNlIHtcbiAgY29uc3QgW3JlbGF5TmFtZSwgcGFyYU5hbWVdID0gc3BlY0xpbmsuc3BsaXQoJy8nKTtcbiAgY29uc3QgcmVsYXlTcGVjOiBzdHJpbmcgPSByZWxheUNoYWluU3BlY3NbcmVsYXlOYW1lXTtcblxuICBjb25zdCByZWxheVByb3ZpZGVyID0gbmV3IFNjUHJvdmlkZXIoU2MsIHJlbGF5U3BlYyk7XG5cbiAgaWYgKCFwYXJhTmFtZSkge1xuICAgIHJldHVybiByZWxheVByb3ZpZGVyO1xuICB9XG5cbiAgY29uc3QgcGFyYUNoYWluRGF0YSA9IHBhcmFDaGFpblNwZWNzW3NwZWNMaW5rXTtcbiAgbGV0IHNjUHJvdmlkZXI6IFNjUHJvdmlkZXIgfCB1bmRlZmluZWQ7XG4gIGNvbnN0IHNjUHJvbWlzZSA9IGZldGNoKHBhcmFDaGFpbkRhdGEpLnRoZW4oKHJzKSA9PiBycy50ZXh0KCkpLnRoZW4oKHNwZWMpID0+IHtcbiAgICBzY1Byb3ZpZGVyID0gbmV3IFNjUHJvdmlkZXIoU2MsIHNwZWMpO1xuXG4gICAgcmV0dXJuIHNjUHJvdmlkZXI7XG4gIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpIGFzIFByb21pc2U8U2NQcm92aWRlcj47XG5cbiAgcmV0dXJuIG5ldyBQcm92aWRlclBsYWNlaG9sZGVyKHNjUHJvbWlzZSk7XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgTWFudGFBdXRob3JpemF0aW9uQ29udGV4dCwgTWFudGFQYXlDb25maWcsIE1hbnRhUGF5U3luY1N0YXRlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgRGF0YWJhc2VTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL0RhdGFiYXNlU2VydmljZSc7XG5pbXBvcnQgeyBCYXNlV2FsbGV0LCBpbnRlcmZhY2VzLCBNYW50YVBheVdhbGxldCB9IGZyb20gJ21hbnRhLWV4dGVuc2lvbi1zZGsnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5leHBvcnQgY2xhc3MgTWFudGFQcml2YXRlSGFuZGxlciB7XG4gIHByaXZhdGUgZGJTZXJ2aWNlOiBEYXRhYmFzZVNlcnZpY2U7XG4gIHByaXZhdGUgX3ByaXZhdGVXYWxsZXQ6IE1hbnRhUGF5V2FsbGV0IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBwcml2YXRlIGN1cnJlbnRBZGRyZXNzOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgc3luY1N0YXRlU3ViamVjdCA9IG5ldyBTdWJqZWN0PE1hbnRhUGF5U3luY1N0YXRlPigpO1xuICBwcml2YXRlIHN5bmNTdGF0ZTogTWFudGFQYXlTeW5jU3RhdGU7XG5cbiAgY29uc3RydWN0b3IgKGRiU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlKSB7XG4gICAgdGhpcy5kYlNlcnZpY2UgPSBkYlNlcnZpY2U7XG4gICAgdGhpcy5zeW5jU3RhdGUgPSB7XG4gICAgICBpc1N5bmNpbmc6IGZhbHNlLFxuICAgICAgcHJvZ3Jlc3M6IDBcbiAgICB9O1xuICAgIHRoaXMuc3luY1N0YXRlU3ViamVjdC5uZXh0KHRoaXMuc3luY1N0YXRlKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDdXJyZW50QWRkcmVzcyAoYWRkcmVzczogc3RyaW5nKSB7XG4gICAgdGhpcy5jdXJyZW50QWRkcmVzcyA9IGFkZHJlc3M7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3luY1N0YXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeW5jU3RhdGU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHByaXZhdGVXYWxsZXQgKCkge1xuICAgIHJldHVybiB0aGlzLl9wcml2YXRlV2FsbGV0O1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZVN5bmNTdGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3luY1N0YXRlU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVNYW50YVBheUNvbmZpZyAoYWRkcmVzczogc3RyaW5nLCBjaGFpbjogc3RyaW5nLCBjaGFuZ2VzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgYXdhaXQgdGhpcy5kYlNlcnZpY2UudXBkYXRlTWFudGFQYXlEYXRhKGBjb25maWdfJHtjaGFpbn1fJHthZGRyZXNzfWAsIGNoYW5nZXMpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHNhdmVNYW50YVBheUNvbmZpZyAoY29uZmlnOiBNYW50YVBheUNvbmZpZykge1xuICAgIGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnNldE1hbnRhUGF5RGF0YSh7XG4gICAgICBrZXk6IGBjb25maWdfJHtjb25maWcuY2hhaW59XyR7Y29uZmlnLmFkZHJlc3N9YCxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldE1hbnRhUGF5Q29uZmlnIChhZGRyZXNzOiBzdHJpbmcsIGNoYWluOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmRiU2VydmljZS5nZXRNYW50YVBheURhdGEoYGNvbmZpZ18ke2NoYWlufV8ke2FkZHJlc3N9YCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0TWFudGFQYXlGaXJzdENvbmZpZyAoY2hhaW46IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmRiU2VydmljZS5nZXRNYW50YVBheUZpcnN0Q29uZmlnKGNoYWluKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVNYW50YVBheUNvbmZpZyAoYWRkcmVzczogc3RyaW5nLCBjaGFpbjogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5kYlNlcnZpY2UuZGVsZXRlTWFudGFQYXlDb25maWcoYGNvbmZpZ18ke2NoYWlufV8ke2FkZHJlc3N9YCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2F2ZU1hbnRhQXV0aENvbnRleHQgKGNvbnRleHQ6IE1hbnRhQXV0aG9yaXphdGlvbkNvbnRleHQpIHtcbiAgICBhd2FpdCB0aGlzLmRiU2VydmljZS5zZXRNYW50YVBheURhdGEoe1xuICAgICAga2V5OiBgYXV0aENvbnRleHRfJHtjb250ZXh0LmNoYWlufV8ke2NvbnRleHQuYWRkcmVzc31gLFxuICAgICAgLi4uY29udGV4dFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldE1hbnRhQXV0aENvbnRleHQgKGFkZHJlc3M6IHN0cmluZywgY2hhaW46IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmRiU2VydmljZS5nZXRNYW50YVBheURhdGEoYGF1dGhDb250ZXh0XyR7Y2hhaW59XyR7YWRkcmVzc31gKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVNYW50YUF1dGhDb250ZXh0IChhZGRyZXNzOiBzdHJpbmcsIGNoYWluOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5kYlNlcnZpY2UuZGVsZXRlTWFudGFQYXlDb25maWcoYGF1dGhDb250ZXh0XyR7Y2hhaW59XyR7YWRkcmVzc31gKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUxlZGdlclN0YXRlIChwYWxsZXROYW1lOiBpbnRlcmZhY2VzLlBhbGxldE5hbWUsIG5ldHdvcms6IGludGVyZmFjZXMuTmV0d29yaywgZGF0YTogYW55KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1ZmZpeCA9IHRoaXMuY3VycmVudEFkZHJlc3MgPyBgXyR7dGhpcy5jdXJyZW50QWRkcmVzc31gIDogJyc7XG5cbiAgICAgIGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnNldE1hbnRhUGF5RGF0YSh7XG4gICAgICAgIGtleTogYHN0b3JhZ2Vfc3RhdGVfJHtwYWxsZXROYW1lfV8ke25ldHdvcmt9JHtzdWZmaXh9YCxcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignbWFudGEtcGF5JywgZSk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0TGVkZ2VyU3RhdGUgKHBhbGxldE5hbWU6IGludGVyZmFjZXMuUGFsbGV0TmFtZSwgbmV0d29yazogaW50ZXJmYWNlcy5OZXR3b3JrKTogUHJvbWlzZTxhbnk+IHtcbiAgICBsZXQgcmVzdWx0OiBhbnk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VmZml4ID0gdGhpcy5jdXJyZW50QWRkcmVzcyA/IGBfJHt0aGlzLmN1cnJlbnRBZGRyZXNzfWAgOiAnJztcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5kYlNlcnZpY2UuZ2V0TWFudGFQYXlEYXRhKGBzdG9yYWdlX3N0YXRlXyR7cGFsbGV0TmFtZX1fJHtuZXR3b3JrfSR7c3VmZml4fWApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gICAgcmV0dXJuIHJlc3VsdCB8fCBudWxsO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGluaXRNYW50YVBheSAocHJvdmlkZXJVcmw6IHN0cmluZywgbmV0d29yazogc3RyaW5nKSB7XG4gICAgY29uc3QgbmV0d29ya1BhcmFtID0gbmV0d29yay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5ldHdvcmsuc2xpY2UoMSk7IC8vIE1hbnRhIHx8IENhbGFtYXJpIHx8IERvbHBoaW5cblxuICAgIGNvbnN0IGJhc2VXYWxsZXQgPSBhd2FpdCBCYXNlV2FsbGV0LmluaXQoe1xuICAgICAgYXBpRW5kcG9pbnQ6IHByb3ZpZGVyVXJsLFxuICAgICAgbG9nZ2luZ0VuYWJsZWQ6IHRydWUsXG4gICAgICBwcm92aW5nRmlsZVBhdGg6ICcuL21hbnRhLXBheS9wcm92aW5nJyxcbiAgICAgIHBhcmFtZXRlcnNGaWxlUGF0aDogJy4vbWFudGEtcGF5L3BhcmFtZXRlcnMnLFxuICAgICAgc2F2ZVN0b3JhZ2VTdGF0ZVRvTG9jYWw6IHRoaXMuc2F2ZUxlZGdlclN0YXRlLmJpbmQodGhpcyksXG4gICAgICBnZXRTdG9yYWdlU3RhdGVGcm9tTG9jYWw6IHRoaXMuZ2V0TGVkZ2VyU3RhdGUuYmluZCh0aGlzKVxuICAgIH0pO1xuXG4gICAgdGhpcy5fcHJpdmF0ZVdhbGxldCA9IE1hbnRhUGF5V2FsbGV0LmluaXQobmV0d29ya1BhcmFtIGFzIGludGVyZmFjZXMuTmV0d29yaywgYmFzZVdhbGxldCk7XG5cbiAgICByZXR1cm4gdGhpcy5fcHJpdmF0ZVdhbGxldC5hcGk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0Q3VycmVudExlZGdlclN0YXRlICgpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgY29uc3QgbGVkZ2VyU3RhdGUgPSBhd2FpdCB0aGlzLmdldExlZGdlclN0YXRlKCdtYW50YVBheScsICdDYWxhbWFyaScpO1xuXG4gICAgaWYgKCFsZWRnZXJTdGF0ZSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuX3ByaXZhdGVXYWxsZXQ/LmdldExlZGdlckN1cnJlbnRDb3VudChsZWRnZXJTdGF0ZS5jaGVja3BvaW50KSkgYXMgbnVtYmVyO1xuICB9XG5cbiAgcHVibGljIHNldFN5bmNTdGF0ZSAoZGF0YTogTWFudGFQYXlTeW5jU3RhdGUpIHtcbiAgICB0aGlzLnN5bmNTdGF0ZSA9IGRhdGE7XG5cbiAgICB0aGlzLnN5bmNTdGF0ZVN1YmplY3QubmV4dCh0aGlzLnN5bmNTdGF0ZSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc3Vic2NyaWJlU3luY1Byb2dyZXNzICgpIHtcbiAgICBjb25zdCBsZWRnZXJUb3RhbENvdW50ID0gKGF3YWl0IHRoaXMuX3ByaXZhdGVXYWxsZXQ/LmdldExlZGdlclRvdGFsQ291bnQoKSkgYXMgbnVtYmVyO1xuXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmdldEN1cnJlbnRMZWRnZXJTdGF0ZSgpLnRoZW4oKGN1cnJlbnRDb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5mbG9vcigoY3VycmVudENvdW50IC8gbGVkZ2VyVG90YWxDb3VudCkgKiAxMDApO1xuXG4gICAgICAgIGlmIChwcm9ncmVzcyA9PT0gMTAwKSB7XG4gICAgICAgICAgdGhpcy5zeW5jU3RhdGUgPSB7XG4gICAgICAgICAgICBpc1N5bmNpbmc6IGZhbHNlLFxuICAgICAgICAgICAgcHJvZ3Jlc3NcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zeW5jU3RhdGUgPSB7XG4gICAgICAgICAgICBpc1N5bmNpbmc6IHRydWUsXG4gICAgICAgICAgICBwcm9ncmVzc1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN5bmNTdGF0ZVN1YmplY3QubmV4dCh0aGlzLnN5bmNTdGF0ZSk7XG4gICAgICB9KVxuICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfSwgMTAwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbmV4cG9ydCBjb25zdCBfRVJDMjBfQUJJID0gcmVxdWlyZSgnLi9lcmMyMF9hYmkuanNvbicpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXMsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG5leHBvcnQgY29uc3QgX0VSQzcyMV9BQkkgPSByZXF1aXJlKCcuL2VyYzcyMV9hYmkuanNvbicpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXMsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG5leHBvcnQgY29uc3QgX1RFU1RfRVJDNzIxX0FCSSA9IHJlcXVpcmUoJy4vdGVzdF9lcmM3MjFfYWJpLmpzb24nKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuZXhwb3J0IGNvbnN0IF9QU1AyMl9BQkk6IFJlY29yZDxzdHJpbmcsIGFueT4gPSByZXF1aXJlKCcuL3BzcDIyX2FiaS5qc29uJyk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbmV4cG9ydCBjb25zdCBfUFNQMzRfQUJJOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gcmVxdWlyZSgnLi9wc3AzNF9hYmkuanNvbicpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXMsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG5leHBvcnQgY29uc3QgX1BJTktfUFNQMzRfQUJJOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gcmVxdWlyZSgnLi9waW5rX3BzcDM0X2FiaS5qc29uJyk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbmV4cG9ydCBjb25zdCBfTkVVUk9HVU5TX1BTUDM0X0FCSTogUmVjb3JkPHN0cmluZywgYW55PiA9IHJlcXVpcmUoJy4vbmV1cm9ndW5zX3BzcDM0X2FiaS5qc29uJyk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbmV4cG9ydCBjb25zdCBfQVpFUk9fRE9NQUlOX1JFR0lTVFJZX0FCSTogUmVjb3JkPHN0cmluZywgYW55PiA9IHJlcXVpcmUoJy4vYXplcm9fZG9tYWluX3JlZ2lzdHJ5X2FiaS5qc29uJyk7XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuLy8gaW1wb3J0IHsgQXNzZXRMb2dvTWFwLCBBc3NldFJlZk1hcCwgQ2hhaW5Bc3NldE1hcCwgQ2hhaW5JbmZvTWFwLCBDaGFpbkxvZ29NYXAsIE11bHRpQ2hhaW5Bc3NldE1hcCB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdCc7XG5cbmltcG9ydCB7IEFzc2V0TG9nb01hcCB9IGZyb20gJy4vY3VzdG9tLXRva2Vucy9Bc3NldExvZ29NYXAnO1xuaW1wb3J0IHsgQXNzZXRSZWZNYXAgfSBmcm9tICcuL2N1c3RvbS10b2tlbnMvQXNzZXRSZWYnO1xuaW1wb3J0IHsgQ2hhaW5Bc3NldE1hcCB9IGZyb20gJy4vY3VzdG9tLXRva2Vucy9DaGFpbkFzc2V0JztcbmltcG9ydCB7IENoYWluSW5mb01hcCB9IGZyb20gJy4vY3VzdG9tLXRva2Vucy9DaGFpbkluZm8nO1xuaW1wb3J0IHsgQ2hhaW5Mb2dvTWFwIH0gZnJvbSAnLi9jdXN0b20tdG9rZW5zL0NoYWluTG9nb01hcCc7XG5pbXBvcnQgeyBNdWx0aUNoYWluQXNzZXRNYXAgfSBmcm9tICcuL2N1c3RvbS10b2tlbnMvTXVsdGlDaGFpbkFzc2V0JztcblxuaW1wb3J0IHsgX0Fzc2V0UmVmLCBfQXNzZXRSZWZQYXRoLCBfQXNzZXRUeXBlLCBfQ2hhaW5Bc3NldCwgX0NoYWluSW5mbywgX0NoYWluU3RhdHVzLCBfRXZtSW5mbywgX011bHRpQ2hhaW5Bc3NldCwgX1N1YnN0cmF0ZUNoYWluVHlwZSwgX1N1YnN0cmF0ZUluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgQXNzZXRTZXR0aW5nLCBWYWxpZGF0ZU5ldHdvcmtSZXNwb25zZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgX0FTU0VUX0xPR09fTUFQX1NSQywgX0FTU0VUX1JFRl9TUkMsIF9DSEFJTl9BU1NFVF9TUkMsIF9DSEFJTl9JTkZPX1NSQywgX0NIQUlOX0xPR09fTUFQX1NSQywgX0RFRkFVTFRfQUNUSVZFX0NIQUlOUywgX01BTlRBX1pLX0NIQUlOX0dST1VQLCBfTVVMVElfQ0hBSU5fQVNTRVRfU1JDLCBfWktfQVNTRVRfUFJFRklYIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBFdm1DaGFpbkhhbmRsZXIgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvaGFuZGxlci9Fdm1DaGFpbkhhbmRsZXInO1xuaW1wb3J0IHsgTWFudGFQcml2YXRlSGFuZGxlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oYW5kbGVyL21hbnRhL01hbnRhUHJpdmF0ZUhhbmRsZXInO1xuaW1wb3J0IHsgU3Vic3RyYXRlQ2hhaW5IYW5kbGVyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2hhbmRsZXIvU3Vic3RyYXRlQ2hhaW5IYW5kbGVyJztcbmltcG9ydCB7IF9DSEFJTl9WQUxJREFUSU9OX0VSUk9SIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL2hhbmRsZXIvdHlwZXMnO1xuaW1wb3J0IHsgX0NoYWluQ29ubmVjdGlvblN0YXR1cywgX0NoYWluU3RhdGUsIF9DVVNUT01fUFJFRklYLCBfRGF0YU1hcCwgX0V2bUFwaSwgX05ldHdvcmtVcHNlcnRQYXJhbXMsIF9ORlRfQ09OVFJBQ1RfU1RBTkRBUkRTLCBfU01BUlRfQ09OVFJBQ1RfU1RBTkRBUkRTLCBfU21hcnRDb250cmFjdFRva2VuSW5mbywgX1N1YnN0cmF0ZUFwaSwgX1ZhbGlkYXRlQ3VzdG9tQXNzZXRSZXF1ZXN0LCBfVmFsaWRhdGVDdXN0b21Bc3NldFJlc3BvbnNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IF9pc0Fzc2V0RnVuZ2libGVUb2tlbiwgX2lzQ2hhaW5FbmFibGVkLCBfaXNDdXN0b21Bc3NldCwgX2lzQ3VzdG9tQ2hhaW4sIF9pc0VxdWFsQ29udHJhY3RBZGRyZXNzLCBfaXNFcXVhbFNtYXJ0Q29udHJhY3RBc3NldCwgX2lzTWFudGFaa0Fzc2V0LCBfaXNQdXJlRXZtQ2hhaW4sIF9pc1B1cmVTdWJzdHJhdGVDaGFpbiwgX3BhcnNlQXNzZXRSZWZLZXkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9ldmVudC1zZXJ2aWNlJztcbmltcG9ydCB7IElDaGFpbiwgSU1ldGFkYXRhSXRlbSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RhdGFiYXNlcyc7XG5pbXBvcnQgRGF0YWJhc2VTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL0RhdGFiYXNlU2VydmljZSc7XG5pbXBvcnQgQXNzZXRTZXR0aW5nU3RvcmUgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zdG9yZXMvQXNzZXRTZXR0aW5nJztcbmltcG9ydCB7IE1PRFVMRV9TVVBQT1JUIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCBXZWIzIGZyb20gJ3dlYjMnO1xuXG5pbXBvcnQgeyBsb2dnZXIgYXMgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvbG9nZ2VyJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIENoYWluU2VydmljZSB7XG4gIHByaXZhdGUgZGF0YU1hcDogX0RhdGFNYXAgPSB7XG4gICAgY2hhaW5JbmZvTWFwOiB7fSxcbiAgICBjaGFpblN0YXRlTWFwOiB7fSxcbiAgICBhc3NldFJlZ2lzdHJ5OiB7fSxcbiAgICBhc3NldFJlZk1hcDoge31cbiAgfTtcblxuICBwcml2YXRlIGRiU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlOyAvLyB0byBzYXZlIGNoYWluLCB0b2tlbiBzZXR0aW5ncyBmcm9tIHVzZXJcbiAgcHJpdmF0ZSBldmVudFNlcnZpY2U6IEV2ZW50U2VydmljZTtcblxuICBwcml2YXRlIGxvY2tDaGFpbkluZm9NYXAgPSBmYWxzZTsgLy8gcHJldmVudCB1bndhbnRlZCBjaGFuZ2VzIChlZGl0LCBlbmFibGUsIGRpc2FibGUpIHRvIGNoYWluSW5mb01hcFxuXG4gIHByaXZhdGUgc3Vic3RyYXRlQ2hhaW5IYW5kbGVyOiBTdWJzdHJhdGVDaGFpbkhhbmRsZXI7XG4gIHByaXZhdGUgZXZtQ2hhaW5IYW5kbGVyOiBFdm1DaGFpbkhhbmRsZXI7XG4gIHByaXZhdGUgbWFudGFDaGFpbkhhbmRsZXI6IE1hbnRhUHJpdmF0ZUhhbmRsZXIgfCB1bmRlZmluZWQ7XG5cbiAgcHVibGljIGdldCBtYW50YVBheSAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFudGFDaGFpbkhhbmRsZXI7XG4gIH1cblxuICAvLyBUT0RPOiBjb25zaWRlciBCZWhhdmlvclN1YmplY3RcbiAgcHJpdmF0ZSBjaGFpbkluZm9NYXBTdWJqZWN0ID0gbmV3IFN1YmplY3Q8UmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4+KCk7XG4gIHByaXZhdGUgY2hhaW5TdGF0ZU1hcFN1YmplY3QgPSBuZXcgU3ViamVjdDxSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5TdGF0ZT4+KCk7XG4gIHByaXZhdGUgYXNzZXRSZWdpc3RyeVN1YmplY3QgPSBuZXcgU3ViamVjdDxSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5Bc3NldD4+KCk7XG4gIHByaXZhdGUgbXVsdGlDaGFpbkFzc2V0TWFwU3ViamVjdCA9IG5ldyBTdWJqZWN0PFJlY29yZDxzdHJpbmcsIF9NdWx0aUNoYWluQXNzZXQ+PigpO1xuICBwcml2YXRlIHhjbVJlZk1hcFN1YmplY3QgPSBuZXcgU3ViamVjdDxSZWNvcmQ8c3RyaW5nLCBfQXNzZXRSZWY+PigpO1xuXG4gIC8vIFRvZG86IFVwZGF0ZSB0byBuZXcgc3RvcmUgaW5kZXhlZCBEQlxuICBwcml2YXRlIHN0b3JlOiBBc3NldFNldHRpbmdTdG9yZSA9IG5ldyBBc3NldFNldHRpbmdTdG9yZSgpO1xuICBwcml2YXRlIGFzc2V0U2V0dGluZ1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHt9IGFzIFJlY29yZDxzdHJpbmcsIEFzc2V0U2V0dGluZz4pO1xuXG4gIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgY29uc3RydWN0b3IgKGRiU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlLCBldmVudFNlcnZpY2U6IEV2ZW50U2VydmljZSkge1xuICAgIHRoaXMuZGJTZXJ2aWNlID0gZGJTZXJ2aWNlO1xuICAgIHRoaXMuZXZlbnRTZXJ2aWNlID0gZXZlbnRTZXJ2aWNlO1xuXG4gICAgdGhpcy5jaGFpbkluZm9NYXBTdWJqZWN0Lm5leHQodGhpcy5kYXRhTWFwLmNoYWluSW5mb01hcCk7XG4gICAgdGhpcy5jaGFpblN0YXRlTWFwU3ViamVjdC5uZXh0KHRoaXMuZGF0YU1hcC5jaGFpblN0YXRlTWFwKTtcbiAgICB0aGlzLmFzc2V0UmVnaXN0cnlTdWJqZWN0Lm5leHQodGhpcy5kYXRhTWFwLmFzc2V0UmVnaXN0cnkpO1xuICAgIHRoaXMueGNtUmVmTWFwU3ViamVjdC5uZXh0KHRoaXMuZGF0YU1hcC5hc3NldFJlZk1hcCk7XG5cbiAgICBpZiAoTU9EVUxFX1NVUFBPUlQuTUFOVEFfWkspIHtcbiAgICAgIGNvbnNvbGUubG9nKCdJbml0IE1hbnRhIFpLJyk7XG4gICAgICB0aGlzLm1hbnRhQ2hhaW5IYW5kbGVyID0gbmV3IE1hbnRhUHJpdmF0ZUhhbmRsZXIoZGJTZXJ2aWNlKTtcbiAgICB9XG5cbiAgICB0aGlzLnN1YnN0cmF0ZUNoYWluSGFuZGxlciA9IG5ldyBTdWJzdHJhdGVDaGFpbkhhbmRsZXIodGhpcyk7XG4gICAgdGhpcy5ldm1DaGFpbkhhbmRsZXIgPSBuZXcgRXZtQ2hhaW5IYW5kbGVyKHRoaXMpO1xuXG4gICAgdGhpcy5sb2dnZXIgPSBjcmVhdGVMb2dnZXIoJ2NoYWluLXNlcnZpY2UnKTtcbiAgfVxuXG4gIC8vIEdldHRlclxuICBwdWJsaWMgZ2V0WGNtUmVmTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhTWFwLmFzc2V0UmVmTWFwO1xuICAgIC8vIGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgX0Fzc2V0UmVmPiA9IHt9O1xuICAgIC8vXG4gICAgLy8gT2JqZWN0LmVudHJpZXMoQXNzZXRSZWZNYXApLmZvckVhY2goKFtrZXksIGFzc2V0UmVmXSkgPT4ge1xuICAgIC8vICAgaWYgKGFzc2V0UmVmLnBhdGggPT09IF9Bc3NldFJlZlBhdGguWENNKSB7XG4gICAgLy8gICAgIHJlc3VsdFtrZXldID0gYXNzZXRSZWY7XG4gICAgLy8gICB9XG4gICAgLy8gfSk7XG4gICAgLy9cbiAgICAvLyByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIGdldEV2bUFwaSAoc2x1Zzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZtQ2hhaW5IYW5kbGVyLmdldEV2bUFwaUJ5Q2hhaW4oc2x1Zyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0RXZtQXBpTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5ldm1DaGFpbkhhbmRsZXIuZ2V0RXZtQXBpTWFwKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3Vic3RyYXRlQXBpTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzdHJhdGVDaGFpbkhhbmRsZXIuZ2V0U3Vic3RyYXRlQXBpTWFwKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3Vic3RyYXRlQXBpIChzbHVnOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzdHJhdGVDaGFpbkhhbmRsZXIuZ2V0U3Vic3RyYXRlQXBpQnlDaGFpbihzbHVnKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGFpbkN1cnJlbnRQcm92aWRlckJ5S2V5IChzbHVnOiBzdHJpbmcpIHtcbiAgICBjb25zdCBwcm92aWRlck5hbWUgPSB0aGlzLmdldENoYWluU3RhdGVCeUtleShzbHVnKS5jdXJyZW50UHJvdmlkZXI7XG4gICAgY29uc3QgcHJvdmlkZXJNYXAgPSB0aGlzLmdldENoYWluSW5mb0J5S2V5KHNsdWcpLnByb3ZpZGVycztcbiAgICBjb25zdCBlbmRwb2ludCA9IHByb3ZpZGVyTWFwW3Byb3ZpZGVyTmFtZV07XG5cbiAgICByZXR1cm4ge1xuICAgICAgZW5kcG9pbnQsXG4gICAgICBwcm92aWRlck5hbWVcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZUNoYWluSW5mb01hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5JbmZvTWFwU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVBc3NldFJlZ2lzdHJ5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5hc3NldFJlZ2lzdHJ5U3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVNdWx0aUNoYWluQXNzZXRNYXAgKCkge1xuICAgIHJldHVybiB0aGlzLm11bHRpQ2hhaW5Bc3NldE1hcFN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlWGNtUmVmTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy54Y21SZWZNYXBTdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZUNoYWluU3RhdGVNYXAgKCkge1xuICAgIHJldHVybiB0aGlzLmNoYWluU3RhdGVNYXBTdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIGdldEFzc2V0UmVnaXN0cnkgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGFNYXAuYXNzZXRSZWdpc3RyeTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNdWx0aUNoYWluQXNzZXRNYXAgKCkge1xuICAgIHJldHVybiBNdWx0aUNoYWluQXNzZXRNYXA7XG4gIH1cblxuICBwdWJsaWMgZ2V0U21hcnRDb250cmFjdFRva2VucyAoKSB7XG4gICAgY29uc3QgZmlsdGVyZWRBc3NldFJlZ2lzdHJ5OiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5Bc3NldD4gPSB7fTtcblxuICAgIE9iamVjdC52YWx1ZXModGhpcy5nZXRBc3NldFJlZ2lzdHJ5KCkpLmZvckVhY2goKGFzc2V0KSA9PiB7XG4gICAgICBpZiAoX1NNQVJUX0NPTlRSQUNUX1NUQU5EQVJEUy5pbmNsdWRlcyhhc3NldC5hc3NldFR5cGUpKSB7XG4gICAgICAgIGZpbHRlcmVkQXNzZXRSZWdpc3RyeVthc3NldC5zbHVnXSA9IGFzc2V0O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZpbHRlcmVkQXNzZXRSZWdpc3RyeTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGFpbkluZm9NYXAgKCk6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+IHtcbiAgICByZXR1cm4gdGhpcy5kYXRhTWFwLmNoYWluSW5mb01hcDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFdm1DaGFpbkluZm9NYXAgKCk6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+IHtcbiAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+ID0ge307XG5cbiAgICBPYmplY3QudmFsdWVzKHRoaXMuZ2V0Q2hhaW5JbmZvTWFwKCkpLmZvckVhY2goKGNoYWluSW5mbykgPT4ge1xuICAgICAgaWYgKF9pc1B1cmVFdm1DaGFpbihjaGFpbkluZm8pKSB7XG4gICAgICAgIHJlc3VsdFtjaGFpbkluZm8uc2x1Z10gPSBjaGFpbkluZm87XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIGdldFN1YnN0cmF0ZUNoYWluSW5mb01hcCAoKTogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4ge1xuICAgIGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4gPSB7fTtcblxuICAgIE9iamVjdC52YWx1ZXModGhpcy5nZXRDaGFpbkluZm9NYXAoKSkuZm9yRWFjaCgoY2hhaW5JbmZvKSA9PiB7XG4gICAgICBpZiAoX2lzUHVyZVN1YnN0cmF0ZUNoYWluKGNoYWluSW5mbykpIHtcbiAgICAgICAgcmVzdWx0W2NoYWluSW5mby5zbHVnXSA9IGNoYWluSW5mbztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0QWxsUHJpY2VJZHMgKCkge1xuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcblxuICAgIE9iamVjdC52YWx1ZXModGhpcy5nZXRBc3NldFJlZ2lzdHJ5KCkpLmZvckVhY2goKGFzc2V0SW5mbykgPT4ge1xuICAgICAgaWYgKGFzc2V0SW5mby5wcmljZUlkICE9PSBudWxsKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGFzc2V0SW5mby5wcmljZUlkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0TmF0aXZlVG9rZW5JbmZvIChjaGFpblNsdWc6IHN0cmluZykge1xuICAgIGxldCBuYXRpdmVUb2tlbkluZm86IF9DaGFpbkFzc2V0ID0ge1xuICAgICAgYXNzZXRUeXBlOiBfQXNzZXRUeXBlLk5BVElWRSxcbiAgICAgIGRlY2ltYWxzOiAwLFxuICAgICAgbWV0YWRhdGE6IG51bGwsXG4gICAgICBtaW5BbW91bnQ6ICcnLFxuICAgICAgbXVsdGlDaGFpbkFzc2V0OiAnJyxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgb3JpZ2luQ2hhaW46ICcnLFxuICAgICAgcHJpY2VJZDogJycsXG4gICAgICBzbHVnOiAnJyxcbiAgICAgIHN5bWJvbDogJycsXG4gICAgICBoYXNWYWx1ZTogdHJ1ZSxcbiAgICAgIGljb246ICcnXG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgYXNzZXRJbmZvIG9mIE9iamVjdC52YWx1ZXModGhpcy5nZXRBc3NldFJlZ2lzdHJ5KCkpKSB7XG4gICAgICBpZiAoYXNzZXRJbmZvLmFzc2V0VHlwZSA9PT0gX0Fzc2V0VHlwZS5OQVRJVkUgJiYgYXNzZXRJbmZvLm9yaWdpbkNoYWluID09PSBjaGFpblNsdWcpIHtcbiAgICAgICAgbmF0aXZlVG9rZW5JbmZvID0gYXNzZXRJbmZvO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmF0aXZlVG9rZW5JbmZvO1xuICB9XG5cbiAgcHVibGljIGdldEFzc2V0UmVmTWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhTWFwLmFzc2V0UmVmTWFwO1xuICB9XG5cbiAgcHVibGljIGdldENoYWluU3RhdGVNYXAgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGFNYXAuY2hhaW5TdGF0ZU1hcDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGFpblN0YXRlQnlLZXkgKGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YU1hcC5jaGFpblN0YXRlTWFwW2tleV07XG4gIH1cblxuICBwdWJsaWMgZ2V0QWN0aXZlQ2hhaW5zICgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5kYXRhTWFwLmNoYWluU3RhdGVNYXApXG4gICAgICAuZmlsdGVyKChbLCBjaGFpblN0YXRlXSkgPT4gX2lzQ2hhaW5FbmFibGVkKGNoYWluU3RhdGUpKVxuICAgICAgLm1hcCgoW2tleV0pID0+IGtleSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3VwcG9ydGVkU21hcnRDb250cmFjdFR5cGVzICgpIHtcbiAgICByZXR1cm4gW19Bc3NldFR5cGUuRVJDMjAsIF9Bc3NldFR5cGUuRVJDNzIxLCBfQXNzZXRUeXBlLlBTUDIyLCBfQXNzZXRUeXBlLlBTUDM0XTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBY3RpdmVDaGFpbkluZm9NYXAgKCkge1xuICAgIGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4gPSB7fTtcblxuICAgIE9iamVjdC52YWx1ZXModGhpcy5nZXRDaGFpbkluZm9NYXAoKSkuZm9yRWFjaCgoY2hhaW5JbmZvKSA9PiB7XG4gICAgICBjb25zdCBjaGFpblN0YXRlID0gdGhpcy5nZXRDaGFpblN0YXRlQnlLZXkoY2hhaW5JbmZvLnNsdWcpO1xuXG4gICAgICBpZiAoX2lzQ2hhaW5FbmFibGVkKGNoYWluU3RhdGUpKSB7XG4gICAgICAgIHJlc3VsdFtjaGFpbkluZm8uc2x1Z10gPSBjaGFpbkluZm87XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIGdldEFjdGl2ZUNoYWluU2x1Z3MgKCkge1xuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcblxuICAgIE9iamVjdC52YWx1ZXModGhpcy5nZXRDaGFpbkluZm9NYXAoKSkuZm9yRWFjaCgoY2hhaW5JbmZvKSA9PiB7XG4gICAgICBjb25zdCBjaGFpblN0YXRlID0gdGhpcy5nZXRDaGFpblN0YXRlQnlLZXkoY2hhaW5JbmZvLnNsdWcpO1xuXG4gICAgICBpZiAoX2lzQ2hhaW5FbmFibGVkKGNoYWluU3RhdGUpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGNoYWluSW5mby5zbHVnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2hhaW5JbmZvQnlLZXkgKGtleTogc3RyaW5nKTogX0NoYWluSW5mbyB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YU1hcC5jaGFpbkluZm9NYXBba2V5XTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBY3RpdmVDaGFpbkluZm9zICgpIHtcbiAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+ID0ge307XG5cbiAgICBPYmplY3QudmFsdWVzKHRoaXMuZ2V0Q2hhaW5TdGF0ZU1hcCgpKS5mb3JFYWNoKChjaGFpblN0YXRlKSA9PiB7XG4gICAgICBpZiAoY2hhaW5TdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgcmVzdWx0W2NoYWluU3RhdGUuc2x1Z10gPSB0aGlzLmdldENoYWluSW5mb0J5S2V5KGNoYWluU3RhdGUuc2x1Zyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIGdldEFzc2V0QnlTbHVnIChzbHVnOiBzdHJpbmcpOiBfQ2hhaW5Bc3NldCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXNzZXRSZWdpc3RyeSgpW3NsdWddO1xuICB9XG5cbiAgcHVibGljIGdldE1hbnRhWmtBc3NldHMgKGNoYWluOiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5Bc3NldD4ge1xuICAgIGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgX0NoYWluQXNzZXQ+ID0ge307XG5cbiAgICBPYmplY3QudmFsdWVzKHRoaXMuZ2V0QXNzZXRSZWdpc3RyeSgpKS5mb3JFYWNoKChjaGFpbkFzc2V0KSA9PiB7XG4gICAgICBpZiAoY2hhaW5Bc3NldC5vcmlnaW5DaGFpbiA9PT0gY2hhaW4gJiYgX2lzQXNzZXRGdW5naWJsZVRva2VuKGNoYWluQXNzZXQpICYmIGNoYWluQXNzZXQuc3ltYm9sLnN0YXJ0c1dpdGgoX1pLX0FTU0VUX1BSRUZJWCkpIHtcbiAgICAgICAgcmVzdWx0W2NoYWluQXNzZXQuc2x1Z10gPSBjaGFpbkFzc2V0O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRGdW5naWJsZVRva2Vuc0J5Q2hhaW4gKGNoYWluU2x1Zzogc3RyaW5nLCBjaGVja0FjdGl2ZSA9IGZhbHNlKTogUmVjb3JkPHN0cmluZywgX0NoYWluQXNzZXQ+IHtcbiAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkFzc2V0PiA9IHt9O1xuICAgIGNvbnN0IGFzc2V0U2V0dGluZ3MgPSB0aGlzLmFzc2V0U2V0dGluZ1N1YmplY3QudmFsdWU7XG5cbiAgICBPYmplY3QudmFsdWVzKHRoaXMuZ2V0QXNzZXRSZWdpc3RyeSgpKS5mb3JFYWNoKChjaGFpbkFzc2V0KSA9PiB7XG4gICAgICBjb25zdCBfZmlsdGVyQWN0aXZlID0gIWNoZWNrQWN0aXZlIHx8IGFzc2V0U2V0dGluZ3NbY2hhaW5Bc3NldC5zbHVnXT8udmlzaWJsZTtcblxuICAgICAgaWYgKGNoYWluQXNzZXQub3JpZ2luQ2hhaW4gPT09IGNoYWluU2x1ZyAmJiBfaXNBc3NldEZ1bmdpYmxlVG9rZW4oY2hhaW5Bc3NldCkgJiYgX2ZpbHRlckFjdGl2ZSkge1xuICAgICAgICByZXN1bHRbY2hhaW5Bc3NldC5zbHVnXSA9IGNoYWluQXNzZXQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIGdldFhjbUVxdWFsQXNzZXRCeUNoYWluIChkZXN0aW5hdGlvbkNoYWluU2x1Zzogc3RyaW5nLCBvcmlnaW5Ub2tlblNsdWc6IHN0cmluZykge1xuICAgIGxldCBkZXN0aW5hdGlvblRva2VuSW5mbzogX0NoYWluQXNzZXQgfCB1bmRlZmluZWQ7XG5cbiAgICBmb3IgKGNvbnN0IGFzc2V0IG9mIE9iamVjdC52YWx1ZXModGhpcy5nZXRBc3NldFJlZ2lzdHJ5KCkpKSB7XG4gICAgICBpZiAoYXNzZXQub3JpZ2luQ2hhaW4gPT09IGRlc3RpbmF0aW9uQ2hhaW5TbHVnKSB7IC8vIGNoZWNrXG4gICAgICAgIGNvbnN0IGFzc2V0UmVmS2V5ID0gX3BhcnNlQXNzZXRSZWZLZXkob3JpZ2luVG9rZW5TbHVnLCBhc3NldC5zbHVnKTtcbiAgICAgICAgY29uc3QgYXNzZXRSZWYgPSB0aGlzLmdldEFzc2V0UmVmTWFwKClbYXNzZXRSZWZLZXldO1xuXG4gICAgICAgIGlmIChhc3NldFJlZiAmJiBhc3NldFJlZi5wYXRoID09PSBfQXNzZXRSZWZQYXRoLlhDTSkgeyAvLyB0aGVyZSdzIG9ubHkgMSBjb3JyZXNwb25kaW5nIHRva2VuIG9uIDEgY2hhaW5cbiAgICAgICAgICBkZXN0aW5hdGlvblRva2VuSW5mbyA9IGFzc2V0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3RpbmF0aW9uVG9rZW5JbmZvO1xuICB9XG5cbiAgcHVibGljIGdldEFzc2V0QnlDaGFpbkFuZFR5cGUgKGNoYWluU2x1Zzogc3RyaW5nLCBhc3NldFR5cGVzOiBfQXNzZXRUeXBlW10pIHtcbiAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkFzc2V0PiA9IHt9O1xuXG4gICAgT2JqZWN0LnZhbHVlcyh0aGlzLmdldEFzc2V0UmVnaXN0cnkoKSkuZm9yRWFjaCgoYXNzZXRJbmZvKSA9PiB7XG4gICAgICBpZiAoYXNzZXRUeXBlcy5pbmNsdWRlcyhhc3NldEluZm8uYXNzZXRUeXBlKSAmJiBhc3NldEluZm8ub3JpZ2luQ2hhaW4gPT09IGNoYWluU2x1Zykge1xuICAgICAgICByZXN1bHRbYXNzZXRJbmZvLnNsdWddID0gYXNzZXRJbmZvO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTbWFydENvbnRyYWN0TmZ0cyAoKSB7XG4gICAgY29uc3QgcmVzdWx0OiBfQ2hhaW5Bc3NldFtdID0gW107XG5cbiAgICBPYmplY3QudmFsdWVzKHRoaXMuZ2V0QXNzZXRSZWdpc3RyeSgpKS5mb3JFYWNoKChhc3NldEluZm8pID0+IHtcbiAgICAgIGlmIChfTkZUX0NPTlRSQUNUX1NUQU5EQVJEUy5pbmNsdWRlcyhhc3NldEluZm8uYXNzZXRUeXBlKSkge1xuICAgICAgICByZXN1bHQucHVzaChhc3NldEluZm8pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFNldHRlclxuICBwdWJsaWMgZm9yY2VSZW1vdmVDaGFpbiAoc2x1Zzogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMubG9ja0NoYWluSW5mb01hcCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYWluSW5mb01hcCA9IHRoaXMuZ2V0Q2hhaW5JbmZvTWFwKCk7XG4gICAgY29uc3QgY2hhaW5TdGF0ZU1hcCA9IHRoaXMuZ2V0Q2hhaW5TdGF0ZU1hcCgpO1xuXG4gICAgaWYgKCEoc2x1ZyBpbiBjaGFpbkluZm9NYXApKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5sb2NrQ2hhaW5JbmZvTWFwID0gdHJ1ZTtcblxuICAgIGRlbGV0ZSBjaGFpblN0YXRlTWFwW3NsdWddO1xuICAgIGRlbGV0ZSBjaGFpbkluZm9NYXBbc2x1Z107XG4gICAgdGhpcy5kZWxldGVBc3NldHNCeUNoYWluKHNsdWcpO1xuICAgIHRoaXMuZGJTZXJ2aWNlLnJlbW92ZUZyb21DaGFpblN0b3JlKFtzbHVnXSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbiAgICB0aGlzLnVwZGF0ZUNoYWluU3Vic2NyaXB0aW9uKCk7XG5cbiAgICB0aGlzLmxvY2tDaGFpbkluZm9NYXAgPSBmYWxzZTtcblxuICAgIHRoaXMuZXZlbnRTZXJ2aWNlLmVtaXQoJ2NoYWluLnVwZGF0ZVN0YXRlJywgc2x1Zyk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVDdXN0b21DaGFpbiAoc2x1Zzogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMubG9ja0NoYWluSW5mb01hcCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYWluSW5mb01hcCA9IHRoaXMuZ2V0Q2hhaW5JbmZvTWFwKCk7XG4gICAgY29uc3QgY2hhaW5TdGF0ZU1hcCA9IHRoaXMuZ2V0Q2hhaW5TdGF0ZU1hcCgpO1xuXG4gICAgaWYgKCEoc2x1ZyBpbiBjaGFpbkluZm9NYXApKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFfaXNDdXN0b21DaGFpbihzbHVnKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChjaGFpblN0YXRlTWFwW3NsdWddLmFjdGl2ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMubG9ja0NoYWluSW5mb01hcCA9IHRydWU7XG5cbiAgICBkZWxldGUgY2hhaW5TdGF0ZU1hcFtzbHVnXTtcbiAgICBkZWxldGUgY2hhaW5JbmZvTWFwW3NsdWddO1xuICAgIHRoaXMuZGVsZXRlQXNzZXRzQnlDaGFpbihzbHVnKTtcbiAgICB0aGlzLmRiU2VydmljZS5yZW1vdmVGcm9tQ2hhaW5TdG9yZShbc2x1Z10pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG4gICAgdGhpcy51cGRhdGVDaGFpblN1YnNjcmlwdGlvbigpO1xuXG4gICAgdGhpcy5sb2NrQ2hhaW5JbmZvTWFwID0gZmFsc2U7XG5cbiAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdjaGFpbi51cGRhdGVTdGF0ZScsIHNsdWcpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgcmVzZXRDaGFpbkluZm9NYXAgKGV4Y2x1ZGVkQ2hhaW5zPzogc3RyaW5nW10pIHtcbiAgICBpZiAodGhpcy5sb2NrQ2hhaW5JbmZvTWFwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5sb2NrQ2hhaW5JbmZvTWFwID0gdHJ1ZTtcblxuICAgIGNvbnN0IGNoYWluU3RhdGVNYXAgPSB0aGlzLmdldENoYWluU3RhdGVNYXAoKTtcblxuICAgIGZvciAoY29uc3QgW3NsdWcsIGNoYWluU3RhdGVdIG9mIE9iamVjdC5lbnRyaWVzKGNoYWluU3RhdGVNYXApKSB7XG4gICAgICBpZiAoIV9ERUZBVUxUX0FDVElWRV9DSEFJTlMuaW5jbHVkZXMoc2x1ZykgJiYgIWV4Y2x1ZGVkQ2hhaW5zPy5pbmNsdWRlcyhzbHVnKSkge1xuICAgICAgICBjaGFpblN0YXRlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlQ2hhaW5TdGF0ZU1hcFN1YnNjcmlwdGlvbigpO1xuXG4gICAgdGhpcy5sb2NrQ2hhaW5JbmZvTWFwID0gZmFsc2U7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDaGFpbkNvbm5lY3Rpb25TdGF0dXMgKHNsdWc6IHN0cmluZywgY29ubmVjdGlvblN0YXR1czogX0NoYWluQ29ubmVjdGlvblN0YXR1cykge1xuICAgIGNvbnN0IGNoYWluU3RhdGVNYXAgPSB0aGlzLmdldENoYWluU3RhdGVNYXAoKTtcblxuICAgIGNoYWluU3RhdGVNYXBbc2x1Z10uY29ubmVjdGlvblN0YXR1cyA9IGNvbm5lY3Rpb25TdGF0dXM7XG4gIH1cblxuICBwdWJsaWMgdXBzZXJ0Q3VzdG9tVG9rZW4gKHRva2VuOiBfQ2hhaW5Bc3NldCkge1xuICAgIGlmICh0b2tlbi5zbHVnLmxlbmd0aCA9PT0gMCkgeyAvLyBuZXcgdG9rZW5cbiAgICAgIGlmICh0b2tlbi5hc3NldFR5cGUgPT09IF9Bc3NldFR5cGUuTkFUSVZFKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRTbHVnID0gdGhpcy5nZW5lcmF0ZVNsdWdGb3JOYXRpdmVUb2tlbih0b2tlbi5vcmlnaW5DaGFpbiwgdG9rZW4uYXNzZXRUeXBlLCB0b2tlbi5zeW1ib2wpO1xuXG4gICAgICAgIHRva2VuLnNsdWcgPSBgJHtfQ1VTVE9NX1BSRUZJWH0ke2RlZmF1bHRTbHVnfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBkZWZhdWx0U2x1ZyA9IHRoaXMuZ2VuZXJhdGVTbHVnRm9yU21hcnRDb250cmFjdEFzc2V0KHRva2VuLm9yaWdpbkNoYWluLCB0b2tlbi5hc3NldFR5cGUsIHRva2VuLnN5bWJvbCwgdG9rZW4ubWV0YWRhdGE/LmNvbnRyYWN0QWRkcmVzcyBhcyBzdHJpbmcpO1xuXG4gICAgICAgIHRva2VuLnNsdWcgPSBgJHtfQ1VTVE9NX1BSRUZJWH0ke2RlZmF1bHRTbHVnfWA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRva2VuLm9yaWdpbkNoYWluICYmIF9pc0Fzc2V0RnVuZ2libGVUb2tlbih0b2tlbikpIHtcbiAgICAgIHRva2VuLmhhc1ZhbHVlID0gISh0aGlzLmdldENoYWluSW5mb0J5S2V5KHRva2VuLm9yaWdpbkNoYWluKT8uaXNUZXN0bmV0KTtcbiAgICB9XG5cbiAgICBjb25zdCBhc3NldFJlZ2lzdHJ5ID0gdGhpcy5nZXRBc3NldFJlZ2lzdHJ5KCk7XG5cbiAgICBhc3NldFJlZ2lzdHJ5W3Rva2VuLnNsdWddID0gdG9rZW47XG5cbiAgICB0aGlzLmRiU2VydmljZS51cGRhdGVBc3NldFN0b3JlKHRva2VuKS5jYXRjaCgoZSkgPT4gdGhpcy5sb2dnZXIuZXJyb3IoZSkpO1xuXG4gICAgdGhpcy5hc3NldFJlZ2lzdHJ5U3ViamVjdC5uZXh0KGFzc2V0UmVnaXN0cnkpO1xuXG4gICAgcmV0dXJuIHRva2VuLnNsdWc7XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlQXNzZXRzQnlDaGFpbiAoY2hhaW5TbHVnOiBzdHJpbmcpIHtcbiAgICBpZiAoIV9pc0N1c3RvbUNoYWluKGNoYWluU2x1ZykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRBc3NldHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgYXNzZXRSZWdpc3RyeSA9IHRoaXMuZ2V0QXNzZXRSZWdpc3RyeSgpO1xuXG4gICAgT2JqZWN0LnZhbHVlcyhhc3NldFJlZ2lzdHJ5KS5mb3JFYWNoKCh0YXJnZXRUb2tlbikgPT4ge1xuICAgICAgaWYgKHRhcmdldFRva2VuLm9yaWdpbkNoYWluID09PSBjaGFpblNsdWcpIHtcbiAgICAgICAgdGFyZ2V0QXNzZXRzLnB1c2godGFyZ2V0VG9rZW4uc2x1Zyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmRlbGV0ZUN1c3RvbUFzc2V0cyh0YXJnZXRBc3NldHMpO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZUN1c3RvbUFzc2V0cyAodGFyZ2V0QXNzZXRzOiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGFzc2V0UmVnaXN0cnkgPSB0aGlzLmdldEFzc2V0UmVnaXN0cnkoKTtcblxuICAgIHRhcmdldEFzc2V0cy5mb3JFYWNoKCh0YXJnZXRUb2tlbikgPT4ge1xuICAgICAgZGVsZXRlIGFzc2V0UmVnaXN0cnlbdGFyZ2V0VG9rZW5dO1xuICAgIH0pO1xuXG4gICAgdGhpcy5kYlNlcnZpY2UucmVtb3ZlRnJvbUJhbGFuY2VTdG9yZSh0YXJnZXRBc3NldHMpLmNhdGNoKChlKSA9PiB0aGlzLmxvZ2dlci5lcnJvcihlKSk7XG4gICAgdGhpcy5kYlNlcnZpY2UucmVtb3ZlRnJvbUFzc2V0U3RvcmUodGFyZ2V0QXNzZXRzKS5jYXRjaCgoZSkgPT4gdGhpcy5sb2dnZXIuZXJyb3IoZSkpO1xuXG4gICAgdGhpcy5hc3NldFJlZ2lzdHJ5U3ViamVjdC5uZXh0KGFzc2V0UmVnaXN0cnkpO1xuICAgIHRhcmdldEFzc2V0cy5mb3JFYWNoKChhc3NldFNsdWcpID0+IHtcbiAgICAgIHRoaXMuZXZlbnRTZXJ2aWNlLmVtaXQoJ2Fzc2V0LnVwZGF0ZVN0YXRlJywgYXNzZXRTbHVnKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEJ1c2luZXNzIGxvZ2ljXG4gIHB1YmxpYyBhc3luYyBpbml0ICgpIHtcbiAgICBhd2FpdCB0aGlzLmV2ZW50U2VydmljZS53YWl0RGF0YWJhc2VSZWFkeTtcblxuICAgIC8vIFRPRE86IHJlY29uc2lkZXIgdGhlIGZsb3cgb2YgaW5pdGlhdGlvblxuICAgIGNvbnN0IFtsYXRlc3RBc3NldFJlZk1hcCwgbGF0ZXN0TXVsdGlDaGFpbkFzc2V0TWFwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMuZmV0Y2hMYXRlc3REYXRhKF9BU1NFVF9SRUZfU1JDLCBBc3NldFJlZk1hcCksXG4gICAgICB0aGlzLmZldGNoTGF0ZXN0RGF0YShfTVVMVElfQ0hBSU5fQVNTRVRfU1JDLCBNdWx0aUNoYWluQXNzZXRNYXApXG4gICAgXSk7XG5cbiAgICB0aGlzLm11bHRpQ2hhaW5Bc3NldE1hcFN1YmplY3QubmV4dChsYXRlc3RNdWx0aUNoYWluQXNzZXRNYXAgYXMgUmVjb3JkPHN0cmluZywgX011bHRpQ2hhaW5Bc3NldD4pO1xuICAgIHRoaXMuZGF0YU1hcC5hc3NldFJlZk1hcCA9IGxhdGVzdEFzc2V0UmVmTWFwIGFzIFJlY29yZDxzdHJpbmcsIF9Bc3NldFJlZj47XG5cbiAgICBhd2FpdCB0aGlzLmluaXRDaGFpbnMoKTtcbiAgICB0aGlzLmNoYWluSW5mb01hcFN1YmplY3QubmV4dCh0aGlzLmdldENoYWluSW5mb01hcCgpKTtcbiAgICB0aGlzLnVwZGF0ZUNoYWluU3RhdGVNYXBTdWJzY3JpcHRpb24oKTtcbiAgICB0aGlzLmFzc2V0UmVnaXN0cnlTdWJqZWN0Lm5leHQodGhpcy5nZXRBc3NldFJlZ2lzdHJ5KCkpO1xuICAgIHRoaXMueGNtUmVmTWFwU3ViamVjdC5uZXh0KHRoaXMuZGF0YU1hcC5hc3NldFJlZk1hcCk7XG5cbiAgICBhd2FpdCB0aGlzLmluaXRBcGlzKCk7XG4gICAgYXdhaXQgdGhpcy5pbml0QXNzZXRTZXR0aW5ncygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0QXBpcyAoKSB7XG4gICAgY29uc3QgY2hhaW5JbmZvTWFwID0gdGhpcy5nZXRDaGFpbkluZm9NYXAoKTtcbiAgICBjb25zdCBjaGFpblN0YXRlTWFwID0gdGhpcy5nZXRDaGFpblN0YXRlTWFwKCk7XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhjaGFpbkluZm9NYXApXG4gICAgICAuZmlsdGVyKChbc2x1Z10pID0+IGNoYWluU3RhdGVNYXBbc2x1Z10/LmFjdGl2ZSlcbiAgICAgIC5tYXAoKFssIGNoYWluSW5mb10pID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5pbml0QXBpRm9yQ2hhaW4oY2hhaW5JbmZvKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG5cbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaW5pdEFwaUZvckNoYWluIChjaGFpbkluZm86IF9DaGFpbkluZm8pIHtcbiAgICBjb25zdCB7IGVuZHBvaW50LCBwcm92aWRlck5hbWUgfSA9IHRoaXMuZ2V0Q2hhaW5DdXJyZW50UHJvdmlkZXJCeUtleShjaGFpbkluZm8uc2x1Zyk7XG5cbiAgICBjb25zdCBvblVwZGF0ZVN0YXR1cyA9IChzdGF0dXM6IF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTdGF0dXMgPSB0aGlzLmdldENoYWluU3RhdGVCeUtleShjaGFpbkluZm8uc2x1ZykuY29ubmVjdGlvblN0YXR1cztcblxuICAgICAgLy8gQXZvaWQgdW5uZWNlc3NhcnkgdXBkYXRlIGluIGNhc2UgZGlzYWJsZSBjaGFpblxuICAgICAgaWYgKGN1cnJlbnRTdGF0dXMgIT09IHN0YXR1cykge1xuICAgICAgICB0aGlzLnNldENoYWluQ29ubmVjdGlvblN0YXR1cyhjaGFpbkluZm8uc2x1Zywgc3RhdHVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVDaGFpblN0YXRlTWFwU3Vic2NyaXB0aW9uKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChjaGFpbkluZm8uc3Vic3RyYXRlSW5mbyAhPT0gbnVsbCAmJiBjaGFpbkluZm8uc3Vic3RyYXRlSW5mbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoX01BTlRBX1pLX0NIQUlOX0dST1VQLmluY2x1ZGVzKGNoYWluSW5mby5zbHVnKSAmJiBNT0RVTEVfU1VQUE9SVC5NQU5UQV9aSyAmJiB0aGlzLm1hbnRhQ2hhaW5IYW5kbGVyKSB7XG4gICAgICAgIGNvbnN0IGFwaVByb21pc2UgPSBhd2FpdCB0aGlzLm1hbnRhQ2hhaW5IYW5kbGVyPy5pbml0TWFudGFQYXkoZW5kcG9pbnQsIGNoYWluSW5mby5zbHVnKTtcbiAgICAgICAgY29uc3QgY2hhaW5BcGkgPSBhd2FpdCB0aGlzLnN1YnN0cmF0ZUNoYWluSGFuZGxlci5pbml0QXBpKGNoYWluSW5mby5zbHVnLCBlbmRwb2ludCwgeyBwcm92aWRlck5hbWUsIGV4dGVybmFsQXBpUHJvbWlzZTogYXBpUHJvbWlzZSwgb25VcGRhdGVTdGF0dXMgfSk7XG5cbiAgICAgICAgdGhpcy5zdWJzdHJhdGVDaGFpbkhhbmRsZXIuc2V0U3Vic3RyYXRlQXBpKGNoYWluSW5mby5zbHVnLCBjaGFpbkFwaSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjaGFpbkFwaSA9IGF3YWl0IHRoaXMuc3Vic3RyYXRlQ2hhaW5IYW5kbGVyLmluaXRBcGkoY2hhaW5JbmZvLnNsdWcsIGVuZHBvaW50LCB7IHByb3ZpZGVyTmFtZSwgb25VcGRhdGVTdGF0dXMgfSk7XG5cbiAgICAgICAgdGhpcy5zdWJzdHJhdGVDaGFpbkhhbmRsZXIuc2V0U3Vic3RyYXRlQXBpKGNoYWluSW5mby5zbHVnLCBjaGFpbkFwaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNoYWluSW5mby5ldm1JbmZvICE9PSBudWxsICYmIGNoYWluSW5mby5ldm1JbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGNoYWluQXBpID0gYXdhaXQgdGhpcy5ldm1DaGFpbkhhbmRsZXIuaW5pdEFwaShjaGFpbkluZm8uc2x1ZywgZW5kcG9pbnQsIHsgcHJvdmlkZXJOYW1lLCBvblVwZGF0ZVN0YXR1cyB9KTtcblxuICAgICAgdGhpcy5ldm1DaGFpbkhhbmRsZXIuc2V0RXZtQXBpKGNoYWluSW5mby5zbHVnLCBjaGFpbkFwaSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkZXN0cm95QXBpRm9yQ2hhaW4gKGNoYWluSW5mbzogX0NoYWluSW5mbykge1xuICAgIGlmIChjaGFpbkluZm8uc3Vic3RyYXRlSW5mbyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5zdWJzdHJhdGVDaGFpbkhhbmRsZXIuZGVzdHJveVN1YnN0cmF0ZUFwaShjaGFpbkluZm8uc2x1Zyk7XG4gICAgfVxuXG4gICAgaWYgKGNoYWluSW5mby5ldm1JbmZvICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmV2bUNoYWluSGFuZGxlci5kZXN0cm95RXZtQXBpKGNoYWluSW5mby5zbHVnKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZW5hYmxlQ2hhaW4gKGNoYWluU2x1Zzogc3RyaW5nKSB7XG4gICAgY29uc3QgY2hhaW5JbmZvID0gdGhpcy5nZXRDaGFpbkluZm9CeUtleShjaGFpblNsdWcpO1xuICAgIGNvbnN0IGNoYWluU3RhdGVNYXAgPSB0aGlzLmdldENoYWluU3RhdGVNYXAoKTtcblxuICAgIGlmIChjaGFpblN0YXRlTWFwW2NoYWluU2x1Z10uYWN0aXZlIHx8IHRoaXMubG9ja0NoYWluSW5mb01hcCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMubG9ja0NoYWluSW5mb01hcCA9IHRydWU7XG5cbiAgICB0aGlzLmRiU2VydmljZS51cGRhdGVDaGFpblN0b3JlKHtcbiAgICAgIC4uLmNoYWluSW5mbyxcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIGN1cnJlbnRQcm92aWRlcjogY2hhaW5TdGF0ZU1hcFtjaGFpblNsdWddLmN1cnJlbnRQcm92aWRlclxuICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIGNoYWluU3RhdGVNYXBbY2hhaW5TbHVnXS5hY3RpdmUgPSB0cnVlO1xuXG4gICAgYXdhaXQgdGhpcy5pbml0QXBpRm9yQ2hhaW4oY2hhaW5JbmZvKTtcblxuICAgIHRoaXMubG9ja0NoYWluSW5mb01hcCA9IGZhbHNlO1xuXG4gICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgnY2hhaW4udXBkYXRlU3RhdGUnLCBjaGFpblNsdWcpO1xuXG4gICAgdGhpcy51cGRhdGVDaGFpblN0YXRlTWFwU3Vic2NyaXB0aW9uKCk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBlbmFibGVDaGFpbnMgKGNoYWluU2x1Z3M6IHN0cmluZ1tdKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgY2hhaW5JbmZvTWFwID0gdGhpcy5nZXRDaGFpbkluZm9NYXAoKTtcbiAgICBjb25zdCBjaGFpblN0YXRlTWFwID0gdGhpcy5nZXRDaGFpblN0YXRlTWFwKCk7XG4gICAgbGV0IG5lZWRVcGRhdGUgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLmxvY2tDaGFpbkluZm9NYXApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLmxvY2tDaGFpbkluZm9NYXAgPSB0cnVlO1xuXG4gICAgY29uc3QgaW5pdFByb21pc2VzID0gY2hhaW5TbHVncy5tYXAoYXN5bmMgKGNoYWluU2x1ZykgPT4ge1xuICAgICAgY29uc3QgY2hhaW5JbmZvID0gY2hhaW5JbmZvTWFwW2NoYWluU2x1Z107XG4gICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBjaGFpblN0YXRlTWFwW2NoYWluU2x1Z10/LmFjdGl2ZTtcblxuICAgICAgaWYgKCFjdXJyZW50U3RhdGUpIHtcbiAgICAgICAgdGhpcy5kYlNlcnZpY2UudXBkYXRlQ2hhaW5TdG9yZSh7XG4gICAgICAgICAgLi4uY2hhaW5JbmZvLFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBjdXJyZW50UHJvdmlkZXI6IGNoYWluU3RhdGVNYXBbY2hhaW5TbHVnXS5jdXJyZW50UHJvdmlkZXJcbiAgICAgICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbiAgICAgICAgY2hhaW5TdGF0ZU1hcFtjaGFpblNsdWddLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdEFwaUZvckNoYWluKGNoYWluSW5mbyk7XG5cbiAgICAgICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgnY2hhaW4udXBkYXRlU3RhdGUnLCBjaGFpblNsdWcpO1xuICAgICAgICBuZWVkVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGF3YWl0IFByb21pc2UuYWxsKGluaXRQcm9taXNlcyk7XG5cbiAgICB0aGlzLmxvY2tDaGFpbkluZm9NYXAgPSBmYWxzZTtcbiAgICBuZWVkVXBkYXRlICYmIHRoaXMudXBkYXRlQ2hhaW5TdGF0ZU1hcFN1YnNjcmlwdGlvbigpO1xuXG4gICAgcmV0dXJuIG5lZWRVcGRhdGU7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVjb25uZWN0Q2hhaW4gKGNoYWluOiBzdHJpbmcpIHtcbiAgICBhd2FpdCB0aGlzLmdldFN1YnN0cmF0ZUFwaShjaGFpbik/LnJlY292ZXJDb25uZWN0KCk7XG4gICAgYXdhaXQgdGhpcy5nZXRFdm1BcGkoY2hhaW4pPy5yZWNvdmVyQ29ubmVjdCgpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgZGlzYWJsZUNoYWluIChjaGFpblNsdWc6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNoYWluSW5mbyA9IHRoaXMuZ2V0Q2hhaW5JbmZvQnlLZXkoY2hhaW5TbHVnKTtcbiAgICBjb25zdCBjaGFpblN0YXRlTWFwID0gdGhpcy5nZXRDaGFpblN0YXRlTWFwKCk7XG5cbiAgICBpZiAoIWNoYWluU3RhdGVNYXBbY2hhaW5TbHVnXS5hY3RpdmUgfHwgdGhpcy5sb2NrQ2hhaW5JbmZvTWFwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5sb2NrQ2hhaW5JbmZvTWFwID0gdHJ1ZTtcbiAgICBjaGFpblN0YXRlTWFwW2NoYWluU2x1Z10uYWN0aXZlID0gZmFsc2U7XG4gICAgLy8gU2V0IGRpc2Nvbm5lY3Qgc3RhdGUgZm9yIGluYWN0aXZlIGNoYWluXG4gICAgY2hhaW5TdGF0ZU1hcFtjaGFpblNsdWddLmNvbm5lY3Rpb25TdGF0dXMgPSBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRDtcbiAgICB0aGlzLmRlc3Ryb3lBcGlGb3JDaGFpbihjaGFpbkluZm8pO1xuXG4gICAgdGhpcy5kYlNlcnZpY2UudXBkYXRlQ2hhaW5TdG9yZSh7XG4gICAgICAuLi5jaGFpbkluZm8sXG4gICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgY3VycmVudFByb3ZpZGVyOiBjaGFpblN0YXRlTWFwW2NoYWluU2x1Z10uY3VycmVudFByb3ZpZGVyXG4gICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbiAgICB0aGlzLnVwZGF0ZUNoYWluU3RhdGVNYXBTdWJzY3JpcHRpb24oKTtcbiAgICB0aGlzLmxvY2tDaGFpbkluZm9NYXAgPSBmYWxzZTtcblxuICAgIHRoaXMuZXZlbnRTZXJ2aWNlLmVtaXQoJ2NoYWluLnVwZGF0ZVN0YXRlJywgY2hhaW5TbHVnKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0V4aXN0ZWRQcmVkZWZpbmVkQ2hhaW4gKGxhdGVzdENoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGdlbmVzaXNIYXNoPzogc3RyaW5nLCBldm1DaGFpbklkPzogbnVtYmVyKSB7XG4gICAgbGV0IGR1cGxpY2F0ZWRTbHVnID0gJyc7XG5cbiAgICBpZiAoZ2VuZXNpc0hhc2gpIHtcbiAgICAgIE9iamVjdC52YWx1ZXMobGF0ZXN0Q2hhaW5JbmZvTWFwKS5mb3JFYWNoKChjaGFpbkluZm8pID0+IHtcbiAgICAgICAgaWYgKGNoYWluSW5mby5zdWJzdHJhdGVJbmZvICYmIGNoYWluSW5mby5zdWJzdHJhdGVJbmZvLmdlbmVzaXNIYXNoID09PSBnZW5lc2lzSGFzaCkge1xuICAgICAgICAgIGR1cGxpY2F0ZWRTbHVnID0gY2hhaW5JbmZvLnNsdWc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZXZtQ2hhaW5JZCkge1xuICAgICAgT2JqZWN0LnZhbHVlcyhsYXRlc3RDaGFpbkluZm9NYXApLmZvckVhY2goKGNoYWluSW5mbykgPT4ge1xuICAgICAgICBpZiAoY2hhaW5JbmZvLmV2bUluZm8gJiYgY2hhaW5JbmZvLmV2bUluZm8uZXZtQ2hhaW5JZCA9PT0gZXZtQ2hhaW5JZCkge1xuICAgICAgICAgIGR1cGxpY2F0ZWRTbHVnID0gY2hhaW5JbmZvLnNsdWc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBkdXBsaWNhdGVkU2x1ZztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hMYXRlc3REYXRhIChzcmM6IHN0cmluZywgZGVmYXVsdFZhbHVlOiB1bmtub3duKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZWZhdWx0VmFsdWUpO1xuICAgIC8vIHRyeSB7XG4gICAgLy8gICBjb25zdCB0aW1lb3V0ID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAvLyAgICAgY29uc3QgaWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAvLyAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgIC8vICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgLy8gICAgIH0sIDE1MDApO1xuICAgIC8vICAgfSk7XG4gICAgLy8gICBsZXQgcmVzdWx0ID0gZGVmYXVsdFZhbHVlO1xuICAgIC8vICAgY29uc3QgcmVzcCA9IGF3YWl0IFByb21pc2UucmFjZShbXG4gICAgLy8gICAgIHRpbWVvdXQsXG4gICAgLy8gICAgIGZldGNoKHNyYylcbiAgICAvLyAgIF0pIGFzIFJlc3BvbnNlIHx8IG51bGw7XG4gICAgLy9cbiAgICAvLyAgIGlmICghcmVzcCkge1xuICAgIC8vICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGZldGNoaW5nIGxhdGVzdCBkYXRhJywgc3JjKTtcbiAgICAvL1xuICAgIC8vICAgICByZXR1cm4gcmVzdWx0O1xuICAgIC8vICAgfVxuICAgIC8vXG4gICAgLy8gICBpZiAocmVzcC5vaykge1xuICAgIC8vICAgICB0cnkge1xuICAgIC8vICAgICAgIHJlc3VsdCA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGVkIGxhdGVzdCBkYXRhJywgc3JjKTtcbiAgICAvLyAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gICAgICAgY29uc29sZS53YXJuKCdFcnJvciBwYXJzaW5nIGxhdGVzdCBkYXRhJywgc3JjLCBlcnIpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9XG4gICAgLy9cbiAgICAvLyAgIHJldHVybiByZXN1bHQ7XG4gICAgLy8gfSBjYXRjaCAoZSkge1xuICAgIC8vICAgY29uc29sZS53YXJuKCdFcnJvciBmZXRjaGluZyBsYXRlc3QgZGF0YScsIHNyYywgZSk7XG4gICAgLy9cbiAgICAvLyAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgLy8gfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0Q2hhaW5zICgpIHtcbiAgICBjb25zdCBzdG9yZWRDaGFpblNldHRpbmdzID0gYXdhaXQgdGhpcy5kYlNlcnZpY2UuZ2V0QWxsQ2hhaW5TdG9yZSgpO1xuICAgIGNvbnN0IGxhdGVzdENoYWluSW5mb01hcCA9IGF3YWl0IHRoaXMuZmV0Y2hMYXRlc3REYXRhKF9DSEFJTl9JTkZPX1NSQywgQ2hhaW5JbmZvTWFwKSBhcyBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPjtcbiAgICBjb25zdCBzdG9yZWRDaGFpblNldHRpbmdNYXA6IFJlY29yZDxzdHJpbmcsIElDaGFpbj4gPSB7fTtcblxuICAgIHN0b3JlZENoYWluU2V0dGluZ3MuZm9yRWFjaCgoY2hhaW5TdG9yZWRTZXR0aW5nKSA9PiB7XG4gICAgICBzdG9yZWRDaGFpblNldHRpbmdNYXBbY2hhaW5TdG9yZWRTZXR0aW5nLnNsdWddID0gY2hhaW5TdG9yZWRTZXR0aW5nO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbmV3U3RvcmFnZURhdGE6IElDaGFpbltdID0gW107XG4gICAgY29uc3QgZGVwcmVjYXRlZENoYWluczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBkZXByZWNhdGVkQ2hhaW5NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICAgIGlmIChzdG9yZWRDaGFpblNldHRpbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5kYXRhTWFwLmNoYWluSW5mb01hcCA9IGxhdGVzdENoYWluSW5mb01hcDtcbiAgICAgIE9iamVjdC52YWx1ZXMobGF0ZXN0Q2hhaW5JbmZvTWFwKS5mb3JFYWNoKChjaGFpbkluZm8pID0+IHtcbiAgICAgICAgdGhpcy5kYXRhTWFwLmNoYWluU3RhdGVNYXBbY2hhaW5JbmZvLnNsdWddID0ge1xuICAgICAgICAgIGN1cnJlbnRQcm92aWRlcjogT2JqZWN0LmtleXMoY2hhaW5JbmZvLnByb3ZpZGVycylbMF0sXG4gICAgICAgICAgc2x1ZzogY2hhaW5JbmZvLnNsdWcsXG4gICAgICAgICAgY29ubmVjdGlvblN0YXR1czogX0NoYWluQ29ubmVjdGlvblN0YXR1cy5ESVNDT05ORUNURUQsXG4gICAgICAgICAgYWN0aXZlOiBfREVGQVVMVF9BQ1RJVkVfQ0hBSU5TLmluY2x1ZGVzKGNoYWluSW5mby5zbHVnKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGNyZWF0ZSBkYXRhIGZvciBzdG9yYWdlXG4gICAgICAgIG5ld1N0b3JhZ2VEYXRhLnB1c2goe1xuICAgICAgICAgIC4uLmNoYWluSW5mbyxcbiAgICAgICAgICBhY3RpdmU6IF9ERUZBVUxUX0FDVElWRV9DSEFJTlMuaW5jbHVkZXMoY2hhaW5JbmZvLnNsdWcpLFxuICAgICAgICAgIGN1cnJlbnRQcm92aWRlcjogT2JqZWN0LmtleXMoY2hhaW5JbmZvLnByb3ZpZGVycylbMF1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWVyZ2VkQ2hhaW5JbmZvTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPiA9IGxhdGVzdENoYWluSW5mb01hcDtcblxuICAgICAgZm9yIChjb25zdCBbc3RvcmVkU2x1Zywgc3RvcmVkQ2hhaW5JbmZvXSBvZiBPYmplY3QuZW50cmllcyhzdG9yZWRDaGFpblNldHRpbmdNYXApKSB7XG4gICAgICAgIGlmIChzdG9yZWRTbHVnIGluIGxhdGVzdENoYWluSW5mb01hcCkgeyAvLyBjaGVjayBwcmVkZWZpbmVkIGNoYWlucyBmaXJzdCwga2VlcCBzZXR0aW5nIGZvciBwcm92aWRlcnMgYW5kIGN1cnJlbnRQcm92aWRlclxuICAgICAgICAgIG1lcmdlZENoYWluSW5mb01hcFtzdG9yZWRTbHVnXS5wcm92aWRlcnMgPSB7IC4uLnN0b3JlZENoYWluSW5mby5wcm92aWRlcnMsIC4uLm1lcmdlZENoYWluSW5mb01hcFtzdG9yZWRTbHVnXS5wcm92aWRlcnMgfTsgLy8gVE9ETzogcmV2aWV3IG1lcmdpbmcgcHJvdmlkZXJzXG4gICAgICAgICAgdGhpcy5kYXRhTWFwLmNoYWluU3RhdGVNYXBbc3RvcmVkU2x1Z10gPSB7XG4gICAgICAgICAgICBjdXJyZW50UHJvdmlkZXI6IHN0b3JlZENoYWluSW5mby5jdXJyZW50UHJvdmlkZXIsXG4gICAgICAgICAgICBzbHVnOiBzdG9yZWRTbHVnLFxuICAgICAgICAgICAgY29ubmVjdGlvblN0YXR1czogX0NoYWluQ29ubmVjdGlvblN0YXR1cy5ESVNDT05ORUNURUQsXG4gICAgICAgICAgICBhY3RpdmU6IHN0b3JlZENoYWluSW5mby5hY3RpdmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgbmV3U3RvcmFnZURhdGEucHVzaCh7XG4gICAgICAgICAgICAuLi5tZXJnZWRDaGFpbkluZm9NYXBbc3RvcmVkU2x1Z10sXG4gICAgICAgICAgICBhY3RpdmU6IHN0b3JlZENoYWluSW5mby5hY3RpdmUsXG4gICAgICAgICAgICBjdXJyZW50UHJvdmlkZXI6IHN0b3JlZENoYWluSW5mby5jdXJyZW50UHJvdmlkZXJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHsgLy8gb25seSBjdXN0b20gY2hhaW5zIGFyZSBsZWZ0XG4gICAgICAgICAgLy8gY2hlY2sgY3VzdG9tIGNoYWluIGR1cGxpY2F0ZWQgd2l0aCBwcmVkZWZpbmVkIGNoYWluID0+IG1lcmdlIGludG8gcHJlZGVmaW5lZCBjaGFpblxuICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZWREZWZhdWx0U2x1ZyA9IHRoaXMuY2hlY2tFeGlzdGVkUHJlZGVmaW5lZENoYWluKGxhdGVzdENoYWluSW5mb01hcCwgc3RvcmVkQ2hhaW5JbmZvLnN1YnN0cmF0ZUluZm8/LmdlbmVzaXNIYXNoLCBzdG9yZWRDaGFpbkluZm8uZXZtSW5mbz8uZXZtQ2hhaW5JZCk7XG5cbiAgICAgICAgICBpZiAoZHVwbGljYXRlZERlZmF1bHRTbHVnLmxlbmd0aCA+IDApIHsgLy8gbWVyZ2UgY3VzdG9tIGNoYWluIHdpdGggZXhpc3RlZCBjaGFpblxuICAgICAgICAgICAgbWVyZ2VkQ2hhaW5JbmZvTWFwW2R1cGxpY2F0ZWREZWZhdWx0U2x1Z10ucHJvdmlkZXJzID0geyAuLi5zdG9yZWRDaGFpbkluZm8ucHJvdmlkZXJzLCAuLi5tZXJnZWRDaGFpbkluZm9NYXBbZHVwbGljYXRlZERlZmF1bHRTbHVnXS5wcm92aWRlcnMgfTtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hcC5jaGFpblN0YXRlTWFwW2R1cGxpY2F0ZWREZWZhdWx0U2x1Z10gPSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRQcm92aWRlcjogc3RvcmVkQ2hhaW5JbmZvLmN1cnJlbnRQcm92aWRlcixcbiAgICAgICAgICAgICAgc2x1ZzogZHVwbGljYXRlZERlZmF1bHRTbHVnLFxuICAgICAgICAgICAgICBjb25uZWN0aW9uU3RhdHVzOiBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCxcbiAgICAgICAgICAgICAgYWN0aXZlOiBzdG9yZWRDaGFpbkluZm8uYWN0aXZlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBuZXdTdG9yYWdlRGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgLi4ubWVyZ2VkQ2hhaW5JbmZvTWFwW2R1cGxpY2F0ZWREZWZhdWx0U2x1Z10sXG4gICAgICAgICAgICAgIGFjdGl2ZTogc3RvcmVkQ2hhaW5JbmZvLmFjdGl2ZSxcbiAgICAgICAgICAgICAgY3VycmVudFByb3ZpZGVyOiBzdG9yZWRDaGFpbkluZm8uY3VycmVudFByb3ZpZGVyXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZGVwcmVjYXRlZENoYWluTWFwW3N0b3JlZFNsdWddID0gZHVwbGljYXRlZERlZmF1bHRTbHVnO1xuXG4gICAgICAgICAgICBkZXByZWNhdGVkQ2hhaW5zLnB1c2goc3RvcmVkU2x1Zyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lcmdlZENoYWluSW5mb01hcFtzdG9yZWRTbHVnXSA9IHtcbiAgICAgICAgICAgICAgc2x1Zzogc3RvcmVkU2x1ZyxcbiAgICAgICAgICAgICAgbmFtZTogc3RvcmVkQ2hhaW5JbmZvLm5hbWUsXG4gICAgICAgICAgICAgIHByb3ZpZGVyczogc3RvcmVkQ2hhaW5JbmZvLnByb3ZpZGVycyxcbiAgICAgICAgICAgICAgZXZtSW5mbzogc3RvcmVkQ2hhaW5JbmZvLmV2bUluZm8sXG4gICAgICAgICAgICAgIHN1YnN0cmF0ZUluZm86IHN0b3JlZENoYWluSW5mby5zdWJzdHJhdGVJbmZvLFxuICAgICAgICAgICAgICBpc1Rlc3RuZXQ6IHN0b3JlZENoYWluSW5mby5pc1Rlc3RuZXQsXG4gICAgICAgICAgICAgIGNoYWluU3RhdHVzOiBzdG9yZWRDaGFpbkluZm8uY2hhaW5TdGF0dXMsXG4gICAgICAgICAgICAgIGljb246IHN0b3JlZENoYWluSW5mby5pY29uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFwLmNoYWluU3RhdGVNYXBbc3RvcmVkU2x1Z10gPSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRQcm92aWRlcjogc3RvcmVkQ2hhaW5JbmZvLmN1cnJlbnRQcm92aWRlcixcbiAgICAgICAgICAgICAgc2x1Zzogc3RvcmVkU2x1ZyxcbiAgICAgICAgICAgICAgY29ubmVjdGlvblN0YXR1czogX0NoYWluQ29ubmVjdGlvblN0YXR1cy5ESVNDT05ORUNURUQsXG4gICAgICAgICAgICAgIGFjdGl2ZTogc3RvcmVkQ2hhaW5JbmZvLmFjdGl2ZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbmV3U3RvcmFnZURhdGEucHVzaCh7XG4gICAgICAgICAgICAgIC4uLm1lcmdlZENoYWluSW5mb01hcFtzdG9yZWRTbHVnXSxcbiAgICAgICAgICAgICAgYWN0aXZlOiBzdG9yZWRDaGFpbkluZm8uYWN0aXZlLFxuICAgICAgICAgICAgICBjdXJyZW50UHJvdmlkZXI6IHN0b3JlZENoYWluSW5mby5jdXJyZW50UHJvdmlkZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGaWxsIGluIHRoZSBtaXNzaW5nIGNoYWluU3RhdGUgYW5kIHN0b3JhZ2VEYXRhIChuZXcgY2hhaW5zIG5ldmVyIGJlZm9yZSBzZWVuKVxuICAgICAgT2JqZWN0LmVudHJpZXMobWVyZ2VkQ2hhaW5JbmZvTWFwKS5mb3JFYWNoKChbc2x1ZywgY2hhaW5JbmZvXSkgPT4ge1xuICAgICAgICBpZiAoIShzbHVnIGluIHRoaXMuZGF0YU1hcC5jaGFpblN0YXRlTWFwKSkge1xuICAgICAgICAgIHRoaXMuZGF0YU1hcC5jaGFpblN0YXRlTWFwW3NsdWddID0ge1xuICAgICAgICAgICAgY3VycmVudFByb3ZpZGVyOiBPYmplY3Qua2V5cyhjaGFpbkluZm8ucHJvdmlkZXJzKVswXSxcbiAgICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgICBjb25uZWN0aW9uU3RhdHVzOiBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCxcbiAgICAgICAgICAgIGFjdGl2ZTogX0RFRkFVTFRfQUNUSVZFX0NIQUlOUy5pbmNsdWRlcyhzbHVnKVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBuZXdTdG9yYWdlRGF0YS5wdXNoKHtcbiAgICAgICAgICAgIC4uLm1lcmdlZENoYWluSW5mb01hcFtzbHVnXSxcbiAgICAgICAgICAgIGFjdGl2ZTogX0RFRkFVTFRfQUNUSVZFX0NIQUlOUy5pbmNsdWRlcyhzbHVnKSxcbiAgICAgICAgICAgIGN1cnJlbnRQcm92aWRlcjogT2JqZWN0LmtleXMoY2hhaW5JbmZvLnByb3ZpZGVycylbMF1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuZGF0YU1hcC5jaGFpbkluZm9NYXAgPSBtZXJnZWRDaGFpbkluZm9NYXA7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5kYlNlcnZpY2UuYnVsa1VwZGF0ZUNoYWluU3RvcmUobmV3U3RvcmFnZURhdGEpO1xuICAgIGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnJlbW92ZUZyb21DaGFpblN0b3JlKGRlcHJlY2F0ZWRDaGFpbnMpOyAvLyByZW1vdmUgb3V0ZGF0ZWQgcmVjb3Jkc1xuICAgIGF3YWl0IHRoaXMuaW5pdEFzc2V0UmVnaXN0cnkoZGVwcmVjYXRlZENoYWluTWFwKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaW5pdEFzc2V0UmVnaXN0cnkgKGRlcHJlY2F0ZWRDdXN0b21DaGFpbk1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPikge1xuICAgIGNvbnN0IHN0b3JlZEFzc2V0UmVnaXN0cnkgPSBhd2FpdCB0aGlzLmRiU2VydmljZS5nZXRBbGxBc3NldFN0b3JlKCk7XG4gICAgY29uc3QgbGF0ZXN0QXNzZXRSZWdpc3RyeSA9IGF3YWl0IHRoaXMuZmV0Y2hMYXRlc3REYXRhKF9DSEFJTl9BU1NFVF9TUkMsIENoYWluQXNzZXRNYXApIGFzIFJlY29yZDxzdHJpbmcsIF9DaGFpbkFzc2V0PjtcblxuICAgIC8vIEZpbGwgb3V0IHprIGFzc2V0cyBmcm9tIGxhdGVzdEFzc2V0UmVnaXN0cnkgaWYgbm90IHN1cHBvcnRlZFxuICAgIGlmICghTU9EVUxFX1NVUFBPUlQuTUFOVEFfWkspIHtcbiAgICAgIE9iamVjdC5rZXlzKGxhdGVzdEFzc2V0UmVnaXN0cnkpLmZvckVhY2goKHNsdWcpID0+IHtcbiAgICAgICAgaWYgKF9pc01hbnRhWmtBc3NldChsYXRlc3RBc3NldFJlZ2lzdHJ5W3NsdWddKSkge1xuICAgICAgICAgIGRlbGV0ZSBsYXRlc3RBc3NldFJlZ2lzdHJ5W3NsdWddO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoc3RvcmVkQXNzZXRSZWdpc3RyeS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZGF0YU1hcC5hc3NldFJlZ2lzdHJ5ID0gbGF0ZXN0QXNzZXRSZWdpc3RyeTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWVyZ2VkQXNzZXRSZWdpc3RyeTogUmVjb3JkPHN0cmluZywgX0NoYWluQXNzZXQ+ID0gbGF0ZXN0QXNzZXRSZWdpc3RyeTtcblxuICAgICAgY29uc3QgcGFyc2VkU3RvcmVkQXNzZXRSZWdpc3RyeTogUmVjb3JkPHN0cmluZywgX0NoYWluQXNzZXQ+ID0ge307XG4gICAgICBjb25zdCBkZXByZWNhdGVkQXNzZXRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAvLyBVcGRhdGUgY3VzdG9tIGFzc2V0cyBvZiBtZXJnZWQgY3VzdG9tIGNoYWluc1xuICAgICAgT2JqZWN0LnZhbHVlcyhzdG9yZWRBc3NldFJlZ2lzdHJ5KS5mb3JFYWNoKChzdG9yZWRBc3NldCkgPT4ge1xuICAgICAgICBpZiAoX2lzQ3VzdG9tQXNzZXQoc3RvcmVkQXNzZXQuc2x1ZykgJiYgT2JqZWN0LmtleXMoZGVwcmVjYXRlZEN1c3RvbUNoYWluTWFwKS5pbmNsdWRlcyhzdG9yZWRBc3NldC5vcmlnaW5DaGFpbikpIHtcbiAgICAgICAgICBjb25zdCBuZXdPcmlnaW5DaGFpbiA9IGRlcHJlY2F0ZWRDdXN0b21DaGFpbk1hcFtzdG9yZWRBc3NldC5vcmlnaW5DaGFpbl07XG4gICAgICAgICAgY29uc3QgbmV3U2x1ZyA9IHRoaXMuZ2VuZXJhdGVTbHVnRm9yU21hcnRDb250cmFjdEFzc2V0KG5ld09yaWdpbkNoYWluLCBzdG9yZWRBc3NldC5hc3NldFR5cGUsIHN0b3JlZEFzc2V0LnN5bWJvbCwgc3RvcmVkQXNzZXQubWV0YWRhdGE/LmNvbnRyYWN0QWRkcmVzcyBhcyBzdHJpbmcpO1xuXG4gICAgICAgICAgZGVwcmVjYXRlZEFzc2V0cy5wdXNoKHN0b3JlZEFzc2V0LnNsdWcpO1xuICAgICAgICAgIHBhcnNlZFN0b3JlZEFzc2V0UmVnaXN0cnlbbmV3U2x1Z10gPSB7XG4gICAgICAgICAgICAuLi5zdG9yZWRBc3NldCxcbiAgICAgICAgICAgIG9yaWdpbkNoYWluOiBuZXdPcmlnaW5DaGFpbixcbiAgICAgICAgICAgIHNsdWc6IG5ld1NsdWdcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcnNlZFN0b3JlZEFzc2V0UmVnaXN0cnlbc3RvcmVkQXNzZXQuc2x1Z10gPSBzdG9yZWRBc3NldDtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZvciAoY29uc3Qgc3RvcmVkQXNzZXRJbmZvIG9mIE9iamVjdC52YWx1ZXMocGFyc2VkU3RvcmVkQXNzZXRSZWdpc3RyeSkpIHtcbiAgICAgICAgbGV0IGR1cGxpY2F0ZWQgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKGNvbnN0IGRlZmF1bHRDaGFpbkFzc2V0IG9mIE9iamVjdC52YWx1ZXMobGF0ZXN0QXNzZXRSZWdpc3RyeSkpIHtcbiAgICAgICAgICAvLyBjYXNlIG1lcmdlIGN1c3RvbSBhc3NldCB3aXRoIGRlZmF1bHQgYXNzZXRcbiAgICAgICAgICBpZiAoX2lzRXF1YWxTbWFydENvbnRyYWN0QXNzZXQoc3RvcmVkQXNzZXRJbmZvLCBkZWZhdWx0Q2hhaW5Bc3NldCkpIHtcbiAgICAgICAgICAgIGR1cGxpY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFkdXBsaWNhdGVkKSB7XG4gICAgICAgICAgbWVyZ2VkQXNzZXRSZWdpc3RyeVtzdG9yZWRBc3NldEluZm8uc2x1Z10gPSBzdG9yZWRBc3NldEluZm87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVwcmVjYXRlZEFzc2V0cy5wdXNoKHN0b3JlZEFzc2V0SW5mby5zbHVnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmRhdGFNYXAuYXNzZXRSZWdpc3RyeSA9IG1lcmdlZEFzc2V0UmVnaXN0cnk7XG5cbiAgICAgIGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnJlbW92ZUZyb21Bc3NldFN0b3JlKGRlcHJlY2F0ZWRBc3NldHMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ2hhaW5TdGF0ZU1hcFN1YnNjcmlwdGlvbiAoKSB7XG4gICAgdGhpcy5jaGFpblN0YXRlTWFwU3ViamVjdC5uZXh0KHRoaXMuZ2V0Q2hhaW5TdGF0ZU1hcCgpKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ2hhaW5JbmZvTWFwU3Vic2NyaXB0aW9uICgpIHtcbiAgICB0aGlzLmNoYWluSW5mb01hcFN1YmplY3QubmV4dCh0aGlzLmdldENoYWluSW5mb01hcCgpKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ2hhaW5TdWJzY3JpcHRpb24gKCkge1xuICAgIHRoaXMudXBkYXRlQ2hhaW5JbmZvTWFwU3Vic2NyaXB0aW9uKCk7XG4gICAgdGhpcy51cGRhdGVDaGFpblN0YXRlTWFwU3Vic2NyaXB0aW9uKCk7XG4gIH1cblxuICAvLyBDYW4gb25seSB1cGRhdGUgcHJvdmlkZXJzIG9yIGJsb2NrIGV4cGxvcmVyLCBjcm93ZGxvYW4gdXJsXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlQ2hhaW4gKHBhcmFtczogX05ldHdvcmtVcHNlcnRQYXJhbXMpIHtcbiAgICBjb25zdCBjaGFpblNsdWcgPSBwYXJhbXMuY2hhaW5FZGl0SW5mby5zbHVnO1xuICAgIGNvbnN0IHRhcmdldENoYWluSW5mbyA9IHRoaXMuZ2V0Q2hhaW5JbmZvQnlLZXkoY2hhaW5TbHVnKTtcbiAgICBjb25zdCB0YXJnZXRDaGFpblN0YXRlID0gdGhpcy5nZXRDaGFpblN0YXRlQnlLZXkoY2hhaW5TbHVnKTtcbiAgICBjb25zdCBjaGFuZ2VkUHJvdmlkZXIgPSBwYXJhbXMuY2hhaW5FZGl0SW5mby5jdXJyZW50UHJvdmlkZXIgIT09IHRhcmdldENoYWluU3RhdGUuY3VycmVudFByb3ZpZGVyO1xuXG4gICAgaWYgKGNoYW5nZWRQcm92aWRlcikge1xuICAgICAgdGFyZ2V0Q2hhaW5JbmZvLnByb3ZpZGVycyA9IHBhcmFtcy5jaGFpbkVkaXRJbmZvLnByb3ZpZGVycztcbiAgICAgIHRhcmdldENoYWluU3RhdGUuY3VycmVudFByb3ZpZGVyID0gcGFyYW1zLmNoYWluRWRpdEluZm8uY3VycmVudFByb3ZpZGVyO1xuXG4gICAgICAvLyBFbmFibGUgY2hhaW4gaWYgbm90IGJlZm9yZVxuICAgICAgaWYgKCF0YXJnZXRDaGFpblN0YXRlLmFjdGl2ZSkge1xuICAgICAgICB0YXJnZXRDaGFpblN0YXRlLmFjdGl2ZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEl0IGF1dG8gZGV0ZWN0cyB0aGUgY2hhbmdlIG9mIGFwaSB1cmwgdG8gY3JlYXRlIG5ldyBpbnN0YW5jZSBvciByZXVzZSBleGlzdGVkIG9uZVxuICAgICAgYXdhaXQgdGhpcy5pbml0QXBpRm9yQ2hhaW4odGFyZ2V0Q2hhaW5JbmZvKTtcbiAgICAgIHRoaXMudXBkYXRlQ2hhaW5TdGF0ZU1hcFN1YnNjcmlwdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh0YXJnZXRDaGFpbkluZm8uc3Vic3RyYXRlSW5mbykge1xuICAgICAgaWYgKHBhcmFtcy5jaGFpbkVkaXRJbmZvLmJsb2NrRXhwbG9yZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0YXJnZXRDaGFpbkluZm8uc3Vic3RyYXRlSW5mby5ibG9ja0V4cGxvcmVyID0gcGFyYW1zLmNoYWluRWRpdEluZm8uYmxvY2tFeHBsb3JlcjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtcy5jaGFpbkVkaXRJbmZvLmNyb3dkbG9hblVybCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhcmdldENoYWluSW5mby5zdWJzdHJhdGVJbmZvLmNyb3dkbG9hblVybCA9IHBhcmFtcy5jaGFpbkVkaXRJbmZvLmNyb3dkbG9hblVybDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0Q2hhaW5JbmZvLmV2bUluZm8pIHtcbiAgICAgIGlmIChwYXJhbXMuY2hhaW5FZGl0SW5mby5ibG9ja0V4cGxvcmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFyZ2V0Q2hhaW5JbmZvLmV2bUluZm8uYmxvY2tFeHBsb3JlciA9IHBhcmFtcy5jaGFpbkVkaXRJbmZvLmJsb2NrRXhwbG9yZXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVDaGFpbkluZm9NYXBTdWJzY3JpcHRpb24oKTtcblxuICAgIHRoaXMuZGJTZXJ2aWNlLnVwZGF0ZUNoYWluU3RvcmUoe1xuICAgICAgLi4udGFyZ2V0Q2hhaW5JbmZvLFxuICAgICAgYWN0aXZlOiB0YXJnZXRDaGFpblN0YXRlLmFjdGl2ZSxcbiAgICAgIGN1cnJlbnRQcm92aWRlcjogdGFyZ2V0Q2hhaW5TdGF0ZS5jdXJyZW50UHJvdmlkZXJcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuZXZlbnRTZXJ2aWNlLmVtaXQoJ2NoYWluLnVwZGF0ZVN0YXRlJywgY2hhaW5TbHVnKTtcbiAgICB9KS5jYXRjaCgoZSkgPT4gdGhpcy5sb2dnZXIuZXJyb3IoZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbnNlcnRDaGFpbiAocGFyYW1zOiBfTmV0d29ya1Vwc2VydFBhcmFtcykge1xuICAgIGNvbnN0IGNoYWluSW5mb01hcCA9IHRoaXMuZ2V0Q2hhaW5JbmZvTWFwKCk7XG5cbiAgICBpZiAoIXBhcmFtcy5jaGFpblNwZWMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdDaGFpblNsdWcgPSB0aGlzLmdlbmVyYXRlU2x1Z0ZvckN1c3RvbUNoYWluKHBhcmFtcy5jaGFpbkVkaXRJbmZvLmNoYWluVHlwZSBhcyBzdHJpbmcsIHBhcmFtcy5jaGFpbkVkaXRJbmZvLm5hbWUgYXMgc3RyaW5nLCBwYXJhbXMuY2hhaW5TcGVjLnBhcmFJZCwgcGFyYW1zLmNoYWluU3BlYy5ldm1DaGFpbklkKTtcblxuICAgIGxldCBzdWJzdHJhdGVJbmZvOiBfU3Vic3RyYXRlSW5mbyB8IG51bGwgPSBudWxsO1xuICAgIGxldCBldm1JbmZvOiBfRXZtSW5mbyB8IG51bGwgPSBudWxsO1xuXG4gICAgaWYgKHBhcmFtcy5jaGFpblNwZWMuZ2VuZXNpc0hhc2ggIT09ICcnKSB7XG4gICAgICBzdWJzdHJhdGVJbmZvID0ge1xuICAgICAgICBjcm93ZGxvYW5GdW5kczogcGFyYW1zLmNoYWluU3BlYy5jcm93ZGxvYW5GdW5kcyB8fCBudWxsLFxuICAgICAgICBjcm93ZGxvYW5QYXJhSWQ6IHBhcmFtcy5jaGFpblNwZWMuY3Jvd2Rsb2FuUGFyYUlkIHx8IG51bGwsXG4gICAgICAgIGFkZHJlc3NQcmVmaXg6IHBhcmFtcy5jaGFpblNwZWMuYWRkcmVzc1ByZWZpeCxcbiAgICAgICAgYmxvY2tFeHBsb3JlcjogcGFyYW1zLmNoYWluRWRpdEluZm8uYmxvY2tFeHBsb3JlciB8fCBudWxsLFxuICAgICAgICBjaGFpblR5cGU6IHBhcmFtcy5jaGFpblNwZWMucGFyYUlkICE9PSBudWxsID8gX1N1YnN0cmF0ZUNoYWluVHlwZS5QQVJBQ0hBSU4gOiBfU3Vic3RyYXRlQ2hhaW5UeXBlLlJFTEFZQ0hBSU4sXG4gICAgICAgIGNyb3dkbG9hblVybDogcGFyYW1zLmNoYWluRWRpdEluZm8uY3Jvd2Rsb2FuVXJsIHx8IG51bGwsXG4gICAgICAgIGRlY2ltYWxzOiBwYXJhbXMuY2hhaW5TcGVjLmRlY2ltYWxzLFxuICAgICAgICBleGlzdGVudGlhbERlcG9zaXQ6IHBhcmFtcy5jaGFpblNwZWMuZXhpc3RlbnRpYWxEZXBvc2l0LFxuICAgICAgICBwYXJhSWQ6IHBhcmFtcy5jaGFpblNwZWMucGFyYUlkLFxuICAgICAgICBzeW1ib2w6IHBhcmFtcy5jaGFpbkVkaXRJbmZvLnN5bWJvbCBhcyBzdHJpbmcsXG4gICAgICAgIGdlbmVzaXNIYXNoOiBwYXJhbXMuY2hhaW5TcGVjLmdlbmVzaXNIYXNoLFxuICAgICAgICByZWxheVNsdWc6IG51bGwsXG4gICAgICAgIGhhc05hdGl2ZU5mdDogZmFsc2UsXG4gICAgICAgIHN1cHBvcnRTdGFraW5nOiBwYXJhbXMuY2hhaW5TcGVjLnBhcmFJZCA9PT0gbnVsbCxcbiAgICAgICAgc3VwcG9ydFNtYXJ0Q29udHJhY3Q6IG51bGxcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChwYXJhbXMuY2hhaW5TcGVjLmV2bUNoYWluSWQgIT09IG51bGwpIHtcbiAgICAgIGV2bUluZm8gPSB7XG4gICAgICAgIHN1cHBvcnRTbWFydENvbnRyYWN0OiBbX0Fzc2V0VHlwZS5FUkMyMCwgX0Fzc2V0VHlwZS5FUkM3MjFdLCAvLyBzZXQgc3VwcG9ydCBmb3IgRVJDIHRva2VuIGJ5IGRlZmF1bHRcbiAgICAgICAgYmxvY2tFeHBsb3JlcjogcGFyYW1zLmNoYWluRWRpdEluZm8uYmxvY2tFeHBsb3JlciB8fCBudWxsLFxuICAgICAgICBkZWNpbWFsczogcGFyYW1zLmNoYWluU3BlYy5kZWNpbWFscyxcbiAgICAgICAgZXZtQ2hhaW5JZDogcGFyYW1zLmNoYWluU3BlYy5ldm1DaGFpbklkLFxuICAgICAgICBleGlzdGVudGlhbERlcG9zaXQ6IHBhcmFtcy5jaGFpblNwZWMuZXhpc3RlbnRpYWxEZXBvc2l0LFxuICAgICAgICBzeW1ib2w6IHBhcmFtcy5jaGFpbkVkaXRJbmZvLnN5bWJvbCBhcyBzdHJpbmcsXG4gICAgICAgIGFiaUV4cGxvcmVyOiBudWxsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGNoYWluSW5mbzogX0NoYWluSW5mbyA9IHtcbiAgICAgIHNsdWc6IG5ld0NoYWluU2x1ZyxcbiAgICAgIG5hbWU6IHBhcmFtcy5jaGFpbkVkaXRJbmZvLm5hbWUgYXMgc3RyaW5nLFxuICAgICAgcHJvdmlkZXJzOiBwYXJhbXMuY2hhaW5FZGl0SW5mby5wcm92aWRlcnMsXG4gICAgICBzdWJzdHJhdGVJbmZvLFxuICAgICAgZXZtSW5mbyxcbiAgICAgIGlzVGVzdG5ldDogZmFsc2UsXG4gICAgICBjaGFpblN0YXR1czogX0NoYWluU3RhdHVzLkFDVElWRSxcbiAgICAgIGljb246ICcnIC8vIFRvZG86IEFsbG93IHVwZGF0ZSB3aXRoIGN1c3RvbSBjaGFpblxuICAgIH07XG5cbiAgICAvLyBpbnNlcnQgbmV3IGNoYWluSW5mb1xuICAgIGNoYWluSW5mb01hcFtuZXdDaGFpblNsdWddID0gY2hhaW5JbmZvO1xuXG4gICAgLy8gaW5zZXJ0IG5ldyBjaGFpblN0YXRlXG4gICAgY29uc3QgY2hhaW5TdGF0ZU1hcCA9IHRoaXMuZ2V0Q2hhaW5TdGF0ZU1hcCgpO1xuXG4gICAgY2hhaW5TdGF0ZU1hcFtuZXdDaGFpblNsdWddID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgY29ubmVjdGlvblN0YXR1czogX0NoYWluQ29ubmVjdGlvblN0YXR1cy5ESVNDT05ORUNURUQsXG4gICAgICBjdXJyZW50UHJvdmlkZXI6IHBhcmFtcy5jaGFpbkVkaXRJbmZvLmN1cnJlbnRQcm92aWRlcixcbiAgICAgIHNsdWc6IG5ld0NoYWluU2x1Z1xuICAgIH07XG5cbiAgICBhd2FpdCB0aGlzLmluaXRBcGlGb3JDaGFpbihjaGFpbkluZm8pO1xuXG4gICAgLy8gY3JlYXRlIGEgcmVjb3JkIGluIGFzc2V0UmVnaXN0cnkgZm9yIG5hdGl2ZSB0b2tlbiBhbmQgdXBkYXRlIHN0b3JlL3N1YnNjcmlwdGlvblxuICAgIGNvbnN0IG5hdGl2ZVRva2VuU2x1ZyA9IHRoaXMudXBzZXJ0Q3VzdG9tVG9rZW4oe1xuICAgICAgYXNzZXRUeXBlOiBfQXNzZXRUeXBlLk5BVElWRSxcbiAgICAgIGRlY2ltYWxzOiBwYXJhbXMuY2hhaW5TcGVjLmRlY2ltYWxzLFxuICAgICAgbWV0YWRhdGE6IG51bGwsXG4gICAgICBtaW5BbW91bnQ6IHBhcmFtcy5jaGFpblNwZWMuZXhpc3RlbnRpYWxEZXBvc2l0LFxuICAgICAgbXVsdGlDaGFpbkFzc2V0OiBudWxsLFxuICAgICAgbmFtZTogcGFyYW1zLmNoYWluRWRpdEluZm8ubmFtZSBhcyBzdHJpbmcsXG4gICAgICBvcmlnaW5DaGFpbjogbmV3Q2hhaW5TbHVnLFxuICAgICAgcHJpY2VJZDogcGFyYW1zLmNoYWluRWRpdEluZm8ucHJpY2VJZCB8fCBudWxsLFxuICAgICAgc2x1ZzogJycsXG4gICAgICBzeW1ib2w6IHBhcmFtcy5jaGFpbkVkaXRJbmZvLnN5bWJvbCBhcyBzdHJpbmcsXG4gICAgICBoYXNWYWx1ZTogdHJ1ZSxcbiAgICAgIGljb246ICcnXG4gICAgfSk7XG5cbiAgICAvLyB1cGRhdGUgc3Vic2NyaXB0aW9uXG4gICAgdGhpcy51cGRhdGVDaGFpblN1YnNjcmlwdGlvbigpO1xuXG4gICAgLy8gVE9ETzogYWRkIHRyeSwgY2F0Y2gsIG1vdmUgc3RvcmFnZSB1cGRhdGUgYW5kIHN1YmplY3QgdXBkYXRlIHRvIHNvbWV3aGVyZSBlbHNlXG4gICAgdGhpcy5kYlNlcnZpY2UudXBkYXRlQ2hhaW5TdG9yZSh7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICBjdXJyZW50UHJvdmlkZXI6IHBhcmFtcy5jaGFpbkVkaXRJbmZvLmN1cnJlbnRQcm92aWRlcixcbiAgICAgIC4uLmNoYWluSW5mb1xuICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuZXZlbnRTZXJ2aWNlLmVtaXQoJ2NoYWluLmFkZCcsIG5ld0NoYWluU2x1Zyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlKSA9PiB0aGlzLmxvZ2dlci5lcnJvcihlKSk7XG5cbiAgICByZXR1cm4gbmF0aXZlVG9rZW5TbHVnO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHVwc2VydENoYWluIChwYXJhbXM6IF9OZXR3b3JrVXBzZXJ0UGFyYW1zKSB7XG4gICAgaWYgKHRoaXMubG9ja0NoYWluSW5mb01hcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubG9ja0NoYWluSW5mb01hcCA9IHRydWU7XG5cbiAgICBsZXQgcmVzdWx0O1xuXG4gICAgaWYgKHBhcmFtcy5tb2RlID09PSAndXBkYXRlJykgeyAvLyB1cGRhdGUgZXhpc3RpbmcgY2hhaW5JbmZvXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYWluKHBhcmFtcyk7XG4gICAgfSBlbHNlIHsgLy8gaW5zZXJ0IGN1c3RvbSBuZXR3b3JrXG4gICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmluc2VydENoYWluKHBhcmFtcyk7XG4gICAgfVxuXG4gICAgdGhpcy5sb2NrQ2hhaW5JbmZvTWFwID0gZmFsc2U7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVNsdWdGb3JDdXN0b21DaGFpbiAoY2hhaW5UeXBlOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgcGFyYUlkOiBudW1iZXIgfCBudWxsLCBldm1DaGFpbklkOiBudW1iZXIgfCBudWxsKSB7XG4gICAgY29uc3QgcGFyc2VkTmFtZSA9IG5hbWUucmVwbGFjZUFsbCgnICcsICcnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKGV2bUNoYWluSWQgIT09IG51bGwgJiYgZXZtQ2hhaW5JZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYCR7X0NVU1RPTV9QUkVGSVh9JHtjaGFpblR5cGV9LSR7cGFyc2VkTmFtZX0tJHtldm1DaGFpbklkfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBzbHVnID0gYCR7X0NVU1RPTV9QUkVGSVh9JHtjaGFpblR5cGV9LSR7cGFyc2VkTmFtZX1gO1xuXG4gICAgICBpZiAocGFyYUlkICE9PSBudWxsICYmIHBhcmFJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNsdWcgPSBzbHVnLmNvbmNhdChgLSR7cGFyYUlkfWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2x1ZztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGVDdXN0b21DaGFpbiAocHJvdmlkZXI6IHN0cmluZywgZXhpc3RpbmdDaGFpblNsdWc/OiBzdHJpbmcpOiBQcm9taXNlPFZhbGlkYXRlTmV0d29ya1Jlc3BvbnNlPiB7XG4gICAgLy8gY3VycmVudGx5IG9ubHkgc3VwcG9ydHMgV1MgcHJvdmlkZXIgZm9yIFN1YnN0cmF0ZSBhbmQgSFRUUCBwcm92aWRlciBmb3IgRVZNXG4gICAgbGV0IHJlc3VsdDogVmFsaWRhdGVOZXR3b3JrUmVzcG9uc2UgPSB7XG4gICAgICBkZWNpbWFsczogMCxcbiAgICAgIGV4aXN0ZW50aWFsRGVwb3NpdDogJycsXG4gICAgICBwYXJhSWQ6IG51bGwsXG4gICAgICBzeW1ib2w6ICcnLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBnZW5lc2lzSGFzaDogJycsXG4gICAgICBhZGRyZXNzUHJlZml4OiAnJyxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgZXZtQ2hhaW5JZDogbnVsbFxuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBjb25mbGljdENoYWluTmFtZTogcHJvdmlkZXJDb25mbGljdENoYWluTmFtZSwgY29uZmxpY3RDaGFpblNsdWc6IHByb3ZpZGVyQ29uZmxpY3RDaGFpblNsdWcsIGVycm9yOiBwcm92aWRlckVycm9yIH0gPSB0aGlzLnZhbGlkYXRlUHJvdmlkZXIocHJvdmlkZXIsIGV4aXN0aW5nQ2hhaW5TbHVnKTtcblxuICAgICAgaWYgKHByb3ZpZGVyRXJyb3IgPT09IF9DSEFJTl9WQUxJREFUSU9OX0VSUk9SLk5PTkUpIHtcbiAgICAgICAgbGV0IGFwaTogX0V2bUFwaSB8IF9TdWJzdHJhdGVBcGk7XG5cbiAgICAgICAgLy8gVE9ETzogRVZNIGNoYWluIG1pZ2h0IGhhdmUgV1MgcHJvdmlkZXJcbiAgICAgICAgaWYgKHByb3ZpZGVyLnN0YXJ0c1dpdGgoJ2h0dHAnKSkge1xuICAgICAgICAgIC8vIEhUVFAgcHJvdmlkZXIgaXMgRVZNIGJ5IGRlZmF1bHRcbiAgICAgICAgICBhcGkgPSBhd2FpdCB0aGlzLmV2bUNoYWluSGFuZGxlci5pbml0QXBpKCdjdXN0b20nLCBwcm92aWRlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBpID0gYXdhaXQgdGhpcy5zdWJzdHJhdGVDaGFpbkhhbmRsZXIuaW5pdEFwaSgnY3VzdG9tJywgcHJvdmlkZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29ubmVjdGlvblRpbWVvdXQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY29ubmVjdGlvblRyaWFsID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICBjb25uZWN0aW9uVGltZW91dCxcbiAgICAgICAgICBhcGkuaXNSZWFkeVxuICAgICAgICBdKTsgLy8gY2hlY2sgY29ubmVjdGlvblxuXG4gICAgICAgIGlmIChjb25uZWN0aW9uVHJpYWwgIT09IG51bGwpIHtcbiAgICAgICAgICBsZXQgX2FwaSA9IGNvbm5lY3Rpb25UcmlhbCBhcyBfU3Vic3RyYXRlQXBpIHwgX0V2bUFwaSB8IG51bGw7XG5cbiAgICAgICAgICBjb25zdCBjaGFpblNwZWMgPSBhd2FpdCB0aGlzLmdldENoYWluU3BlY0J5UHJvdmlkZXIoX2FwaSBhcyBfU3Vic3RyYXRlQXBpIHwgX0V2bUFwaSk7XG5cbiAgICAgICAgICByZXN1bHQgPSBPYmplY3QuYXNzaWduKHJlc3VsdCwgY2hhaW5TcGVjKTtcblxuICAgICAgICAgIC8vIFRPRE86IGRpc2Nvbm5lY3QgYW5kIGRlc3Ryb3kgQVBJXG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGxcbiAgICAgICAgICAvLyBfYXBpPy5hcGk/LmRpc2Nvbm5lY3QgJiYgYXdhaXQgX2FwaT8uYXBpPy5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgX2FwaSA9IG51bGw7XG5cbiAgICAgICAgICBpZiAoZXhpc3RpbmdDaGFpblNsdWcpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNhbWUgbmV0d29yayAod2l0aCBleGlzdGluZ0NoYWluU2x1ZylcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0ZWRDaGFpbkluZm8gPSB0aGlzLmdldENoYWluSW5mb0J5S2V5KGV4aXN0aW5nQ2hhaW5TbHVnKTtcblxuICAgICAgICAgICAgaWYgKGV4aXN0ZWRDaGFpbkluZm8uZXZtSW5mbyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAocmVzdWx0LmV2bUNoYWluSWQgIT09IGV4aXN0ZWRDaGFpbkluZm8uZXZtSW5mby5ldm1DaGFpbklkKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmVycm9yID0gX0NIQUlOX1ZBTElEQVRJT05fRVJST1IuUFJPVklERVJfTk9UX1NBTUVfQ0hBSU47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhpc3RlZENoYWluSW5mby5zdWJzdHJhdGVJbmZvICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmIChyZXN1bHQuZ2VuZXNpc0hhc2ggIT09IGV4aXN0ZWRDaGFpbkluZm8uc3Vic3RyYXRlSW5mby5nZW5lc2lzSGFzaCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5lcnJvciA9IF9DSEFJTl9WQUxJREFUSU9OX0VSUk9SLlBST1ZJREVSX05PVF9TQU1FX0NIQUlOO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIG5ldHdvcmsgZXhpc3RlZFxuICAgICAgICAgICAgaWYgKHJlc3VsdC5ldm1DaGFpbklkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY2hhaW5JbmZvIG9mIE9iamVjdC52YWx1ZXModGhpcy5nZXRFdm1DaGFpbkluZm9NYXAoKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhaW5JbmZvPy5ldm1JbmZvPy5ldm1DaGFpbklkID09PSByZXN1bHQuZXZtQ2hhaW5JZCkge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0LmVycm9yID0gX0NIQUlOX1ZBTElEQVRJT05fRVJST1IuRVhJU1RFRF9DSEFJTjtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdC5jb25mbGljdENoYWluID0gY2hhaW5JbmZvLm5hbWU7XG4gICAgICAgICAgICAgICAgICByZXN1bHQuY29uZmxpY3RLZXkgPSBjaGFpbkluZm8uc2x1ZztcblxuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5nZW5lc2lzSGFzaCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGFpbkluZm8gb2YgT2JqZWN0LnZhbHVlcyh0aGlzLmdldFN1YnN0cmF0ZUNoYWluSW5mb01hcCgpKSkge1xuICAgICAgICAgICAgICAgIGlmIChjaGFpbkluZm8/LnN1YnN0cmF0ZUluZm8/LmdlbmVzaXNIYXNoID09PSByZXN1bHQuZ2VuZXNpc0hhc2gpIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdC5lcnJvciA9IF9DSEFJTl9WQUxJREFUSU9OX0VSUk9SLkVYSVNURURfQ0hBSU47XG4gICAgICAgICAgICAgICAgICByZXN1bHQuY29uZmxpY3RDaGFpbiA9IGNoYWluSW5mby5uYW1lO1xuICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvbmZsaWN0S2V5ID0gY2hhaW5JbmZvLnNsdWc7XG5cbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuZXJyb3IgPSBfQ0hBSU5fVkFMSURBVElPTl9FUlJPUi5DT05ORUNUSU9OX0ZBSUxVUkU7XG4gICAgICAgICAgcmVzdWx0LnN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgcmVzdWx0LmVycm9yID0gcHJvdmlkZXJFcnJvcjtcbiAgICAgICAgcmVzdWx0LmNvbmZsaWN0Q2hhaW4gPSBwcm92aWRlckNvbmZsaWN0Q2hhaW5OYW1lO1xuICAgICAgICByZXN1bHQuY29uZmxpY3RLZXkgPSBwcm92aWRlckNvbmZsaWN0Q2hhaW5TbHVnO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXJlc3VsdC5lcnJvciAmJiAocmVzdWx0LmV2bUNoYWluSWQgIT09IG51bGwgfHwgcmVzdWx0LmdlbmVzaXNIYXNoICE9PSAnJykpIHtcbiAgICAgICAgcmVzdWx0LnN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbm5lY3RpbmcgdG8gcHJvdmlkZXInLCBlKTtcblxuICAgICAgcmVzdWx0LnN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgIHJlc3VsdC5lcnJvciA9IF9DSEFJTl9WQUxJREFUSU9OX0VSUk9SLkNPTk5FQ1RJT05fRkFJTFVSRTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldENoYWluU3BlY0J5UHJvdmlkZXIgKGFwaTogX0V2bUFwaSB8IF9TdWJzdHJhdGVBcGkpIHtcbiAgICBpZiAoYXBpLmFwaSBpbnN0YW5jZW9mIFdlYjMpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV2bUNoYWluSGFuZGxlci5nZXRDaGFpblNwZWMoYXBpIGFzIF9Fdm1BcGkpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnN1YnN0cmF0ZUNoYWluSGFuZGxlci5nZXRDaGFpblNwZWMoYXBpIGFzIF9TdWJzdHJhdGVBcGkpO1xuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZVByb3ZpZGVyICh0YXJnZXRQcm92aWRlcjogc3RyaW5nLCBleGlzdGluZ0NoYWluU2x1Zz86IHN0cmluZykge1xuICAgIGxldCBlcnJvcjogX0NIQUlOX1ZBTElEQVRJT05fRVJST1IgPSBfQ0hBSU5fVkFMSURBVElPTl9FUlJPUi5OT05FO1xuICAgIGNvbnN0IGNoYWluSW5mb01hcCA9IHRoaXMuZ2V0Q2hhaW5JbmZvTWFwKCk7XG4gICAgY29uc3QgYWxsRXhpc3RlZFByb3ZpZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbj5bXSA9IFtdO1xuICAgIGxldCBjb25mbGljdENoYWluU2x1ZyA9ICcnO1xuICAgIGxldCBjb25mbGljdENoYWluTmFtZSA9ICcnO1xuXG4gICAgaWYgKGV4aXN0aW5nQ2hhaW5TbHVnKSB7XG4gICAgICBjb25zdCBjaGFpbkluZm8gPSBjaGFpbkluZm9NYXBbZXhpc3RpbmdDaGFpblNsdWddO1xuXG4gICAgICBpZiAoT2JqZWN0LnZhbHVlcyhjaGFpbkluZm8ucHJvdmlkZXJzKS5pbmNsdWRlcyh0YXJnZXRQcm92aWRlcikpIHtcbiAgICAgICAgZXJyb3IgPSBfQ0hBSU5fVkFMSURBVElPTl9FUlJPUi5FWElTVEVEX1BST1ZJREVSO1xuICAgICAgICBjb25mbGljdENoYWluU2x1ZyA9IGNoYWluSW5mby5zbHVnO1xuICAgICAgICBjb25mbGljdENoYWluTmFtZSA9IGNoYWluSW5mby5uYW1lO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBlcnJvciwgY29uZmxpY3RDaGFpblNsdWcsIGNvbmZsaWN0Q2hhaW5OYW1lIH07XG4gICAgfVxuXG4gICAgLy8gZ2V0IGFsbCBwcm92aWRlcnNcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjaGFpbkluZm9NYXApKSB7XG4gICAgICBPYmplY3QudmFsdWVzKHZhbHVlLnByb3ZpZGVycykuZm9yRWFjaCgocHJvdmlkZXIpID0+IHtcbiAgICAgICAgYWxsRXhpc3RlZFByb3ZpZGVycy5wdXNoKHsga2V5LCBwcm92aWRlciB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgeyBrZXksIHByb3ZpZGVyIH0gb2YgYWxsRXhpc3RlZFByb3ZpZGVycykge1xuICAgICAgaWYgKHByb3ZpZGVyID09PSB0YXJnZXRQcm92aWRlcikge1xuICAgICAgICBlcnJvciA9IF9DSEFJTl9WQUxJREFUSU9OX0VSUk9SLkVYSVNURURfUFJPVklERVI7XG4gICAgICAgIGNvbmZsaWN0Q2hhaW5TbHVnID0ga2V5IGFzIHN0cmluZztcbiAgICAgICAgY29uZmxpY3RDaGFpbk5hbWUgPSBjaGFpbkluZm9NYXBba2V5IGFzIHN0cmluZ10ubmFtZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZXJyb3IsIGNvbmZsaWN0Q2hhaW5TbHVnLCBjb25mbGljdENoYWluTmFtZSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRTbWFydENvbnRyYWN0VG9rZW5JbmZvIChjb250cmFjdEFkZHJlc3M6IHN0cmluZywgdG9rZW5UeXBlOiBfQXNzZXRUeXBlLCBvcmlnaW5DaGFpbjogc3RyaW5nLCBjb250cmFjdENhbGxlcj86IHN0cmluZyk6IFByb21pc2U8X1NtYXJ0Q29udHJhY3RUb2tlbkluZm8+IHtcbiAgICBpZiAoW19Bc3NldFR5cGUuRVJDNzIxLCBfQXNzZXRUeXBlLkVSQzIwXS5pbmNsdWRlcyh0b2tlblR5cGUpKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5ldm1DaGFpbkhhbmRsZXIuZ2V0U21hcnRDb250cmFjdFRva2VuSW5mbyhjb250cmFjdEFkZHJlc3MsIHRva2VuVHlwZSwgb3JpZ2luQ2hhaW4pO1xuICAgIH0gZWxzZSBpZiAoW19Bc3NldFR5cGUuUFNQMzQsIF9Bc3NldFR5cGUuUFNQMjJdLmluY2x1ZGVzKHRva2VuVHlwZSkpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1YnN0cmF0ZUNoYWluSGFuZGxlci5nZXRTbWFydENvbnRyYWN0VG9rZW5JbmZvKGNvbnRyYWN0QWRkcmVzcywgdG9rZW5UeXBlLCBvcmlnaW5DaGFpbiwgY29udHJhY3RDYWxsZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkZWNpbWFsczogLTEsXG4gICAgICBuYW1lOiAnJyxcbiAgICAgIHN5bWJvbDogJycsXG4gICAgICBjb250cmFjdEVycm9yOiBmYWxzZVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGVDdXN0b21Ub2tlbiAoZGF0YTogX1ZhbGlkYXRlQ3VzdG9tQXNzZXRSZXF1ZXN0KTogUHJvbWlzZTxfVmFsaWRhdGVDdXN0b21Bc3NldFJlc3BvbnNlPiB7XG4gICAgY29uc3QgYXNzZXRSZWdpc3RyeSA9IHRoaXMuZ2V0U21hcnRDb250cmFjdFRva2VucygpO1xuICAgIGxldCBleGlzdGVkVG9rZW46IF9DaGFpbkFzc2V0IHwgdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCB0b2tlbiBvZiBPYmplY3QudmFsdWVzKGFzc2V0UmVnaXN0cnkpKSB7XG4gICAgICBjb25zdCBjb250cmFjdEFkZHJlc3MgPSB0b2tlbj8ubWV0YWRhdGE/LmNvbnRyYWN0QWRkcmVzcyBhcyBzdHJpbmc7XG5cbiAgICAgIGlmIChfaXNFcXVhbENvbnRyYWN0QWRkcmVzcyhjb250cmFjdEFkZHJlc3MsIGRhdGEuY29udHJhY3RBZGRyZXNzKSAmJiB0b2tlbi5hc3NldFR5cGUgPT09IGRhdGEudHlwZSAmJiB0b2tlbi5vcmlnaW5DaGFpbiA9PT0gZGF0YS5vcmlnaW5DaGFpbikge1xuICAgICAgICBleGlzdGVkVG9rZW4gPSB0b2tlbjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGV4aXN0ZWRUb2tlbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGVjaW1hbHM6IGV4aXN0ZWRUb2tlbi5kZWNpbWFscyB8fCAwLFxuICAgICAgICBuYW1lOiBleGlzdGVkVG9rZW4ubmFtZSxcbiAgICAgICAgc3ltYm9sOiBleGlzdGVkVG9rZW4uc3ltYm9sLFxuICAgICAgICBpc0V4aXN0OiAhIWV4aXN0ZWRUb2tlbixcbiAgICAgICAgZXhpc3RlZFNsdWc6IGV4aXN0ZWRUb2tlbj8uc2x1ZyxcbiAgICAgICAgY29udHJhY3RFcnJvcjogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb250cmFjdEVycm9yLCBkZWNpbWFscywgbmFtZSwgc3ltYm9sIH0gPSBhd2FpdCB0aGlzLmdldFNtYXJ0Q29udHJhY3RUb2tlbkluZm8oZGF0YS5jb250cmFjdEFkZHJlc3MsIGRhdGEudHlwZSwgZGF0YS5vcmlnaW5DaGFpbiwgZGF0YS5jb250cmFjdENhbGxlcik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZSxcbiAgICAgIGRlY2ltYWxzLFxuICAgICAgc3ltYm9sLFxuICAgICAgaXNFeGlzdDogISFleGlzdGVkVG9rZW4sXG4gICAgICBjb250cmFjdEVycm9yXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVTbHVnRm9yU21hcnRDb250cmFjdEFzc2V0IChvcmlnaW5DaGFpbjogc3RyaW5nLCBhc3NldFR5cGU6IF9Bc3NldFR5cGUsIHN5bWJvbDogc3RyaW5nLCBjb250cmFjdEFkZHJlc3M6IHN0cmluZykge1xuICAgIHJldHVybiBgJHtvcmlnaW5DaGFpbn0tJHthc3NldFR5cGV9LSR7c3ltYm9sfS0ke2NvbnRyYWN0QWRkcmVzc31gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVNsdWdGb3JOYXRpdmVUb2tlbiAob3JpZ2luQ2hhaW46IHN0cmluZywgYXNzZXRUeXBlOiBfQXNzZXRUeXBlLCBzeW1ib2w6IHN0cmluZykge1xuICAgIHJldHVybiBgJHtvcmlnaW5DaGFpbn0tJHthc3NldFR5cGV9LSR7c3ltYm9sfWA7XG4gIH1cblxuICBwdWJsaWMgcmVmcmVzaFN1YnN0cmF0ZUFwaSAoc2x1Zzogc3RyaW5nKSB7XG4gICAgdGhpcy5zdWJzdHJhdGVDaGFpbkhhbmRsZXIucmVjb3ZlckFwaShzbHVnKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoRXZtQXBpIChzbHVnOiBzdHJpbmcpIHtcbiAgICB0aGlzLmV2bUNoYWluSGFuZGxlci5yZWNvdmVyQXBpKHNsdWcpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0b3BBbGxDaGFpbkFwaXMgKCkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMuc3Vic3RyYXRlQ2hhaW5IYW5kbGVyLnNsZWVwKCksXG4gICAgICB0aGlzLmV2bUNoYWluSGFuZGxlci5zbGVlcCgpXG4gICAgXSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVzdW1lQWxsQ2hhaW5BcGlzICgpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLnN1YnN0cmF0ZUNoYWluSGFuZGxlci53YWtlVXAoKSxcbiAgICAgIHRoaXMuZXZtQ2hhaW5IYW5kbGVyLndha2VVcCgpXG4gICAgXSk7XG4gIH1cblxuICBwdWJsaWMgY2hlY2tBbmRVcGRhdGVTdGF0dXNNYXBGb3JDaGFpbiAoY2hhaW5TbHVnOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdWJzdHJhdGVBcGlNYXAgPSB0aGlzLmdldFN1YnN0cmF0ZUFwaU1hcCgpO1xuICAgIGNvbnN0IGV2bUFwaU1hcCA9IHRoaXMuZ2V0RXZtQXBpTWFwKCk7XG4gICAgY29uc3QgY2hhaW5TdGF0ZSA9IHRoaXMuZ2V0Q2hhaW5TdGF0ZUJ5S2V5KGNoYWluU2x1Zyk7XG4gICAgbGV0IHVwZGF0ZSA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlU3RhdGUgKGN1cnJlbnQ6IF9DaGFpblN0YXRlLCBzdGF0dXM6IF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMpIHtcbiAgICAgIGlmIChjdXJyZW50LmNvbm5lY3Rpb25TdGF0dXMgIT09IHN0YXR1cykge1xuICAgICAgICBjdXJyZW50LmNvbm5lY3Rpb25TdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHVwZGF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNoYWluU3RhdGUuYWN0aXZlKSB7XG4gICAgICBjb25zdCBhcGkgPSBzdWJzdHJhdGVBcGlNYXBbY2hhaW5TbHVnXSB8fCBldm1BcGlNYXBbY2hhaW5TbHVnXTtcblxuICAgICAgaWYgKGFwaSkge1xuICAgICAgICB1cGRhdGVTdGF0ZShjaGFpblN0YXRlLCBhcGkuaXNBcGlDb25uZWN0ZWQgPyBfQ2hhaW5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RFRCA6IF9DaGFpbkNvbm5lY3Rpb25TdGF0dXMuRElTQ09OTkVDVEVEKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdXBkYXRlU3RhdGUoY2hhaW5TdGF0ZSwgX0NoYWluQ29ubmVjdGlvblN0YXR1cy5ESVNDT05ORUNURUQpO1xuICAgIH1cblxuICAgIGlmICh1cGRhdGUpIHtcbiAgICAgIHRoaXMuZGF0YU1hcC5jaGFpblN0YXRlTWFwW2NoYWluU2x1Z10gPSBjaGFpblN0YXRlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBpbml0QXNzZXRTZXR0aW5ncyAoKSB7XG4gICAgY29uc3QgYXNzZXRTZXR0aW5ncyA9IGF3YWl0IHRoaXMuZ2V0QXNzZXRTZXR0aW5ncygpO1xuICAgIGNvbnN0IGFjdGl2ZUNoYWluU2x1Z3MgPSB0aGlzLmdldEFjdGl2ZUNoYWluU2x1Z3MoKTtcbiAgICBjb25zdCBhc3NldFJlZ2lzdHJ5ID0gdGhpcy5nZXRBc3NldFJlZ2lzdHJ5KCk7XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoYXNzZXRTZXR0aW5ncykubGVuZ3RoID09PSAwKSB7IC8vIG9ubHkgaW5pdGlhdGUgdGhlIGZpcnN0IHRpbWVcbiAgICAgIE9iamVjdC52YWx1ZXMoYXNzZXRSZWdpc3RyeSkuZm9yRWFjaCgoYXNzZXRJbmZvKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzU2V0dGluZ0V4aXN0ZWQgPSBhc3NldEluZm8uc2x1ZyBpbiBhc3NldFNldHRpbmdzO1xuXG4gICAgICAgIC8vIFNldCB2aXNpYmxlIGZvciBldmVyeSBlbmFibGVkIGNoYWluc1xuICAgICAgICBpZiAoYWN0aXZlQ2hhaW5TbHVncy5pbmNsdWRlcyhhc3NldEluZm8ub3JpZ2luQ2hhaW4pICYmICFpc1NldHRpbmdFeGlzdGVkKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBvbmx5IGV4aXN0IHdoZW4gc2V0IGVpdGhlciBieSBjaGFpbiBzZXR0aW5ncyBvciB1c2VyXG4gICAgICAgICAgYXNzZXRTZXR0aW5nc1thc3NldEluZm8uc2x1Z10gPSB7XG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2V0QXNzZXRTZXR0aW5ncyhhc3NldFNldHRpbmdzLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgnYXNzZXQucmVhZHknLCB0cnVlKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRBc3NldFNldHRpbmdzIChhc3NldFNldHRpbmdzOiBSZWNvcmQ8c3RyaW5nLCBBc3NldFNldHRpbmc+LCBlbWl0RXZlbnQgPSB0cnVlKTogdm9pZCB7XG4gICAgY29uc3QgdXBkYXRlQXNzZXRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKGVtaXRFdmVudCkge1xuICAgICAgT2JqZWN0LmtleXMoYXNzZXRTZXR0aW5ncykuZm9yRWFjaCgoc2x1ZykgPT4ge1xuICAgICAgICBpZiAodGhpcy5hc3NldFNldHRpbmdTdWJqZWN0LnZhbHVlW3NsdWddPy52aXNpYmxlICE9PSBhc3NldFNldHRpbmdzW3NsdWddLnZpc2libGUpIHtcbiAgICAgICAgICB1cGRhdGVBc3NldHMucHVzaChzbHVnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5hc3NldFNldHRpbmdTdWJqZWN0Lm5leHQoYXNzZXRTZXR0aW5ncyk7XG5cbiAgICB1cGRhdGVBc3NldHMuZm9yRWFjaCgoc2x1ZykgPT4ge1xuICAgICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgnYXNzZXQudXBkYXRlU3RhdGUnLCBzbHVnKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc3RvcmUuc2V0KCdBc3NldFNldHRpbmcnLCBhc3NldFNldHRpbmdzKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRNYW50YVprQXNzZXRTZXR0aW5ncyAodmlzaWJsZTogYm9vbGVhbikge1xuICAgIGNvbnN0IHprQXNzZXRTZXR0aW5nczogUmVjb3JkPHN0cmluZywgQXNzZXRTZXR0aW5nPiA9IHt9O1xuXG4gICAgT2JqZWN0LnZhbHVlcyh0aGlzLmRhdGFNYXAuYXNzZXRSZWdpc3RyeSkuZm9yRWFjaCgoYXNzZXQpID0+IHtcbiAgICAgIGlmIChfaXNNYW50YVprQXNzZXQoYXNzZXQpKSB7XG4gICAgICAgIHprQXNzZXRTZXR0aW5nc1thc3NldC5zbHVnXSA9IHtcbiAgICAgICAgICB2aXNpYmxlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnN0b3JlLmdldCgnQXNzZXRTZXR0aW5nJywgKHN0b3JlZEFzc2V0U2V0dGluZ3MpID0+IHtcbiAgICAgIGNvbnN0IG5ld0Fzc2V0U2V0dGluZ3MgPSB7XG4gICAgICAgIC4uLnN0b3JlZEFzc2V0U2V0dGluZ3MsXG4gICAgICAgIC4uLnprQXNzZXRTZXR0aW5nc1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zdG9yZS5zZXQoJ0Fzc2V0U2V0dGluZycsIG5ld0Fzc2V0U2V0dGluZ3MpO1xuXG4gICAgICB0aGlzLmFzc2V0U2V0dGluZ1N1YmplY3QubmV4dChuZXdBc3NldFNldHRpbmdzKTtcblxuICAgICAgT2JqZWN0LmtleXMoemtBc3NldFNldHRpbmdzKS5mb3JFYWNoKChzbHVnKSA9PiB7XG4gICAgICAgIHRoaXMuZXZlbnRTZXJ2aWNlLmVtaXQoJ2Fzc2V0LnVwZGF0ZVN0YXRlJywgc2x1Zyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRTdG9yZUFzc2V0U2V0dGluZ3MgKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgQXNzZXRTZXR0aW5nPj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5zdG9yZS5nZXQoJ0Fzc2V0U2V0dGluZycsIHJlc29sdmUpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldEFzc2V0U2V0dGluZ3MgKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgQXNzZXRTZXR0aW5nPj4ge1xuICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmFzc2V0U2V0dGluZ1N1YmplY3QudmFsdWUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgYXNzZXRTZXR0aW5ncyA9IChhd2FpdCB0aGlzLmdldFN0b3JlQXNzZXRTZXR0aW5ncygpIHx8IHt9KTtcblxuICAgICAgdGhpcy5hc3NldFNldHRpbmdTdWJqZWN0Lm5leHQoYXNzZXRTZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYXNzZXRTZXR0aW5nU3ViamVjdC52YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVBc3NldFNldHRpbmcgKGFzc2V0U2x1Zzogc3RyaW5nLCBhc3NldFNldHRpbmc6IEFzc2V0U2V0dGluZywgYXV0b0VuYWJsZU5hdGl2ZVRva2VuPzogYm9vbGVhbik6IFByb21pc2U8Ym9vbGVhbiB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGN1cnJlbnRBc3NldFNldHRpbmdzID0gYXdhaXQgdGhpcy5nZXRBc3NldFNldHRpbmdzKCk7XG5cbiAgICBsZXQgbmVlZFVwZGF0ZVN1YmplY3Q6IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG5cbiAgICAvLyBVcGRhdGUgc2V0dGluZ3NcbiAgICBjdXJyZW50QXNzZXRTZXR0aW5nc1thc3NldFNsdWddID0gYXNzZXRTZXR0aW5nO1xuXG4gICAgaWYgKGFzc2V0U2V0dGluZy52aXNpYmxlKSB7XG4gICAgICBjb25zdCBhc3NldEluZm8gPSB0aGlzLmdldEFzc2V0QnlTbHVnKGFzc2V0U2x1Zyk7XG4gICAgICBjb25zdCBjaGFpblN0YXRlID0gdGhpcy5nZXRDaGFpblN0YXRlQnlLZXkoYXNzZXRJbmZvLm9yaWdpbkNoYWluKTtcblxuICAgICAgLy8gaWYgY2hhaW4gbm90IGVuYWJsZWQsIHRoZW4gYXV0b21hdGljYWxseSBlbmFibGVcbiAgICAgIGlmIChjaGFpblN0YXRlICYmICFjaGFpblN0YXRlLmFjdGl2ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmVuYWJsZUNoYWluKGNoYWluU3RhdGUuc2x1Zyk7XG4gICAgICAgIG5lZWRVcGRhdGVTdWJqZWN0ID0gdHJ1ZTtcblxuICAgICAgICBpZiAoYXV0b0VuYWJsZU5hdGl2ZVRva2VuKSB7XG4gICAgICAgICAgY29uc3QgbmF0aXZlQXNzZXQgPSB0aGlzLmdldE5hdGl2ZVRva2VuSW5mbyhhc3NldEluZm8ub3JpZ2luQ2hhaW4pO1xuXG4gICAgICAgICAgY3VycmVudEFzc2V0U2V0dGluZ3NbbmF0aXZlQXNzZXQuc2x1Z10gPSB7IHZpc2libGU6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2V0QXNzZXRTZXR0aW5ncyhjdXJyZW50QXNzZXRTZXR0aW5ncyk7XG5cbiAgICByZXR1cm4gbmVlZFVwZGF0ZVN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBkYXRlQXNzZXRTZXR0aW5nQnlDaGFpbiAoY2hhaW5TbHVnOiBzdHJpbmcsIHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBzdG9yZWRBc3NldFNldHRpbmdzID0gYXdhaXQgdGhpcy5nZXRBc3NldFNldHRpbmdzKCk7XG4gICAgY29uc3QgYXNzZXRzQnlDaGFpbiA9IHRoaXMuZ2V0RnVuZ2libGVUb2tlbnNCeUNoYWluKGNoYWluU2x1Zyk7XG4gICAgY29uc3QgYXNzZXRTZXR0aW5nczogUmVjb3JkPHN0cmluZywgQXNzZXRTZXR0aW5nPiA9IHN0b3JlZEFzc2V0U2V0dGluZ3MgfHwge307XG5cbiAgICBPYmplY3QudmFsdWVzKGFzc2V0c0J5Q2hhaW4pLmZvckVhY2goKGFzc2V0SW5mbykgPT4ge1xuICAgICAgYXNzZXRTZXR0aW5nc1thc3NldEluZm8uc2x1Z10gPSB7IHZpc2libGUgfTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0QXNzZXRTZXR0aW5ncyhhc3NldFNldHRpbmdzKTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJzY3JpYmVBc3NldFNldHRpbmdzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hc3NldFNldHRpbmdTdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldENoYWluTG9nb01hcCAoKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2hMYXRlc3REYXRhKF9DSEFJTl9MT0dPX01BUF9TUkMsIENoYWluTG9nb01hcCkgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRBc3NldExvZ29NYXAgKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoTGF0ZXN0RGF0YShfQVNTRVRfTE9HT19NQVBfU1JDLCBBc3NldExvZ29NYXApIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIH1cblxuICBwdWJsaWMgcmVzZXRXYWxsZXQgKHJlc2V0QWxsOiBib29sZWFuKSB7XG4gICAgaWYgKHJlc2V0QWxsKSB7XG4gICAgICB0aGlzLnNldEFzc2V0U2V0dGluZ3Moe30pO1xuXG4gICAgICAvLyBEaXNjb25uZWN0IGNoYWluXG4gICAgICBjb25zdCBhY3RpdmVDaGFpbnMgPSB0aGlzLmdldEFjdGl2ZUNoYWluSW5mb3MoKTtcblxuICAgICAgZm9yIChjb25zdCBjaGFpbiBvZiBPYmplY3Qua2V5cyhhY3RpdmVDaGFpbnMpKSB7XG4gICAgICAgIGlmICghX0RFRkFVTFRfQUNUSVZFX0NIQUlOUy5pbmNsdWRlcyhjaGFpbikpIHtcbiAgICAgICAgICB0aGlzLmRpc2FibGVDaGFpbihjaGFpbik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGN1c3RvbSBjaGFpblxuICAgICAgY29uc3QgYWxsQ2hhaW5zID0gdGhpcy5nZXRDaGFpbkluZm9NYXAoKTtcblxuICAgICAgZm9yIChjb25zdCBjaGFpbiBvZiBPYmplY3Qua2V5cyhhbGxDaGFpbnMpKSB7XG4gICAgICAgIGlmIChfaXNDdXN0b21DaGFpbihjaGFpbikpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUN1c3RvbUNoYWluKGNoYWluKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgY3VzdG9tIGFzc2V0XG4gICAgICBjb25zdCBhc3NldFNldHRpbmdzID0gdGhpcy5nZXRBc3NldFNldHRpbmdzKCk7XG5cbiAgICAgIGNvbnN0IGN1c3RvbVRva2VuOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IGFzc2V0IG9mIE9iamVjdC5rZXlzKGFzc2V0U2V0dGluZ3MpKSB7XG4gICAgICAgIGlmIChfaXNDdXN0b21Bc3NldChhc3NldCkpIHtcbiAgICAgICAgICBjdXN0b21Ub2tlbi5wdXNoKGFzc2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmRlbGV0ZUN1c3RvbUFzc2V0cyhjdXN0b21Ub2tlbik7XG4gICAgfVxuICB9XG5cbiAgZ2V0TWV0YWRhdGEgKGNoYWluOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5kYlNlcnZpY2Uuc3RvcmVzLm1ldGFkYXRhLmdldE1ldGFkYXRhKGNoYWluKTtcbiAgfVxuXG4gIHVwc2VydE1ldGFkYXRhIChjaGFpbjogc3RyaW5nLCBtZXRhZGF0YTogSU1ldGFkYXRhSXRlbSkge1xuICAgIHJldHVybiB0aGlzLmRiU2VydmljZS5zdG9yZXMubWV0YWRhdGEudXBzZXJ0TWV0YWRhdGEoY2hhaW4sIG1ldGFkYXRhKTtcbiAgfVxuXG4gIGdldE1ldGFkYXRhQnlIYXNoIChoYXNoOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5kYlNlcnZpY2Uuc3RvcmVzLm1ldGFkYXRhLmdldE1ldGFkYXRhQnlHZW5lc2lzSGFzaChoYXNoKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG4vLyBTdGF0ZWxlc3Mgc2VydmljZSBoYW5kbGUgcnVudGltZSBldmVudCBvbiBiYWNrZ3JvdW5kXG5pbXBvcnQgeyBFdmVudEl0ZW0sIEV2ZW50UmVnaXN0cnksIEV2ZW50VHlwZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvZXZlbnQtc2VydmljZS90eXBlcyc7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ2V2ZW50ZW1pdHRlcjMnO1xuXG5leHBvcnQgY2xhc3MgRXZlbnRTZXJ2aWNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyPEV2ZW50UmVnaXN0cnk+IHtcbiAgcHJpdmF0ZSBsYXp5VGltZTogbnVtYmVyO1xuICBwcml2YXRlIHRpbWVvdXRJZDogTm9kZUpTLlRpbWVvdXQgfCBudWxsO1xuICBwcml2YXRlIHBlbmRpbmdFdmVudHM6IEV2ZW50SXRlbTxFdmVudFR5cGU+W10gPSBbXTtcbiAgcHJpdmF0ZSBsYXp5RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8e2xhenk6IFtFdmVudEl0ZW08RXZlbnRUeXBlPltdLCBFdmVudFR5cGVbXV19PigpO1xuXG4gIHB1YmxpYyByZWFkb25seSB3YWl0Q3J5cHRvUmVhZHk6IFByb21pc2U8Ym9vbGVhbj47XG4gIHB1YmxpYyByZWFkb25seSB3YWl0RGF0YWJhc2VSZWFkeTogUHJvbWlzZTxib29sZWFuPjtcbiAgcHVibGljIHJlYWRvbmx5IHdhaXRLZXlyaW5nUmVhZHk6IFByb21pc2U8Ym9vbGVhbj47XG4gIHB1YmxpYyByZWFkb25seSB3YWl0QWNjb3VudFJlYWR5OiBQcm9taXNlPGJvb2xlYW4+O1xuICBwdWJsaWMgcmVhZG9ubHkgd2FpdENoYWluUmVhZHk6IFByb21pc2U8Ym9vbGVhbj47XG4gIHB1YmxpYyByZWFkb25seSB3YWl0QXNzZXRSZWFkeTogUHJvbWlzZTxib29sZWFuPjtcblxuICBjb25zdHJ1Y3RvciAob3B0aW9uczogeyBsYXp5VGltZTogbnVtYmVyIH0gPSB7IGxhenlUaW1lOiAzMDAgfSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5sYXp5VGltZSA9IG9wdGlvbnMubGF6eVRpbWU7XG4gICAgdGhpcy50aW1lb3V0SWQgPSBudWxsO1xuICAgIHRoaXMud2FpdENyeXB0b1JlYWR5ID0gdGhpcy5nZW5lcmF0ZVdhaXRQcm9taXNlKCdjcnlwdG8ucmVhZHknKTtcbiAgICB0aGlzLndhaXREYXRhYmFzZVJlYWR5ID0gdGhpcy5nZW5lcmF0ZVdhaXRQcm9taXNlKCdkYXRhYmFzZS5yZWFkeScpO1xuICAgIHRoaXMud2FpdEtleXJpbmdSZWFkeSA9IHRoaXMuZ2VuZXJhdGVXYWl0UHJvbWlzZSgna2V5cmluZy5yZWFkeScpO1xuICAgIHRoaXMud2FpdEFjY291bnRSZWFkeSA9IHRoaXMuZ2VuZXJhdGVXYWl0UHJvbWlzZSgnYWNjb3VudC5yZWFkeScpO1xuICAgIHRoaXMud2FpdENoYWluUmVhZHkgPSB0aGlzLmdlbmVyYXRlV2FpdFByb21pc2UoJ2NoYWluLnJlYWR5Jyk7XG4gICAgdGhpcy53YWl0QXNzZXRSZWFkeSA9IHRoaXMuZ2VuZXJhdGVXYWl0UHJvbWlzZSgnYXNzZXQucmVhZHknKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVXYWl0UHJvbWlzZTxUIGV4dGVuZHMgRXZlbnRUeXBlPiAoZXZlbnRUeXBlOiBUKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLm9uY2UoZXZlbnRUeXBlLCAoaXNSZWFkeSkgPT4ge1xuICAgICAgICByZXNvbHZlKGlzUmVhZHkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNldExhenlUaW1lb3V0ICgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XG4gICAgfVxuXG4gICAgdGhpcy50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZW1pdExhenkoKTtcbiAgICB9LCB0aGlzLmxhenlUaW1lKTtcbiAgfVxuXG4gIHByaXZhdGUgZW1pdExhenkgKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxhenlFbWl0dGVyLmVtaXQoJ2xhenknLCB0aGlzLnBlbmRpbmdFdmVudHMsIHRoaXMucGVuZGluZ0V2ZW50cy5tYXAoKGUpID0+IGUudHlwZSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dldCBlcnJvciBpbiBzb21lIGxpc3RlbmVyIG9mIGxhenkgZXZlbnQnLCBlKTtcbiAgICB9XG5cbiAgICB0aGlzLnBlbmRpbmdFdmVudHMgPSBbXTtcbiAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XG4gIH1cblxuICBwdWJsaWMgb25MYXp5IChjYWxsYmFjazogKGV2ZW50czogRXZlbnRJdGVtPEV2ZW50VHlwZT5bXSwgZXZlbnRUeXBlczogRXZlbnRUeXBlW10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmxhenlFbWl0dGVyLm9uKCdsYXp5JywgY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIG9mZkxhenkgKGNhbGxiYWNrOiAoZXZlbnRzOiBFdmVudEl0ZW08RXZlbnRUeXBlPltdLCBldmVudFR5cGVzOiBFdmVudFR5cGVbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMubGF6eUVtaXR0ZXIub2ZmKCdsYXp5JywgY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIG9uY2VMYXp5IChjYWxsYmFjazogKGV2ZW50czogRXZlbnRJdGVtPEV2ZW50VHlwZT5bXSwgZXZlbnRUeXBlczogRXZlbnRUeXBlW10pID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmxhenlFbWl0dGVyLm9uY2UoJ2xhenknLCBjYWxsYmFjayk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZW1pdDxUIGV4dGVuZHMgRXZlbnRUeXBlPiAoZXZlbnRUeXBlOiBULCAuLi5hcmdzOiBFdmVudEVtaXR0ZXIuRXZlbnRBcmdzPEV2ZW50UmVnaXN0cnksIFQ+KTogYm9vbGVhbiB7XG4gICAgY29uc29sZS5kZWJ1ZygnRW1pdCBldmVudDogJywgZXZlbnRUeXBlLCAuLi5hcmdzKTtcbiAgICB0aGlzLnBlbmRpbmdFdmVudHMucHVzaCh7IHR5cGU6IGV2ZW50VHlwZSwgZGF0YTogYXJncyBhcyBFdmVudFJlZ2lzdHJ5W1RdIH0pO1xuICAgIHRoaXMuc2V0TGF6eVRpbWVvdXQoKTtcblxuICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50VHlwZSwgLi4uYXJncyk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgQ3VycmVudEFjY291bnRJbmZvIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBTV1RyYW5zYWN0aW9uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy90cmFuc2FjdGlvbi1zZXJ2aWNlL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBFdmVudFJlZ2lzdHJ5IHtcbiAgJ2dlbmVyYWwuc2xlZXAnOiBbYm9vbGVhbl0sXG4gICdnZW5lcmFsLndha2V1cCc6IFtib29sZWFuXSxcbiAgJ2NyeXB0by5yZWFkeSc6IFtib29sZWFuXSxcbiAgJ2RhdGFiYXNlLnJlYWR5JzogW2Jvb2xlYW5dLFxuICAna2V5cmluZy5yZWFkeSc6IFtib29sZWFuXSxcbiAgJ2FjY291bnQudXBkYXRlQ3VycmVudCc6IFtDdXJyZW50QWNjb3VudEluZm9dLFxuICAnYWNjb3VudC5yZWFkeSc6IFtib29sZWFuXSxcbiAgJ2FjY291bnQuYWRkJzogW3N0cmluZ10sIC8vIGFkZHJlc3NcbiAgJ2FjY291bnQudXBkYXRlJzogW3N0cmluZ10sIC8vIGFkZHJlc3NcbiAgJ2FjY291bnQucmVtb3ZlJzogW3N0cmluZ10sIC8vIGFkZHJlc3NcblxuICAnY2hhaW4ucmVhZHknOiBbYm9vbGVhbl0sIC8vIGNoYWluIGlzIHJlYWR5IGFuZCBtaWdyYXRpb24gZG9uZVxuICAnY2hhaW4uYWRkJzogW3N0cmluZ10sIC8vIGNoYWluIHNsdWdcbiAgJ2NoYWluLnVwZGF0ZVN0YXRlJzogW3N0cmluZ10sIC8vIGNoYWluIHNsdWdcblxuICAnYXNzZXQucmVhZHknOiBbYm9vbGVhbl0sXG4gICdhc3NldC51cGRhdGVTdGF0ZSc6IFtzdHJpbmddLCAvLyB0b2tlbiBzbHVnXG5cbiAgJ3RyYW5zYWN0aW9uLmRvbmUnOiBbU1dUcmFuc2FjdGlvbl0sXG4gICd0cmFuc2FjdGlvbi5mYWlsZWQnOiBbU1dUcmFuc2FjdGlvbiB8IHVuZGVmaW5lZF0sXG4gICd0cmFuc2FjdGlvbi5zdWJtaXRTdGFraW5nJzogW3N0cmluZ10sXG4gICd0cmFuc2FjdGlvbi50cmFuc2Zlck5mdCc6IFtTV1RyYW5zYWN0aW9uIHwgdW5kZWZpbmVkXSxcbiAgJ21hbnRhUGF5LmluaXRTeW5jJzogW3N0cmluZyB8IHVuZGVmaW5lZF0sIC8vIHprQWRkcmVzc1xuICAnbWFudGFQYXkuc3VibWl0VHJhbnNhY3Rpb24nOiBbU1dUcmFuc2FjdGlvbiB8IHVuZGVmaW5lZF0sXG4gICdtYW50YVBheS5lbmFibGUnOiBbc3RyaW5nXVxufVxuXG5leHBvcnQgdHlwZSBFdmVudFR5cGUgPSBrZXlvZiBFdmVudFJlZ2lzdHJ5O1xuXG5leHBvcnQgY29uc3QgQ09NTU9OX1JFTE9BRF9FVkVOVFM6IEV2ZW50VHlwZVtdID0gW1xuICAnYWNjb3VudC51cGRhdGVDdXJyZW50JyxcbiAgJ2Fzc2V0LnVwZGF0ZVN0YXRlJyxcbiAgJ2FjY291bnQuYWRkJyxcbiAgJ2NoYWluLnVwZGF0ZVN0YXRlJyxcbiAgJ2FjY291bnQucmVtb3ZlJyxcbiAgJ2NoYWluLmFkZCcsXG4gICdtYW50YVBheS5pbml0U3luYycsIC8vIFRPRE86IHJlLWNoZWNrIHRoaXNcbiAgJ21hbnRhUGF5LmVuYWJsZSdcbl07XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRJdGVtPFQgZXh0ZW5kcyBFdmVudFR5cGU+IHtcbiAgdHlwZTogVDtcbiAgZGF0YTogRXZlbnRSZWdpc3RyeVtUXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudEVtaXR0ZXJSZWdpc3RyeSBleHRlbmRzIEV2ZW50UmVnaXN0cnkge1xuICBsYXp5OiBFdmVudEl0ZW08RXZlbnRUeXBlPltdO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmV4cG9ydCBjb25zdCBNQVhfRkVUQ0hfUEFHRV9QRVJfU0VTU0lPTiA9IDI1O1xuZXhwb3J0IGNvbnN0IE1JTl9fTlVNX0hJU1RPUllfUEVSX0FDQ09VTlQgPSA1MDtcbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBDaGFpblNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UnO1xuaW1wb3J0IHsgaXNTYW1lQWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuXG5pbXBvcnQgeyBWZWMgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMnO1xuaW1wb3J0IHsgRXZlbnRSZWNvcmQgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMvaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBlbnVtIEhpc3RvcnlSZWNvdmVyU3RhdHVzIHtcbiAgU1VDQ0VTUyA9ICdTVUNDRVNTJyxcbiAgRkFJTEVEID0gJ0ZBSUxFRCcsXG4gIEFQSV9JTkFDVElWRSA9ICdBUElfSU5BQ1RJVkUnLFxuICBMQUNLX0lORk8gPSAnTEFDS19JTkZPJyxcbiAgRkFJTF9ERVRFQ1QgPSAnRkFJTF9ERVRFQ1QnLFxuICBVTktOT1dOID0gJ1VOS05PV04nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNhY3Rpb25SZWNvdmVyUmVzdWx0IHtcbiAgc3RhdHVzOiBIaXN0b3J5UmVjb3ZlclN0YXR1cztcbiAgZXh0cmluc2ljSGFzaD86IHN0cmluZztcbiAgYmxvY2tIYXNoPzogc3RyaW5nO1xuICBibG9ja051bWJlcj86IG51bWJlcjtcbn1cblxuY29uc3QgQkxPQ0tfTElNSVQgPSA2O1xuXG5jb25zdCBzdWJzdHJhdGVSZWNvdmVyID0gYXN5bmMgKGhpc3Rvcnk6IFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0sIGNoYWluU2VydmljZTogQ2hhaW5TZXJ2aWNlKTogUHJvbWlzZTxUcmFuc2FjdGlvblJlY292ZXJSZXN1bHQ+ID0+IHtcbiAgY29uc3QgeyBhZGRyZXNzLCBibG9ja0hhc2gsIGNoYWluLCBleHRyaW5zaWNIYXNoLCBmcm9tLCBub25jZSwgc3RhcnRCbG9jayB9ID0gaGlzdG9yeTtcbiAgY29uc3QgcmVzdWx0OiBUcmFuc2FjdGlvblJlY292ZXJSZXN1bHQgPSB7XG4gICAgc3RhdHVzOiBIaXN0b3J5UmVjb3ZlclN0YXR1cy5VTktOT1dOXG4gIH07XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBzdWJzdHJhdGVBcGkgPSBjaGFpblNlcnZpY2UuZ2V0U3Vic3RyYXRlQXBpKGNoYWluKTtcblxuICAgIGlmIChzdWJzdHJhdGVBcGkpIHtcbiAgICAgIGNvbnN0IF9hcGkgPSBhd2FpdCBzdWJzdHJhdGVBcGkuaXNSZWFkeTtcbiAgICAgIGNvbnN0IGFwaSA9IF9hcGkuYXBpO1xuXG4gICAgICBpZiAoIWJsb2NrSGFzaCkge1xuICAgICAgICBpZiAoIW5vbmNlIHx8ICFzdGFydEJsb2NrKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYEZhaWwgdG8gZmluZCBleHRyaW5zaWMgZm9yICR7YWRkcmVzc30gb24gJHtjaGFpbn06IFdpdGggbm9uY2UgJHtub25jZSB8fCAndW5kZWZpbmVkJ30gZnJvbSBibG9jayAke3N0YXJ0QmxvY2sgfHwgJ3VuZGVmaW5lZCd9YCk7XG5cbiAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IEhpc3RvcnlSZWNvdmVyU3RhdHVzLkxBQ0tfSU5GTyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3VycmVudEJsb2NrID0gKGF3YWl0IGFwaS5xdWVyeS5zeXN0ZW0ubnVtYmVyKCkpLnRvUHJpbWl0aXZlKCkgYXMgbnVtYmVyO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAxLCBmb3VuZCA9IGZhbHNlOyBpIDwgQkxPQ0tfTElNSVQgJiYgIWZvdW5kICYmIHN0YXJ0QmxvY2sgKyBpIDw9IGN1cnJlbnRCbG9jazsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgYmxvY2tIYXNoID0gKGF3YWl0IGFwaS5ycGMuY2hhaW4uZ2V0QmxvY2tIYXNoKHN0YXJ0QmxvY2sgKyBpKSkudG9IZXgoKTtcbiAgICAgICAgICBjb25zdCBibG9jayA9IGF3YWl0IGFwaS5ycGMuY2hhaW4uZ2V0QmxvY2soYmxvY2tIYXNoKTtcblxuICAgICAgICAgIGNvbnN0IGV4dHJpbnNpY3MgPSBibG9jay5ibG9jay5leHRyaW5zaWNzO1xuICAgICAgICAgIGxldCBpbmRleDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgICAgZm9yIChjb25zdCBbaWR4LCBleHRyaW5zaWNdIG9mIE9iamVjdC5lbnRyaWVzKGV4dHJpbnNpY3MpKSB7XG4gICAgICAgICAgICBpZiAoZXh0cmluc2ljLnNpZ25lciAmJiBpc1NhbWVBZGRyZXNzKGZyb20sIGV4dHJpbnNpYy5zaWduZXIudG9TdHJpbmcoKSkgJiYgbm9uY2UgPT09IGV4dHJpbnNpYy5ub25jZS50b051bWJlcigpKSB7XG4gICAgICAgICAgICAgIGluZGV4ID0gcGFyc2VJbnQoaWR4KTtcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICByZXN1bHQuZXh0cmluc2ljSGFzaCA9IGV4dHJpbnNpYy5oYXNoLnRvSGV4KCk7XG4gICAgICAgICAgICAgIHJlc3VsdC5ibG9ja0hhc2ggPSBibG9jay5ibG9jay5oYXNoLnRvSGV4KCk7XG4gICAgICAgICAgICAgIHJlc3VsdC5ibG9ja051bWJlciA9IGJsb2NrLmJsb2NrLmhlYWRlci5udW1iZXIudG9OdW1iZXIoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFsbEV2ZW50czogVmVjPEV2ZW50UmVjb3JkPiA9IGF3YWl0IGFwaS5xdWVyeS5zeXN0ZW0uZXZlbnRzLmF0KGJsb2NrSGFzaCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IGFsbEV2ZW50c1xuICAgICAgICAgICAgICAuZmlsdGVyKCh7IHBoYXNlIH0pID0+XG4gICAgICAgICAgICAgICAgcGhhc2UuaXNBcHBseUV4dHJpbnNpYyAmJlxuICAgICAgICAgICAgICAgIHBoYXNlLmFzQXBwbHlFeHRyaW5zaWMuZXEoaW5kZXgpXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgeyBldmVudCB9IG9mIGV2ZW50cykge1xuICAgICAgICAgICAgICBpZiAoYXBpLmV2ZW50cy5zeXN0ZW0uRXh0cmluc2ljU3VjY2Vzcy5pcyhldmVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5yZXN1bHQsIHN0YXR1czogSGlzdG9yeVJlY292ZXJTdGF0dXMuU1VDQ0VTUyB9O1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFwaS5ldmVudHMuc3lzdGVtLkV4dHJpbnNpY0ZhaWxlZC5pcyhldmVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5yZXN1bHQsIHN0YXR1czogSGlzdG9yeVJlY292ZXJTdGF0dXMuRkFJTEVEIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJsb2NrID0gYXdhaXQgYXBpLnJwYy5jaGFpbi5nZXRCbG9jayhibG9ja0hhc2gpO1xuICAgICAgICBjb25zdCBhbGxFdmVudHM6IFZlYzxFdmVudFJlY29yZD4gPSBhd2FpdCBhcGkucXVlcnkuc3lzdGVtLmV2ZW50cy5hdChibG9ja0hhc2gpO1xuXG4gICAgICAgIGNvbnN0IGV4dHJpbnNpY3MgPSBibG9jay5ibG9jay5leHRyaW5zaWNzO1xuICAgICAgICBsZXQgaW5kZXg6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAgICAgICBmb3IgKGNvbnN0IFtpZHgsIGV4dHJpbnNpY10gb2YgT2JqZWN0LmVudHJpZXMoZXh0cmluc2ljcykpIHtcbiAgICAgICAgICBpZiAoZXh0cmluc2ljSGFzaCA9PT0gZXh0cmluc2ljLmhhc2gudG9IZXgoKSkge1xuICAgICAgICAgICAgaW5kZXggPSBwYXJzZUludChpZHgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRmFpbCB0byBmaW5kIGV4dHJpbnNpYyAke2V4dHJpbnNpY0hhc2h9IG9uICR7Y2hhaW59YCk7XG5cbiAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IEhpc3RvcnlSZWNvdmVyU3RhdHVzLkZBSUxfREVURUNUIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldmVudHMgPSBhbGxFdmVudHNcbiAgICAgICAgICAuZmlsdGVyKCh7IHBoYXNlIH0pID0+XG4gICAgICAgICAgICBwaGFzZS5pc0FwcGx5RXh0cmluc2ljICYmXG4gICAgICAgICAgICBwaGFzZS5hc0FwcGx5RXh0cmluc2ljLmVxKGluZGV4KVxuICAgICAgICAgICk7XG5cbiAgICAgICAgZm9yIChjb25zdCB7IGV2ZW50IH0gb2YgZXZlbnRzKSB7XG4gICAgICAgICAgaWYgKGFwaS5ldmVudHMuc3lzdGVtLkV4dHJpbnNpY1N1Y2Nlc3MuaXMoZXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5yZXN1bHQsIHN0YXR1czogSGlzdG9yeVJlY292ZXJTdGF0dXMuU1VDQ0VTUyB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAoYXBpLmV2ZW50cy5zeXN0ZW0uRXh0cmluc2ljRmFpbGVkLmlzKGV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4ucmVzdWx0LCBzdGF0dXM6IEhpc3RvcnlSZWNvdmVyU3RhdHVzLkZBSUxFRCB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBzdGF0dXM6IEhpc3RvcnlSZWNvdmVyU3RhdHVzLkZBSUxfREVURUNUIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWwgdG8gdXBkYXRlIGhpc3RvcnkgJHtjaGFpbn0tJHtleHRyaW5zaWNIYXNofTogQXBpIG5vdCBhY3RpdmVgKTtcblxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBIaXN0b3J5UmVjb3ZlclN0YXR1cy5BUElfSU5BQ1RJVkUgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGBGYWlsIHRvIHVwZGF0ZSBoaXN0b3J5ICR7Y2hhaW59LSR7ZXh0cmluc2ljSGFzaH06YCwgKGUgYXMgRXJyb3IpLm1lc3NhZ2UpO1xuXG4gICAgcmV0dXJuIHsgc3RhdHVzOiBIaXN0b3J5UmVjb3ZlclN0YXR1cy5VTktOT1dOIH07XG4gIH1cbn07XG5cbmNvbnN0IGV2bVJlY292ZXIgPSBhc3luYyAoaGlzdG9yeTogVHJhbnNhY3Rpb25IaXN0b3J5SXRlbSwgY2hhaW5TZXJ2aWNlOiBDaGFpblNlcnZpY2UpOiBQcm9taXNlPFRyYW5zYWN0aW9uUmVjb3ZlclJlc3VsdD4gPT4ge1xuICBjb25zdCB7IGFkZHJlc3MsIGNoYWluLCBleHRyaW5zaWNIYXNoLCBmcm9tLCBub25jZSwgc3RhcnRCbG9jayB9ID0gaGlzdG9yeTtcblxuICBjb25zdCByZXN1bHQ6IFRyYW5zYWN0aW9uUmVjb3ZlclJlc3VsdCA9IHtcbiAgICBzdGF0dXM6IEhpc3RvcnlSZWNvdmVyU3RhdHVzLlVOS05PV05cbiAgfTtcblxuICB0cnkge1xuICAgIGNvbnN0IGV2bUFwaSA9IGNoYWluU2VydmljZS5nZXRFdm1BcGkoY2hhaW4pO1xuXG4gICAgaWYgKGV2bUFwaSkge1xuICAgICAgY29uc3QgX2FwaSA9IGF3YWl0IGV2bUFwaS5pc1JlYWR5O1xuICAgICAgY29uc3QgYXBpID0gX2FwaS5hcGk7XG5cbiAgICAgIGlmIChleHRyaW5zaWNIYXNoKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uUmVjZWlwdCA9IGF3YWl0IGFwaS5ldGguZ2V0VHJhbnNhY3Rpb25SZWNlaXB0KGV4dHJpbnNpY0hhc2gpO1xuXG4gICAgICAgIHJldHVybiB7IC4uLnJlc3VsdCwgc3RhdHVzOiB0cmFuc2FjdGlvblJlY2VpcHQuc3RhdHVzID8gSGlzdG9yeVJlY292ZXJTdGF0dXMuU1VDQ0VTUyA6IEhpc3RvcnlSZWNvdmVyU3RhdHVzLkZBSUxFRCB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFub25jZSB8fCAhc3RhcnRCbG9jaykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBGYWlsIHRvIGZpbmQgZXh0cmluc2ljIGZvciAke2FkZHJlc3N9IG9uICR7Y2hhaW59OiBXaXRoIG5vbmNlICR7bm9uY2UgfHwgJ3VuZGVmaW5lZCd9IGZyb20gYmxvY2sgJHtzdGFydEJsb2NrIHx8ICd1bmRlZmluZWQnfWApO1xuXG4gICAgICAgICAgcmV0dXJuIHsgLi4ucmVzdWx0LCBzdGF0dXM6IEhpc3RvcnlSZWNvdmVyU3RhdHVzLkxBQ0tfSU5GTyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3VycmVudEJsb2NrID0gYXdhaXQgYXBpLmV0aC5nZXRCbG9ja051bWJlcigpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAxLCBmb3VuZCA9IGZhbHNlOyBpIDwgQkxPQ0tfTElNSVQgJiYgIWZvdW5kICYmIHN0YXJ0QmxvY2sgKyBpIDw9IGN1cnJlbnRCbG9jazsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgYmxvY2sgPSBhd2FpdCBhcGkuZXRoLmdldEJsb2NrKHN0YXJ0QmxvY2sgKyBpLCB0cnVlKTtcblxuICAgICAgICAgIGZvciAoY29uc3QgdHJhbnNhY3Rpb24gb2YgYmxvY2sudHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAoaXNTYW1lQWRkcmVzcyh0cmFuc2FjdGlvbi5mcm9tLCBmcm9tKSAmJiBub25jZSA9PT0gdHJhbnNhY3Rpb24ubm9uY2UpIHtcbiAgICAgICAgICAgICAgcmVzdWx0LmV4dHJpbnNpY0hhc2ggPSB0cmFuc2FjdGlvbi5oYXNoO1xuICAgICAgICAgICAgICByZXN1bHQuYmxvY2tIYXNoID0gYmxvY2suaGFzaDtcbiAgICAgICAgICAgICAgcmVzdWx0LmJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyO1xuICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyZXN1bHQuZXh0cmluc2ljSGFzaCkge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25SZWNlaXB0ID0gYXdhaXQgYXBpLmV0aC5nZXRUcmFuc2FjdGlvblJlY2VpcHQocmVzdWx0LmV4dHJpbnNpY0hhc2gpO1xuXG4gICAgICAgICAgICByZXR1cm4geyAuLi5yZXN1bHQsIHN0YXR1czogdHJhbnNhY3Rpb25SZWNlaXB0LnN0YXR1cyA/IEhpc3RvcnlSZWNvdmVyU3RhdHVzLlNVQ0NFU1MgOiBIaXN0b3J5UmVjb3ZlclN0YXR1cy5GQUlMRUQgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBIaXN0b3J5UmVjb3ZlclN0YXR1cy5GQUlMX0RFVEVDVCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsIHRvIHVwZGF0ZSBoaXN0b3J5ICR7Y2hhaW59LSR7ZXh0cmluc2ljSGFzaH06IEFwaSBub3QgYWN0aXZlYCk7XG5cbiAgICAgIHJldHVybiB7IHN0YXR1czogSGlzdG9yeVJlY292ZXJTdGF0dXMuQVBJX0lOQUNUSVZFIH07XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihgRmFpbCB0byB1cGRhdGUgaGlzdG9yeSAke2NoYWlufS0ke2V4dHJpbnNpY0hhc2h9OmAsIChlIGFzIEVycm9yKS5tZXNzYWdlKTtcblxuICAgIHJldHVybiB7IHN0YXR1czogSGlzdG9yeVJlY292ZXJTdGF0dXMuVU5LTk9XTiB9O1xuICB9XG59O1xuXG4vLyB1bmRlZmluZWQ6IENhbm5vdCBjaGVjayBzdGF0dXNcbi8vIHRydWU6IFRyYW5zYWN0aW9uIHN1Y2Nlc3Ncbi8vIGZhbHNlOiBUcmFuc2FjdGlvbiBmYWlsZWRcbmV4cG9ydCBjb25zdCBoaXN0b3J5UmVjb3ZlciA9IGFzeW5jIChoaXN0b3J5OiBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtLCBjaGFpblNlcnZpY2U6IENoYWluU2VydmljZSk6IFByb21pc2U8VHJhbnNhY3Rpb25SZWNvdmVyUmVzdWx0PiA9PiB7XG4gIGNvbnN0IHsgY2hhaW5UeXBlIH0gPSBoaXN0b3J5O1xuXG4gIGlmIChjaGFpblR5cGUpIHtcbiAgICBjb25zdCBjaGVja0Z1bmN0aW9uID0gY2hhaW5UeXBlID09PSAnc3Vic3RyYXRlJyA/IHN1YnN0cmF0ZVJlY292ZXIgOiBldm1SZWNvdmVyO1xuXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrRnVuY3Rpb24oaGlzdG9yeSwgY2hhaW5TZXJ2aWNlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyBzdGF0dXM6IEhpc3RvcnlSZWNvdmVyU3RhdHVzLkxBQ0tfSU5GTyB9O1xuICB9XG59O1xuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBFeHRyaW5zaWNTdGF0dXMsIFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IENST05fUkVDT1ZFUl9ISVNUT1JZX0lOVEVSVkFMLCBDUk9OX1JFRlJFU0hfSElTVE9SWV9JTlRFUlZBTCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvY29uc3RhbnRzJztcbmltcG9ydCB7IENyb25TZXJ2aWNlSW50ZXJmYWNlLCBQZXJzaXN0RGF0YVNlcnZpY2VJbnRlcmZhY2UsIFNlcnZpY2VTdGF0dXMsIFN0b3BwYWJsZVNlcnZpY2VJbnRlcmZhY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2Jhc2UvdHlwZXMnO1xuaW1wb3J0IHsgQ2hhaW5TZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlJztcbmltcG9ydCB7IEV2ZW50U2VydmljZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvZXZlbnQtc2VydmljZSc7XG5pbXBvcnQgeyBoaXN0b3J5UmVjb3ZlciwgSGlzdG9yeVJlY292ZXJTdGF0dXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2hpc3Rvcnktc2VydmljZS9oZWxwZXJzL3JlY292ZXJIaXN0b3J5U3RhdHVzJztcbmltcG9ydCB7IEtleXJpbmdTZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9rZXlyaW5nLXNlcnZpY2UnO1xuaW1wb3J0IERhdGFiYXNlU2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9EYXRhYmFzZVNlcnZpY2UnO1xuaW1wb3J0IHsgY3JlYXRlUHJvbWlzZUhhbmRsZXIgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHsga2V5cmluZyB9IGZyb20gJ0BzdWJ3YWxsZXQvdWkta2V5cmluZyc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgZmV0Y2hNdWx0aUNoYWluSGlzdG9yaWVzIH0gZnJvbSAnLi9zdWJzcXVpZC1tdWx0aS1jaGFpbi1oaXN0b3J5JztcblxuZXhwb3J0IGNsYXNzIEhpc3RvcnlTZXJ2aWNlIGltcGxlbWVudHMgU3RvcHBhYmxlU2VydmljZUludGVyZmFjZSwgUGVyc2lzdERhdGFTZXJ2aWNlSW50ZXJmYWNlLCBDcm9uU2VydmljZUludGVyZmFjZSB7XG4gIHByaXZhdGUgaGlzdG9yeVN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxUcmFuc2FjdGlvbkhpc3RvcnlJdGVtW10+ID0gbmV3IEJlaGF2aW9yU3ViamVjdChbXSBhcyBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtW10pO1xuICAjbmVlZFJlY292ZXJ5SGlzdG9yaWVzOiBSZWNvcmQ8c3RyaW5nLCBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtPiA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yIChwcml2YXRlIGRiU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlLCBwcml2YXRlIGNoYWluU2VydmljZTogQ2hhaW5TZXJ2aWNlLCBwcml2YXRlIGV2ZW50U2VydmljZTogRXZlbnRTZXJ2aWNlLCBwcml2YXRlIGtleXJpbmdTZXJ2aWNlOiBLZXlyaW5nU2VydmljZSkge1xuICAgIHRoaXMuaW5pdCgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG5cbiAgcHJpdmF0ZSBmZXRjaFByb21pc2U6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbnRlcnZhbDogTm9kZUpTLlRpbWVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBwcml2YXRlIHJlY292ZXJJbnRlcnZhbDogTm9kZUpTLlRpbWVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hBbmRMb2FkSGlzdG9yaWVzIChhZGRyZXNzZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxUcmFuc2FjdGlvbkhpc3RvcnlJdGVtW10+IHtcbiAgICBpZiAoIWFkZHJlc3NlcyB8fCBhZGRyZXNzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgY2hhaW5NYXAgPSB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9NYXAoKTtcblxuICAgIC8vIFF1ZXJ5IGRhdGEgZnJvbSBzdWJzY2FuIG9yIGFueSBpbmRleGVyXG4gICAgY29uc3QgaGlzdG9yeVJlY29yZHMgPSBhd2FpdCBmZXRjaE11bHRpQ2hhaW5IaXN0b3JpZXMoYWRkcmVzc2VzLCBjaGFpbk1hcCk7XG5cbiAgICAvLyBGaWxsIGFkZGl0aW9uYWwgaW5mb1xuICAgIGNvbnN0IGFjY291bnRNYXAgPSBPYmplY3QuZW50cmllcyh0aGlzLmtleXJpbmdTZXJ2aWNlLmFjY291bnRzKS5yZWR1Y2UoKG1hcCwgW2FkZHJlc3MsIGFjY291bnRdKSA9PiB7XG4gICAgICBtYXBbYWRkcmVzcy50b0xvd2VyQ2FzZSgpXSA9IGFjY291bnQuanNvbi5tZXRhLm5hbWUgfHwgYWRkcmVzcztcblxuICAgICAgcmV0dXJuIG1hcDtcbiAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcblxuICAgIGhpc3RvcnlSZWNvcmRzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuICAgICAgcmVjb3JkLmZyb21OYW1lID0gYWNjb3VudE1hcFtyZWNvcmQuZnJvbT8udG9Mb3dlckNhc2UoKV07XG4gICAgICByZWNvcmQudG9OYW1lID0gYWNjb3VudE1hcFtyZWNvcmQudG8/LnRvTG93ZXJDYXNlKCldO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5hZGRIaXN0b3J5SXRlbXMoaGlzdG9yeVJlY29yZHMpO1xuXG4gICAgcmV0dXJuIGhpc3RvcnlSZWNvcmRzO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldEhpc3RvcmllcyAoKSB7XG4gICAgY29uc3QgYWRkcmVzc0xpc3QgPSBrZXlyaW5nLmdldEFjY291bnRzKCkubWFwKChhKSA9PiBhLmFkZHJlc3MpO1xuXG4gICAgaWYgKCF0aGlzLmZldGNoUHJvbWlzZSkge1xuICAgICAgdGhpcy5mZXRjaFByb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLmZldGNoQW5kTG9hZEhpc3RvcmllcyhhZGRyZXNzTGlzdCk7XG4gICAgICAgIGNvbnN0IGhpc3RvcmllcyA9IGF3YWl0IHRoaXMuZGJTZXJ2aWNlLmdldEhpc3RvcmllcygpO1xuXG4gICAgICAgIHRoaXMuaGlzdG9yeVN1YmplY3QubmV4dChoaXN0b3JpZXMpO1xuICAgICAgfSkoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuaGlzdG9yeVN1YmplY3QuZ2V0VmFsdWUoKSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0SGlzdG9yeVN1YmplY3QgKCkge1xuICAgIGF3YWl0IHRoaXMuZ2V0SGlzdG9yaWVzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5U3ViamVjdDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUhpc3RvcmllcyAoY2hhaW46IHN0cmluZywgZXh0cmluc2ljSGFzaDogc3RyaW5nLCB1cGRhdGVEYXRhOiBQYXJ0aWFsPFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0+KSB7XG4gICAgY29uc3QgZXhpc3RlZFJlY29yZHMgPSBhd2FpdCB0aGlzLmRiU2VydmljZS5nZXRIaXN0b3JpZXMoeyBjaGFpbiwgZXh0cmluc2ljSGFzaCB9KTtcbiAgICBjb25zdCB1cGRhdGVkUmVjb3JkcyA9IGV4aXN0ZWRSZWNvcmRzLm1hcCgocikgPT4ge1xuICAgICAgcmV0dXJuIHsgLi4uciwgLi4udXBkYXRlRGF0YSB9O1xuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5hZGRIaXN0b3J5SXRlbXModXBkYXRlZFJlY29yZHMpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlSGlzdG9yeUJ5RXh0cmluc2ljSGFzaCAoZXh0cmluc2ljSGFzaDogc3RyaW5nLCB1cGRhdGVEYXRhOiBQYXJ0aWFsPFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0+KSB7XG4gICAgYXdhaXQgdGhpcy5kYlNlcnZpY2UudXBkYXRlSGlzdG9yeUJ5RXh0cmluc2ljSGFzaChleHRyaW5zaWNIYXNoLCB1cGRhdGVEYXRhKTtcbiAgICB0aGlzLmhpc3RvcnlTdWJqZWN0Lm5leHQoYXdhaXQgdGhpcy5kYlNlcnZpY2UuZ2V0SGlzdG9yaWVzKCkpO1xuICB9XG5cbiAgLy8gSW5zZXJ0IGhpc3Rvcnkgd2l0aG91dCBjaGVjayBvdmVycmlkZSBvcmlnaW4gJ2FwcCdcbiAgYXN5bmMgaW5zZXJ0SGlzdG9yaWVzIChoaXN0b3J5SXRlbXM6IFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW1bXSkge1xuICAgIGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnVwc2VydEhpc3RvcnkoaGlzdG9yeUl0ZW1zKTtcbiAgICB0aGlzLmhpc3RvcnlTdWJqZWN0Lm5leHQoYXdhaXQgdGhpcy5kYlNlcnZpY2UuZ2V0SGlzdG9yaWVzKCkpO1xuICB9XG5cbiAgLy8gSW5zZXJ0IGhpc3Rvcnkgd2l0aCBjaGVjayBvdmVycmlkZSBvcmlnaW4gJ2FwcCdcbiAgYXN5bmMgYWRkSGlzdG9yeUl0ZW1zIChoaXN0b3J5SXRlbXM6IFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW1bXSkge1xuICAgIC8vIFByZXZlbnQgb3ZlcnJpZGUgcmVjb3JkIHdpdGggb3JpZ2luYWwgaXMgJ2FwcCdcbiAgICBjb25zdCBhcHBSZWNvcmRzID0gdGhpcy5oaXN0b3J5U3ViamVjdC52YWx1ZS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0ub3JpZ2luID09PSAnYXBwJyk7XG4gICAgY29uc3QgZXhjbHVkZUtleXMgPSBhcHBSZWNvcmRzLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgcmV0dXJuIGAke2l0ZW0uY2hhaW59LSR7aXRlbS5leHRyaW5zaWNIYXNofWA7XG4gICAgfSk7XG5cbiAgICBjb25zdCB1cGRhdGVSZWNvcmRzID0gaGlzdG9yeUl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gYCR7aXRlbS5jaGFpbn0tJHtpdGVtLmV4dHJpbnNpY0hhc2h9YDtcblxuICAgICAgcmV0dXJuIGl0ZW0ub3JpZ2luID09PSAnYXBwJyB8fCAhZXhjbHVkZUtleXMuaW5jbHVkZXMoa2V5KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnVwc2VydEhpc3RvcnkodXBkYXRlUmVjb3Jkcyk7XG4gICAgdGhpcy5oaXN0b3J5U3ViamVjdC5uZXh0KGF3YWl0IHRoaXMuZGJTZXJ2aWNlLmdldEhpc3RvcmllcygpKTtcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUhpc3RvcnlCeUFkZHJlc3MgKGFkZHJlc3M6IHN0cmluZykge1xuICAgIGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnN0b3Jlcy50cmFuc2FjdGlvbi5yZW1vdmVBbGxCeUFkZHJlc3MoYWRkcmVzcyk7XG4gICAgdGhpcy5oaXN0b3J5U3ViamVjdC5uZXh0KGF3YWl0IHRoaXMuZGJTZXJ2aWNlLmdldEhpc3RvcmllcygpKTtcbiAgfVxuXG4gIHN0YXR1czogU2VydmljZVN0YXR1cyA9IFNlcnZpY2VTdGF0dXMuTk9UX0lOSVRJQUxJWkVEO1xuXG4gIGFzeW5jIGxvYWREYXRhICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBoaXN0b3JpZXMgPSBhd2FpdCB0aGlzLmRiU2VydmljZS5nZXRIaXN0b3JpZXMoKTtcblxuICAgIHRoaXMuaGlzdG9yeVN1YmplY3QubmV4dChoaXN0b3JpZXMpO1xuICB9XG5cbiAgYXN5bmMgcGVyc2lzdERhdGEgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuZGJTZXJ2aWNlLnVwc2VydEhpc3RvcnkodGhpcy5oaXN0b3J5U3ViamVjdC52YWx1ZSk7XG4gIH1cblxuICBhc3luYyBzdGFydENyb24gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuZ2V0SGlzdG9yaWVzKCk7XG5cbiAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5nZXRIaXN0b3JpZXMoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9LCBDUk9OX1JFRlJFU0hfSElTVE9SWV9JTlRFUlZBTCk7XG4gIH1cblxuICBzdG9wQ3JvbiAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaW50ZXJ2YWwpO1xuICAgIHRoaXMuZmV0Y2hQcm9taXNlID0gbnVsbDtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0UmVjb3Zlckhpc3RvcmllcyAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5yZWNvdmVySGlzdG9yaWVzKCk7XG5cbiAgICB0aGlzLnJlY292ZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMucmVjb3Zlckhpc3RvcmllcygpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0sIENST05fUkVDT1ZFUl9ISVNUT1JZX0lOVEVSVkFMKTtcbiAgfVxuXG4gIHN0b3BSZWNvdmVySGlzdG9yaWVzICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjbGVhckludGVydmFsKHRoaXMucmVjb3ZlckludGVydmFsKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGFzeW5jIHJlY292ZXJIaXN0b3JpZXMgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGxpc3Q6IFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW1bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwcm9jZXNzaW5nSGlzdG9yeSBvZiBPYmplY3QudmFsdWVzKHRoaXMuI25lZWRSZWNvdmVyeUhpc3RvcmllcykpIHtcbiAgICAgIGNvbnN0IGNoYWluU3RhdGUgPSB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpblN0YXRlQnlLZXkocHJvY2Vzc2luZ0hpc3RvcnkuY2hhaW4pO1xuXG4gICAgICBpZiAoY2hhaW5TdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgbGlzdC5wdXNoKHByb2Nlc3NpbmdIaXN0b3J5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxpc3QubGVuZ3RoID49IDEwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHByb21pc2VzID0gbGlzdC5tYXAoKGhpc3RvcnkpID0+IGhpc3RvcnlSZWNvdmVyKGhpc3RvcnksIHRoaXMuY2hhaW5TZXJ2aWNlKSk7XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXG4gICAgcmVzdWx0cy5mb3JFYWNoKChyZWNvdmVyUmVzdWx0LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudEV4dHJpbnNpY0hhc2ggPSBsaXN0W2luZGV4XS5leHRyaW5zaWNIYXNoO1xuXG4gICAgICBjb25zdCB1cGRhdGVEYXRhOiBQYXJ0aWFsPFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0+ID0ge1xuICAgICAgICAuLi5yZWNvdmVyUmVzdWx0LFxuICAgICAgICBzdGF0dXM6IEV4dHJpbnNpY1N0YXR1cy5VTktOT1dOXG4gICAgICB9O1xuXG4gICAgICBzd2l0Y2ggKHJlY292ZXJSZXN1bHQuc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgSGlzdG9yeVJlY292ZXJTdGF0dXMuQVBJX0lOQUNUSVZFOlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEhpc3RvcnlSZWNvdmVyU3RhdHVzLkZBSUxFRDpcbiAgICAgICAgY2FzZSBIaXN0b3J5UmVjb3ZlclN0YXR1cy5TVUNDRVNTOlxuICAgICAgICAgIHVwZGF0ZURhdGEuc3RhdHVzID0gcmVjb3ZlclJlc3VsdC5zdGF0dXMgPT09IEhpc3RvcnlSZWNvdmVyU3RhdHVzLlNVQ0NFU1MgPyBFeHRyaW5zaWNTdGF0dXMuU1VDQ0VTUyA6IEV4dHJpbnNpY1N0YXR1cy5GQUlMO1xuICAgICAgICAgIHRoaXMudXBkYXRlSGlzdG9yeUJ5RXh0cmluc2ljSGFzaChjdXJyZW50RXh0cmluc2ljSGFzaCwgdXBkYXRlRGF0YSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuI25lZWRSZWNvdmVyeUhpc3Rvcmllc1tjdXJyZW50RXh0cmluc2ljSGFzaF07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhpcy51cGRhdGVIaXN0b3J5QnlFeHRyaW5zaWNIYXNoKGN1cnJlbnRFeHRyaW5zaWNIYXNoLCB1cGRhdGVEYXRhKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICBkZWxldGUgdGhpcy4jbmVlZFJlY292ZXJ5SGlzdG9yaWVzW2N1cnJlbnRFeHRyaW5zaWNIYXNoXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICghT2JqZWN0LmtleXModGhpcy4jbmVlZFJlY292ZXJ5SGlzdG9yaWVzKS5sZW5ndGgpIHtcbiAgICAgIGF3YWl0IHRoaXMuc3RvcFJlY292ZXJIaXN0b3JpZXMoKTtcbiAgICB9XG4gIH1cblxuICBzdGFydFByb21pc2VIYW5kbGVyID0gY3JlYXRlUHJvbWlzZUhhbmRsZXI8dm9pZD4oKTtcblxuICBhc3luYyBpbml0ICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnN0YXR1cyA9IFNlcnZpY2VTdGF0dXMuSU5JVElBTElaSU5HO1xuICAgIGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICBQcm9taXNlLmFsbChbdGhpcy5ldmVudFNlcnZpY2Uud2FpdEtleXJpbmdSZWFkeSwgdGhpcy5ldmVudFNlcnZpY2Uud2FpdENoYWluUmVhZHldKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuZ2V0SGlzdG9yaWVzKCkuY2F0Y2goY29uc29sZS5sb2cpO1xuICAgICAgdGhpcy5yZWNvdmVyUHJvY2Vzc2luZ0hpc3RvcnkoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuICAgICAgdGhpcy5ldmVudFNlcnZpY2Uub24oJ2FjY291bnQuYWRkJywgKCkgPT4ge1xuICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuc3RvcENyb24oKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnN0YXJ0Q3JvbigpO1xuICAgICAgICB9KSgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmV2ZW50U2VydmljZS5vbignYWNjb3VudC5yZW1vdmUnLCAoYWRkcmVzcykgPT4ge1xuICAgICAgICB0aGlzLnJlbW92ZUhpc3RvcnlCeUFkZHJlc3MoYWRkcmVzcykuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICB9KTtcbiAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB0aGlzLnN0YXR1cyA9IFNlcnZpY2VTdGF0dXMuSU5JVElBTElaRUQ7XG4gIH1cblxuICBhc3luYyByZWNvdmVyUHJvY2Vzc2luZ0hpc3RvcnkgKCkge1xuICAgIGNvbnN0IGhpc3RvcmllcyA9IGF3YWl0IHRoaXMuZGJTZXJ2aWNlLmdldEhpc3RvcmllcygpO1xuXG4gICAgdGhpcy4jbmVlZFJlY292ZXJ5SGlzdG9yaWVzID0ge307XG5cbiAgICBoaXN0b3JpZXMuZmlsdGVyKChoaXN0b3J5KSA9PiB7XG4gICAgICByZXR1cm4gW0V4dHJpbnNpY1N0YXR1cy5QUk9DRVNTSU5HLCBFeHRyaW5zaWNTdGF0dXMuU1VCTUlUVElOR10uaW5jbHVkZXMoaGlzdG9yeS5zdGF0dXMpO1xuICAgIH0pLmZvckVhY2goKGhpc3RvcnkpID0+IHtcbiAgICAgIHRoaXMuI25lZWRSZWNvdmVyeUhpc3Rvcmllc1toaXN0b3J5LmV4dHJpbnNpY0hhc2hdID0gaGlzdG9yeTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlY292ZXJOdW1iZXIgPSBPYmplY3Qua2V5cyh0aGlzLiNuZWVkUmVjb3ZlcnlIaXN0b3JpZXMpLmxlbmd0aDtcblxuICAgIGlmIChyZWNvdmVyTnVtYmVyID4gMCkge1xuICAgICAgY29uc29sZS5sb2coYFJlY292ZXIgJHtyZWNvdmVyTnVtYmVyfSBwcm9jZXNzaW5nIGhpc3RvcnlgKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXJ0UmVjb3Zlckhpc3RvcmllcygpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnQgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gU2VydmljZVN0YXR1cy5TVEFSVEVEKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLmV2ZW50U2VydmljZS53YWl0S2V5cmluZ1JlYWR5LCB0aGlzLmV2ZW50U2VydmljZS53YWl0Q2hhaW5SZWFkeV0pO1xuICAgICAgdGhpcy5zdGFydFByb21pc2VIYW5kbGVyID0gY3JlYXRlUHJvbWlzZUhhbmRsZXI8dm9pZD4oKTtcbiAgICAgIHRoaXMuc3RhdHVzID0gU2VydmljZVN0YXR1cy5TVEFSVElORztcbiAgICAgIGF3YWl0IHRoaXMuc3RhcnRDcm9uKCk7XG4gICAgICB0aGlzLnN0YXR1cyA9IFNlcnZpY2VTdGF0dXMuU1RBUlRFRDtcbiAgICAgIHRoaXMuc3RhcnRQcm9taXNlSGFuZGxlci5yZXNvbHZlKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5zdGFydFByb21pc2VIYW5kbGVyLnJlamVjdChlKTtcbiAgICB9XG4gIH1cblxuICB3YWl0Rm9yU3RhcnRlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnRQcm9taXNlSGFuZGxlci5wcm9taXNlO1xuICB9XG5cbiAgc3RvcFByb21pc2VIYW5kbGVyID0gY3JlYXRlUHJvbWlzZUhhbmRsZXI8dm9pZD4oKTtcblxuICBhc3luYyBzdG9wICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zdG9wUHJvbWlzZUhhbmRsZXIgPSBjcmVhdGVQcm9taXNlSGFuZGxlcjx2b2lkPigpO1xuICAgICAgdGhpcy5zdGF0dXMgPSBTZXJ2aWNlU3RhdHVzLlNUT1BQSU5HO1xuICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0RGF0YSgpO1xuICAgICAgYXdhaXQgdGhpcy5zdG9wQ3JvbigpO1xuICAgICAgYXdhaXQgdGhpcy5zdG9wUmVjb3Zlckhpc3RvcmllcygpO1xuICAgICAgdGhpcy5zdG9wUHJvbWlzZUhhbmRsZXIucmVzb2x2ZSgpO1xuICAgICAgdGhpcy5zdGF0dXMgPSBTZXJ2aWNlU3RhdHVzLlNUT1BQRUQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5zdG9wUHJvbWlzZUhhbmRsZXIucmVqZWN0KGUpO1xuICAgIH1cbiAgfVxuXG4gIHdhaXRGb3JTdG9wcGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9wUHJvbWlzZUhhbmRsZXIucHJvbWlzZTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IEFwb2xsb0NsaWVudCwgY3JlYXRlSHR0cExpbmssIGdxbCwgSW5NZW1vcnlDYWNoZSB9IGZyb20gJ0BhcG9sbG8vY2xpZW50JztcbmltcG9ydCB7IF9DaGFpbkluZm8gfSBmcm9tICdAc3Vid2FsbGV0L2NoYWluLWxpc3QvdHlwZXMnO1xuaW1wb3J0IHsgQ2hhaW5UeXBlLCBFeHRyaW5zaWNTdGF0dXMsIEV4dHJpbnNpY1R5cGUsIFRyYW5zYWN0aW9uRGlyZWN0aW9uLCBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBNQVhfRkVUQ0hfUEFHRV9QRVJfU0VTU0lPTiwgTUlOX19OVU1fSElTVE9SWV9QRVJfQUNDT1VOVCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvaGlzdG9yeS1zZXJ2aWNlL2NvbnN0YW50cyc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnY3Jvc3MtZmV0Y2gnO1xuXG5pbXBvcnQgeyBpc0FycmF5IH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuaW1wb3J0IHsgZGVjb2RlQWRkcmVzcywgZW5jb2RlQWRkcmVzcywgaXNFdGhlcmV1bUFkZHJlc3MgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC1jcnlwdG8nO1xuXG5jb25zdCBNVUxUSV9DSEFJTl9VUkwgPSAnaHR0cHM6Ly9zcXVpZC5zdWJzcXVpZC5pby9tdWx0aS1jaGFpbi10eC92L3YxL2dyYXBocWwnO1xuXG5jb25zdCBNdWx0aUNoYWluVHhDbGllbnQgPSBuZXcgQXBvbGxvQ2xpZW50KHtcbiAgY2FjaGU6IG5ldyBJbk1lbW9yeUNhY2hlKCksXG4gIGxpbms6IGNyZWF0ZUh0dHBMaW5rKHtcbiAgICB1cmk6IE1VTFRJX0NIQUlOX1VSTCxcbiAgICBmZXRjaDogZmV0Y2hcbiAgfSlcbn0pO1xuXG5pbnRlcmZhY2UgUXVlcnlJbnB1dCB7XG4gIGFkZHJlc3Nlczogc3RyaW5nW107XG4gIG9sZGVyVGhhbklkPzogc3RyaW5nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE11bHRpSGlzdG9yeURhdGEge1xuICBfZGF0YTogc3RyaW5nO1xuICBhcmdzOiBzdHJpbmc7XG4gIGNoYWluSWQ6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgc2lnbmVyOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXIgfCBzdHJpbmc7XG4gIGJsb2NrTnVtYmVyOiBudW1iZXI7XG4gIGJsb2NrSGFzaDogc3RyaW5nO1xuICBleHBsb3JlclVybDogc3RyaW5nO1xuICByZWxhdGVkQWRkcmVzc2VzOiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIFRyYW5zZmVyQXJncyB7XG4gIGZyb206IHN0cmluZztcbiAgdG86IHN0cmluZztcbiAgYW1vdW50OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBFdGhlcmV1bUFyZ3Mge1xuICBmcm9tOiBzdHJpbmc7XG4gIHRvOiBzdHJpbmc7XG4gIHRyYW5zYWN0aW9uSGFzaDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVHJhbnNmZXJUcmFuc2FjdGlvbkRhdGEge1xuICBjYWxsOiB7IG5hbWU6IHN0cmluZyB9LFxuICBleHRyaW5zaWM6IHtcbiAgICBlcnJvcjogYW55LFxuICAgIGZlZTogc3RyaW5nLFxuICAgIHRpcDogc3RyaW5nLFxuICAgIGhhc2g6IHN0cmluZyxcbiAgICBpZDogc3RyaW5nLFxuICAgIGluZGV4SW5CbG9jazogbnVtYmVyLFxuICAgIHNpZ25hdHVyZTogc3RyaW5nLFxuICAgIHNpZ25hdHVyZVR5cGU6IHN0cmluZyxcbiAgICBzaWduZXI6IHN0cmluZyxcbiAgICBzdWNjZXNzOiBib29sZWFuLFxuICAgIHZlcnNpb246IG51bWJlclxuICB9XG59XG5cbmludGVyZmFjZSBFdGhlcmV1bVRyYW5zYWN0aW9uRGF0YSB7XG4gIGNhbGw6IHtcbiAgICBkYXRhOiB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIHRyYW5zYWN0aW9uOiB7XG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIGdhc0xpbWl0OiBzdHJpbmcsXG4gICAgICAgICAgICBnYXNQcmljZTogc3RyaW5nLFxuICAgICAgICAgICAgdmFsdWU6IHN0cmluZyxcbiAgICAgICAgICAgIHNpZ25hdHVyZToge1xuICAgICAgICAgICAgICByOiBzdHJpbmcsXG4gICAgICAgICAgICAgIHM6IHN0cmluZyxcbiAgICAgICAgICAgICAgdjogc3RyaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBleHRyaW5zaWM6IHtcbiAgICBlcnJvcjogYW55LFxuICAgIGZlZTogc3RyaW5nLFxuICAgIHRpcDogc3RyaW5nLFxuICAgIGhhc2g6IHN0cmluZyxcbiAgICBpZDogc3RyaW5nLFxuICAgIGluZGV4SW5CbG9jazogbnVtYmVyLFxuICAgIHNpZ25hdHVyZTogc3RyaW5nLFxuICAgIHNpZ25hdHVyZVR5cGU6IHN0cmluZyxcbiAgICBzaWduZXI6IHN0cmluZyxcbiAgICBzdWNjZXNzOiBib29sZWFuLFxuICAgIHZlcnNpb246IG51bWJlclxuICB9XG59XG5cbmludGVyZmFjZSBTdGFraW5nQm9uZGVkVHJhbnNhY3Rpb25EYXRhIHtcbiAgY2FsbDoge1xuICAgIGRhdGE6IHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgdmFsdWU6IHN0cmluZyxcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGV4dHJpbnNpYzoge1xuICAgIGZlZTogc3RyaW5nLFxuICAgIHRpcDogc3RyaW5nLFxuICAgIGhhc2g6IHN0cmluZyxcbiAgICBzaWduYXR1cmU6IHN0cmluZyxcbiAgICBzdWNjZXNzOiBib29sZWFuLFxuICB9XG59XG5cbmludGVyZmFjZSBUcmFuc2FjdGlvbkJ5QWRkcmVzcyB7XG4gIHRyYW5zYWN0aW9uc0J5QWRkcmVzczogTXVsdGlIaXN0b3J5RGF0YVtdXG59XG5cbmNvbnN0IHF1ZXJ5ID0gZ3FsYHF1ZXJ5IHRyYW5zYWN0aW9uUXVlcnkoJGFkZHJlc3NlczogW1N0cmluZyFdLCAkb2xkZXJUaGFuSWQ6IFN0cmluZykge1xuICB0cmFuc2FjdGlvbnNCeUFkZHJlc3MoYWRkcmVzc2VzOiAkYWRkcmVzc2VzLCBvbGRlclRoYW5JZDogJG9sZGVyVGhhbklkKSB7XG4gICAgX2RhdGFcbiAgICBhcmdzXG4gICAgY2hhaW5JZFxuICAgIGlkXG4gICAgbmFtZVxuICAgIHNpZ25lclxuICAgIGJsb2NrTnVtYmVyXG4gICAgYmxvY2tIYXNoXG4gICAgdGltZXN0YW1wXG4gICAgcmVsYXRlZEFkZHJlc3Nlc1xuICB9XG59YDtcblxuZXhwb3J0IGVudW0gU3Vic3F1aWRUcmFuc2FjdGlvblR5cGUge1xuICBCYWxhbmNlVHJhbnNmZXIgPSAnQmFsYW5jZXMuVHJhbnNmZXInLFxuICBFdGhlcmV1bUV4ZWN1dGVkID0gJ0V0aGVyZXVtLkV4ZWN1dGVkJyxcbiAgU3Rha2luZ0JvbmRlZCA9ICdTdGFraW5nLkJvbmRlZCcsXG4gIENyb3dkbG9hbkNvbnRyaWJ1dGVkID0gJ0Nyb3dkbG9hbi5Db250cmlidXRlZCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZUlucHV0VHlwZSB7XG4gIHR5cGU6IFN1YnNxdWlkVHJhbnNhY3Rpb25UeXBlLFxuICBkYXRhOiBNdWx0aUhpc3RvcnlEYXRhLFxuICBjaGFpbkluZm86IF9DaGFpbkluZm9cbn1cblxuY29uc3QgSElTVE9SWV9TVVBQT1JUX1RZUEVTID0gW1xuICBTdWJzcXVpZFRyYW5zYWN0aW9uVHlwZS5CYWxhbmNlVHJhbnNmZXIsXG4gIFN1YnNxdWlkVHJhbnNhY3Rpb25UeXBlLkV0aGVyZXVtRXhlY3V0ZWQsXG4gIFN1YnNxdWlkVHJhbnNhY3Rpb25UeXBlLlN0YWtpbmdCb25kZWRcbiAgLy8gU3Vic3F1aWRUcmFuc2FjdGlvblR5cGUuQ3Jvd2Rsb2FuQ29udHJpYnV0ZWQgLy8gTm90IHN1cHBvcnQgYmVjYXVzZSBkYXRhIGluZGV4ZXIgbm90IGVub3VnaCBkYXRhXG5dO1xuXG5leHBvcnQgdHlwZSBUcmFuc2FjdGlvbkJhc2ljRGF0YSA9IFBpY2s8VHJhbnNhY3Rpb25IaXN0b3J5SXRlbSwgJ2FkZHJlc3MnIHwgJ29yaWdpbicgfCAndGltZScgfCAnY2hhaW5UeXBlJyB8ICdmcm9tJyB8ICdkaXJlY3Rpb24nIHwgJ2Jsb2NrTnVtYmVyJyB8ICdibG9ja0hhc2gnIHwgJ2NoYWluJyB8ICdkYXRhJz5cbmV4cG9ydCB0eXBlIFRyYW5zYWN0aW9uU3BlY2lmeVR5cGUgPSBQaWNrPFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0sICd0bycgfCAndHlwZScgfCAnc3RhdHVzJyB8ICdmZWUnIHwgJ2Ftb3VudCcgfCAndGlwJyB8ICdzaWduYXR1cmUnIHwgJ2V4dHJpbnNpY0hhc2gnPlxuXG5mdW5jdGlvbiBwYXJzZURhdGEgKGFueURhdGE6IHN0cmluZyk6IGFueSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoYW55RGF0YSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGF1dG9Gb3JtYXRBZGRyZXNzIChhZGRyZXNzOiBzdHJpbmcpOiBzdHJpbmcge1xuICB0cnkge1xuICAgIGlmIChpc0V0aGVyZXVtQWRkcmVzcyhhZGRyZXNzKSkge1xuICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGVBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICByZXR1cm4gZW5jb2RlQWRkcmVzcyhkZWNvZGVkLCA0Mik7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlU2lnbmF0dXJlIChpbnB1dDogeyByOiBzdHJpbmcsIHM6IHN0cmluZywgdjogc3RyaW5nIH0pOiBzdHJpbmcge1xuICBpZiAoIWlucHV0KSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgY29uc3QgeyByLCBzLCB2IH0gPSBpbnB1dDtcbiAgY29uc3QgckhleCA9IHIuc3RhcnRzV2l0aCgnMHgnKSA/IHIuc2xpY2UoMikgOiByO1xuICBjb25zdCBzSGV4ID0gcy5zdGFydHNXaXRoKCcweCcpID8gcy5zbGljZSgyKSA6IHM7XG4gIGNvbnN0IHZIZXggPSAocGFyc2VJbnQodikpLnRvU3RyaW5nKDE2KTtcblxuICByZXR1cm4gYDB4JHtySGV4fSR7c0hleH0ke3ZIZXh9YDtcbn1cblxuY29uc3QgcGFyc2VBcmdzID0gKGFyZ3M6IHVua25vd24pOiBUcmFuc2ZlckFyZ3MgPT4ge1xuICBpZiAoaXNBcnJheShhcmdzKSkge1xuICAgIHJldHVybiB7XG4gICAgICBmcm9tOiBhcmdzWzBdIGFzIHN0cmluZyxcbiAgICAgIHRvOiBhcmdzWzFdIGFzIHN0cmluZyxcbiAgICAgIGFtb3VudDogYXJnc1syXSBhcyBzdHJpbmdcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhcmdzIGFzIFRyYW5zZmVyQXJncztcbiAgfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3Vic3F1aWRUcmFuc2FjdGlvbkRhdGEgKGFkZHJlc3M6IHN0cmluZywgdHlwZTogU3Vic3F1aWRUcmFuc2FjdGlvblR5cGUsIGhpc3RvcnlJdGVtOiBNdWx0aUhpc3RvcnlEYXRhLCBjaGFpbkluZm86IF9DaGFpbkluZm8sIGFyZ3M6IGFueSwgZGF0YTogYW55KTogVHJhbnNhY3Rpb25IaXN0b3J5SXRlbSB7XG4gIGNvbnN0IGNoYWluVHlwZSA9IGNoYWluSW5mby5zdWJzdHJhdGVJbmZvID8gQ2hhaW5UeXBlLlNVQlNUUkFURSA6IENoYWluVHlwZS5FVk07XG4gIGNvbnN0IG5hdGl2ZURlY2ltYWxzID0gY2hhaW5JbmZvLnN1YnN0cmF0ZUluZm8/LmRlY2ltYWxzIHx8IGNoYWluSW5mby5ldm1JbmZvPy5kZWNpbWFscyB8fCAxODtcbiAgY29uc3QgbmF0aXZlU3ltYm9sID0gY2hhaW5JbmZvLnN1YnN0cmF0ZUluZm8/LnN5bWJvbCB8fCBjaGFpbkluZm8uZXZtSW5mbz8uc3ltYm9sIHx8ICcnO1xuICBsZXQgZnJvbSA9IGhpc3RvcnlJdGVtLnNpZ25lcjtcbiAgbGV0IHRvID0gYWRkcmVzcyA9PT0gaGlzdG9yeUl0ZW0uc2lnbmVyID8gaGlzdG9yeUl0ZW0ucmVsYXRlZEFkZHJlc3Nlcy5maW5kKChhKSA9PiBhICE9PSBoaXN0b3J5SXRlbS5zaWduZXIpIHx8ICcnIDogYWRkcmVzcztcbiAgbGV0IGFtb3VudCA9ICcwJztcbiAgbGV0IGZlZSA9ICcwJztcbiAgbGV0IHRpcCA9ICcwJztcbiAgbGV0IHRyYW5zYWN0aW9uVHlwZSA9IEV4dHJpbnNpY1R5cGUuVU5LTk9XTjtcbiAgbGV0IGV4dHJpbnNpY0hhc2ggPSAnJztcbiAgbGV0IHNpZ25hdHVyZSA9ICcnO1xuICBsZXQgc3VjY2VzcyA9IGZhbHNlO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIC8vIFBhcnNlZCBUcmFuc2ZlclxuICAgIGNhc2UgU3Vic3F1aWRUcmFuc2FjdGlvblR5cGUuQmFsYW5jZVRyYW5zZmVyOiB7XG4gICAgICB0cmFuc2FjdGlvblR5cGUgPSBFeHRyaW5zaWNUeXBlLlRSQU5TRkVSX0JBTEFOQ0U7XG4gICAgICBjb25zdCBleHRyaW5zaWMgPSAoZGF0YSBhcyBUcmFuc2ZlclRyYW5zYWN0aW9uRGF0YSkuZXh0cmluc2ljO1xuICAgICAgY29uc3QgcGFyc2VkQXJncyA9IHBhcnNlQXJncyhhcmdzKTtcblxuICAgICAgdG8gPSBhdXRvRm9ybWF0QWRkcmVzcyhwYXJzZWRBcmdzLnRvKTtcbiAgICAgIGZyb20gPSBhdXRvRm9ybWF0QWRkcmVzcyhwYXJzZWRBcmdzLmZyb20pO1xuICAgICAgYW1vdW50ID0gcGFyc2VkQXJncy5hbW91bnQ7XG4gICAgICBmZWUgPSBleHRyaW5zaWMuZmVlO1xuICAgICAgdGlwID0gZXh0cmluc2ljLnRpcDtcbiAgICAgIGV4dHJpbnNpY0hhc2ggPSBleHRyaW5zaWMuaGFzaDtcbiAgICAgIHNpZ25hdHVyZSA9IGV4dHJpbnNpYy5zaWduYXR1cmU7XG4gICAgICBzdWNjZXNzID0gZXh0cmluc2ljLnN1Y2Nlc3M7XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNhc2UgU3Vic3F1aWRUcmFuc2FjdGlvblR5cGUuRXRoZXJldW1FeGVjdXRlZDoge1xuICAgICAgLy8gUGFyc2VkIEVWTSBUcmFuc2FjdGlvblxuICAgICAgdHJhbnNhY3Rpb25UeXBlID0gRXh0cmluc2ljVHlwZS5FVk1fRVhFQ1VURTtcbiAgICAgIGNvbnN0IGV4dHJpbnNpYyA9IChkYXRhIGFzIEV0aGVyZXVtVHJhbnNhY3Rpb25EYXRhKS5leHRyaW5zaWM7XG4gICAgICBjb25zdCBwYXJzZWRBcmdzID0gYXJncyBhcyBFdGhlcmV1bUFyZ3M7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IChkYXRhIGFzIEV0aGVyZXVtVHJhbnNhY3Rpb25EYXRhKS5jYWxsLmRhdGEuYXJncy50cmFuc2FjdGlvbi52YWx1ZTtcblxuICAgICAgdG8gPSBhdXRvRm9ybWF0QWRkcmVzcyhwYXJzZWRBcmdzLnRvKTtcbiAgICAgIGZyb20gPSBhdXRvRm9ybWF0QWRkcmVzcyhwYXJzZWRBcmdzLmZyb20gfHwgYWRkcmVzcyk7XG4gICAgICBleHRyaW5zaWNIYXNoID0gcGFyc2VkQXJncy50cmFuc2FjdGlvbkhhc2ggfHwgZXh0cmluc2ljLmhhc2g7XG4gICAgICBhbW91bnQgPSB0cmFuc2FjdGlvbi52YWx1ZSB8fCAnMCc7XG4gICAgICBmZWUgPSAocGFyc2VJbnQodHJhbnNhY3Rpb24uZ2FzUHJpY2UpICogcGFyc2VJbnQodHJhbnNhY3Rpb24uZ2FzTGltaXQpKS50b1N0cmluZygpO1xuICAgICAgc2lnbmF0dXJlID0gZ2VuZXJhdGVTaWduYXR1cmUodHJhbnNhY3Rpb24uc2lnbmF0dXJlKTtcbiAgICAgIHN1Y2Nlc3MgPSBleHRyaW5zaWMuc3VjY2VzcztcblxuICAgICAgLy8gU3BlY2lhbCBmaXggZm9yIG1vb25iZWFtXG4gICAgICBpZiAoKGhpc3RvcnlJdGVtLmNoYWluSWQgPT09ICdtb29uYmVhbScgfHwgaGlzdG9yeUl0ZW0uY2hhaW5JZCA9PT0gJ21vb25yaXZlcicpICYmIHR5cGVvZiBhbW91bnQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGFtb3VudCA9IGFtb3VudFswXTtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gUGFyc2VkIFN0YWtlXG4gICAgY2FzZSBTdWJzcXVpZFRyYW5zYWN0aW9uVHlwZS5Dcm93ZGxvYW5Db250cmlidXRlZDoge1xuICAgICAgdHJhbnNhY3Rpb25UeXBlID0gRXh0cmluc2ljVHlwZS5DUk9XRExPQU47XG4gICAgICBjb25zdCBjYWxsRGF0YSA9IChkYXRhIGFzIFN0YWtpbmdCb25kZWRUcmFuc2FjdGlvbkRhdGEpLmNhbGwuZGF0YS5hcmdzO1xuICAgICAgY29uc3QgZXh0cmluc2ljID0gKGRhdGEgYXMgU3Rha2luZ0JvbmRlZFRyYW5zYWN0aW9uRGF0YSkuZXh0cmluc2ljO1xuXG4gICAgICB0byA9IGF1dG9Gb3JtYXRBZGRyZXNzKCcnKTtcbiAgICAgIGV4dHJpbnNpY0hhc2ggPSBleHRyaW5zaWMuaGFzaDtcbiAgICAgIGFtb3VudCA9IGNhbGxEYXRhLnZhbHVlO1xuICAgICAgZmVlID0gZXh0cmluc2ljLmZlZTtcbiAgICAgIHNpZ25hdHVyZSA9IGV4dHJpbnNpYy5zaWduYXR1cmU7XG4gICAgICBzdWNjZXNzID0gZXh0cmluc2ljLnN1Y2Nlc3M7XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNhc2UgU3Vic3F1aWRUcmFuc2FjdGlvblR5cGUuU3Rha2luZ0JvbmRlZDoge1xuICAgICAgdHJhbnNhY3Rpb25UeXBlID0gRXh0cmluc2ljVHlwZS5TVEFLSU5HX0JPTkQ7XG4gICAgICBjb25zdCBjYWxsRGF0YSA9IChkYXRhIGFzIFN0YWtpbmdCb25kZWRUcmFuc2FjdGlvbkRhdGEpLmNhbGwuZGF0YS5hcmdzO1xuICAgICAgY29uc3QgZXh0cmluc2ljID0gKGRhdGEgYXMgU3Rha2luZ0JvbmRlZFRyYW5zYWN0aW9uRGF0YSkuZXh0cmluc2ljO1xuXG4gICAgICB0byA9IGF1dG9Gb3JtYXRBZGRyZXNzKCcnKTtcbiAgICAgIGV4dHJpbnNpY0hhc2ggPSBleHRyaW5zaWMuaGFzaDtcbiAgICAgIGFtb3VudCA9IGNhbGxEYXRhLnZhbHVlO1xuICAgICAgZmVlID0gZXh0cmluc2ljLmZlZTtcbiAgICAgIHNpZ25hdHVyZSA9IGV4dHJpbnNpYy5zaWduYXR1cmU7XG4gICAgICBzdWNjZXNzID0gZXh0cmluc2ljLnN1Y2Nlc3M7XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvVGltZXN0YW1wIChpbnB1dDogc3RyaW5nIHwgbnVtYmVyKTogbnVtYmVyIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGlucHV0KS5nZXRUaW1lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhZGRyZXNzLFxuICAgIG9yaWdpbjogJ3N1YnNxdWlkJyxcbiAgICB0aW1lOiB0b1RpbWVzdGFtcChoaXN0b3J5SXRlbS50aW1lc3RhbXApLFxuICAgIGNoYWluVHlwZSxcbiAgICBmcm9tLFxuICAgIGRpcmVjdGlvbjogYWRkcmVzcyA9PT0gZnJvbSA/IFRyYW5zYWN0aW9uRGlyZWN0aW9uLlNFTkQgOiBUcmFuc2FjdGlvbkRpcmVjdGlvbi5SRUNFSVZFRCxcbiAgICBibG9ja051bWJlcjogaGlzdG9yeUl0ZW0uYmxvY2tOdW1iZXIsXG4gICAgYmxvY2tIYXNoOiBoaXN0b3J5SXRlbS5ibG9ja0hhc2gsXG4gICAgY2hhaW46IGhpc3RvcnlJdGVtLmNoYWluSWQsXG4gICAgZGF0YTogaGlzdG9yeUl0ZW0uX2RhdGEsXG4gICAgdHlwZTogdHJhbnNhY3Rpb25UeXBlLFxuICAgIHRvLFxuICAgIHNpZ25hdHVyZSxcbiAgICBleHRyaW5zaWNIYXNoLFxuICAgIGFtb3VudDoge1xuICAgICAgdmFsdWU6IGFtb3VudCxcbiAgICAgIGRlY2ltYWxzOiBuYXRpdmVEZWNpbWFscyxcbiAgICAgIHN5bWJvbDogbmF0aXZlU3ltYm9sXG4gICAgfSxcbiAgICBmZWU6IHtcbiAgICAgIHZhbHVlOiBmZWUsXG4gICAgICBkZWNpbWFsczogbmF0aXZlRGVjaW1hbHMsXG4gICAgICBzeW1ib2w6IG5hdGl2ZVN5bWJvbFxuICAgIH0sXG4gICAgdGlwOiB7XG4gICAgICB2YWx1ZTogdGlwLFxuICAgICAgZGVjaW1hbHM6IG5hdGl2ZURlY2ltYWxzLFxuICAgICAgc3ltYm9sOiBuYXRpdmVTeW1ib2xcbiAgICB9LFxuICAgIHN0YXR1czogc3VjY2VzcyA/IEV4dHJpbnNpY1N0YXR1cy5TVUNDRVNTIDogRXh0cmluc2ljU3RhdHVzLkZBSUxcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTXVsdGlDaGFpbkhpc3RvcmllcyAoYWRkcmVzc2VzOiBzdHJpbmdbXSwgY2hhaW5NYXA6IFJlY29yZDxzdHJpbmcsIF9DaGFpbkluZm8+LCBtYXhQYWdlID0gTUFYX0ZFVENIX1BBR0VfUEVSX1NFU1NJT04sIGNvdW50TWFwOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge30sIF9sYXN0SWQ/OiBzdHJpbmcpIHtcbiAgY29uc3QgcmVzcG9uc2VEYXRhOiBNdWx0aUhpc3RvcnlEYXRhW10gPSBbXTtcblxuICBsZXQgY3VycmVudFBhZ2UgPSAwO1xuICBsZXQgbGFzdElkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBfbGFzdElkO1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChtYXhQYWdlKSB7XG4gICAgICAgIGlmIChjdXJyZW50UGFnZSA+PSBtYXhQYWdlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50UGFnZSsrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IE11bHRpQ2hhaW5UeENsaWVudC5xdWVyeTxUcmFuc2FjdGlvbkJ5QWRkcmVzcywgUXVlcnlJbnB1dD4oe1xuICAgICAgICBxdWVyeSxcbiAgICAgICAgdmFyaWFibGVzOiB7IGFkZHJlc3Nlcywgb2xkZXJUaGFuSWQ6IGxhc3RJZCB9XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG5lZWRQcm9jZXNzZWREYXRhID0gcmVzcG9uc2UuZGF0YS50cmFuc2FjdGlvbnNCeUFkZHJlc3MgfHwgW107XG5cbiAgICAgIGlmIChuZWVkUHJvY2Vzc2VkRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxhc3RJZCA9IHJlc3BvbnNlLmRhdGEudHJhbnNhY3Rpb25zQnlBZGRyZXNzW25lZWRQcm9jZXNzZWREYXRhLmxlbmd0aCAtIDFdLmlkO1xuICAgICAgICByZXNwb25zZURhdGEucHVzaCguLi5uZWVkUHJvY2Vzc2VkRGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBjb25zdCBoaXN0b3JpZXMgPSBbXSBhcyBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtW107XG4gIGNvbnN0IGxvd2VyQWRkcmVzc2VzID0gYWRkcmVzc2VzLm1hcCgoYSkgPT4gYS50b0xvd2VyQ2FzZSgpKTtcblxuICBmb3IgKGNvbnN0IGxvd2VyQWRkcmVzcyBvZiBsb3dlckFkZHJlc3Nlcykge1xuICAgIGNvdW50TWFwW2xvd2VyQWRkcmVzc10gPSBjb3VudE1hcFtsb3dlckFkZHJlc3NdIHx8IDA7XG4gIH1cblxuICByZXNwb25zZURhdGEuZm9yRWFjaCgoaGlzdG9yeUl0ZW0pID0+IHtcbiAgICBjb25zdCB7IF9kYXRhLCBhcmdzLCBjaGFpbklkLCBuYW1lLCByZWxhdGVkQWRkcmVzc2VzIH0gPSBoaXN0b3J5SXRlbTtcblxuICAgIC8vIElnbm9yZSBub3Qgc3VwcG9ydCB0eXBlXG4gICAgaWYgKCFISVNUT1JZX1NVUFBPUlRfVFlQRVMuaW5jbHVkZXMobmFtZSBhcyBTdWJzcXVpZFRyYW5zYWN0aW9uVHlwZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VkQWRkcmVzc2VzID0gcmVsYXRlZEFkZHJlc3Nlcy5maWx0ZXIoKGEpID0+IGxvd2VyQWRkcmVzc2VzLmluY2x1ZGVzKGEudG9Mb3dlckNhc2UoKSkpO1xuXG4gICAgY29uc3QgY2hhaW5JbmZvID0gY2hhaW5NYXBbY2hhaW5JZF07XG5cbiAgICBpZiAoY2hhaW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoYE5vdCBmb3VuZCBjaGFpbiBpbmZvIGZvciBjaGFpbiBpZDogJHtjaGFpbklkfWApOyAvLyBUT0RPOiByZXNvbHZlIGNvbmZsaWN0aW5nIGNoYWluSWRcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHVzZWRBZGRyZXNzZXMuZm9yRWFjaCgoYWRkcmVzcykgPT4ge1xuICAgICAgY29uc3QgYWRyID0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICBjb3VudE1hcFthZHJdID0gKGNvdW50TWFwW2Fkcl0gfHwgMCkgKyAxO1xuICAgIH0pO1xuXG4gICAgdXNlZEFkZHJlc3Nlcy5mb3JFYWNoKChhZGRyZXNzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbkRhdGEgPSBwYXJzZVN1YnNxdWlkVHJhbnNhY3Rpb25EYXRhKGFkZHJlc3MsIG5hbWUgYXMgU3Vic3F1aWRUcmFuc2FjdGlvblR5cGUsIGhpc3RvcnlJdGVtLCBjaGFpbkluZm8sIHBhcnNlRGF0YShhcmdzKSwgcGFyc2VEYXRhKF9kYXRhKSk7XG5cbiAgICAgICAgaGlzdG9yaWVzLnB1c2godHJhbnNhY3Rpb25EYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnUGFyc2UgdHJhbnNhY3Rpb24gZGF0YSBmYWlsZWQnLCBhZGRyZXNzLCBlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgaWYgKGN1cnJlbnRQYWdlID4gMSkge1xuICAgIGNvbnN0IHJldHJ5QWRkcmVzc2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBbYWRkcmVzcywgbnVtYmVyXSBvZiBPYmplY3QuZW50cmllcyhjb3VudE1hcCkpIHtcbiAgICAgIGlmIChudW1iZXIgPCBNSU5fX05VTV9ISVNUT1JZX1BFUl9BQ0NPVU5UKSB7XG4gICAgICAgIHJldHJ5QWRkcmVzc2VzLnB1c2goYWRkcmVzcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgX2FkZHJlc3NlcyA9IGFkZHJlc3Nlcy5maWx0ZXIoKGFkZCkgPT4gcmV0cnlBZGRyZXNzZXMuaW5jbHVkZXMoYWRkLnRvTG93ZXJDYXNlKCkpKTtcblxuICAgIGlmIChfYWRkcmVzc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHJldHJ5SGlzdG9yaWVzID0gYXdhaXQgZmV0Y2hNdWx0aUNoYWluSGlzdG9yaWVzKF9hZGRyZXNzZXMsIGNoYWluTWFwLCBtYXhQYWdlLCBjb3VudE1hcCwgbGFzdElkKTtcblxuICAgICAgaGlzdG9yaWVzLnB1c2goLi4ucmV0cnlIaXN0b3JpZXMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBoaXN0b3JpZXM7XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Vcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IEN1cnJlbnRBY2NvdW50SW5mbywgS2V5cmluZ1N0YXRlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBBTExfQUNDT1VOVF9LRVkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBFdmVudFNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2V2ZW50LXNlcnZpY2UnO1xuaW1wb3J0IHsgQ3VycmVudEFjY291bnRTdG9yZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc3RvcmVzJztcbmltcG9ydCB7IEluamVjdGVkQWNjb3VudFdpdGhNZXRhIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24taW5qZWN0L3R5cGVzJztcbmltcG9ydCB7IGtleXJpbmcgfSBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcnO1xuaW1wb3J0IHsgU3ViamVjdEluZm8gfSBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcvb2JzZXJ2YWJsZS90eXBlcyc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgc3RyaW5nU2hvcnRlbiB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcblxuZXhwb3J0IGNsYXNzIEtleXJpbmdTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBjdXJyZW50QWNjb3VudFN0b3JlID0gbmV3IEN1cnJlbnRBY2NvdW50U3RvcmUoKTtcbiAgcmVhZG9ubHkgY3VycmVudEFjY291bnRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxDdXJyZW50QWNjb3VudEluZm8+KHsgYWRkcmVzczogJycsIGN1cnJlbnRHZW5lc2lzSGFzaDogbnVsbCB9KTtcblxuICByZWFkb25seSBhZGRyZXNzZXNTdWJqZWN0ID0ga2V5cmluZy5hZGRyZXNzZXMuc3ViamVjdDtcbiAgcHVibGljIHJlYWRvbmx5IGFjY291bnRTdWJqZWN0ID0ga2V5cmluZy5hY2NvdW50cy5zdWJqZWN0O1xuICBwcml2YXRlIGJlZm9yZUFjY291bnQ6IFN1YmplY3RJbmZvID0gdGhpcy5hY2NvdW50U3ViamVjdC52YWx1ZTtcblxuICByZWFkb25seSBrZXlyaW5nU3RhdGVTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxLZXlyaW5nU3RhdGU+KHtcbiAgICBpc1JlYWR5OiBmYWxzZSxcbiAgICBoYXNNYXN0ZXJQYXNzd29yZDogZmFsc2UsXG4gICAgaXNMb2NrZWQ6IGZhbHNlXG4gIH0pO1xuXG4gIGNvbnN0cnVjdG9yIChwcml2YXRlIGV2ZW50U2VydmljZTogRXZlbnRTZXJ2aWNlKSB7XG4gICAgdGhpcy5jdXJyZW50QWNjb3VudFN0b3JlLmdldCgnQ3VycmVudEFjY291bnRJbmZvJywgKHJzKSA9PiB7XG4gICAgICBycyAmJiB0aGlzLmN1cnJlbnRBY2NvdW50U3ViamVjdC5uZXh0KHJzKTtcbiAgICB9KTtcbiAgICB0aGlzLnN1YnNjcmliZUFjY291bnRzKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1YnNjcmliZUFjY291bnRzICgpIHtcbiAgICAvLyBXYWl0IHVudGlsIGFjY291bnQgcmVhZHlcbiAgICBhd2FpdCB0aGlzLmV2ZW50U2VydmljZS53YWl0QWNjb3VudFJlYWR5O1xuXG4gICAgdGhpcy5iZWZvcmVBY2NvdW50ID0geyAuLi50aGlzLmFjY291bnRTdWJqZWN0LnZhbHVlIH07XG5cbiAgICB0aGlzLmFjY291bnRTdWJqZWN0LnN1YnNjcmliZSgoc3ViamVjdEluZm8pID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIGFjY291bnRzIGNoYW5nZWRcbiAgICAgIGNvbnN0IGJlZm9yZUFkZHJlc3NlcyA9IE9iamVjdC5rZXlzKHRoaXMuYmVmb3JlQWNjb3VudCk7XG4gICAgICBjb25zdCBhZnRlckFkZHJlc3NlcyA9IE9iamVjdC5rZXlzKHN1YmplY3RJbmZvKTtcblxuICAgICAgaWYgKGJlZm9yZUFkZHJlc3Nlcy5sZW5ndGggPiBhZnRlckFkZHJlc3Nlcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVtb3ZlZEFkZHJlc3NlcyA9IGJlZm9yZUFkZHJlc3Nlcy5maWx0ZXIoKGFkZHJlc3MpID0+ICFhZnRlckFkZHJlc3Nlcy5pbmNsdWRlcyhhZGRyZXNzKSk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGFjY291bnRcbiAgICAgICAgcmVtb3ZlZEFkZHJlc3Nlcy5mb3JFYWNoKChhZGRyZXNzKSA9PiB7XG4gICAgICAgICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgnYWNjb3VudC5yZW1vdmUnLCBhZGRyZXNzKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGJlZm9yZUFkZHJlc3Nlcy5sZW5ndGggPCBhZnRlckFkZHJlc3Nlcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYWRkZWRBZGRyZXNzZXMgPSBhZnRlckFkZHJlc3Nlcy5maWx0ZXIoKGFkZHJlc3MpID0+ICFiZWZvcmVBZGRyZXNzZXMuaW5jbHVkZXMoYWRkcmVzcykpO1xuXG4gICAgICAgIC8vIEFkZCBhY2NvdW50XG4gICAgICAgIGFkZGVkQWRkcmVzc2VzLmZvckVhY2goKGFkZHJlc3MpID0+IHtcbiAgICAgICAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdhY2NvdW50LmFkZCcsIGFkZHJlc3MpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEhhbmRsZSBjYXNlIHVwZGF0ZSBsYXRlclxuICAgICAgfVxuXG4gICAgICB0aGlzLmJlZm9yZUFjY291bnQgPSB7IC4uLnN1YmplY3RJbmZvIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXQga2V5cmluZ1N0YXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5rZXlyaW5nU3RhdGVTdWJqZWN0LnZhbHVlO1xuICB9XG5cbiAgdXBkYXRlS2V5cmluZ1N0YXRlIChpc1JlYWR5ID0gdHJ1ZSkge1xuICAgIGlmICghdGhpcy5rZXlyaW5nU3RhdGUuaXNSZWFkeSAmJiBpc1JlYWR5KSB7XG4gICAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdrZXlyaW5nLnJlYWR5JywgdHJ1ZSk7XG4gICAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdhY2NvdW50LnJlYWR5JywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5rZXlyaW5nU3RhdGVTdWJqZWN0Lm5leHQoe1xuICAgICAgaGFzTWFzdGVyUGFzc3dvcmQ6ICEha2V5cmluZy5rZXlyaW5nPy5oYXNNYXN0ZXJQYXNzd29yZCxcbiAgICAgIGlzTG9ja2VkOiAhIWtleXJpbmcua2V5cmluZz8uaXNMb2NrZWQsXG4gICAgICBpc1JlYWR5OiBpc1JlYWR5XG4gICAgfSk7XG4gIH1cblxuICBnZXQgYWNjb3VudHMgKCk6IFN1YmplY3RJbmZvIHtcbiAgICByZXR1cm4gdGhpcy5hY2NvdW50U3ViamVjdC52YWx1ZTtcbiAgfVxuXG4gIGdldCBhZGRyZXNzZXMgKCk6IFN1YmplY3RJbmZvIHtcbiAgICByZXR1cm4gdGhpcy5hZGRyZXNzZXNTdWJqZWN0LnZhbHVlO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRBY2NvdW50ICgpOiBDdXJyZW50QWNjb3VudEluZm8ge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRBY2NvdW50U3ViamVjdC52YWx1ZTtcbiAgfVxuXG4gIHNldEN1cnJlbnRBY2NvdW50IChjdXJyZW50QWNjb3VudERhdGE6IEN1cnJlbnRBY2NvdW50SW5mbykge1xuICAgIHRoaXMuY3VycmVudEFjY291bnRTdWJqZWN0Lm5leHQoY3VycmVudEFjY291bnREYXRhKTtcbiAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCdhY2NvdW50LnVwZGF0ZUN1cnJlbnQnLCBjdXJyZW50QWNjb3VudERhdGEpO1xuICAgIHRoaXMuY3VycmVudEFjY291bnRTdG9yZS5zZXQoJ0N1cnJlbnRBY2NvdW50SW5mbycsIGN1cnJlbnRBY2NvdW50RGF0YSk7XG4gIH1cblxuICBwdWJsaWMgbG9jayAoKSB7XG4gICAga2V5cmluZy5sb2NrQWxsKCk7XG4gICAgdGhpcy51cGRhdGVLZXlyaW5nU3RhdGUoKTtcbiAgfVxuXG4gIC8qIEluamVjdCAqL1xuXG4gIHB1YmxpYyBhZGRJbmplY3RBY2NvdW50cyAoYWNjb3VudHM6IEluamVjdGVkQWNjb3VudFdpdGhNZXRhW10pIHtcbiAgICBrZXlyaW5nLmFkZEluamVjdHMoYWNjb3VudHMubWFwKChhY2NvdW50KSA9PiB7XG4gICAgICBjb25zdCBuYW1lID0gYWNjb3VudC5tZXRhLm5hbWUgfHwgc3RyaW5nU2hvcnRlbihhY2NvdW50LmFkZHJlc3MpO1xuXG4gICAgICAvLyBUT0RPOiBBZGQgaWYgbmVlZFxuICAgICAgLy8gbmFtZSA9IG5hbWUuY29uY2F0KCcgKCcsIGFjY291bnQubWV0YS5zb3VyY2UsICcpJyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmFjY291bnQsXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAuLi5hY2NvdW50Lm1ldGEsXG4gICAgICAgICAgbmFtZTogbmFtZVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKTtcblxuICAgIGNvbnN0IGN1cnJlbnRBZGRyZXNzID0gdGhpcy5jdXJyZW50QWNjb3VudFN1YmplY3QudmFsdWUuYWRkcmVzcztcbiAgICBjb25zdCBhZnRlckFjY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9O1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5hY2NvdW50cykuZm9yRWFjaCgoYWRyKSA9PiB7XG4gICAgICBhZnRlckFjY291bnRzW2Fkcl0gPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgYWNjb3VudHMuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgIGFmdGVyQWNjb3VudHNbdmFsdWUuYWRkcmVzc10gPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKGFmdGVyQWNjb3VudHMpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5jdXJyZW50QWNjb3VudFN1YmplY3QubmV4dCh7IGFkZHJlc3M6IE9iamVjdC5rZXlzKGFmdGVyQWNjb3VudHMpWzBdLCBjdXJyZW50R2VuZXNpc0hhc2g6IG51bGwgfSk7XG4gICAgfSBlbHNlIGlmIChPYmplY3Qua2V5cyhhZnRlckFjY291bnRzKS5pbmRleE9mKGN1cnJlbnRBZGRyZXNzKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuY3VycmVudEFjY291bnRTdWJqZWN0Lm5leHQoeyBhZGRyZXNzOiBBTExfQUNDT1VOVF9LRVksIGN1cnJlbnRHZW5lc2lzSGFzaDogbnVsbCB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlSW5qZWN0QWNjb3VudHMgKGFkZHJlc3Nlczogc3RyaW5nW10pIHtcbiAgICBjb25zdCBjdXJyZW50QWRkcmVzcyA9IHRoaXMuY3VycmVudEFjY291bnRTdWJqZWN0LnZhbHVlLmFkZHJlc3M7XG4gICAgY29uc3QgYWZ0ZXJBY2NvdW50cyA9IE9iamVjdC5rZXlzKHRoaXMuYWNjb3VudHMpLmZpbHRlcigoYWRkcmVzcykgPT4gKGFkZHJlc3Nlcy5pbmRleE9mKGFkZHJlc3MpIDwgMCkpO1xuXG4gICAgaWYgKGFmdGVyQWNjb3VudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLmN1cnJlbnRBY2NvdW50U3ViamVjdC5uZXh0KHsgYWRkcmVzczogYWZ0ZXJBY2NvdW50c1swXSwgY3VycmVudEdlbmVzaXNIYXNoOiBudWxsIH0pO1xuICAgIH0gZWxzZSBpZiAoYWRkcmVzc2VzLmluZGV4T2YoY3VycmVudEFkZHJlc3MpID09PSAtMSkge1xuICAgICAgdGhpcy5jdXJyZW50QWNjb3VudFN1YmplY3QubmV4dCh7IGFkZHJlc3M6IEFMTF9BQ0NPVU5UX0tFWSwgY3VycmVudEdlbmVzaXNIYXNoOiBudWxsIH0pO1xuICAgIH1cblxuICAgIGtleXJpbmcucmVtb3ZlSW5qZWN0cyhhZGRyZXNzZXMpO1xuICB9XG5cbiAgLyogSW5qZWN0ICovXG5cbiAgLyogUmVzZXQgKi9cbiAgYXN5bmMgcmVzZXRXYWxsZXQgKHJlc2V0QWxsOiBib29sZWFuKSB7XG4gICAga2V5cmluZy5yZXNldFdhbGxldChyZXNldEFsbCk7XG4gICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9LCA1MDApO1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlS2V5cmluZ1N0YXRlKCk7XG4gICAgdGhpcy5jdXJyZW50QWNjb3VudFN1YmplY3QubmV4dCh7IGFkZHJlc3M6IEFMTF9BQ0NPVU5UX0tFWSwgY3VycmVudEdlbmVzaXNIYXNoOiBudWxsIH0pO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IFN0YXRlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9iYWNrZ3JvdW5kL2hhbmRsZXJzL1N0YXRlJztcblxuaW1wb3J0IHsgbG9nZ2VyIGFzIGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZU1pZ3JhdGlvbkpvYiB7XG4gIHJlYWRvbmx5IHN0YXRlOiBTdGF0ZTtcbiAgcHVibGljIGxvZ2dlcjogTG9nZ2VyO1xuXG4gIGNvbnN0cnVjdG9yIChzdGF0ZTogU3RhdGUpIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5sb2dnZXIgPSBjcmVhdGVMb2dnZXIodGhpcy5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBydW4gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY29uc29sZS53YXJuKCdOZWVkIHRvIG92ZXJyaWRlIGZ1bmN0aW9uIHJ1biBmcm9tIGJhc2UuJykpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IFN0YXRlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9iYWNrZ3JvdW5kL2hhbmRsZXJzL1N0YXRlJztcblxuaW1wb3J0IHsgbG9nZ2VyIGFzIGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsL3R5cGVzJztcblxuaW1wb3J0IE1pZ3JhdGlvblNjcmlwdHMsIHsgRVZFUllUSU1FIH0gZnJvbSAnLi9zY3JpcHRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlncmF0aW9uU2VydmljZSB7XG4gIHJlYWRvbmx5IHN0YXRlOiBTdGF0ZTtcbiAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcblxuICBjb25zdHJ1Y3RvciAoc3RhdGU6IFN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMubG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCdNaWdyYXRpb24nKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBydW4gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhNaWdyYXRpb25TY3JpcHRzKS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBKb2JDbGFzcyA9IE1pZ3JhdGlvblNjcmlwdHNba2V5c1tpXV07XG4gICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICAgIGNvbnN0IG5hbWUgPSBKb2JDbGFzcy5uYW1lO1xuXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgdGhpcy5zdGF0ZS5kYlNlcnZpY2Uuc3RvcmVzLm1pZ3JhdGlvbi50YWJsZS53aGVyZSh7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBrZXlcbiAgICAgICAgfSkuZmlyc3QoKTtcblxuICAgICAgICBpZiAoIWNoZWNrIHx8IGtleS5zdGFydHNXaXRoKEVWRVJZVElNRSkpIHtcbiAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgSm9iQ2xhc3ModGhpcy5zdGF0ZSk7XG5cbiAgICAgICAgICBhd2FpdCBqb2IucnVuKCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zdGF0ZS5kYlNlcnZpY2Uuc3RvcmVzLm1pZ3JhdGlvbi50YWJsZS5wdXQoe1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ01pZ3JhdGlvbiBlcnJvcjogJywgTWlncmF0aW9uU2NyaXB0c1trZXlzW2ldXS5uYW1lLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IEJhc2VNaWdyYXRpb25Kb2IgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9taWdyYXRpb24tc2VydmljZS9CYXNlJztcbmltcG9ydCB7IGtleXJpbmcgfSBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRvRW5hYmxlQ2hhaW5zVG9rZW5zIGV4dGVuZHMgQmFzZU1pZ3JhdGlvbkpvYiB7XG4gIHB1YmxpYyBvdmVycmlkZSBhc3luYyBydW4gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFjY291bnRzID0ga2V5cmluZy5nZXRBY2NvdW50cygpO1xuXG4gICAgYXdhaXQgdGhpcy5zdGF0ZS5hdXRvRW5hYmxlQ2hhaW5zKGFjY291bnRzLm1hcCgoeyBhZGRyZXNzIH0pID0+IGFkZHJlc3MpKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBCYXNlTWlncmF0aW9uSm9iIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2UvQmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlbGV0ZUNoYWluIGV4dGVuZHMgQmFzZU1pZ3JhdGlvbkpvYiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVxdWlyZS1hd2FpdFxuICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgcnVuICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBbJ3Nub3cnLCAnc25vd19ldm0nLCAnYXJjdGljX3Rlc3RuZXQnXS5mb3JFYWNoKChjaGFpbikgPT4ge1xuICAgICAgdGhpcy5zdGF0ZS5mb3JjZVJlbW92ZUNoYWluKGNoYWluKTtcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCdkb25lIGpvYicpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IEJhc2VNaWdyYXRpb25Kb2IgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9taWdyYXRpb24tc2VydmljZS9CYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgRW5hYmxlQ2hhaW4gZXh0ZW5kcyBCYXNlTWlncmF0aW9uSm9iIHtcbiAgYWJzdHJhY3Qgc2x1Zzogc3RyaW5nO1xuXG4gIHB1YmxpYyBvdmVycmlkZSBhc3luYyBydW4gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcblxuICAgIGF3YWl0IHN0YXRlLmVuYWJsZUNoYWluKHRoaXMuc2x1ZywgdHJ1ZSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgRW5hYmxlQ2hhaW4gZnJvbSAnLi9FbmFibGVDaGFpbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuYWJsZVZhcmFDaGFpbiBleHRlbmRzIEVuYWJsZUNoYWluIHtcbiAgc2x1ZyA9ICd2YXJhX25ldHdvcmsnO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBCYXNlTWlncmF0aW9uSm9iIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2UvQmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pZ3JhdGVTZXR0aW5ncyBleHRlbmRzIEJhc2VNaWdyYXRpb25Kb2Ige1xuICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgcnVuICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUuZ2V0QXV0aG9yaXplKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gJ2FwcC5zdGVsbGFzd2FwLmNvbSc7XG4gICAgICAgICAgICBjb25zdCBzdGVsbGFTd2FwID0gdmFsdWVba2V5XTtcblxuICAgICAgICAgICAgaWYgKHN0ZWxsYVN3YXApIHtcbiAgICAgICAgICAgICAgc3RlbGxhU3dhcC5jdXJyZW50RXZtTmV0d29ya0tleSA9ICdtb29uYmVhbSc7XG4gICAgICAgICAgICAgIHZhbHVlW2tleV0gPSBzdGVsbGFTd2FwO1xuXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2V0QXV0aG9yaXplKHZhbHVlLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBCYXNlTWlncmF0aW9uSm9iIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2UvQmFzZSc7XG5pbXBvcnQgeyBERUZBVUxUX0FVVE9fTE9DS19USU1FIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zZXR0aW5nLXNlcnZpY2UvY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlncmF0ZUF1dG9Mb2NrIGV4dGVuZHMgQmFzZU1pZ3JhdGlvbkpvYiB7XG4gIHB1YmxpYyBvdmVycmlkZSBhc3luYyBydW4gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXR0aW5nU2VydmljZS5nZXRTZXR0aW5ncygoY3VycmVudFNldHRpbmdzKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZXR0aW5nU2VydmljZS5zZXRTZXR0aW5ncyh7XG4gICAgICAgICAgICAuLi5jdXJyZW50U2V0dGluZ3MsXG4gICAgICAgICAgICB0aW1lQXV0b0xvY2s6IERFRkFVTFRfQVVUT19MT0NLX1RJTUVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBCYXNlTWlncmF0aW9uSm9iIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2UvQmFzZSc7XG5pbXBvcnQgeyBERUZBVUxUX0NIQUlOX1BBVFJPTF9FTkFCTEUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3NldHRpbmctc2VydmljZS9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRlQ2hhaW5QYXRyb2wgZXh0ZW5kcyBCYXNlTWlncmF0aW9uSm9iIHtcbiAgcHVibGljIG92ZXJyaWRlIGFzeW5jIHJ1biAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICB0aGlzLnN0YXRlLnNldHRpbmdTZXJ2aWNlLmdldFNldHRpbmdzKChjdXJyZW50U2V0dGluZ3MpID0+IHtcbiAgICAgICAgICB0aGlzLnN0YXRlLnNldHRpbmdTZXJ2aWNlLnNldFNldHRpbmdzKHtcbiAgICAgICAgICAgIC4uLmN1cnJlbnRTZXR0aW5ncyxcbiAgICAgICAgICAgIGVuYWJsZUNoYWluUGF0cm9sOiBERUZBVUxUX0NIQUlOX1BBVFJPTF9FTkFCTEVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBNaWdyYXRlUHJvdmlkZXIgZnJvbSAnLi9NaWdyYXRlUHJvdmlkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRlRXRoUHJvdmlkZXIgZXh0ZW5kcyBNaWdyYXRlUHJvdmlkZXIge1xuICBuZXdQcm92aWRlciA9ICdldGhlcmV1bSc7XG4gIG9sZFByb3ZpZGVyID0gJ0Nsb3VkZmxhcmUnO1xuICBzbHVnID0gJ0xsYW1hcnBjJztcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQXNzZXRUeXBlIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCBCYXNlTWlncmF0aW9uSm9iIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2UvQmFzZSc7XG5cbmludGVyZmFjZSBPbGRUb2tlblR5cGUge1xuICBjaGFpbjogc3RyaW5nLFxuICBpc0N1c3RvbT86IGJvb2xlYW4sXG4gIGRlY2ltYWxzOiBzdHJpbmcgfCBudW1iZXIsXG4gIG5hbWU6IHN0cmluZyxcbiAgc21hcnRDb250cmFjdDogc3RyaW5nLFxuICBzeW1ib2w6IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRlSW1wb3J0ZWRUb2tlbiBleHRlbmRzIEJhc2VNaWdyYXRpb25Kb2Ige1xuICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgcnVuICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGU7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KCdFdm1Ub2tlbicsIGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICBpZiAoaXRlbXMgJiYgaXRlbXMuRXZtVG9rZW4pIHtcbiAgICAgICAgICBjb25zdCB0b2tlbk1hcCA9IGl0ZW1zLkV2bVRva2VuIGFzIFJlY29yZDxzdHJpbmcsIE9sZFRva2VuVHlwZVtdPjtcblxuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHRva2VuTWFwKS5mb3JFYWNoKChbdCwgdG9rZW5MaXN0XSkgPT4ge1xuICAgICAgICAgICAgdG9rZW5MaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpdGVtLmlzQ3VzdG9tICYmIHN0YXRlLmNoYWluU2VydmljZS51cHNlcnRDdXN0b21Ub2tlbih7XG4gICAgICAgICAgICAgICAgICBhc3NldFR5cGU6IHQudG9VcHBlckNhc2UoKSBhcyBfQXNzZXRUeXBlLFxuICAgICAgICAgICAgICAgICAgZGVjaW1hbHM6IGl0ZW0uZGVjaW1hbHMgPyBwYXJzZUludChpdGVtLmRlY2ltYWxzLnRvU3RyaW5nKCkpIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgIGhhc1ZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzOiBpdGVtLnNtYXJ0Q29udHJhY3RcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBtaW5BbW91bnQ6ICcwJyxcbiAgICAgICAgICAgICAgICAgIG11bHRpQ2hhaW5Bc3NldDogbnVsbCxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgIG9yaWdpbkNoYWluOiBpdGVtLmNoYWluLFxuICAgICAgICAgICAgICAgICAgcHJpY2VJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgIHNsdWc6ICcnLFxuICAgICAgICAgICAgICAgICAgc3ltYm9sOiBpdGVtLnN5bWJvbCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgIGljb246ICcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBCYXNlTWlncmF0aW9uSm9iIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvbWlncmF0aW9uLXNlcnZpY2UvQmFzZSc7XG5pbXBvcnQgeyBBY2NvdW50c1N0b3JlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zdG9yZXMnO1xuaW1wb3J0IHsgS2V5cmluZ0pzb24gfSBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcvdHlwZXMnO1xuXG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlncmF0ZUxlZGdlckFjY291bnQgZXh0ZW5kcyBCYXNlTWlncmF0aW9uSm9iIHtcbiAgcHVibGljIG92ZXJyaWRlIGFzeW5jIHJ1biAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCBzdG9yZSA9IG5ldyBBY2NvdW50c1N0b3JlKCk7XG5cbiAgICAgICAgY29uc3QgdXBkYXRlID0gKGtleTogc3RyaW5nLCB2YWx1ZTogS2V5cmluZ0pzb24pID0+IHtcbiAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ2FjY291bnQ6JykgJiYgdmFsdWUubWV0YSAmJiBpc1N0cmluZyh2YWx1ZS5tZXRhPy5vcmlnaW5HZW5lc2lzSGFzaCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0geyAuLi52YWx1ZSB9O1xuXG4gICAgICAgICAgICBuZXdWYWx1ZS5tZXRhLmF2YWlsYWJsZUdlbmVzaXNIYXNoZXMgPSBbdmFsdWUubWV0YS5vcmlnaW5HZW5lc2lzSGFzaF07XG4gICAgICAgICAgICBzdG9yZS5zZXQoa2V5LCBuZXdWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHN0b3JlLmFsbE1hcCgobWFwOiBSZWNvcmQ8c3RyaW5nLCBLZXlyaW5nSnNvbj4pID0+IHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhtYXApLmZvckVhY2goKFtrZXksIHZhbHVlXSk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgdXBkYXRlKGtleSwgdmFsdWUpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgfVxuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0Fzc2V0VHlwZSB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgQmFzZU1pZ3JhdGlvbkpvYiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL0Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRlTmV0d29ya1NldHRpbmdzIGV4dGVuZHMgQmFzZU1pZ3JhdGlvbkpvYiB7XG4gIHB1YmxpYyBvdmVycmlkZSBhc3luYyBydW4gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcblxuICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgbmV3IFByb21pc2U8e05ldHdvcmtNYXA6IHVua25vd259PigocmVzb2x2ZSkgPT4ge1xuICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KCdOZXR3b3JrTWFwJywgKGl0ZW1zKSA9PiB7XG4gICAgICAgIHJlc29sdmUoaXRlbXMgYXMge05ldHdvcmtNYXA6IHVua25vd259KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IG9sZE5ldHdvcmtNYXAgPSBpdGVtcy5OZXR3b3JrTWFwIGFzIFJlY29yZDxzdHJpbmcsIHsgYWN0aXZlOiBib29sZWFuLCBjdXJyZW50UHJvdmlkZXI6IHN0cmluZyB9PjtcbiAgICBjb25zdCBlbmFibGVMaXN0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHN0YXRlTWFwID0gc3RhdGUuZ2V0Q2hhaW5TdGF0ZU1hcCgpO1xuXG4gICAgaWYgKCFvbGROZXR3b3JrTWFwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgT2JqZWN0LmVudHJpZXMob2xkTmV0d29ya01hcCkuZm9yRWFjaCgoW3NsdWcsIGNoYWluXSkgPT4ge1xuICAgICAgaWYgKGNoYWluLmFjdGl2ZSkge1xuICAgICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBzdGF0ZU1hcFtzbHVnXTtcblxuICAgICAgICAvLyBFbnN1cmUgY2hhaW4gaW4gdGhlIGxpc3QgYW5kIGlzIG5vdCBhY3RpdmVcbiAgICAgICAgKGN1cnJlbnRTdGF0ZSkgJiYgZW5hYmxlTGlzdC5wdXNoKHNsdWcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGVuYWJsZUxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgc3RhdGUuY2hhaW5TZXJ2aWNlLmVuYWJsZUNoYWlucyhlbmFibGVMaXN0KTtcblxuICAgICAgLy8gRW5hYmxlIG5hdGl2ZSB0b2tlbiBvZiB0aGVzZSBjaGFpbnNcbiAgICAgIGNvbnN0IGN1cnJlbnRBc3NldFNldHRpbmdzID0gYXdhaXQgc3RhdGUuY2hhaW5TZXJ2aWNlLmdldEFzc2V0U2V0dGluZ3MoKTtcbiAgICAgIGNvbnN0IGFzc2V0SW5mb01hcCA9IHN0YXRlLmNoYWluU2VydmljZS5nZXRBc3NldFJlZ2lzdHJ5KCk7XG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKGFzc2V0SW5mb01hcCkuZm9yRWFjaCgoW3NsdWcsIGFzc2V0SW5mb10pID0+IHtcbiAgICAgICAgY29uc3QgYXNzZXRTZXR0aW5nID0gY3VycmVudEFzc2V0U2V0dGluZ3Nbc2x1Z10gfHwge307XG5cbiAgICAgICAgLy8gRW5hYmxlIG5hdGl2ZSB0b2tlbiBvZiB0aGVzZSBjaGFpbnNcbiAgICAgICAgaWYgKGFzc2V0SW5mby5uYW1lICYmIGFzc2V0SW5mby5hc3NldFR5cGUgPT09IF9Bc3NldFR5cGUuTkFUSVZFICYmIGVuYWJsZUxpc3QuaW5jbHVkZXMoYXNzZXRJbmZvLm9yaWdpbkNoYWluKSAmJiAhYXNzZXRTZXR0aW5nLnZpc2libGUpIHtcbiAgICAgICAgICBjdXJyZW50QXNzZXRTZXR0aW5nc1tzbHVnXSA9IHsgdmlzaWJsZTogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc3RhdGUuY2hhaW5TZXJ2aWNlLnNldEFzc2V0U2V0dGluZ3MoeyAuLi5jdXJyZW50QXNzZXRTZXR0aW5ncyB9KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgTWlncmF0ZVByb3ZpZGVyIGZyb20gJy4vTWlncmF0ZVByb3ZpZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlncmF0ZVBpb25lZXJQcm92aWRlciBleHRlbmRzIE1pZ3JhdGVQcm92aWRlciB7XG4gIHNsdWcgPSAncGlvbmVlcic7XG4gIG9sZFByb3ZpZGVyID0gJ09uRmluYWxpdHknO1xuICBuZXdQcm92aWRlciA9ICdQaW9uZWVyJztcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgQmFzZU1pZ3JhdGlvbkpvYiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL0Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBNaWdyYXRlUHJvdmlkZXIgZXh0ZW5kcyBCYXNlTWlncmF0aW9uSm9iIHtcbiAgYWJzdHJhY3Qgc2x1Zzogc3RyaW5nO1xuICBhYnN0cmFjdCBvbGRQcm92aWRlcjogc3RyaW5nO1xuICBhYnN0cmFjdCBuZXdQcm92aWRlcjogc3RyaW5nO1xuXG4gIHB1YmxpYyBvdmVycmlkZSBhc3luYyBydW4gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcblxuICAgIGNvbnN0IGNoYWluU3RhdGUgPSBzdGF0ZS5nZXRDaGFpblN0YXRlQnlLZXkodGhpcy5zbHVnKTtcbiAgICBjb25zdCBjaGFpbkluZm8gPSBzdGF0ZS5nZXRDaGFpbkluZm8odGhpcy5zbHVnKTtcblxuICAgIGlmIChjaGFpblN0YXRlLmFjdGl2ZSAmJiBjaGFpblN0YXRlLmN1cnJlbnRQcm92aWRlciA9PT0gdGhpcy5vbGRQcm92aWRlcikge1xuICAgICAgYXdhaXQgc3RhdGUudXBzZXJ0Q2hhaW5JbmZvKHtcbiAgICAgICAgbW9kZTogJ3VwZGF0ZScsXG4gICAgICAgIGNoYWluRWRpdEluZm86IHtcbiAgICAgICAgICBjdXJyZW50UHJvdmlkZXI6IHRoaXMubmV3UHJvdmlkZXIsXG4gICAgICAgICAgc2x1ZzogdGhpcy5zbHVnLFxuICAgICAgICAgIHByb3ZpZGVyczogY2hhaW5JbmZvLnByb3ZpZGVyc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgQmFzZU1pZ3JhdGlvbkpvYiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL0Jhc2UnO1xuXG5pbXBvcnQgdWlTZXR0aW5ncyBmcm9tICdAcG9sa2Fkb3QvdWktc2V0dGluZ3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRlU2V0dGluZ3MgZXh0ZW5kcyBCYXNlTWlncmF0aW9uSm9iIHtcbiAgcHVibGljIG92ZXJyaWRlIGFzeW5jIHJ1biAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICB0aGlzLnN0YXRlLnNldHRpbmdTZXJ2aWNlLmdldFNldHRpbmdzKChjdXJyZW50U2V0dGluZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBpc0FjY2Vzc0NhbWVyYSA9IHVpU2V0dGluZ3MuY2FtZXJhID09PSAnb24nO1xuXG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZXR0aW5nU2VydmljZS5zZXRTZXR0aW5ncyh7XG4gICAgICAgICAgICAuLi5jdXJyZW50U2V0dGluZ3MsXG4gICAgICAgICAgICBjYW1lcmE6IGlzQWNjZXNzQ2FtZXJhXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfaXNDdXN0b21Bc3NldCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5pbXBvcnQgQmFzZU1pZ3JhdGlvbkpvYiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL0Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRlVG9rZW5EZWNpbWFscyBleHRlbmRzIEJhc2VNaWdyYXRpb25Kb2Ige1xuICBwdWJsaWMgb3ZlcnJpZGUgYXN5bmMgcnVuICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGU7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGNvbnN0IGFzc2V0TWFwID0gc3RhdGUuZ2V0QXNzZXRSZWdpc3RyeSgpO1xuXG4gICAgICBmb3IgKGNvbnN0IFtzbHVnLCBpbmZvXSBvZiBPYmplY3QuZW50cmllcyhhc3NldE1hcCkpIHtcbiAgICAgICAgaWYgKF9pc0N1c3RvbUFzc2V0KHNsdWcpKSB7XG4gICAgICAgICAgc3RhdGUuY2hhaW5TZXJ2aWNlLnVwc2VydEN1c3RvbVRva2VuKHtcbiAgICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgICAgICBkZWNpbWFsczogaW5mby5kZWNpbWFscyA/IHBhcnNlSW50KGluZm8uZGVjaW1hbHMudG9TdHJpbmcoKSkgOiBpbmZvLmRlY2ltYWxzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgQ2hhaW5UeXBlLCBFeHRyaW5zaWNTdGF0dXMsIEV4dHJpbnNpY1R5cGUsIFRyYW5zYWN0aW9uRGlyZWN0aW9uLCBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5pbXBvcnQgQmFzZU1pZ3JhdGlvbkpvYiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL0Jhc2UnO1xuaW1wb3J0IERleGllIGZyb20gJ2RleGllJztcblxuaW1wb3J0IHsgaXNFdGhlcmV1bUFkZHJlc3MgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC1jcnlwdG8nO1xuXG5pbnRlcmZhY2UgT2xkVHJhbnNhY3Rpb25JdGVtIHtcbiAgY2hhaW5IYXNoOiBzdHJpbmc7XG4gIGNoYWluOiBzdHJpbmc7XG4gIGFkZHJlc3M6IHN0cmluZztcbiAgZXZlbnRJZHg6IG51bWJlcjtcbiAgdGltZTogbnVtYmVyO1xuICBuZXR3b3JrS2V5OiBzdHJpbmc7XG4gIGNoYW5nZTogc3RyaW5nO1xuICBjaGFuZ2VTeW1ib2w6IHN0cmluZztcbiAgZmVlOiBzdHJpbmc7XG4gIGZlZVN5bWJvbDogc3RyaW5nO1xuICBpc1N1Y2Nlc3M6IGJvb2xlYW47XG4gIGV4dHJpbnNpY0hhc2g6IHN0cmluZztcbiAgYWN0aW9uOiAnc2VuZCcgfCAncmVjZWl2ZSc7XG4gIG9yaWdpbjogc3RyaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRlVHJhbnNhY3Rpb25IaXN0b3J5IGV4dGVuZHMgQmFzZU1pZ3JhdGlvbkpvYiB7XG4gIHB1YmxpYyBvdmVycmlkZSBhc3luYyBydW4gKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBjaGFpbkluZm9NYXAgPSBzdGF0ZS5nZXRDaGFpbkluZm9NYXAoKTtcbiAgICBjb25zdCBhc3NldExpc3QgPSBPYmplY3QudmFsdWVzKHN0YXRlLmdldEFzc2V0UmVnaXN0cnkoKSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGIgPSBuZXcgRGV4aWUoJ1N1YldhbGxldERCJyk7XG4gICAgICBjb25zdCBkZXhpZURCID0gYXdhaXQgZGIub3BlbigpO1xuICAgICAgY29uc3QgdHJhbnNhY3Rpb25UYWJsZSA9IGRleGllREIudGFibGUoJ3RyYW5zYWN0aW9ucycpO1xuICAgICAgY29uc3Qgb2xkVHJhbnNhY3Rpb25EYXRhID0gKGF3YWl0IHRyYW5zYWN0aW9uVGFibGUudG9BcnJheSgpKSBhcyBPbGRUcmFuc2FjdGlvbkl0ZW1bXTtcbiAgICAgIGNvbnN0IG5ld1RyYW5zYWN0aW9uSXRlbXM6IFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW1bXSA9IFtdO1xuXG4gICAgICBvbGRUcmFuc2FjdGlvbkRhdGEuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjaGFpbkluZm8gPSBjaGFpbkluZm9NYXBbaXRlbS5uZXR3b3JrS2V5XTtcblxuICAgICAgICBpZiAoIWNoYWluSW5mbykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGl0ZW0uYWN0aW9uID09PSAnc2VuZCcgPyBUcmFuc2FjdGlvbkRpcmVjdGlvbi5TRU5EIDogVHJhbnNhY3Rpb25EaXJlY3Rpb24uUkVDRUlWRUQ7XG4gICAgICAgIGNvbnN0IGV4dHJpbnNpY1R5cGUgPSBpdGVtLmNoYW5nZVN5bWJvbCA9PT0gaXRlbS5mZWVTeW1ib2wgPyBFeHRyaW5zaWNUeXBlLlRSQU5TRkVSX0JBTEFOQ0UgOiBFeHRyaW5zaWNUeXBlLlRSQU5TRkVSX1RPS0VOO1xuICAgICAgICBjb25zdCBuYXRpdmVBc3NldCA9IF9nZXRDaGFpbk5hdGl2ZVRva2VuQmFzaWNJbmZvKGNoYWluSW5mbyk7XG4gICAgICAgIGNvbnN0IHRyYW5zZmVyQXNzZXQgPSBhc3NldExpc3QuZmluZCgoYSkgPT4gKGEub3JpZ2luQ2hhaW4gPT09IGl0ZW0ubmV0d29ya0tleSAmJiBhLnN5bWJvbCA9PT0gaXRlbS5jaGFuZ2VTeW1ib2wpKSB8fCBuYXRpdmVBc3NldDtcblxuICAgICAgICBjb25zdCBuZXdJdGVtOiBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtID0ge1xuICAgICAgICAgIGNoYWluOiBpdGVtLm5ldHdvcmtLZXksXG4gICAgICAgICAgb3JpZ2luOiAnbWlncmF0aW9uJyxcbiAgICAgICAgICB0eXBlOiBleHRyaW5zaWNUeXBlLFxuICAgICAgICAgIGFkZHJlc3M6IGl0ZW0uYWRkcmVzcyxcbiAgICAgICAgICBleHRyaW5zaWNIYXNoOiBpdGVtLmV4dHJpbnNpY0hhc2gsXG4gICAgICAgICAgdGltZTogaXRlbS50aW1lLFxuICAgICAgICAgIHN0YXR1czogaXRlbS5pc1N1Y2Nlc3MgPyBFeHRyaW5zaWNTdGF0dXMuU1VDQ0VTUyA6IEV4dHJpbnNpY1N0YXR1cy5GQUlMLFxuICAgICAgICAgIGZyb206IGRpcmVjdGlvbiA9PT0gVHJhbnNhY3Rpb25EaXJlY3Rpb24uU0VORCA/IGl0ZW0uYWRkcmVzcyA6ICcnLFxuICAgICAgICAgIHRvOiBkaXJlY3Rpb24gPT09IFRyYW5zYWN0aW9uRGlyZWN0aW9uLlJFQ0VJVkVEID8gaXRlbS5hZGRyZXNzIDogJycsXG4gICAgICAgICAgYW1vdW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogaXRlbS5jaGFuZ2UsXG4gICAgICAgICAgICBkZWNpbWFsczogdHJhbnNmZXJBc3NldC5kZWNpbWFscyB8fCAxOCxcbiAgICAgICAgICAgIHN5bWJvbDogdHJhbnNmZXJBc3NldC5zeW1ib2xcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZlZToge1xuICAgICAgICAgICAgdmFsdWU6IGl0ZW0uZmVlLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG5hdGl2ZUFzc2V0LmRlY2ltYWxzLFxuICAgICAgICAgICAgc3ltYm9sOiBuYXRpdmVBc3NldC5zeW1ib2xcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uLFxuICAgICAgICAgIGNoYWluVHlwZTogaXNFdGhlcmV1bUFkZHJlc3MoaXRlbS5hZGRyZXNzKSA/IENoYWluVHlwZS5FVk0gOiBDaGFpblR5cGUuU1VCU1RSQVRFLFxuICAgICAgICAgIGNoYWluTmFtZTogY2hhaW5JbmZvLm5hbWUsXG4gICAgICAgICAgYmxvY2tOdW1iZXI6IDAsXG4gICAgICAgICAgYmxvY2tIYXNoOiAnJyxcbiAgICAgICAgICBkYXRhOiAnJyxcbiAgICAgICAgICBzaWduYXR1cmU6ICcnXG4gICAgICAgIH07XG5cbiAgICAgICAgbmV3VHJhbnNhY3Rpb25JdGVtcy5wdXNoKG5ld0l0ZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHN0YXRlLmhpc3RvcnlTZXJ2aWNlLmFkZEhpc3RvcnlJdGVtcyhuZXdUcmFuc2FjdGlvbkl0ZW1zKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgQmFzZU1pZ3JhdGlvbkpvYiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL0Jhc2UnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pZ3JhdGVXYWxsZXRSZWZlcmVuY2UgZXh0ZW5kcyBCYXNlTWlncmF0aW9uSm9iIHtcbiAgcHVibGljIG92ZXJyaWRlIGFzeW5jIHJ1biAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICB0aGlzLnN0YXRlLnNldHRpbmdTZXJ2aWNlLmdldFNldHRpbmdzKChjdXJyZW50U2V0dGluZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCB3YWxsZXRSZWZlcmVuY2UgPSB1dWlkdjQoKTtcblxuICAgICAgICAgIHRoaXMuc3RhdGUuc2V0dGluZ1NlcnZpY2Uuc2V0U2V0dGluZ3Moe1xuICAgICAgICAgICAgLi4uY3VycmVudFNldHRpbmdzLFxuICAgICAgICAgICAgd2FsbGV0UmVmZXJlbmNlOiB3YWxsZXRSZWZlcmVuY2VcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBEZWxldGVDaGFpbiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL21pZ3JhdGlvbi1zZXJ2aWNlL3NjcmlwdHMvRGVsZXRlQ2hhaW4nO1xuXG5pbXBvcnQgQmFzZU1pZ3JhdGlvbkpvYiBmcm9tICcuLi9CYXNlJztcbmltcG9ydCBBdXRvRW5hYmxlQ2hhaW5zVG9rZW5zIGZyb20gJy4vQXV0b0VuYWJsZUNoYWluc1Rva2Vucyc7XG5pbXBvcnQgRW5hYmxlVmFyYUNoYWluIGZyb20gJy4vRW5hYmxlVmFyYUNoYWluJztcbmltcG9ydCBNaWdyYXRlQXV0aFVybHMgZnJvbSAnLi9NaWdyYXRlQXV0aFVybHMnO1xuaW1wb3J0IE1pZ3JhdGVBdXRvTG9jayBmcm9tICcuL01pZ3JhdGVBdXRvTG9jayc7XG5pbXBvcnQgTWlncmF0ZUNoYWluUGF0cm9sIGZyb20gJy4vTWlncmF0ZUNoYWluUGF0cm9sJztcbmltcG9ydCBNaWdyYXRlRXRoUHJvdmlkZXIgZnJvbSAnLi9NaWdyYXRlRXRoUHJvdmlkZXInO1xuaW1wb3J0IE1pZ3JhdGVJbXBvcnRlZFRva2VuIGZyb20gJy4vTWlncmF0ZUltcG9ydGVkVG9rZW4nO1xuaW1wb3J0IE1pZ3JhdGVMZWRnZXJBY2NvdW50IGZyb20gJy4vTWlncmF0ZUxlZGdlckFjY291bnQnO1xuaW1wb3J0IE1pZ3JhdGVOZXR3b3JrU2V0dGluZ3MgZnJvbSAnLi9NaWdyYXRlTmV0d29ya1NldHRpbmdzJztcbmltcG9ydCBNaWdyYXRlUGlvbmVlclByb3ZpZGVyIGZyb20gJy4vTWlncmF0ZVBpb25lZXJQcm92aWRlcic7XG5pbXBvcnQgTWlncmF0ZVNldHRpbmdzIGZyb20gJy4vTWlncmF0ZVNldHRpbmdzJztcbmltcG9ydCBNaWdyYXRlVG9rZW5EZWNpbWFscyBmcm9tICcuL01pZ3JhdGVUb2tlbkRlY2ltYWxzJztcbmltcG9ydCBNaWdyYXRlVHJhbnNhY3Rpb25IaXN0b3J5IGZyb20gJy4vTWlncmF0ZVRyYW5zYWN0aW9uSGlzdG9yeSc7XG5pbXBvcnQgTWlncmF0ZVdhbGxldFJlZmVyZW5jZSBmcm9tICcuL01pZ3JhdGVXYWxsZXRSZWZlcmVuY2UnO1xuXG5leHBvcnQgY29uc3QgRVZFUllUSU1FID0gJ19fZXZlcnl0aW1lX18nO1xuXG5leHBvcnQgZGVmYXVsdCA8UmVjb3JkPHN0cmluZywgdHlwZW9mIEJhc2VNaWdyYXRpb25Kb2I+PiB7XG4gICcxLjAuMS0xMSc6IE1pZ3JhdGVOZXR3b3JrU2V0dGluZ3MsXG4gICcxLjAuMS0yMCc6IE1pZ3JhdGVJbXBvcnRlZFRva2VuLFxuICAnMS4wLjEtMzAnOiBNaWdyYXRlVHJhbnNhY3Rpb25IaXN0b3J5LFxuICAnMS4wLjEtNDAnOiBBdXRvRW5hYmxlQ2hhaW5zVG9rZW5zLFxuICAnMS4wLjEtNTAnOiBNaWdyYXRlU2V0dGluZ3MsXG4gICcxLjAuMS02MCc6IE1pZ3JhdGVBdXRoVXJscyxcbiAgJzEuMC4zLTAxJzogTWlncmF0ZUF1dG9Mb2NrLFxuICAnMS4wLjMtMDInOiBNaWdyYXRlQ2hhaW5QYXRyb2wsXG4gICcxLjAuOS0wMSc6IE1pZ3JhdGVMZWRnZXJBY2NvdW50LFxuICAnMS4wLjEyLTAyJzogTWlncmF0ZUV0aFByb3ZpZGVyLFxuICAnMS4xLjYtMDEnOiBNaWdyYXRlV2FsbGV0UmVmZXJlbmNlLFxuICAnMS4xLjcnOiBEZWxldGVDaGFpbixcbiAgJzEuMS4xMy0wMSc6IE1pZ3JhdGVUb2tlbkRlY2ltYWxzLFxuICAnMS4xLjE3LTAxJzogTWlncmF0ZVBpb25lZXJQcm92aWRlcixcbiAgJzEuMS4xNy0wMyc6IEVuYWJsZVZhcmFDaGFpblxuICAvLyBbYCR7RVZFUllUSU1FfS0xYF06IEF1dG9FbmFibGVDaGFpbnNUb2tlbnNcbn07XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgTm90aWZpY2F0aW9uLCBOb3RpZmljYXRpb25QYXJhbXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RpZmljYXRpb25TZXJ2aWNlIHtcbiAgcHJpdmF0ZSBub3RpZmljYXRpb25TdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxOb3RpZmljYXRpb25bXT4oW10pO1xuXG4gIHB1YmxpYyBnZXROb3RpZmljYXRpb25TdWJqZWN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5ub3RpZmljYXRpb25TdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIG5vdGlmeSAobm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb25QYXJhbXMpIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAvLyBHZXQgdmFsdWVzIGluIGxhc3QgMzAgc2Vjb25kcyBvbmx5XG4gICAgY29uc3Qgbm90aWZpY2F0aW9ucyA9IHRoaXMubm90aWZpY2F0aW9uU3ViamVjdC52YWx1ZS5maWx0ZXIoKG4pID0+IG4uaWQgPCAobm93IC0gMzAwMDApKTtcblxuICAgIC8vIFB1c2ggbm90aWZpY2F0aW9uXG4gICAgbm90aWZpY2F0aW9ucy5wdXNoKHsgLi4ubm90aWZpY2F0aW9uLCBpZDogbm93IH0pO1xuICAgIHRoaXMubm90aWZpY2F0aW9uU3ViamVjdC5uZXh0KG5vdGlmaWNhdGlvbnMpO1xuXG4gICAgaWYgKG5vdGlmaWNhdGlvbi5ub3RpZnlWaWFCcm93c2VyKSB7XG4gICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmNyZWF0ZUJyb3dzZXJOb3RpZmljYXRpb24obm90aWZpY2F0aW9uLnRpdGxlLCBub3RpZmljYXRpb24ubWVzc2FnZSwgbm90aWZpY2F0aW9uPy5hY3Rpb24/LnVybCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ3JlYXRlIGEgbmV3IGNocm9tZSBub3RpZmljYXRpb24gd2l0aCBsaW5rXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlQnJvd3Nlck5vdGlmaWNhdGlvbiAodGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBsaW5rPzogc3RyaW5nKTogdm9pZCB7XG4gICAgY2hyb21lPy5ub3RpZmljYXRpb25zPy5jcmVhdGUoe1xuICAgICAgdHlwZTogJ2Jhc2ljJyxcbiAgICAgIHRpdGxlLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIGljb25Vcmw6ICcuL2ltYWdlcy9pY29uLTEyOC5wbmcnLFxuICAgICAgcHJpb3JpdHk6IDIsXG4gICAgICBpc0NsaWNrYWJsZTogISFsaW5rXG4gICAgfSwgKG5vdGlmaWNhdGlvbklkOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgIGNocm9tZS5ub3RpZmljYXRpb25zLm9uQ2xpY2tlZC5hZGRMaXN0ZW5lcigobklkKSA9PiB7XG4gICAgICAgICAgaWYgKG5JZCA9PT0gbm90aWZpY2F0aW9uSWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGxpbmspO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBQcmljZUpzb24gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmludGVyZmFjZSBHZWNrb0l0ZW0ge1xuICBpZDogc3RyaW5nLFxuICBuYW1lOiBzdHJpbmcsXG4gIGN1cnJlbnRfcHJpY2U6IG51bWJlcixcbiAgcHJpY2VfY2hhbmdlXzI0aDogbnVtYmVyLFxuICBzeW1ib2w6IHN0cmluZ1xufVxuXG5sZXQgdXNlQmFja3VwQXBpID0gZmFsc2U7XG5cbmV4cG9ydCBjb25zdCBnZXRUb2tlblByaWNlID0gYXN5bmMgKHByaWNlSWRzOiBTZXQ8c3RyaW5nPiwgY3VycmVuY3kgPSAndXNkJyk6IFByb21pc2U8UHJpY2VKc29uPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaWRTdHIgPSBBcnJheS5mcm9tKHByaWNlSWRzKS5qb2luKCcsJyk7XG4gICAgbGV0IHJlcztcblxuICAgIGlmICghdXNlQmFja3VwQXBpKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXMgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHBzOi8vYXBpLmNvaW5nZWNrby5jb20vYXBpL3YzL2NvaW5zL21hcmtldHM/dnNfY3VycmVuY3k9JHtjdXJyZW5jeX0mcGVyX3BhZ2U9MjUwJmlkcz0ke2lkU3RyfWApO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHVzZUJhY2t1cEFwaSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHVzZUJhY2t1cEFwaSB8fCByZXM/LnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICB1c2VCYWNrdXBBcGkgPSB0cnVlO1xuICAgICAgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KGBodHRwczovL2NoYWluLWRhdGEuc3Vid2FsbGV0LmFwcC9hcGkvcHJpY2UvZ2V0P2lkcz0ke2lkU3RyfWApO1xuICAgIH1cblxuICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGdldCB0b2tlbiBwcmljZScpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IHJlcy5kYXRhIGFzIEFycmF5PEdlY2tvSXRlbT4gfHwgW107XG4gICAgY29uc3QgcHJpY2VNYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBjb25zdCBwcmljZTI0aE1hcDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuXG4gICAgcmVzcG9uc2VEYXRhLmZvckVhY2goKHZhbCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFByaWNlID0gdmFsLmN1cnJlbnRfcHJpY2UgfHwgMDtcbiAgICAgIGNvbnN0IHByaWNlMjRoID0gY3VycmVudFByaWNlIC0gKHZhbC5wcmljZV9jaGFuZ2VfMjRoIHx8IDApO1xuXG4gICAgICBwcmljZU1hcFt2YWwuaWRdID0gY3VycmVudFByaWNlO1xuICAgICAgcHJpY2UyNGhNYXBbdmFsLmlkXSA9IHByaWNlMjRoO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGN1cnJlbmN5LFxuICAgICAgcHJpY2VNYXAsXG4gICAgICBwcmljZTI0aE1hcFxuICAgIH0gYXMgUHJpY2VKc29uO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgdGhyb3cgZXJyO1xuICB9XG59O1xuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1rb25pIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IFByaWNlSnNvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgQ1JPTl9SRUZSRVNIX1BSSUNFX0lOVEVSVkFMIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgQ3JvblNlcnZpY2VJbnRlcmZhY2UsIFBlcnNpc3REYXRhU2VydmljZUludGVyZmFjZSwgU2VydmljZVN0YXR1cywgU3RvcHBhYmxlU2VydmljZUludGVyZmFjZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvYmFzZS90eXBlcyc7XG5pbXBvcnQgeyBDaGFpblNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UnO1xuaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9ldmVudC1zZXJ2aWNlJztcbmltcG9ydCB7IGdldFRva2VuUHJpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3ByaWNlLXNlcnZpY2UvY29pbmdlY2tvJztcbmltcG9ydCBEYXRhYmFzZVNlcnZpY2UgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UvRGF0YWJhc2VTZXJ2aWNlJztcbmltcG9ydCB7IGNyZWF0ZVByb21pc2VIYW5kbGVyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscy9wcm9taXNlJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5jb25zdCBERUZBVUxUX1BSSUNFX1NVQkpFQ1Q6IFByaWNlSnNvbiA9IHsgcmVhZHk6IGZhbHNlLCBjdXJyZW5jeTogJ3VzZCcsIHByaWNlTWFwOiB7fSwgcHJpY2UyNGhNYXA6IHt9IH07XG5cbmV4cG9ydCBjbGFzcyBQcmljZVNlcnZpY2UgaW1wbGVtZW50cyBTdG9wcGFibGVTZXJ2aWNlSW50ZXJmYWNlLCBQZXJzaXN0RGF0YVNlcnZpY2VJbnRlcmZhY2UsIENyb25TZXJ2aWNlSW50ZXJmYWNlIHtcbiAgc3RhdHVzOiBTZXJ2aWNlU3RhdHVzO1xuICBwcml2YXRlIGRiU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlO1xuICBwcml2YXRlIGV2ZW50U2VydmljZTogRXZlbnRTZXJ2aWNlO1xuICBwcml2YXRlIGNoYWluU2VydmljZTogQ2hhaW5TZXJ2aWNlO1xuICBwcml2YXRlIHByaWNlU3ViamVjdDogQmVoYXZpb3JTdWJqZWN0PFByaWNlSnNvbj4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0KERFRkFVTFRfUFJJQ0VfU1VCSkVDVCk7XG4gIHByaXZhdGUgcmVmcmVzaFRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHByaWNlSWRzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgY29uc3RydWN0b3IgKGRiU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlLCBldmVudFNlcnZpY2U6IEV2ZW50U2VydmljZSwgY2hhaW5TZXJ2aWNlOiBDaGFpblNlcnZpY2UpIHtcbiAgICB0aGlzLnN0YXR1cyA9IFNlcnZpY2VTdGF0dXMuTk9UX0lOSVRJQUxJWkVEO1xuICAgIHRoaXMuZGJTZXJ2aWNlID0gZGJTZXJ2aWNlO1xuICAgIHRoaXMuZXZlbnRTZXJ2aWNlID0gZXZlbnRTZXJ2aWNlO1xuICAgIHRoaXMuY2hhaW5TZXJ2aWNlID0gY2hhaW5TZXJ2aWNlO1xuXG4gICAgdGhpcy5pbml0KCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH1cblxuICBhc3luYyBnZXRQcmljZSAoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnByaWNlU3ViamVjdC52YWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJpY2VTdWJqZWN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcmljZVN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJpY2VJZHMgKCkge1xuICAgIGNvbnN0IHByaWNlSWRMaXN0ID0gT2JqZWN0LnZhbHVlcyh0aGlzLmNoYWluU2VydmljZS5nZXRBc3NldFJlZ2lzdHJ5KCkpXG4gICAgICAubWFwKChhKSA9PiBhLnByaWNlSWQpXG4gICAgICAuZmlsdGVyKChhKSA9PiBhKSBhcyBzdHJpbmdbXTtcblxuICAgIHJldHVybiBuZXcgU2V0KHByaWNlSWRMaXN0KTtcbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoUHJpY2VEYXRhIChwcmljZUlkcz86IFNldDxzdHJpbmc+KSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVmcmVzaFRpbWVvdXQpO1xuICAgIHRoaXMucHJpY2VJZHMgPSBwcmljZUlkcyB8fCB0aGlzLmdldFByaWNlSWRzKCk7XG5cbiAgICAvLyBVcGRhdGUgZm9yIHRva2VucyBwcmljZVxuICAgIGdldFRva2VuUHJpY2UodGhpcy5wcmljZUlkcylcbiAgICAgIC50aGVuKChycykgPT4ge1xuICAgICAgICB0aGlzLnByaWNlU3ViamVjdC5uZXh0KHsgLi4ucnMsIHJlYWR5OiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmRiU2VydmljZS51cGRhdGVQcmljZVN0b3JlKHJzKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbiAgICB0aGlzLnJlZnJlc2hUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnJlZnJlc2hQcmljZURhdGEuYmluZCh0aGlzKSwgQ1JPTl9SRUZSRVNIX1BSSUNFX0lOVEVSVkFMKTtcbiAgfVxuXG4gIGFzeW5jIGluaXQgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuc3RhdHVzID0gU2VydmljZVN0YXR1cy5JTklUSUFMSVpJTkc7XG4gICAgLy8gRmV0Y2ggZGF0YSBmcm9tIHN0b3JhZ2VcbiAgICBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XG5cbiAgICBjb25zdCBldmVudEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdQcmljZUlkcyA9IHRoaXMuZ2V0UHJpY2VJZHMoKTtcblxuICAgICAgLy8gQ29tcGFyZSB0d28gc2V0IG5ld1ByaWNlSWRzIGFuZCB0aGlzLnByaWNlSWRzXG4gICAgICBpZiAobmV3UHJpY2VJZHMuc2l6ZSAhPT0gdGhpcy5wcmljZUlkcy5zaXplIHx8ICFBcnJheS5mcm9tKG5ld1ByaWNlSWRzKS5ldmVyeSgodikgPT4gdGhpcy5wcmljZUlkcy5oYXModikpKSB7XG4gICAgICAgIHRoaXMucHJpY2VJZHMgPSBuZXdQcmljZUlkcztcbiAgICAgICAgdGhpcy5yZWZyZXNoUHJpY2VEYXRhKHRoaXMucHJpY2VJZHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnN0YXR1cyA9IFNlcnZpY2VTdGF0dXMuSU5JVElBTElaRUQ7XG5cbiAgICB0aGlzLmV2ZW50U2VydmljZS5vbignYXNzZXQudXBkYXRlU3RhdGUnLCBldmVudEhhbmRsZXIpO1xuICB9XG5cbiAgYXN5bmMgbG9hZERhdGEgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmRiU2VydmljZS5nZXRQcmljZVN0b3JlKCk7XG5cbiAgICB0aGlzLnByaWNlU3ViamVjdC5uZXh0KGRhdGEgfHwgREVGQVVMVF9QUklDRV9TVUJKRUNUKTtcbiAgfVxuXG4gIGFzeW5jIHBlcnNpc3REYXRhICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmRiU2VydmljZS51cGRhdGVQcmljZVN0b3JlKHRoaXMucHJpY2VTdWJqZWN0LnZhbHVlKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgfVxuXG4gIHN0YXJ0UHJvbWlzZUhhbmRsZXIgPSBjcmVhdGVQcm9taXNlSGFuZGxlcjx2b2lkPigpO1xuICBhc3luYyBzdGFydCAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuc3RhdHVzID09PSBTZXJ2aWNlU3RhdHVzLlNUQVJURUQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5ldmVudFNlcnZpY2Uud2FpdEFzc2V0UmVhZHk7XG4gICAgICB0aGlzLnN0YXJ0UHJvbWlzZUhhbmRsZXIgPSBjcmVhdGVQcm9taXNlSGFuZGxlcjx2b2lkPigpO1xuICAgICAgdGhpcy5zdGF0dXMgPSBTZXJ2aWNlU3RhdHVzLlNUQVJUSU5HO1xuICAgICAgYXdhaXQgdGhpcy5zdGFydENyb24oKTtcbiAgICAgIHRoaXMuc3RhdHVzID0gU2VydmljZVN0YXR1cy5TVEFSVEVEO1xuICAgICAgdGhpcy5zdGFydFByb21pc2VIYW5kbGVyLnJlc29sdmUoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLnN0YXJ0UHJvbWlzZUhhbmRsZXIucmVqZWN0KGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHN0YXJ0Q3JvbiAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5yZWZyZXNoUHJpY2VEYXRhKCk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBzdG9wUHJvbWlzZUhhbmRsZXIgPSBjcmVhdGVQcm9taXNlSGFuZGxlcjx2b2lkPigpO1xuICBhc3luYyBzdG9wICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zdGF0dXMgPSBTZXJ2aWNlU3RhdHVzLlNUT1BQSU5HO1xuICAgICAgdGhpcy5zdG9wUHJvbWlzZUhhbmRsZXIgPSBjcmVhdGVQcm9taXNlSGFuZGxlcjx2b2lkPigpO1xuICAgICAgYXdhaXQgdGhpcy5zdG9wQ3JvbigpO1xuICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0RGF0YSgpO1xuICAgICAgdGhpcy5zdGF0dXMgPSBTZXJ2aWNlU3RhdHVzLlNUT1BQRUQ7XG4gICAgICB0aGlzLnN0b3BQcm9taXNlSGFuZGxlci5yZXNvbHZlKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5zdG9wUHJvbWlzZUhhbmRsZXIucmVqZWN0KGUpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3BDcm9uICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWZyZXNoVGltZW91dCk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gIH1cblxuICB3YWl0Rm9yU3RhcnRlZCAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnRQcm9taXNlSGFuZGxlci5wcm9taXNlO1xuICB9XG5cbiAgd2FpdEZvclN0b3BwZWQgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnN0b3BQcm9taXNlSGFuZGxlci5wcm9taXNlO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuZXhwb3J0IGNvbnN0IEVYVEVOU0lPTl9SRVFVRVNUX1VSTCA9ICdleHRlbnNpb24nO1xuXG5leHBvcnQgY29uc3QgUFJFREVGSU5FRF9DSEFJTl9EQVBQX0NIQUlOX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xuICAncG9ydGFsLmFzdGFyLm5ldHdvcmsnOiBbJ2FzdGFyJywgJ2FzdGFyRXZtJ10sXG4gICdhcHBzLm1vb25iZWFtLm5ldHdvcmsnOiBbJ21vb25iZWFtJywgJ21vb25yaXZlciddLFxuICAnYXBwLnN0ZWxsYXN3YXAuY29tJzogWydtb29uYmVhbSddXG59O1xuXG5leHBvcnQgY29uc3QgV0VCX0FQUF9VUkwgPSBbXG4gIC8vLyBXZWIgYXBwXG4gICdsb2NhbGhvc3Q6OTAwMCcsIC8vIExvY2FsXG4gICdzdWJ3YWxsZXQtd2ViYXBwLnBhZ2VzLmRldicsIC8vIFB1bGwgcmVxdWVzdCBidWlsZFxuICAnd2ViLnN1YndhbGxldC5hcHAnIC8vIFByb2R1Y3Rpb25cbl07XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBBdXRoUmVxdWVzdFYyLCBSZXN1bHRSZXNvbHZlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgQWNjb3VudEF1dGhUeXBlLCBBdXRob3JpemVSZXF1ZXN0LCBSZXF1ZXN0QXV0aG9yaXplVGFiLCBSZXNvbHZlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC90eXBlcyc7XG5pbXBvcnQgeyBDaGFpblNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UnO1xuaW1wb3J0IHsgX2lzQ2hhaW5Fdm1Db21wYXRpYmxlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlL3V0aWxzJztcbmltcG9ydCB7IEtleXJpbmdTZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9rZXlyaW5nLXNlcnZpY2UnO1xuaW1wb3J0IFJlcXVlc3RTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlJztcbmltcG9ydCB7IFBSRURFRklORURfQ0hBSU5fREFQUF9DSEFJTl9NQVAsIFdFQl9BUFBfVVJMIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9yZXF1ZXN0LXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IEF1dGhVcmxzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9yZXF1ZXN0LXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IEF1dGhvcml6ZVN0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc3RvcmVzL0F1dGhvcml6ZSc7XG5pbXBvcnQgeyBnZXREb21haW5Gcm9tVXJsLCBzdHJpcFVybCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IHsgZ2V0SWQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL2dldElkJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5pbXBvcnQgeyBpc0V0aGVyZXVtQWRkcmVzcyB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsLWNyeXB0byc7XG5cbmNvbnN0IEFVVEhfVVJMU19LRVkgPSAnYXV0aFVybHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRoUmVxdWVzdEhhbmRsZXIge1xuICByZWFkb25seSAjcmVxdWVzdFNlcnZpY2U6IFJlcXVlc3RTZXJ2aWNlO1xuICByZWFkb25seSAjY2hhaW5TZXJ2aWNlOiBDaGFpblNlcnZpY2U7XG4gIHByaXZhdGUgcmVhZG9ubHkgYXV0aG9yaXplU3RvcmUgPSBuZXcgQXV0aG9yaXplU3RvcmUoKTtcbiAgcmVhZG9ubHkgI2F1dGhSZXF1ZXN0c1YyOiBSZWNvcmQ8c3RyaW5nLCBBdXRoUmVxdWVzdFYyPiA9IHt9O1xuICBwcml2YXRlIGF1dGhvcml6ZUNhY2hlZDogQXV0aFVybHMgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgYXV0aG9yaXplVXJsU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8QXV0aFVybHM+KHt9KTtcbiAgcHJpdmF0ZSByZWFkb25seSBldm1DaGFpblN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PEF1dGhVcmxzPih7fSk7XG4gIHB1YmxpYyByZWFkb25seSBhdXRoU3ViamVjdFYyOiBCZWhhdmlvclN1YmplY3Q8QXV0aG9yaXplUmVxdWVzdFtdPiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8QXV0aG9yaXplUmVxdWVzdFtdPihbXSk7XG5cbiAgY29uc3RydWN0b3IgKHJlcXVlc3RTZXJ2aWNlOiBSZXF1ZXN0U2VydmljZSwgY2hhaW5TZXJ2aWNlOiBDaGFpblNlcnZpY2UsIHByaXZhdGUga2V5cmluZ1NlcnZpY2U6IEtleXJpbmdTZXJ2aWNlKSB7XG4gICAgdGhpcy4jcmVxdWVzdFNlcnZpY2UgPSByZXF1ZXN0U2VydmljZTtcbiAgICB0aGlzLiNjaGFpblNlcnZpY2UgPSBjaGFpblNlcnZpY2U7XG4gIH1cblxuICBwcml2YXRlIGdldEFkZHJlc3NMaXN0ICh2YWx1ZSA9IGZhbHNlKTogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4ge1xuICAgIGNvbnN0IGFkZHJlc3NMaXN0ID0gT2JqZWN0LmtleXModGhpcy5rZXlyaW5nU2VydmljZS5hY2NvdW50cyk7XG5cbiAgICByZXR1cm4gYWRkcmVzc0xpc3QucmVkdWNlKChhZGRyZXNzTGlzdCwgdikgPT4gKHsgLi4uYWRkcmVzc0xpc3QsIFt2XTogdmFsdWUgfSksIHt9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbnVtQXV0aFJlcXVlc3RzVjIgKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuI2F1dGhSZXF1ZXN0c1YyKS5sZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIGdldCBhbGxBdXRoUmVxdWVzdHNWMiAoKTogQXV0aG9yaXplUmVxdWVzdFtdIHtcbiAgICByZXR1cm4gT2JqZWN0XG4gICAgICAudmFsdWVzKHRoaXMuI2F1dGhSZXF1ZXN0c1YyKVxuICAgICAgLm1hcCgoeyBpZCwgcmVxdWVzdCwgdXJsIH0pOiBBdXRob3JpemVSZXF1ZXN0ID0+ICh7IGlkLCByZXF1ZXN0LCB1cmwgfSkpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVJY29uQXV0aFYyIChzaG91bGRDbG9zZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmF1dGhTdWJqZWN0VjIubmV4dCh0aGlzLmFsbEF1dGhSZXF1ZXN0c1YyKTtcbiAgICB0aGlzLiNyZXF1ZXN0U2VydmljZS51cGRhdGVJY29uVjIoc2hvdWxkQ2xvc2UpO1xuICB9XG5cbiAgcHVibGljIHNldEF1dGhvcml6ZSAoZGF0YTogQXV0aFVybHMsIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuYXV0aG9yaXplU3RvcmUuc2V0KEFVVEhfVVJMU19LRVksIGRhdGEsICgpID0+IHtcbiAgICAgIHRoaXMuYXV0aG9yaXplQ2FjaGVkID0gZGF0YTtcbiAgICAgIHRoaXMuZXZtQ2hhaW5TdWJqZWN0Lm5leHQodGhpcy5hdXRob3JpemVDYWNoZWQpO1xuICAgICAgdGhpcy5hdXRob3JpemVVcmxTdWJqZWN0Lm5leHQodGhpcy5hdXRob3JpemVDYWNoZWQpO1xuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdXRob3JpemUgKHVwZGF0ZTogKHZhbHVlOiBBdXRoVXJscykgPT4gdm9pZCk6IHZvaWQge1xuICAgIC8vIFRoaXMgYWN0aW9uIGNhbiBiZSB1c2UgbWFueSBieSBEQXBwIGludGVyYWN0aW9uID0+IGNhY2hpbmcgaXQgaW4gbWVtb3J5XG4gICAgaWYgKHRoaXMuYXV0aG9yaXplQ2FjaGVkKSB7XG4gICAgICB1cGRhdGUodGhpcy5hdXRob3JpemVDYWNoZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF1dGhvcml6ZVN0b3JlLmdldCgnYXV0aFVybHMnLCAoZGF0YSkgPT4ge1xuICAgICAgICB0aGlzLmF1dGhvcml6ZUNhY2hlZCA9IGRhdGEgfHwge307XG4gICAgICAgIHRoaXMuZXZtQ2hhaW5TdWJqZWN0Lm5leHQodGhpcy5hdXRob3JpemVDYWNoZWQpO1xuICAgICAgICB0aGlzLmF1dGhvcml6ZVVybFN1YmplY3QubmV4dCh0aGlzLmF1dGhvcml6ZUNhY2hlZCk7XG4gICAgICAgIHVwZGF0ZSh0aGlzLmF1dGhvcml6ZUNhY2hlZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0QXV0aExpc3QgKCk6IFByb21pc2U8QXV0aFVybHM+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8QXV0aFVybHM+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuZ2V0QXV0aG9yaXplKChyczogQXV0aFVybHMpID0+IHtcbiAgICAgICAgcmVzb2x2ZShycyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXREQXBwQ2hhaW5JbmZvIChvcHRpb25zOiB7YWNjZXNzVHlwZTogQWNjb3VudEF1dGhUeXBlLCBhdXRvQWN0aXZlPzogYm9vbGVhbiwgZGVmYXVsdENoYWluPzogc3RyaW5nLCB1cmw/OiBzdHJpbmd9KTogX0NoYWluSW5mbyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgY2hhaW5JbmZvTWFwcyA9IHRoaXMuI2NoYWluU2VydmljZS5nZXRDaGFpbkluZm9NYXAoKTtcbiAgICBjb25zdCBjaGFpblN0YXRlTWFwID0gdGhpcy4jY2hhaW5TZXJ2aWNlLmdldENoYWluU3RhdGVNYXAoKTtcbiAgICBsZXQgZGVmYXVsdENoYWluID0gb3B0aW9ucy5kZWZhdWx0Q2hhaW47XG4gICAgbGV0IG5lZWRFbmFibGVDaGFpbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAob3B0aW9ucy51cmwpIHtcbiAgICAgIGNvbnN0IGRvbWFpbiA9IGdldERvbWFpbkZyb21Vcmwob3B0aW9ucy51cmwpO1xuICAgICAgY29uc3QgcHJlZGVmaW5lZFN1cHBvcnRDaGFpbnMgPSBQUkVERUZJTkVEX0NIQUlOX0RBUFBfQ0hBSU5fTUFQW2RvbWFpbl07XG5cbiAgICAgIGlmICghZGVmYXVsdENoYWluICYmIHByZWRlZmluZWRTdXBwb3J0Q2hhaW5zKSB7XG4gICAgICAgIGRlZmF1bHRDaGFpbiA9IHByZWRlZmluZWRTdXBwb3J0Q2hhaW5zWzBdO1xuICAgICAgICBvcHRpb25zLmF1dG9BY3RpdmUgJiYgbmVlZEVuYWJsZUNoYWlucy5wdXNoKC4uLnByZWRlZmluZWRTdXBwb3J0Q2hhaW5zKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgY2hhaW5JbmZvOiBfQ2hhaW5JbmZvIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKFsnYm90aCcsICdldm0nXS5pbmNsdWRlcyhvcHRpb25zLmFjY2Vzc1R5cGUpKSB7XG4gICAgICBjb25zdCBldm1DaGFpbnMgPSBPYmplY3QudmFsdWVzKGNoYWluSW5mb01hcHMpLmZpbHRlcihfaXNDaGFpbkV2bUNvbXBhdGlibGUpO1xuXG4gICAgICBjaGFpbkluZm8gPSAoZGVmYXVsdENoYWluID8gY2hhaW5JbmZvTWFwc1tkZWZhdWx0Q2hhaW5dIDogZXZtQ2hhaW5zLmZpbmQoKGNoYWluKSA9PiBjaGFpblN0YXRlTWFwW2NoYWluLnNsdWddPy5hY3RpdmUpKSB8fCBldm1DaGFpbnNbMF07XG5cbiAgICAgIGlmIChvcHRpb25zLmF1dG9BY3RpdmUpIHtcbiAgICAgICAgaWYgKCFuZWVkRW5hYmxlQ2hhaW5zLmluY2x1ZGVzKGNoYWluSW5mbz8uc2x1ZykpIHtcbiAgICAgICAgICBuZWVkRW5hYmxlQ2hhaW5zLnB1c2goY2hhaW5JbmZvPy5zbHVnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIG5lZWRFbmFibGVDaGFpbnMgPSBuZWVkRW5hYmxlQ2hhaW5zLmZpbHRlcigoc2x1ZykgPT4gIWNoYWluU3RhdGVNYXBbc2x1Z10/LmFjdGl2ZSk7XG4gICAgbmVlZEVuYWJsZUNoYWlucy5sZW5ndGggPiAwICYmIHRoaXMuI2NoYWluU2VydmljZS5lbmFibGVDaGFpbnMobmVlZEVuYWJsZUNoYWlucyk7XG5cbiAgICByZXR1cm4gY2hhaW5JbmZvO1xuICB9XG5cbiAgcHJpdmF0ZSBhdXRoQ29tcGxldGVWMiA9IChpZDogc3RyaW5nLCB1cmw6IHN0cmluZywgcmVzb2x2ZTogKHJlc3VsdDogYm9vbGVhbikgPT4gdm9pZCwgcmVqZWN0OiAoZXJyb3I6IEVycm9yKSA9PiB2b2lkKTogUmVzb2x2ZXI8UmVzdWx0UmVzb2x2ZXI+ID0+IHtcbiAgICBjb25zdCBpc0FsbG93ZWRNYXAgPSB0aGlzLmdldEFkZHJlc3NMaXN0KCk7XG5cbiAgICBjb25zdCBjb21wbGV0ZSA9IChyZXN1bHQ6IGJvb2xlYW4gfCBFcnJvciwgY2I6ICgpID0+IHZvaWQsIGFjY291bnRzPzogc3RyaW5nW10pID0+IHtcbiAgICAgIGNvbnN0IGlzQWxsb3dlZCA9IHJlc3VsdCA9PT0gdHJ1ZTtcbiAgICAgIGxldCBpc0NhbmNlbGxlZCA9IGZhbHNlO1xuXG4gICAgICBpZiAoIWlzQWxsb3dlZCAmJiB0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0JyAmJiByZXN1bHQubWVzc2FnZSA9PT0gJ0NhbmNlbGxlZCcpIHtcbiAgICAgICAgaXNDYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWNjb3VudHMgJiYgYWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgIGFjY291bnRzLmZvckVhY2goKGFjYykgPT4ge1xuICAgICAgICAgIGlzQWxsb3dlZE1hcFthY2NdID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmV0dXJuLWFzc2lnblxuICAgICAgICBPYmplY3Qua2V5cyhpc0FsbG93ZWRNYXApLmZvckVhY2goKGFkZHJlc3MpID0+IGlzQWxsb3dlZE1hcFthZGRyZXNzXSA9IGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBhY2NvdW50QXV0aFR5cGUsIGlkU3RyLCByZXF1ZXN0OiB7IGFsbG93ZWRBY2NvdW50cywgb3JpZ2luIH0sIHVybCB9ID0gdGhpcy4jYXV0aFJlcXVlc3RzVjJbaWRdO1xuXG4gICAgICBpZiAoYWNjb3VudEF1dGhUeXBlICE9PSAnYm90aCcpIHtcbiAgICAgICAgY29uc3QgaXNFdm1UeXBlID0gYWNjb3VudEF1dGhUeXBlID09PSAnZXZtJztcblxuICAgICAgICBjb25zdCBiYWNrdXBBbGxvd2VkID0gWy4uLihhbGxvd2VkQWNjb3VudHMgfHwgW10pXS5maWx0ZXIoKGEpID0+IHtcbiAgICAgICAgICBjb25zdCBpc0V0aCA9IGlzRXRoZXJldW1BZGRyZXNzKGEpO1xuXG4gICAgICAgICAgcmV0dXJuIGlzRXZtVHlwZSA/ICFpc0V0aCA6IGlzRXRoO1xuICAgICAgICB9KTtcblxuICAgICAgICBiYWNrdXBBbGxvd2VkLmZvckVhY2goKGFjYykgPT4ge1xuICAgICAgICAgIGlzQWxsb3dlZE1hcFthY2NdID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlZmF1bHRFdm1OZXR3b3JrS2V5ID0gdGhpcy5nZXREQXBwQ2hhaW5JbmZvKHsgYWNjZXNzVHlwZTogYWNjb3VudEF1dGhUeXBlLCB1cmwsIGF1dG9BY3RpdmU6ICFpc0NhbmNlbGxlZCAmJiBpc0FsbG93ZWQgfSk/LnNsdWc7XG5cbiAgICAgIHRoaXMuZ2V0QXV0aG9yaXplKCh2YWx1ZSkgPT4ge1xuICAgICAgICBsZXQgYXV0aG9yaXplTGlzdCA9IHt9IGFzIEF1dGhVcmxzO1xuXG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIGF1dGhvcml6ZUxpc3QgPSB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV4aXN0ZWQgPSBhdXRob3JpemVMaXN0W3N0cmlwVXJsKHVybCldO1xuXG4gICAgICAgIC8vIE9uIGNhbmNlbCBkb24ndCBzYXZlIGFueXRoaW5nXG4gICAgICAgIGlmIChpc0NhbmNlbGxlZCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLiNhdXRoUmVxdWVzdHNWMltpZF07XG4gICAgICAgICAgdGhpcy51cGRhdGVJY29uQXV0aFYyKHRydWUpO1xuICAgICAgICAgIGNiKCk7XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhdXRob3JpemVMaXN0W3N0cmlwVXJsKHVybCldID0ge1xuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgIGlkOiBpZFN0cixcbiAgICAgICAgICBpc0FsbG93ZWQsXG4gICAgICAgICAgaXNBbGxvd2VkTWFwLFxuICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICB1cmwsXG4gICAgICAgICAgYWNjb3VudEF1dGhUeXBlOiAoZXhpc3RlZCAmJiBleGlzdGVkLmFjY291bnRBdXRoVHlwZSAhPT0gYWNjb3VudEF1dGhUeXBlKSA/ICdib3RoJyA6IGFjY291bnRBdXRoVHlwZSxcbiAgICAgICAgICBjdXJyZW50RXZtTmV0d29ya0tleTogZXhpc3RlZCA/IGV4aXN0ZWQuY3VycmVudEV2bU5ldHdvcmtLZXkgOiBkZWZhdWx0RXZtTmV0d29ya0tleVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0QXV0aG9yaXplKGF1dGhvcml6ZUxpc3QsICgpID0+IHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLiNhdXRoUmVxdWVzdHNWMltpZF07XG4gICAgICAgICAgdGhpcy51cGRhdGVJY29uQXV0aFYyKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVqZWN0OiAoZXJyb3I6IEVycm9yKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbXBsZXRlKGVycm9yLCAoKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcmVzb2x2ZTogKHsgYWNjb3VudHMsIHJlc3VsdCB9OiBSZXN1bHRSZXNvbHZlcik6IHZvaWQgPT4ge1xuICAgICAgICBjb21wbGV0ZShyZXN1bHQsICgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGFjY291bnRzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHB1YmxpYyBhc3luYyBhdXRob3JpemVVcmxWMiAodXJsOiBzdHJpbmcsIHJlcXVlc3Q6IFJlcXVlc3RBdXRob3JpemVUYWIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBsZXQgYXV0aExpc3QgPSBhd2FpdCB0aGlzLmdldEF1dGhMaXN0KCk7XG4gICAgY29uc3QgYWNjb3VudEF1dGhUeXBlID0gcmVxdWVzdC5hY2NvdW50QXV0aFR5cGUgfHwgJ3N1YnN0cmF0ZSc7XG5cbiAgICByZXF1ZXN0LmFjY291bnRBdXRoVHlwZSA9IGFjY291bnRBdXRoVHlwZTtcblxuICAgIGlmICghYXV0aExpc3QpIHtcbiAgICAgIGF1dGhMaXN0ID0ge307XG4gICAgfVxuXG4gICAgY29uc3QgaWRTdHIgPSBzdHJpcFVybCh1cmwpO1xuICAgIC8vIERvIG5vdCBlbnF1ZXVlIGR1cGxpY2F0ZSBhdXRob3JpemF0aW9uIHJlcXVlc3RzLlxuICAgIGNvbnN0IGlzRHVwbGljYXRlID0gT2JqZWN0LnZhbHVlcyh0aGlzLiNhdXRoUmVxdWVzdHNWMilcbiAgICAgIC5zb21lKChfcmVxdWVzdCkgPT4gX3JlcXVlc3QuaWRTdHIgPT09IGlkU3RyICYmIF9yZXF1ZXN0LmFjY291bnRBdXRoVHlwZSA9PT0gcmVxdWVzdC5hY2NvdW50QXV0aFR5cGUpO1xuXG4gICAgYXNzZXJ0KCFpc0R1cGxpY2F0ZSwgJ1RoZSBzb3VyY2Uge3t1cmx9fSBoYXMgYSBwZW5kaW5nIGF1dGhvcml6YXRpb24gcmVxdWVzdCcucmVwbGFjZSgne3t1cmx9fScsIHVybCkpO1xuXG4gICAgY29uc3QgZXhpc3RlZEF1dGggPSBhdXRoTGlzdFtpZFN0cl07XG4gICAgY29uc3QgZXhpc3RlZEFjY291bnRBdXRoVHlwZSA9IGV4aXN0ZWRBdXRoPy5hY2NvdW50QXV0aFR5cGU7XG4gICAgY29uc3QgY29uZmlybUFub3RoZXJUeXBlID0gZXhpc3RlZEFjY291bnRBdXRoVHlwZSAhPT0gJ2JvdGgnICYmIGV4aXN0ZWRBY2NvdW50QXV0aFR5cGUgIT09IHJlcXVlc3QuYWNjb3VudEF1dGhUeXBlO1xuXG4gICAgaWYgKHJlcXVlc3QucmVDb25maXJtICYmIGV4aXN0ZWRBdXRoKSB7XG4gICAgICByZXF1ZXN0Lm9yaWdpbiA9IGV4aXN0ZWRBdXRoLm9yaWdpbjtcbiAgICB9XG5cbiAgICAvLyBSZWNvbmZpcm0gaWYgY2hlY2sgYXV0aCBmb3IgZW1wdHkgbGlzdFxuICAgIGlmIChleGlzdGVkQXV0aCkge1xuICAgICAgY29uc3QgaW5CbGFja0xpc3QgPSBleGlzdGVkQXV0aCAmJiAhZXhpc3RlZEF1dGguaXNBbGxvd2VkO1xuXG4gICAgICBpZiAoaW5CbGFja0xpc3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc291cmNlIHt7dXJsfX0gaXMgbm90IGFsbG93ZWQgdG8gaW50ZXJhY3Qgd2l0aCB0aGlzIGV4dGVuc2lvbicucmVwbGFjZSgne3t1cmx9fScsIHVybCkpO1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LmFsbG93ZWRBY2NvdW50cyA9IE9iamVjdC5lbnRyaWVzKGV4aXN0ZWRBdXRoLmlzQWxsb3dlZE1hcClcbiAgICAgICAgLm1hcCgoW2FkZHJlc3MsIGFsbG93ZWRdKSA9PiAoYWxsb3dlZCA/IGFkZHJlc3MgOiAnJykpXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IChpdGVtICE9PSAnJykpO1xuXG4gICAgICBsZXQgYWxsb3dlZExpc3RCeVJlcXVlc3RUeXBlID0gWy4uLnJlcXVlc3QuYWxsb3dlZEFjY291bnRzXTtcblxuICAgICAgaWYgKGFjY291bnRBdXRoVHlwZSA9PT0gJ2V2bScpIHtcbiAgICAgICAgYWxsb3dlZExpc3RCeVJlcXVlc3RUeXBlID0gYWxsb3dlZExpc3RCeVJlcXVlc3RUeXBlLmZpbHRlcigoYSkgPT4gaXNFdGhlcmV1bUFkZHJlc3MoYSkpO1xuICAgICAgfSBlbHNlIGlmIChhY2NvdW50QXV0aFR5cGUgPT09ICdzdWJzdHJhdGUnKSB7XG4gICAgICAgIGFsbG93ZWRMaXN0QnlSZXF1ZXN0VHlwZSA9IGFsbG93ZWRMaXN0QnlSZXF1ZXN0VHlwZS5maWx0ZXIoKGEpID0+ICFpc0V0aGVyZXVtQWRkcmVzcyhhKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghY29uZmlybUFub3RoZXJUeXBlICYmICFyZXF1ZXN0LnJlQ29uZmlybSAmJiBhbGxvd2VkTGlzdEJ5UmVxdWVzdFR5cGUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIC8vIFByZXZlbnQgYXBwZWFyIGNvbmZpcm1hdGlvbiBwb3B1cFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEF1dG8gYXV0aCBmb3Igd2ViIGFwcFxuXG4gICAgICAvLyBJZ25vcmUgd2hpdGUgbGlzdFxuICAgICAgY29uc3QgaXNXaGl0ZUxpc3QgPSBXRUJfQVBQX1VSTC5zb21lKCh1cmwpID0+IGlkU3RyLmluY2x1ZGVzKHVybCkpICYmIGZhbHNlO1xuXG4gICAgICBpZiAoaXNXaGl0ZUxpc3QpIHtcbiAgICAgICAgY29uc3QgaXNBbGxvd2VkTWFwID0gdGhpcy5nZXRBZGRyZXNzTGlzdCh0cnVlKTtcblxuICAgICAgICBhdXRoTGlzdFtzdHJpcFVybCh1cmwpXSA9IHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICBpZDogaWRTdHIsXG4gICAgICAgICAgaXNBbGxvd2VkOiB0cnVlLFxuICAgICAgICAgIGlzQWxsb3dlZE1hcCxcbiAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIGFjY291bnRBdXRoVHlwZTogJ2JvdGgnXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRBdXRob3JpemUoYXV0aExpc3QpO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBpZCA9IGdldElkKCk7XG5cbiAgICAgIHRoaXMuI2F1dGhSZXF1ZXN0c1YyW2lkXSA9IHtcbiAgICAgICAgLi4udGhpcy5hdXRoQ29tcGxldGVWMihpZCwgdXJsLCByZXNvbHZlLCByZWplY3QpLFxuICAgICAgICBpZCxcbiAgICAgICAgaWRTdHIsXG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIHVybCxcbiAgICAgICAgYWNjb3VudEF1dGhUeXBlOiBhY2NvdW50QXV0aFR5cGVcbiAgICAgIH07XG5cbiAgICAgIHRoaXMudXBkYXRlSWNvbkF1dGhWMigpO1xuXG4gICAgICBpZiAoT2JqZWN0LmtleXModGhpcy4jYXV0aFJlcXVlc3RzVjIpLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgdGhpcy4jcmVxdWVzdFNlcnZpY2UucG9wdXBPcGVuKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXV0aFJlcXVlc3RWMiAoaWQ6IHN0cmluZyk6IEF1dGhSZXF1ZXN0VjIge1xuICAgIHJldHVybiB0aGlzLiNhdXRoUmVxdWVzdHNWMltpZF07XG4gIH1cblxuICBwdWJsaWMgZ2V0IHN1YnNjcmliZUV2bUNoYWluQ2hhbmdlICgpIHtcbiAgICByZXR1cm4gdGhpcy5ldm1DaGFpblN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHN1YnNjcmliZUF1dGhvcml6ZVVybFN1YmplY3QgKCkge1xuICAgIHJldHVybiB0aGlzLmF1dGhvcml6ZVVybFN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgZW5zdXJlVXJsQXV0aG9yaXplZFYyICh1cmw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGlkU3RyID0gc3RyaXBVcmwodXJsKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmdldEF1dGhvcml6ZSgodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRyeSA9IE9iamVjdC5rZXlzKHZhbHVlKS5pbmNsdWRlcyhpZFN0cik7XG5cbiAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1RoZSBzb3VyY2Uge3t1cmx9fSBoYXMgbm90IGJlZW4gYXV0aG9yaXplZCB5ZXQnLnJlcGxhY2UoJ3t7dXJsfX0nLCB1cmwpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IHZhbHVlW2lkU3RyXSAmJiBPYmplY3Qua2V5cyh2YWx1ZVtpZFN0cl0uaXNBbGxvd2VkTWFwKVxuICAgICAgICAgIC5zb21lKChhZGRyZXNzKSA9PiB2YWx1ZVtpZFN0cl0uaXNBbGxvd2VkTWFwW2FkZHJlc3NdKTtcblxuICAgICAgICBpZiAoIWlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignVGhlIHNvdXJjZSB7e3VybH19IGlzIG5vdCBhbGxvd2VkIHRvIGludGVyYWN0IHdpdGggdGhpcyBleHRlbnNpb24nLnJlcGxhY2UoJ3t7dXJsfX0nLCB1cmwpKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXRXYWxsZXQgKCkge1xuICAgIGZvciAoY29uc3QgcmVxdWVzdCBvZiBPYmplY3QudmFsdWVzKHRoaXMuI2F1dGhSZXF1ZXN0c1YyKSkge1xuICAgICAgcmVxdWVzdC5yZWplY3QobmV3IEVycm9yKCdSZXNldCB3YWxsZXQnKSk7XG4gICAgfVxuXG4gICAgdGhpcy5hdXRoU3ViamVjdFYyLm5leHQoW10pO1xuICAgIHRoaXMuc2V0QXV0aG9yaXplKHt9KTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IFJlc29sdmVyIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL3R5cGVzJztcbmltcG9ydCBSZXF1ZXN0U2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZSc7XG5pbXBvcnQgeyBSZXF1ZXN0V2FsbGV0Q29ubmVjdFNlc3Npb24sIFdhbGxldENvbm5lY3RTZXNzaW9uUmVxdWVzdCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvd2FsbGV0LWNvbm5lY3Qtc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuLy8gV0MgPSBXYWxsZXRDb25uZWN0XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25uZWN0V0NSZXF1ZXN0SGFuZGxlciB7XG4gIHJlYWRvbmx5ICNyZXF1ZXN0U2VydmljZTogUmVxdWVzdFNlcnZpY2U7XG4gIHJlYWRvbmx5ICNjb25uZWN0V0NSZXF1ZXN0czogUmVjb3JkPHN0cmluZywgUmVxdWVzdFdhbGxldENvbm5lY3RTZXNzaW9uPiA9IHt9O1xuICBwdWJsaWMgcmVhZG9ubHkgY29ubmVjdFdDU3ViamVjdDogQmVoYXZpb3JTdWJqZWN0PFdhbGxldENvbm5lY3RTZXNzaW9uUmVxdWVzdFtdPiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8V2FsbGV0Q29ubmVjdFNlc3Npb25SZXF1ZXN0W10+KFtdKTtcblxuICBjb25zdHJ1Y3RvciAocmVxdWVzdFNlcnZpY2U6IFJlcXVlc3RTZXJ2aWNlKSB7XG4gICAgdGhpcy4jcmVxdWVzdFNlcnZpY2UgPSByZXF1ZXN0U2VydmljZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWxsQ29ubmVjdFdDUmVxdWVzdHMgKCk6IFdhbGxldENvbm5lY3RTZXNzaW9uUmVxdWVzdFtdIHtcbiAgICByZXR1cm4gT2JqZWN0XG4gICAgICAudmFsdWVzKHRoaXMuI2Nvbm5lY3RXQ1JlcXVlc3RzKVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgLm1hcCgoeyByZWplY3QsIHJlc29sdmUsIC4uLmRhdGEgfSkgPT4gZGF0YSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG51bUNvbm5lY3RXQ1JlcXVlc3RzICgpOiBudW1iZXIge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLiNjb25uZWN0V0NSZXF1ZXN0cykubGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIGdldENvbm5lY3RXQ1JlcXVlc3QgKGlkOiBzdHJpbmcpOiBSZXF1ZXN0V2FsbGV0Q29ubmVjdFNlc3Npb24ge1xuICAgIHJldHVybiB0aGlzLiNjb25uZWN0V0NSZXF1ZXN0c1tpZF07XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUljb25Db25uZWN0V0MgKHNob3VsZENsb3NlPzogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuY29ubmVjdFdDU3ViamVjdC5uZXh0KHRoaXMuYWxsQ29ubmVjdFdDUmVxdWVzdHMpO1xuICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnVwZGF0ZUljb25WMihzaG91bGRDbG9zZSk7XG4gIH1cblxuICBwcml2YXRlIGNvbm5lY3RXQ0NvbXBsZXRlID0gKGlkOiBzdHJpbmcpOiBSZXNvbHZlcjx2b2lkPiA9PiB7XG4gICAgY29uc3QgY29tcGxldGUgPSAoc2hvdWxkQ2xvc2U6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgIGRlbGV0ZSB0aGlzLiNjb25uZWN0V0NSZXF1ZXN0c1tpZF07XG4gICAgICB0aGlzLnVwZGF0ZUljb25Db25uZWN0V0Moc2hvdWxkQ2xvc2UpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVqZWN0OiAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbXBsZXRlKHRydWUpO1xuICAgICAgfSxcbiAgICAgIHJlc29sdmU6ICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29tcGxldGUodHJ1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBwdWJsaWMgYWRkQ29ubmVjdFdDUmVxdWVzdCAocmVxdWVzdDogV2FsbGV0Q29ubmVjdFNlc3Npb25SZXF1ZXN0KSB7XG4gICAgY29uc3QgaWQgPSByZXF1ZXN0LmlkO1xuXG4gICAgdGhpcy4jY29ubmVjdFdDUmVxdWVzdHNbaWRdID0ge1xuICAgICAgLi4udGhpcy5jb25uZWN0V0NDb21wbGV0ZShpZCksXG4gICAgICAuLi5yZXF1ZXN0XG4gICAgfTtcblxuICAgIHRoaXMudXBkYXRlSWNvbkNvbm5lY3RXQygpO1xuICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnBvcHVwT3BlbigpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0V2FsbGV0ICgpIHtcbiAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLiNjb25uZWN0V0NSZXF1ZXN0cykpIHtcbiAgICAgIHJlcXVlc3QucmVqZWN0KG5ldyBFcnJvcignUmVzZXQgd2FsbGV0JykpO1xuICAgIH1cblxuICAgIHRoaXMuY29ubmVjdFdDU3ViamVjdC5uZXh0KFtdKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBDb21tb24gZnJvbSAnQGV0aGVyZXVtanMvY29tbW9uJztcbmltcG9ydCB7IEV2bVByb3ZpZGVyRXJyb3IgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvZXJyb3JzL0V2bVByb3ZpZGVyRXJyb3InO1xuaW1wb3J0IHsgQ29uZmlybWF0aW9uRGVmaW5pdGlvbnMsIENvbmZpcm1hdGlvbnNRdWV1ZSwgQ29uZmlybWF0aW9uc1F1ZXVlSXRlbU9wdGlvbnMsIENvbmZpcm1hdGlvblR5cGUsIEV2bVByb3ZpZGVyRXJyb3JUeXBlLCBSZXF1ZXN0Q29uZmlybWF0aW9uQ29tcGxldGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IENvbmZpcm1hdGlvblJlcXVlc3RCYXNlLCBSZXNvbHZlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC90eXBlcyc7XG5pbXBvcnQgUmVxdWVzdFNlcnZpY2UgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9yZXF1ZXN0LXNlcnZpY2UnO1xuaW1wb3J0IHsgYW55TnVtYmVyVG9CTiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMvZXRoJztcbmltcG9ydCB7IGlzSW50ZXJuYWxSZXF1ZXN0IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscy9yZXF1ZXN0JztcbmltcG9ydCBrZXlyaW5nIGZyb20gJ0BzdWJ3YWxsZXQvdWkta2V5cmluZyc7XG5pbXBvcnQgQk4gZnJvbSAnYm4uanMnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb24gfSBmcm9tICdldGhlcmV1bWpzLXR4JztcbmltcG9ydCB7IHRvQnVmZmVyIH0gZnJvbSAnZXRoZXJldW1qcy11dGlsJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25Db25maWcgfSBmcm9tICd3ZWIzLWNvcmUnO1xuXG5pbXBvcnQgeyBsb2dnZXIgYXMgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFdm1SZXF1ZXN0SGFuZGxlciB7XG4gIHJlYWRvbmx5ICNyZXF1ZXN0U2VydmljZTogUmVxdWVzdFNlcnZpY2U7XG4gIHJlYWRvbmx5ICNsb2dnZXI6IExvZ2dlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBjb25maXJtYXRpb25zUXVldWVTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxDb25maXJtYXRpb25zUXVldWU+KHtcbiAgICBhZGROZXR3b3JrUmVxdWVzdDoge30sXG4gICAgYWRkVG9rZW5SZXF1ZXN0OiB7fSxcbiAgICBzd2l0Y2hOZXR3b3JrUmVxdWVzdDoge30sXG4gICAgZXZtU2lnbmF0dXJlUmVxdWVzdDoge30sXG4gICAgZXZtU2VuZFRyYW5zYWN0aW9uUmVxdWVzdDoge30sXG4gICAgZXZtV2F0Y2hUcmFuc2FjdGlvblJlcXVlc3Q6IHt9XG4gIH0pO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgY29uZmlybWF0aW9uc1Byb21pc2VNYXA6IFJlY29yZDxzdHJpbmcsIHsgcmVzb2x2ZXI6IFJlc29sdmVyPGFueT4sIHZhbGlkYXRvcj86IChyczogYW55KSA9PiBFcnJvciB8IHVuZGVmaW5lZCB9PiA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yIChyZXF1ZXN0U2VydmljZTogUmVxdWVzdFNlcnZpY2UpIHtcbiAgICB0aGlzLiNyZXF1ZXN0U2VydmljZSA9IHJlcXVlc3RTZXJ2aWNlO1xuICAgIHRoaXMuI2xvZ2dlciA9IGNyZWF0ZUxvZ2dlcignRXZtUmVxdWVzdEhhbmRsZXInKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbnVtRXZtUmVxdWVzdHMgKCk6IG51bWJlciB7XG4gICAgbGV0IGNvdW50ID0gMDtcblxuICAgIE9iamVjdC52YWx1ZXModGhpcy5jb25maXJtYXRpb25zUXVldWVTdWJqZWN0LmdldFZhbHVlKCkpLmZvckVhY2goKHgpID0+IHtcbiAgICAgIGNvdW50ICs9IE9iamVjdC5rZXlzKHgpLmxlbmd0aDtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb25maXJtYXRpb25zUXVldWVTdWJqZWN0ICgpOiBCZWhhdmlvclN1YmplY3Q8Q29uZmlybWF0aW9uc1F1ZXVlPiB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlybWF0aW9uc1F1ZXVlU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBhZGRDb25maXJtYXRpb248Q1QgZXh0ZW5kcyBDb25maXJtYXRpb25UeXBlPiAoXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cmw6IHN0cmluZyxcbiAgICB0eXBlOiBDVCxcbiAgICBwYXlsb2FkOiBDb25maXJtYXRpb25EZWZpbml0aW9uc1tDVF1bMF1bJ3BheWxvYWQnXSxcbiAgICBvcHRpb25zOiBDb25maXJtYXRpb25zUXVldWVJdGVtT3B0aW9ucyA9IHt9LFxuICAgIHZhbGlkYXRvcj86IChpbnB1dDogQ29uZmlybWF0aW9uRGVmaW5pdGlvbnNbQ1RdWzFdKSA9PiBFcnJvciB8IHVuZGVmaW5lZFxuICApOiBQcm9taXNlPENvbmZpcm1hdGlvbkRlZmluaXRpb25zW0NUXVsxXT4ge1xuICAgIGNvbnN0IGNvbmZpcm1hdGlvbnMgPSB0aGlzLmNvbmZpcm1hdGlvbnNRdWV1ZVN1YmplY3QuZ2V0VmFsdWUoKTtcbiAgICBjb25zdCBjb25maXJtYXRpb25UeXBlID0gY29uZmlybWF0aW9uc1t0eXBlXSBhcyBSZWNvcmQ8c3RyaW5nLCBDb25maXJtYXRpb25EZWZpbml0aW9uc1tDVF1bMF0+O1xuICAgIGNvbnN0IHBheWxvYWRKc29uID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCk7XG4gICAgY29uc3QgaXNJbnRlcm5hbCA9IGlzSW50ZXJuYWxSZXF1ZXN0KHVybCk7XG5cbiAgICBpZiAoWydldm1TaWduYXR1cmVSZXF1ZXN0JywgJ2V2bVNlbmRUcmFuc2FjdGlvblJlcXVlc3QnXS5pbmNsdWRlcyh0eXBlKSkge1xuICAgICAgY29uc3QgaXNBbHdheXNSZXF1aXJlZCA9IGF3YWl0IHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnNldHRpbmdTZXJ2aWNlLmlzQWx3YXlzUmVxdWlyZWQ7XG5cbiAgICAgIGlmIChpc0Fsd2F5c1JlcXVpcmVkKSB7XG4gICAgICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLmtleXJpbmdTZXJ2aWNlLmxvY2soKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBkdXBsaWNhdGUgcmVxdWVzdFxuICAgIGNvbnN0IGR1cGxpY2F0ZWQgPSBPYmplY3QudmFsdWVzKGNvbmZpcm1hdGlvblR5cGUpLmZpbmQoKGMpID0+IChjLnVybCA9PT0gdXJsKSAmJiAoYy5wYXlsb2FkSnNvbiA9PT0gcGF5bG9hZEpzb24pKTtcblxuICAgIGlmIChkdXBsaWNhdGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXZtUHJvdmlkZXJFcnJvcihFdm1Qcm92aWRlckVycm9yVHlwZS5JTlZBTElEX1BBUkFNUywgdCgnRHVwbGljYXRlIHJlcXVlc3QnKSk7XG4gICAgfVxuXG4gICAgY29uZmlybWF0aW9uVHlwZVtpZF0gPSB7XG4gICAgICBpZCxcbiAgICAgIHVybCxcbiAgICAgIGlzSW50ZXJuYWwsXG4gICAgICBwYXlsb2FkLFxuICAgICAgcGF5bG9hZEpzb24sXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSBhcyBDb25maXJtYXRpb25EZWZpbml0aW9uc1tDVF1bMF07XG5cbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2U8Q29uZmlybWF0aW9uRGVmaW5pdGlvbnNbQ1RdWzFdPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmNvbmZpcm1hdGlvbnNQcm9taXNlTWFwW2lkXSA9IHtcbiAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0b3IsXG4gICAgICAgIHJlc29sdmVyOiB7XG4gICAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICAgICAgICByZWplY3Q6IHJlamVjdFxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb25maXJtYXRpb25zUXVldWVTdWJqZWN0Lm5leHQoY29uZmlybWF0aW9ucyk7XG5cbiAgICBpZiAoIWlzSW50ZXJuYWwpIHtcbiAgICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnBvcHVwT3BlbigpO1xuICAgIH1cblxuICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnVwZGF0ZUljb25WMigpO1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlQ29uZmlybWF0aW9uPENUIGV4dGVuZHMgQ29uZmlybWF0aW9uVHlwZT4gKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdHlwZTogQ1QsXG4gICAgcGF5bG9hZDogQ29uZmlybWF0aW9uRGVmaW5pdGlvbnNbQ1RdWzBdWydwYXlsb2FkJ10sXG4gICAgb3B0aW9uczogQ29uZmlybWF0aW9uc1F1ZXVlSXRlbU9wdGlvbnMgPSB7fSxcbiAgICB2YWxpZGF0b3I/OiAoaW5wdXQ6IENvbmZpcm1hdGlvbkRlZmluaXRpb25zW0NUXVsxXSkgPT4gRXJyb3IgfCB1bmRlZmluZWRcbiAgKSB7XG4gICAgY29uc3QgY29uZmlybWF0aW9ucyA9IHRoaXMuY29uZmlybWF0aW9uc1F1ZXVlU3ViamVjdC5nZXRWYWx1ZSgpO1xuICAgIGNvbnN0IGNvbmZpcm1hdGlvblR5cGUgPSBjb25maXJtYXRpb25zW3R5cGVdIGFzIFJlY29yZDxzdHJpbmcsIENvbmZpcm1hdGlvbkRlZmluaXRpb25zW0NUXVswXT47XG5cbiAgICAvLyBDaGVjayBkdXBsaWNhdGUgcmVxdWVzdFxuICAgIGNvbnN0IGV4aXN0cyA9IGNvbmZpcm1hdGlvblR5cGVbaWRdO1xuXG4gICAgaWYgKCFleGlzdHMpIHtcbiAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLklOVkFMSURfUEFSQU1TLCB0KCdSZXF1ZXN0IGRvZXMgbm90IGV4aXN0JykpO1xuICAgIH1cblxuICAgIGNvbnN0IHBheWxvYWRKc29uID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCk7XG5cbiAgICBjb25maXJtYXRpb25UeXBlW2lkXSA9IHtcbiAgICAgIC4uLmV4aXN0cyxcbiAgICAgIHBheWxvYWQsXG4gICAgICBwYXlsb2FkSnNvbixcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9IGFzIENvbmZpcm1hdGlvbkRlZmluaXRpb25zW0NUXVswXTtcblxuICAgIGlmICh2YWxpZGF0b3IpIHtcbiAgICAgIHRoaXMuY29uZmlybWF0aW9uc1Byb21pc2VNYXBbaWRdLnZhbGlkYXRvciA9IHZhbGlkYXRvcjtcbiAgICB9XG5cbiAgICB0aGlzLmNvbmZpcm1hdGlvbnNRdWV1ZVN1YmplY3QubmV4dChjb25maXJtYXRpb25zKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2lnbk1lc3NhZ2UgKGNvbmZpcm1hdGlvbjogQ29uZmlybWF0aW9uRGVmaW5pdGlvbnNbJ2V2bVNpZ25hdHVyZVJlcXVlc3QnXVswXSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgeyBhY2NvdW50LCBwYXlsb2FkLCB0eXBlIH0gPSBjb25maXJtYXRpb24ucGF5bG9hZDtcbiAgICBjb25zdCBhZGRyZXNzID0gYWNjb3VudC5hZGRyZXNzO1xuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBpZiAocGFpci5pc0xvY2tlZCkge1xuICAgICAga2V5cmluZy51bmxvY2tQYWlyKHBhaXIuYWRkcmVzcyk7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdldGhfc2lnbic6XG4gICAgICBjYXNlICdwZXJzb25hbF9zaWduJzpcbiAgICAgIGNhc2UgJ2V0aF9zaWduVHlwZWREYXRhJzpcbiAgICAgIGNhc2UgJ2V0aF9zaWduVHlwZWREYXRhX3YxJzpcbiAgICAgIGNhc2UgJ2V0aF9zaWduVHlwZWREYXRhX3YzJzpcbiAgICAgIGNhc2UgJ2V0aF9zaWduVHlwZWREYXRhX3Y0JzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHBhaXIuZXZtU2lnbmVyLnNpZ25NZXNzYWdlKHBheWxvYWQsIHR5cGUpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuSU5WQUxJRF9QQVJBTVMsIHQoJ1Vuc3VwcG9ydGVkIGFjdGlvbicpKTtcbiAgICB9XG4gIH1cblxuICBjb25maWdUb1RyYW5zYWN0aW9uIChjb25maWc6IFRyYW5zYWN0aW9uQ29uZmlnKTogVHJhbnNhY3Rpb24ge1xuICAgIGZ1bmN0aW9uIGZvcm1hdEZpZWxkIChpbnB1dDogc3RyaW5nIHwgbnVtYmVyIHwgdW5kZWZpbmVkIHwgQk4pOiBCTiB8IG51bWJlciB8IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoaW5wdXQuc3RhcnRzV2l0aCgnMHgnKSkge1xuICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEJOKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgLy8gQ29udmVydCBhbnkgc3RyaW5nLCBudW1iZXIgdG8gbnVtYmVyIHdpdGggQmlnTiBleGNsdWRlIGhleCBzdHJpbmdcbiAgICBjb25zdCB0eERhdGEgPSB7XG4gICAgICBmcm9tOiBjb25maWcuZnJvbSxcbiAgICAgIG5vbmNlOiBmb3JtYXRGaWVsZChjb25maWcubm9uY2UpLFxuICAgICAgZ2FzUHJpY2U6IGZvcm1hdEZpZWxkKGNvbmZpZy5nYXNQcmljZSksXG4gICAgICBnYXNMaW1pdDogZm9ybWF0RmllbGQoY29uZmlnLmdhcyksXG4gICAgICB0bzogY29uZmlnLnRvLFxuICAgICAgdmFsdWU6IGZvcm1hdEZpZWxkKGNvbmZpZy52YWx1ZSksXG4gICAgICBkYXRhOiB0b0J1ZmZlcihjb25maWcuZGF0YSlcbiAgICB9O1xuXG4gICAgY29uc3QgY29tbW9uID0gQ29tbW9uLmN1c3RvbSh7IGNoYWluSWQ6IGNvbmZpZy5jaGFpbklkLCBkZWZhdWx0SGFyZGZvcms6ICdwZXRlcnNidXJnJyB9KTtcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKHR4RGF0YSwgeyBjb21tb24gfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNpZ25UcmFuc2FjdGlvbiAoY29uZmlybWF0aW9uOiBDb25maXJtYXRpb25EZWZpbml0aW9uc1snZXZtU2VuZFRyYW5zYWN0aW9uUmVxdWVzdCddWzBdKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGNvbmZpcm1hdGlvbi5wYXlsb2FkO1xuICAgIGNvbnN0IHsgZXN0aW1hdGVHYXMsIGZyb20sIGdhcywgZ2FzUHJpY2UsIHZhbHVlIH0gPSB0cmFuc2FjdGlvbjtcbiAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKGZyb20gYXMgc3RyaW5nKTtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAuLi50cmFuc2FjdGlvbixcbiAgICAgIGdhczogYW55TnVtYmVyVG9CTihnYXMpLnRvTnVtYmVyKCksXG4gICAgICB2YWx1ZTogYW55TnVtYmVyVG9CTih2YWx1ZSkudG9OdW1iZXIoKSxcbiAgICAgIGdhc1ByaWNlOiBhbnlOdW1iZXJUb0JOKGdhc1ByaWNlKS50b051bWJlcigpLFxuICAgICAgZ2FzTGltaXQ6IGFueU51bWJlclRvQk4oZXN0aW1hdGVHYXMpLnRvTnVtYmVyKClcbiAgICAgIC8vIG5vbmNlOiBhd2FpdCB3ZWIzLmV0aC5nZXRUcmFuc2FjdGlvbkNvdW50KGZyb20pIC8vIFRvZG86IGZpbGwgdGhpcyB2YWx1ZSBmcm9tIHRyYW5zYWN0aW9uIHNlcnZpY2VcbiAgICB9IGFzIFRyYW5zYWN0aW9uQ29uZmlnO1xuXG4gICAgY29uc3QgdHggPSB0aGlzLmNvbmZpZ1RvVHJhbnNhY3Rpb24ocGFyYW1zKTtcblxuICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgaWYgKHBhaXIuaXNMb2NrZWQpIHtcbiAgICAgIGtleXJpbmcudW5sb2NrUGFpcihwYWlyLmFkZHJlc3MpO1xuICAgIH1cblxuICAgIHJldHVybiBwYWlyLmV2bVNpZ25lci5zaWduVHJhbnNhY3Rpb24odHgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWNvcmF0ZVJlc3VsdDxUIGV4dGVuZHMgQ29uZmlybWF0aW9uVHlwZT4gKHQ6IFQsIHJlcXVlc3Q6IENvbmZpcm1hdGlvbkRlZmluaXRpb25zW1RdWzBdLCByZXN1bHQ6IENvbmZpcm1hdGlvbkRlZmluaXRpb25zW1RdWzFdKSB7XG4gICAgaWYgKHJlc3VsdC5wYXlsb2FkID09PSAnJykge1xuICAgICAgaWYgKHQgPT09ICdldm1TaWduYXR1cmVSZXF1ZXN0Jykge1xuICAgICAgICByZXN1bHQucGF5bG9hZCA9IGF3YWl0IHRoaXMuc2lnbk1lc3NhZ2UocmVxdWVzdCBhcyBDb25maXJtYXRpb25EZWZpbml0aW9uc1snZXZtU2lnbmF0dXJlUmVxdWVzdCddWzBdKTtcbiAgICAgIH0gZWxzZSBpZiAodCA9PT0gJ2V2bVNlbmRUcmFuc2FjdGlvblJlcXVlc3QnKSB7XG4gICAgICAgIHJlc3VsdC5wYXlsb2FkID0gYXdhaXQgdGhpcy5zaWduVHJhbnNhY3Rpb24ocmVxdWVzdCBhcyBDb25maXJtYXRpb25EZWZpbml0aW9uc1snZXZtU2VuZFRyYW5zYWN0aW9uUmVxdWVzdCddWzBdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHQgPT09ICdldm1TaWduYXR1cmVSZXF1ZXN0JyB8fCB0ID09PSAnZXZtU2VuZFRyYW5zYWN0aW9uUmVxdWVzdCcpIHtcbiAgICAgICAgY29uc3QgaXNBbHdheXNSZXF1aXJlZCA9IGF3YWl0IHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnNldHRpbmdTZXJ2aWNlLmlzQWx3YXlzUmVxdWlyZWQ7XG5cbiAgICAgICAgaWYgKGlzQWx3YXlzUmVxdWlyZWQpIHtcbiAgICAgICAgICB0aGlzLiNyZXF1ZXN0U2VydmljZS5rZXlyaW5nU2VydmljZS5sb2NrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY29tcGxldGVDb25maXJtYXRpb24gKHJlcXVlc3Q6IFJlcXVlc3RDb25maXJtYXRpb25Db21wbGV0ZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGNvbmZpcm1hdGlvbnMgPSB0aGlzLmNvbmZpcm1hdGlvbnNRdWV1ZVN1YmplY3QuZ2V0VmFsdWUoKTtcblxuICAgIGZvciAoY29uc3QgY3QgaW4gcmVxdWVzdCkge1xuICAgICAgY29uc3QgdHlwZSA9IGN0IGFzIENvbmZpcm1hdGlvblR5cGU7XG4gICAgICBjb25zdCByZXN1bHQgPSByZXF1ZXN0W3R5cGVdIGFzIENvbmZpcm1hdGlvbkRlZmluaXRpb25zW3R5cGVvZiB0eXBlXVsxXTtcblxuICAgICAgY29uc3QgeyBpZCB9ID0gcmVzdWx0O1xuICAgICAgY29uc3QgeyByZXNvbHZlciwgdmFsaWRhdG9yIH0gPSB0aGlzLmNvbmZpcm1hdGlvbnNQcm9taXNlTWFwW2lkXTtcbiAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbiA9IGNvbmZpcm1hdGlvbnNbdHlwZV1baWRdO1xuXG4gICAgICBpZiAoIXJlc29sdmVyIHx8ICFjb25maXJtYXRpb24pIHtcbiAgICAgICAgdGhpcy4jbG9nZ2VyLmVycm9yKHQoJ1VuYWJsZSB0byBwcm9jZWVkLiBQbGVhc2UgdHJ5IGFnYWluJyksIHR5cGUsIGlkKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHQoJ1VuYWJsZSB0byBwcm9jZWVkLiBQbGVhc2UgdHJ5IGFnYWluJykpO1xuICAgICAgfVxuXG4gICAgICAvLyBGaWxsIHNpZ25hdHVyZSBmb3Igc29tZSBzcGVjaWFsIHR5cGVcbiAgICAgIGF3YWl0IHRoaXMuZGVjb3JhdGVSZXN1bHQodHlwZSwgY29uZmlybWF0aW9uLCByZXN1bHQpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSByZXNwb25zZSBmcm9tIGNvbmZpcm1hdGlvbiBwb3B1cCBzb21lIGluZm8gbGlrZSBwYXNzd29yZCwgcmVzcG9uc2UgZm9ybWF0Li4uLlxuICAgICAgY29uc3QgZXJyb3IgPSB2YWxpZGF0b3IgJiYgdmFsaWRhdG9yKHJlc3VsdCk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXNvbHZlci5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGUgY29uZmlybWF0aW9ucyBmcm9tIHF1ZXVlXG4gICAgICBkZWxldGUgdGhpcy5jb25maXJtYXRpb25zUHJvbWlzZU1hcFtpZF07XG4gICAgICBkZWxldGUgY29uZmlybWF0aW9uc1t0eXBlXVtpZF07XG4gICAgICB0aGlzLmNvbmZpcm1hdGlvbnNRdWV1ZVN1YmplY3QubmV4dChjb25maXJtYXRpb25zKTtcblxuICAgICAgLy8gVXBkYXRlIGljb24sIGFuZCBjbG9zZSBxdWV1ZVxuICAgICAgdGhpcy4jcmVxdWVzdFNlcnZpY2UudXBkYXRlSWNvblYyKHRoaXMuI3JlcXVlc3RTZXJ2aWNlLm51bUFsbFJlcXVlc3RzID09PSAwKTtcbiAgICAgIHJlc29sdmVyLnJlc29sdmUocmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldFdhbGxldCAoKSB7XG4gICAgY29uc3QgY29uZmlybWF0aW9ucyA9IHRoaXMuY29uZmlybWF0aW9uc1F1ZXVlU3ViamVjdC5nZXRWYWx1ZSgpO1xuXG4gICAgZm9yIChjb25zdCBbdHlwZSwgcmVxdWVzdHNdIG9mIE9iamVjdC5lbnRyaWVzKGNvbmZpcm1hdGlvbnMpKSB7XG4gICAgICBmb3IgKGNvbnN0IGNvbmZpcm1hdGlvbiBvZiBPYmplY3QudmFsdWVzKHJlcXVlc3RzKSkge1xuICAgICAgICBjb25zdCB7IGlkIH0gPSBjb25maXJtYXRpb24gYXMgQ29uZmlybWF0aW9uUmVxdWVzdEJhc2U7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZXIgfSA9IHRoaXMuY29uZmlybWF0aW9uc1Byb21pc2VNYXBbaWRdO1xuXG4gICAgICAgIGlmICghcmVzb2x2ZXIgfHwgIWNvbmZpcm1hdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBmb3VuZCBjb25maXJtYXRpb24nLCB0eXBlLCBpZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZXIucmVqZWN0KG5ldyBFcnJvcignUmVzZXQgd2FsbGV0JykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHRoaXMuY29uZmlybWF0aW9uc1Byb21pc2VNYXBbaWRdO1xuICAgICAgICBkZWxldGUgY29uZmlybWF0aW9uc1t0eXBlIGFzIENvbmZpcm1hdGlvblR5cGVdW2lkXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbmZpcm1hdGlvbnNRdWV1ZVN1YmplY3QubmV4dChjb25maXJtYXRpb25zKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE1ldGFkYXRhUmVxdWVzdCwgUmVzb2x2ZXIgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvdHlwZXMnO1xuaW1wb3J0IFJlcXVlc3RTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlJztcbmltcG9ydCB7IGV4dHJhY3RNZXRhZGF0YSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlL2hlbHBlcic7XG5pbXBvcnQgeyBNZXRhUmVxdWVzdCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IE1ldGFkYXRhU3RvcmUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcyc7XG5pbXBvcnQgeyBnZXRJZCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMvZ2V0SWQnO1xuaW1wb3J0IHsgYWRkTWV0YWRhdGEsIGtub3duTWV0YWRhdGEgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1jaGFpbnMnO1xuaW1wb3J0IHsgTWV0YWRhdGFEZWYgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1pbmplY3QvdHlwZXMnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1ldGFkYXRhUmVxdWVzdEhhbmRsZXIge1xuICByZWFkb25seSAjcmVxdWVzdFNlcnZpY2U6IFJlcXVlc3RTZXJ2aWNlO1xuICByZWFkb25seSAjbWV0YVN0b3JlOiBNZXRhZGF0YVN0b3JlID0gbmV3IE1ldGFkYXRhU3RvcmUoKTtcbiAgcmVhZG9ubHkgI21ldGFSZXF1ZXN0czogUmVjb3JkPHN0cmluZywgTWV0YVJlcXVlc3Q+ID0ge307XG4gIHB1YmxpYyByZWFkb25seSBtZXRhU3ViamVjdDogQmVoYXZpb3JTdWJqZWN0PE1ldGFkYXRhUmVxdWVzdFtdPiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8TWV0YWRhdGFSZXF1ZXN0W10+KFtdKTtcblxuICBjb25zdHJ1Y3RvciAocmVxdWVzdFNlcnZpY2U6IFJlcXVlc3RTZXJ2aWNlKSB7XG4gICAgdGhpcy4jcmVxdWVzdFNlcnZpY2UgPSByZXF1ZXN0U2VydmljZTtcblxuICAgIGV4dHJhY3RNZXRhZGF0YSh0aGlzLiNtZXRhU3RvcmUpO1xuICB9XG5cbiAgcHVibGljIGdldCBrbm93bk1ldGFkYXRhICgpOiBNZXRhZGF0YURlZltdIHtcbiAgICByZXR1cm4ga25vd25NZXRhZGF0YSgpO1xuICB9XG5cbiAgcHVibGljIGdldCBhbGxNZXRhUmVxdWVzdHMgKCk6IE1ldGFkYXRhUmVxdWVzdFtdIHtcbiAgICByZXR1cm4gT2JqZWN0XG4gICAgICAudmFsdWVzKHRoaXMuI21ldGFSZXF1ZXN0cylcbiAgICAgIC5tYXAoKHsgaWQsIHJlcXVlc3QsIHVybCB9KTogTWV0YWRhdGFSZXF1ZXN0ID0+ICh7IGlkLCByZXF1ZXN0LCB1cmwgfSkpO1xuICB9XG5cbiAgcHVibGljIGdldCBudW1NZXRhUmVxdWVzdHMgKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuI21ldGFSZXF1ZXN0cykubGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIGdldE1ldGFSZXF1ZXN0IChpZDogc3RyaW5nKTogTWV0YVJlcXVlc3Qge1xuICAgIHJldHVybiB0aGlzLiNtZXRhUmVxdWVzdHNbaWRdO1xuICB9XG5cbiAgcHVibGljIHNhdmVNZXRhZGF0YSAobWV0YTogTWV0YWRhdGFEZWYpOiB2b2lkIHtcbiAgICB0aGlzLiNtZXRhU3RvcmUuc2V0KG1ldGEuZ2VuZXNpc0hhc2gsIG1ldGEpO1xuXG4gICAgYWRkTWV0YWRhdGEobWV0YSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUljb25NZXRhIChzaG91bGRDbG9zZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1ldGFTdWJqZWN0Lm5leHQodGhpcy5hbGxNZXRhUmVxdWVzdHMpO1xuICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnVwZGF0ZUljb25WMihzaG91bGRDbG9zZSk7XG4gIH1cblxuICBwcml2YXRlIG1ldGFDb21wbGV0ZSA9IChpZDogc3RyaW5nLCByZXNvbHZlOiAocmVzdWx0OiBib29sZWFuKSA9PiB2b2lkLCByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQpOiBSZXNvbHZlcjxib29sZWFuPiA9PiB7XG4gICAgY29uc3QgY29tcGxldGUgPSAoKTogdm9pZCA9PiB7XG4gICAgICBkZWxldGUgdGhpcy4jbWV0YVJlcXVlc3RzW2lkXTtcbiAgICAgIHRoaXMudXBkYXRlSWNvbk1ldGEodHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICByZWplY3Q6IChlcnJvcjogRXJyb3IpOiB2b2lkID0+IHtcbiAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0sXG4gICAgICByZXNvbHZlOiAocmVzdWx0OiBib29sZWFuKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHB1YmxpYyBpbmplY3RNZXRhZGF0YSAodXJsOiBzdHJpbmcsIHJlcXVlc3Q6IE1ldGFkYXRhRGVmKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IGlkID0gZ2V0SWQoKTtcblxuICAgICAgdGhpcy4jbWV0YVJlcXVlc3RzW2lkXSA9IHtcbiAgICAgICAgLi4udGhpcy5tZXRhQ29tcGxldGUoaWQsIHJlc29sdmUsIHJlamVjdCksXG4gICAgICAgIGlkLFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICB1cmxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMudXBkYXRlSWNvbk1ldGEoKTtcbiAgICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnBvcHVwT3BlbigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHJlc2V0V2FsbGV0ICgpIHtcbiAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLiNtZXRhUmVxdWVzdHMpKSB7XG4gICAgICByZXF1ZXN0LnJlamVjdChuZXcgRXJyb3IoJ1Jlc2V0IHdhbGxldCcpKTtcbiAgICB9XG5cbiAgICB0aGlzLm1ldGFTdWJqZWN0Lm5leHQoW10pO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgUmVzb2x2ZXIgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvdHlwZXMnO1xuaW1wb3J0IFJlcXVlc3RTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlJztcbmltcG9ydCB7IFJlcXVlc3RXYWxsZXRDb25uZWN0Tm90U3VwcG9ydCwgV2FsbGV0Q29ubmVjdE5vdFN1cHBvcnRSZXF1ZXN0IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy93YWxsZXQtY29ubmVjdC1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG4vLyBXQyA9IFdhbGxldENvbm5lY3RcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdFN1cHBvcnRXQ1JlcXVlc3RIYW5kbGVyIHtcbiAgcmVhZG9ubHkgI3JlcXVlc3RTZXJ2aWNlOiBSZXF1ZXN0U2VydmljZTtcbiAgcmVhZG9ubHkgI25vdFN1cHBvcnRXQ1JlcXVlc3RzOiBSZWNvcmQ8c3RyaW5nLCBSZXF1ZXN0V2FsbGV0Q29ubmVjdE5vdFN1cHBvcnQ+ID0ge307XG4gIHB1YmxpYyByZWFkb25seSBub3RTdXBwb3J0V0NTdWJqZWN0OiBCZWhhdmlvclN1YmplY3Q8V2FsbGV0Q29ubmVjdE5vdFN1cHBvcnRSZXF1ZXN0W10+ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxXYWxsZXRDb25uZWN0Tm90U3VwcG9ydFJlcXVlc3RbXT4oW10pO1xuXG4gIGNvbnN0cnVjdG9yIChyZXF1ZXN0U2VydmljZTogUmVxdWVzdFNlcnZpY2UpIHtcbiAgICB0aGlzLiNyZXF1ZXN0U2VydmljZSA9IHJlcXVlc3RTZXJ2aWNlO1xuICB9XG5cbiAgcHVibGljIGdldCBhbGxOb3RTdXBwb3J0V0NSZXF1ZXN0cyAoKTogV2FsbGV0Q29ubmVjdE5vdFN1cHBvcnRSZXF1ZXN0W10ge1xuICAgIHJldHVybiBPYmplY3RcbiAgICAgIC52YWx1ZXModGhpcy4jbm90U3VwcG9ydFdDUmVxdWVzdHMpXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAubWFwKCh7IHJlamVjdCwgcmVzb2x2ZSwgLi4uZGF0YSB9KSA9PiBkYXRhKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbnVtTm90U3VwcG9ydFdDUmVxdWVzdHMgKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuI25vdFN1cHBvcnRXQ1JlcXVlc3RzKS5sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgZ2V0Tm90U3VwcG9ydFdDUmVxdWVzdCAoaWQ6IHN0cmluZyk6IFJlcXVlc3RXYWxsZXRDb25uZWN0Tm90U3VwcG9ydCB7XG4gICAgcmV0dXJuIHRoaXMuI25vdFN1cHBvcnRXQ1JlcXVlc3RzW2lkXTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlSWNvbk5vdFN1cHBvcnRXQyAoc2hvdWxkQ2xvc2U/OiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5ub3RTdXBwb3J0V0NTdWJqZWN0Lm5leHQodGhpcy5hbGxOb3RTdXBwb3J0V0NSZXF1ZXN0cyk7XG4gICAgdGhpcy4jcmVxdWVzdFNlcnZpY2UudXBkYXRlSWNvblYyKHNob3VsZENsb3NlKTtcbiAgfVxuXG4gIHByaXZhdGUgbm90U3VwcG9ydFdDQ29tcGxldGUgPSAoaWQ6IHN0cmluZyk6IFJlc29sdmVyPHZvaWQ+ID0+IHtcbiAgICBjb25zdCBjb21wbGV0ZSA9IChzaG91bGRDbG9zZTogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgZGVsZXRlIHRoaXMuI25vdFN1cHBvcnRXQ1JlcXVlc3RzW2lkXTtcbiAgICAgIHRoaXMudXBkYXRlSWNvbk5vdFN1cHBvcnRXQyhzaG91bGRDbG9zZSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICByZWplY3Q6ICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29tcGxldGUodHJ1ZSk7XG4gICAgICB9LFxuICAgICAgcmVzb2x2ZTogKCk6IHZvaWQgPT4ge1xuICAgICAgICBjb21wbGV0ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHB1YmxpYyBhZGROb3RTdXBwb3J0V0NSZXF1ZXN0IChyZXF1ZXN0OiBXYWxsZXRDb25uZWN0Tm90U3VwcG9ydFJlcXVlc3QpIHtcbiAgICBjb25zdCBpZCA9IHJlcXVlc3QuaWQ7XG5cbiAgICB0aGlzLiNub3RTdXBwb3J0V0NSZXF1ZXN0c1tpZF0gPSB7XG4gICAgICAuLi50aGlzLm5vdFN1cHBvcnRXQ0NvbXBsZXRlKGlkKSxcbiAgICAgIC4uLnJlcXVlc3RcbiAgICB9O1xuXG4gICAgdGhpcy51cGRhdGVJY29uTm90U3VwcG9ydFdDKCk7XG4gICAgdGhpcy4jcmVxdWVzdFNlcnZpY2UucG9wdXBPcGVuKCk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXRXYWxsZXQgKCkge1xuICAgIGZvciAoY29uc3QgcmVxdWVzdCBvZiBPYmplY3QudmFsdWVzKHRoaXMuI25vdFN1cHBvcnRXQ1JlcXVlc3RzKSkge1xuICAgICAgcmVxdWVzdC5yZWplY3QobmV3IEVycm9yKCdSZXNldCB3YWxsZXQnKSk7XG4gICAgfVxuXG4gICAgdGhpcy5ub3RTdXBwb3J0V0NTdWJqZWN0Lm5leHQoW10pO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgd2l0aEVycm9yTG9nIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL2hhbmRsZXJzL2hlbHBlcnMnO1xuaW1wb3J0IHsgQnJvd3NlckNvbmZpcm1hdGlvblR5cGUsIFJlcXVlc3RTZXR0aW5nc1R5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCBSZXF1ZXN0U2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZSc7XG5pbXBvcnQgeyBERUZBVUxUX05PVElGSUNBVElPTl9UWVBFIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zZXR0aW5nLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IGdldE9TIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscyc7XG5cbmNvbnN0IE5PVElGSUNBVElPTl9VUkwgPSBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnbm90aWZpY2F0aW9uLmh0bWwnKTtcblxuY29uc3QgT1MgPSBnZXRPUygpO1xuXG5jb25zdCBleHRyYUhlaWdodCA9IE9TID09PSAnTGludXgnID8gMCA6IDI4O1xuY29uc3QgZXh0cmFXaWR0aCA9IE9TID09PSAnV2luZG93cycgPyAxNiA6IDA7XG5cbmNvbnN0IFBPUFVQX1dJTkRPV19PUFRTOiBjaHJvbWUud2luZG93cy5DcmVhdGVEYXRhID0ge1xuICBmb2N1c2VkOiB0cnVlLFxuICBoZWlnaHQ6IDYwMCArIGV4dHJhSGVpZ2h0LFxuICB0eXBlOiAncG9wdXAnLFxuICB1cmw6IE5PVElGSUNBVElPTl9VUkwsXG4gIHdpZHRoOiAzOTAgKyBleHRyYVdpZHRoXG59O1xuXG5jb25zdCBOT1JNQUxfV0lORE9XX09QVFM6IGNocm9tZS53aW5kb3dzLkNyZWF0ZURhdGEgPSB7XG4gIGZvY3VzZWQ6IHRydWUsXG4gIHR5cGU6ICdub3JtYWwnLFxuICB1cmw6IE5PVElGSUNBVElPTl9VUkxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwSGFuZGxlciB7XG4gIHJlYWRvbmx5ICNyZXF1ZXN0U2VydmljZTogUmVxdWVzdFNlcnZpY2U7XG4gICNub3RpZmljYXRpb246IEJyb3dzZXJDb25maXJtYXRpb25UeXBlID0gREVGQVVMVF9OT1RJRklDQVRJT05fVFlQRTtcbiAgI3dpbmRvd3M6IG51bWJlcltdID0gW107XG5cbiAgY29uc3RydWN0b3IgKHJlcXVlc3RTZXJ2aWNlOiBSZXF1ZXN0U2VydmljZSkge1xuICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlID0gcmVxdWVzdFNlcnZpY2U7XG5cbiAgICBjb25zdCB1cGRhdGVOb3RpZmljYXRpb24gPSAocnM6IFJlcXVlc3RTZXR0aW5nc1R5cGUpID0+IHtcbiAgICAgIHRoaXMuI25vdGlmaWNhdGlvbiA9IHJzLmJyb3dzZXJDb25maXJtYXRpb25UeXBlO1xuICAgIH07XG5cbiAgICByZXF1ZXN0U2VydmljZS5zZXR0aW5nU2VydmljZS5nZXRTZXR0aW5ncyh1cGRhdGVOb3RpZmljYXRpb24pO1xuICAgIHJlcXVlc3RTZXJ2aWNlLnNldHRpbmdTZXJ2aWNlLmdldFN1YmplY3QoKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogdXBkYXRlTm90aWZpY2F0aW9uXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlSWNvblYyIChzaG91bGRDbG9zZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBudW1SZXF1ZXN0cyA9IHRoaXMuI3JlcXVlc3RTZXJ2aWNlLm51bVJlcXVlc3RzO1xuICAgIGNvbnN0IHRleHQgPSBudW1SZXF1ZXN0cyA+IDAgPyBudW1SZXF1ZXN0cy50b1N0cmluZygpIDogJyc7XG5cbiAgICB3aXRoRXJyb3JMb2coKCkgPT4gY2hyb21lLmJyb3dzZXJBY3Rpb24/LnNldEJhZGdlVGV4dCh7IHRleHQgfSkpO1xuXG4gICAgaWYgKHNob3VsZENsb3NlICYmIHRleHQgPT09ICcnKSB7XG4gICAgICB0aGlzLnBvcHVwQ2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IHBvcHVwICgpIHtcbiAgICByZXR1cm4gdGhpcy4jd2luZG93cztcbiAgfVxuXG4gIHB1YmxpYyBwb3B1cENsb3NlICgpOiB2b2lkIHtcbiAgICB0aGlzLiN3aW5kb3dzLmZvckVhY2goKGlkOiBudW1iZXIpID0+XG4gICAgICB3aXRoRXJyb3JMb2coKCkgPT4gY2hyb21lLndpbmRvd3MucmVtb3ZlKGlkKSlcbiAgICApO1xuICAgIHRoaXMuI3dpbmRvd3MgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBwb3B1cE9wZW4gKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLiNub3RpZmljYXRpb24gIT09ICdleHRlbnNpb24nKSB7XG4gICAgICBjaHJvbWUud2luZG93cy5nZXRDdXJyZW50KCh3aW4pID0+IHtcbiAgICAgICAgY29uc3QgcG9wdXBPcHRpb25zID0geyAuLi4oXG4gICAgICAgICAgdGhpcy4jbm90aWZpY2F0aW9uID09PSAnd2luZG93J1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIC4uLk5PUk1BTF9XSU5ET1dfT1BUUyxcbiAgICAgICAgICAgICAgd2lkdGg6IHdpbi53aWR0aCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiB3aW4uaGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IFBPUFVQX1dJTkRPV19PUFRTXG4gICAgICAgICkgfTtcblxuICAgICAgICBpZiAod2luKSB7XG4gICAgICAgICAgcG9wdXBPcHRpb25zLmxlZnQgPSAod2luLmxlZnQgfHwgMCkgKyAod2luLndpZHRoIHx8IDApIC0gKHBvcHVwT3B0aW9ucy53aWR0aCB8fCAwKSAtIDIwO1xuICAgICAgICAgIHBvcHVwT3B0aW9ucy50b3AgPSAod2luLnRvcCB8fCAwKSArIDgwO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hyb21lLndpbmRvd3MuY3JlYXRlKHBvcHVwT3B0aW9uc1xuICAgICAgICAgICwgKHdpbmRvdyk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgaWYgKHdpbmRvdykge1xuICAgICAgICAgICAgICB0aGlzLiN3aW5kb3dzLnB1c2god2luZG93LmlkIHx8IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBSZXF1ZXN0RXh0cmluc2ljU2lnbiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvUmVxdWVzdEV4dHJpbnNpY1NpZ24nO1xuaW1wb3J0IHsgQWNjb3VudEpzb24sIFJlcXVlc3RTaWduLCBSZXNvbHZlciwgUmVzcG9uc2VTaWduaW5nLCBTaWduaW5nUmVxdWVzdCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC90eXBlcyc7XG5pbXBvcnQgUmVxdWVzdFNlcnZpY2UgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9yZXF1ZXN0LXNlcnZpY2UnO1xuaW1wb3J0IHsgU2lnblJlcXVlc3QgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBnZXRJZCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMvZ2V0SWQnO1xuaW1wb3J0IHsgaXNJbnRlcm5hbFJlcXVlc3QgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL3JlcXVlc3QnO1xuaW1wb3J0IGtleXJpbmcgZnJvbSAnQHN1YndhbGxldC91aS1rZXlyaW5nJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBTaWduZXJQYXlsb2FkSlNPTiB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcy9leHRyaW5zaWMnO1xuaW1wb3J0IHsgbG9nZ2VyIGFzIGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsL2xvZ2dlcic7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1YnN0cmF0ZVJlcXVlc3RIYW5kbGVyIHtcbiAgcmVhZG9ubHkgI2xvZ2dlcjogTG9nZ2VyO1xuICByZWFkb25seSAjcmVxdWVzdFNlcnZpY2U6IFJlcXVlc3RTZXJ2aWNlO1xuICByZWFkb25seSAjc3Vic3RyYXRlUmVxdWVzdHM6IFJlY29yZDxzdHJpbmcsIFNpZ25SZXF1ZXN0PiA9IHt9O1xuICBwdWJsaWMgcmVhZG9ubHkgc2lnblN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxTaWduaW5nUmVxdWVzdFtdPiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U2lnbmluZ1JlcXVlc3RbXT4oW10pO1xuXG4gIGNvbnN0cnVjdG9yIChyZXF1ZXN0U2VydmljZTogUmVxdWVzdFNlcnZpY2UpIHtcbiAgICB0aGlzLiNyZXF1ZXN0U2VydmljZSA9IHJlcXVlc3RTZXJ2aWNlO1xuICAgIHRoaXMuI2xvZ2dlciA9IGNyZWF0ZUxvZ2dlcignU3Vic3RyYXRlUmVxdWVzdEhhbmRsZXInKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTaWduUmVxdWVzdCAoaWQ6IHN0cmluZyk6IFNpZ25SZXF1ZXN0IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy4jc3Vic3RyYXRlUmVxdWVzdHNbaWRdO1xuICB9XG5cbiAgcHVibGljIGdldCBhbGxTdWJzdHJhdGVSZXF1ZXN0cyAoKTogU2lnbmluZ1JlcXVlc3RbXSB7XG4gICAgcmV0dXJuIE9iamVjdFxuICAgICAgLnZhbHVlcyh0aGlzLiNzdWJzdHJhdGVSZXF1ZXN0cylcbiAgICAgIC5tYXAoKHsgYWNjb3VudCwgaWQsIHJlcXVlc3QsIHVybCB9KSA9PiAoeyBhY2NvdW50LCBpZCwgcmVxdWVzdCwgdXJsLCBpc0ludGVybmFsOiBpc0ludGVybmFsUmVxdWVzdCh1cmwpIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlSWNvblNpZ24gKHNob3VsZENsb3NlPzogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuc2lnblN1YmplY3QubmV4dCh0aGlzLmFsbFN1YnN0cmF0ZVJlcXVlc3RzKTtcbiAgICB0aGlzLiNyZXF1ZXN0U2VydmljZS51cGRhdGVJY29uVjIoc2hvdWxkQ2xvc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaWduQ29tcGxldGUgPSAoaWQ6IHN0cmluZywgcmVzb2x2ZTogKHJlc3VsdDogUmVzcG9uc2VTaWduaW5nKSA9PiB2b2lkLCByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQpOiBSZXNvbHZlcjxSZXNwb25zZVNpZ25pbmc+ID0+IHtcbiAgICBjb25zdCBjb21wbGV0ZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgIGRlbGV0ZSB0aGlzLiNzdWJzdHJhdGVSZXF1ZXN0c1tpZF07XG4gICAgICB0aGlzLnVwZGF0ZUljb25TaWduKHRydWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVqZWN0OiAoZXJyb3I6IEVycm9yKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuI2xvZ2dlci5sb2coZXJyb3IpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSxcbiAgICAgIHJlc29sdmU6IChyZXN1bHQ6IFJlc3BvbnNlU2lnbmluZyk6IHZvaWQgPT4ge1xuICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBwdWJsaWMgZ2V0IG51bVN1YnN0cmF0ZVJlcXVlc3RzICgpOiBudW1iZXIge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLiNzdWJzdHJhdGVSZXF1ZXN0cykubGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHNpZ24gKHVybDogc3RyaW5nLCByZXF1ZXN0OiBSZXF1ZXN0U2lnbiwgYWNjb3VudDogQWNjb3VudEpzb24sIF9pZD86IHN0cmluZyk6IFByb21pc2U8UmVzcG9uc2VTaWduaW5nPiB7XG4gICAgY29uc3QgaWQgPSBfaWQgfHwgZ2V0SWQoKTtcbiAgICBjb25zdCBpc0Fsd2F5c1JlcXVpcmVkID0gYXdhaXQgdGhpcy4jcmVxdWVzdFNlcnZpY2Uuc2V0dGluZ1NlcnZpY2UuaXNBbHdheXNSZXF1aXJlZDtcblxuICAgIGlmIChpc0Fsd2F5c1JlcXVpcmVkKSB7XG4gICAgICB0aGlzLiNyZXF1ZXN0U2VydmljZS5rZXlyaW5nU2VydmljZS5sb2NrKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuI3N1YnN0cmF0ZVJlcXVlc3RzW2lkXSA9IHtcbiAgICAgICAgLi4udGhpcy5zaWduQ29tcGxldGUoaWQsIHJlc29sdmUsIHJlamVjdCksXG4gICAgICAgIGFjY291bnQsXG4gICAgICAgIGlkLFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICB1cmxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMudXBkYXRlSWNvblNpZ24oKTtcbiAgICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLnBvcHVwT3BlbigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHNpZ25UcmFuc2FjdGlvbiAoaWQ6IHN0cmluZywgYWRkcmVzczogc3RyaW5nLCB1cmw6IHN0cmluZywgcGF5bG9hZDogU2lnbmVyUGF5bG9hZEpTT04pOiBQcm9taXNlPFJlc3BvbnNlU2lnbmluZz4ge1xuICAgIGNvbnN0IGlzQWx3YXlzUmVxdWlyZWQgPSBhd2FpdCB0aGlzLiNyZXF1ZXN0U2VydmljZS5zZXR0aW5nU2VydmljZS5pc0Fsd2F5c1JlcXVpcmVkO1xuXG4gICAgaWYgKGlzQWx3YXlzUmVxdWlyZWQpIHtcbiAgICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLmtleXJpbmdTZXJ2aWNlLmxvY2soKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgcGFpciA9IGtleXJpbmcuZ2V0UGFpcihhZGRyZXNzKTtcbiAgICAgIGNvbnN0IGFjY291bnQ6IEFjY291bnRKc29uID0geyBhZGRyZXNzOiBwYWlyLmFkZHJlc3MsIC4uLnBhaXIubWV0YSB9O1xuXG4gICAgICB0aGlzLiNzdWJzdHJhdGVSZXF1ZXN0c1tpZF0gPSB7XG4gICAgICAgIC4uLnRoaXMuc2lnbkNvbXBsZXRlKGlkLCByZXNvbHZlLCByZWplY3QpLFxuICAgICAgICBhY2NvdW50LFxuICAgICAgICBpZCxcbiAgICAgICAgcmVxdWVzdDogbmV3IFJlcXVlc3RFeHRyaW5zaWNTaWduKHBheWxvYWQpLFxuICAgICAgICB1cmw6IHVybFxuICAgICAgfTtcblxuICAgICAgdGhpcy51cGRhdGVJY29uU2lnbigpO1xuXG4gICAgICBpZiAoIWlzSW50ZXJuYWxSZXF1ZXN0KHVybCkpIHtcbiAgICAgICAgdGhpcy4jcmVxdWVzdFNlcnZpY2UucG9wdXBPcGVuKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXRXYWxsZXQgKCkge1xuICAgIGZvciAoY29uc3QgcmVxdWVzdCBvZiBPYmplY3QudmFsdWVzKHRoaXMuI3N1YnN0cmF0ZVJlcXVlc3RzKSkge1xuICAgICAgcmVxdWVzdC5yZWplY3QobmV3IEVycm9yKCdSZXNldCB3YWxsZXQnKSk7XG4gICAgfVxuXG4gICAgdGhpcy5zaWduU3ViamVjdC5uZXh0KFtdKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IE1ldGFkYXRhU3RvcmUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcyc7XG5pbXBvcnQgeyBhZGRNZXRhZGF0YSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWNoYWlucyc7XG5pbXBvcnQgeyBNZXRhZGF0YURlZiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWluamVjdC90eXBlcyc7XG5cbmltcG9ydCB7IGtub3duR2VuZXNpcyB9IGZyb20gJ0Bwb2xrYWRvdC9uZXR3b3Jrcy9kZWZhdWx0cyc7XG5pbXBvcnQgeyBIZXhTdHJpbmcgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBleHRyYWN0TWV0YWRhdGEgPSAoc3RvcmU6IE1ldGFkYXRhU3RvcmUpOiB2b2lkID0+IHtcbiAgc3RvcmUuYWxsTWFwKChtYXApOiB2b2lkID0+IHtcbiAgICBjb25zdCBrbm93bkVudHJpZXMgPSBPYmplY3QuZW50cmllcyhrbm93bkdlbmVzaXMpO1xuICAgIGNvbnN0IGRlZnM6IFJlY29yZDxzdHJpbmcsIHsgZGVmOiBNZXRhZGF0YURlZiwgaW5kZXg6IG51bWJlciwga2V5OiBzdHJpbmcgfT4gPSB7fTtcbiAgICBjb25zdCByZW1vdmFsczogc3RyaW5nW10gPSBbXTtcblxuICAgIE9iamVjdFxuICAgICAgLmVudHJpZXMobWFwKVxuICAgICAgLmZvckVhY2goKFtrZXksIGRlZl0pOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgZW50cnkgPSBrbm93bkVudHJpZXMuZmluZCgoWywgaGFzaGVzXSkgPT4gaGFzaGVzLmluY2x1ZGVzKGRlZi5nZW5lc2lzSGFzaCBhcyBIZXhTdHJpbmcpKTtcblxuICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICBjb25zdCBbbmFtZSwgaGFzaGVzXSA9IGVudHJ5O1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gaGFzaGVzLmluZGV4T2YoZGVmLmdlbmVzaXNIYXNoIGFzIEhleFN0cmluZyk7XG5cbiAgICAgICAgICAvLyBmbGF0dGVuIHRoZSBrbm93biBtZXRhZGF0YSBiYXNlZCBvbiB0aGUgZ2VuZXNpcyBpbmRleFxuICAgICAgICAgIC8vIChsb3dlciBpcyBiZXR0ZXIvbmV3ZXIpXG4gICAgICAgICAgaWYgKCFkZWZzW25hbWVdIHx8IChkZWZzW25hbWVdLmluZGV4ID4gaW5kZXgpKSB7XG4gICAgICAgICAgICBpZiAoZGVmc1tuYW1lXSkge1xuICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIG9sZCB2ZXJzaW9uIG9mIHRoZSBtZXRhZGF0YVxuICAgICAgICAgICAgICByZW1vdmFscy5wdXNoKGRlZnNbbmFtZV0ua2V5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVmc1tuYW1lXSA9IHsgZGVmLCBpbmRleCwga2V5IH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHRoaXMgaXMgbm90IGEga25vd24gZW50cnksIHNvIHdlIHdpbGwganVzdCBhcHBseSBpdFxuICAgICAgICAgIGRlZnNba2V5XSA9IHsgZGVmLCBpbmRleDogMCwga2V5IH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgcmVtb3ZhbHMuZm9yRWFjaCgoa2V5KSA9PiBzdG9yZS5yZW1vdmUoa2V5KSk7XG4gICAgT2JqZWN0LnZhbHVlcyhkZWZzKS5mb3JFYWNoKCh7IGRlZiB9KSA9PiBhZGRNZXRhZGF0YShkZWYpKTtcbiAgfSk7XG59O1xuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IEF1dGhSZXF1ZXN0VjIsIENvbmZpcm1hdGlvbkRlZmluaXRpb25zLCBDb25maXJtYXRpb25zUXVldWUsIENvbmZpcm1hdGlvbnNRdWV1ZUl0ZW1PcHRpb25zLCBDb25maXJtYXRpb25UeXBlLCBSZXF1ZXN0Q29uZmlybWF0aW9uQ29tcGxldGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEFjY291bnRBdXRoVHlwZSwgQWNjb3VudEpzb24sIEF1dGhvcml6ZVJlcXVlc3QsIE1ldGFkYXRhUmVxdWVzdCwgUmVxdWVzdEF1dGhvcml6ZVRhYiwgUmVxdWVzdFNpZ24sIFJlc3BvbnNlU2lnbmluZywgU2lnbmluZ1JlcXVlc3QgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvdHlwZXMnO1xuaW1wb3J0IHsgQ2hhaW5TZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9jaGFpbi1zZXJ2aWNlJztcbmltcG9ydCB7IEtleXJpbmdTZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9rZXlyaW5nLXNlcnZpY2UnO1xuaW1wb3J0IFNldHRpbmdTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc2V0dGluZy1zZXJ2aWNlL1NldHRpbmdTZXJ2aWNlJztcbmltcG9ydCB7IFdhbGxldENvbm5lY3ROb3RTdXBwb3J0UmVxdWVzdCwgV2FsbGV0Q29ubmVjdFNlc3Npb25SZXF1ZXN0IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy93YWxsZXQtY29ubmVjdC1zZXJ2aWNlL3R5cGVzJztcbmltcG9ydCB7IE1ldGFkYXRhRGVmIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24taW5qZWN0L3R5cGVzJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBTaWduZXJQYXlsb2FkSlNPTiB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcy9leHRyaW5zaWMnO1xuXG5pbXBvcnQgeyBBdXRoUmVxdWVzdEhhbmRsZXIsIENvbm5lY3RXQ1JlcXVlc3RIYW5kbGVyLCBFdm1SZXF1ZXN0SGFuZGxlciwgTWV0YWRhdGFSZXF1ZXN0SGFuZGxlciwgTm90U3VwcG9ydFdDUmVxdWVzdEhhbmRsZXIsIFBvcHVwSGFuZGxlciwgU3Vic3RyYXRlUmVxdWVzdEhhbmRsZXIgfSBmcm9tICcuL2hhbmRsZXInO1xuaW1wb3J0IHsgQXV0aFVybHMsIE1ldGFSZXF1ZXN0IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcXVlc3RTZXJ2aWNlIHtcbiAgLy8gQ29tbW9uXG4gIHJlYWRvbmx5ICNjaGFpblNlcnZpY2U6IENoYWluU2VydmljZTtcbiAgcmVhZG9ubHkgc2V0dGluZ1NlcnZpY2U6IFNldHRpbmdTZXJ2aWNlO1xuICByZWFkb25seSBrZXlyaW5nU2VydmljZTogS2V5cmluZ1NlcnZpY2U7XG4gIHJlYWRvbmx5ICNwb3B1cEhhbmRsZXI6IFBvcHVwSGFuZGxlcjtcbiAgcmVhZG9ubHkgI21ldGFkYXRhUmVxdWVzdEhhbmRsZXI6IE1ldGFkYXRhUmVxdWVzdEhhbmRsZXI7XG4gIHJlYWRvbmx5ICNhdXRoUmVxdWVzdEhhbmRsZXI6IEF1dGhSZXF1ZXN0SGFuZGxlcjtcbiAgcmVhZG9ubHkgI3N1YnN0cmF0ZVJlcXVlc3RIYW5kbGVyOiBTdWJzdHJhdGVSZXF1ZXN0SGFuZGxlcjtcbiAgcmVhZG9ubHkgI2V2bVJlcXVlc3RIYW5kbGVyOiBFdm1SZXF1ZXN0SGFuZGxlcjtcbiAgcmVhZG9ubHkgI2Nvbm5lY3RXQ1JlcXVlc3RIYW5kbGVyOiBDb25uZWN0V0NSZXF1ZXN0SGFuZGxlcjtcbiAgcmVhZG9ubHkgI25vdFN1cHBvcnRXQ1JlcXVlc3RIYW5kbGVyOiBOb3RTdXBwb3J0V0NSZXF1ZXN0SGFuZGxlcjtcblxuICAvLyBDb21tb25cbiAgY29uc3RydWN0b3IgKGNoYWluU2VydmljZTogQ2hhaW5TZXJ2aWNlLCBzZXR0aW5nU2VydmljZTogU2V0dGluZ1NlcnZpY2UsIGtleXJpbmdTZXJ2aWNlOiBLZXlyaW5nU2VydmljZSkge1xuICAgIHRoaXMuI2NoYWluU2VydmljZSA9IGNoYWluU2VydmljZTtcbiAgICB0aGlzLnNldHRpbmdTZXJ2aWNlID0gc2V0dGluZ1NlcnZpY2U7XG4gICAgdGhpcy5rZXlyaW5nU2VydmljZSA9IGtleXJpbmdTZXJ2aWNlO1xuICAgIHRoaXMuI3BvcHVwSGFuZGxlciA9IG5ldyBQb3B1cEhhbmRsZXIodGhpcyk7XG4gICAgdGhpcy4jbWV0YWRhdGFSZXF1ZXN0SGFuZGxlciA9IG5ldyBNZXRhZGF0YVJlcXVlc3RIYW5kbGVyKHRoaXMpO1xuICAgIHRoaXMuI2F1dGhSZXF1ZXN0SGFuZGxlciA9IG5ldyBBdXRoUmVxdWVzdEhhbmRsZXIodGhpcywgdGhpcy4jY2hhaW5TZXJ2aWNlLCB0aGlzLmtleXJpbmdTZXJ2aWNlKTtcbiAgICB0aGlzLiNzdWJzdHJhdGVSZXF1ZXN0SGFuZGxlciA9IG5ldyBTdWJzdHJhdGVSZXF1ZXN0SGFuZGxlcih0aGlzKTtcbiAgICB0aGlzLiNldm1SZXF1ZXN0SGFuZGxlciA9IG5ldyBFdm1SZXF1ZXN0SGFuZGxlcih0aGlzKTtcbiAgICB0aGlzLiNjb25uZWN0V0NSZXF1ZXN0SGFuZGxlciA9IG5ldyBDb25uZWN0V0NSZXF1ZXN0SGFuZGxlcih0aGlzKTtcbiAgICB0aGlzLiNub3RTdXBwb3J0V0NSZXF1ZXN0SGFuZGxlciA9IG5ldyBOb3RTdXBwb3J0V0NSZXF1ZXN0SGFuZGxlcih0aGlzKTtcblxuICAgIC8vIFJlc2V0IGljb24gb24gc3RhcnQgc2VydmljZVxuICAgIHRoaXMudXBkYXRlSWNvblYyKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG51bUFsbFJlcXVlc3RzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hbGxTdWJzdHJhdGVSZXF1ZXN0cy5sZW5ndGggKyB0aGlzLm51bUV2bVJlcXVlc3RzO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUljb25WMiAoc2hvdWxkQ2xvc2U/OiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy4jcG9wdXBIYW5kbGVyLnVwZGF0ZUljb25WMihzaG91bGRDbG9zZSk7XG4gIH1cblxuICBnZXRBZGRyZXNzTGlzdCAodmFsdWUgPSBmYWxzZSk6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+IHtcbiAgICBjb25zdCBhZGRyZXNzTGlzdCA9IE9iamVjdC5rZXlzKHRoaXMua2V5cmluZ1NlcnZpY2UuYWNjb3VudHMpO1xuXG4gICAgcmV0dXJuIGFkZHJlc3NMaXN0LnJlZHVjZSgoYWRkcmVzc0xpc3QsIHYpID0+ICh7IC4uLmFkZHJlc3NMaXN0LCBbdl06IHZhbHVlIH0pLCB7fSk7XG4gIH1cblxuICAvLyBQb3B1cFxuICBwdWJsaWMgZ2V0IHBvcHVwICgpIHtcbiAgICByZXR1cm4gdGhpcy4jcG9wdXBIYW5kbGVyLnBvcHVwO1xuICB9XG5cbiAgcHVibGljIHBvcHVwQ2xvc2UgKCk6IHZvaWQge1xuICAgIHRoaXMuI3BvcHVwSGFuZGxlci5wb3B1cENsb3NlKCk7XG4gIH1cblxuICBwdWJsaWMgcG9wdXBPcGVuICgpOiB2b2lkIHtcbiAgICAvLyBOb3Qgb3BlbiBuZXcgcG9wdXAgYW5kIHVzZSBleGlzdGVkXG4gICAgY29uc3QgcG9wdXBMaXN0ID0gdGhpcy4jcG9wdXBIYW5kbGVyLnBvcHVwO1xuXG4gICAgaWYgKHBvcHVwTGlzdCAmJiBwb3B1cExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgY2hyb21lLndpbmRvd3MudXBkYXRlKHBvcHVwTGlzdFswXSwgeyBmb2N1c2VkOiB0cnVlIH0pPy5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jcG9wdXBIYW5kbGVyLnBvcHVwT3BlbigpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1ldGFkYXRhXG4gIHB1YmxpYyBnZXQgbWV0YVN1YmplY3QgKCk6IEJlaGF2aW9yU3ViamVjdDxNZXRhZGF0YVJlcXVlc3RbXT4ge1xuICAgIHJldHVybiB0aGlzLiNtZXRhZGF0YVJlcXVlc3RIYW5kbGVyLm1ldGFTdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIGdldCBrbm93bk1ldGFkYXRhICgpOiBNZXRhZGF0YURlZltdIHtcbiAgICByZXR1cm4gdGhpcy4jbWV0YWRhdGFSZXF1ZXN0SGFuZGxlci5rbm93bk1ldGFkYXRhO1xuICB9XG5cbiAgcHVibGljIGdldCBudW1NZXRhUmVxdWVzdHMgKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI21ldGFkYXRhUmVxdWVzdEhhbmRsZXIubnVtTWV0YVJlcXVlc3RzO1xuICB9XG5cbiAgcHVibGljIGluamVjdE1ldGFkYXRhICh1cmw6IHN0cmluZywgcmVxdWVzdDogTWV0YWRhdGFEZWYpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy4jbWV0YWRhdGFSZXF1ZXN0SGFuZGxlci5pbmplY3RNZXRhZGF0YSh1cmwsIHJlcXVlc3QpO1xuICB9XG5cbiAgcHVibGljIGdldE1ldGFSZXF1ZXN0IChpZDogc3RyaW5nKTogTWV0YVJlcXVlc3Qge1xuICAgIHJldHVybiB0aGlzLiNtZXRhZGF0YVJlcXVlc3RIYW5kbGVyLmdldE1ldGFSZXF1ZXN0KGlkKTtcbiAgfVxuXG4gIHB1YmxpYyBzYXZlTWV0YWRhdGEgKG1ldGE6IE1ldGFkYXRhRGVmKTogdm9pZCB7XG4gICAgdGhpcy4jbWV0YWRhdGFSZXF1ZXN0SGFuZGxlci5zYXZlTWV0YWRhdGEobWV0YSk7XG4gIH1cblxuICAvLyBBdXRoXG4gIHB1YmxpYyBnZXQgYXV0aFN1YmplY3RWMiAoKTogQmVoYXZpb3JTdWJqZWN0PEF1dGhvcml6ZVJlcXVlc3RbXT4ge1xuICAgIHJldHVybiB0aGlzLiNhdXRoUmVxdWVzdEhhbmRsZXIuYXV0aFN1YmplY3RWMjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbnVtQXV0aFJlcXVlc3RzICgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiNhdXRoUmVxdWVzdEhhbmRsZXIubnVtQXV0aFJlcXVlc3RzVjI7XG4gIH1cblxuICBwdWJsaWMgc2V0QXV0aG9yaXplIChkYXRhOiBBdXRoVXJscywgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy4jYXV0aFJlcXVlc3RIYW5kbGVyLnNldEF1dGhvcml6ZShkYXRhLCBjYWxsYmFjayk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXV0aG9yaXplICh1cGRhdGU6ICh2YWx1ZTogQXV0aFVybHMpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLiNhdXRoUmVxdWVzdEhhbmRsZXIuZ2V0QXV0aG9yaXplKHVwZGF0ZSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXV0aExpc3QgKCk6IFByb21pc2U8QXV0aFVybHM+IHtcbiAgICByZXR1cm4gdGhpcy4jYXV0aFJlcXVlc3RIYW5kbGVyLmdldEF1dGhMaXN0KCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYXV0aG9yaXplVXJsVjIgKHVybDogc3RyaW5nLCByZXF1ZXN0OiBSZXF1ZXN0QXV0aG9yaXplVGFiKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuI2F1dGhSZXF1ZXN0SGFuZGxlci5hdXRob3JpemVVcmxWMih1cmwsIHJlcXVlc3QpO1xuICB9XG5cbiAgcHVibGljIGdldEF1dGhSZXF1ZXN0VjIgKGlkOiBzdHJpbmcpOiBBdXRoUmVxdWVzdFYyIHtcbiAgICByZXR1cm4gdGhpcy4jYXV0aFJlcXVlc3RIYW5kbGVyLmdldEF1dGhSZXF1ZXN0VjIoaWQpO1xuICB9XG5cbiAgcHVibGljIGdldERBcHBDaGFpbkluZm8gKG9wdGlvbnM6IHthY2Nlc3NUeXBlOiBBY2NvdW50QXV0aFR5cGUsIGF1dG9BY3RpdmU/OiBib29sZWFuLCBkZWZhdWx0Q2hhaW4/OiBzdHJpbmcsIHVybD86IHN0cmluZ30pIHtcbiAgICByZXR1cm4gdGhpcy4jYXV0aFJlcXVlc3RIYW5kbGVyLmdldERBcHBDaGFpbkluZm8ob3B0aW9ucyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHN1YnNjcmliZUV2bUNoYWluQ2hhbmdlICgpIHtcbiAgICByZXR1cm4gdGhpcy4jYXV0aFJlcXVlc3RIYW5kbGVyLnN1YnNjcmliZUV2bUNoYWluQ2hhbmdlO1xuICB9XG5cbiAgcHVibGljIGdldCBzdWJzY3JpYmVBdXRob3JpemVVcmxTdWJqZWN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy4jYXV0aFJlcXVlc3RIYW5kbGVyLnN1YnNjcmliZUF1dGhvcml6ZVVybFN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgZW5zdXJlVXJsQXV0aG9yaXplZFYyICh1cmw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLiNhdXRoUmVxdWVzdEhhbmRsZXIuZW5zdXJlVXJsQXV0aG9yaXplZFYyKHVybCk7XG4gIH1cblxuICAvLyBTdWJzdHJhdGUgcmVxdWVzdHNcbiAgcHVibGljIGdldCBzaWduU3ViamVjdCAoKTogQmVoYXZpb3JTdWJqZWN0PFNpZ25pbmdSZXF1ZXN0W10+IHtcbiAgICByZXR1cm4gdGhpcy4jc3Vic3RyYXRlUmVxdWVzdEhhbmRsZXIuc2lnblN1YmplY3Q7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGFsbFN1YnN0cmF0ZVJlcXVlc3RzICgpOiBTaWduaW5nUmVxdWVzdFtdIHtcbiAgICByZXR1cm4gdGhpcy4jc3Vic3RyYXRlUmVxdWVzdEhhbmRsZXIuYWxsU3Vic3RyYXRlUmVxdWVzdHM7XG4gIH1cblxuICBwdWJsaWMgc2lnbiAodXJsOiBzdHJpbmcsIHJlcXVlc3Q6IFJlcXVlc3RTaWduLCBhY2NvdW50OiBBY2NvdW50SnNvbiwgaWQ/OiBzdHJpbmcpOiBQcm9taXNlPFJlc3BvbnNlU2lnbmluZz4ge1xuICAgIHJldHVybiB0aGlzLiNzdWJzdHJhdGVSZXF1ZXN0SGFuZGxlci5zaWduKHVybCwgcmVxdWVzdCwgYWNjb3VudCwgaWQpO1xuICB9XG5cbiAgcHVibGljIGdldCBudW1TdWJzdHJhdGVSZXF1ZXN0cyAoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jc3Vic3RyYXRlUmVxdWVzdEhhbmRsZXIubnVtU3Vic3RyYXRlUmVxdWVzdHM7XG4gIH1cblxuICAvLyBFdm0gcmVxdWVzdHNcbiAgcHVibGljIGdldCBudW1Fdm1SZXF1ZXN0cyAoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jZXZtUmVxdWVzdEhhbmRsZXIubnVtRXZtUmVxdWVzdHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGNvbmZpcm1hdGlvbnNRdWV1ZVN1YmplY3QgKCk6IEJlaGF2aW9yU3ViamVjdDxDb25maXJtYXRpb25zUXVldWU+IHtcbiAgICByZXR1cm4gdGhpcy4jZXZtUmVxdWVzdEhhbmRsZXIuZ2V0Q29uZmlybWF0aW9uc1F1ZXVlU3ViamVjdCgpO1xuICB9XG5cbiAgcHVibGljIGdldFNpZ25SZXF1ZXN0IChpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuI3N1YnN0cmF0ZVJlcXVlc3RIYW5kbGVyLmdldFNpZ25SZXF1ZXN0KGlkKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzaWduSW50ZXJuYWxUcmFuc2FjdGlvbiAoaWQ6IHN0cmluZywgYWRkcmVzczogc3RyaW5nLCB1cmw6IHN0cmluZywgcGF5bG9hZDogU2lnbmVyUGF5bG9hZEpTT04pOiBQcm9taXNlPFJlc3BvbnNlU2lnbmluZz4ge1xuICAgIHJldHVybiB0aGlzLiNzdWJzdHJhdGVSZXF1ZXN0SGFuZGxlci5zaWduVHJhbnNhY3Rpb24oaWQsIGFkZHJlc3MsIHVybCwgcGF5bG9hZCk7XG4gIH1cblxuICBwdWJsaWMgYWRkQ29uZmlybWF0aW9uPENUIGV4dGVuZHMgQ29uZmlybWF0aW9uVHlwZT4gKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgdHlwZTogQ1QsXG4gICAgcGF5bG9hZDogQ29uZmlybWF0aW9uRGVmaW5pdGlvbnNbQ1RdWzBdWydwYXlsb2FkJ10sXG4gICAgb3B0aW9uczogQ29uZmlybWF0aW9uc1F1ZXVlSXRlbU9wdGlvbnMgPSB7fSxcbiAgICB2YWxpZGF0b3I/OiAoaW5wdXQ6IENvbmZpcm1hdGlvbkRlZmluaXRpb25zW0NUXVsxXSkgPT4gRXJyb3IgfCB1bmRlZmluZWRcbiAgKTogUHJvbWlzZTxDb25maXJtYXRpb25EZWZpbml0aW9uc1tDVF1bMV0+IHtcbiAgICByZXR1cm4gdGhpcy4jZXZtUmVxdWVzdEhhbmRsZXIuYWRkQ29uZmlybWF0aW9uKGlkLCB1cmwsIHR5cGUsIHBheWxvYWQsIG9wdGlvbnMsIHZhbGlkYXRvcik7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY29tcGxldGVDb25maXJtYXRpb24gKHJlcXVlc3Q6IFJlcXVlc3RDb25maXJtYXRpb25Db21wbGV0ZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLiNldm1SZXF1ZXN0SGFuZGxlci5jb21wbGV0ZUNvbmZpcm1hdGlvbihyZXF1ZXN0KTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVDb25maXJtYXRpb248Q1QgZXh0ZW5kcyBDb25maXJtYXRpb25UeXBlPiAoXG4gICAgaWQ6IHN0cmluZyxcbiAgICB0eXBlOiBDVCxcbiAgICBwYXlsb2FkOiBDb25maXJtYXRpb25EZWZpbml0aW9uc1tDVF1bMF1bJ3BheWxvYWQnXSxcbiAgICBvcHRpb25zOiBDb25maXJtYXRpb25zUXVldWVJdGVtT3B0aW9ucyA9IHt9LFxuICAgIHZhbGlkYXRvcj86IChpbnB1dDogQ29uZmlybWF0aW9uRGVmaW5pdGlvbnNbQ1RdWzFdKSA9PiBFcnJvciB8IHVuZGVmaW5lZFxuICApIHtcbiAgICByZXR1cm4gdGhpcy4jZXZtUmVxdWVzdEhhbmRsZXIudXBkYXRlQ29uZmlybWF0aW9uKGlkLCB0eXBlLCBwYXlsb2FkLCBvcHRpb25zLCB2YWxpZGF0b3IpO1xuICB9XG5cbiAgLy8gV2FsbGV0Q29ubmVjdCBDb25uZWN0IHJlcXVlc3RzXG4gIHB1YmxpYyBnZXRDb25uZWN0V0NSZXF1ZXN0IChpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuI2Nvbm5lY3RXQ1JlcXVlc3RIYW5kbGVyLmdldENvbm5lY3RXQ1JlcXVlc3QoaWQpO1xuICB9XG5cbiAgcHVibGljIGdldCBjb25uZWN0V0NTdWJqZWN0ICgpOiBCZWhhdmlvclN1YmplY3Q8V2FsbGV0Q29ubmVjdFNlc3Npb25SZXF1ZXN0W10+IHtcbiAgICByZXR1cm4gdGhpcy4jY29ubmVjdFdDUmVxdWVzdEhhbmRsZXIuY29ubmVjdFdDU3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWxsQ29ubmVjdFdDUmVxdWVzdHMgKCk6IFdhbGxldENvbm5lY3RTZXNzaW9uUmVxdWVzdFtdIHtcbiAgICByZXR1cm4gdGhpcy4jY29ubmVjdFdDUmVxdWVzdEhhbmRsZXIuYWxsQ29ubmVjdFdDUmVxdWVzdHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG51bUNvbm5lY3RXQ1JlcXVlc3RzICgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiNjb25uZWN0V0NSZXF1ZXN0SGFuZGxlci5udW1Db25uZWN0V0NSZXF1ZXN0cztcbiAgfVxuXG4gIHB1YmxpYyBhZGRDb25uZWN0V0NSZXF1ZXN0IChyZXF1ZXN0OiBXYWxsZXRDb25uZWN0U2Vzc2lvblJlcXVlc3QpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy4jY29ubmVjdFdDUmVxdWVzdEhhbmRsZXIuYWRkQ29ubmVjdFdDUmVxdWVzdChyZXF1ZXN0KTtcbiAgfVxuXG4gIC8vIFdhbGxldENvbm5lY3Qgbm90IHN1cHBvcnQgcmVxdWVzdHNcbiAgcHVibGljIGdldE5vdFN1cHBvcnRXQ1JlcXVlc3QgKGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy4jbm90U3VwcG9ydFdDUmVxdWVzdEhhbmRsZXIuZ2V0Tm90U3VwcG9ydFdDUmVxdWVzdChpZCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG5vdFN1cHBvcnRXQ1N1YmplY3QgKCk6IEJlaGF2aW9yU3ViamVjdDxXYWxsZXRDb25uZWN0Tm90U3VwcG9ydFJlcXVlc3RbXT4ge1xuICAgIHJldHVybiB0aGlzLiNub3RTdXBwb3J0V0NSZXF1ZXN0SGFuZGxlci5ub3RTdXBwb3J0V0NTdWJqZWN0O1xuICB9XG5cbiAgcHVibGljIGdldCBhbGxOb3RTdXBwb3J0V0NSZXF1ZXN0cyAoKTogV2FsbGV0Q29ubmVjdE5vdFN1cHBvcnRSZXF1ZXN0W10ge1xuICAgIHJldHVybiB0aGlzLiNub3RTdXBwb3J0V0NSZXF1ZXN0SGFuZGxlci5hbGxOb3RTdXBwb3J0V0NSZXF1ZXN0cztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbnVtTm90U3VwcG9ydFdDUmVxdWVzdHMgKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI25vdFN1cHBvcnRXQ1JlcXVlc3RIYW5kbGVyLm51bU5vdFN1cHBvcnRXQ1JlcXVlc3RzO1xuICB9XG5cbiAgcHVibGljIGFkZE5vdFN1cHBvcnRXQ1JlcXVlc3QgKHJlcXVlc3Q6IFdhbGxldENvbm5lY3ROb3RTdXBwb3J0UmVxdWVzdCk6IHZvaWQge1xuICAgIHJldHVybiB0aGlzLiNub3RTdXBwb3J0V0NSZXF1ZXN0SGFuZGxlci5hZGROb3RTdXBwb3J0V0NSZXF1ZXN0KHJlcXVlc3QpO1xuICB9XG5cbiAgLy8gR2VuZXJhbCBtZXRob2RzXG4gIHB1YmxpYyBnZXQgbnVtUmVxdWVzdHMgKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubnVtTWV0YVJlcXVlc3RzICsgdGhpcy5udW1BdXRoUmVxdWVzdHMgKyB0aGlzLm51bVN1YnN0cmF0ZVJlcXVlc3RzICsgdGhpcy5udW1Fdm1SZXF1ZXN0cyArIHRoaXMubnVtQ29ubmVjdFdDUmVxdWVzdHMgKyB0aGlzLm51bU5vdFN1cHBvcnRXQ1JlcXVlc3RzO1xuICB9XG5cbiAgcHVibGljIHJlc2V0V2FsbGV0ICgpOiB2b2lkIHtcbiAgICB0aGlzLiNhdXRoUmVxdWVzdEhhbmRsZXIucmVzZXRXYWxsZXQoKTtcbiAgICB0aGlzLiNzdWJzdHJhdGVSZXF1ZXN0SGFuZGxlci5yZXNldFdhbGxldCgpO1xuICAgIHRoaXMuI2V2bVJlcXVlc3RIYW5kbGVyLnJlc2V0V2FsbGV0KCk7XG4gICAgdGhpcy4jbWV0YWRhdGFSZXF1ZXN0SGFuZGxlci5yZXNldFdhbGxldCgpO1xuICAgIHRoaXMuI2Nvbm5lY3RXQ1JlcXVlc3RIYW5kbGVyLnJlc2V0V2FsbGV0KCk7XG4gICAgdGhpcy4jbm90U3VwcG9ydFdDUmVxdWVzdEhhbmRsZXIucmVzZXRXYWxsZXQoKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IExhbmd1YWdlVHlwZSwgUGFzc1BoaXNoaW5nLCBSZXF1ZXN0U2V0dGluZ3NUeXBlLCBVaVNldHRpbmdzIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBMQU5HVUFHRSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvY29uc3RhbnRzJztcbmltcG9ydCBQYXNzUGhpc2hpbmdTdG9yZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcy9QYXNzUGhpc2hpbmdTdG9yZSc7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcy9TZXR0aW5ncyc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCBpMThuIGZyb20gJy4vaTE4bi9pMThuJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElORyB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2V0dGluZ1NlcnZpY2Uge1xuICBwcml2YXRlIHJlYWRvbmx5IHNldHRpbmdzU3RvcmUgPSBuZXcgU2V0dGluZ3NTdG9yZSgpO1xuICBwcml2YXRlIHJlYWRvbmx5IHBhc3NQaGlzaGluZ1N0b3JlID0gbmV3IFBhc3NQaGlzaGluZ1N0b3JlKCk7XG5cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIGxldCBvbGQ6IExhbmd1YWdlVHlwZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExBTkdVQUdFKSBhcyBMYW5ndWFnZVR5cGUgfHwgJ2VuJztcblxuICAgIGNvbnN0IHVwZGF0ZUxhbmd1YWdlID0gKHsgbGFuZ3VhZ2UgfTogVWlTZXR0aW5ncykgPT4ge1xuICAgICAgaWYgKGxhbmd1YWdlICE9PSBvbGQpIHtcbiAgICAgICAgb2xkID0gbGFuZ3VhZ2U7XG4gICAgICAgIGkxOG4uY2hhbmdlTGFuZ3VhZ2UobGFuZ3VhZ2UpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldFNldHRpbmdzKHVwZGF0ZUxhbmd1YWdlKTtcbiAgICB0aGlzLnNldHRpbmdzU3RvcmUuZ2V0U3ViamVjdCgpLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiB1cGRhdGVMYW5ndWFnZVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGdldFN1YmplY3QgKCk6IFN1YmplY3Q8UmVxdWVzdFNldHRpbmdzVHlwZT4ge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzU3RvcmUuZ2V0U3ViamVjdCgpO1xuICB9XG5cbiAgcHVibGljIGdldFNldHRpbmdzICh1cGRhdGU6ICh2YWx1ZTogUmVxdWVzdFNldHRpbmdzVHlwZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuc2V0dGluZ3NTdG9yZS5nZXQoJ1NldHRpbmdzJywgKHZhbHVlKSA9PiB7XG4gICAgICB1cGRhdGUoe1xuICAgICAgICAuLi5ERUZBVUxUX1NFVFRJTkcsXG4gICAgICAgIC4uLih2YWx1ZSB8fCB7fSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHNldFNldHRpbmdzIChkYXRhOiBSZXF1ZXN0U2V0dGluZ3NUeXBlLCBjYWxsYmFjaz86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnNldHRpbmdzU3RvcmUuc2V0KCdTZXR0aW5ncycsIGRhdGEsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHB1YmxpYyBwYXNzUGhpc2hpbmdTdWJqZWN0ICgpOiBTdWJqZWN0PFJlY29yZDxzdHJpbmcsIFBhc3NQaGlzaGluZz4+IHtcbiAgICByZXR1cm4gdGhpcy5wYXNzUGhpc2hpbmdTdG9yZS5nZXRTdWJqZWN0KCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0UGFzc1BoaXNoaW5nTGlzdCAodXBkYXRlOiAodmFsdWU6IFJlY29yZDxzdHJpbmcsIFBhc3NQaGlzaGluZz4pID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnBhc3NQaGlzaGluZ1N0b3JlLmdldCgnUGFzc1BoaXNoaW5nJywgKHZhbHVlKSA9PiB7XG4gICAgICB1cGRhdGUodmFsdWUgfHwge30pO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHNldFBhc3NQaGlzaGluZyAoZGF0YTogUmVjb3JkPHN0cmluZywgUGFzc1BoaXNoaW5nPiwgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5wYXNzUGhpc2hpbmdTdG9yZS5zZXQoJ1Bhc3NQaGlzaGluZycsIGRhdGEsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8vIFVzZSBmb3IgbW9iaWxlIG9ubHlcbiAgcHVibGljIGdldCBpc0Fsd2F5c1JlcXVpcmVkICgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuc2V0dGluZ3NTdG9yZS5nZXQoJ1NldHRpbmdzJywgKHZhbHVlKSA9PiB7XG4gICAgICAgIHJlc29sdmUoIXZhbHVlLnRpbWVBdXRvTG9jayk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldFdhbGxldCAoKSB7XG4gICAgdGhpcy5zZXR0aW5nc1N0b3JlLnNldCgnU2V0dGluZ3MnLCBERUZBVUxUX1NFVFRJTkcpO1xuICAgIHRoaXMucGFzc1BoaXNoaW5nU3RvcmUuc2V0KCdQYXNzUGhpc2hpbmcnLCB7fSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE3LTIwMjIgQHBvbGthZG90L3JlYWN0LWNvbXBvbmVudHMgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IGxhbmd1YWdlQ2FjaGUgZnJvbSAnLi9jYWNoZSc7XG5cbnR5cGUgQ2FsbGJhY2sgPSAoZXJyb3I6IHN0cmluZyB8IG51bGwsIGRhdGE6IHVua25vd24pID0+IHZvaWQ7XG5cbnR5cGUgTG9hZFJlc3VsdCA9IFtzdHJpbmcgfCBudWxsLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgYm9vbGVhbl07XG5cbmNvbnN0IGxvYWRlcnM6IFJlY29yZDxzdHJpbmcsIFByb21pc2U8TG9hZFJlc3VsdD4+ID0ge307XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhY2tlbmQge1xuICB0eXBlID0gJ2JhY2tlbmQnO1xuXG4gIHN0YXRpYyB0eXBlOiAnYmFja2VuZCcgPSAnYmFja2VuZCc7XG5cbiAgYXN5bmMgcmVhZCAobG5nOiBzdHJpbmcsIF9uYW1lc3BhY2U6IHN0cmluZywgcmVzcG9uZGVyOiBDYWxsYmFjayk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmIChsYW5ndWFnZUNhY2hlW2xuZ10pIHtcbiAgICAgIHJldHVybiByZXNwb25kZXIobnVsbCwgbGFuZ3VhZ2VDYWNoZVtsbmddKTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICBpZiAoIWxvYWRlcnNbbG5nXSkge1xuICAgICAgbG9hZGVyc1tsbmddID0gdGhpcy5jcmVhdGVMb2FkZXIobG5nKTtcbiAgICB9XG5cbiAgICBjb25zdCBbZXJyb3IsIGRhdGFdID0gYXdhaXQgbG9hZGVyc1tsbmddO1xuXG4gICAgcmV0dXJuIHJlc3BvbmRlcihlcnJvciwgZGF0YSk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVMb2FkZXIgKGxuZzogc3RyaW5nKTogUHJvbWlzZTxMb2FkUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGxvY2FsZXMvJHtsbmd9L3RyYW5zbGF0aW9uLmpzb25gLCB7fSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgcmV0dXJuIFtgaTE4bjogZmFpbGVkIGxvYWRpbmcgJHtsbmd9YCwgcmVzcG9uc2Uuc3RhdHVzID49IDUwMCAmJiByZXNwb25zZS5zdGF0dXMgPCA2MDBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGFuZ3VhZ2VDYWNoZVtsbmddID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5cbiAgICAgICAgcmV0dXJuIFtudWxsLCBsYW5ndWFnZUNhY2hlW2xuZ11dO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gWyhlcnJvciBhcyBFcnJvcikubWVzc2FnZSwgZmFsc2VdO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTctMjAyMiBAcG9sa2Fkb3QvcmVhY3QtY29tcG9uZW50cyBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5jb25zdCBsYW5ndWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuXG5leHBvcnQgZGVmYXVsdCBsYW5ndWFnZUNhY2hlO1xuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAcG9sa2Fkb3QvZXh0ZW5zaW9uLXVpIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IExBTkdVQUdFIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9jb25zdGFudHMnO1xuaW1wb3J0IGkxOG5leHQgZnJvbSAnaTE4bmV4dCc7XG5cbmltcG9ydCBCYWNrZW5kIGZyb20gJy4vQmFja2VuZCc7XG5cbmkxOG5leHRcbiAgLnVzZShCYWNrZW5kKVxuICAuaW5pdCh7XG4gICAgYmFja2VuZDoge30sXG4gICAgZGVidWc6IGZhbHNlLFxuICAgIGZhbGxiYWNrTG5nOiAnZW4nLFxuICAgIGludGVycG9sYXRpb246IHtcbiAgICAgIGVzY2FwZVZhbHVlOiBmYWxzZVxuICAgIH0sXG4gICAga2V5U2VwYXJhdG9yOiBmYWxzZSxcbiAgICBsbmc6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExBTkdVQUdFKSB8fCAnZW4nLFxuICAgIGxvYWQ6ICdsYW5ndWFnZU9ubHknLFxuICAgIG5zU2VwYXJhdG9yOiBmYWxzZSxcbiAgICByZXR1cm5FbXB0eVN0cmluZzogZmFsc2UsXG4gICAgcmV0dXJuTnVsbDogZmFsc2VcbiAgfSlcbiAgLmNhdGNoKChlcnJvcjogRXJyb3IpOiB2b2lkID0+XG4gICAgY29uc29sZS5sb2coJ2kxOG46IGZhaWx1cmUnLCBlcnJvcilcbiAgKTtcblxuZXhwb3J0IGRlZmF1bHQgaTE4bmV4dDtcbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQ2hhaW5Bc3NldCB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBBUElJdGVtU3RhdGUsIEJhbGFuY2VJdGVtLCBDaGFpblN0YWtpbmdNZXRhZGF0YSwgQ3Jvd2Rsb2FuSXRlbSwgTWFudGFQYXlDb25maWcsIE5mdENvbGxlY3Rpb24sIE5mdEl0ZW0sIE5vbWluYXRvck1ldGFkYXRhLCBQcmljZUpzb24sIFN0YWtpbmdJdGVtLCBTdGFraW5nVHlwZSwgVHJhbnNhY3Rpb25IaXN0b3J5SXRlbSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9ldmVudC1zZXJ2aWNlJztcbmltcG9ydCBLb25pRGF0YWJhc2UsIHsgSUJhbGFuY2UsIElDaGFpbiwgSUNyb3dkbG9hbkl0ZW0sIElOZnQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYXRhYmFzZXMnO1xuaW1wb3J0IHsgQXNzZXRTdG9yZSwgQmFsYW5jZVN0b3JlLCBDaGFpblN0b3JlLCBDcm93ZGxvYW5TdG9yZSwgTWV0YWRhdGFTdG9yZSwgTWlncmF0aW9uU3RvcmUsIE5mdENvbGxlY3Rpb25TdG9yZSwgTmZ0U3RvcmUsIFByaWNlU3RvcmUsIFN0YWtpbmdTdG9yZSwgVHJhbnNhY3Rpb25TdG9yZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcyc7XG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmUnO1xuaW1wb3J0IENoYWluU3Rha2luZ01ldGFkYXRhU3RvcmUgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UvZGItc3RvcmVzL0NoYWluU3Rha2luZ01ldGFkYXRhJztcbmltcG9ydCBNYW50YVBheVN0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9NYW50YVBheSc7XG5pbXBvcnQgTm9taW5hdG9yTWV0YWRhdGFTdG9yZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvTm9taW5hdG9yTWV0YWRhdGEnO1xuaW1wb3J0IHsgSGlzdG9yeVF1ZXJ5IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UvZGItc3RvcmVzL1RyYW5zYWN0aW9uJztcbmltcG9ydCB7IHJlZm9ybWF0QWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnZGV4aWUnO1xuXG5pbXBvcnQgeyBsb2dnZXIgYXMgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQHBvbGthZG90L3V0aWwvdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRhYmFzZVNlcnZpY2Uge1xuICBwcml2YXRlIF9kYjogS29uaURhdGFiYXNlO1xuICBwdWJsaWMgc3RvcmVzO1xuICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuICAvLyBUT0RPOiBtaWdodCByZW1vdmUgdGhpc1xuICBwcml2YXRlIG5mdFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHN0YWtpbmdTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvciAocHJpdmF0ZSBldmVudFNlcnZpY2U6IEV2ZW50U2VydmljZSkge1xuICAgIHRoaXMubG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCdEQi1TZXJ2aWNlJyk7XG4gICAgdGhpcy5fZGIgPSBuZXcgS29uaURhdGFiYXNlKCk7XG4gICAgdGhpcy5fZGIub24oJ3JlYWR5JywgKCkgPT4ge1xuICAgICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgnZGF0YWJhc2UucmVhZHknLCB0cnVlKTtcbiAgICB9KTtcbiAgICB0aGlzLnN0b3JlcyA9IHtcbiAgICAgIHByaWNlOiBuZXcgUHJpY2VTdG9yZSh0aGlzLl9kYi5wcmljZSksXG4gICAgICBiYWxhbmNlOiBuZXcgQmFsYW5jZVN0b3JlKHRoaXMuX2RiLmJhbGFuY2VzKSxcbiAgICAgIG5mdDogbmV3IE5mdFN0b3JlKHRoaXMuX2RiLm5mdHMpLFxuICAgICAgbmZ0Q29sbGVjdGlvbjogbmV3IE5mdENvbGxlY3Rpb25TdG9yZSh0aGlzLl9kYi5uZnRDb2xsZWN0aW9ucyksXG4gICAgICBjcm93ZGxvYW46IG5ldyBDcm93ZGxvYW5TdG9yZSh0aGlzLl9kYi5jcm93ZGxvYW5zKSxcbiAgICAgIHN0YWtpbmc6IG5ldyBTdGFraW5nU3RvcmUodGhpcy5fZGIuc3Rha2luZ3MpLFxuICAgICAgdHJhbnNhY3Rpb246IG5ldyBUcmFuc2FjdGlvblN0b3JlKHRoaXMuX2RiLnRyYW5zYWN0aW9ucyksXG4gICAgICBtaWdyYXRpb246IG5ldyBNaWdyYXRpb25TdG9yZSh0aGlzLl9kYi5taWdyYXRpb25zKSxcblxuICAgICAgbWV0YWRhdGE6IG5ldyBNZXRhZGF0YVN0b3JlKHRoaXMuX2RiLm1ldGFkYXRhKSxcbiAgICAgIGNoYWluOiBuZXcgQ2hhaW5TdG9yZSh0aGlzLl9kYi5jaGFpbiksXG4gICAgICBhc3NldDogbmV3IEFzc2V0U3RvcmUodGhpcy5fZGIuYXNzZXQpLFxuXG4gICAgICAvLyBzdGFraW5nXG4gICAgICBjaGFpblN0YWtpbmdNZXRhZGF0YTogbmV3IENoYWluU3Rha2luZ01ldGFkYXRhU3RvcmUodGhpcy5fZGIuY2hhaW5TdGFraW5nTWV0YWRhdGEpLFxuICAgICAgbm9taW5hdG9yTWV0YWRhdGE6IG5ldyBOb21pbmF0b3JNZXRhZGF0YVN0b3JlKHRoaXMuX2RiLm5vbWluYXRvck1ldGFkYXRhKSxcblxuICAgICAgbWFudGFQYXk6IG5ldyBNYW50YVBheVN0b3JlKHRoaXMuX2RiLm1hbnRhUGF5KVxuICAgIH07XG4gIH1cblxuICBhc3luYyB1cGRhdGVQcmljZVN0b3JlIChwcmljZURhdGE6IFByaWNlSnNvbikge1xuICAgIGF3YWl0IHRoaXMuc3RvcmVzLnByaWNlLnRhYmxlLnB1dChwcmljZURhdGEpO1xuICB9XG5cbiAgYXN5bmMgZ2V0UHJpY2VTdG9yZSAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJzID0gYXdhaXQgdGhpcy5zdG9yZXMucHJpY2UudGFibGUuZ2V0KCd1c2QnKTtcblxuICAgICAgcmV0dXJuIHJzO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUpO1xuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8vIEJhbGFuY2VcbiAgYXN5bmMgZ2V0U3RvcmVkQmFsYW5jZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLmJhbGFuY2UudGFibGUudG9BcnJheSgpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmFsYW5jZVN0b3JlIChhZGRyZXNzOiBzdHJpbmcsIGl0ZW06IEJhbGFuY2VJdGVtKSB7XG4gICAgaWYgKGl0ZW0uc3RhdGUgPT09IEFQSUl0ZW1TdGF0ZS5SRUFEWSkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmVzLmJhbGFuY2UudXBzZXJ0KHsgYWRkcmVzcywgLi4uaXRlbSB9IGFzIElCYWxhbmNlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW1vdmVGcm9tQmFsYW5jZVN0b3JlIChhc3NldHM6IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLmJhbGFuY2UucmVtb3ZlQnlTbHVncyhhc3NldHMpO1xuICB9XG5cbiAgLy8gQ3Jvd2Rsb2FuXG4gIGFzeW5jIHVwZGF0ZUNyb3dkbG9hblN0b3JlIChjaGFpbjogc3RyaW5nLCBhZGRyZXNzOiBzdHJpbmcsIGl0ZW06IENyb3dkbG9hbkl0ZW0pIHtcbiAgICBpZiAoaXRlbS5zdGF0ZSA9PT0gQVBJSXRlbVN0YXRlLlJFQURZICYmIGl0ZW0uY29udHJpYnV0ZSAhPT0gJzAnKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZXMuY3Jvd2Rsb2FuLnVwc2VydCh7IGNoYWluLCBhZGRyZXNzLCAuLi5pdGVtIH0gYXMgSUNyb3dkbG9hbkl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZXMuY3Jvd2Rsb2FuLmRlbGV0ZUJ5Q2hhaW5BbmRBZGRyZXNzKGNoYWluLCBhZGRyZXNzKTtcbiAgICB9XG4gIH1cblxuICAvLyBTdGFraW5nXG4gIGFzeW5jIHVwZGF0ZVN0YWtpbmcgKGNoYWluOiBzdHJpbmcsIGFkZHJlc3M6IHN0cmluZywgaXRlbTogU3Rha2luZ0l0ZW0pIHtcbiAgICBpZiAoaXRlbS5zdGF0ZSA9PT0gQVBJSXRlbVN0YXRlLlJFQURZKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZXMuc3Rha2luZy51cHNlcnQoaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0U3Rha2luZ3MgKGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWlucz86IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLnN0YWtpbmcuZ2V0U3Rha2luZ3MoYWRkcmVzc2VzLCBjaGFpbnMpO1xuICB9XG5cbiAgYXN5bmMgZ2V0U3Rha2luZ3NCeUNoYWlucyAoY2hhaW5zOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5zdGFraW5nLmdldFN0YWtpbmdzQnlDaGFpbnMoY2hhaW5zKTtcbiAgfVxuXG4gIGFzeW5jIGdldFBvb2xlZFN0YWtpbmdzIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbkhhc2hlcz86IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLnN0YWtpbmcuZ2V0UG9vbGVkU3Rha2luZ3MoYWRkcmVzc2VzLCBjaGFpbkhhc2hlcyk7XG4gIH1cblxuICBzdWJzY3JpYmVTdGFraW5nIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbkxpc3Q/OiBzdHJpbmdbXSwgY2FsbGJhY2s/OiAoc3Rha2luZ0l0ZW1zOiBTdGFraW5nSXRlbVtdKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5zdGFraW5nU3Vic2NyaXB0aW9uICYmIHRoaXMuc3Rha2luZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXG4gICAgdGhpcy5zdGFraW5nU3Vic2NyaXB0aW9uID0gdGhpcy5zdG9yZXMuc3Rha2luZy5zdWJzY3JpYmVTdGFraW5nKGFkZHJlc3NlcywgY2hhaW5MaXN0KS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKHN0YWtpbmdzKSA9PiBjYWxsYmFjayAmJiBjYWxsYmFjayhzdGFraW5ncylcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLnN0YWtpbmdTdWJzY3JpcHRpb247XG4gIH1cblxuICBzdWJzY3JpYmVDaGFpblN0YWtpbmdNZXRhZGF0YSAoY2hhaW5zOiBzdHJpbmdbXSwgY2FsbGJhY2s6IChkYXRhOiBDaGFpblN0YWtpbmdNZXRhZGF0YVtdKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5zdG9yZXMuY2hhaW5TdGFraW5nTWV0YWRhdGEuc3Vic2NyaWJlQnlDaGFpbihjaGFpbnMpLnN1YnNjcmliZSgoe1xuICAgICAgbmV4dDogKGRhdGEpID0+IGNhbGxiYWNrICYmIGNhbGxiYWNrKGRhdGEpXG4gICAgfSkpO1xuICB9XG5cbiAgc3Vic2NyaWJlTm9taW5hdG9yTWV0YWRhdGEgKGFkZHJlc3Nlczogc3RyaW5nW10sIGNhbGxiYWNrOiAoZGF0YTogTm9taW5hdG9yTWV0YWRhdGFbXSkgPT4gdm9pZCkge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5ub21pbmF0b3JNZXRhZGF0YS5zdWJzY3JpYmVCeUFkZHJlc3NlcyhhZGRyZXNzZXMpLnN1YnNjcmliZSgoe1xuICAgICAgbmV4dDogKGRhdGEpID0+IGNhbGxiYWNrICYmIGNhbGxiYWNrKGRhdGEpXG4gICAgfSkpO1xuICB9XG5cbiAgLy8gVHJhbnNhY3Rpb24gaGlzdG9yaWVzXG4gIGFzeW5jIGdldEhpc3RvcmllcyAocXVlcnk/OiBIaXN0b3J5UXVlcnkpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMudHJhbnNhY3Rpb24ucXVlcnlIaXN0b3J5KHF1ZXJ5KTtcbiAgfVxuXG4gIGFzeW5jIHVwc2VydEhpc3RvcnkgKGhpc3RvcmllczogVHJhbnNhY3Rpb25IaXN0b3J5SXRlbVtdKSB7XG4gICAgY29uc3QgY2xlYW5lZEhpc3RvcnkgPSBoaXN0b3JpZXMuZmlsdGVyKCh4KSA9PiB4ICYmIHguYWRkcmVzcyAmJiB4LmNoYWluICYmIHguZXh0cmluc2ljSGFzaCk7XG5cbiAgICByZXR1cm4gdGhpcy5zdG9yZXMudHJhbnNhY3Rpb24uYnVsa1Vwc2VydChjbGVhbmVkSGlzdG9yeSk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVIaXN0b3J5QnlFeHRyaW5zaWNIYXNoIChleHRyaW5zaWNIYXNoOiBzdHJpbmcsIHVwZGF0ZURhdGE6IFBhcnRpYWw8VHJhbnNhY3Rpb25IaXN0b3J5SXRlbT4pIHtcbiAgICBjb25zdCBjYW5VcGRhdGUgPSB1cGRhdGVEYXRhICYmIGV4dHJpbnNpY0hhc2g7XG5cbiAgICBpZiAoIWNhblVwZGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN0b3Jlcy50cmFuc2FjdGlvbi51cGRhdGVXaXRoUXVlcnkoeyBleHRyaW5zaWNIYXNoIH0sIHVwZGF0ZURhdGEpO1xuICB9XG5cbiAgLy8gTkZUIENvbGxlY3Rpb25cbiAgYXN5bmMgYWRkTmZ0Q29sbGVjdGlvbiAoY29sbGVjdGlvbjogTmZ0Q29sbGVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5uZnRDb2xsZWN0aW9uLnVwc2VydChjb2xsZWN0aW9uKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZU5mdENvbGxlY3Rpb24gKGNoYWluOiBzdHJpbmcsIGNvbGxlY3Rpb25JZDogc3RyaW5nKSB7XG4gICAgYXdhaXQgdGhpcy5zdG9yZXMubmZ0Q29sbGVjdGlvbi5yZW1vdmVDb2xsZWN0aW9uKGNoYWluLCBjb2xsZWN0aW9uSWQpO1xuICAgIGF3YWl0IHRoaXMuc3RvcmVzLm5mdC5kZWxldGVOZnRzQnlDb2xsZWN0aW9uKGNoYWluLCBjb2xsZWN0aW9uSWQpO1xuICB9XG5cbiAgZ2V0QWxsTmZ0Q29sbGVjdGlvbiAoY2hhaW5IYXNoZXM/OiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5uZnRDb2xsZWN0aW9uLmdldE5mdENvbGxlY3Rpb24oY2hhaW5IYXNoZXMpO1xuICB9XG5cbiAgLy8gTkZUXG4gIHN1YnNjcmliZU5mdCAoYWRkcmVzc2VzOiBzdHJpbmdbXSwgY2hhaW5IYXNoZXM/OiBzdHJpbmdbXSwgY2FsbGJhY2s/OiAobmZ0czogSU5mdFtdKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5uZnRTdWJzY3JpcHRpb24gJiYgdGhpcy5uZnRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblxuICAgIHRoaXMubmZ0U3Vic2NyaXB0aW9uID0gdGhpcy5zdG9yZXMubmZ0LnN1YnNjcmliZU5mdChhZGRyZXNzZXMsIGNoYWluSGFzaGVzKS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKG5mdHMpID0+IGNhbGxiYWNrICYmIGNhbGxiYWNrKG5mdHMpXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5uZnRTdWJzY3JpcHRpb247XG4gIH1cblxuICBhc3luYyBjbGVhblVwTmZ0IChjaGFpbjogc3RyaW5nLCBvd25lcjogc3RyaW5nLCBjb2xsZWN0aW9uSWRzOiBzdHJpbmdbXSwgbmZ0SWRzOiBzdHJpbmdbXSwgb3duTm90aGluZz86IGJvb2xlYW4pIHtcbiAgICBpZiAob3duTm90aGluZykge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmVzLm5mdC5kZWxldGVOZnRzQnlDaGFpbkFuZE93bmVyKGNoYWluLCByZWZvcm1hdEFkZHJlc3Mob3duZXIsIDQyKSwgY29sbGVjdGlvbklkcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLm5mdC5jbGVhblVwTmZ0cyhjaGFpbiwgcmVmb3JtYXRBZGRyZXNzKG93bmVyLCA0MiksIGNvbGxlY3Rpb25JZHMsIG5mdElkcyk7XG4gIH1cblxuICBhc3luYyBnZXROZnQgKGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluSGFzaGVzPzogc3RyaW5nW10pIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMubmZ0LmdldE5mdChhZGRyZXNzZXMsIGNoYWluSGFzaGVzKTtcbiAgfVxuXG4gIGFzeW5jIGFkZE5mdCAoYWRkcmVzczogc3RyaW5nLCBuZnQ6IE5mdEl0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMubmZ0LnVwc2VydCh7IC4uLm5mdCwgYWRkcmVzcyB9IGFzIElOZnQpO1xuICB9XG5cbiAgaGFuZGxlTmZ0VHJhbnNmZXIgKGNoYWluOiBzdHJpbmcsIGFkZHJlc3Nlczogc3RyaW5nW10sIG5mdEl0ZW06IE5mdEl0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMubmZ0LmRlbGV0ZU5mdEl0ZW0oY2hhaW4sIGFkZHJlc3NlcywgbmZ0SXRlbSk7XG4gIH1cblxuICByZW1vdmVOZnRzIChjaGFpbjogc3RyaW5nLCBhZGRyZXNzOiBzdHJpbmcsIGNvbGxlY3Rpb25JZDogc3RyaW5nLCBuZnRJZHM6IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLm5mdC5yZW1vdmVOZnRzKGNoYWluLCBhZGRyZXNzLCBjb2xsZWN0aW9uSWQsIG5mdElkcyk7XG4gIH1cblxuICByZW1vdmVOZnRzQnlBZGRyZXNzIChhZGRyZXNzOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMubmZ0LnJlbW92ZU5mdHNCeUFkZHJlc3MoW2FkZHJlc3NdKTtcbiAgfVxuXG4gIC8vIENoYWluXG4gIGFzeW5jIHVwZGF0ZUNoYWluU3RvcmUgKGl0ZW06IElDaGFpbikge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5jaGFpbi51cHNlcnQoaXRlbSk7XG4gIH1cblxuICBhc3luYyBidWxrVXBkYXRlQ2hhaW5TdG9yZSAoZGF0YTogSUNoYWluW10pIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMuY2hhaW4uYnVsa1Vwc2VydChkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUZyb21DaGFpblN0b3JlIChjaGFpbnM6IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLmNoYWluLnJlbW92ZUNoYWlucyhjaGFpbnMpO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsQ2hhaW5TdG9yZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLmNoYWluLmdldEFsbCgpO1xuICB9XG5cbiAgLy8gQXNzZXRcbiAgYXN5bmMgdXBkYXRlQXNzZXRTdG9yZSAoaXRlbTogX0NoYWluQXNzZXQpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMuYXNzZXQudXBzZXJ0KGl0ZW0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsQXNzZXRTdG9yZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLmFzc2V0LmdldEFsbCgpO1xuICB9XG5cbiAgYXN5bmMgcmVtb3ZlRnJvbUFzc2V0U3RvcmUgKGl0ZW1zOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5hc3NldC5yZW1vdmVBc3NldHMoaXRlbXMpO1xuICB9XG5cbiAgLy8gU3Rha2luZ1xuICBhc3luYyB1cGRhdGVDaGFpblN0YWtpbmdNZXRhZGF0YSAoaXRlbTogQ2hhaW5TdGFraW5nTWV0YWRhdGEsIGNoYW5nZXM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgIGNvbnN0IGV4aXN0aW5nUmVjb3JkID0gYXdhaXQgdGhpcy5zdG9yZXMuY2hhaW5TdGFraW5nTWV0YWRhdGEuZ2V0QnlDaGFpbkFuZFR5cGUoaXRlbS5jaGFpbiwgaXRlbS50eXBlKTtcblxuICAgIGlmIChleGlzdGluZ1JlY29yZCAmJiBjaGFuZ2VzKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZXMuY2hhaW5TdGFraW5nTWV0YWRhdGEudXBkYXRlQnlDaGFpbkFuZFR5cGUoaXRlbS5jaGFpbiwgaXRlbS50eXBlLCBjaGFuZ2VzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zdG9yZXMuY2hhaW5TdGFraW5nTWV0YWRhdGEudXBzZXJ0KGl0ZW0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q2hhaW5TdGFraW5nTWV0YWRhdGEgKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5jaGFpblN0YWtpbmdNZXRhZGF0YS5nZXRBbGwoKTtcbiAgfVxuXG4gIGFzeW5jIGdldFN0YWtpbmdNZXRhZGF0YUJ5Q2hhaW4gKGNoYWluOiBzdHJpbmcsIHR5cGUgPSBTdGFraW5nVHlwZS5OT01JTkFURUQpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMuY2hhaW5TdGFraW5nTWV0YWRhdGEuZ2V0QnlDaGFpbkFuZFR5cGUoY2hhaW4sIHR5cGUpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlTm9taW5hdG9yTWV0YWRhdGEgKGl0ZW06IE5vbWluYXRvck1ldGFkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLm5vbWluYXRvck1ldGFkYXRhLnVwc2VydChpdGVtKTtcbiAgfVxuXG4gIGFzeW5jIGdldE5vbWluYXRvck1ldGFkYXRhICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZXMubm9taW5hdG9yTWV0YWRhdGEuZ2V0QWxsKCk7XG4gIH1cblxuICBhc3luYyByZXNldFdhbGxldCAocmVzZXRBbGw6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgc3RvcmVzOiBCYXNlU3RvcmU8dW5rbm93bj5bXSA9IFtcbiAgICAgICAgdGhpcy5zdG9yZXMuYmFsYW5jZSxcbiAgICAgICAgdGhpcy5zdG9yZXMubmZ0LFxuICAgICAgICB0aGlzLnN0b3Jlcy5uZnRDb2xsZWN0aW9uLFxuICAgICAgICB0aGlzLnN0b3Jlcy5jcm93ZGxvYW4sXG4gICAgICAgIHRoaXMuc3RvcmVzLnN0YWtpbmcsXG4gICAgICAgIHRoaXMuc3RvcmVzLnRyYW5zYWN0aW9uLFxuICAgICAgICB0aGlzLnN0b3Jlcy5ub21pbmF0b3JNZXRhZGF0YVxuICAgICAgXTtcblxuICAgICAgaWYgKHJlc2V0QWxsKSB7XG4gICAgICAgIHN0b3Jlcy5wdXNoKHRoaXMuc3RvcmVzLmNoYWluLCB0aGlzLnN0b3Jlcy5hc3NldCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb21pc2VzID0gc3RvcmVzLm1hcCgoc3RvcmUpID0+IHN0b3JlLmNsZWFyKCkpO1xuXG4gICAgICBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNldE1hbnRhUGF5RGF0YSAoZGF0YTogYW55KSB7XG4gICAgYXdhaXQgdGhpcy5fZGIubWFudGFQYXkucHV0KGRhdGEpOyAvLyBqdXN0IG92ZXJyaWRlIGlmIGV4aXN0XG4gIH1cblxuICBhc3luYyB1cGRhdGVNYW50YVBheURhdGEgKGtleTogc3RyaW5nLCBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgYXdhaXQgdGhpcy5fZGIubWFudGFQYXkudXBkYXRlKGtleSwgZGF0YSk7IC8vIGp1c3Qgb3ZlcnJpZGUgaWYgZXhpc3RcbiAgfVxuXG4gIGFzeW5jIGdldE1hbnRhUGF5RGF0YSAoa2V5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5fZGIubWFudGFQYXkuZ2V0KHsga2V5IH0pO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlTWFudGFQYXlDb25maWcgKGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmVzLm1hbnRhUGF5LmRlbGV0ZVJlY29yZChrZXkpO1xuICB9XG5cbiAgc3Vic2NyaWJlTWFudGFQYXlDb25maWcgKGNoYWluOiBzdHJpbmcsIGNhbGxiYWNrOiAoZGF0YTogTWFudGFQYXlDb25maWdbXSkgPT4gdm9pZCkge1xuICAgIHRoaXMuc3RvcmVzLm1hbnRhUGF5LnN1YnNjcmliZU1hbnRhUGF5Q29uZmlnKGNoYWluKS5zdWJzY3JpYmUoKHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICBuZXh0OiAoZGF0YSkgPT4gY2FsbGJhY2sgJiYgY2FsbGJhY2soZGF0YSlcbiAgICB9KSk7XG4gIH1cblxuICBhc3luYyBnZXRNYW50YVBheUNvbmZpZyAoY2hhaW46IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5tYW50YVBheS5nZXRDb25maWcoY2hhaW4pO1xuICB9XG5cbiAgYXN5bmMgZ2V0TWFudGFQYXlGaXJzdENvbmZpZyAoY2hhaW46IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnN0b3Jlcy5tYW50YVBheS5nZXRGaXJzdENvbmZpZyhjaGFpbik7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQ2hhaW5Bc3NldCwgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBCYWxhbmNlSXRlbSwgQ2hhaW5TdGFraW5nTWV0YWRhdGEsIENyb3dkbG9hbkl0ZW0sIE1ldGFkYXRhSXRlbSwgTmZ0Q29sbGVjdGlvbiwgTmZ0SXRlbSwgTm9taW5hdG9yTWV0YWRhdGEsIFByaWNlSnNvbiwgU3Rha2luZ0l0ZW0sIFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCBEZXhpZSwgeyBUYWJsZSwgVHJhbnNhY3Rpb24gfSBmcm9tICdkZXhpZSc7XG5cbmNvbnN0IERFRkFVTFRfREFUQUJBU0UgPSAnU3ViV2FsbGV0REJfdjInO1xuXG5leHBvcnQgaW50ZXJmYWNlIERlZmF1bHRDaGFpbkRvYyB7XG4gIGNoYWluOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWZhdWx0QWRkcmVzc0RvYyB7XG4gIGFkZHJlc3M6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlZmF1bHREb2NXaXRoQWRkcmVzc0FuZENoYWluIGV4dGVuZHMgRGVmYXVsdENoYWluRG9jLCBEZWZhdWx0QWRkcmVzc0RvYyB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIElCYWxhbmNlIGV4dGVuZHMgQmFsYW5jZUl0ZW0sIERlZmF1bHRBZGRyZXNzRG9jIHt9XG5leHBvcnQgaW50ZXJmYWNlIElDaGFpbiBleHRlbmRzIF9DaGFpbkluZm8ge1xuICBhY3RpdmU6IGJvb2xlYW4sXG4gIGN1cnJlbnRQcm92aWRlcjogc3RyaW5nXG59XG5leHBvcnQgaW50ZXJmYWNlIElDcm93ZGxvYW5JdGVtIGV4dGVuZHMgQ3Jvd2Rsb2FuSXRlbSwgRGVmYXVsdEFkZHJlc3NEb2MsIERlZmF1bHRDaGFpbkRvYyB7fVxuZXhwb3J0IGludGVyZmFjZSBJTmZ0IGV4dGVuZHMgTmZ0SXRlbSwgRGVmYXVsdEFkZHJlc3NEb2Mge31cbmV4cG9ydCBpbnRlcmZhY2UgSVRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0gZXh0ZW5kcyBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtLCBEZWZhdWx0QWRkcmVzc0RvYywgRGVmYXVsdENoYWluRG9jIHt9XG5cbi8vIFRPRE86IHJlZmFjdG9yIHRoaXNcbmV4cG9ydCBpbnRlcmZhY2UgSU1pZ3JhdGlvbiB7XG4gIGtleTogc3RyaW5nLFxuICBuYW1lOiBzdHJpbmcsXG4gIHRpbWVzdGFtcDogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1ldGFkYXRhSXRlbSBleHRlbmRzIE1ldGFkYXRhSXRlbSwgRGVmYXVsdENoYWluRG9jIHt9XG5cbmV4cG9ydCB0eXBlIElNYW50YVBheUxlZGdlciA9IGFueTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS29uaURhdGFiYXNlIGV4dGVuZHMgRGV4aWUge1xuICBwdWJsaWMgcHJpY2UhOiBUYWJsZTxQcmljZUpzb24sIG9iamVjdD47XG4gIHB1YmxpYyBiYWxhbmNlcyE6IFRhYmxlPElCYWxhbmNlLCBvYmplY3Q+O1xuXG4gIHB1YmxpYyBuZnRzITogVGFibGU8SU5mdCwgb2JqZWN0PjtcbiAgcHVibGljIG5mdENvbGxlY3Rpb25zITogVGFibGU8TmZ0Q29sbGVjdGlvbiwgb2JqZWN0PjtcbiAgcHVibGljIGNyb3dkbG9hbnMhOiBUYWJsZTxJQ3Jvd2Rsb2FuSXRlbSwgb2JqZWN0PjtcbiAgcHVibGljIHN0YWtpbmdzITogVGFibGU8U3Rha2luZ0l0ZW0sIG9iamVjdD47XG4gIHB1YmxpYyB0cmFuc2FjdGlvbnMhOiBUYWJsZTxJVHJhbnNhY3Rpb25IaXN0b3J5SXRlbSwgb2JqZWN0PjtcbiAgcHVibGljIG1pZ3JhdGlvbnMhOiBUYWJsZTxJTWlncmF0aW9uLCBvYmplY3Q+O1xuXG4gIHB1YmxpYyBtZXRhZGF0YSE6IFRhYmxlPElNZXRhZGF0YUl0ZW0sIG9iamVjdD47XG4gIHB1YmxpYyBjaGFpbiE6IFRhYmxlPElDaGFpbiwgb2JqZWN0PjtcbiAgcHVibGljIGFzc2V0ITogVGFibGU8X0NoYWluQXNzZXQsIG9iamVjdD47XG5cbiAgcHVibGljIGNoYWluU3Rha2luZ01ldGFkYXRhITogVGFibGU8Q2hhaW5TdGFraW5nTWV0YWRhdGEsIG9iamVjdD47XG4gIHB1YmxpYyBub21pbmF0b3JNZXRhZGF0YSE6IFRhYmxlPE5vbWluYXRvck1ldGFkYXRhLCBvYmplY3Q+O1xuXG4gIHB1YmxpYyBtYW50YVBheSE6IFRhYmxlPElNYW50YVBheUxlZGdlciwgb2JqZWN0PjtcblxuICBwcml2YXRlIHNjaGVtYVZlcnNpb246IG51bWJlcjtcblxuICBwdWJsaWMgY29uc3RydWN0b3IgKG5hbWUgPSBERUZBVUxUX0RBVEFCQVNFLCBzY2hlbWFWZXJzaW9uID0gMTEpIHtcbiAgICBzdXBlcihuYW1lKTtcbiAgICB0aGlzLnNjaGVtYVZlcnNpb24gPSBzY2hlbWFWZXJzaW9uO1xuXG4gICAgdGhpcy5jb25kaXRpb25hbFZlcnNpb24oMSwge1xuICAgICAgLy8gRE8gTk9UIGRlY2xhcmUgYWxsIGNvbHVtbnMsIG9ubHkgZGVjbGFyZSBwcm9wZXJ0aWVzIHRvIGJlIGluZGV4ZWRcbiAgICAgIC8vIFJlYWQgbW9yZTogaHR0cHM6Ly9kZXhpZS5vcmcvZG9jcy9WZXJzaW9uL1ZlcnNpb24uc3RvcmVzKClcbiAgICAgIC8vIFByaW1hcnkga2V5IGlzIGFsd2F5cyB0aGUgZmlyc3QgZW50cnlcbiAgICAgIGNoYWluOiAnc2x1ZycsXG4gICAgICBhc3NldDogJ3NsdWcnLFxuICAgICAgcHJpY2U6ICdjdXJyZW5jeScsXG4gICAgICBiYWxhbmNlczogJ1t0b2tlblNsdWcrYWRkcmVzc10sIHRva2VuU2x1ZywgYWRkcmVzcycsXG4gICAgICBuZnRzOiAnW2NoYWluK2FkZHJlc3MrY29sbGVjdGlvbklkK2lkXSwgW2FkZHJlc3MrY2hhaW5dLCBjaGFpbiwgaWQsIGFkZHJlc3MsIGNvbGxlY3Rpb25JZCwgbmFtZScsXG4gICAgICBuZnRDb2xsZWN0aW9uczogJ1tjaGFpbitjb2xsZWN0aW9uSWRdLCBjaGFpbiwgY29sbGVjdGlvbklkLCBjb2xsZWN0aW9uTmFtZScsXG4gICAgICBjcm93ZGxvYW5zOiAnW2NoYWluK2FkZHJlc3NdLCBjaGFpbiwgYWRkcmVzcycsXG4gICAgICBzdGFraW5nczogJ1tjaGFpbithZGRyZXNzK3R5cGVdLCBbY2hhaW4rYWRkcmVzc10sIGNoYWluLCBhZGRyZXNzLCB0eXBlJyxcbiAgICAgIHRyYW5zYWN0aW9uczogJ1tjaGFpbithZGRyZXNzK2V4dHJpbnNpY0hhc2hdLCAmW2NoYWluK2FkZHJlc3MrZXh0cmluc2ljSGFzaF0sIGNoYWluLCBhZGRyZXNzLCBleHRyaW5zaWNIYXNoLCBhY3Rpb24nLFxuICAgICAgbWlncmF0aW9uczogJ1trZXkrbmFtZV0nLFxuXG4gICAgICBjaGFpblN0YWtpbmdNZXRhZGF0YTogJ1tjaGFpbit0eXBlXSwgY2hhaW4sIHR5cGUnLFxuICAgICAgbm9taW5hdG9yTWV0YWRhdGE6ICdbY2hhaW4rYWRkcmVzcyt0eXBlXSwgW2NoYWluK2FkZHJlc3NdLCBjaGFpbiwgYWRkcmVzcywgdHlwZSdcbiAgICB9KTtcblxuICAgIHRoaXMuY29uZGl0aW9uYWxWZXJzaW9uKDIsIHtcbiAgICAgIG1ldGFkYXRhOiAnZ2VuZXNpc0hhc2gsIGNoYWluJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb25kaXRpb25hbFZlcnNpb24oMywge1xuICAgICAgbWFudGFQYXk6ICdrZXksIGNoYWluJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjb25kaXRpb25hbFZlcnNpb24gKFxuICAgIHZlcnNpb246IG51bWJlcixcbiAgICBzY2hlbWE6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVsbCB9LFxuICAgIHVwZ3JhZGU/OiAodDogVHJhbnNhY3Rpb24pID0+IFByb21pc2U8dm9pZD5cbiAgKSB7XG4gICAgaWYgKHRoaXMuc2NoZW1hVmVyc2lvbiAhPSBudWxsICYmIHRoaXMuc2NoZW1hVmVyc2lvbiA8IHZlcnNpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkZXhpZVZlcnNpb24gPSB0aGlzLnZlcnNpb24odmVyc2lvbikuc3RvcmVzKHNjaGVtYSk7XG5cbiAgICBpZiAodXBncmFkZSAhPSBudWxsKSB7XG4gICAgICBkZXhpZVZlcnNpb24udXBncmFkZSh1cGdyYWRlKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBfQ2hhaW5Bc3NldCB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBc3NldFN0b3JlIGV4dGVuZHMgQmFzZVN0b3JlPF9DaGFpbkFzc2V0PiB7XG4gIGFzeW5jIGdldEFsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUudG9BcnJheSgpO1xuICB9XG5cbiAgYXN5bmMgcmVtb3ZlQXNzZXRzIChrZXlzOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKCdzbHVnJykuYW55T2ZJZ25vcmVDYXNlKGtleXMpLmRlbGV0ZSgpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgQmFsYW5jZUl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcblxuaW1wb3J0IHsgSUJhbGFuY2UgfSBmcm9tICcuLi9kYXRhYmFzZXMnO1xuaW1wb3J0IEJhc2VTdG9yZVdpdGhBZGRyZXNzIGZyb20gJy4uL2RiLXN0b3Jlcy9CYXNlU3RvcmVXaXRoQWRkcmVzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhbGFuY2VTdG9yZSBleHRlbmRzIEJhc2VTdG9yZVdpdGhBZGRyZXNzPElCYWxhbmNlPiB7XG4gIGFzeW5jIGdldEJhbGFuY2VNYXBCeUFkZHJlc3MgKGFkZHJlc3M6IHN0cmluZykge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnRhYmxlLndoZXJlKCdhZGRyZXNzJykuZXF1YWxzKGFkZHJlc3MpLnRvQXJyYXkoKTtcblxuICAgIGNvbnN0IGJhbGFuY2VNYXA6IFJlY29yZDxzdHJpbmcsIEJhbGFuY2VJdGVtPiA9IHt9O1xuXG4gICAgZGF0YS5mb3JFYWNoKChzdG9yZWRCYWxhbmNlKSA9PiB7XG4gICAgICBiYWxhbmNlTWFwW3N0b3JlZEJhbGFuY2UudG9rZW5TbHVnXSA9IHtcbiAgICAgICAgdG9rZW5TbHVnOiBzdG9yZWRCYWxhbmNlLnRva2VuU2x1ZyxcbiAgICAgICAgc3RhdGU6IHN0b3JlZEJhbGFuY2Uuc3RhdGUsXG4gICAgICAgIGZyZWU6IHN0b3JlZEJhbGFuY2UuZnJlZSxcbiAgICAgICAgbG9ja2VkOiBzdG9yZWRCYWxhbmNlLmxvY2tlZCxcbiAgICAgICAgc3Vic3RyYXRlSW5mbzogc3RvcmVkQmFsYW5jZS5zdWJzdHJhdGVJbmZvLFxuICAgICAgICB0aW1lc3RhbXA6IHN0b3JlZEJhbGFuY2UudGltZXN0YW1wXG4gICAgICB9IGFzIEJhbGFuY2VJdGVtO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGJhbGFuY2VNYXA7XG4gIH1cblxuICBhc3luYyByZW1vdmVCeVNsdWdzICh0b2tlblNsdWdzOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKCd0b2tlblNsdWcnKS5hbnlPZklnbm9yZUNhc2UodG9rZW5TbHVncykuZGVsZXRlKCk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBUYWJsZSB9IGZyb20gJ2RleGllJztcblxuaW1wb3J0IHsgbG9nZ2VyIGFzIGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0Bwb2xrYWRvdC91dGlsL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZVN0b3JlPFQ+IHtcbiAgcHJpdmF0ZSBfdGFibGU6IFRhYmxlPFQsIHVua25vd24+O1xuICBwdWJsaWMgbG9nZ2VyOiBMb2dnZXI7XG4gIGNvbnN0cnVjdG9yICh0YWJsZTogVGFibGU8VCwgdW5rbm93bj4pIHtcbiAgICB0aGlzLl90YWJsZSA9IHRhYmxlO1xuICAgIHRoaXMubG9nZ2VyID0gY3JlYXRlTG9nZ2VyKHRoaXMuY29uc3RydWN0b3IubmFtZSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHRhYmxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFibGU7XG4gIH1cblxuICBwdWJsaWMgdXBzZXJ0IChyZWNvcmQ6IFQpOiBQcm9taXNlPHVua25vd24+IHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS5wdXQocmVjb3JkKTtcbiAgfVxuXG4gIHB1YmxpYyBidWxrVXBzZXJ0IChyZWNvcmRzOiBUW10pOiBQcm9taXNlPHVua25vd24+IHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS5idWxrUHV0KHJlY29yZHMpO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZSAocmVjb3JkOiBUKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUuZGVsZXRlKHJlY29yZCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLmNsZWFyKCk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmUnO1xuXG5pbXBvcnQgeyBEZWZhdWx0QWRkcmVzc0RvYyB9IGZyb20gJy4uL2RhdGFiYXNlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VTdG9yZVdpdGhBZGRyZXNzPFQgZXh0ZW5kcyBEZWZhdWx0QWRkcmVzc0RvYz4gZXh0ZW5kcyBCYXNlU3RvcmU8VD4ge1xuICBwdWJsaWMgcmVtb3ZlQWxsQnlBZGRyZXNzIChhZGRyZXNzOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjb25kaXRpb25zID0geyBhZGRyZXNzIH0gYXMgVDtcblxuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKGNvbmRpdGlvbnMpLmRlbGV0ZSgpO1xuICB9XG5cbiAgLy8gYXN5bmMgZ2V0RGF0YUJ5QWRkcmVzc0FzT2JqZWN0IChhZGRyZXNzOiBzdHJpbmcpIHtcbiAgLy8gICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy50YWJsZS53aGVyZSgnYWRkcmVzcycpLmVxdWFscyhhZGRyZXNzKS50b0FycmF5KCk7XG4gIC8vXG4gIC8vICAgY29uc29sZS5sb2coJ2Zyb20gc3RvcmUnLCBkYXRhKTtcbiAgLy9cbiAgLy8gICByZXR1cm4ge307XG4gIC8vIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBEZWZhdWx0RG9jV2l0aEFkZHJlc3NBbmRDaGFpbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RhdGFiYXNlcyc7XG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluPFQgZXh0ZW5kcyBEZWZhdWx0RG9jV2l0aEFkZHJlc3NBbmRDaGFpbj4gZXh0ZW5kcyBCYXNlU3RvcmU8VD4ge1xuICBwdWJsaWMgY29udmVydFRvSnNvbk9iamVjdCAoaXRlbXM6IFRbXSk6IFJlY29yZDxzdHJpbmcsIFQ+IHtcbiAgICByZXR1cm4gaXRlbXMucmVkdWNlKChhLCB2KSA9PiAoeyAuLi5hLCBbdi5jaGFpbl06IHYgfSksIHt9KTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVBbGxCeUFkZHJlc3MgKGFkZHJlc3M6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKCdhZGRyZXNzJykuZXF1YWxzSWdub3JlQ2FzZShhZGRyZXNzKS5kZWxldGUoKTtcbiAgfVxuXG4gIGFzeW5jIGdldERhdGFCeUFkZHJlc3NBc09iamVjdCAoYWRkcmVzczogc3RyaW5nKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMudGFibGUud2hlcmUoJ2FkZHJlc3MnKS5lcXVhbHMoYWRkcmVzcykudG9BcnJheSgpO1xuXG4gICAgcmV0dXJuIHRoaXMuY29udmVydFRvSnNvbk9iamVjdChkYXRhKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IERlZmF1bHRDaGFpbkRvYyB9IGZyb20gJy4uL2RhdGFiYXNlcyc7XG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJy4vQmFzZVN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZVN0b3JlV2l0aENoYWluPFQgZXh0ZW5kcyBEZWZhdWx0Q2hhaW5Eb2M+IGV4dGVuZHMgQmFzZVN0b3JlPFQ+IHtcbiAgcHVibGljIGNvbnZlcnRUb0pzb25PYmplY3QgKGl0ZW1zOiBUW10pOiBSZWNvcmQ8c3RyaW5nLCBUPiB7XG4gICAgcmV0dXJuIGl0ZW1zLnJlZHVjZSgoYSwgdikgPT4gKHsgLi4uYSwgW3YuY2hhaW5dOiB2IH0pLCB7fSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBJQ2hhaW4gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYXRhYmFzZXMnO1xuaW1wb3J0IEJhc2VTdG9yZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvQmFzZVN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhaW5TdG9yZSBleHRlbmRzIEJhc2VTdG9yZTxJQ2hhaW4+IHtcbiAgYXN5bmMgZ2V0QWxsICgpIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS50b0FycmF5KCk7XG4gIH1cblxuICBhc3luYyByZW1vdmVDaGFpbnMgKGNoYWluczogc3RyaW5nW10pIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSgnc2x1ZycpLmFueU9mSWdub3JlQ2FzZShjaGFpbnMpLmRlbGV0ZSgpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgQ2hhaW5TdGFraW5nTWV0YWRhdGEsIFN0YWtpbmdUeXBlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgQmFzZVN0b3JlV2l0aENoYWluIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmVXaXRoQ2hhaW4nO1xuaW1wb3J0IHsgbGl2ZVF1ZXJ5IH0gZnJvbSAnZGV4aWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFpblN0YWtpbmdNZXRhZGF0YVN0b3JlIGV4dGVuZHMgQmFzZVN0b3JlV2l0aENoYWluPENoYWluU3Rha2luZ01ldGFkYXRhPiB7XG4gIGFzeW5jIGdldEFsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUudG9BcnJheSgpO1xuICB9XG5cbiAgc3Vic2NyaWJlQnlDaGFpbiAoY2hhaW5zOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiBsaXZlUXVlcnkoXG4gICAgICAoKSA9PiB0aGlzLmdldEJ5Q2hhaW5zKGNoYWlucylcbiAgICApO1xuICB9XG5cbiAgZ2V0QnlDaGFpbnMgKGNoYWluczogc3RyaW5nW10pIHtcbiAgICBpZiAoY2hhaW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoJ2NoYWluJykuYW55T2ZJZ25vcmVDYXNlKGNoYWlucykudG9BcnJheSgpO1xuICB9XG5cbiAgZ2V0QnlDaGFpbkFuZFR5cGUgKGNoYWluOiBzdHJpbmcsIHR5cGUgPSBTdGFraW5nVHlwZS5OT01JTkFURUQpIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSh7XG4gICAgICBjaGFpbixcbiAgICAgIHR5cGVcbiAgICB9KS5maXJzdCgpO1xuICB9XG5cbiAgYXN5bmMgcmVtb3ZlQnlDaGFpbnMgKGNoYWluczogc3RyaW5nW10pIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSgnY2hhaW4nKS5hbnlPZklnbm9yZUNhc2UoY2hhaW5zKS5kZWxldGUoKTtcbiAgfVxuXG4gIHVwZGF0ZUJ5Q2hhaW5BbmRUeXBlIChjaGFpbjogc3RyaW5nLCB0eXBlID0gU3Rha2luZ1R5cGUuTk9NSU5BVEVELCBjaGFuZ2VzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLnVwZGF0ZShbY2hhaW4sIHR5cGVdLCBjaGFuZ2VzKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBCYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluJztcblxuaW1wb3J0IHsgSUNyb3dkbG9hbkl0ZW0gfSBmcm9tICcuLi9kYXRhYmFzZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcm93ZGxvYW5TdG9yZSBleHRlbmRzIEJhc2VTdG9yZVdpdGhBZGRyZXNzQW5kQ2hhaW48SUNyb3dkbG9hbkl0ZW0+IHtcbiAgZ2V0Q3Jvd2Rsb2FuIChhZGRyZXNzOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSgnYWRkcmVzcycpLmVxdWFscyhhZGRyZXNzKS50b0FycmF5KCk7XG4gIH1cblxuICBkZWxldGVCeUNoYWluQW5kQWRkcmVzcyAoY2hhaW46IHN0cmluZywgYWRkcmVzczogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoeyBjaGFpbiwgYWRkcmVzcyB9KS5kZWxldGUoKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IElNYW50YVBheUxlZGdlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RhdGFiYXNlcyc7XG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmUnO1xuaW1wb3J0IHsgbGl2ZVF1ZXJ5IH0gZnJvbSAnZGV4aWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYW50YVBheVN0b3JlIGV4dGVuZHMgQmFzZVN0b3JlPElNYW50YVBheUxlZGdlcj4ge1xuICBhc3luYyBnZXRBbGwgKCkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLnRvQXJyYXkoKTtcbiAgfVxuXG4gIHN1YnNjcmliZU1hbnRhUGF5Q29uZmlnIChjaGFpbjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGxpdmVRdWVyeShcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gICAgICAoKSA9PiB0aGlzLnRhYmxlLndoZXJlKHsgY2hhaW4gfSkuZmlsdGVyKChkYXRhKSA9PiBkYXRhPy5rZXkgJiYgZGF0YT8ua2V5LnN0YXJ0c1dpdGgoJ2NvbmZpZycpKS50b0FycmF5KClcbiAgICApO1xuICB9XG5cbiAgZ2V0Q29uZmlnIChjaGFpbjogc3RyaW5nKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1yZXR1cm5cbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSh7IGNoYWluIH0pLmZpbHRlcigoZGF0YSkgPT4gZGF0YT8ua2V5ICYmIGRhdGE/LmtleS5zdGFydHNXaXRoKCdjb25maWcnKSkudG9BcnJheSgpO1xuICB9XG5cbiAgZ2V0Rmlyc3RDb25maWcgKGNoYWluOiBzdHJpbmcpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKHsgY2hhaW4gfSkuZmlsdGVyKChkYXRhKSA9PiBkYXRhPy5rZXkgJiYgZGF0YT8ua2V5LnN0YXJ0c1dpdGgoJ2NvbmZpZycpKS5maXJzdCgpO1xuICB9XG5cbiAgZGVsZXRlUmVjb3JkIChrZXk6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKCdrZXknKS5lcXVhbHMoa2V5KS5kZWxldGUoKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IElNZXRhZGF0YUl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYXRhYmFzZXMnO1xuaW1wb3J0IEJhc2VTdG9yZVdpdGhDaGFpbiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvQmFzZVN0b3JlV2l0aENoYWluJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWV0YWRhdGFTdG9yZSBleHRlbmRzIEJhc2VTdG9yZVdpdGhDaGFpbjxJTWV0YWRhdGFJdGVtPiB7XG4gIGdldE1ldGFkYXRhIChjaGFpbjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoJ2NoYWluJykuZXF1YWxzKGNoYWluKS5maXJzdCgpO1xuICB9XG5cbiAgdXBzZXJ0TWV0YWRhdGEgKGNoYWluOiBzdHJpbmcsIG1ldGFkYXRhOiBJTWV0YWRhdGFJdGVtKSB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUucHV0KG1ldGFkYXRhLCBjaGFpbik7XG4gIH1cblxuICBnZXRNZXRhZGF0YUJ5R2VuZXNpc0hhc2ggKGdlbmVzaXNIYXNoOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS5nZXQoZ2VuZXNpc0hhc2gpO1xuICB9XG5cbiAgdXBkYXRlTWV0YWRhdGFCeUdlbmVzaXNIYXNoIChnZW5lc2lzSGFzaDogc3RyaW5nLCBtZXRhZGF0YTogSU1ldGFkYXRhSXRlbSkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLnB1dChtZXRhZGF0YSwgZ2VuZXNpc0hhc2gpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgSU1pZ3JhdGlvbiB9IGZyb20gJy4uL2RhdGFiYXNlcyc7XG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJy4vQmFzZVN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlncmF0aW9uU3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmU8SU1pZ3JhdGlvbj4ge1xuXG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgTmZ0SXRlbSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IEJhc2VTdG9yZVdpdGhBZGRyZXNzQW5kQ2hhaW4gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UvZGItc3RvcmVzL0Jhc2VTdG9yZVdpdGhBZGRyZXNzQW5kQ2hhaW4nO1xuaW1wb3J0IHsgbGl2ZVF1ZXJ5IH0gZnJvbSAnZGV4aWUnO1xuXG5pbXBvcnQgeyBJTmZ0IH0gZnJvbSAnLi4vZGF0YWJhc2VzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmZ0U3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluPElOZnQ+IHtcbiAgZ2V0TmZ0IChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbkxpc3Q6IHN0cmluZ1tdID0gW10pIHtcbiAgICBpZiAoYWRkcmVzc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoJ2FkZHJlc3MnKS5hbnlPZklnbm9yZUNhc2UoYWRkcmVzc2VzKS5hbmQoKGl0ZW0pID0+IGNoYWluTGlzdCAmJiBjaGFpbkxpc3QuaW5jbHVkZXMoaXRlbS5jaGFpbikpLnRvQXJyYXkoKTtcbiAgICB9XG5cbiAgICAvLyByZXR1cm4gdGhpcy50YWJsZS5maWx0ZXIoKGl0ZW0pID0+ICFjaGFpbkhhc2hlcy5sZW5ndGggfHwgY2hhaW5IYXNoZXMuaW5jbHVkZXMoaXRlbS5jaGFpbkhhc2gpKS50b0FycmF5KCk7XG4gICAgcmV0dXJuIHRoaXMudGFibGUuZmlsdGVyKChpdGVtKSA9PiBjaGFpbkxpc3QgJiYgY2hhaW5MaXN0LmluY2x1ZGVzKGl0ZW0uY2hhaW4pKS50b0FycmF5KCk7XG4gIH1cblxuICBzdWJzY3JpYmVOZnQgKGFkZHJlc3Nlczogc3RyaW5nW10sIGNoYWluTGlzdDogc3RyaW5nW10gPSBbXSkge1xuICAgIHJldHVybiBsaXZlUXVlcnkoXG4gICAgICAoKSA9PiB0aGlzLmdldE5mdChhZGRyZXNzZXMsIGNoYWluTGlzdClcbiAgICApO1xuICB9XG5cbiAgY2xlYW5VcE5mdHMgKGNoYWluOiBzdHJpbmcsIGFkZHJlc3M6IHN0cmluZywgY29sbGVjdGlvbklkczogc3RyaW5nW10sIG5mdElkczogc3RyaW5nW10pIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSh7XG4gICAgICBhZGRyZXNzLFxuICAgICAgY2hhaW5cbiAgICB9KS5hbmQoKG5mdCkgPT4gY29sbGVjdGlvbklkcy5pbmNsdWRlcyhuZnQuY29sbGVjdGlvbklkKSAmJiAhbmZ0SWRzLmluY2x1ZGVzKG5mdC5pZCkpLmRlbGV0ZSgpO1xuICB9XG5cbiAgZGVsZXRlTmZ0c0J5Q2hhaW5BbmRPd25lciAoY2hhaW46IHN0cmluZywgYWRkcmVzczogc3RyaW5nLCBjb2xsZWN0aW9uSWRzOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKHtcbiAgICAgIGFkZHJlc3MsXG4gICAgICBjaGFpblxuICAgIH0pLmFuZCgobmZ0KSA9PiBjb2xsZWN0aW9uSWRzLmluY2x1ZGVzKG5mdC5jb2xsZWN0aW9uSWQpKS5kZWxldGUoKTtcbiAgfVxuXG4gIGRlbGV0ZU5mdEJ5QWRkcmVzcyAoYWRkcmVzc2VzOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKCdhZGRyZXNzJykuYW55T2ZJZ25vcmVDYXNlKGFkZHJlc3NlcykuZGVsZXRlKCk7XG4gIH1cblxuICBkZWxldGVOZnRJdGVtIChjaGFpbjogc3RyaW5nLCBhZGRyZXNzZXM6IHN0cmluZ1tdLCBuZnRJdGVtOiBOZnRJdGVtKSB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoJ2FkZHJlc3MnKS5hbnlPZklnbm9yZUNhc2UoYWRkcmVzc2VzKS5maWx0ZXIoKHN0b3JlZEl0ZW0pID0+IHN0b3JlZEl0ZW0uY2hhaW4gPT09IGNoYWluICYmXG4gICAgICBzdG9yZWRJdGVtLmNvbGxlY3Rpb25JZCA9PT0gbmZ0SXRlbS5jb2xsZWN0aW9uSWQgJiZcbiAgICAgIHN0b3JlZEl0ZW0uaWQgPT09IG5mdEl0ZW0uaWQpLmRlbGV0ZSgpO1xuICB9XG5cbiAgZGVsZXRlTmZ0c0J5Q29sbGVjdGlvbiAoY2hhaW46IHN0cmluZywgY29sbGVjdGlvbklkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSh7XG4gICAgICBjaGFpbixcbiAgICAgIGNvbGxlY3Rpb25JZFxuICAgIH0pLmRlbGV0ZSgpO1xuICB9XG5cbiAgcmVtb3ZlTmZ0cyAoY2hhaW46IHN0cmluZywgYWRkcmVzczogc3RyaW5nLCBjb2xsZWN0aW9uSWQ6IHN0cmluZywgbmZ0SWRzOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKHtcbiAgICAgIGNoYWluLFxuICAgICAgYWRkcmVzcyxcbiAgICAgIGNvbGxlY3Rpb25JZFxuICAgIH0pLmZpbHRlcigoaXRlbSkgPT4gbmZ0SWRzLmluY2x1ZGVzKGl0ZW0uaWQgfHwgJycpKS5kZWxldGUoKTtcbiAgfVxuXG4gIHJlbW92ZU5mdHNCeUFkZHJlc3MgKGFkZHJlc3Nlczogc3RyaW5nW10pIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSgnYWRkcmVzcycpLmFueU9mSWdub3JlQ2FzZShhZGRyZXNzZXMpLmRlbGV0ZSgpO1xuICB9XG5cbiAgLy8gcmVmb3JtYXRDb2xsZWN0aW9uSWRzIChpdGVtczogSU5mdFtdKSB7XG4gIC8vICAgcmV0dXJuIGl0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAvLyAgICAgaXRlbS5jb2xsZWN0aW9uSWQgPSBpdGVtLmNvbGxlY3Rpb25JZD8udG9Mb3dlckNhc2UoKTtcblxuICAvLyAgICAgcmV0dXJuIGl0ZW07XG4gIC8vICAgfSk7XG4gIC8vIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBOZnRDb2xsZWN0aW9uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBsaXZlUXVlcnkgfSBmcm9tICdkZXhpZSc7XG5cbmltcG9ydCBCYXNlU3RvcmVXaXRoQ2hhaW4gZnJvbSAnLi9CYXNlU3RvcmVXaXRoQ2hhaW4nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOZnRDb2xsZWN0aW9uU3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmVXaXRoQ2hhaW48TmZ0Q29sbGVjdGlvbj4ge1xuICBzdWJzY3JpYmVOZnRDb2xsZWN0aW9uIChjaGFpbnM/OiBzdHJpbmdbXSkge1xuICAgIHJldHVybiBsaXZlUXVlcnkoKCkgPT4gdGhpcy5nZXROZnRDb2xsZWN0aW9uKGNoYWlucykpO1xuICB9XG5cbiAgZ2V0TmZ0Q29sbGVjdGlvbiAoY2hhaW5MaXN0Pzogc3RyaW5nW10pIHtcbiAgICBpZiAoY2hhaW5MaXN0ICYmIGNoYWluTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSgnY2hhaW4nKS5hbnlPZklnbm9yZUNhc2UoY2hhaW5MaXN0KS50b0FycmF5KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudGFibGUudG9BcnJheSgpO1xuICB9XG5cbiAgcmVtb3ZlQ29sbGVjdGlvbiAoY2hhaW46IHN0cmluZywgY29sbGVjdGlvbklkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS53aGVyZSh7XG4gICAgICBjaGFpbixcbiAgICAgIGNvbGxlY3Rpb25JZFxuICAgIH0pLmRlbGV0ZSgpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgTm9taW5hdG9yTWV0YWRhdGEsIFN0YWtpbmdTdGF0dXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCBCYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluJztcbmltcG9ydCB7IGxpdmVRdWVyeSB9IGZyb20gJ2RleGllJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9taW5hdG9yTWV0YWRhdGFTdG9yZSBleHRlbmRzIEJhc2VTdG9yZVdpdGhBZGRyZXNzQW5kQ2hhaW48Tm9taW5hdG9yTWV0YWRhdGE+IHtcbiAgYXN5bmMgZ2V0QWxsICgpIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uc3RhdHVzICE9PSBTdGFraW5nU3RhdHVzLk5PVF9TVEFLSU5HKS50b0FycmF5KCk7XG4gIH1cblxuICBzdWJzY3JpYmVCeUFkZHJlc3NlcyAoYWRkcmVzc2VzOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiBsaXZlUXVlcnkoXG4gICAgICAoKSA9PiB0aGlzLmdldEJ5QWRkcmVzcyhhZGRyZXNzZXMpXG4gICAgKTtcbiAgfVxuXG4gIHN1YnNjcmliZUFsbCAoKSB7XG4gICAgcmV0dXJuIGxpdmVRdWVyeShcbiAgICAgICgpID0+IHRoaXMuZ2V0QWxsKClcbiAgICApO1xuICB9XG5cbiAgZ2V0QnlBZGRyZXNzIChhZGRyZXNzZXM6IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoJ2FkZHJlc3MnKS5hbnlPZklnbm9yZUNhc2UoYWRkcmVzc2VzKS5hbmQoKGl0ZW0pID0+IGl0ZW0uc3RhdHVzICE9PSBTdGFraW5nU3RhdHVzLk5PVF9TVEFLSU5HKS50b0FycmF5KCk7XG4gIH1cblxuICBhc3luYyByZW1vdmVCeUFkZHJlc3MgKGFkZHJlc3M6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKCdhZGRyZXNzJykuYW55T2ZJZ25vcmVDYXNlKGFkZHJlc3MpLmRlbGV0ZSgpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgUHJpY2VKc29uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5cbmltcG9ydCBCYXNlU3RvcmUgZnJvbSAnLi9CYXNlU3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmljZSBleHRlbmRzIEJhc2VTdG9yZTxQcmljZUpzb24+IHt9XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgU3Rha2luZ0l0ZW0sIFN0YWtpbmdUeXBlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgQmFzZVN0b3JlV2l0aEFkZHJlc3NBbmRDaGFpbiBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3N0b3JhZ2Utc2VydmljZS9kYi1zdG9yZXMvQmFzZVN0b3JlV2l0aEFkZHJlc3NBbmRDaGFpbic7XG5pbXBvcnQgeyBsaXZlUXVlcnkgfSBmcm9tICdkZXhpZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YWtpbmdTdG9yZSBleHRlbmRzIEJhc2VTdG9yZVdpdGhBZGRyZXNzQW5kQ2hhaW48U3Rha2luZ0l0ZW0+IHtcbiAgZ2V0U2luZ2xlUmVjb3JkIChjaGFpbjogc3RyaW5nLCBhZGRyZXNzOiBzdHJpbmcsIHR5cGU6IFN0YWtpbmdUeXBlKSB7XG4gICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoJ1tjaGFpbithZGRyZXNzK3R5cGVdJykuZXF1YWxzKFtjaGFpbiwgYWRkcmVzcywgdHlwZV0pLmZpcnN0KCk7XG4gIH1cblxuICBnZXRTdGFraW5ncyAoYWRkcmVzc2VzOiBzdHJpbmdbXSwgY2hhaW5MaXN0OiBzdHJpbmdbXSA9IFtdKSB7XG4gICAgaWYgKGFkZHJlc3Nlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKCdhZGRyZXNzJykuYW55T2ZJZ25vcmVDYXNlKGFkZHJlc3NlcykuYW5kKChpdGVtKSA9PiAoY2hhaW5MaXN0ICYmIGNoYWluTGlzdC5pbmNsdWRlcyhpdGVtLmNoYWluKSkgJiYgcGFyc2VGbG9hdChpdGVtLmJhbGFuY2UgYXMgc3RyaW5nKSA+IDApLnRvQXJyYXkoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy50YWJsZS5maWx0ZXIoKGl0ZW0pID0+IChjaGFpbkxpc3QgJiYgY2hhaW5MaXN0LmluY2x1ZGVzKGl0ZW0uY2hhaW4pKSAmJiBwYXJzZUZsb2F0KGl0ZW0uYmFsYW5jZSBhcyBzdHJpbmcpID4gMCkudG9BcnJheSgpO1xuICB9XG5cbiAgZ2V0U3Rha2luZ3NCeUNoYWlucyAoY2hhaW5MaXN0OiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLmZpbHRlcigoaXRlbSkgPT4gKGNoYWluTGlzdC5pbmNsdWRlcyhpdGVtLmNoYWluKSkgJiYgcGFyc2VGbG9hdChpdGVtLmJhbGFuY2UgYXMgc3RyaW5nKSA+IDApLnRvQXJyYXkoKTtcbiAgfVxuXG4gIGdldFBvb2xlZFN0YWtpbmdzIChhZGRyZXNzZXM6IHN0cmluZ1tdLCBjaGFpbkxpc3Q6IHN0cmluZ1tdID0gW10pIHtcbiAgICBpZiAoYWRkcmVzc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoJ2FkZHJlc3MnKS5hbnlPZklnbm9yZUNhc2UoYWRkcmVzc2VzKS5hbmQoKGl0ZW0pID0+XG4gICAgICAgICghY2hhaW5MaXN0Lmxlbmd0aCB8fCBjaGFpbkxpc3QuaW5jbHVkZXMoaXRlbS5jaGFpbikpICYmXG4gICAgICAgIHBhcnNlRmxvYXQoaXRlbS5iYWxhbmNlIGFzIHN0cmluZykgPiAwICYmXG4gICAgICAgIGl0ZW0udHlwZSA9PT0gU3Rha2luZ1R5cGUuUE9PTEVEKVxuICAgICAgICAudG9BcnJheSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRhYmxlLmZpbHRlcigoaXRlbSkgPT5cbiAgICAgICghY2hhaW5MaXN0Lmxlbmd0aCB8fCBjaGFpbkxpc3QuaW5jbHVkZXMoaXRlbS5jaGFpbikpICYmXG4gICAgICBwYXJzZUZsb2F0KGl0ZW0uYmFsYW5jZSBhcyBzdHJpbmcpID4gMCAmJlxuICAgICAgaXRlbS50eXBlID09PSBTdGFraW5nVHlwZS5QT09MRUQpXG4gICAgICAudG9BcnJheSgpO1xuICB9XG5cbiAgc3Vic2NyaWJlU3Rha2luZyAoYWRkcmVzc2VzOiBzdHJpbmdbXSwgY2hhaW5MaXN0OiBzdHJpbmdbXSA9IFtdKSB7XG4gICAgcmV0dXJuIGxpdmVRdWVyeShcbiAgICAgICgpID0+IHRoaXMuZ2V0U3Rha2luZ3MoYWRkcmVzc2VzLCBjaGFpbkxpc3QpXG4gICAgKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBCYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL2RiLXN0b3Jlcy9CYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluJztcblxuaW1wb3J0IHsgSVRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0gfSBmcm9tICcuLi9kYXRhYmFzZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhpc3RvcnlRdWVyeSB7Y2hhaW4/OiBzdHJpbmcsIGFkZHJlc3M/OiBzdHJpbmcsIGV4dHJpbnNpY0hhc2g/OiBzdHJpbmcsIHRyYW5zYWN0aW9uSWQ/OiBzdHJpbmd9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYW5zYWN0aW9uU3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmVXaXRoQWRkcmVzc0FuZENoYWluPElUcmFuc2FjdGlvbkhpc3RvcnlJdGVtPiB7XG4gIGFzeW5jIGdldEhpc3RvcnlCeUFkZHJlc3NBc09iamVjdCAoYWRkcmVzczogc3RyaW5nKSB7XG4gICAgaWYgKGFkZHJlc3MgPT09ICdBTEwnKSB7IC8vIFRvZG86IE1pZ3JhdGUgdG8gYWxsIGFjY291bnQga2V5XG4gICAgICByZXR1cm4gdGhpcy50YWJsZS50b0FycmF5KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudGFibGUud2hlcmUoJ2FkZHJlc3MnKS5lcXVhbHMoYWRkcmVzcykudG9BcnJheSgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHF1ZXJ5SGlzdG9yeSAocXVlcnk/OiBIaXN0b3J5UXVlcnkpIHtcbiAgICBpZiAoIXF1ZXJ5Py5hZGRyZXNzICYmICFxdWVyeT8uY2hhaW4pIHtcbiAgICAgIHJldHVybiB0aGlzLnRhYmxlLnRvQXJyYXkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcXVlcnlPYmplY3QgPSB7fSBhcyBIaXN0b3J5UXVlcnk7XG5cbiAgICAgIGlmIChxdWVyeT8uY2hhaW4pIHtcbiAgICAgICAgcXVlcnlPYmplY3QuY2hhaW4gPSBxdWVyeT8uY2hhaW47XG4gICAgICB9XG5cbiAgICAgIGlmIChxdWVyeT8uZXh0cmluc2ljSGFzaCkge1xuICAgICAgICBxdWVyeU9iamVjdC5leHRyaW5zaWNIYXNoID0gcXVlcnk/LmV4dHJpbnNpY0hhc2g7XG4gICAgICB9XG5cbiAgICAgIGlmIChxdWVyeT8uYWRkcmVzcykge1xuICAgICAgICBxdWVyeU9iamVjdC5hZGRyZXNzID0gcXVlcnk/LmFkZHJlc3M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnRhYmxlLndoZXJlKHF1ZXJ5T2JqZWN0KS50b0FycmF5KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGFzeW5jIGJ1bGtVcHNlcnQgKHJlY29yZHM6IElUcmFuc2FjdGlvbkhpc3RvcnlJdGVtW10pOiBQcm9taXNlPHVua25vd24+IHtcbiAgICBhd2FpdCB0aGlzLnRhYmxlLmJ1bGtQdXQocmVjb3Jkcyk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVXaXRoUXVlcnkgKHF1ZXJ5OiBIaXN0b3J5UXVlcnksIHVwZGF0ZTogUGFydGlhbDxJVHJhbnNhY3Rpb25IaXN0b3J5SXRlbT4pOiBQcm9taXNlPHVua25vd24+IHtcbiAgICBhd2FpdCB0aGlzLnRhYmxlLndoZXJlKHF1ZXJ5KVxuICAgICAgLm1vZGlmeSgocmVjb3JkKSA9PiB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHJlY29yZCwgdXBkYXRlKTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgU1dFcnJvciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9lcnJvcnMvU1dFcnJvcic7XG5pbXBvcnQgU1VCU0NBTl9DSEFJTl9NQVAgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zdWJzY2FuLXNlcnZpY2Uvc3Vic2Nhbi1jaGFpbi1tYXAnO1xuaW1wb3J0IHsgSU11bHRpQ2hhaW5CYWxhbmNlLCBTdWJzY2FuUmVxdWVzdCwgU3Vic2NhblJlc3BvbnNlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9zdWJzY2FuLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IGZldGNoIGZyb20gJ2Nyb3NzLWZldGNoJztcblxuZXhwb3J0IGNsYXNzIFN1YnNjYW5TZXJ2aWNlIHtcbiAgcHJpdmF0ZSBsaW1pdFJhdGUgPSAyOyAvLyBsaW1pdCBwZXIgaW50ZXJ2YWwgY2hlY2tcbiAgcHJpdmF0ZSBpbnRlcnZhbENoZWNrID0gMTAwMDsgLy8gaW50ZXJ2YWwgY2hlY2sgaW4gbXNcbiAgcHJpdmF0ZSBtYXhSZXRyeSA9IDk7IC8vIGludGVydmFsIGNoZWNrIGluIG1zXG4gIHByaXZhdGUgcmVxdWVzdE1hcDogUmVjb3JkPG51bWJlciwgU3Vic2NhblJlcXVlc3Q8YW55Pj4gPSB7fTtcbiAgcHJpdmF0ZSBuZXh0SWQgPSAwO1xuICBwcml2YXRlIGlzUnVubmluZyA9IGZhbHNlO1xuICBwcml2YXRlIGdldElkICgpIHtcbiAgICByZXR1cm4gdGhpcy5uZXh0SWQrKztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zPzoge2xpbWl0UmF0ZT86IG51bWJlciwgaW50ZXJ2YWxDaGVjaz86IG51bWJlciwgbWF4UmV0cnk/OiBudW1iZXJ9KSB7XG4gICAgdGhpcy5saW1pdFJhdGUgPSBvcHRpb25zPy5saW1pdFJhdGUgfHwgdGhpcy5saW1pdFJhdGU7XG4gICAgdGhpcy5pbnRlcnZhbENoZWNrID0gb3B0aW9ucz8uaW50ZXJ2YWxDaGVjayB8fCB0aGlzLmludGVydmFsQ2hlY2s7XG4gICAgdGhpcy5tYXhSZXRyeSA9IG9wdGlvbnM/Lm1heFJldHJ5IHx8IHRoaXMubWF4UmV0cnk7XG4gIH1cblxuICBwcml2YXRlIGdldEFwaVVybCAoY2hhaW46IHN0cmluZywgcGF0aDogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3Vic2NhbkNoYWluID0gU1VCU0NBTl9DSEFJTl9NQVBbY2hhaW5dO1xuXG4gICAgaWYgKCFzdWJzY2FuQ2hhaW4pIHtcbiAgICAgIHRocm93IG5ldyBTV0Vycm9yKCdOT1RfU1VQUE9SVEVEJywgJ0NoYWluIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYGh0dHBzOi8vJHtjaGFpbn0uYXBpLnN1YnNjYW4uaW8vJHtwYXRofWA7XG4gIH1cblxuICBwcml2YXRlIHBvc3RSZXF1ZXN0ICh1cmw6IHN0cmluZywgYm9keTogYW55KSB7XG4gICAgcmV0dXJuIGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRSZXF1ZXN0PFQ+IChydW46IFN1YnNjYW5SZXF1ZXN0PFQ+WydydW4nXSkge1xuICAgIGNvbnN0IG5ld0lkID0gdGhpcy5nZXRJZCgpO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMucmVxdWVzdE1hcFtuZXdJZF0gPSB7XG4gICAgICAgIGlkOiBuZXdJZCxcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgIHJldHJ5OiAtMSxcbiAgICAgICAgcnVuLFxuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZWplY3RcbiAgICAgIH07XG5cbiAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHByb2Nlc3MgKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICBjb25zdCBtYXhSZXRyeSA9IHRoaXMubWF4UmV0cnk7XG5cbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1JlcXVlc3RzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnJlcXVlc3RNYXApO1xuXG4gICAgICBpZiAocmVtYWluaW5nUmVxdWVzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGZpcnN0IHRoaXMubGltaXQgcmVxdWVzdHMgYmFzZSBvbiBpZFxuICAgICAgY29uc3QgcmVxdWVzdHMgPSByZW1haW5pbmdSZXF1ZXN0c1xuICAgICAgICAuZmlsdGVyKChyZXF1ZXN0KSA9PiByZXF1ZXN0LnN0YXR1cyAhPT0gJ3J1bm5pbmcnKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5pZCAtIGIuaWQpXG4gICAgICAgIC5zbGljZSgwLCB0aGlzLmxpbWl0UmF0ZSk7XG5cbiAgICAgIC8vIFN0YXJ0IHJlcXVlc3RzXG4gICAgICByZXF1ZXN0cy5mb3JFYWNoKChyZXF1ZXN0KSA9PiB7XG4gICAgICAgIHJlcXVlc3Quc3RhdHVzID0gJ3J1bm5pbmcnO1xuICAgICAgICByZXF1ZXN0LnJ1bigpLnRoZW4oKHJzKSA9PiB7XG4gICAgICAgICAgcmVxdWVzdC5yZXNvbHZlKHJzKTtcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICBpZiAocmVxdWVzdC5yZXRyeSA8IG1heFJldHJ5KSB7XG4gICAgICAgICAgICByZXF1ZXN0LnN0YXR1cyA9ICdwZW5kaW5nJztcbiAgICAgICAgICAgIHJlcXVlc3QucmV0cnkrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVqZWN0IHJlcXVlc3RcbiAgICAgICAgICAgIHJlcXVlc3QucmVqZWN0KG5ldyBTV0Vycm9yKCdNQVhfUkVUUlknLCBTdHJpbmcoZSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSwgdGhpcy5pbnRlcnZhbENoZWNrKTtcbiAgfVxuXG4gIC8vIEltcGxlbWVudCBTdWJzY2FuIEFQSVxuICBwdWJsaWMgZ2V0TXVsdGlDaGFpbkJhbGFuY2UgKGFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8SU11bHRpQ2hhaW5CYWxhbmNlW10+IHtcbiAgICByZXR1cm4gdGhpcy5hZGRSZXF1ZXN0KGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJzID0gYXdhaXQgdGhpcy5wb3N0UmVxdWVzdCh0aGlzLmdldEFwaVVybCgncG9sa2Fkb3QnLCAnYXBpL3NjYW4vbXVsdGlDaGFpbi9hY2NvdW50JyksIHsgYWRkcmVzcyB9KTtcblxuICAgICAgaWYgKHJzLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIHRocm93IG5ldyBTV0Vycm9yKCdTdWJzY2FuU2VydmljZS5nZXRNdWx0aUNoYWluQmFsYW5jZScsIGF3YWl0IHJzLnRleHQoKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGpzb25EYXRhID0gKGF3YWl0IHJzLmpzb24oKSkgYXMgU3Vic2NhblJlc3BvbnNlPElNdWx0aUNoYWluQmFsYW5jZVtdPjtcblxuICAgICAgcmV0dXJuIGpzb25EYXRhLmRhdGE7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZVxuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuY29uc3QgU1VCU0NBTl9DSEFJTl9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIHBvbGthZG90OiAncG9sa2Fkb3QnLFxuICBrdXNhbWE6ICdrdXNhbWEnLFxuICBtb29uYmVhbTogJ21vb25iZWFtJyxcbiAgYWNhbGE6ICdhY2FsYScsXG4gIGFzdGFyOiAnYXN0YXInLFxuICBzaGlkZW46ICdzaGlkZW4nLFxuICBzaGlidXlhOiAnc2hpYnV5YScsXG4gIHdlc3RlbmQ6ICd3ZXN0ZW5kJyxcbiAgbW9vbmJhc2U6ICdtb29uYmFzZScsXG4gIG1vb25yaXZlcjogJ21vb25yaXZlcicsXG4gIHR1cmluZzogJ3R1cmluZycsXG4gIGJpZnJvc3RfdGVzdG5ldDogJ2JpZnJvc3QtdGVzdG5ldCcsXG4gIGNhbGFtYXJpOiAnY2FsYW1hcmknLFxuICBzdGF0ZW1pbnQ6ICdzdGF0ZW1pbnQnLFxuICBwaW9uZWVyOiAncGlvbmVlcicsXG4gIHBhcmFsbGVsOiAncGFyYWxsZWwnLFxuICBjbG92ZXI6ICdjbG92ZXInLFxuICBoeWRyYWR4X21haW46ICdoeWRyYWR4JyxcbiAgZWRnZXdhcmU6ICdlZGdld2FyZScsXG4gIGNlbnRyaWZ1Z2U6ICdjZW50cmlmdWdlJyxcbiAgaW50ZXJsYXk6ICdpbnRlcmxheScsXG4gIG5vZGxlOiAnbm9kbGUnLFxuICBkYXJ3aW5pYTogJ2RhcndpbmlhJyxcbiAgcG9sa2FkZXg6ICdwb2xrYWRleCcsXG4gIGFsZXBoOiAnYWxlcGh6ZXJvJyxcbiAgZG9scGhpbjogJ2RvbHBoaW4nLFxuICBlZmluaXR5OiAnZWZpbml0eScsXG4gIGNvbXBvc2FibGVGaW5hbmNlOiAnY29tcG9zYWJsZScsXG4gIHBoYWxhOiAncGhhbGEnLFxuICBjcnVzdDogJ2NydXN0JyxcbiAgc3RhdGVtaW5lOiAnc3RhdGVtaW5lJyxcbiAga2FydXJhOiAna2FydXJhJyxcbiAga2hhbGE6ICdraGFsYScsXG4gIGtpbHQ6ICdzcGlyaXRuZXQnLFxuICBiYXNpbGlzazogJ2Jhc2lsaXNrJyxcbiAgYWx0YWlyOiAnYWx0YWlyJyxcbiAgaGVpa286ICdwYXJhbGxlbC1oZWlrbycsXG4gIGtpbnRzdWdpOiAna2ludHN1Z2knLFxuICBwaWNhc3NvOiAncGljYXNzbycsXG4gIHF1YXJ0ejogJ3F1YXJ0eicsXG4gIHVuaXF1ZV9uZXR3b3JrOiAndW5pcXVlJyxcbiAgZ2Vuc2hpcm86ICdnZW5zaGlybycsXG4gIHplaXRnZWlzdDogJ3plaXRnZWlzdCcsXG4gIHNha3VyYTogJ3Nha3VyYScsXG4gIHNoYWRvdzogJ3NoYWRvdycsXG4gIHJvYm9ub21pY3M6ICdyb2Jvbm9taWNzJyxcbiAgaW50ZWdyaXRlZTogJ2ludGVncml0ZWUnLFxuICBhY2FsYV90ZXN0bmV0OiAnYWNhbGEtdGVzdG5ldCcsXG4gIG1hbmdhdGF4OiAnbWFuZ2F0YXgnLFxuICBlbmNvaW50ZXI6ICdlbmNvaW50ZXInLFxuICBzdWJzcGFjZV9nZW1pbmlfMmE6ICdzdWJzcGFjZScsXG4gIG9yaWdpbnRyYWlsOiAnb3JpZ2ludHJhaWwnLFxuICBiYWp1bjogJ2JhanVuJyxcbiAgc25vdzogJ3Nub3cnLFxuICBraWx0X3BlcmVncmluZTogJ2tpbHQtdGVzdG5ldCcsXG4gIHBvbHltZXNoOiAncG9seW1lc2gnXG59O1xuXG5leHBvcnQgY29uc3QgU1VCU0NBTl9DSEFJTl9NQVBfUkVWRVJTRSA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhTVUJTQ0FOX0NIQUlOX01BUCkubWFwKChbaywgdl0pID0+IFt2LCBrXSkpO1xuZXhwb3J0IGRlZmF1bHQgU1VCU0NBTl9DSEFJTl9NQVA7XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuZXhwb3J0IGNvbnN0IFRSQU5TQUNUSU9OX1RJTUVPVVQgPSAyICogNjAgKiAxMDAwO1xuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IF9DaGFpbkFzc2V0LCBfQ2hhaW5JbmZvIH0gZnJvbSAnQHN1YndhbGxldC9jaGFpbi1saXN0L3R5cGVzJztcbmltcG9ydCB7IFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IF9nZXRBc3NldERlY2ltYWxzLCBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5cbmltcG9ydCB7IEV2ZW50UmVjb3JkIH0gZnJvbSAnQHBvbGthZG90L3R5cGVzL2ludGVyZmFjZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VYY21FdmVudExvZ3MgKGhpc3RvcnlJdGVtOiBQYXJ0aWFsPFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW0+LCBldmVudExvZ3M6IEV2ZW50UmVjb3JkW10sIGNoYWluOiBzdHJpbmcsIHNlbmRpbmdUb2tlbkluZm86IF9DaGFpbkFzc2V0LCBjaGFpbkluZm86IF9DaGFpbkluZm8pIHtcbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGV2ZW50TG9ncy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCByZWNvcmQgPSBldmVudExvZ3NbaW5kZXhdO1xuICAgIGNvbnN0IHsgZGVjaW1hbHM6IG5hdGl2ZURlY2ltYWxzLCBzeW1ib2w6IG5hdGl2ZVN5bWJvbCB9ID0gX2dldENoYWluTmF0aXZlVG9rZW5CYXNpY0luZm8oY2hhaW5JbmZvKTtcblxuICAgIGlmIChyZWNvcmQuZXZlbnQuc2VjdGlvbiA9PT0gJ2JhbGFuY2VzJyAmJiByZWNvcmQuZXZlbnQubWV0aG9kLnRvTG93ZXJDYXNlKCkgPT09ICd3aXRoZHJhdycpIHtcbiAgICAgIGlmIChyZWNvcmQuZXZlbnQuZGF0YVsxXT8udG9TdHJpbmcoKSkge1xuICAgICAgICBoaXN0b3J5SXRlbS5mZWUgPSB7XG4gICAgICAgICAgdmFsdWU6IHJlY29yZC5ldmVudC5kYXRhWzFdPy50b1N0cmluZygpLFxuICAgICAgICAgIHN5bWJvbDogbmF0aXZlU3ltYm9sLFxuICAgICAgICAgIGRlY2ltYWxzOiBuYXRpdmVEZWNpbWFsc1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVjb3JkLmV2ZW50LnNlY3Rpb24gPT09ICd0b2tlbnMnICYmIHJlY29yZC5ldmVudC5tZXRob2QudG9Mb3dlckNhc2UoKSA9PT0gJ3dpdGhkcmF3bicpIHtcbiAgICAgIGlmICghaGlzdG9yeUl0ZW0uZmVlICYmIHJlY29yZC5ldmVudC5kYXRhWzJdPy50b1N0cmluZygpKSB7XG4gICAgICAgIGhpc3RvcnlJdGVtLmZlZSA9IHtcbiAgICAgICAgICB2YWx1ZTogcmVjb3JkLmV2ZW50LmRhdGFbMl0/LnRvU3RyaW5nKCksXG4gICAgICAgICAgc3ltYm9sOiBuYXRpdmVTeW1ib2wsXG4gICAgICAgICAgZGVjaW1hbHM6IG5hdGl2ZURlY2ltYWxzXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRyYW5zZmVyRXZlbnRMb2dzIChoaXN0b3J5SXRlbTogUGFydGlhbDxUcmFuc2FjdGlvbkhpc3RvcnlJdGVtPiwgZXZlbnRMb2dzOiBFdmVudFJlY29yZFtdLCBjaGFpbjogc3RyaW5nLCBzZW5kaW5nVG9rZW5JbmZvOiBfQ2hhaW5Bc3NldCwgY2hhaW5JbmZvOiBfQ2hhaW5JbmZvKSB7XG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBldmVudExvZ3MubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY29uc3QgcmVjb3JkID0gZXZlbnRMb2dzW2luZGV4XTtcblxuICAgIGlmIChbJ2dlbnNoaXJvX3Rlc3RuZXQnLCAnZ2Vuc2hpcm8nLCAnZXF1aWxpYnJpdW1fcGFyYWNoYWluJ10uaW5jbHVkZXMoY2hhaW4pICYmIHNlbmRpbmdUb2tlbkluZm8pIHtcbiAgICAgIGlmIChyZWNvcmQuZXZlbnQuc2VjdGlvbiA9PT0gJ3RyYW5zYWN0aW9uUGF5bWVudCcgJiZcbiAgICAgICAgcmVjb3JkLmV2ZW50Lm1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSAndHJhbnNhY3Rpb25mZWVwYWlkJykge1xuICAgICAgICBpZiAocmVjb3JkLmV2ZW50LmRhdGFbMV0/LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICBoaXN0b3J5SXRlbS5mZWUgPSB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmV2ZW50LmRhdGFbMV0/LnRvU3RyaW5nKCkgfHwgJzAnLFxuICAgICAgICAgICAgc3ltYm9sOiBzZW5kaW5nVG9rZW5JbmZvLnN5bWJvbCxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBfZ2V0QXNzZXREZWNpbWFscyhzZW5kaW5nVG9rZW5JbmZvKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB7IGRlY2ltYWxzOiBuYXRpdmVEZWNpbWFscywgc3ltYm9sOiBuYXRpdmVTeW1ib2wgfSA9IF9nZXRDaGFpbk5hdGl2ZVRva2VuQmFzaWNJbmZvKGNoYWluSW5mbyk7XG5cbiAgICBpZiAocmVjb3JkLmV2ZW50LnNlY3Rpb24gPT09ICdiYWxhbmNlcycgJiZcbiAgICAgIHJlY29yZC5ldmVudC5tZXRob2QudG9Mb3dlckNhc2UoKSA9PT0gJ3dpdGhkcmF3Jykge1xuICAgICAgaWYgKHJlY29yZC5ldmVudC5kYXRhWzFdPy50b1N0cmluZygpKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgaGlzdG9yeUl0ZW0uZmVlID0ge1xuICAgICAgICAgIHZhbHVlOiByZWNvcmQuZXZlbnQuZGF0YVsxXT8udG9TdHJpbmcoKSB8fCAnMCcsXG4gICAgICAgICAgc3ltYm9sOiBuYXRpdmVTeW1ib2wsXG4gICAgICAgICAgZGVjaW1hbHM6IG5hdGl2ZURlY2ltYWxzXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBFeHRyaW5zaWNUeXBlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBTV1RyYW5zYWN0aW9uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy90cmFuc2FjdGlvbi1zZXJ2aWNlL3R5cGVzJztcblxuaW1wb3J0IHsgU3VibWl0dGFibGVFeHRyaW5zaWMgfSBmcm9tICdAcG9sa2Fkb3QvYXBpL3Byb21pc2UvdHlwZXMnO1xuXG5sZXQgdHJhbnNhY3Rpb25Db3VudCA9IDA7XG5sZXQgdmFsaWRhdGlvbkNvdW50ID0gMDtcblxuZXhwb3J0IGNvbnN0IGdldFRyYW5zYWN0aW9uSWQgPSAoY2hhaW5UeXBlOiBzdHJpbmcsIGNoYWluOiBzdHJpbmcsIGlzSW50ZXJuYWw6IGJvb2xlYW4sIGlzV2FsbGV0Q29ubmVjdCA9IGZhbHNlKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGAke2lzSW50ZXJuYWwgPyAnaW50ZXJuYWwnIDogIWlzV2FsbGV0Q29ubmVjdCA/ICdleHRlcm5hbCcgOiAnd2FsbGV0LWNvbm5lY3QnfS4ke2NoYWluVHlwZX0uJHtjaGFpbn0uJHtEYXRlLm5vdygpfS4keysrdHJhbnNhY3Rpb25Db3VudH1gO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFZhbGlkYXRpb25JZCA9IChjaGFpblR5cGU6IHN0cmluZywgY2hhaW46IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBgJHtjaGFpblR5cGV9LiR7Y2hhaW59LiR7RGF0ZS5ub3coKX0uJHsrK3ZhbGlkYXRpb25Db3VudH1gO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzU3Vic3RyYXRlVHJhbnNhY3Rpb24gPSAodHg6IFNXVHJhbnNhY3Rpb25bJ3RyYW5zYWN0aW9uJ10pOiB0eCBpcyBTdWJtaXR0YWJsZUV4dHJpbnNpYyA9PiB7XG4gIHJldHVybiAhISh0eCBhcyBTdWJtaXR0YWJsZUV4dHJpbnNpYykuc2VuZDtcbn07XG5cbmNvbnN0IHR5cGVOYW1lID0gKHR5cGU6IFNXVHJhbnNhY3Rpb25bJ2V4dHJpbnNpY1R5cGUnXSkgPT4ge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfQkFMQU5DRTpcbiAgICBjYXNlIEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfVE9LRU46XG4gICAgY2FzZSBFeHRyaW5zaWNUeXBlLlRSQU5TRkVSX1hDTTpcbiAgICAgIHJldHVybiAnVHJhbnNmZXInO1xuICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TRU5EX05GVDpcbiAgICAgIHJldHVybiAnU2VuZCBORlQnO1xuICAgIGNhc2UgRXh0cmluc2ljVHlwZS5DUk9XRExPQU46XG4gICAgICByZXR1cm4gJ0Nyb3dkbG9hbiBjb250cmlidXRpb24nO1xuICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TVEFLSU5HX0pPSU5fUE9PTDpcbiAgICAgIHJldHVybiAnSm9pbiBwb29sJztcbiAgICBjYXNlIEV4dHJpbnNpY1R5cGUuU1RBS0lOR19MRUFWRV9QT09MOlxuICAgICAgcmV0dXJuICdMZWF2ZSBwb29sJztcbiAgICBjYXNlIEV4dHJpbnNpY1R5cGUuU1RBS0lOR19CT05EOlxuICAgICAgcmV0dXJuICdCb25kJztcbiAgICBjYXNlIEV4dHJpbnNpY1R5cGUuU1RBS0lOR19VTkJPTkQ6XG4gICAgICByZXR1cm4gJ1VuYm9uZCc7XG4gICAgY2FzZSBFeHRyaW5zaWNUeXBlLlNUQUtJTkdfQ0xBSU1fUkVXQVJEOlxuICAgICAgcmV0dXJuICdDbGFpbSByZXdhcmQnO1xuICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TVEFLSU5HX1dJVEhEUkFXOlxuICAgICAgcmV0dXJuICdXaXRoZHJhdyc7XG4gICAgY2FzZSBFeHRyaW5zaWNUeXBlLlNUQUtJTkdfQ0FOQ0VMX1VOU1RBS0U6XG4gICAgICByZXR1cm4gJ0NhbmNlbCB1bnN0YWtlJztcbiAgICBjYXNlIEV4dHJpbnNpY1R5cGUuU1RBS0lOR19DT01QT1VORElORzpcbiAgICAgIHJldHVybiAnU3Rha2UgY29tcG91bmQnO1xuICAgIGNhc2UgRXh0cmluc2ljVHlwZS5FVk1fRVhFQ1VURTpcbiAgICAgIHJldHVybiAnRVZNIGV4ZWN1dGUnO1xuICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TVEFLSU5HX0NBTkNFTF9DT01QT1VORElORzpcbiAgICAgIHJldHVybiAnQ2FuY2VsIGNvbXBvdW5kaW5nJztcbiAgICBjYXNlIEV4dHJpbnNpY1R5cGUuU1RBS0lOR19QT09MX1dJVEhEUkFXOlxuICAgICAgcmV0dXJuICdXaXRoZHJhdyBwb29sJztcbiAgICBjYXNlIEV4dHJpbnNpY1R5cGUuVU5LTk9XTjpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldEJhc2VUcmFuc2FjdGlvbkluZm8gPSAodHJhbnNhY3Rpb246IFNXVHJhbnNhY3Rpb24sIGNoYWluSW5mb01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4pID0+IHtcbiAgcmV0dXJuIGAke3R5cGVOYW1lKHRyYW5zYWN0aW9uLmV4dHJpbnNpY1R5cGUpfSBvbiAke2NoYWluSW5mb01hcFt0cmFuc2FjdGlvbi5jaGFpbl0/Lm5hbWUgfHwgJ3Vua25vd24gbmV0d29yayd9YDtcbn07XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgRXZtUHJvdmlkZXJFcnJvciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9lcnJvcnMvRXZtUHJvdmlkZXJFcnJvcic7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbkVycm9yIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL2Vycm9ycy9UcmFuc2FjdGlvbkVycm9yJztcbmltcG9ydCB7IEFtb3VudERhdGEsIEJhc2ljVHhFcnJvclR5cGUsIEJhc2ljVHhXYXJuaW5nQ29kZSwgQ2hhaW5UeXBlLCBFdm1Qcm92aWRlckVycm9yVHlwZSwgRXZtU2VuZFRyYW5zYWN0aW9uUmVxdWVzdCwgRXh0cmluc2ljU3RhdHVzLCBFeHRyaW5zaWNUeXBlLCBOb3RpZmljYXRpb25UeXBlLCBUcmFuc2FjdGlvbkRpcmVjdGlvbiwgVHJhbnNhY3Rpb25IaXN0b3J5SXRlbSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9Lb25pVHlwZXMnO1xuaW1wb3J0IHsgQWNjb3VudEpzb24gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvdHlwZXMnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25XYXJuaW5nIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL3dhcm5pbmdzL1RyYW5zYWN0aW9uV2FybmluZyc7XG5pbXBvcnQgeyBBTExfQUNDT1VOVF9LRVkgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBCYWxhbmNlU2VydmljZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvYmFsYW5jZS1zZXJ2aWNlJztcbmltcG9ydCB7IENoYWluU2VydmljZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZSc7XG5pbXBvcnQgeyBfVFJBTlNGRVJfQ0hBSU5fR1JPVVAgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvY29uc3RhbnRzJztcbmltcG9ydCB7IF9nZXRDaGFpbk5hdGl2ZVRva2VuQmFzaWNJbmZvLCBfZ2V0RXZtQ2hhaW5JZCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS91dGlscyc7XG5pbXBvcnQgeyBFdmVudFNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2V2ZW50LXNlcnZpY2UnO1xuaW1wb3J0IHsgSGlzdG9yeVNlcnZpY2UgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2hpc3Rvcnktc2VydmljZSc7XG5pbXBvcnQgTm90aWZpY2F0aW9uU2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL25vdGlmaWNhdGlvbi1zZXJ2aWNlL05vdGlmaWNhdGlvblNlcnZpY2UnO1xuaW1wb3J0IFJlcXVlc3RTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlJztcbmltcG9ydCB7IEVYVEVOU0lPTl9SRVFVRVNUX1VSTCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvcmVxdWVzdC1zZXJ2aWNlL2NvbnN0YW50cyc7XG5pbXBvcnQgRGF0YWJhc2VTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlL0RhdGFiYXNlU2VydmljZSc7XG5pbXBvcnQgeyBUUkFOU0FDVElPTl9USU1FT1VUIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy90cmFuc2FjdGlvbi1zZXJ2aWNlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBwYXJzZVRyYW5zZmVyRXZlbnRMb2dzLCBwYXJzZVhjbUV2ZW50TG9ncyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvdHJhbnNhY3Rpb24tc2VydmljZS9ldmVudC1wYXJzZXInO1xuaW1wb3J0IHsgZ2V0QmFzZVRyYW5zYWN0aW9uSW5mbywgZ2V0VHJhbnNhY3Rpb25JZCwgaXNTdWJzdHJhdGVUcmFuc2FjdGlvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvdHJhbnNhY3Rpb24tc2VydmljZS9oZWxwZXJzJztcbmltcG9ydCB7IFNXVHJhbnNhY3Rpb24sIFNXVHJhbnNhY3Rpb25JbnB1dCwgU1dUcmFuc2FjdGlvblJlc3BvbnNlLCBUcmFuc2FjdGlvbkVtaXR0ZXIsIFRyYW5zYWN0aW9uRXZlbnRNYXAsIFRyYW5zYWN0aW9uRXZlbnRSZXNwb25zZSwgVmFsaWRhdGVUcmFuc2FjdGlvblJlc3BvbnNlSW5wdXQgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3RyYW5zYWN0aW9uLXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgZ2V0RXhwbG9yZXJMaW5rLCBwYXJzZVRyYW5zYWN0aW9uRGF0YSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvdHJhbnNhY3Rpb24tc2VydmljZS91dGlscyc7XG5pbXBvcnQgeyBpc1dhbGxldENvbm5lY3RSZXF1ZXN0IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy93YWxsZXQtY29ubmVjdC1zZXJ2aWNlL2hlbHBlcnMnO1xuaW1wb3J0IHsgV2ViM1RyYW5zYWN0aW9uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zaWduZXJzL3R5cGVzJztcbmltcG9ydCB7IGFueU51bWJlclRvQk4gfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL2V0aCc7XG5pbXBvcnQgeyBtZXJnZVRyYW5zYWN0aW9uQW5kU2lnbmF0dXJlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscy9ldGgvbWVyZ2VUcmFuc2FjdGlvbkFuZFNpZ25hdHVyZSc7XG5pbXBvcnQgeyBpc0NvbnRyYWN0QWRkcmVzcywgcGFyc2VDb250cmFjdElucHV0IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscy9ldGgvcGFyc2VUcmFuc2FjdGlvbic7XG5pbXBvcnQga2V5cmluZyBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcnO1xuaW1wb3J0IEJpZ04gZnJvbSAnYmlnbnVtYmVyLmpzJztcbmltcG9ydCB7IGFkZEhleFByZWZpeCB9IGZyb20gJ2V0aGVyZXVtanMtdXRpbCc7XG5pbXBvcnQgeyBldGhlcnMsIFRyYW5zYWN0aW9uTGlrZSB9IGZyb20gJ2V0aGVycyc7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ2V2ZW50ZW1pdHRlcjMnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbkNvbmZpZywgVHJhbnNhY3Rpb25SZWNlaXB0IH0gZnJvbSAnd2ViMy1jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3dlYjMtY29yZS1zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7IEJsb2NrSGVhZGVyIH0gZnJvbSAnd2ViMy1ldGgnO1xuXG5pbXBvcnQgeyBTdWJtaXR0YWJsZUV4dHJpbnNpYyB9IGZyb20gJ0Bwb2xrYWRvdC9hcGkvcHJvbWlzZS90eXBlcyc7XG5pbXBvcnQgeyBTaWduZXIsIFNpZ25lclJlc3VsdCB9IGZyb20gJ0Bwb2xrYWRvdC9hcGkvdHlwZXMnO1xuaW1wb3J0IHsgRXZlbnRSZWNvcmQgfSBmcm9tICdAcG9sa2Fkb3QvdHlwZXMvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBTaWduZXJQYXlsb2FkSlNPTiB9IGZyb20gJ0Bwb2xrYWRvdC90eXBlcy90eXBlcy9leHRyaW5zaWMnO1xuaW1wb3J0IHsgaXNIZXggfSBmcm9tICdAcG9sa2Fkb3QvdXRpbCc7XG5pbXBvcnQgeyBIZXhTdHJpbmcgfSBmcm9tICdAcG9sa2Fkb3QvdXRpbC90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYW5zYWN0aW9uU2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgYmFsYW5jZVNlcnZpY2U6IEJhbGFuY2VTZXJ2aWNlO1xuICBwcml2YXRlIHJlYWRvbmx5IGNoYWluU2VydmljZTogQ2hhaW5TZXJ2aWNlO1xuICBwcml2YXRlIHJlYWRvbmx5IGRhdGFiYXNlU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlO1xuICBwcml2YXRlIHJlYWRvbmx5IGV2ZW50U2VydmljZTogRXZlbnRTZXJ2aWNlO1xuICBwcml2YXRlIHJlYWRvbmx5IGhpc3RvcnlTZXJ2aWNlOiBIaXN0b3J5U2VydmljZTtcbiAgcHJpdmF0ZSByZWFkb25seSBub3RpZmljYXRpb25TZXJ2aWNlOiBOb3RpZmljYXRpb25TZXJ2aWNlO1xuICBwcml2YXRlIHJlYWRvbmx5IHJlcXVlc3RTZXJ2aWNlOiBSZXF1ZXN0U2VydmljZTtcbiAgcHJpdmF0ZSByZWFkb25seSB0cmFuc2FjdGlvblN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxSZWNvcmQ8c3RyaW5nLCBTV1RyYW5zYWN0aW9uPj4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFJlY29yZDxzdHJpbmcsIFNXVHJhbnNhY3Rpb24+Pih7fSk7XG5cbiAgcHJpdmF0ZSByZWFkb25seSB3YXRjaFRyYW5zYWN0aW9uU3Vic2NyaWJlczogUmVjb3JkPHN0cmluZywgUHJvbWlzZTx2b2lkPj4gPSB7fTtcblxuICBwcml2YXRlIGdldCB0cmFuc2FjdGlvbnMgKCk6IFJlY29yZDxzdHJpbmcsIFNXVHJhbnNhY3Rpb24+IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvblN1YmplY3QuZ2V0VmFsdWUoKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yIChjaGFpblNlcnZpY2U6IENoYWluU2VydmljZSwgZXZlbnRTZXJ2aWNlOiBFdmVudFNlcnZpY2UsIHJlcXVlc3RTZXJ2aWNlOiBSZXF1ZXN0U2VydmljZSwgYmFsYW5jZVNlcnZpY2U6IEJhbGFuY2VTZXJ2aWNlLCBoaXN0b3J5U2VydmljZTogSGlzdG9yeVNlcnZpY2UsIG5vdGlmaWNhdGlvblNlcnZpY2U6IE5vdGlmaWNhdGlvblNlcnZpY2UsIGRhdGFiYXNlU2VydmljZTogRGF0YWJhc2VTZXJ2aWNlKSB7XG4gICAgdGhpcy5jaGFpblNlcnZpY2UgPSBjaGFpblNlcnZpY2U7XG4gICAgdGhpcy5ldmVudFNlcnZpY2UgPSBldmVudFNlcnZpY2U7XG4gICAgdGhpcy5yZXF1ZXN0U2VydmljZSA9IHJlcXVlc3RTZXJ2aWNlO1xuICAgIHRoaXMuYmFsYW5jZVNlcnZpY2UgPSBiYWxhbmNlU2VydmljZTtcbiAgICB0aGlzLmhpc3RvcnlTZXJ2aWNlID0gaGlzdG9yeVNlcnZpY2U7XG4gICAgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlID0gbm90aWZpY2F0aW9uU2VydmljZTtcbiAgICB0aGlzLmRhdGFiYXNlU2VydmljZSA9IGRhdGFiYXNlU2VydmljZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGFsbFRyYW5zYWN0aW9ucyAoKTogU1dUcmFuc2FjdGlvbltdIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLnRyYW5zYWN0aW9ucyk7XG4gIH1cblxuICBwcml2YXRlIGdldCBwcm9jZXNzaW5nVHJhbnNhY3Rpb25zICgpOiBTV1RyYW5zYWN0aW9uW10ge1xuICAgIHJldHVybiB0aGlzLmFsbFRyYW5zYWN0aW9ucy5maWx0ZXIoKHQpID0+IHQuc3RhdHVzID09PSBFeHRyaW5zaWNTdGF0dXMuUVVFVUVEIHx8IHQuc3RhdHVzID09PSBFeHRyaW5zaWNTdGF0dXMuU1VCTUlUVElORyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0VHJhbnNhY3Rpb24gKGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbnNbaWRdO1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0R1cGxpY2F0ZSAodHJhbnNhY3Rpb246IFZhbGlkYXRlVHJhbnNhY3Rpb25SZXNwb25zZUlucHV0KTogVHJhbnNhY3Rpb25FcnJvcltdIHtcbiAgICAvLyBDaGVjayBkdXBsaWNhdGVkIHRyYW5zYWN0aW9uXG4gICAgY29uc3QgZXhpc3RlZCA9IHRoaXMucHJvY2Vzc2luZ1RyYW5zYWN0aW9uc1xuICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5hZGRyZXNzID09PSB0cmFuc2FjdGlvbi5hZGRyZXNzICYmIGl0ZW0uY2hhaW4gPT09IHRyYW5zYWN0aW9uLmNoYWluKTtcblxuICAgIGlmIChleGlzdGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBbbmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5EVVBMSUNBVEVfVFJBTlNBQ1RJT04pXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW107XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2VuZXJhbFZhbGlkYXRlICh2YWxpZGF0aW9uSW5wdXQ6IFNXVHJhbnNhY3Rpb25JbnB1dCk6IFByb21pc2U8U1dUcmFuc2FjdGlvblJlc3BvbnNlPiB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHtcbiAgICAgIC4uLnZhbGlkYXRpb25JbnB1dCxcbiAgICAgIGVycm9yczogdmFsaWRhdGlvbklucHV0LmVycm9ycyB8fCBbXSxcbiAgICAgIHdhcm5pbmdzOiB2YWxpZGF0aW9uSW5wdXQud2FybmluZ3MgfHwgW11cbiAgICB9O1xuICAgIGNvbnN0IHsgYWRkaXRpb25hbFZhbGlkYXRvciwgYWRkcmVzcywgY2hhaW4sIGVkQXNXYXJuaW5nLCBleHRyaW5zaWNUeXBlLCBpc1RyYW5zZmVyQWxsLCB0cmFuc2FjdGlvbiB9ID0gdmFsaWRhdGlvbjtcblxuICAgIC8vIENoZWNrIGR1cGxpY2F0ZSB0cmFuc2FjdGlvblxuICAgIHZhbGlkYXRpb24uZXJyb3JzLnB1c2goLi4udGhpcy5jaGVja0R1cGxpY2F0ZSh2YWxpZGF0aW9uSW5wdXQpKTtcblxuICAgIC8vIFJldHVybiB1bnN1cHBvcnRlZCBlcnJvciBpZiBub3QgZm91bmQgdHJhbnNhY3Rpb25cbiAgICBpZiAoIXRyYW5zYWN0aW9uKSB7XG4gICAgICBpZiAoZXh0cmluc2ljVHlwZSA9PT0gRXh0cmluc2ljVHlwZS5TRU5EX05GVCkge1xuICAgICAgICB2YWxpZGF0aW9uLmVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuVU5TVVBQT1JURUQsIHQoJ1RoaXMgZmVhdHVyZSBpcyBub3QgeWV0IGF2YWlsYWJsZSBmb3IgdGhpcyBORlQnKSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsaWRhdGlvbi5lcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLlVOU1VQUE9SVEVEKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWRhdGlvblJlc3BvbnNlOiBTV1RyYW5zYWN0aW9uUmVzcG9uc2UgPSB7XG4gICAgICBzdGF0dXM6IHVuZGVmaW5lZCxcbiAgICAgIC4uLnZhbGlkYXRpb25cbiAgICB9O1xuXG4gICAgLy8gRXN0aW1hdGUgZmVlXG4gICAgY29uc3QgZXN0aW1hdGVGZWU6IEFtb3VudERhdGEgPSB7XG4gICAgICBzeW1ib2w6ICcnLFxuICAgICAgZGVjaW1hbHM6IDAsXG4gICAgICB2YWx1ZTogJydcbiAgICB9O1xuXG4gICAgY29uc3QgY2hhaW5JbmZvID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvQnlLZXkoY2hhaW4pO1xuXG4gICAgaWYgKCFjaGFpbkluZm8pIHtcbiAgICAgIHZhbGlkYXRpb25SZXNwb25zZS5lcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SLCB0KCdDYW5ub3QgZmluZCBuZXR3b3JrJykpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgeyBkZWNpbWFscywgc3ltYm9sIH0gPSBfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyhjaGFpbkluZm8pO1xuXG4gICAgICBlc3RpbWF0ZUZlZS5kZWNpbWFscyA9IGRlY2ltYWxzO1xuICAgICAgZXN0aW1hdGVGZWUuc3ltYm9sID0gc3ltYm9sO1xuXG4gICAgICBpZiAodHJhbnNhY3Rpb24pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaXNTdWJzdHJhdGVUcmFuc2FjdGlvbih0cmFuc2FjdGlvbikpIHtcbiAgICAgICAgICAgIGVzdGltYXRlRmVlLnZhbHVlID0gKGF3YWl0IHRyYW5zYWN0aW9uLnBheW1lbnRJbmZvKGFkZHJlc3MpKS5wYXJ0aWFsRmVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHdlYjMgPSB0aGlzLmNoYWluU2VydmljZS5nZXRFdm1BcGkoY2hhaW4pO1xuXG4gICAgICAgICAgICBpZiAoIXdlYjMpIHtcbiAgICAgICAgICAgICAgdmFsaWRhdGlvblJlc3BvbnNlLmVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuQ0hBSU5fRElTQ09OTkVDVEVELCB1bmRlZmluZWQpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGdhc1ByaWNlID0gYXdhaXQgd2ViMy5hcGkuZXRoLmdldEdhc1ByaWNlKCk7XG4gICAgICAgICAgICAgIGNvbnN0IGdhc0xpbWl0ID0gYXdhaXQgd2ViMy5hcGkuZXRoLmVzdGltYXRlR2FzKHRyYW5zYWN0aW9uKTtcblxuICAgICAgICAgICAgICBlc3RpbWF0ZUZlZS52YWx1ZSA9IChnYXNMaW1pdCAqIHBhcnNlSW50KGdhc1ByaWNlKSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zdCBlcnJvciA9IGUgYXMgRXJyb3I7XG5cbiAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZ2FzIHJlcXVpcmVkIGV4Y2VlZHMgYWxsb3dhbmNlJykgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnaW5zdWZmaWNpZW50IGZ1bmRzJykpIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb25SZXNwb25zZS5lcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLk5PVF9FTk9VR0hfQkFMQU5DRSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVzdGltYXRlRmVlLnZhbHVlID0gJzAnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFsaWRhdGlvblJlc3BvbnNlLmVzdGltYXRlRmVlID0gZXN0aW1hdGVGZWU7XG5cbiAgICAvLyBSZWFkLW9ubHkgYWNjb3VudFxuICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIoYWRkcmVzcyk7XG5cbiAgICBpZiAoIXBhaXIpIHtcbiAgICAgIHZhbGlkYXRpb25SZXNwb25zZS5lcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SLCB0KCdVbmFibGUgdG8gZmluZCBhY2NvdW50JykpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBhaXIubWV0YT8uaXNSZWFkT25seSkge1xuICAgICAgICB2YWxpZGF0aW9uUmVzcG9uc2UuZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5JTlRFUk5BTF9FUlJPUiwgdCgnVGhpcyBhY2NvdW50IGlzIHdhdGNoLW9ubHknKSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJhbGFuY2VcbiAgICBjb25zdCB0cmFuc2Zlck5hdGl2ZSA9IHZhbGlkYXRpb25SZXNwb25zZS50cmFuc2Zlck5hdGl2ZUFtb3VudCB8fCAnMCc7XG4gICAgY29uc3QgbmF0aXZlVG9rZW5JbmZvID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0TmF0aXZlVG9rZW5JbmZvKGNoYWluKTtcblxuICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLmJhbGFuY2VTZXJ2aWNlLmdldFRva2VuRnJlZUJhbGFuY2UoYWRkcmVzcywgY2hhaW4sIG5hdGl2ZVRva2VuSW5mby5zbHVnKTtcblxuICAgIGNvbnN0IGV4aXN0ZW50aWFsRGVwb3NpdCA9IG5hdGl2ZVRva2VuSW5mby5taW5BbW91bnQgfHwgJzAnO1xuXG4gICAgY29uc3QgZmVlTnVtID0gcGFyc2VJbnQoZXN0aW1hdGVGZWUudmFsdWUpO1xuICAgIGNvbnN0IGJhbGFuY2VOdW0gPSBwYXJzZUludChiYWxhbmNlLnZhbHVlKTtcbiAgICBjb25zdCBlZE51bSA9IHBhcnNlSW50KGV4aXN0ZW50aWFsRGVwb3NpdCk7XG4gICAgY29uc3QgdHJhbnNmZXJOYXRpdmVOdW0gPSBwYXJzZUludCh0cmFuc2Zlck5hdGl2ZSk7XG5cbiAgICBpZiAoIW5ldyBCaWdOKGJhbGFuY2UudmFsdWUpLmd0KDApKSB7XG4gICAgICB2YWxpZGF0aW9uUmVzcG9uc2UuZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5OT1RfRU5PVUdIX0JBTEFOQ0UpKTtcbiAgICB9XG5cbiAgICBpZiAodHJhbnNmZXJOYXRpdmVOdW0gKyBmZWVOdW0gPiBiYWxhbmNlTnVtKSB7XG4gICAgICBpZiAoIWlzVHJhbnNmZXJBbGwpIHtcbiAgICAgICAgdmFsaWRhdGlvblJlc3BvbnNlLmVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuTk9UX0VOT1VHSF9CQUxBTkNFKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoW1xuICAgICAgICAgIC4uLl9UUkFOU0ZFUl9DSEFJTl9HUk9VUC5hY2FsYSxcbiAgICAgICAgICAuLi5fVFJBTlNGRVJfQ0hBSU5fR1JPVVAuZ2Vuc2hpcm8sXG4gICAgICAgICAgLi4uX1RSQU5TRkVSX0NIQUlOX0dST1VQLmJpdGNvdW50cnksXG4gICAgICAgICAgLi4uX1RSQU5TRkVSX0NIQUlOX0dST1VQLnN0YXRlbWluZVxuICAgICAgICBdLmluY2x1ZGVzKGNoYWluKSkgeyAvLyBDaGFpbiBub3QgaGF2ZSB0cmFuc2ZlciBhbGwgZnVuY3Rpb25cbiAgICAgICAgICB2YWxpZGF0aW9uUmVzcG9uc2UuZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5OT1RfRU5PVUdIX0JBTEFOQ0UpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghaXNUcmFuc2ZlckFsbCkge1xuICAgICAgaWYgKGJhbGFuY2VOdW0gLSAodHJhbnNmZXJOYXRpdmVOdW0gKyBmZWVOdW0pIDwgZWROdW0pIHtcbiAgICAgICAgaWYgKGVkQXNXYXJuaW5nKSB7XG4gICAgICAgICAgdmFsaWRhdGlvblJlc3BvbnNlLndhcm5pbmdzLnB1c2gobmV3IFRyYW5zYWN0aW9uV2FybmluZyhCYXNpY1R4V2FybmluZ0NvZGUuTk9UX0VOT1VHSF9FWElTVEVOVElBTF9ERVBPU0lUKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsaWRhdGlvblJlc3BvbnNlLmVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuTk9UX0VOT1VHSF9FWElTVEVOVElBTF9ERVBPU0lUKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSB0cmFuc2FjdGlvbiB3aXRoIGFkZGl0aW9uYWxWYWxpZGF0b3IgbWV0aG9kXG4gICAgYWRkaXRpb25hbFZhbGlkYXRvciAmJiBhd2FpdCBhZGRpdGlvbmFsVmFsaWRhdG9yKHZhbGlkYXRpb25SZXNwb25zZSk7XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvblJlc3BvbnNlO1xuICB9XG5cbiAgcHVibGljIGdldFRyYW5zYWN0aW9uU3ViamVjdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb25TdWJqZWN0O1xuICB9XG5cbiAgcHJpdmF0ZSBmaWxsVHJhbnNhY3Rpb25EZWZhdWx0SW5mbyAodHJhbnNhY3Rpb246IFNXVHJhbnNhY3Rpb25JbnB1dCk6IFNXVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0IGlzSW50ZXJuYWwgPSAhdHJhbnNhY3Rpb24udXJsO1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uSWQgPSBnZXRUcmFuc2FjdGlvbklkKHRyYW5zYWN0aW9uLmNoYWluVHlwZSwgdHJhbnNhY3Rpb24uY2hhaW4sIGlzSW50ZXJuYWwsIGlzV2FsbGV0Q29ubmVjdFJlcXVlc3QodHJhbnNhY3Rpb24uaWQpKTtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi50cmFuc2FjdGlvbixcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgICAgZXJyb3JzOiB0cmFuc2FjdGlvbi5lcnJvcnMgfHwgW10sXG4gICAgICB3YXJuaW5nczogdHJhbnNhY3Rpb24ud2FybmluZ3MgfHwgW10sXG4gICAgICB1cmw6IHRyYW5zYWN0aW9uLnVybCB8fCBFWFRFTlNJT05fUkVRVUVTVF9VUkwsXG4gICAgICBzdGF0dXM6IEV4dHJpbnNpY1N0YXR1cy5RVUVVRUQsXG4gICAgICBpc0ludGVybmFsLFxuICAgICAgaWQ6IHRyYW5zYWN0aW9uSWQsXG4gICAgICBleHRyaW5zaWNIYXNoOiB0cmFuc2FjdGlvbklkXG4gICAgfSBhcyBTV1RyYW5zYWN0aW9uO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGFkZFRyYW5zYWN0aW9uIChpbnB1dFRyYW5zYWN0aW9uOiBTV1RyYW5zYWN0aW9uSW5wdXQpOiBQcm9taXNlPFRyYW5zYWN0aW9uRW1pdHRlcj4ge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IHRoaXMudHJhbnNhY3Rpb25zO1xuICAgIC8vIEZpbGwgdHJhbnNhY3Rpb24gZGVmYXVsdCBpbmZvXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmZpbGxUcmFuc2FjdGlvbkRlZmF1bHRJbmZvKGlucHV0VHJhbnNhY3Rpb24pO1xuXG4gICAgLy8gQWRkIFRyYW5zYWN0aW9uXG4gICAgdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uLmlkXSA9IHRyYW5zYWN0aW9uO1xuICAgIHRoaXMudHJhbnNhY3Rpb25TdWJqZWN0Lm5leHQoeyAuLi50cmFuc2FjdGlvbnMgfSk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICB9XG5cbiAgcHVibGljIGdlbmVyYXRlQmVmb3JlSGFuZGxlUmVzcG9uc2VFcnJvcnMgKGVycm9yczogVHJhbnNhY3Rpb25FcnJvcltdKTogU1dUcmFuc2FjdGlvblJlc3BvbnNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3JzLFxuICAgICAgYWRkaXRpb25hbFZhbGlkYXRvcjogdW5kZWZpbmVkLFxuICAgICAgYWRkcmVzczogJycsXG4gICAgICBjaGFpbjogJycsXG4gICAgICBjaGFpblR5cGU6IENoYWluVHlwZS5TVUJTVFJBVEUsXG4gICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICBleHRyaW5zaWNUeXBlOiBFeHRyaW5zaWNUeXBlLlVOS05PV04sXG4gICAgICB0cmFuc2Zlck5hdGl2ZUFtb3VudDogdW5kZWZpbmVkLFxuICAgICAgdXJsOiB1bmRlZmluZWQsXG4gICAgICB3YXJuaW5nczogW11cbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZVRyYW5zYWN0aW9uICh0cmFuc2FjdGlvbjogU1dUcmFuc2FjdGlvbklucHV0KTogUHJvbWlzZTxTV1RyYW5zYWN0aW9uUmVzcG9uc2U+IHtcbiAgICBjb25zdCB2YWxpZGF0ZWRUcmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMuZ2VuZXJhbFZhbGlkYXRlKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzdG9wQnlFcnJvcnMgPSB2YWxpZGF0ZWRUcmFuc2FjdGlvbi5lcnJvcnMubGVuZ3RoID4gMDtcbiAgICBjb25zdCBzdG9wQnlXYXJuaW5ncyA9IHZhbGlkYXRlZFRyYW5zYWN0aW9uLndhcm5pbmdzLmxlbmd0aCA+IDAgJiYgIXZhbGlkYXRlZFRyYW5zYWN0aW9uLmlnbm9yZVdhcm5pbmdzO1xuXG4gICAgaWYgKHN0b3BCeUVycm9ycyB8fCBzdG9wQnlXYXJuaW5ncykge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgJ3RyYW5zYWN0aW9uJyBpbiB2YWxpZGF0ZWRUcmFuc2FjdGlvbiAmJiBkZWxldGUgdmFsaWRhdGVkVHJhbnNhY3Rpb24udHJhbnNhY3Rpb247XG4gICAgICAnYWRkaXRpb25hbFZhbGlkYXRvcicgaW4gdmFsaWRhdGVkVHJhbnNhY3Rpb24gJiYgZGVsZXRlIHZhbGlkYXRlZFRyYW5zYWN0aW9uLmFkZGl0aW9uYWxWYWxpZGF0b3I7XG4gICAgICAnZXZlbnRzSGFuZGxlcicgaW4gdmFsaWRhdGVkVHJhbnNhY3Rpb24gJiYgZGVsZXRlIHZhbGlkYXRlZFRyYW5zYWN0aW9uLmV2ZW50c0hhbmRsZXI7XG5cbiAgICAgIHJldHVybiB2YWxpZGF0ZWRUcmFuc2FjdGlvbjtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZWRUcmFuc2FjdGlvbi53YXJuaW5ncyA9IFtdO1xuXG4gICAgY29uc3QgZW1pdHRlciA9IGF3YWl0IHRoaXMuYWRkVHJhbnNhY3Rpb24odmFsaWRhdGVkVHJhbnNhY3Rpb24pO1xuXG4gICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgIGVtaXR0ZXIub24oJ3NpZ25lZCcsIChkYXRhOiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UpID0+IHtcbiAgICAgICAgdmFsaWRhdGVkVHJhbnNhY3Rpb24uaWQgPSBkYXRhLmlkO1xuICAgICAgICB2YWxpZGF0ZWRUcmFuc2FjdGlvbi5leHRyaW5zaWNIYXNoID0gZGF0YS5leHRyaW5zaWNIYXNoO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcblxuICAgICAgZW1pdHRlci5vbignZXJyb3InLCAoZGF0YTogVHJhbnNhY3Rpb25FdmVudFJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChkYXRhLmVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmFsaWRhdGVkVHJhbnNhY3Rpb24uZXJyb3JzLnB1c2goLi4uZGF0YS5lcnJvcnMpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgJ3RyYW5zYWN0aW9uJyBpbiB2YWxpZGF0ZWRUcmFuc2FjdGlvbiAmJiBkZWxldGUgdmFsaWRhdGVkVHJhbnNhY3Rpb24udHJhbnNhY3Rpb247XG4gICAgJ2FkZGl0aW9uYWxWYWxpZGF0b3InIGluIHZhbGlkYXRlZFRyYW5zYWN0aW9uICYmIGRlbGV0ZSB2YWxpZGF0ZWRUcmFuc2FjdGlvbi5hZGRpdGlvbmFsVmFsaWRhdG9yO1xuICAgICdldmVudHNIYW5kbGVyJyBpbiB2YWxpZGF0ZWRUcmFuc2FjdGlvbiAmJiBkZWxldGUgdmFsaWRhdGVkVHJhbnNhY3Rpb24uZXZlbnRzSGFuZGxlcjtcblxuICAgIHJldHVybiB2YWxpZGF0ZWRUcmFuc2FjdGlvbjtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZFRyYW5zYWN0aW9uICh0cmFuc2FjdGlvbjogU1dUcmFuc2FjdGlvbik6IFByb21pc2U8VHJhbnNhY3Rpb25FbWl0dGVyPiB7XG4gICAgLy8gU2VuZCBUcmFuc2FjdGlvblxuICAgIGNvbnN0IGVtaXR0ZXIgPSB0cmFuc2FjdGlvbi5jaGFpblR5cGUgPT09ICdzdWJzdHJhdGUnID8gdGhpcy5zaWduQW5kU2VuZFN1YnN0cmF0ZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSA6IChhd2FpdCB0aGlzLnNpZ25BbmRTZW5kRXZtVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pKTtcblxuICAgIGNvbnN0IHsgZXZlbnRzSGFuZGxlciB9ID0gdHJhbnNhY3Rpb247XG5cbiAgICBlbWl0dGVyLm9uKCdzaWduZWQnLCAoZGF0YTogVHJhbnNhY3Rpb25FdmVudFJlc3BvbnNlKSA9PiB7XG4gICAgICB0aGlzLm9uU2lnbmVkKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgZW1pdHRlci5vbignc2VuZCcsIChkYXRhOiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UpID0+IHtcbiAgICAgIHRoaXMub25TZW5kKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgZW1pdHRlci5vbignZXh0cmluc2ljSGFzaCcsIChkYXRhOiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UpID0+IHtcbiAgICAgIHRoaXMub25IYXNUcmFuc2FjdGlvbkhhc2goZGF0YSk7XG4gICAgfSk7XG5cbiAgICBlbWl0dGVyLm9uKCdzdWNjZXNzJywgKGRhdGE6IFRyYW5zYWN0aW9uRXZlbnRSZXNwb25zZSkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVQb3N0UHJvY2Vzc2luZyhkYXRhLmlkKTtcbiAgICAgIHRoaXMub25TdWNjZXNzKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgZW1pdHRlci5vbignZXJyb3InLCAoZGF0YTogVHJhbnNhY3Rpb25FdmVudFJlc3BvbnNlKSA9PiB7XG4gICAgICAvLyB0aGlzLmhhbmRsZVBvc3RQcm9jZXNzaW5nKGRhdGEuaWQpOyAvLyBtaWdodCBlbmFibGUgdGhpcyBsYXRlclxuICAgICAgdGhpcy5vbkZhaWxlZCh7IC4uLmRhdGEsIGVycm9yczogWy4uLmRhdGEuZXJyb3JzLCBuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLklOVEVSTkFMX0VSUk9SKV0gfSk7XG4gICAgfSk7XG5cbiAgICAvLyBUb2RvOiBoYW5kbGUgYW55IGV2ZW50IHdpdGggdHJhbnNhY3Rpb24uZXZlbnRzSGFuZGxlclxuXG4gICAgZXZlbnRzSGFuZGxlcj8uKGVtaXR0ZXIpO1xuXG4gICAgcmV0dXJuIGVtaXR0ZXI7XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZVRyYW5zYWN0aW9uIChpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zW2lkXSkge1xuICAgICAgZGVsZXRlIHRoaXMudHJhbnNhY3Rpb25zW2lkXTtcbiAgICAgIHRoaXMudHJhbnNhY3Rpb25TdWJqZWN0Lm5leHQoeyAuLi50aGlzLnRyYW5zYWN0aW9ucyB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRyYW5zYWN0aW9uIChpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPE9taXQ8U1dUcmFuc2FjdGlvbiwgJ2lkJz4+KTogdm9pZCB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLnRyYW5zYWN0aW9uc1tpZF07XG5cbiAgICBpZiAodHJhbnNhY3Rpb24pIHtcbiAgICAgIHRoaXMudHJhbnNhY3Rpb25zW2lkXSA9IHtcbiAgICAgICAgLi4udHJhbnNhY3Rpb24sXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRUcmFuc2FjdGlvbkxpbmsgKGlkOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5nZXRUcmFuc2FjdGlvbihpZCk7XG4gICAgY29uc3QgY2hhaW5JbmZvID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0Q2hhaW5JbmZvQnlLZXkodHJhbnNhY3Rpb24uY2hhaW4pO1xuXG4gICAgcmV0dXJuIGdldEV4cGxvcmVyTGluayhjaGFpbkluZm8sIHRyYW5zYWN0aW9uLmV4dHJpbnNpY0hhc2gsICd0eCcpO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFuc2FjdGlvblRvSGlzdG9yaWVzIChpZDogc3RyaW5nLCBzdGFydEJsb2NrPzogbnVtYmVyLCBub25jZT86IG51bWJlciwgZXZlbnRMb2dzPzogRXZlbnRSZWNvcmRbXSk6IFRyYW5zYWN0aW9uSGlzdG9yeUl0ZW1bXSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmdldFRyYW5zYWN0aW9uKGlkKTtcbiAgICBjb25zdCBleHRyaW5zaWNUeXBlID0gdHJhbnNhY3Rpb24uZXh0cmluc2ljVHlwZTtcbiAgICBjb25zdCBoaXN0b3J5SXRlbTogVHJhbnNhY3Rpb25IaXN0b3J5SXRlbSA9IHtcbiAgICAgIG9yaWdpbjogJ2FwcCcsXG4gICAgICBjaGFpbjogdHJhbnNhY3Rpb24uY2hhaW4sXG4gICAgICBkaXJlY3Rpb246IFRyYW5zYWN0aW9uRGlyZWN0aW9uLlNFTkQsXG4gICAgICB0eXBlOiB0cmFuc2FjdGlvbi5leHRyaW5zaWNUeXBlLFxuICAgICAgZnJvbTogdHJhbnNhY3Rpb24uYWRkcmVzcyxcbiAgICAgIHRvOiAnJyxcbiAgICAgIGNoYWluVHlwZTogdHJhbnNhY3Rpb24uY2hhaW5UeXBlLFxuICAgICAgYWRkcmVzczogdHJhbnNhY3Rpb24uYWRkcmVzcyxcbiAgICAgIHN0YXR1czogdHJhbnNhY3Rpb24uc3RhdHVzLFxuICAgICAgdHJhbnNhY3Rpb25JZDogdHJhbnNhY3Rpb24uaWQsXG4gICAgICBleHRyaW5zaWNIYXNoOiB0cmFuc2FjdGlvbi5leHRyaW5zaWNIYXNoLFxuICAgICAgdGltZTogdHJhbnNhY3Rpb24uY3JlYXRlZEF0LFxuICAgICAgZmVlOiB0cmFuc2FjdGlvbi5lc3RpbWF0ZUZlZSxcbiAgICAgIGJsb2NrTnVtYmVyOiAwLCAvLyBXaWxsIGJlIGFkZGVkIGluIG5leHQgc3RlcFxuICAgICAgYmxvY2tIYXNoOiAnJywgLy8gV2lsbCBiZSBhZGRlZCBpbiBuZXh0IHN0ZXBcbiAgICAgIG5vbmNlOiBub25jZSA/PyAwLFxuICAgICAgc3RhcnRCbG9jazogc3RhcnRCbG9jayB8fCAwXG4gICAgfTtcblxuICAgIGNvbnN0IGNoYWluSW5mbyA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldENoYWluSW5mb0J5S2V5KHRyYW5zYWN0aW9uLmNoYWluKTtcbiAgICBjb25zdCBuYXRpdmVBc3NldCA9IF9nZXRDaGFpbk5hdGl2ZVRva2VuQmFzaWNJbmZvKGNoYWluSW5mbyk7XG4gICAgY29uc3QgYmFzZU5hdGl2ZUFtb3VudCA9IHsgdmFsdWU6ICcwJywgZGVjaW1hbHM6IG5hdGl2ZUFzc2V0LmRlY2ltYWxzLCBzeW1ib2w6IG5hdGl2ZUFzc2V0LnN5bWJvbCB9O1xuXG4gICAgLy8gRmlsbCBkYXRhIGJ5IGV4dHJpbnNpY1R5cGVcbiAgICBzd2l0Y2ggKGV4dHJpbnNpY1R5cGUpIHtcbiAgICAgIGNhc2UgRXh0cmluc2ljVHlwZS5UUkFOU0ZFUl9CQUxBTkNFOiB7XG4gICAgICAgIGNvbnN0IGlucHV0RGF0YSA9IHBhcnNlVHJhbnNhY3Rpb25EYXRhPEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfVE9LRU4+KHRyYW5zYWN0aW9uLmRhdGEpO1xuXG4gICAgICAgIGhpc3RvcnlJdGVtLnRvID0gaW5wdXREYXRhLnRvO1xuICAgICAgICBjb25zdCBzZW5kaW5nVG9rZW5JbmZvID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0QXNzZXRCeVNsdWcoaW5wdXREYXRhLnRva2VuU2x1Zyk7XG5cbiAgICAgICAgaGlzdG9yeUl0ZW0uYW1vdW50ID0geyB2YWx1ZTogaW5wdXREYXRhLnZhbHVlIHx8ICcwJywgZGVjaW1hbHM6IHNlbmRpbmdUb2tlbkluZm8uZGVjaW1hbHMgfHwgMCwgc3ltYm9sOiBzZW5kaW5nVG9rZW5JbmZvLnN5bWJvbCB9O1xuICAgICAgICBldmVudExvZ3MgJiYgcGFyc2VUcmFuc2ZlckV2ZW50TG9ncyhoaXN0b3J5SXRlbSwgZXZlbnRMb2dzLCB0cmFuc2FjdGlvbi5jaGFpbiwgc2VuZGluZ1Rva2VuSW5mbywgY2hhaW5JbmZvKTtcbiAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRXh0cmluc2ljVHlwZS5UUkFOU0ZFUl9UT0tFTjoge1xuICAgICAgICBjb25zdCBpbnB1dERhdGEgPSBwYXJzZVRyYW5zYWN0aW9uRGF0YTxFeHRyaW5zaWNUeXBlLlRSQU5TRkVSX1RPS0VOPih0cmFuc2FjdGlvbi5kYXRhKTtcblxuICAgICAgICBoaXN0b3J5SXRlbS50byA9IGlucHV0RGF0YS50bztcbiAgICAgICAgY29uc3Qgc2VuZGluZ1Rva2VuSW5mbyA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldEFzc2V0QnlTbHVnKGlucHV0RGF0YS50b2tlblNsdWcpO1xuXG4gICAgICAgIGhpc3RvcnlJdGVtLmFtb3VudCA9IHsgdmFsdWU6IGlucHV0RGF0YS52YWx1ZSB8fCAnMCcsIGRlY2ltYWxzOiBzZW5kaW5nVG9rZW5JbmZvLmRlY2ltYWxzIHx8IDAsIHN5bWJvbDogc2VuZGluZ1Rva2VuSW5mby5zeW1ib2wgfTtcbiAgICAgICAgZXZlbnRMb2dzICYmIHBhcnNlVHJhbnNmZXJFdmVudExvZ3MoaGlzdG9yeUl0ZW0sIGV2ZW50TG9ncywgdHJhbnNhY3Rpb24uY2hhaW4sIHNlbmRpbmdUb2tlbkluZm8sIGNoYWluSW5mbyk7XG4gICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfWENNOiB7XG4gICAgICAgIGNvbnN0IGlucHV0RGF0YSA9IHBhcnNlVHJhbnNhY3Rpb25EYXRhPEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfWENNPih0cmFuc2FjdGlvbi5kYXRhKTtcblxuICAgICAgICBoaXN0b3J5SXRlbS50byA9IGlucHV0RGF0YS50bztcbiAgICAgICAgY29uc3Qgc2VuZGluZ1Rva2VuSW5mbyA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldEFzc2V0QnlTbHVnKGlucHV0RGF0YS50b2tlblNsdWcpO1xuXG4gICAgICAgIGhpc3RvcnlJdGVtLmFtb3VudCA9IHsgdmFsdWU6IGlucHV0RGF0YS52YWx1ZSB8fCAnMCcsIGRlY2ltYWxzOiBzZW5kaW5nVG9rZW5JbmZvLmRlY2ltYWxzIHx8IDAsIHN5bWJvbDogc2VuZGluZ1Rva2VuSW5mby5zeW1ib2wgfTtcblxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGhpc3RvcnlJdGVtLmFkZGl0aW9uYWxJbmZvID0geyBkZXN0aW5hdGlvbkNoYWluOiBpbnB1dERhdGE/LmRlc3RpbmF0aW9uTmV0d29ya0tleSB8fCAnJywgb3JpZ2luYWxDaGFpbjogaW5wdXREYXRhLm9yaWdpbk5ldHdvcmtLZXkgfHwgJycsIGZlZTogdHJhbnNhY3Rpb24uZXN0aW1hdGVGZWUgfTtcbiAgICAgICAgZXZlbnRMb2dzICYmIHBhcnNlWGNtRXZlbnRMb2dzKGhpc3RvcnlJdGVtLCBldmVudExvZ3MsIHRyYW5zYWN0aW9uLmNoYWluLCBzZW5kaW5nVG9rZW5JbmZvLCBjaGFpbkluZm8pO1xuICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFeHRyaW5zaWNUeXBlLlNFTkRfTkZUOiB7XG4gICAgICAgIGNvbnN0IGlucHV0RGF0YSA9IHBhcnNlVHJhbnNhY3Rpb25EYXRhPEV4dHJpbnNpY1R5cGUuU0VORF9ORlQ+KHRyYW5zYWN0aW9uLmRhdGEpO1xuXG4gICAgICAgIGhpc3RvcnlJdGVtLnRvID0gaW5wdXREYXRhLnJlY2lwaWVudEFkZHJlc3M7XG4gICAgICAgIGhpc3RvcnlJdGVtLmFtb3VudCA9IHtcbiAgICAgICAgICBkZWNpbWFsczogMCxcbiAgICAgICAgICBzeW1ib2w6ICdORlQnLFxuICAgICAgICAgIHZhbHVlOiAnMSdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TVEFLSU5HX0JPTkQ6IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHBhcnNlVHJhbnNhY3Rpb25EYXRhPEV4dHJpbnNpY1R5cGUuU1RBS0lOR19CT05EPih0cmFuc2FjdGlvbi5kYXRhKTtcblxuICAgICAgICBoaXN0b3J5SXRlbS5hbW91bnQgPSB7IC4uLmJhc2VOYXRpdmVBbW91bnQsIHZhbHVlOiBkYXRhLmFtb3VudCB8fCAnMCcgfTtcbiAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TVEFLSU5HX0pPSU5fUE9PTDoge1xuICAgICAgICBjb25zdCBkYXRhID0gcGFyc2VUcmFuc2FjdGlvbkRhdGE8RXh0cmluc2ljVHlwZS5TVEFLSU5HX0pPSU5fUE9PTD4odHJhbnNhY3Rpb24uZGF0YSk7XG5cbiAgICAgICAgaGlzdG9yeUl0ZW0uYW1vdW50ID0geyAuLi5iYXNlTmF0aXZlQW1vdW50LCB2YWx1ZTogZGF0YS5hbW91bnQgfHwgJzAnIH07XG4gICAgICAgIGhpc3RvcnlJdGVtLnRvID0gZGF0YS5zZWxlY3RlZFBvb2wubmFtZSB8fCBkYXRhLnNlbGVjdGVkUG9vbC5pZC50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFeHRyaW5zaWNUeXBlLlNUQUtJTkdfVU5CT05EOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHBhcnNlVHJhbnNhY3Rpb25EYXRhPEV4dHJpbnNpY1R5cGUuU1RBS0lOR19VTkJPTkQ+KHRyYW5zYWN0aW9uLmRhdGEpO1xuXG4gICAgICAgICAgaGlzdG9yeUl0ZW0udG8gPSBkYXRhLnZhbGlkYXRvckFkZHJlc3MgfHwgJyc7XG4gICAgICAgICAgaGlzdG9yeUl0ZW0uYW1vdW50ID0geyAuLi5iYXNlTmF0aXZlQW1vdW50LCB2YWx1ZTogZGF0YS5hbW91bnQgfHwgJzAnIH07XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TVEFLSU5HX0xFQVZFX1BPT0w6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gcGFyc2VUcmFuc2FjdGlvbkRhdGE8RXh0cmluc2ljVHlwZS5TVEFLSU5HX0xFQVZFX1BPT0w+KHRyYW5zYWN0aW9uLmRhdGEpO1xuXG4gICAgICAgICAgaGlzdG9yeUl0ZW0udG8gPSBkYXRhLm5vbWluYXRvck1ldGFkYXRhLmFkZHJlc3MgfHwgJyc7XG4gICAgICAgICAgaGlzdG9yeUl0ZW0uYW1vdW50ID0geyAuLi5iYXNlTmF0aXZlQW1vdW50LCB2YWx1ZTogZGF0YS5hbW91bnQgfHwgJzAnIH07XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TVEFLSU5HX0NMQUlNX1JFV0FSRDoge1xuICAgICAgICBjb25zdCBkYXRhID0gcGFyc2VUcmFuc2FjdGlvbkRhdGE8RXh0cmluc2ljVHlwZS5TVEFLSU5HX0NMQUlNX1JFV0FSRD4odHJhbnNhY3Rpb24uZGF0YSk7XG5cbiAgICAgICAgaGlzdG9yeUl0ZW0uYW1vdW50ID0geyAuLi5iYXNlTmF0aXZlQW1vdW50LCB2YWx1ZTogZGF0YS51bmNsYWltZWRSZXdhcmQgfHwgJzAnIH07XG4gICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgRXh0cmluc2ljVHlwZS5TVEFLSU5HX1dJVEhEUkFXOiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBwYXJzZVRyYW5zYWN0aW9uRGF0YTxFeHRyaW5zaWNUeXBlLlNUQUtJTkdfV0lUSERSQVc+KHRyYW5zYWN0aW9uLmRhdGEpO1xuXG4gICAgICAgIGhpc3RvcnlJdGVtLnRvID0gZGF0YS52YWxpZGF0b3JBZGRyZXNzIHx8ICcnO1xuICAgICAgICBoaXN0b3J5SXRlbS5hbW91bnQgPSB7IC4uLmJhc2VOYXRpdmVBbW91bnQsIHZhbHVlOiBkYXRhLnVuc3Rha2luZ0luZm8uY2xhaW1hYmxlIHx8ICcwJyB9O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBFeHRyaW5zaWNUeXBlLlNUQUtJTkdfQ0FOQ0VMX1VOU1RBS0U6IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHBhcnNlVHJhbnNhY3Rpb25EYXRhPEV4dHJpbnNpY1R5cGUuU1RBS0lOR19DQU5DRUxfVU5TVEFLRT4odHJhbnNhY3Rpb24uZGF0YSk7XG5cbiAgICAgICAgaGlzdG9yeUl0ZW0uYW1vdW50ID0geyAuLi5iYXNlTmF0aXZlQW1vdW50LCB2YWx1ZTogZGF0YS5zZWxlY3RlZFVuc3Rha2luZy5jbGFpbWFibGUgfHwgJzAnIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIEV4dHJpbnNpY1R5cGUuRVZNX0VYRUNVVEU6IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICBjb25zdCBkYXRhID0gcGFyc2VUcmFuc2FjdGlvbkRhdGE8RXh0cmluc2ljVHlwZS5FVk1fRVhFQ1VURT4odHJhbnNhY3Rpb24uZGF0YSk7XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgaGlzdG9yeUl0ZW0udG8gPSBkYXRhPy50byB8fCAnJztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgRXh0cmluc2ljVHlwZS5VTktOT1dOOlxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gUmV0dXJuIG9uZSBtb3JlIGhpc3RvcnkgcmVjb3JkIGlmIHRyYW5zYWN0aW9uIHNlbmQgdG8gYWNjb3VudCBpbiB0aGUgd2FsbGV0c1xuICAgICAgY29uc3QgdG9BY2NvdW50ID0gaGlzdG9yeUl0ZW0/LnRvICYmIGtleXJpbmcuZ2V0UGFpcihoaXN0b3J5SXRlbS50byk7XG5cbiAgICAgIGlmICh0b0FjY291bnQpIHtcbiAgICAgICAgY29uc3QgcmVjZWl2ZXJIaXN0b3J5OiBUcmFuc2FjdGlvbkhpc3RvcnlJdGVtID0ge1xuICAgICAgICAgIC4uLmhpc3RvcnlJdGVtLFxuICAgICAgICAgIGFkZHJlc3M6IHRvQWNjb3VudC5hZGRyZXNzLFxuICAgICAgICAgIGRpcmVjdGlvbjogVHJhbnNhY3Rpb25EaXJlY3Rpb24uUkVDRUlWRURcbiAgICAgICAgfTtcblxuICAgICAgICBzd2l0Y2ggKGV4dHJpbnNpY1R5cGUpIHtcbiAgICAgICAgICBjYXNlIEV4dHJpbnNpY1R5cGUuVFJBTlNGRVJfWENNOiB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dERhdGEgPSBwYXJzZVRyYW5zYWN0aW9uRGF0YTxFeHRyaW5zaWNUeXBlLlRSQU5TRkVSX1hDTT4odHJhbnNhY3Rpb24uZGF0YSk7XG5cbiAgICAgICAgICAgIHJlY2VpdmVySGlzdG9yeS5jaGFpbiA9IGlucHV0RGF0YS5kZXN0aW5hdGlvbk5ldHdvcmtLZXk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW2hpc3RvcnlJdGVtLCByZWNlaXZlckhpc3RvcnldO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2hpc3RvcnlJdGVtXTtcbiAgfVxuXG4gIHByaXZhdGUgb25TaWduZWQgKHsgaWQgfTogVHJhbnNhY3Rpb25FdmVudFJlc3BvbnNlKSB7XG4gICAgY29uc29sZS5kZWJ1ZyhgVHJhbnNhY3Rpb24gXCIke2lkfVwiIGlzIHNpZ25lZGApO1xuICB9XG5cbiAgcHJpdmF0ZSBvblNlbmQgKHsgaWQsIG5vbmNlLCBzdGFydEJsb2NrIH06IFRyYW5zYWN0aW9uRXZlbnRSZXNwb25zZSkge1xuICAgIC8vIFVwZGF0ZSB0cmFuc2FjdGlvbiBzdGF0dXNcbiAgICB0aGlzLnVwZGF0ZVRyYW5zYWN0aW9uKGlkLCB7IHN0YXR1czogRXh0cmluc2ljU3RhdHVzLlNVQk1JVFRJTkcgfSk7XG5cbiAgICAvLyBDcmVhdGUgSW5wdXQgSGlzdG9yeSBUcmFuc2FjdGlvbiBIaXN0b3J5XG4gICAgdGhpcy5oaXN0b3J5U2VydmljZS5pbnNlcnRIaXN0b3JpZXModGhpcy50cmFuc2FjdGlvblRvSGlzdG9yaWVzKGlkLCBzdGFydEJsb2NrLCBub25jZSkpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG4gICAgY29uc29sZS5kZWJ1ZyhgVHJhbnNhY3Rpb24gXCIke2lkfVwiIGlzIHNlbnRgKTtcbiAgfVxuXG4gIHByaXZhdGUgb25IYXNUcmFuc2FjdGlvbkhhc2ggKHsgYmxvY2tIYXNoLCBleHRyaW5zaWNIYXNoLCBpZCB9OiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UpIHtcbiAgICAvLyBXcml0ZSBwcm9jZXNzaW5nIHRyYW5zYWN0aW9uIGhpc3RvcnlcbiAgICBjb25zdCB1cGRhdGVEYXRhID0geyBleHRyaW5zaWNIYXNoLCBzdGF0dXM6IEV4dHJpbnNpY1N0YXR1cy5QUk9DRVNTSU5HLCBibG9ja0hhc2g6IGJsb2NrSGFzaCB8fCAnJyB9O1xuXG4gICAgdGhpcy51cGRhdGVUcmFuc2FjdGlvbihpZCwgdXBkYXRlRGF0YSk7XG5cbiAgICAvLyBJbiB0aGlzIGNhc2UgdHJhbnNhY3Rpb24gaWQgaXMgdGhlIHNhbWUgYXMgZXh0cmluc2ljIGhhc2ggYW5kIHdpbGwgY2hhbmdlIGFmdGVyIGJlbG93IHVwZGF0ZVxuICAgIHRoaXMuaGlzdG9yeVNlcnZpY2UudXBkYXRlSGlzdG9yeUJ5RXh0cmluc2ljSGFzaChpZCwgdXBkYXRlRGF0YSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbiAgICBjb25zb2xlLmRlYnVnKGBUcmFuc2FjdGlvbiBcIiR7aWR9XCIgaXMgc3VibWl0dGVkIHdpdGggaGFzaCAke2V4dHJpbnNpY0hhc2ggfHwgJyd9YCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVBvc3RQcm9jZXNzaW5nIChpZDogc3RyaW5nKSB7IC8vIG11c3QgYmUgZG9uZSBhZnRlciBzdWNjZXNzL2ZhaWx1cmUgdG8gbWFrZSBzdXJlIHRoZSB0cmFuc2FjdGlvbiBpcyBmaW5hbGl6ZWRcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZ2V0VHJhbnNhY3Rpb24oaWQpO1xuXG4gICAgaWYgKHRyYW5zYWN0aW9uLmV4dHJpbnNpY1R5cGUgPT09IEV4dHJpbnNpY1R5cGUuU0VORF9ORlQpIHtcbiAgICAgIGNvbnN0IGlucHV0RGF0YSA9IHBhcnNlVHJhbnNhY3Rpb25EYXRhPEV4dHJpbnNpY1R5cGUuU0VORF9ORlQ+KHRyYW5zYWN0aW9uLmRhdGEpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzZW5kZXIgPSBrZXlyaW5nLmdldFBhaXIoaW5wdXREYXRhLnNlbmRlckFkZHJlc3MpO1xuXG4gICAgICAgIHNlbmRlciAmJiB0aGlzLmRhdGFiYXNlU2VydmljZS5oYW5kbGVOZnRUcmFuc2Zlcih0cmFuc2FjdGlvbi5jaGFpbiwgW3NlbmRlci5hZGRyZXNzLCBBTExfQUNDT1VOVF9LRVldLCBpbnB1dERhdGEubmZ0SXRlbSlcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCd0cmFuc2FjdGlvbi50cmFuc2Zlck5mdCcsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlY2lwaWVudCA9IGtleXJpbmcuZ2V0UGFpcihpbnB1dERhdGEucmVjaXBpZW50QWRkcmVzcyk7XG5cbiAgICAgICAgcmVjaXBpZW50ICYmIHRoaXMuZGF0YWJhc2VTZXJ2aWNlLmFkZE5mdChyZWNpcGllbnQuYWRkcmVzcywgeyAuLi5pbnB1dERhdGEubmZ0SXRlbSwgb3duZXI6IHJlY2lwaWVudC5hZGRyZXNzIH0pXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoW0V4dHJpbnNpY1R5cGUuU1RBS0lOR19CT05ELCBFeHRyaW5zaWNUeXBlLlNUQUtJTkdfVU5CT05ELCBFeHRyaW5zaWNUeXBlLlNUQUtJTkdfV0lUSERSQVcsIEV4dHJpbnNpY1R5cGUuU1RBS0lOR19DQU5DRUxfVU5TVEFLRSwgRXh0cmluc2ljVHlwZS5TVEFLSU5HX0NMQUlNX1JFV0FSRCwgRXh0cmluc2ljVHlwZS5TVEFLSU5HX0pPSU5fUE9PTCwgRXh0cmluc2ljVHlwZS5TVEFLSU5HX1BPT0xfV0lUSERSQVcsIEV4dHJpbnNpY1R5cGUuU1RBS0lOR19MRUFWRV9QT09MXS5pbmNsdWRlcyh0cmFuc2FjdGlvbi5leHRyaW5zaWNUeXBlKSkge1xuICAgICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgndHJhbnNhY3Rpb24uc3VibWl0U3Rha2luZycsIHRyYW5zYWN0aW9uLmNoYWluKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uU3VjY2VzcyAoeyBibG9ja0hhc2gsIGJsb2NrTnVtYmVyLCBleHRyaW5zaWNIYXNoLCBpZCB9OiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UpIHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZ2V0VHJhbnNhY3Rpb24oaWQpO1xuXG4gICAgdGhpcy51cGRhdGVUcmFuc2FjdGlvbihpZCwgeyBzdGF0dXM6IEV4dHJpbnNpY1N0YXR1cy5TVUNDRVNTLCBleHRyaW5zaWNIYXNoIH0pO1xuXG4gICAgLy8gV3JpdGUgc3VjY2VzcyB0cmFuc2FjdGlvbiBoaXN0b3J5XG4gICAgdGhpcy5oaXN0b3J5U2VydmljZS51cGRhdGVIaXN0b3J5QnlFeHRyaW5zaWNIYXNoKHRyYW5zYWN0aW9uLmV4dHJpbnNpY0hhc2gsIHtcbiAgICAgIGV4dHJpbnNpY0hhc2gsXG4gICAgICBzdGF0dXM6IEV4dHJpbnNpY1N0YXR1cy5TVUNDRVNTLFxuICAgICAgYmxvY2tOdW1iZXI6IGJsb2NrTnVtYmVyIHx8IDAsXG4gICAgICBibG9ja0hhc2g6IGJsb2NrSGFzaCB8fCAnJ1xuICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG4gICAgY29uc3QgaW5mbyA9IGlzSGV4KGV4dHJpbnNpY0hhc2gpID8gZXh0cmluc2ljSGFzaCA6IGdldEJhc2VUcmFuc2FjdGlvbkluZm8odHJhbnNhY3Rpb24sIHRoaXMuY2hhaW5TZXJ2aWNlLmdldENoYWluSW5mb01hcCgpKTtcblxuICAgIHRoaXMubm90aWZpY2F0aW9uU2VydmljZS5ub3RpZnkoe1xuICAgICAgdHlwZTogTm90aWZpY2F0aW9uVHlwZS5TVUNDRVNTLFxuICAgICAgdGl0bGU6IHQoJ1RyYW5zYWN0aW9uIGNvbXBsZXRlZCcpLFxuICAgICAgbWVzc2FnZTogdCgnVHJhbnNhY3Rpb24ge3tpbmZvfX0gY29tcGxldGVkJywgeyByZXBsYWNlOiB7IGluZm8gfSB9KSxcbiAgICAgIGFjdGlvbjogeyB1cmw6IHRoaXMuZ2V0VHJhbnNhY3Rpb25MaW5rKGlkKSB9LFxuICAgICAgbm90aWZ5VmlhQnJvd3NlcjogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5ldmVudFNlcnZpY2UuZW1pdCgndHJhbnNhY3Rpb24uZG9uZScsIHRyYW5zYWN0aW9uKTtcbiAgfVxuXG4gIHByaXZhdGUgb25GYWlsZWQgKHsgYmxvY2tIYXNoLCBibG9ja051bWJlciwgZXJyb3JzLCBleHRyaW5zaWNIYXNoLCBpZCB9OiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UpIHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZ2V0VHJhbnNhY3Rpb24oaWQpO1xuICAgIGNvbnN0IG5leHRTdGF0dXMgPSBFeHRyaW5zaWNTdGF0dXMuRkFJTDtcblxuICAgIGlmICh0cmFuc2FjdGlvbikge1xuICAgICAgdGhpcy51cGRhdGVUcmFuc2FjdGlvbihpZCwgeyBzdGF0dXM6IG5leHRTdGF0dXMsIGVycm9ycywgZXh0cmluc2ljSGFzaCB9KTtcblxuICAgICAgLy8gV3JpdGUgZmFpbGVkIHRyYW5zYWN0aW9uIGhpc3RvcnlcbiAgICAgIHRoaXMuaGlzdG9yeVNlcnZpY2UudXBkYXRlSGlzdG9yeUJ5RXh0cmluc2ljSGFzaCh0cmFuc2FjdGlvbi5leHRyaW5zaWNIYXNoLCB7XG4gICAgICAgIGV4dHJpbnNpY0hhc2g6IGV4dHJpbnNpY0hhc2ggfHwgdHJhbnNhY3Rpb24uZXh0cmluc2ljSGFzaCxcbiAgICAgICAgc3RhdHVzOiBuZXh0U3RhdHVzLFxuICAgICAgICBibG9ja051bWJlcjogYmxvY2tOdW1iZXIgfHwgMCxcbiAgICAgICAgYmxvY2tIYXNoOiBibG9ja0hhc2ggfHwgJydcbiAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG4gICAgICBjb25zdCBpbmZvID0gaXNIZXgodHJhbnNhY3Rpb24/LmV4dHJpbnNpY0hhc2gpID8gdHJhbnNhY3Rpb24/LmV4dHJpbnNpY0hhc2ggOiBnZXRCYXNlVHJhbnNhY3Rpb25JbmZvKHRyYW5zYWN0aW9uLCB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9NYXAoKSk7XG5cbiAgICAgIHRoaXMubm90aWZpY2F0aW9uU2VydmljZS5ub3RpZnkoe1xuICAgICAgICB0eXBlOiBOb3RpZmljYXRpb25UeXBlLkVSUk9SLFxuICAgICAgICB0aXRsZTogdCgnVHJhbnNhY3Rpb24gZmFpbGVkJyksXG4gICAgICAgIG1lc3NhZ2U6IHQoJ1RyYW5zYWN0aW9uIHt7aW5mb319IGZhaWxlZCcsIHsgcmVwbGFjZTogeyBpbmZvIH0gfSksXG4gICAgICAgIGFjdGlvbjogeyB1cmw6IHRoaXMuZ2V0VHJhbnNhY3Rpb25MaW5rKGlkKSB9LFxuICAgICAgICBub3RpZnlWaWFCcm93c2VyOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0KCd0cmFuc2FjdGlvbi5mYWlsZWQnLCB0cmFuc2FjdGlvbik7XG4gIH1cblxuICBwdWJsaWMgZ2VuZXJhdGVIYXNoUGF5bG9hZCAoY2hhaW46IHN0cmluZywgdHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uQ29uZmlnKTogSGV4U3RyaW5nIHtcbiAgICBjb25zdCBjaGFpbkluZm8gPSB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9CeUtleShjaGFpbik7XG5cbiAgICBjb25zdCB0eE9iamVjdDogVHJhbnNhY3Rpb25MaWtlID0ge1xuICAgICAgbm9uY2U6IHRyYW5zYWN0aW9uLm5vbmNlID8/IDAsXG4gICAgICBnYXNQcmljZTogYWRkSGV4UHJlZml4KGFueU51bWJlclRvQk4odHJhbnNhY3Rpb24uZ2FzUHJpY2UpLnRvU3RyaW5nKDE2KSksXG4gICAgICBnYXNMaW1pdDogYWRkSGV4UHJlZml4KGFueU51bWJlclRvQk4odHJhbnNhY3Rpb24uZ2FzKS50b1N0cmluZygxNikpLFxuICAgICAgdG86IHRyYW5zYWN0aW9uLnRvICE9PSB1bmRlZmluZWQgPyB0cmFuc2FjdGlvbi50byA6ICcnLFxuICAgICAgdmFsdWU6IGFkZEhleFByZWZpeChhbnlOdW1iZXJUb0JOKHRyYW5zYWN0aW9uLnZhbHVlKS50b1N0cmluZygxNikpLFxuICAgICAgZGF0YTogdHJhbnNhY3Rpb24uZGF0YSxcbiAgICAgIGNoYWluSWQ6IF9nZXRFdm1DaGFpbklkKGNoYWluSW5mbylcbiAgICB9O1xuXG4gICAgcmV0dXJuIGV0aGVycy5UcmFuc2FjdGlvbi5mcm9tKHR4T2JqZWN0KS51bnNpZ25lZFNlcmlhbGl6ZWQgYXMgSGV4U3RyaW5nO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzaWduQW5kU2VuZEV2bVRyYW5zYWN0aW9uICh7IGFkZHJlc3MsXG4gICAgY2hhaW4sXG4gICAgaWQsXG4gICAgdHJhbnNhY3Rpb24sXG4gICAgdXJsIH06IFNXVHJhbnNhY3Rpb24pOiBQcm9taXNlPFRyYW5zYWN0aW9uRW1pdHRlcj4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSAodHJhbnNhY3Rpb24gYXMgRXZtU2VuZFRyYW5zYWN0aW9uUmVxdWVzdCk7XG4gICAgY29uc3QgZXZtQXBpID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0RXZtQXBpKGNoYWluKTtcbiAgICBjb25zdCBjaGFpbkluZm8gPSB0aGlzLmNoYWluU2VydmljZS5nZXRDaGFpbkluZm9CeUtleShjaGFpbik7XG5cbiAgICBjb25zdCBhY2NvdW50UGFpciA9IGtleXJpbmcuZ2V0UGFpcihhZGRyZXNzKTtcbiAgICBjb25zdCBhY2NvdW50OiBBY2NvdW50SnNvbiA9IHsgYWRkcmVzcywgLi4uYWNjb3VudFBhaXIubWV0YSB9O1xuXG4gICAgaWYgKCFwYXlsb2FkLmFjY291bnQpIHtcbiAgICAgIHBheWxvYWQuYWNjb3VudCA9IGFjY291bnQ7XG4gICAgfVxuXG4gICAgLy8gQWxsb3cgc2lnbiB0cmFuc2FjdGlvblxuICAgIHBheWxvYWQuY2FuU2lnbiA9IHRydWU7XG5cbiAgICAvLyBGaWxsIGNvbnRyYWN0IGluZm9cbiAgICBpZiAoIXBheWxvYWQucGFyc2VEYXRhKSB7XG4gICAgICBjb25zdCBpc1RvQ29udHJhY3QgPSBhd2FpdCBpc0NvbnRyYWN0QWRkcmVzcyhwYXlsb2FkLnRvIHx8ICcnLCBldm1BcGkpO1xuXG4gICAgICBwYXlsb2FkLmlzVG9Db250cmFjdCA9IGlzVG9Db250cmFjdDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcGF5bG9hZC5wYXJzZURhdGEgPSBpc1RvQ29udHJhY3RcbiAgICAgICAgICA/IHBheWxvYWQuZGF0YVxuICAgICAgICAgICAgPyAoYXdhaXQgcGFyc2VDb250cmFjdElucHV0KHBheWxvYWQuZGF0YSB8fCAnJywgcGF5bG9hZC50byB8fCAnJywgY2hhaW5JbmZvKSkucmVzdWx0XG4gICAgICAgICAgICA6ICcnXG4gICAgICAgICAgOiBwYXlsb2FkLmRhdGEgfHwgJyc7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIHBhcnNlIGNvbnRyYWN0IGlucHV0IGRhdGEnKTtcbiAgICAgICAgcGF5bG9hZC5wYXJzZURhdGEgPSBwYXlsb2FkLmRhdGEgYXMgc3RyaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICgnZGF0YScgaW4gcGF5bG9hZCAmJiBwYXlsb2FkLmRhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVsZXRlIHBheWxvYWQuZGF0YTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdW5pcXVlIG5vbmNlIHRvIGF2b2lkIHRyYW5zYWN0aW9uIGVycm9yc1xuICAgIGlmICghcGF5bG9hZC5ub25jZSkge1xuICAgICAgY29uc3QgZXZtQXBpID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0RXZtQXBpKGNoYWluKTtcblxuICAgICAgcGF5bG9hZC5ub25jZSA9IGF3YWl0IGV2bUFwaS5hcGkuZXRoLmdldFRyYW5zYWN0aW9uQ291bnQoYWRkcmVzcyk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXlsb2FkLmNoYWluSWQpIHtcbiAgICAgIHBheWxvYWQuY2hhaW5JZCA9IGNoYWluSW5mby5ldm1JbmZvPy5ldm1DaGFpbklkID8/IDE7XG4gICAgfVxuXG4gICAgLy8gQXV0b2ZpbGwgZnJvbVxuICAgIGlmICghcGF5bG9hZC5mcm9tKSB7XG4gICAgICBwYXlsb2FkLmZyb20gPSBhZGRyZXNzO1xuICAgIH1cblxuICAgIGNvbnN0IGlzRXh0ZXJuYWwgPSAhIWFjY291bnQuaXNFeHRlcm5hbDtcbiAgICBjb25zdCBpc0luamVjdGVkID0gISFhY2NvdW50LmlzSW5qZWN0ZWQ7XG5cbiAgICAvLyBnZW5lcmF0ZSBoYXNoUGF5bG9hZCBmb3IgRVZNIHRyYW5zYWN0aW9uXG4gICAgcGF5bG9hZC5oYXNoUGF5bG9hZCA9IHRoaXMuZ2VuZXJhdGVIYXNoUGF5bG9hZChjaGFpbiwgcGF5bG9hZCk7XG5cbiAgICBjb25zdCBlbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjxUcmFuc2FjdGlvbkV2ZW50TWFwPigpO1xuXG4gICAgY29uc3QgdHhPYmplY3Q6IFdlYjNUcmFuc2FjdGlvbiA9IHtcbiAgICAgIG5vbmNlOiBwYXlsb2FkLm5vbmNlID8/IDAsXG4gICAgICBmcm9tOiBwYXlsb2FkLmZyb20gYXMgc3RyaW5nLFxuICAgICAgZ2FzUHJpY2U6IGFueU51bWJlclRvQk4ocGF5bG9hZC5nYXNQcmljZSkudG9OdW1iZXIoKSxcbiAgICAgIGdhc0xpbWl0OiBhbnlOdW1iZXJUb0JOKHBheWxvYWQuZ2FzKS50b051bWJlcigpLFxuICAgICAgdG86IHBheWxvYWQudG8gIT09IHVuZGVmaW5lZCA/IHBheWxvYWQudG8gOiAnJyxcbiAgICAgIHZhbHVlOiBhbnlOdW1iZXJUb0JOKHBheWxvYWQudmFsdWUpLnRvTnVtYmVyKCksXG4gICAgICBkYXRhOiBwYXlsb2FkLmRhdGEsXG4gICAgICBjaGFpbklkOiBwYXlsb2FkLmNoYWluSWRcbiAgICB9O1xuXG4gICAgY29uc3QgZXZlbnREYXRhOiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UgPSB7XG4gICAgICBpZCxcbiAgICAgIGVycm9yczogW10sXG4gICAgICB3YXJuaW5nczogW10sXG4gICAgICBleHRyaW5zaWNIYXNoOiBpZFxuICAgIH07XG5cbiAgICBpZiAoaXNJbmplY3RlZCkge1xuICAgICAgdGhpcy5yZXF1ZXN0U2VydmljZS5hZGRDb25maXJtYXRpb24oaWQsIHVybCB8fCBFWFRFTlNJT05fUkVRVUVTVF9VUkwsICdldm1XYXRjaFRyYW5zYWN0aW9uUmVxdWVzdCcsIHBheWxvYWQsIHt9KVxuICAgICAgICAudGhlbihhc3luYyAoeyBpc0FwcHJvdmVkLCBwYXlsb2FkIH0pID0+IHtcbiAgICAgICAgICBpZiAoaXNBcHByb3ZlZCkge1xuICAgICAgICAgICAgaWYgKCFwYXlsb2FkKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLlVOQVVUSE9SSVpFRCwgJ0JhZCBzaWduYXR1cmUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgd2ViM0FwaSA9IHRoaXMuY2hhaW5TZXJ2aWNlLmdldEV2bUFwaShjaGFpbikuYXBpO1xuXG4gICAgICAgICAgICAvLyBFbWl0IHNpZ25lZCBldmVudFxuICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdzaWduZWQnLCBldmVudERhdGEpO1xuXG4gICAgICAgICAgICBldmVudERhdGEubm9uY2UgPSB0eE9iamVjdC5ub25jZTtcbiAgICAgICAgICAgIGV2ZW50RGF0YS5zdGFydEJsb2NrID0gYXdhaXQgd2ViM0FwaS5ldGguZ2V0QmxvY2tOdW1iZXIoKSAtIDM7XG4gICAgICAgICAgICAvLyBBZGQgc3RhcnQgaW5mb1xuICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdzZW5kJywgZXZlbnREYXRhKTsgLy8gVGhpcyBldmVudCBpcyBuZWVkZWQgYWZ0ZXIgc2VuZGluZyB0cmFuc2FjdGlvbiB3aXRoIHF1ZXVlXG5cbiAgICAgICAgICAgIGNvbnN0IHR4SGFzaCA9IHBheWxvYWQ7XG5cbiAgICAgICAgICAgIGV2ZW50RGF0YS5leHRyaW5zaWNIYXNoID0gdHhIYXNoO1xuICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdleHRyaW5zaWNIYXNoJywgZXZlbnREYXRhKTtcblxuICAgICAgICAgICAgdGhpcy53YXRjaFRyYW5zYWN0aW9uU3Vic2NyaWJlc1tpZF0gPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgICAgICAgICAgICAgbGV0IHN1YnNjcmliZTogU3Vic2NyaXB0aW9uPEJsb2NrSGVhZGVyPjtcblxuICAgICAgICAgICAgICBjb25zdCBvbkNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZT8udW5zdWJzY3JpYmU/LigpPy50aGVuKGNvbnNvbGUuZGVidWcpLmNhdGNoKGNvbnNvbGUuZGVidWcpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLndhdGNoVHJhbnNhY3Rpb25TdWJzY3JpYmVzW2lkXTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBjb25zdCBvblN1Y2Nlc3MgPSAocnM6IFRyYW5zYWN0aW9uUmVjZWlwdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChycykge1xuICAgICAgICAgICAgICAgICAgZXZlbnREYXRhLmV4dHJpbnNpY0hhc2ggPSBycy50cmFuc2FjdGlvbkhhc2g7XG4gICAgICAgICAgICAgICAgICBldmVudERhdGEuYmxvY2tIYXNoID0gcnMuYmxvY2tIYXNoO1xuICAgICAgICAgICAgICAgICAgZXZlbnREYXRhLmJsb2NrTnVtYmVyID0gcnMuYmxvY2tOdW1iZXI7XG4gICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ3N1Y2Nlc3MnLCBldmVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBjb25zdCBvbkVycm9yID0gKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgLy8gVE9ETzogQ2hhbmdlIHR5cGUgYW5kIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5lcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLlVOQUJMRV9UT19TRU5ELCBlcnJvci5tZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXZlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGNvbnN0IG9uQ2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgd2ViM0FwaS5ldGguZ2V0VHJhbnNhY3Rpb25SZWNlaXB0KHR4SGFzaCkudGhlbihvblN1Y2Nlc3MpLmNhdGNoKG9uRXJyb3IpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHN1YnNjcmliZSA9IHdlYjNBcGkuZXRoLnN1YnNjcmliZSgnbmV3QmxvY2tIZWFkZXJzJywgb25DaGVjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVUcmFuc2FjdGlvbihpZCk7XG4gICAgICAgICAgICBldmVudERhdGEuZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5VU0VSX1JFSkVDVF9SRVFVRVNUKSk7XG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXZlbnREYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogRXJyb3IpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbW92ZVRyYW5zYWN0aW9uKGlkKTtcbiAgICAgICAgICAvLyBUT0RPOiBDaGFuZ2UgdHlwZVxuICAgICAgICAgIGV2ZW50RGF0YS5lcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLlVOQUJMRV9UT19TSUdOLCBlLm1lc3NhZ2UpKTtcblxuICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCBldmVudERhdGEpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXF1ZXN0U2VydmljZS5hZGRDb25maXJtYXRpb24oaWQsIHVybCB8fCBFWFRFTlNJT05fUkVRVUVTVF9VUkwsICdldm1TZW5kVHJhbnNhY3Rpb25SZXF1ZXN0JywgcGF5bG9hZCwge30pXG4gICAgICAgIC50aGVuKGFzeW5jICh7IGlzQXBwcm92ZWQsIHBheWxvYWQgfSkgPT4ge1xuICAgICAgICAgIGlmIChpc0FwcHJvdmVkKSB7XG4gICAgICAgICAgICBsZXQgc2lnbmVkVHJhbnNhY3Rpb246IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgaWYgKCFwYXlsb2FkKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFdm1Qcm92aWRlckVycm9yKEV2bVByb3ZpZGVyRXJyb3JUeXBlLlVOQVVUSE9SSVpFRCwgdCgnRmFpbGVkIHRvIHNpZ24nKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHdlYjNBcGkgPSB0aGlzLmNoYWluU2VydmljZS5nZXRFdm1BcGkoY2hhaW4pLmFwaTtcblxuICAgICAgICAgICAgaWYgKCFpc0V4dGVybmFsKSB7XG4gICAgICAgICAgICAgIHNpZ25lZFRyYW5zYWN0aW9uID0gcGF5bG9hZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNpZ25lZCA9IG1lcmdlVHJhbnNhY3Rpb25BbmRTaWduYXR1cmUodHhPYmplY3QsIHBheWxvYWQgYXMgYDB4JHtzdHJpbmd9YCk7XG5cbiAgICAgICAgICAgICAgY29uc3QgcmVjb3ZlciA9IHdlYjNBcGkuZXRoLmFjY291bnRzLnJlY292ZXJUcmFuc2FjdGlvbihzaWduZWQpO1xuXG4gICAgICAgICAgICAgIGlmIChyZWNvdmVyLnRvTG93ZXJDYXNlKCkgIT09IGFjY291bnQuYWRkcmVzcy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV2bVByb3ZpZGVyRXJyb3IoRXZtUHJvdmlkZXJFcnJvclR5cGUuVU5BVVRIT1JJWkVELCB0KCdXcm9uZyBzaWduYXR1cmUuIFBsZWFzZSBzaWduIHdpdGggdGhlIGFjY291bnQgeW91IHVzZSBpbiBkQXBwJykpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2lnbmVkVHJhbnNhY3Rpb24gPSBzaWduZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVtaXQgc2lnbmVkIGV2ZW50XG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ3NpZ25lZCcsIGV2ZW50RGF0YSk7XG5cbiAgICAgICAgICAgIC8vIFNlbmQgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVHJhbnNhY3Rpb25UaW1lb3V0KGVtaXR0ZXIsIGV2ZW50RGF0YSk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBzdGFydCBpbmZvXG4gICAgICAgICAgICBldmVudERhdGEubm9uY2UgPSB0eE9iamVjdC5ub25jZTtcbiAgICAgICAgICAgIGV2ZW50RGF0YS5zdGFydEJsb2NrID0gYXdhaXQgd2ViM0FwaS5ldGguZ2V0QmxvY2tOdW1iZXIoKTtcbiAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnc2VuZCcsIGV2ZW50RGF0YSk7IC8vIFRoaXMgZXZlbnQgaXMgbmVlZGVkIGFmdGVyIHNlbmRpbmcgdHJhbnNhY3Rpb24gd2l0aCBxdWV1ZVxuICAgICAgICAgICAgc2lnbmVkVHJhbnNhY3Rpb24gJiYgd2ViM0FwaS5ldGguc2VuZFNpZ25lZFRyYW5zYWN0aW9uKHNpZ25lZFRyYW5zYWN0aW9uKVxuICAgICAgICAgICAgICAub25jZSgndHJhbnNhY3Rpb25IYXNoJywgKGhhc2gpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudERhdGEuZXh0cmluc2ljSGFzaCA9IGhhc2g7XG4gICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdleHRyaW5zaWNIYXNoJywgZXZlbnREYXRhKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLm9uY2UoJ3JlY2VpcHQnLCAocnMpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudERhdGEuZXh0cmluc2ljSGFzaCA9IHJzLnRyYW5zYWN0aW9uSGFzaDtcbiAgICAgICAgICAgICAgICBldmVudERhdGEuYmxvY2tIYXNoID0gcnMuYmxvY2tIYXNoO1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5ibG9ja051bWJlciA9IHJzLmJsb2NrTnVtYmVyO1xuICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnc3VjY2VzcycsIGV2ZW50RGF0YSk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5vbmNlKCdlcnJvcicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLmVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuU0VORF9UUkFOU0FDVElPTl9GQUlMRUQsIHQoZS5tZXNzYWdlKSkpO1xuICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCBldmVudERhdGEpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuY2F0Y2goKGU6IEVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLmVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuVU5BQkxFX1RPX1NFTkQsIHQoZS5tZXNzYWdlKSkpO1xuICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCBldmVudERhdGEpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVUcmFuc2FjdGlvbihpZCk7XG4gICAgICAgICAgICBldmVudERhdGEuZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5VU0VSX1JFSkVDVF9SRVFVRVNUKSk7XG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXZlbnREYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogRXJyb3IpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbW92ZVRyYW5zYWN0aW9uKGlkKTtcbiAgICAgICAgICBldmVudERhdGEuZXJyb3JzLnB1c2gobmV3IFRyYW5zYWN0aW9uRXJyb3IoQmFzaWNUeEVycm9yVHlwZS5VTkFCTEVfVE9fU0lHTiwgdChlLm1lc3NhZ2UpKSk7XG5cbiAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXZlbnREYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVtaXR0ZXI7XG4gIH1cblxuICBwcml2YXRlIHNpZ25BbmRTZW5kU3Vic3RyYXRlVHJhbnNhY3Rpb24gKHsgYWRkcmVzcywgY2hhaW4sIGlkLCB0cmFuc2FjdGlvbiwgdXJsIH06IFNXVHJhbnNhY3Rpb24pOiBUcmFuc2FjdGlvbkVtaXR0ZXIge1xuICAgIGNvbnN0IGVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPFRyYW5zYWN0aW9uRXZlbnRNYXA+KCk7XG4gICAgY29uc3QgZXZlbnREYXRhOiBUcmFuc2FjdGlvbkV2ZW50UmVzcG9uc2UgPSB7XG4gICAgICBpZCxcbiAgICAgIGVycm9yczogW10sXG4gICAgICB3YXJuaW5nczogW10sXG4gICAgICBleHRyaW5zaWNIYXNoOiBpZFxuICAgIH07XG5cbiAgICAodHJhbnNhY3Rpb24gYXMgU3VibWl0dGFibGVFeHRyaW5zaWMpLnNpZ25Bc3luYyhhZGRyZXNzLCB7XG4gICAgICBzaWduZXI6IHtcbiAgICAgICAgc2lnblBheWxvYWQ6IGFzeW5jIChwYXlsb2FkOiBTaWduZXJQYXlsb2FkSlNPTikgPT4ge1xuICAgICAgICAgIGNvbnN0IHNpZ25pbmcgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZXJ2aWNlLnNpZ25JbnRlcm5hbFRyYW5zYWN0aW9uKGlkLCBhZGRyZXNzLCB1cmwgfHwgRVhURU5TSU9OX1JFUVVFU1RfVVJMLCBwYXlsb2FkKTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogKG5ldyBEYXRlKCkpLmdldFRpbWUoKSxcbiAgICAgICAgICAgIHNpZ25hdHVyZTogc2lnbmluZy5zaWduYXR1cmVcbiAgICAgICAgICB9IGFzIFNpZ25lclJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfSBhcyBTaWduZXJcbiAgICB9KS50aGVuKGFzeW5jIChycykgPT4ge1xuICAgICAgLy8gRW1pdCBzaWduZWQgZXZlbnRcbiAgICAgIGVtaXR0ZXIuZW1pdCgnc2lnbmVkJywgZXZlbnREYXRhKTtcblxuICAgICAgLy8gU2VuZCB0cmFuc2FjdGlvblxuICAgICAgY29uc3QgYXBpID0gdGhpcy5jaGFpblNlcnZpY2UuZ2V0U3Vic3RyYXRlQXBpKGNoYWluKTtcblxuICAgICAgZXZlbnREYXRhLm5vbmNlID0gcnMubm9uY2UudG9OdW1iZXIoKTtcbiAgICAgIGV2ZW50RGF0YS5zdGFydEJsb2NrID0gKGF3YWl0IGFwaS5hcGkucXVlcnkuc3lzdGVtLm51bWJlcigpKS50b1ByaW1pdGl2ZSgpIGFzIG51bWJlcjtcbiAgICAgIHRoaXMuaGFuZGxlVHJhbnNhY3Rpb25UaW1lb3V0KGVtaXR0ZXIsIGV2ZW50RGF0YSk7XG4gICAgICBlbWl0dGVyLmVtaXQoJ3NlbmQnLCBldmVudERhdGEpOyAvLyBUaGlzIGV2ZW50IGlzIG5lZWRlZCBhZnRlciBzZW5kaW5nIHRyYW5zYWN0aW9uIHdpdGggcXVldWVcblxuICAgICAgcnMuc2VuZCgodHhTdGF0ZSkgPT4ge1xuICAgICAgICAvLyBoYW5kbGUgZXZlbnRzLCBsb2dzLCBoaXN0b3J5XG4gICAgICAgIGlmICghdHhTdGF0ZSB8fCAhdHhTdGF0ZS5zdGF0dXMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHhTdGF0ZS5zdGF0dXMuaXNJbkJsb2NrKSB7XG4gICAgICAgICAgZXZlbnREYXRhLmV2ZW50TG9ncyA9IHR4U3RhdGUuZXZlbnRzO1xuXG4gICAgICAgICAgaWYgKCFldmVudERhdGEuZXh0cmluc2ljSGFzaCB8fCBldmVudERhdGEuZXh0cmluc2ljSGFzaCA9PT0gJycgfHwgIWlzSGV4KGV2ZW50RGF0YS5leHRyaW5zaWNIYXNoKSkge1xuICAgICAgICAgICAgZXZlbnREYXRhLmV4dHJpbnNpY0hhc2ggPSB0eFN0YXRlLnR4SGFzaC50b0hleCgpO1xuICAgICAgICAgICAgZXZlbnREYXRhLmJsb2NrSGFzaCA9IHR4U3RhdGUuc3RhdHVzLmFzSW5CbG9jay50b0hleCgpO1xuICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdleHRyaW5zaWNIYXNoJywgZXZlbnREYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHhTdGF0ZS5zdGF0dXMuaXNGaW5hbGl6ZWQpIHtcbiAgICAgICAgICBldmVudERhdGEuZXh0cmluc2ljSGFzaCA9IHR4U3RhdGUudHhIYXNoLnRvSGV4KCk7XG4gICAgICAgICAgZXZlbnREYXRhLmV2ZW50TG9ncyA9IHR4U3RhdGUuZXZlbnRzO1xuICAgICAgICAgIC8vIFRPRE86IHB1c2ggYmxvY2sgaGFzaCBhbmQgYmxvY2sgbnVtYmVyIGludG8gZXZlbnREYXRhXG4gICAgICAgICAgdHhTdGF0ZS5ldmVudHNcbiAgICAgICAgICAgIC5maWx0ZXIoKHsgZXZlbnQ6IHsgc2VjdGlvbiB9IH0pID0+IHNlY3Rpb24gPT09ICdzeXN0ZW0nKVxuICAgICAgICAgICAgLmZvckVhY2goKHsgZXZlbnQ6IHsgbWV0aG9kLCBkYXRhOiBbZXJyb3JdIH0gfSk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSAnRXh0cmluc2ljRmFpbGVkJykge1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5lcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLlNFTkRfVFJBTlNBQ1RJT05fRkFJTEVELCBlcnJvci50b1N0cmluZygpKSk7XG4gICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdlcnJvcicsIGV2ZW50RGF0YSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSAnRXh0cmluc2ljU3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ3N1Y2Nlc3MnLCBldmVudERhdGEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goKGU6IEVycm9yKSA9PiB7XG4gICAgICAgIGV2ZW50RGF0YS5lcnJvcnMucHVzaChuZXcgVHJhbnNhY3Rpb25FcnJvcihCYXNpY1R4RXJyb3JUeXBlLlNFTkRfVFJBTlNBQ1RJT05fRkFJTEVELCBlLm1lc3NhZ2UpKTtcbiAgICAgICAgZW1pdHRlci5lbWl0KCdlcnJvcicsIGV2ZW50RGF0YSk7XG4gICAgICB9KTtcbiAgICB9KS5jYXRjaCgoZTogRXJyb3IpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlVHJhbnNhY3Rpb24oaWQpO1xuICAgICAgZXZlbnREYXRhLmVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuVU5BQkxFX1RPX1NJR04sIGUubWVzc2FnZSkpO1xuICAgICAgZW1pdHRlci5lbWl0KCdlcnJvcicsIGV2ZW50RGF0YSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZW1pdHRlcjtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlVHJhbnNhY3Rpb25UaW1lb3V0IChlbWl0dGVyOiBFdmVudEVtaXR0ZXI8VHJhbnNhY3Rpb25FdmVudE1hcD4sIGV2ZW50RGF0YTogVHJhbnNhY3Rpb25FdmVudFJlc3BvbnNlKTogdm9pZCB7XG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmdldFRyYW5zYWN0aW9uKGV2ZW50RGF0YS5pZCk7XG5cbiAgICAgIGlmICh0cmFuc2FjdGlvbi5zdGF0dXMgIT09IEV4dHJpbnNpY1N0YXR1cy5TVUNDRVNTICYmIHRyYW5zYWN0aW9uLnN0YXR1cyAhPT0gRXh0cmluc2ljU3RhdHVzLkZBSUwpIHtcbiAgICAgICAgZXZlbnREYXRhLmVycm9ycy5wdXNoKG5ldyBUcmFuc2FjdGlvbkVycm9yKEJhc2ljVHhFcnJvclR5cGUuVElNRU9VVCwgdCgnVHJhbnNhY3Rpb24gdGltZW91dCcpKSk7XG4gICAgICAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCBldmVudERhdGEpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9XG4gICAgfSwgVFJBTlNBQ1RJT05fVElNRU9VVCk7XG5cbiAgICBlbWl0dGVyLm9uY2UoJ3N1Y2Nlc3MnLCAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgfSk7XG5cbiAgICBlbWl0dGVyLm9uY2UoJ2Vycm9yJywgKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHJlc2V0V2FsbGV0ICgpOiB2b2lkIHtcbiAgICB0aGlzLnRyYW5zYWN0aW9uU3ViamVjdC5uZXh0KHt9KTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IGZvcm1hdEpzb25ScGNFcnJvciwgZm9ybWF0SnNvblJwY1Jlc3VsdCB9IGZyb20gJ0Bqc29uLXJwYy10b29scy91dGlscyc7XG5pbXBvcnQgS29uaVN0YXRlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9iYWNrZ3JvdW5kL2hhbmRsZXJzL1N0YXRlJztcbmltcG9ydCBXYWxsZXRDb25uZWN0U2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3dhbGxldC1jb25uZWN0LXNlcnZpY2UnO1xuaW1wb3J0IHsgZ2V0RWlwMTU1TWVzc2FnZUFkZHJlc3MsIGdldFdDSWQsIHBhcnNlUmVxdWVzdFBhcmFtcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvd2FsbGV0LWNvbm5lY3Qtc2VydmljZS9oZWxwZXJzJztcbmltcG9ydCB7IEVJUDE1NV9TSUdOSU5HX01FVEhPRFMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3dhbGxldC1jb25uZWN0LXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgaXNTYW1lQWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IHsgU2lnbkNsaWVudFR5cGVzIH0gZnJvbSAnQHdhbGxldGNvbm5lY3QvdHlwZXMnO1xuaW1wb3J0IHsgZ2V0U2RrRXJyb3IgfSBmcm9tICdAd2FsbGV0Y29ubmVjdC91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVpcDE1NVJlcXVlc3RIYW5kbGVyIHtcbiAgcmVhZG9ubHkgI3dhbGxldENvbm5lY3RTZXJ2aWNlOiBXYWxsZXRDb25uZWN0U2VydmljZTtcbiAgcmVhZG9ubHkgI2tvbmlTdGF0ZTogS29uaVN0YXRlO1xuXG4gIGNvbnN0cnVjdG9yIChrb25pU3RhdGU6IEtvbmlTdGF0ZSwgd2FsbGV0Q29ubmVjdFNlcnZpY2U6IFdhbGxldENvbm5lY3RTZXJ2aWNlKSB7XG4gICAgdGhpcy4ja29uaVN0YXRlID0ga29uaVN0YXRlO1xuICAgIHRoaXMuI3dhbGxldENvbm5lY3RTZXJ2aWNlID0gd2FsbGV0Q29ubmVjdFNlcnZpY2U7XG4gIH1cblxuICAjY2hlY2tBY2NvdW50IChhZGRyZXNzOiBzdHJpbmcsIGFjY291bnRzOiBzdHJpbmdbXSkge1xuICAgIGlmICghYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gaXNTYW1lQWRkcmVzcyhhY2NvdW50LCBhZGRyZXNzKSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihnZXRTZGtFcnJvcignVU5TVVBQT1JURURfQUNDT1VOVFMnKS5tZXNzYWdlICsgJyAnICsgYWRkcmVzcyk7XG4gICAgfVxuICB9XG5cbiAgI2hhbmRsZUVycm9yICh0b3BpYzogc3RyaW5nLCBpZDogbnVtYmVyLCBlOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgbGV0IG1lc3NhZ2UgPSAoZSBhcyBFcnJvcikubWVzc2FnZTtcblxuICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdVc2VyIFJlamVjdGVkIFJlcXVlc3QnKSkge1xuICAgICAgbWVzc2FnZSA9IGdldFNka0Vycm9yKCdVU0VSX1JFSkVDVEVEJykubWVzc2FnZTtcbiAgICB9XG5cbiAgICB0aGlzLiN3YWxsZXRDb25uZWN0U2VydmljZS5yZXNwb25zZVJlcXVlc3Qoe1xuICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgcmVzcG9uc2U6IGZvcm1hdEpzb25ScGNFcnJvcihpZCwgbWVzc2FnZSlcbiAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVSZXF1ZXN0IChyZXF1ZXN0RXZlbnQ6IFNpZ25DbGllbnRUeXBlcy5FdmVudEFyZ3VtZW50c1snc2Vzc2lvbl9yZXF1ZXN0J10pIHtcbiAgICBjb25zdCB7IGlkLCBwYXJhbXMsIHRvcGljIH0gPSByZXF1ZXN0RXZlbnQ7XG4gICAgY29uc3QgeyBjaGFpbklkOiBfY2hhaW5JZCwgcmVxdWVzdCB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcXVlc3QubWV0aG9kIGFzIEVJUDE1NV9TSUdOSU5HX01FVEhPRFM7XG4gICAgY29uc3QgcmVxdWVzdFNlc3Npb24gPSB0aGlzLiN3YWxsZXRDb25uZWN0U2VydmljZS5nZXRTZXNzaW9uKHRvcGljKTtcblxuICAgIGNvbnN0IHVybCA9IHJlcXVlc3RTZXNzaW9uLnBlZXIubWV0YWRhdGEudXJsO1xuICAgIGNvbnN0IHNlc3Npb25BY2NvdW50cyA9IHJlcXVlc3RTZXNzaW9uLm5hbWVzcGFjZXMuZWlwMTU1LmFjY291bnRzLm1hcCgoYWNjb3VudCkgPT4gYWNjb3VudC5zcGxpdCgnOicpWzJdKTtcblxuICAgIGlmIChbXG4gICAgICBFSVAxNTVfU0lHTklOR19NRVRIT0RTLlBFUlNPTkFMX1NJR04sXG4gICAgICBFSVAxNTVfU0lHTklOR19NRVRIT0RTLkVUSF9TSUdOLFxuICAgICAgRUlQMTU1X1NJR05JTkdfTUVUSE9EUy5FVEhfU0lHTl9UWVBFRF9EQVRBLFxuICAgICAgRUlQMTU1X1NJR05JTkdfTUVUSE9EUy5FVEhfU0lHTl9UWVBFRF9EQVRBX1YzLFxuICAgICAgRUlQMTU1X1NJR05JTkdfTUVUSE9EUy5FVEhfU0lHTl9UWVBFRF9EQVRBX1Y0XG4gICAgXS5pbmNsdWRlcyhtZXRob2QpKSB7XG4gICAgICBjb25zdCBhZGRyZXNzID0gZ2V0RWlwMTU1TWVzc2FnZUFkZHJlc3MobWV0aG9kLCByZXF1ZXN0LnBhcmFtcyk7XG5cbiAgICAgIHRoaXMuI2NoZWNrQWNjb3VudChhZGRyZXNzLCBzZXNzaW9uQWNjb3VudHMpO1xuXG4gICAgICB0aGlzLiNrb25pU3RhdGUuZXZtU2lnbihnZXRXQ0lkKGlkKSwgdXJsLCBtZXRob2QgPT09IEVJUDE1NV9TSUdOSU5HX01FVEhPRFMuRVRIX1NJR05fVFlQRURfREFUQSA/IEVJUDE1NV9TSUdOSU5HX01FVEhPRFMuRVRIX1NJR05fVFlQRURfREFUQV9WNCA6IG1ldGhvZCwgcmVxdWVzdC5wYXJhbXMsIHNlc3Npb25BY2NvdW50cylcbiAgICAgICAgLnRoZW4oYXN5bmMgKHNpZ25hdHVyZSkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuI3dhbGxldENvbm5lY3RTZXJ2aWNlLnJlc3BvbnNlUmVxdWVzdCh7XG4gICAgICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgICAgICByZXNwb25zZTogZm9ybWF0SnNvblJwY1Jlc3VsdChpZCwgc2lnbmF0dXJlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICB0aGlzLiNoYW5kbGVFcnJvcih0b3BpYywgaWQsIGUpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gRUlQMTU1X1NJR05JTkdfTUVUSE9EUy5FVEhfU0VORF9UUkFOU0FDVElPTikge1xuICAgICAgY29uc3QgW3R4XSA9IHBhcnNlUmVxdWVzdFBhcmFtczxFSVAxNTVfU0lHTklOR19NRVRIT0RTLkVUSF9TRU5EX1RSQU5TQUNUSU9OPihyZXF1ZXN0LnBhcmFtcyk7XG5cbiAgICAgIGNvbnN0IGFkZHJlc3MgPSB0eC5mcm9tO1xuXG4gICAgICB0aGlzLiNjaGVja0FjY291bnQoYWRkcmVzcywgc2Vzc2lvbkFjY291bnRzKTtcblxuICAgICAgY29uc3QgY2hhaW5JZCA9IHBhcnNlSW50KF9jaGFpbklkLnNwbGl0KCc6JylbMV0pO1xuXG4gICAgICBjb25zdCBbbmV0d29ya0tleSwgY2hhaW5JbmZvXSA9IHRoaXMuI2tvbmlTdGF0ZS5maW5kTmV0d29ya0tleUJ5Q2hhaW5JZChjaGFpbklkKTtcblxuICAgICAgaWYgKCFuZXR3b3JrS2V5IHx8ICFjaGFpbkluZm8pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGdldFNka0Vycm9yKCdVTlNVUFBPUlRFRF9DSEFJTlMnKS5tZXNzYWdlICsgJyAnICsgYWRkcmVzcyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoYWluU3RhdGUgPSB0aGlzLiNrb25pU3RhdGUuZ2V0Q2hhaW5TdGF0ZUJ5S2V5KG5ldHdvcmtLZXkpO1xuXG4gICAgICBjb25zdCBjcmVhdGVSZXF1ZXN0ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLiNrb25pU3RhdGUuZXZtU2VuZFRyYW5zYWN0aW9uKGdldFdDSWQoaWQpLCB1cmwsIG5ldHdvcmtLZXksIHNlc3Npb25BY2NvdW50cywgdHgpXG4gICAgICAgICAgLnRoZW4oYXN5bmMgKHNpZ25hdHVyZSkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jd2FsbGV0Q29ubmVjdFNlcnZpY2UucmVzcG9uc2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICAgICAgICByZXNwb25zZTogZm9ybWF0SnNvblJwY1Jlc3VsdChpZCwgc2lnbmF0dXJlKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2hhbmRsZUVycm9yKHRvcGljLCBpZCwgZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoIWNoYWluU3RhdGUuYWN0aXZlKSB7XG4gICAgICAgIHRoaXMuI2tvbmlTdGF0ZS5jaGFpblNlcnZpY2UuZW5hYmxlQ2hhaW4obmV0d29ya0tleSkudGhlbihjcmVhdGVSZXF1ZXN0KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGdldFNka0Vycm9yKCdVU0VSX1JFSkVDVEVEJykubWVzc2FnZSArICcgQ2FuIG5vdCBhY3RpdmUgY2hhaW46ICcgKyBjaGFpbkluZm8ubmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3JlYXRlUmVxdWVzdCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcihnZXRTZGtFcnJvcignSU5WQUxJRF9NRVRIT0QnKS5tZXNzYWdlICsgJyAnICsgbWV0aG9kKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBmb3JtYXRKc29uUnBjRXJyb3IsIGZvcm1hdEpzb25ScGNSZXN1bHQgfSBmcm9tICdAanNvbi1ycGMtdG9vbHMvdXRpbHMnO1xuaW1wb3J0IFJlcXVlc3RCeXRlc1NpZ24gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL1JlcXVlc3RCeXRlc1NpZ24nO1xuaW1wb3J0IFJlcXVlc3RFeHRyaW5zaWNTaWduIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC9SZXF1ZXN0RXh0cmluc2ljU2lnbic7XG5pbXBvcnQgUmVxdWVzdFNlcnZpY2UgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy9yZXF1ZXN0LXNlcnZpY2UnO1xuaW1wb3J0IFdhbGxldENvbm5lY3RTZXJ2aWNlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvd2FsbGV0LWNvbm5lY3Qtc2VydmljZSc7XG5pbXBvcnQgeyBnZXRXQ0lkLCBwYXJzZVJlcXVlc3RQYXJhbXMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3dhbGxldC1jb25uZWN0LXNlcnZpY2UvaGVscGVycyc7XG5pbXBvcnQgeyBQT0xLQURPVF9TSUdOSU5HX01FVEhPRFMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3dhbGxldC1jb25uZWN0LXNlcnZpY2UvdHlwZXMnO1xuaW1wb3J0IHsgaXNTYW1lQWRkcmVzcyB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMnO1xuaW1wb3J0IGtleXJpbmcgZnJvbSAnQHN1YndhbGxldC91aS1rZXlyaW5nJztcbmltcG9ydCB7IFNpZ25DbGllbnRUeXBlcyB9IGZyb20gJ0B3YWxsZXRjb25uZWN0L3R5cGVzJztcbmltcG9ydCB7IGdldFNka0Vycm9yIH0gZnJvbSAnQHdhbGxldGNvbm5lY3QvdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2xrYWRvdFJlcXVlc3RIYW5kbGVyIHtcbiAgcmVhZG9ubHkgI3dhbGxldENvbm5lY3RTZXJ2aWNlOiBXYWxsZXRDb25uZWN0U2VydmljZTtcbiAgcmVhZG9ubHkgI3JlcXVlc3RTZXJ2aWNlOiBSZXF1ZXN0U2VydmljZTtcblxuICBjb25zdHJ1Y3RvciAod2FsbGV0Q29ubmVjdFNlcnZpY2U6IFdhbGxldENvbm5lY3RTZXJ2aWNlLCByZXF1ZXN0U2VydmljZTogUmVxdWVzdFNlcnZpY2UpIHtcbiAgICB0aGlzLiN3YWxsZXRDb25uZWN0U2VydmljZSA9IHdhbGxldENvbm5lY3RTZXJ2aWNlO1xuICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlID0gcmVxdWVzdFNlcnZpY2U7XG4gIH1cblxuICAjY2hlY2tBY2NvdW50IChhZGRyZXNzOiBzdHJpbmcsIGFjY291bnRzOiBzdHJpbmdbXSkge1xuICAgIGlmICghYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gaXNTYW1lQWRkcmVzcyhhY2NvdW50LCBhZGRyZXNzKSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihnZXRTZGtFcnJvcignVU5TVVBQT1JURURfQUNDT1VOVFMnKS5tZXNzYWdlICsgJyAnICsgYWRkcmVzcyk7XG4gICAgfVxuICB9XG5cbiAgI2hhbmRsZUVycm9yICh0b3BpYzogc3RyaW5nLCBpZDogbnVtYmVyLCBlOiB1bmtub3duKSB7XG4gICAgbGV0IG1lc3NhZ2UgPSAoZSBhcyBFcnJvcikubWVzc2FnZTtcblxuICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdVc2VyIFJlamVjdGVkIFJlcXVlc3QnKSkge1xuICAgICAgbWVzc2FnZSA9IGdldFNka0Vycm9yKCdVU0VSX1JFSkVDVEVEJykubWVzc2FnZTtcbiAgICB9XG5cbiAgICB0aGlzLiN3YWxsZXRDb25uZWN0U2VydmljZS5yZXNwb25zZVJlcXVlc3Qoe1xuICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgcmVzcG9uc2U6IGZvcm1hdEpzb25ScGNFcnJvcihpZCwgbWVzc2FnZSlcbiAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVSZXF1ZXN0IChyZXF1ZXN0RXZlbnQ6IFNpZ25DbGllbnRUeXBlcy5FdmVudEFyZ3VtZW50c1snc2Vzc2lvbl9yZXF1ZXN0J10pIHtcbiAgICBjb25zdCB7IGlkLCBwYXJhbXMsIHRvcGljIH0gPSByZXF1ZXN0RXZlbnQ7XG4gICAgY29uc3QgeyByZXF1ZXN0IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxdWVzdC5tZXRob2QgYXMgUE9MS0FET1RfU0lHTklOR19NRVRIT0RTO1xuICAgIGNvbnN0IHJlcXVlc3RTZXNzaW9uID0gdGhpcy4jd2FsbGV0Q29ubmVjdFNlcnZpY2UuZ2V0U2Vzc2lvbih0b3BpYyk7XG5cbiAgICBjb25zdCB1cmwgPSByZXF1ZXN0U2Vzc2lvbi5wZWVyLm1ldGFkYXRhLnVybDtcbiAgICBjb25zdCBzZXNzaW9uQWNjb3VudHMgPSByZXF1ZXN0U2Vzc2lvbi5uYW1lc3BhY2VzLnBvbGthZG90LmFjY291bnRzLm1hcCgoYWNjb3VudCkgPT4gYWNjb3VudC5zcGxpdCgnOicpWzJdKTtcblxuICAgIGlmIChtZXRob2QgPT09IFBPTEtBRE9UX1NJR05JTkdfTUVUSE9EUy5QT0xLQURPVF9TSUdOX01FU1NBR0UpIHtcbiAgICAgIGNvbnN0IHBhcmFtID0gcGFyc2VSZXF1ZXN0UGFyYW1zPFBPTEtBRE9UX1NJR05JTkdfTUVUSE9EUy5QT0xLQURPVF9TSUdOX01FU1NBR0U+KHJlcXVlc3QucGFyYW1zKTtcblxuICAgICAgdGhpcy4jY2hlY2tBY2NvdW50KHBhcmFtLmFkZHJlc3MsIHNlc3Npb25BY2NvdW50cyk7XG5cbiAgICAgIGNvbnN0IHBhaXIgPSBrZXlyaW5nLmdldFBhaXIocGFyYW0uYWRkcmVzcyk7XG4gICAgICBjb25zdCBhZGRyZXNzID0gcGFpci5hZGRyZXNzO1xuXG4gICAgICB0aGlzLiNyZXF1ZXN0U2VydmljZVxuICAgICAgICAuc2lnbih1cmwsIG5ldyBSZXF1ZXN0Qnl0ZXNTaWduKHsgYWRkcmVzczogYWRkcmVzcywgZGF0YTogcGFyYW0ubWVzc2FnZSwgdHlwZTogJ2J5dGVzJyB9KSwgeyBhZGRyZXNzLCAuLi5wYWlyLm1ldGEgfSwgZ2V0V0NJZChpZCkpXG4gICAgICAgIC50aGVuKGFzeW5jICh7IHNpZ25hdHVyZSB9KSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy4jd2FsbGV0Q29ubmVjdFNlcnZpY2UucmVzcG9uc2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgICAgIHJlc3BvbnNlOiBmb3JtYXRKc29uUnBjUmVzdWx0KGlkLCB7IHNpZ25hdHVyZSB9KVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICB0aGlzLiNoYW5kbGVFcnJvcih0b3BpYywgaWQsIGUpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gUE9MS0FET1RfU0lHTklOR19NRVRIT0RTLlBPTEtBRE9UX1NJR05fVFJBTlNBQ1RJT04pIHtcbiAgICAgIGNvbnN0IHBhcmFtID0gcGFyc2VSZXF1ZXN0UGFyYW1zPFBPTEtBRE9UX1NJR05JTkdfTUVUSE9EUy5QT0xLQURPVF9TSUdOX1RSQU5TQUNUSU9OPihyZXF1ZXN0LnBhcmFtcyk7XG5cbiAgICAgIHRoaXMuI2NoZWNrQWNjb3VudChwYXJhbS5hZGRyZXNzLCBzZXNzaW9uQWNjb3VudHMpO1xuXG4gICAgICBjb25zdCBwYWlyID0ga2V5cmluZy5nZXRQYWlyKHBhcmFtLmFkZHJlc3MpO1xuICAgICAgY29uc3QgYWRkcmVzcyA9IHBhaXIuYWRkcmVzcztcblxuICAgICAgdGhpcy4jcmVxdWVzdFNlcnZpY2VcbiAgICAgICAgLnNpZ24odXJsLCBuZXcgUmVxdWVzdEV4dHJpbnNpY1NpZ24ocGFyYW0udHJhbnNhY3Rpb25QYXlsb2FkKSwgeyBhZGRyZXNzLCAuLi5wYWlyLm1ldGEgfSwgZ2V0V0NJZChpZCkpXG4gICAgICAgIC50aGVuKGFzeW5jICh7IHNpZ25hdHVyZSB9KSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy4jd2FsbGV0Q29ubmVjdFNlcnZpY2UucmVzcG9uc2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgICAgIHJlc3BvbnNlOiBmb3JtYXRKc29uUnBjUmVzdWx0KGlkLCB7IHNpZ25hdHVyZSB9KVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICB0aGlzLiNoYW5kbGVFcnJvcih0b3BpYywgaWQsIGUpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgRXJyb3IoYCR7Z2V0U2RrRXJyb3IoJ0lOVkFMSURfTUVUSE9EJykubWVzc2FnZX0gJHttZXRob2QgYXMgc3RyaW5nfWApO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IGZvcm1hdEpzb25ScGNFcnJvciB9IGZyb20gJ0Bqc29uLXJwYy10b29scy91dGlscyc7XG5pbXBvcnQgS29uaVN0YXRlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9iYWNrZ3JvdW5kL2hhbmRsZXJzL1N0YXRlJztcbmltcG9ydCBSZXF1ZXN0U2VydmljZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZSc7XG5pbXBvcnQgRWlwMTU1UmVxdWVzdEhhbmRsZXIgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zZXJ2aWNlcy93YWxsZXQtY29ubmVjdC1zZXJ2aWNlL2hhbmRsZXIvRWlwMTU1UmVxdWVzdEhhbmRsZXInO1xuaW1wb3J0IFNpZ25DbGllbnQgZnJvbSAnQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnQnO1xuaW1wb3J0IHsgRW5naW5lVHlwZXMsIFNlc3Npb25UeXBlcywgU2lnbkNsaWVudFR5cGVzIH0gZnJvbSAnQHdhbGxldGNvbm5lY3QvdHlwZXMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJuYWxFcnJvciwgZ2V0U2RrRXJyb3IgfSBmcm9tICdAd2FsbGV0Y29ubmVjdC91dGlscyc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IFBvbGthZG90UmVxdWVzdEhhbmRsZXIgZnJvbSAnLi9oYW5kbGVyL1BvbGthZG90UmVxdWVzdEhhbmRsZXInO1xuaW1wb3J0IHsgQUxMX1dBTExFVF9DT05ORUNUX0VWRU5ULCBERUZBVUxUX1dBTExFVF9DT05ORUNUX09QVElPTlMsIFdBTExFVF9DT05ORUNUX1NVUFBPUlRFRF9NRVRIT0RTIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgY29udmVydENvbm5lY3RSZXF1ZXN0LCBjb252ZXJ0Tm90U3VwcG9ydFJlcXVlc3QsIGlzU3VwcG9ydFdhbGxldENvbm5lY3RDaGFpbiB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgeyBFSVAxNTVfU0lHTklOR19NRVRIT0RTLCBQT0xLQURPVF9TSUdOSU5HX01FVEhPRFMsIFJlc3VsdEFwcHJvdmVXYWxsZXRDb25uZWN0U2Vzc2lvbiwgV2FsbGV0Q29ubmVjdFNpZ25pbmdNZXRob2QgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2FsbGV0Q29ubmVjdFNlcnZpY2Uge1xuICByZWFkb25seSAjcmVxdWVzdFNlcnZpY2U6IFJlcXVlc3RTZXJ2aWNlO1xuICByZWFkb25seSAjcG9sa2Fkb3RSZXF1ZXN0SGFuZGxlcjogUG9sa2Fkb3RSZXF1ZXN0SGFuZGxlcjtcbiAgcmVhZG9ubHkgI2VpcDE1NVJlcXVlc3RIYW5kbGVyOiBFaXAxNTVSZXF1ZXN0SGFuZGxlcjtcbiAgcmVhZG9ubHkgI2tvbmlTdGF0ZTogS29uaVN0YXRlO1xuXG4gICNjbGllbnQ6IFNpZ25DbGllbnQgfCB1bmRlZmluZWQ7XG4gICNvcHRpb246IFNpZ25DbGllbnRUeXBlcy5PcHRpb25zO1xuXG4gIHB1YmxpYyByZWFkb25seSBzZXNzaW9uU3ViamVjdDogQmVoYXZpb3JTdWJqZWN0PFNlc3Npb25UeXBlcy5TdHJ1Y3RbXT4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFNlc3Npb25UeXBlcy5TdHJ1Y3RbXT4oW10pO1xuXG4gIGNvbnN0cnVjdG9yIChrb25pU3RhdGU6IEtvbmlTdGF0ZSwgcmVxdWVzdFNlcnZpY2U6IFJlcXVlc3RTZXJ2aWNlLCBvcHRpb246IFNpZ25DbGllbnRUeXBlcy5PcHRpb25zID0gREVGQVVMVF9XQUxMRVRfQ09OTkVDVF9PUFRJT05TKSB7XG4gICAgdGhpcy4ja29uaVN0YXRlID0ga29uaVN0YXRlO1xuICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlID0gcmVxdWVzdFNlcnZpY2U7XG4gICAgdGhpcy4jb3B0aW9uID0gb3B0aW9uO1xuICAgIHRoaXMuI3BvbGthZG90UmVxdWVzdEhhbmRsZXIgPSBuZXcgUG9sa2Fkb3RSZXF1ZXN0SGFuZGxlcih0aGlzLCByZXF1ZXN0U2VydmljZSk7XG4gICAgdGhpcy4jZWlwMTU1UmVxdWVzdEhhbmRsZXIgPSBuZXcgRWlwMTU1UmVxdWVzdEhhbmRsZXIodGhpcy4ja29uaVN0YXRlLCB0aGlzKTtcblxuICAgIHRoaXMuI2luaXRDbGllbnQoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgfVxuXG4gIGdldCAjaGF2ZURhdGEgKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHNlc3Npb25TdG9yYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3djQDI6Y2xpZW50OjAuMy8vc2Vzc2lvbicpO1xuICAgIGNvbnN0IHBhaXJpbmdTdG9yYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3djQDI6Y29yZTowLjMvL3BhaXJpbmcnKTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb25TdG9yYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3djQDI6Y29yZTowLjMvL3N1YnNjcmlwdGlvbicpO1xuXG4gICAgY29uc3Qgc2Vzc2lvbnM6IEFycmF5PHVua25vd24+ID0gc2Vzc2lvblN0b3JhZ2UgPyBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlKSBhcyBBcnJheTx1bmtub3duPiA6IFtdO1xuICAgIGNvbnN0IHBhaXJpbmdzOiBBcnJheTx1bmtub3duPiA9IHBhaXJpbmdTdG9yYWdlID8gSlNPTi5wYXJzZShwYWlyaW5nU3RvcmFnZSkgYXMgQXJyYXk8dW5rbm93bj4gOiBbXTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb25zOiBBcnJheTx1bmtub3duPiA9IHN1YnNjcmlwdGlvblN0b3JhZ2UgPyBKU09OLnBhcnNlKHN1YnNjcmlwdGlvblN0b3JhZ2UpIGFzIEFycmF5PHVua25vd24+IDogW107XG5cbiAgICByZXR1cm4gISFzZXNzaW9ucy5sZW5ndGggfHwgISFwYWlyaW5ncy5sZW5ndGggfHwgISFzdWJzY3JpcHRpb25zLmxlbmd0aDtcbiAgfVxuXG4gIGFzeW5jICNpbml0Q2xpZW50IChmb3JjZT86IGJvb2xlYW4pIHtcbiAgICB0aGlzLiNyZW1vdmVMaXN0ZW5lcigpO1xuXG4gICAgaWYgKGZvcmNlIHx8IHRoaXMuI2hhdmVEYXRhKSB7XG4gICAgICB0aGlzLiNjbGllbnQgPSBhd2FpdCBTaWduQ2xpZW50LmluaXQodGhpcy4jb3B0aW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLiN1cGRhdGVTZXNzaW9ucygpO1xuICAgIHRoaXMuI2NyZWF0ZUxpc3RlbmVyKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHNlc3Npb25zICgpOiBTZXNzaW9uVHlwZXMuU3RydWN0W10ge1xuICAgIHJldHVybiB0aGlzLiNjbGllbnQ/LnNlc3Npb24udmFsdWVzIHx8IFtdO1xuICB9XG5cbiAgI3VwZGF0ZVNlc3Npb25zICgpIHtcbiAgICB0aGlzLnNlc3Npb25TdWJqZWN0Lm5leHQodGhpcy5zZXNzaW9ucyk7XG4gIH1cblxuICAjb25TZXNzaW9uUHJvcG9zYWwgKHByb3Bvc2FsOiBTaWduQ2xpZW50VHlwZXMuRXZlbnRBcmd1bWVudHNbJ3Nlc3Npb25fcHJvcG9zYWwnXSkge1xuICAgIHRoaXMuI2NoZWNrQ2xpZW50KCk7XG5cbiAgICB0aGlzLiNyZXF1ZXN0U2VydmljZS5hZGRDb25uZWN0V0NSZXF1ZXN0KGNvbnZlcnRDb25uZWN0UmVxdWVzdChwcm9wb3NhbCkpO1xuICB9XG5cbiAgI29uU2Vzc2lvblJlcXVlc3QgKHJlcXVlc3RFdmVudDogU2lnbkNsaWVudFR5cGVzLkV2ZW50QXJndW1lbnRzWydzZXNzaW9uX3JlcXVlc3QnXSkge1xuICAgIHRoaXMuI2NoZWNrQ2xpZW50KCk7XG5cbiAgICBjb25zdCB7IGlkLCBwYXJhbXMsIHRvcGljIH0gPSByZXF1ZXN0RXZlbnQ7XG4gICAgY29uc3QgeyBjaGFpbklkLCByZXF1ZXN0IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxdWVzdC5tZXRob2QgYXMgV2FsbGV0Q29ubmVjdFNpZ25pbmdNZXRob2Q7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVxdWVzdFNlc3Npb24gPSB0aGlzLmdldFNlc3Npb24odG9waWMpO1xuXG4gICAgICBjb25zdCBuYW1lc3BhY2VzID0gT2JqZWN0LmtleXMocmVxdWVzdFNlc3Npb24ubmFtZXNwYWNlcyk7XG4gICAgICBjb25zdCBjaGFpbnMgPSBPYmplY3QudmFsdWVzKHJlcXVlc3RTZXNzaW9uLm5hbWVzcGFjZXMpLm1hcCgobmFtZXNwYWNlKSA9PiBuYW1lc3BhY2UuY2hhaW5zIGFzIHN0cmluZ1tdKS5mbGF0KCk7XG4gICAgICBjb25zdCBtZXRob2RzID0gT2JqZWN0LnZhbHVlcyhyZXF1ZXN0U2Vzc2lvbi5uYW1lc3BhY2VzKS5tYXAoKG5hbWVzcGFjZSkgPT4gbmFtZXNwYWNlLm1ldGhvZHMpLmZsYXQoKTtcbiAgICAgIGNvbnN0IGNoYWluSW5mb01hcCA9IHRoaXMuI2tvbmlTdGF0ZS5nZXRDaGFpbkluZm9NYXAoKTtcblxuICAgICAgY29uc3QgW3JlcXVlc3ROYW1lc3BhY2VdID0gY2hhaW5JZC5zcGxpdCgnOicpO1xuXG4gICAgICBpZiAoIW5hbWVzcGFjZXMuaW5jbHVkZXMocmVxdWVzdE5hbWVzcGFjZSkpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoZ2V0U2RrRXJyb3IoJ1VOU1VQUE9SVEVEX05BTUVTUEFDRV9LRVknKS5tZXNzYWdlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjaGFpbnMuaW5jbHVkZXMoY2hhaW5JZCkpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoZ2V0U2RrRXJyb3IoJ1VOU1VQUE9SVEVEX0NIQUlOUycpLm1lc3NhZ2UgKyAnICcgKyBjaGFpbklkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc1N1cHBvcnRXYWxsZXRDb25uZWN0Q2hhaW4oY2hhaW5JZCwgY2hhaW5JbmZvTWFwKSkge1xuICAgICAgICB0aHJvdyBFcnJvcihnZXRTZGtFcnJvcignVU5TVVBQT1JURURfQ0hBSU5TJykubWVzc2FnZSArICcgJyArIGNoYWluSWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW1ldGhvZHMuaW5jbHVkZXMobWV0aG9kKSkge1xuICAgICAgICB0aHJvdyBFcnJvcihnZXRTZGtFcnJvcignVU5BVVRIT1JJWkVEX01FVEhPRCcpLm1lc3NhZ2UgKyAnICcgKyBtZXRob2QpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIVdBTExFVF9DT05ORUNUX1NVUFBPUlRFRF9NRVRIT0RTLmluY2x1ZGVzKG1ldGhvZCkpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoZ2V0U2RrRXJyb3IoJ1VOU1VQUE9SVEVEX01FVEhPRFMnKS5tZXNzYWdlICsgJyAnICsgbWV0aG9kKTtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgICAgY2FzZSBQT0xLQURPVF9TSUdOSU5HX01FVEhPRFMuUE9MS0FET1RfU0lHTl9NRVNTQUdFOlxuICAgICAgICBjYXNlIFBPTEtBRE9UX1NJR05JTkdfTUVUSE9EUy5QT0xLQURPVF9TSUdOX1RSQU5TQUNUSU9OOlxuICAgICAgICAgIHRoaXMuI3BvbGthZG90UmVxdWVzdEhhbmRsZXIuaGFuZGxlUmVxdWVzdChyZXF1ZXN0RXZlbnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEVJUDE1NV9TSUdOSU5HX01FVEhPRFMuRVRIX1NFTkRfVFJBTlNBQ1RJT046XG4gICAgICAgIGNhc2UgRUlQMTU1X1NJR05JTkdfTUVUSE9EUy5QRVJTT05BTF9TSUdOOlxuICAgICAgICBjYXNlIEVJUDE1NV9TSUdOSU5HX01FVEhPRFMuRVRIX1NJR05fVFlQRURfREFUQTpcbiAgICAgICAgY2FzZSBFSVAxNTVfU0lHTklOR19NRVRIT0RTLkVUSF9TSUdOX1RZUEVEX0RBVEFfVjM6XG4gICAgICAgIGNhc2UgRUlQMTU1X1NJR05JTkdfTUVUSE9EUy5FVEhfU0lHTl9UWVBFRF9EQVRBX1Y0OlxuICAgICAgICBjYXNlIEVJUDE1NV9TSUdOSU5HX01FVEhPRFMuRVRIX1NJR046XG4gICAgICAgICAgdGhpcy4jZWlwMTU1UmVxdWVzdEhhbmRsZXIuaGFuZGxlUmVxdWVzdChyZXF1ZXN0RXZlbnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IEVycm9yKGdldFNka0Vycm9yKCdJTlZBTElEX01FVEhPRCcpLm1lc3NhZ2UgKyAnICcgKyBtZXRob2QpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXF1ZXN0U2Vzc2lvbiA9IHRoaXMuZ2V0U2Vzc2lvbih0b3BpYyk7XG4gICAgICAgIGNvbnN0IG5vdFN1cHBvcnRSZXF1ZXN0ID0gY29udmVydE5vdFN1cHBvcnRSZXF1ZXN0KHJlcXVlc3RFdmVudCwgcmVxdWVzdFNlc3Npb24ucGVlci5tZXRhZGF0YS51cmwpO1xuXG4gICAgICAgIHRoaXMuI3JlcXVlc3RTZXJ2aWNlLmFkZE5vdFN1cHBvcnRXQ1JlcXVlc3Qobm90U3VwcG9ydFJlcXVlc3QpO1xuICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgdGhpcy5yZXNwb25zZVJlcXVlc3Qoe1xuICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgIHJlc3BvbnNlOiBmb3JtYXRKc29uUnBjRXJyb3IoaWQsIChlIGFzIEVycm9yKS5tZXNzYWdlKVxuICAgICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfVxuICB9XG5cbiAgI2NyZWF0ZUxpc3RlbmVyICgpIHtcbiAgICB0aGlzLiNjbGllbnQ/Lm9uKCdzZXNzaW9uX3Byb3Bvc2FsJywgdGhpcy4jb25TZXNzaW9uUHJvcG9zYWwuYmluZCh0aGlzKSk7XG4gICAgdGhpcy4jY2xpZW50Py5vbignc2Vzc2lvbl9yZXF1ZXN0JywgdGhpcy4jb25TZXNzaW9uUmVxdWVzdC5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLiNjbGllbnQ/Lm9uKCdzZXNzaW9uX3BpbmcnLCAoZGF0YSkgPT4gY29uc29sZS5sb2coJ3BpbmcnLCBkYXRhKSk7XG4gICAgdGhpcy4jY2xpZW50Py5vbignc2Vzc2lvbl9ldmVudCcsIChkYXRhKSA9PiBjb25zb2xlLmxvZygnZXZlbnQnLCBkYXRhKSk7XG4gICAgdGhpcy4jY2xpZW50Py5vbignc2Vzc2lvbl91cGRhdGUnLCAoZGF0YSkgPT4gY29uc29sZS5sb2coJ3VwZGF0ZScsIGRhdGEpKTtcbiAgICB0aGlzLiNjbGllbnQ/Lm9uKCdzZXNzaW9uX2RlbGV0ZScsIHRoaXMuI3VwZGF0ZVNlc3Npb25zLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIG9sZCBsaXN0ZW5lclxuICAjcmVtb3ZlTGlzdGVuZXIgKCkge1xuICAgIEFMTF9XQUxMRVRfQ09OTkVDVF9FVkVOVC5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgdGhpcy4jY2xpZW50Py5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgI2NoZWNrQ2xpZW50ICgpIHtcbiAgICBpZiAoIXRoaXMuI2NsaWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGdldEludGVybmFsRXJyb3IoJ05PVF9JTklUSUFMSVpFRCcpLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXNzaW9uICh0b3BpYzogc3RyaW5nKTogU2Vzc2lvblR5cGVzLlN0cnVjdCB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuI2NsaWVudD8uc2Vzc2lvbi5nZXQodG9waWMpO1xuXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0SW50ZXJuYWxFcnJvcignTUlTTUFUQ0hFRF9UT1BJQycpLm1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY2hhbmdlT3B0aW9uIChuZXdPcHRpb246IE9taXQ8U2lnbkNsaWVudFR5cGVzLk9wdGlvbnMsICdwcm9qZWN0SWQnPikge1xuICAgIHRoaXMuI29wdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuI29wdGlvbiwgbmV3T3B0aW9uKTtcbiAgICBhd2FpdCB0aGlzLiNpbml0Q2xpZW50KCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY29ubmVjdCAodXJpOiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMuI2hhdmVEYXRhKSB7XG4gICAgICBhd2FpdCB0aGlzLiNpbml0Q2xpZW50KHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuI2NoZWNrQ2xpZW50KCk7XG5cbiAgICBhd2FpdCB0aGlzLiNjbGllbnQ/LnBhaXIoeyB1cmkgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYXBwcm92ZVNlc3Npb24gKHJlc3VsdDogUmVzdWx0QXBwcm92ZVdhbGxldENvbm5lY3RTZXNzaW9uKSB7XG4gICAgdGhpcy4jY2hlY2tDbGllbnQoKTtcbiAgICBhd2FpdCB0aGlzLiNjbGllbnQ/LmFwcHJvdmUocmVzdWx0KTtcbiAgICB0aGlzLiN1cGRhdGVTZXNzaW9ucygpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlamVjdFNlc3Npb24gKGlkOiBudW1iZXIpIHtcbiAgICB0aGlzLiNjaGVja0NsaWVudCgpO1xuICAgIGF3YWl0IHRoaXMuI2NsaWVudD8ucmVqZWN0KHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIHJlYXNvbjogZ2V0U2RrRXJyb3IoJ1VTRVJfUkVKRUNURUQnKVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlc3BvbnNlUmVxdWVzdCAocmVzcG9uc2U6IEVuZ2luZVR5cGVzLlJlc3BvbmRQYXJhbXMpIHtcbiAgICB0aGlzLiNjaGVja0NsaWVudCgpO1xuXG4gICAgYXdhaXQgdGhpcy4jY2xpZW50Py5yZXNwb25kKHJlc3BvbnNlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZXNldFdhbGxldCAocmVzZXRBbGw6IGJvb2xlYW4pIHtcbiAgICB0aGlzLiNyZW1vdmVMaXN0ZW5lcigpO1xuXG4gICAgLy8gRGlzY29ubmVjdCBzZXNzaW9uXG4gICAgY29uc3Qgc2Vzc2lvbnMgPSB0aGlzLiNjbGllbnQ/LnNlc3Npb24udmFsdWVzIHx8IFtdO1xuXG4gICAgZm9yIChjb25zdCBzZXNzaW9uIG9mIHNlc3Npb25zKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLiNjbGllbnQ/LmRpc2Nvbm5lY3Qoe1xuICAgICAgICAgIHRvcGljOiBzZXNzaW9uLnRvcGljLFxuICAgICAgICAgIHJlYXNvbjogZ2V0U2RrRXJyb3IoJ1VTRVJfRElTQ09OTkVDVEVEJylcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGlzY29ubmVjdCBwYWlyXG4gICAgY29uc3QgcGFpcnMgPSB0aGlzLiNjbGllbnQ/LnBhaXJpbmcudmFsdWVzIHx8IFtdO1xuXG4gICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLiNjbGllbnQ/LmRpc2Nvbm5lY3Qoe1xuICAgICAgICAgIHRvcGljOiBwYWlyLnRvcGljLFxuICAgICAgICAgIHJlYXNvbjogZ2V0U2RrRXJyb3IoJ1VTRVJfRElTQ09OTkVDVEVEJylcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qga2V5czogc3RyaW5nW10gPSBhd2FpdCB0aGlzLiNjbGllbnQ/LmNvcmUuc3RvcmFnZS5nZXRLZXlzKCkgfHwgW107XG5cbiAgICBjb25zdCBkZWxldGVLZXlzID0gcmVzZXRBbGwgPyBrZXlzIDoga2V5cy5maWx0ZXIoKGtleSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ3djQCcpKTtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIGRlbGV0ZUtleXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI2NsaWVudD8uY29yZS5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLiNpbml0Q2xpZW50KCk7XG4gICAgdGhpcy4jdXBkYXRlU2Vzc2lvbnMoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkaXNjb25uZWN0ICh0b3BpYzogc3RyaW5nKSB7XG4gICAgYXdhaXQgdGhpcy4jY2xpZW50Py5kaXNjb25uZWN0KHtcbiAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgIHJlYXNvbjogZ2V0U2RrRXJyb3IoJ1VTRVJfRElTQ09OTkVDVEVEJylcbiAgICB9KTtcblxuICAgIHRoaXMuI3VwZGF0ZVNlc3Npb25zKCk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBBY2NvdW50UmVmIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBFWFRFTlNJT05fUFJFRklYIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9kZWZhdWx0cyc7XG5pbXBvcnQgU3Vic2NyaWJhYmxlU3RvcmUgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zdG9yZXMvU3Vic2NyaWJhYmxlU3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY2NvdW50UmVmU3RvcmUgZXh0ZW5kcyBTdWJzY3JpYmFibGVTdG9yZTxBcnJheTxBY2NvdW50UmVmPj4ge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoRVhURU5TSU9OX1BSRUZJWCA/IGAke0VYVEVOU0lPTl9QUkVGSVh9YWNjb3VudF9saW5rYCA6IG51bGwpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBwb2xrYWRvdC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgdHlwZSB7IEtleXJpbmdKc29uLCBLZXlyaW5nU3RvcmUgfSBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcvdHlwZXMnO1xuXG5pbXBvcnQgeyBFWFRFTlNJT05fUFJFRklYIH0gZnJvbSAnLi4vZGVmYXVsdHMnO1xuaW1wb3J0IEJhc2VTdG9yZSBmcm9tICcuL0Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY2NvdW50c1N0b3JlIGV4dGVuZHMgQmFzZVN0b3JlPEtleXJpbmdKc29uPiBpbXBsZW1lbnRzIEtleXJpbmdTdG9yZSB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcihFWFRFTlNJT05fUFJFRklYID8gYCR7RVhURU5TSU9OX1BSRUZJWH1hY2NvdW50c2AgOiBudWxsKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBzZXQgKGtleTogc3RyaW5nLCB2YWx1ZTogS2V5cmluZ0pzb24sIHVwZGF0ZT86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAvLyBzaG9ydGN1dCwgZG9uJ3Qgc2F2ZSB0ZXN0aW5nIGFjY291bnRzIGluIGV4dGVuc2lvbiBzdG9yYWdlXG4gICAgaWYgKGtleS5zdGFydHNXaXRoKCdhY2NvdW50OicpICYmIHZhbHVlLm1ldGEgJiYgdmFsdWUubWV0YS5pc1Rlc3RpbmcpIHtcbiAgICAgIHVwZGF0ZSAmJiB1cGRhdGUoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN1cGVyLnNldChrZXksIHZhbHVlLCB1cGRhdGUpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBwb2xrYWRvdC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBBc3NldFNldHRpbmcgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEVYVEVOU0lPTl9QUkVGSVggfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2RlZmF1bHRzJztcbmltcG9ydCBTdWJzY3JpYmFibGVTdG9yZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcy9TdWJzY3JpYmFibGVTdG9yZSc7XG5cbi8vIE5vdCBldmVyeSBhc3NldCBoYXMgaXRzIHNldHRpbmcgc3RvcmVkLCBpZiBub3QgaW4gc3RvcmUgdGhlbiBpdCBoYXMgZGVmYXVsdCB2YWx1ZSAodmlzaWJsZSA9IGZhbHNlKVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXNzZXRTZXR0aW5nU3RvcmUgZXh0ZW5kcyBTdWJzY3JpYmFibGVTdG9yZTxSZWNvcmQ8c3RyaW5nLCBBc3NldFNldHRpbmc+PiB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcihFWFRFTlNJT05fUFJFRklYID8gYCR7RVhURU5TSU9OX1BSRUZJWH1hc3NldC1zZXR0aW5nYCA6IG51bGwpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgQXV0aFVybHMgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvaGFuZGxlcnMvU3RhdGUnO1xuaW1wb3J0IHsgRVhURU5TSU9OX1BSRUZJWCB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvZGVmYXVsdHMnO1xuaW1wb3J0IFN1YnNjcmliYWJsZVN0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc3RvcmVzL1N1YnNjcmliYWJsZVN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXV0aG9yaXplU3RvcmUgZXh0ZW5kcyBTdWJzY3JpYmFibGVTdG9yZTxBdXRoVXJscz4ge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoRVhURU5TSU9OX1BSRUZJWCA/IGAke0VYVEVOU0lPTl9QUkVGSVh9YXV0aG9yaXplYCA6IG51bGwpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBwb2xrYWRvdC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG50eXBlIFN0b3JlVmFsdWUgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuY29uc3QgbGFzdEVycm9yID0gKHR5cGU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBjb25zdCBlcnJvciA9IGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcjtcblxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBCYXNlU3RvcmUuJHt0eXBlfTo6IHJ1bnRpbWUubGFzdEVycm9yOmAsIGVycm9yKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgQmFzZVN0b3JlIDxUPiB7XG4gICNwcmVmaXg6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvciAocHJlZml4OiBzdHJpbmcgfCBudWxsKSB7XG4gICAgdGhpcy4jcHJlZml4ID0gcHJlZml4ID8gYCR7cHJlZml4fTpgIDogJyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJlZml4ICgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLiNwcmVmaXg7XG4gIH1cblxuICBwdWJsaWMgYWxsICh1cGRhdGU6IChrZXk6IHN0cmluZywgdmFsdWU6IFQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmFsbE1hcCgobWFwKTogdm9pZCA9PiB7XG4gICAgICBPYmplY3QuZW50cmllcyhtYXApLmZvckVhY2goKFtrZXksIHZhbHVlXSk6IHZvaWQgPT4ge1xuICAgICAgICB1cGRhdGUoa2V5LCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhbGxNYXAgKHVwZGF0ZTogKHZhbHVlOiBSZWNvcmQ8c3RyaW5nLCBUPikgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChudWxsLCAocmVzdWx0OiBTdG9yZVZhbHVlKTogdm9pZCA9PiB7XG4gICAgICBsYXN0RXJyb3IoJ2FsbCcpO1xuXG4gICAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocmVzdWx0KTtcbiAgICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgVD4gPSB7fTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJpZXNbaV07XG5cbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMuI3ByZWZpeCkpIHtcbiAgICAgICAgICBtYXBba2V5LnJlcGxhY2UodGhpcy4jcHJlZml4LCAnJyldID0gdmFsdWUgYXMgVDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB1cGRhdGUobWFwKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgKF9rZXk6IHN0cmluZywgdXBkYXRlOiAodmFsdWU6IFQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjb25zdCBrZXkgPSBgJHt0aGlzLiNwcmVmaXh9JHtfa2V5fWA7XG5cbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoW2tleV0sIChyZXN1bHQ6IFN0b3JlVmFsdWUpOiB2b2lkID0+IHtcbiAgICAgIGxhc3RFcnJvcignZ2V0Jyk7XG5cbiAgICAgIHVwZGF0ZShyZXN1bHRba2V5XSBhcyBUKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmUgKF9rZXk6IHN0cmluZywgdXBkYXRlPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IGtleSA9IGAke3RoaXMuI3ByZWZpeH0ke19rZXl9YDtcblxuICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnJlbW92ZShrZXksICgpOiB2b2lkID0+IHtcbiAgICAgIGxhc3RFcnJvcigncmVtb3ZlJyk7XG5cbiAgICAgIHVwZGF0ZSAmJiB1cGRhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgKF9rZXk6IHN0cmluZywgdmFsdWU6IFQsIHVwZGF0ZT86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjb25zdCBrZXkgPSBgJHt0aGlzLiNwcmVmaXh9JHtfa2V5fWA7XG5cbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeyBba2V5XTogdmFsdWUgfSwgKCk6IHZvaWQgPT4ge1xuICAgICAgbGFzdEVycm9yKCdzZXQnKTtcblxuICAgICAgdXBkYXRlICYmIHVwZGF0ZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmktdWkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgQ3VycmVudEFjY291bnRJbmZvIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBFWFRFTlNJT05fUFJFRklYIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9kZWZhdWx0cyc7XG5pbXBvcnQgU3Vic2NyaWJhYmxlU3RvcmUgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zdG9yZXMvU3Vic2NyaWJhYmxlU3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDdXJyZW50QWNjb3VudFN0b3JlIGV4dGVuZHMgU3Vic2NyaWJhYmxlU3RvcmU8Q3VycmVudEFjY291bnRJbmZvPiB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcihFWFRFTlNJT05fUFJFRklYID8gYCR7RVhURU5TSU9OX1BSRUZJWH1jdXJyZW50X2FjY291bnRgIDogbnVsbCk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgdHlwZSB7IEtleXJpbmdQYXNzd29yZEpzb24gfSBmcm9tICdAc3Vid2FsbGV0L2tleXJpbmcvdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBQYXNzd29yZFN0b3JlIH0gZnJvbSAnQHN1YndhbGxldC91aS1rZXlyaW5nL3R5cGVzJztcblxuaW1wb3J0IHsgU1VCV0FMTEVUX0tFWVJJTkcgfSBmcm9tICdAc3Vid2FsbGV0L3VpLWtleXJpbmcvZGVmYXVsdHMnO1xuXG50eXBlIFN0b3JlVmFsdWUgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuY29uc3QgbGFzdEVycm9yID0gKHR5cGU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBjb25zdCBlcnJvciA9IGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcjtcblxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBLZXlyaW5nU3RvcmUuJHt0eXBlfTo6IHJ1bnRpbWUubGFzdEVycm9yOmAsIGVycm9yKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2V5cmluZ1N0b3JlIGltcGxlbWVudHMgUGFzc3dvcmRTdG9yZSB7XG4gIHB1YmxpYyBnZXQgKHVwZGF0ZTogKHZhbHVlOiBLZXlyaW5nUGFzc3dvcmRKc29uKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFtTVUJXQUxMRVRfS0VZUklOR10sIChyZXN1bHQ6IFN0b3JlVmFsdWUpOiB2b2lkID0+IHtcbiAgICAgIGxhc3RFcnJvcignZ2V0Jyk7XG5cbiAgICAgIHVwZGF0ZShyZXN1bHRbU1VCV0FMTEVUX0tFWVJJTkddIGFzIEtleXJpbmdQYXNzd29yZEpzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZSAodXBkYXRlPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnJlbW92ZShTVUJXQUxMRVRfS0VZUklORywgKCk6IHZvaWQgPT4ge1xuICAgICAgbGFzdEVycm9yKCdyZW1vdmUnKTtcblxuICAgICAgdXBkYXRlICYmIHVwZGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHNldCAodmFsdWU6IEtleXJpbmdQYXNzd29yZEpzb24sIHVwZGF0ZT86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeyBbU1VCV0FMTEVUX0tFWVJJTkddOiB2YWx1ZSB9LCAoKTogdm9pZCA9PiB7XG4gICAgICBsYXN0RXJyb3IoJ3NldCcpO1xuXG4gICAgICB1cGRhdGUgJiYgdXBkYXRlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHBvbGthZG90L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB0eXBlIHsgTWV0YWRhdGFEZWYgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1pbmplY3QvdHlwZXMnO1xuXG5pbXBvcnQgeyBFWFRFTlNJT05fUFJFRklYIH0gZnJvbSAnLi4vZGVmYXVsdHMnO1xuaW1wb3J0IEJhc2VTdG9yZSBmcm9tICcuL0Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXRhZGF0YVN0b3JlIGV4dGVuZHMgQmFzZVN0b3JlPE1ldGFkYXRhRGVmPiB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcihgJHtFWFRFTlNJT05fUFJFRklYfW1ldGFkYXRhYCk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24ta29uaSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBQYXNzUGhpc2hpbmcgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEVYVEVOU0lPTl9QUkVGSVggfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2RlZmF1bHRzJztcbmltcG9ydCBTdWJzY3JpYmFibGVTdG9yZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcy9TdWJzY3JpYmFibGVTdG9yZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhc3NQaGlzaGluZ1N0b3JlIGV4dGVuZHMgU3Vic2NyaWJhYmxlU3RvcmU8UmVjb3JkPHN0cmluZywgUGFzc1BoaXNoaW5nPj4ge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoRVhURU5TSU9OX1BSRUZJWCA/IGAke0VYVEVOU0lPTl9QUkVGSVh9c3Vid2FsbGV0LXBhc3MtcGhpc2hpbmctbGlzdGAgOiBudWxsKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IFJlcXVlc3RTZXR0aW5nc1R5cGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvS29uaVR5cGVzJztcbmltcG9ydCB7IEVYVEVOU0lPTl9QUkVGSVggfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2RlZmF1bHRzJztcbmltcG9ydCBTdWJzY3JpYmFibGVTdG9yZSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcy9TdWJzY3JpYmFibGVTdG9yZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNldHRpbmdzU3RvcmUgZXh0ZW5kcyBTdWJzY3JpYmFibGVTdG9yZTxSZXF1ZXN0U2V0dGluZ3NUeXBlPiB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcihFWFRFTlNJT05fUFJFRklYID8gYCR7RVhURU5TSU9OX1BSRUZJWH1zZXR0aW5nc2AgOiBudWxsKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlIGF1dGhvcnMgJiBjb250cmlidXRvcnNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCBCYXNlU3RvcmUgZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zdG9yZXMvQmFzZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN1YnNjcmliYWJsZVN0b3JlPFQ+IGV4dGVuZHMgQmFzZVN0b3JlPFQ+IHtcbiAgcHJpdmF0ZSByZWFkb25seSBzdWJqZWN0OiBTdWJqZWN0PFQ+ID0gbmV3IFN1YmplY3Q8VD4oKTtcblxuICBwdWJsaWMgZ2V0U3ViamVjdCAoKTogU3ViamVjdDxUPiB7XG4gICAgcmV0dXJuIHRoaXMuc3ViamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBzZXQgKF9rZXk6IHN0cmluZywgdmFsdWU6IFQsIHVwZGF0ZT86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBzdXBlci5zZXQoX2tleSwgdmFsdWUsICgpID0+IHtcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHZhbHVlKTtcbiAgICAgIHVwZGF0ZSAmJiB1cGRhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luY0dldCA9IGFzeW5jIChrZXk6IHN0cmluZyk6IFByb21pc2U8VD4gPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5nZXQoa2V5LCByZXNvbHZlKTtcbiAgICB9KTtcbiAgfTtcblxuICBwdWJsaWMgcmVtb3ZlQWxsICgpIHtcbiAgICByZXR1cm4gdGhpcy5hbGwoKGtleSkgPT4gdGhpcy5yZW1vdmUoa2V5KSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHN1YndhbGxldC9leHRlbnNpb24tYmFzZSBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBBZGRyZXNzSnNvbiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvYmFja2dyb3VuZC90eXBlcyc7XG5pbXBvcnQgeyByZWZvcm1hdEFkZHJlc3MgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3V0aWxzL2luZGV4JztcbmltcG9ydCB7IFN1YmplY3RJbmZvIH0gZnJvbSAnQHN1YndhbGxldC91aS1rZXlyaW5nL29ic2VydmFibGUvdHlwZXMnO1xuXG5pbXBvcnQgeyBkZWNvZGVBZGRyZXNzLCBlbmNvZGVBZGRyZXNzLCBpc0FkZHJlc3MsIGlzRXRoZXJldW1BZGRyZXNzIH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvJztcblxuZXhwb3J0IGNvbnN0IHNpbXBsZUFkZHJlc3MgPSAoYWRkcmVzczogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgaWYgKGlzRXRoZXJldW1BZGRyZXNzKGFkZHJlc3MpKSB7XG4gICAgcmV0dXJuIGFkZHJlc3M7XG4gIH1cblxuICByZXR1cm4gZW5jb2RlQWRkcmVzcyhkZWNvZGVBZGRyZXNzKGFkZHJlc3MpKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWlja0Zvcm1hdEFkZHJlc3NUb0NvbXBhcmUgKGFkZHJlc3M/OiBzdHJpbmcpIHtcbiAgaWYgKCFpc0FkZHJlc3MoYWRkcmVzcykpIHtcbiAgICByZXR1cm4gYWRkcmVzcztcbiAgfVxuXG4gIHJldHVybiByZWZvcm1hdEFkZHJlc3MoYWRkcmVzcywgNDIpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmV4cG9ydCBjb25zdCBjb252ZXJ0U3ViamVjdEluZm9Ub0FkZHJlc3NlcyA9IChzdWJqZWN0SW5mbzogU3ViamVjdEluZm8pOiBBZGRyZXNzSnNvbltdID0+IHtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoc3ViamVjdEluZm8pLm1hcCgoaW5mbyk6IEFkZHJlc3NKc29uID0+ICh7IGFkZHJlc3M6IGluZm8uanNvbi5hZGRyZXNzLCB0eXBlOiBpbmZvLnR5cGUsIC4uLmluZm8uanNvbi5tZXRhIH0pKTtcbn07XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgV2ViM1RyYW5zYWN0aW9uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9zaWduZXJzL3R5cGVzJztcbmltcG9ydCB7IGFkZEhleFByZWZpeCB9IGZyb20gJ2V0aGVyZXVtanMtdXRpbCc7XG5pbXBvcnQgeyBldGhlcnMsIFNpZ25hdHVyZUxpa2UsIFRyYW5zYWN0aW9uTGlrZSB9IGZyb20gJ2V0aGVycyc7XG5cbmV4cG9ydCBjb25zdCBtZXJnZVRyYW5zYWN0aW9uQW5kU2lnbmF0dXJlID0gKHR4OiBXZWIzVHJhbnNhY3Rpb24sIF9yYXdTaWduYXR1cmU6IGAweCR7c3RyaW5nfWApOiBgMHgke3N0cmluZ31gID0+IHtcbiAgY29uc3QgX3NpZ25hdHVyZSA9IF9yYXdTaWduYXR1cmUuc2xpY2UoMik7XG5cbiAgY29uc3Qgc2lnbmF0dXJlOiBTaWduYXR1cmVMaWtlID0ge1xuICAgIHI6IGAweCR7X3NpZ25hdHVyZS5zdWJzdHJpbmcoMCwgNjQpfWAsXG4gICAgczogYDB4JHtfc2lnbmF0dXJlLnN1YnN0cmluZyg2NCwgMTI4KX1gLFxuICAgIHY6IHBhcnNlSW50KGAweCR7X3NpZ25hdHVyZS5zdWJzdHJpbmcoMTI4KX1gKVxuICB9O1xuXG4gIGNvbnN0IHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbkxpa2UgPSB7XG4gICAgbm9uY2U6IHR4Lm5vbmNlLFxuICAgIGdhc1ByaWNlOiBhZGRIZXhQcmVmaXgodHguZ2FzUHJpY2UudG9TdHJpbmcoMTYpKSxcbiAgICBnYXNMaW1pdDogYWRkSGV4UHJlZml4KHR4Lmdhc0xpbWl0LnRvU3RyaW5nKDE2KSksXG4gICAgdG86IHR4LnRvLFxuICAgIHZhbHVlOiBhZGRIZXhQcmVmaXgodHgudmFsdWUudG9TdHJpbmcoMTYpKSxcbiAgICBkYXRhOiB0eC5kYXRhLFxuICAgIGNoYWluSWQ6IHR4LmNoYWluSWQsXG4gICAgc2lnbmF0dXJlOiBzaWduYXR1cmVcbiAgfTtcblxuICByZXR1cm4gZXRoZXJzLlRyYW5zYWN0aW9uLmZyb20odHJhbnNhY3Rpb24pLnNlcmlhbGl6ZWQgYXMgYDB4JHtzdHJpbmd9YDtcbn07XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Vcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG5cbmltcG9ydCB7IEZ1bmN0aW9uRnJhZ21lbnQsIEpzb25GcmFnbWVudCwgUmVzdWx0IH0gZnJvbSAnQGV0aGVyc3Byb2plY3QvYWJpJztcbmltcG9ydCB7IE5lc3RlZEFycmF5IH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xuaW1wb3J0IHsgZXRoZXJzIH0gZnJvbSAnZXRoZXJzJztcbmltcG9ydCBpc0J1ZmZlciBmcm9tICdpcy1idWZmZXInO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgX2pzb25JbnRlcmZhY2VNZXRob2RUb1N0cmluZywgQWJpSW5wdXQsIEFiaUl0ZW0sIGtlY2NhazI1NiB9IGZyb20gJ3dlYjMtdXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElucHV0RGF0YSB7XG4gIG1ldGhvZDogc3RyaW5nIHwgbnVsbDtcbiAgbWV0aG9kTmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgdHlwZXM6IHN0cmluZ1tdO1xuICBpbnB1dHM6IE5lc3RlZEFycmF5PGFueT5bXTtcbiAgbmFtZXM6IE5lc3RlZEFycmF5PHN0cmluZz5bXTtcbn1cblxuY29uc3QgQUJJX1RZUEVTID0gWydmdW5jdGlvbicsICdjb25zdHJ1Y3RvcicsICdldmVudCcsICdmYWxsYmFjayddO1xuXG5jb25zdCBpbnN0YW5jZU9mQWJpSXRlbSA9IChvYmplY3Q6IGFueSk6IG9iamVjdCBpcyBBYmlJdGVtID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnQsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gIHJldHVybiAndHlwZScgaW4gb2JqZWN0ICYmIEFCSV9UWVBFUy5pbmNsdWRlcyhvYmplY3QudHlwZSk7XG59O1xuXG5jb25zdCBjaGVja0FycmF5QWJpSXRlbXMgPSAoZGF0YTogQWJpSXRlbVtdIHwgYW55KTogYm9vbGVhbiA9PiB7XG4gIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgcmV0dXJuIGRhdGEubGVuZ3RoID4gMCAmJiBkYXRhLmV2ZXJ5KCh2YWx1ZSkgPT4gaW5zdGFuY2VPZkFiaUl0ZW0odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmNvbnN0IGdlblR5cGUgPSAodHlwZTogQWJpSW5wdXQgfCBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHR5cGU7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGUuY29tcG9uZW50cykge1xuICAgICAgY29uc3QgYXJyOiBzdHJpbmdbXSA9IHR5cGUuY29tcG9uZW50cz8ubWFwKGdlblR5cGUpO1xuXG4gICAgICBjb25zdCB0dXBsZVN0ciA9IGAoJHthcnIuam9pbignLCcpfSlgO1xuXG4gICAgICBpZiAodHlwZS50eXBlID09PSAndHVwbGVbXScpIHtcbiAgICAgICAgcmV0dXJuIHR1cGxlU3RyICsgJ1tdJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0dXBsZVN0cjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHR5cGUudHlwZTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IGdldE1ldGhvZElkID0gKGFiaTogQWJpSXRlbSk6IHN0cmluZyA9PiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbFxuICByZXR1cm4ga2VjY2FrMjU2KF9qc29uSW50ZXJmYWNlTWV0aG9kVG9TdHJpbmcoYWJpKSkuc2xpY2UoMiwgMTApO1xufTtcblxuY29uc3QgZ2V0TWV0aG9kTmFtZSA9IChhYmk6IEFiaUl0ZW0pOiBzdHJpbmcgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGxcbiAgcmV0dXJuIF9qc29uSW50ZXJmYWNlTWV0aG9kVG9TdHJpbmcoYWJpKSBhcyBzdHJpbmc7XG59O1xuXG5jb25zdCBkZWVwUmVtb3ZlVW53YW50ZWRBcnJheVByb3BlcnRpZXMgPSAoYXJyOiBhbnlbXSB8IFJlc3VsdCk6IGFueVtdID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICByZXR1cm4gWy4uLmFyci5tYXAoKGl0ZW0pID0+IHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gICAgICByZXR1cm4gZGVlcFJlbW92ZVVud2FudGVkQXJyYXlQcm9wZXJ0aWVzKGl0ZW0pO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgIHJldHVybiBpdGVtO1xuICB9KV07XG59O1xuXG4vLyByZW1vdmUgMHggZnJvbSBhZGRyZXNzZXNcbmNvbnN0IGRlZXBTdHJpcFR1cGxlQWRkcmVzc2VzID0gKGlucHV0OiBhbnlbXSwgdHVwbGVUeXBlczogQWJpSW5wdXRbXSk6IGFueVtdID0+IGlucHV0Lm1hcCgoaXRlbSwgaSkgPT4ge1xuICAvLyBXZSBmaW5kIHR1cGxlVHlwZXMgdG8gbm90IGJlIGFuIGFycmF5IHdoZXJlIGludGVybmFsVHlwZSBpcyBwcmVzZW50IGluIHRoZSBBQkkgaW5kaWNhdGluZyBpdGVtIGlzIGEgc3RydWN0dXJlXG4gIGNvbnN0IHR5cGUgPSB0dXBsZVR5cGVzW2ldID8gdHVwbGVUeXBlc1tpXS50eXBlIDogbnVsbDtcblxuICBpZiAodHlwZSA9PT0gJ2FkZHJlc3MnICYmIHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBpdGVtO1xuICB9XG5cbiAgaWYgKHR5cGUgPT09ICdhZGRyZXNzW10nICYmIEFycmF5LmlzQXJyYXkoaXRlbSkpIHtcbiAgICByZXR1cm4gaXRlbS5tYXAoKGEpID0+IGEgYXMgc3RyaW5nKTtcbiAgfVxuXG4gIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gICAgcmV0dXJuIGRlZXBTdHJpcFR1cGxlQWRkcmVzc2VzKGl0ZW0sIHR1cGxlVHlwZXMpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gIHJldHVybiBpdGVtO1xufSk7XG5cbmNvbnN0IHRvSGV4U3RyaW5nID0gKGJ5dGVBcnJheTogQnVmZmVyKSA9PiB7XG4gIHJldHVybiBBcnJheS5mcm9tKGJ5dGVBcnJheSwgZnVuY3Rpb24gKGJ5dGUpIHtcbiAgICByZXR1cm4gKCcwJyArIChieXRlICYgMHhGRikudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XG4gIH0pLmpvaW4oJycpO1xufTtcblxuZXhwb3J0IGNsYXNzIElucHV0RGF0YURlY29kZXIge1xuICByZWFkb25seSBhYmk6IEFiaUl0ZW1bXTtcblxuICBjb25zdHJ1Y3RvciAocHJvcDogc3RyaW5nIHwgQWJpSXRlbVtdIHwgYW55KSB7XG4gICAgdGhpcy5hYmkgPSBbXTtcblxuICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuYWJpID0gSlNPTi5wYXJzZShwcm9wKSBhcyBBYmlJdGVtW107XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEFCSTogJyArIChlcnIgYXMgRXJyb3IpLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2hlY2tBcnJheUFiaUl0ZW1zKHByb3ApKSB7XG4gICAgICB0aGlzLmFiaSA9IHByb3AgYXMgQWJpSXRlbVtdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNdXN0IHBhc3MgQUJJIGFycmF5IG9iamVjdCBvciBmaWxlIHBhdGggdG8gY29uc3RydWN0b3InKTtcbiAgICB9XG4gIH1cblxuICBkZWNvZGVDb25zdHJ1Y3RvciAoZGF0YTogQnVmZmVyIHwgc3RyaW5nKTogSW5wdXREYXRhIHtcbiAgICBpZiAoaXNCdWZmZXIoZGF0YSkpIHtcbiAgICAgIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykge1xuICAgICAgZGF0YSA9ICcnO1xuICAgIH1cblxuICAgIGRhdGEgPSBkYXRhLnRyaW0oKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hYmkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG9iaiA9IHRoaXMuYWJpW2ldO1xuXG4gICAgICBpZiAob2JqLnR5cGUgIT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1ldGhvZCA9IG9iai5uYW1lIHx8IG51bGw7XG4gICAgICBjb25zdCBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShvYmopO1xuICAgICAgY29uc3QgdHlwZXMgPSBvYmouaW5wdXRzID8gb2JqLmlucHV0cy5tYXAoKHgpID0+IHgudHlwZSkgOiBbXTtcbiAgICAgIGNvbnN0IG5hbWVzID0gb2JqLmlucHV0cyA/IG9iai5pbnB1dHMubWFwKCh4KSA9PiB4Lm5hbWUpIDogW107XG5cbiAgICAgIC8vIHRha2UgbGFzdCAzMiBieXRlc1xuICAgICAgZGF0YSA9IGRhdGEuc2xpY2UoLTI1Nik7XG5cbiAgICAgIGlmIChkYXRhLmxlbmd0aCAhPT0gMjU2KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZmFpbCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5pbmRleE9mKCcweCcpICE9PSAwKSB7XG4gICAgICAgIGRhdGEgPSBgMHgke2RhdGF9YDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgX2lucHV0cyA9IGV0aGVycy5BYmlDb2Rlci5kZWZhdWx0QWJpQ29kZXIoKS5kZWNvZGUodHlwZXMsIGRhdGEpO1xuXG4gICAgICBjb25zdCBpbnB1dHMgPSBkZWVwUmVtb3ZlVW53YW50ZWRBcnJheVByb3BlcnRpZXMoX2lucHV0cyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1ldGhvZE5hbWUsXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgdHlwZXMsXG4gICAgICAgIGlucHV0cyxcbiAgICAgICAgbmFtZXNcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdub3QgZm91bmQnKTtcbiAgfVxuXG4gIGRlY29kZURhdGEgKGRhdGE6IEJ1ZmZlciB8IHN0cmluZykge1xuICAgIGlmIChpc0J1ZmZlcihkYXRhKSkge1xuICAgICAgZGF0YSA9IGRhdGEudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XG4gICAgICBkYXRhID0gJyc7XG4gICAgfVxuXG4gICAgZGF0YSA9IGRhdGEudHJpbSgpO1xuXG4gICAgY29uc3QgZGF0YUJ1ZiA9IEJ1ZmZlci5mcm9tKGRhdGEucmVwbGFjZSgvXjB4LywgJycpLCAnaGV4Jyk7XG4gICAgY29uc3QgbWV0aG9kSWQgPSB0b0hleFN0cmluZyhkYXRhQnVmLnN1YmFycmF5KDAsIDQpKTtcbiAgICBjb25zdCBpbnB1dHNCdWYgPSBkYXRhQnVmLnN1YmFycmF5KDQpO1xuXG4gICAgbGV0IHJlc3VsdDogSW5wdXREYXRhID0geyBtZXRob2Q6IG51bGwsIG1ldGhvZE5hbWU6IG51bGwsIHR5cGVzOiBbXSwgaW5wdXRzOiBbXSwgbmFtZXM6IFtdIH07XG5cbiAgICBmb3IgKGNvbnN0IGFiaSBvZiB0aGlzLmFiaSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGFiaS50eXBlID09PSAnY29uc3RydWN0b3InKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWJpLnR5cGUgPT09ICdldmVudCcpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IGFiaS5uYW1lIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBnZXRNZXRob2ROYW1lKGFiaSk7XG4gICAgICAgIGNvbnN0IHR5cGVzID0gYWJpLmlucHV0c1xuICAgICAgICAgID8gYWJpLmlucHV0cy5tYXAoKHgpID0+IHtcbiAgICAgICAgICAgIGlmICh4LnR5cGUuaW5jbHVkZXMoJ3R1cGxlJykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geC50eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBbXTtcblxuICAgICAgICBjb25zdCBuYW1lcyA9IGFiaS5pbnB1dHNcbiAgICAgICAgICA/IGFiaS5pbnB1dHMubWFwKCh4KSA9PiB7XG4gICAgICAgICAgICBpZiAoeC50eXBlLmluY2x1ZGVzKCd0dXBsZScpICYmIHguY29tcG9uZW50cykge1xuICAgICAgICAgICAgICByZXR1cm4gW3gubmFtZSwgeC5jb21wb25lbnRzLm1hcCgoYSkgPT4gYS5uYW1lKV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geC5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBbXTtcblxuICAgICAgICBjb25zdCBoYXNoID0gZ2V0TWV0aG9kSWQoYWJpKTtcblxuICAgICAgICBpZiAoaGFzaCA9PT0gbWV0aG9kSWQpIHtcbiAgICAgICAgICBsZXQgaW5wdXRzOiBSZXN1bHQgPSBbXTtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBpbnB1dHMgPSBldGhlcnMuQWJpQ29kZXIuZGVmYXVsdEFiaUNvZGVyKCkuZGVjb2RlKHR5cGVzLCBpbnB1dHNCdWYpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgaWZjID0gbmV3IGV0aGVycy5JbnRlcmZhY2UoW10pO1xuXG4gICAgICAgICAgICAgIGlucHV0cyA9IGlmYy5kZWNvZGVGdW5jdGlvbkRhdGEoZXRoZXJzLkZ1bmN0aW9uRnJhZ21lbnQuZnJvbShhYmkgYXMgSnNvbkZyYWdtZW50KSwgZGF0YSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVE9ETzogZG8gdGhpcyBub3JtYWxpemF0aW9uIGludG8gbm9ybWFsaXplQWRkcmVzc2VzXG4gICAgICAgICAgbGV0IF9pbnB1dHM6IGFueVtdID0gW107XG5cbiAgICAgICAgICBfaW5wdXRzID0gaW5wdXRzLm1hcCgoaW5wdXQsIGkpID0+IHtcbiAgICAgICAgICAgIGlmICgodHlwZXNbaV0gYXMgQWJpSW5wdXQpLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgdHVwbGVUeXBlcyA9ICh0eXBlc1tpXSBhcyBBYmlJbnB1dCkuY29tcG9uZW50cztcblxuICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1yZXR1cm4sQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuICAgICAgICAgICAgICByZXR1cm4gZGVlcFN0cmlwVHVwbGVBZGRyZXNzZXMoaW5wdXQsIHR1cGxlVHlwZXMgYXMgQWJpSW5wdXRbXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlc1tpXSA9PT0gJ2FkZHJlc3MnICYmIHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZXNbaV0gPT09ICdhZGRyZXNzW10nICYmIEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpbnB1dC5tYXAoKGFkZHJlc3MpID0+IGFkZHJlc3MgYXMgc3RyaW5nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBNYXAgYW55IHR1cGxlIHR5cGVzIGludG8gYXJyYXlzXG4gICAgICAgICAgY29uc3QgdHlwZXNUb1JldHVybiA9IHR5cGVzLm1hcChnZW5UeXBlKTtcblxuICAgICAgICAgIC8vIGRlZmF1bHRBYmlDb2RlciBhdHRhY2hlcyBzb21lIHVud2FudGVkIHByb3BlcnRpZXMgdG8gdGhlIGxpc3Qgb2JqZWN0XG4gICAgICAgICAgX2lucHV0cyA9IGRlZXBSZW1vdmVVbndhbnRlZEFycmF5UHJvcGVydGllcyhfaW5wdXRzKTtcblxuICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgIG1ldGhvZE5hbWUsXG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICB0eXBlczogdHlwZXNUb1JldHVybixcbiAgICAgICAgICAgIGlucHV0czogX2lucHV0cyxcbiAgICAgICAgICAgIG5hbWVzXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFyZXN1bHQubWV0aG9kKSB7XG4gICAgICBmb3IgKGNvbnN0IG9iaiBvZiB0aGlzLmFiaSkge1xuICAgICAgICBpZiAob2JqLnR5cGUgPT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvYmoudHlwZSA9PT0gJ2V2ZW50Jykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWV0aG9kID0gb2JqLm5hbWUgfHwgbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGlmYyA9IG5ldyBldGhlcnMuSW50ZXJmYWNlKFtdKTtcbiAgICAgICAgICBjb25zdCBfcmVzdWx0ID0gaWZjLmRlY29kZUZ1bmN0aW9uRGF0YShldGhlcnMuRnVuY3Rpb25GcmFnbWVudC5mcm9tKG9iaiBhcyBGdW5jdGlvbkZyYWdtZW50KSwgZGF0YSk7XG4gICAgICAgICAgY29uc3QgaW5wdXRzID0gZGVlcFJlbW92ZVVud2FudGVkQXJyYXlQcm9wZXJ0aWVzKF9yZXN1bHQpO1xuXG4gICAgICAgICAgcmVzdWx0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgICByZXN1bHQubWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUob2JqKTtcbiAgICAgICAgICByZXN1bHQuaW5wdXRzID0gaW5wdXRzO1xuICAgICAgICAgIHJlc3VsdC5uYW1lcyA9IG9iai5pbnB1dHNcbiAgICAgICAgICAgID8gb2JqLmlucHV0cy5tYXAoKHgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHgudHlwZS5pbmNsdWRlcygndHVwbGUnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbeC5uYW1lLCB4LmNvbXBvbmVudHM/Lm1hcCgoYSkgPT4gYS5uYW1lKSB8fCAnJ107XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHgubmFtZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogW107XG4gICAgICAgICAgY29uc3QgdHlwZXMgPSBvYmouaW5wdXRzXG4gICAgICAgICAgICA/IG9iai5pbnB1dHMubWFwKCh4KSA9PiB7XG4gICAgICAgICAgICAgIGlmICh4LnR5cGUuaW5jbHVkZXMoJ3R1cGxlJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geC50eXBlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICAgIHJlc3VsdC50eXBlcyA9IHR5cGVzLm1hcChnZW5UeXBlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghcmVzdWx0Lm1ldGhvZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IHRoaXMuZGVjb2RlQ29uc3RydWN0b3IoZGF0YSk7XG5cbiAgICAgICAgaWYgKGRlY29kZWQpIHtcbiAgICAgICAgICByZXR1cm4gZGVjb2RlZDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7IH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyIEBzdWJ3YWxsZXQvZXh0ZW5zaW9uLWtvbmkgYXV0aG9ycyAmIGNvbnRyaWJ1dG9yc1xuLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcblxuaW1wb3J0IHsgX0NoYWluSW5mbyB9IGZyb20gJ0BzdWJ3YWxsZXQvY2hhaW4tbGlzdC90eXBlcyc7XG5pbXBvcnQgeyBFdm1UcmFuc2FjdGlvbkFyZywgTmVzdGVkQXJyYXksIFBhcnNlRXZtVHJhbnNhY3Rpb25EYXRhLCBSZXNwb25zZVBhcnNlRXZtQ29udHJhY3RJbnB1dCwgUmVzcG9uc2VRclBhcnNlUkxQIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL0tvbmlUeXBlcyc7XG5pbXBvcnQgeyBfRVJDMjBfQUJJLCBfRVJDNzIxX0FCSSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS9oZWxwZXInO1xuaW1wb3J0IHsgX0V2bUFwaSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc2VydmljZXMvY2hhaW4tc2VydmljZS90eXBlcyc7XG5pbXBvcnQgeyBfZ2V0RXZtQWJpRXhwbG9yZXIsIF9nZXRFdm1DaGFpbklkLCBfaXNDaGFpbkV2bUNvbXBhdGlibGUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL2NoYWluLXNlcnZpY2UvdXRpbHMnO1xuaW1wb3J0IHsgY3JlYXRlVHJhbnNhY3Rpb25Gcm9tUkxQLCBUcmFuc2FjdGlvbiBhcyBRclRyYW5zYWN0aW9uIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS91dGlscy9ldGgnO1xuaW1wb3J0IHsgSW5wdXREYXRhRGVjb2RlciB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvdXRpbHMvZXRoL3BhcnNlVHJhbnNhY3Rpb24vYmFzZSc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IEJpZ04gZnJvbSAnYmlnbnVtYmVyLmpzJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuY29uc3QgQUJJcyA9IFtfRVJDMjBfQUJJLCBfRVJDNzIxX0FCSV07XG5cbmNvbnN0IGdlbk5hbWUgPSAobmFtZTogTmVzdGVkQXJyYXk8c3RyaW5nPik6IHN0cmluZyA9PiB7XG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbmFtZTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lWzFdKSkge1xuICAgICAgY29uc3QgX25hbWUgPSBuYW1lWzBdIGFzIHN0cmluZztcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gZ2VuTmFtZShuYW1lWzFdKTtcblxuICAgICAgcmV0dXJuIGAke19uYW1lfSgke2NoaWxkcmVufSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmFtZS5qb2luKCcsICcpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgZ2VuSW5wdXQgPSAoaW5wdXQ6IE5lc3RlZEFycmF5PGFueT4pOiBzdHJpbmcgPT4ge1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICBjb25zdCBhcnI6IHN0cmluZ1tdID0gaW5wdXQubWFwKGdlbklucHV0KTtcblxuICAgIHJldHVybiBgWyR7YXJyLmpvaW4oJywgJyl9XWA7XG4gIH0gZWxzZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1yZXR1cm5cbiAgICByZXR1cm4gaW5wdXQudG9TdHJpbmcoKTtcbiAgfVxufTtcblxuY29uc3QgcGFyc2VUeXBlID0gKF90eXBlczogc3RyaW5nKTogTmVzdGVkQXJyYXk8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHR5cGVzID0gX3R5cGVzLnRyaW0oKTtcblxuICBpZiAodHlwZXMuaW5kZXhPZignKCcpICE9PSAwKSB7XG4gICAgaWYgKCF0eXBlcy5pbmNsdWRlcygnLCcpKSB7XG4gICAgICByZXR1cm4gdHlwZXMudHJpbSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhcnI6IHN0cmluZ1tdID0gW107XG4gICAgICBsZXQgcyA9IHR5cGVzO1xuXG4gICAgICBkbyB7XG4gICAgICAgIGlmIChzLmluZGV4T2YoJygnKSA9PT0gMCkge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcy5pbmRleE9mKCcoJyk7XG4gICAgICAgICAgY29uc3QgZW5kID0gcy5sYXN0SW5kZXhPZignKScpO1xuICAgICAgICAgIGNvbnN0IF9uZXcgPSBzLnNsaWNlKHN0YXJ0LCBlbmQgKyAxKTtcblxuICAgICAgICAgIGFyci5wdXNoKF9uZXcpO1xuICAgICAgICAgIHMgPSBzLnJlcGxhY2UoX25ldywgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcy5pbmRleE9mKCcsJyk7XG5cbiAgICAgICAgICBpZiAoc3RhcnQgIT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBzdHIgPSBzLnNsaWNlKDAsIHN0YXJ0KTtcblxuICAgICAgICAgICAgYXJyLnB1c2goc3RyKTtcbiAgICAgICAgICAgIHMgPSBzLnNsaWNlKHN0YXJ0ICsgMSkudHJpbSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcnIucHVzaChzKTtcbiAgICAgICAgICAgIHMgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKHMubGVuZ3RoKTtcblxuICAgICAgcmV0dXJuIGFyci5tYXAoKHMpID0+IHMudHJpbSgpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0eXBlcy5pbmRleE9mKCcoJyk7XG4gICAgY29uc3QgZW5kID0gdHlwZXMubGFzdEluZGV4T2YoJyknKTtcbiAgICBjb25zdCBfbmV3ID0gdHlwZXMuc2xpY2Uoc3RhcnQgKyAxLCBlbmQpO1xuXG4gICAgcmV0dXJuIHBhcnNlVHlwZShfbmV3KTtcbiAgfVxufTtcblxuY29uc3QgcGFyc2VSZXN1bHQgPSAodHlwZTogc3RyaW5nLCBpbnB1dDogTmVzdGVkQXJyYXk8YW55PiwgbmFtZTogTmVzdGVkQXJyYXk8c3RyaW5nPik6IEV2bVRyYW5zYWN0aW9uQXJnID0+IHtcbiAgY29uc3QgdHlwZXMgPSBwYXJzZVR5cGUodHlwZSk7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodHlwZXMpKSB7XG4gICAgY29uc3QgaW5wdXRzID0gaW5wdXQgYXMgTmVzdGVkQXJyYXk8YW55PltdO1xuICAgIGNvbnN0IF9uYW1lID0gKG5hbWUgYXMgTmVzdGVkQXJyYXk8c3RyaW5nPltdKVswXSBhcyBzdHJpbmc7XG4gICAgY29uc3QgbmFtZXMgPSAobmFtZSBhcyBOZXN0ZWRBcnJheTxzdHJpbmc+W10pWzFdO1xuICAgIGNvbnN0IGNoaWxkcmVuOiBFdm1UcmFuc2FjdGlvbkFyZ1tdID0gW107XG5cbiAgICB0eXBlcy5mb3JFYWNoKCh0eXBlLCBpbmRleCkgPT4ge1xuICAgICAgY2hpbGRyZW4ucHVzaChwYXJzZVJlc3VsdCh0eXBlIGFzIHN0cmluZywgaW5wdXRzW2luZGV4XSwgbmFtZXNbaW5kZXhdKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIG5hbWU6IF9uYW1lLFxuICAgICAgdmFsdWU6IGdlbklucHV0KGlucHV0KSxcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHR5cGVzLFxuICAgICAgbmFtZTogZ2VuTmFtZShuYW1lKSxcbiAgICAgIHZhbHVlOiBnZW5JbnB1dChpbnB1dClcbiAgICB9O1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgaXNDb250cmFjdEFkZHJlc3MgPSBhc3luYyAoYWRkcmVzczogc3RyaW5nLCBldm1BcGk6IF9Fdm1BcGkpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgaWYgKCFldm1BcGkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY29kZSA9IGF3YWl0IGV2bUFwaS5hcGkuZXRoLmdldENvZGUoYWRkcmVzcyk7XG5cbiAgICByZXR1cm4gY29kZSAhPT0gJzB4JztcbiAgfVxufTtcblxuY29uc3QgcGFyc2VJbnB1dFdpdGhBYmkgPSAoaW5wdXQ6IHN0cmluZywgYWJpOiBhbnkpOiBQYXJzZUV2bVRyYW5zYWN0aW9uRGF0YSB8IG51bGwgPT4ge1xuICBjb25zdCBkZWNvZGVyID0gbmV3IElucHV0RGF0YURlY29kZXIoYWJpKTtcbiAgY29uc3QgcmF3ID0gZGVjb2Rlci5kZWNvZGVEYXRhKGlucHV0KTtcblxuICBpZiAocmF3Lm1ldGhvZCAmJiByYXcubWV0aG9kTmFtZSkge1xuICAgIGNvbnN0IHRlbXA6IFBhcnNlRXZtVHJhbnNhY3Rpb25EYXRhID0ge1xuICAgICAgbWV0aG9kOiByYXcubWV0aG9kLFxuICAgICAgbWV0aG9kTmFtZTogcmF3Lm1ldGhvZE5hbWUsXG4gICAgICBhcmdzOiBbXVxuICAgIH07XG5cbiAgICByYXcudHlwZXMuZm9yRWFjaCgodHlwZSwgaW5kZXgpID0+IHtcbiAgICAgIHRlbXAuYXJncy5wdXNoKHBhcnNlUmVzdWx0KHR5cGUsIHJhdy5pbnB1dHNbaW5kZXhdLCByYXcubmFtZXNbaW5kZXhdKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGVtcDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlQ29udHJhY3RJbnB1dCA9IGFzeW5jIChpbnB1dDogc3RyaW5nLCBjb250cmFjdEFkZHJlc3M6IHN0cmluZywgbmV0d29yazogX0NoYWluSW5mbyB8IG51bGwpOiBQcm9taXNlPFJlc3BvbnNlUGFyc2VFdm1Db250cmFjdElucHV0PiA9PiB7XG4gIGZvciAoY29uc3QgYWJpIG9mIEFCSXMpIHtcbiAgICBjb25zdCB0ZW1wID0gcGFyc2VJbnB1dFdpdGhBYmkoaW5wdXQsIGFiaSk7XG5cbiAgICBpZiAodGVtcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiB0ZW1wXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGlmIChjb250cmFjdEFkZHJlc3MgJiYgbmV0d29yaykge1xuICAgIGlmIChfZ2V0RXZtQWJpRXhwbG9yZXIobmV0d29yaykpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChfZ2V0RXZtQWJpRXhwbG9yZXIobmV0d29yayksIHtcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IGNvbnRyYWN0QWRkcmVzc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZW91dDogMzAwMFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEuc3RhdHVzID09PSAnMScpIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICAgIGNvbnN0IGFiaSA9IHJlcy5kYXRhLnJlc3VsdDtcbiAgICAgICAgICBjb25zdCB0ZW1wID0gcGFyc2VJbnB1dFdpdGhBYmkoaW5wdXQsIGFiaSk7XG5cbiAgICAgICAgICBpZiAodGVtcCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcmVzdWx0OiB0ZW1wXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlc3VsdDogaW5wdXRcbiAgfTtcbn07XG5cbmNvbnN0IGdldENoYWluSW5mb0J5Q2hhaW5JZCA9IChuZXR3b3JrTWFwOiBSZWNvcmQ8c3RyaW5nLCBfQ2hhaW5JbmZvPiwgY2hhaW5JZDogbnVtYmVyKTogX0NoYWluSW5mbyB8IG51bGwgPT4ge1xuICBpZiAoIWNoYWluSWQpIHtcbiAgICBmb3IgKGNvbnN0IG4gaW4gbmV0d29ya01hcCkge1xuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobmV0d29ya01hcCwgbikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ldHdvcmtJbmZvID0gbmV0d29ya01hcFtuXTtcblxuICAgICAgaWYgKF9pc0NoYWluRXZtQ29tcGF0aWJsZShuZXR3b3JrSW5mbykpIHtcbiAgICAgICAgcmV0dXJuIG5ldHdvcmtJbmZvO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZm9yIChjb25zdCBuIGluIG5ldHdvcmtNYXApIHtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXR3b3JrTWFwLCBuKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgbmV0d29ya0luZm8gPSBuZXR3b3JrTWFwW25dO1xuXG4gICAgaWYgKF9nZXRFdm1DaGFpbklkKG5ldHdvcmtJbmZvKSA9PT0gY2hhaW5JZCkge1xuICAgICAgcmV0dXJuIG5ldHdvcmtJbmZvO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlRXZtUmxwID0gYXN5bmMgKGRhdGE6IHN0cmluZywgbmV0d29ya01hcDogUmVjb3JkPHN0cmluZywgX0NoYWluSW5mbz4sIGV2bUFwaU1hcDogUmVjb3JkPHN0cmluZywgX0V2bUFwaT4pOiBQcm9taXNlPFJlc3BvbnNlUXJQYXJzZVJMUD4gPT4ge1xuICBjb25zdCB0eDogUXJUcmFuc2FjdGlvbiB8IG51bGwgPSBjcmVhdGVUcmFuc2FjdGlvbkZyb21STFAoZGF0YSk7XG5cbiAgaWYgKCF0eCkge1xuICAgIHRocm93IG5ldyBFcnJvcih0KCdGYWlsZWQgdG8gZGVjb2RlIGRhdGEuIFBsZWFzZSB1c2UgYSB2YWxpZCBRUiBjb2RlJykpO1xuICB9XG5cbiAgY29uc3QgcmVzdWx0OiBSZXNwb25zZVFyUGFyc2VSTFAgPSB7XG4gICAgaW5wdXQ6IHR4LmRhdGEsXG4gICAgZGF0YTogdHguZGF0YSxcbiAgICBnYXNQcmljZTogbmV3IEJpZ04odHguZ2FzUHJpY2UpLnRvTnVtYmVyKCksXG4gICAgZ2FzOiBuZXcgQmlnTih0eC5nYXMpLnRvTnVtYmVyKCksXG4gICAgdG86IHR4LnRvLFxuICAgIHZhbHVlOiBuZXcgQmlnTih0eC52YWx1ZSkudG9OdW1iZXIoKSxcbiAgICBub25jZTogbmV3IEJpZ04odHgubm9uY2UpLnRvTnVtYmVyKClcbiAgfTtcblxuICBjb25zdCBuZXR3b3JrOiBfQ2hhaW5JbmZvIHwgbnVsbCA9IGdldENoYWluSW5mb0J5Q2hhaW5JZChuZXR3b3JrTWFwLCBwYXJzZUludCh0eC5ldGhlcmV1bUNoYWluSWQpKTtcblxuICBmb3IgKGNvbnN0IGFiaSBvZiBBQklzKSB7XG4gICAgY29uc3QgdGVtcCA9IHBhcnNlSW5wdXRXaXRoQWJpKHR4LmRhdGEsIGFiaSk7XG5cbiAgICBpZiAodGVtcCkge1xuICAgICAgcmVzdWx0LmRhdGEgPSB0ZW1wO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxuXG4gIGlmICh0eC50byAmJiBuZXR3b3JrKSB7XG4gICAgaWYgKGF3YWl0IGlzQ29udHJhY3RBZGRyZXNzKHR4LnRvLCBldm1BcGlNYXBbbmV0d29yay5zbHVnXSkpIHtcbiAgICAgIGlmIChfZ2V0RXZtQWJpRXhwbG9yZXIobmV0d29yaykgIT09ICcnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KF9nZXRFdm1BYmlFeHBsb3JlcihuZXR3b3JrKSwge1xuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgIGFkZHJlc3M6IHR4LnRvXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGltZW91dDogMjAwMFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEuc3RhdHVzID09PSAnMScpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgICAgICBjb25zdCBhYmkgPSByZXMuZGF0YS5yZXN1bHQ7XG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gcGFyc2VJbnB1dFdpdGhBYmkodHguZGF0YSwgYWJpKTtcblxuICAgICAgICAgICAgaWYgKHRlbXApIHtcbiAgICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSB0ZW1wO1xuXG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyBFWFRFTlNJT05fUkVRVUVTVF9VUkwgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3NlcnZpY2VzL3JlcXVlc3Qtc2VydmljZS9jb25zdGFudHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlcm5hbFJlcXVlc3QgKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiB1cmwgPT09IEVYVEVOU0lPTl9SRVFVRVNUX1VSTDtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE5LTIwMjIgQHBvbGthZG90L2V4dGVuc2lvbiBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG4vLyBSdW5zIGluIHRoZSBleHRlbnNpb24gYmFja2dyb3VuZCwgaGFuZGxpbmcgYWxsIGtleXJpbmcgYWNjZXNzXG5pbXBvcnQgJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWluamVjdC9jcm9zc2Vudic7XG5cbmltcG9ydCB0eXBlIHsgUmVxdWVzdFNpZ25hdHVyZXMsIFRyYW5zcG9ydFJlcXVlc3RNZXNzYWdlIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL3R5cGVzJztcblxuaW1wb3J0IHsgd2l0aEVycm9yTG9nIH0gZnJvbSAnQHN1YndhbGxldC9leHRlbnNpb24tYmFzZS9iYWNrZ3JvdW5kL2hhbmRsZXJzL2hlbHBlcnMnO1xuaW1wb3J0IHsgUE9SVF9DT05URU5ULCBQT1JUX0VYVEVOU0lPTiB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2UvZGVmYXVsdHMnO1xuaW1wb3J0IGhhbmRsZXJzLCB7IHN0YXRlIGFzIGtvbmlTdGF0ZSB9IGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uva29uaS9iYWNrZ3JvdW5kL2hhbmRsZXJzJztcbmltcG9ydCB7IEFjY291bnRzU3RvcmUgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL3N0b3Jlcyc7XG5pbXBvcnQgS2V5cmluZ1N0b3JlIGZyb20gJ0BzdWJ3YWxsZXQvZXh0ZW5zaW9uLWJhc2Uvc3RvcmVzL0tleXJpbmcnO1xuaW1wb3J0IGtleXJpbmcgZnJvbSAnQHN1YndhbGxldC91aS1rZXlyaW5nJztcblxuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnQHBvbGthZG90L3V0aWwnO1xuaW1wb3J0IHsgY3J5cHRvV2FpdFJlYWR5IH0gZnJvbSAnQHBvbGthZG90L3V0aWwtY3J5cHRvJztcblxuY29uc3QgSURMRV9USU1FID0gNjAwMDAgKiAyOyAvLyAyIG1pbnV0ZXNcblxubGV0IGlkbGVUaW1lcjogTm9kZUpTLlRpbWVvdXQ7XG5sZXQgd2FpdGluZ1RvU3RvcCA9IGZhbHNlO1xubGV0IG9wZW5Db3VudCA9IDA7XG5cbi8vIHNldHVwIHRoZSBub3RpZmljYXRpb24gKHNhbWUgYSBGRiBkZWZhdWx0IGJhY2tncm91bmQsIHdoaXRlIHRleHQpXG53aXRoRXJyb3JMb2coKCkgPT4gY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0QmFkZ2VCYWNrZ3JvdW5kQ29sb3IoeyBjb2xvcjogJyNkOTAwMDAnIH0pKTtcblxuZnVuY3Rpb24gaGFuZGxlRXh0ZW5zaW9uSWRsaW5nICgpIHsgLy8gaGFuZGxlIGV4dGVuc2lvbiBiZWluZyBpZGxlIHNpbmNlIHRoZSBpbml0IG9mIHRoZSBleHRlbnNpb24vYnJvd3NlclxuICB3YWl0aW5nVG9TdG9wID0gdHJ1ZTtcbiAgaWRsZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaWYgKG9wZW5Db3VudCA8PSAwKSB7XG4gICAgICBrb25pU3RhdGUuc2xlZXAoKS50aGVuKCgpID0+IHtcbiAgICAgICAgd2FpdGluZ1RvU3RvcCA9IGZhbHNlO1xuICAgICAgfSkuY2F0Y2goKGVycikgPT4gY29uc29sZS53YXJuKGVycikpO1xuICAgIH1cbiAgfSwgSURMRV9USU1FKTtcbn1cblxuLy8gbGlzdGVuIHRvIGFsbCBtZXNzYWdlcyBhbmQgaGFuZGxlIGFwcHJvcHJpYXRlbHlcbmNocm9tZS5ydW50aW1lLm9uQ29ubmVjdC5hZGRMaXN0ZW5lcigocG9ydCk6IHZvaWQgPT4ge1xuICAvLyBzaG91bGRuJ3QgaGFwcGVuLCBob3dldmVyLi4uIG9ubHkgbGlzdGVuIHRvIHdoYXQgd2Uga25vdyBhYm91dFxuICBhc3NlcnQoW1BPUlRfQ09OVEVOVCwgUE9SVF9FWFRFTlNJT05dLmluY2x1ZGVzKHBvcnQubmFtZSksIGBVbmtub3duIGNvbm5lY3Rpb24gZnJvbSAke3BvcnQubmFtZX1gKTtcblxuICBpZiAoUE9SVF9FWFRFTlNJT04gPT09IHBvcnQubmFtZSkge1xuICAgIG9wZW5Db3VudCArPSAxO1xuICAgIGtvbmlTdGF0ZS53YWtldXAoKS5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLndhcm4oZXJyKSk7XG5cbiAgICBpZiAod2FpdGluZ1RvU3RvcCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGlkbGVUaW1lcik7XG4gICAgICB3YWl0aW5nVG9TdG9wID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gbWVzc2FnZSBhbmQgZGlzY29ubmVjdCBoYW5kbGVyc1xuICBwb3J0Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lcigoZGF0YTogVHJhbnNwb3J0UmVxdWVzdE1lc3NhZ2U8a2V5b2YgUmVxdWVzdFNpZ25hdHVyZXM+KSA9PiBoYW5kbGVycyhkYXRhLCBwb3J0KSk7XG4gIHBvcnQub25EaXNjb25uZWN0LmFkZExpc3RlbmVyKCgpID0+IHtcbiAgICBpZiAoUE9SVF9FWFRFTlNJT04gPT09IHBvcnQubmFtZSkge1xuICAgICAgb3BlbkNvdW50IC09IDE7XG5cbiAgICAgIGlmIChvcGVuQ291bnQgPD0gMCkge1xuICAgICAgICB3YWl0aW5nVG9TdG9wID0gdHJ1ZTtcbiAgICAgICAgaWRsZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAga29uaVN0YXRlLnNsZWVwKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB3YWl0aW5nVG9TdG9wID0gZmFsc2U7XG4gICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gY29uc29sZS53YXJuKGVycikpO1xuICAgICAgICB9LCBJRExFX1RJTUUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59KTtcblxuLy8gVHJpZ2dlciBzaW5nbGUgbW9kZVxuLy8gY2hyb21lLnJ1bnRpbWUub25JbnN0YWxsZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24gKGRldGFpbHMpIHtcbi8vICAgaWYgKGRldGFpbHMucmVhc29uID09PSAnaW5zdGFsbCcpIHtcbi8vICAgICBvbkV4dGVuc2lvbkluc3RhbGwoKTtcbi8vICAgfVxuLy8gfSk7XG5cbi8vIFNldHVwIHVuaW5zdGFsbCBVUkwgZXZlcnkgYmFja2dyb3VuZCBzdGFydFxuY2hyb21lLnJ1bnRpbWUuc2V0VW5pbnN0YWxsVVJMKCdodHRwczovL3NsaW5rLnN1YndhbGxldC5hcHAvdW5pbnN0YWxsLWZlZWRiYWNrJyk7XG5cbmNocm9tZS5ydW50aW1lLm9uU3RhcnR1cC5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XG4gIGhhbmRsZUV4dGVuc2lvbklkbGluZygpO1xufSk7XG5cbi8vIGluaXRpYWwgc2V0dXBcbmNyeXB0b1dhaXRSZWFkeSgpXG4gIC50aGVuKCgpOiB2b2lkID0+IHtcbiAgICAvLyBsb2FkIGFsbCB0aGUga2V5cmluZyBkYXRhXG4gICAga2V5cmluZy5sb2FkQWxsKHsgc3RvcmU6IG5ldyBBY2NvdW50c1N0b3JlKCksIHR5cGU6ICdzcjI1NTE5JywgcGFzc3dvcmRfc3RvcmU6IG5ldyBLZXlyaW5nU3RvcmUoKSB9KTtcblxuICAgIGtleXJpbmcucmVzdG9yZUtleXJpbmdQYXNzd29yZCgpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAga29uaVN0YXRlLnVwZGF0ZUtleXJpbmdTdGF0ZSgpO1xuICAgIH0pO1xuICAgIGtvbmlTdGF0ZS5ldmVudFNlcnZpY2UuZW1pdCgnY3J5cHRvLnJlYWR5JywgdHJ1ZSk7XG5cbiAgICAvLyBTbGVlcCBleHRlbnNpb24gYWZ0ZXIgMiBtaW51dGVzIG9mIGluYWN0aXZpdHkgb3Igd2l0aG91dCBhbnkgYWN0aW9uXG4gICAgaGFuZGxlRXh0ZW5zaW9uSWRsaW5nKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyb3IpOiB2b2lkID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdpbml0aWFsaXphdGlvbiBmYWlsZWQnLCBlcnJvcik7XG4gIH0pO1xuIiwiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiBAc3Vid2FsbGV0L2V4dGVuc2lvbiBhdXRob3JzICYgY29udHJpYnV0b3JzXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuXG5pbXBvcnQgeyB3aXRoRXJyb3JMb2cgfSBmcm9tICdAc3Vid2FsbGV0L2V4dGVuc2lvbi1iYXNlL2JhY2tncm91bmQvaGFuZGxlcnMvaGVscGVycyc7XG5cbmNocm9tZS5ydW50aW1lLm9uSW5zdGFsbGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChkZXRhaWxzKSB7XG4gIGlmIChkZXRhaWxzLnJlYXNvbiA9PT0gJ2luc3RhbGwnKSB7XG4gICAgLy8gQWRkIHNtYWxsIHRpbWVvdXQgdG8gYXZvaWQgdW53YW50ZWQgcHJvYmxlbXMgd2l0aCB0aGUgZXh0ZW5zaW9uIHBvcHVwIGluIHRoZSBmaXJzdCB0aW1lIGxvYWRlZFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gT3BlbiBleHBhbmQgcGFnZVxuICAgICAgICBjb25zdCB1cmwgPSBgJHtjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnaW5kZXguaHRtbCcpfSMvYDtcblxuICAgICAgICB3aXRoRXJyb3JMb2coKCkgPT4gY2hyb21lLnRhYnMuY3JlYXRlKHsgdXJsIH0pKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIH1cbiAgICB9LCA5MDApO1xuICB9XG59KTtcbiIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmFtZE8gPSB7fTsiLCJ2YXIgd2VicGFja1F1ZXVlcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgcXVldWVzXCIpIDogXCJfX3dlYnBhY2tfcXVldWVzX19cIjtcbnZhciB3ZWJwYWNrRXhwb3J0cyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgZXhwb3J0c1wiKSA6IFwiX193ZWJwYWNrX2V4cG9ydHNfX1wiO1xudmFyIHdlYnBhY2tFcnJvciA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgZXJyb3JcIikgOiBcIl9fd2VicGFja19lcnJvcl9fXCI7XG52YXIgcmVzb2x2ZVF1ZXVlID0gKHF1ZXVlKSA9PiB7XG5cdGlmKHF1ZXVlICYmICFxdWV1ZS5kKSB7XG5cdFx0cXVldWUuZCA9IDE7XG5cdFx0cXVldWUuZm9yRWFjaCgoZm4pID0+IChmbi5yLS0pKTtcblx0XHRxdWV1ZS5mb3JFYWNoKChmbikgPT4gKGZuLnItLSA/IGZuLnIrKyA6IGZuKCkpKTtcblx0fVxufVxudmFyIHdyYXBEZXBzID0gKGRlcHMpID0+IChkZXBzLm1hcCgoZGVwKSA9PiB7XG5cdGlmKGRlcCAhPT0gbnVsbCAmJiB0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKSB7XG5cdFx0aWYoZGVwW3dlYnBhY2tRdWV1ZXNdKSByZXR1cm4gZGVwO1xuXHRcdGlmKGRlcC50aGVuKSB7XG5cdFx0XHR2YXIgcXVldWUgPSBbXTtcblx0XHRcdHF1ZXVlLmQgPSAwO1xuXHRcdFx0ZGVwLnRoZW4oKHIpID0+IHtcblx0XHRcdFx0b2JqW3dlYnBhY2tFeHBvcnRzXSA9IHI7XG5cdFx0XHRcdHJlc29sdmVRdWV1ZShxdWV1ZSk7XG5cdFx0XHR9LCAoZSkgPT4ge1xuXHRcdFx0XHRvYmpbd2VicGFja0Vycm9yXSA9IGU7XG5cdFx0XHRcdHJlc29sdmVRdWV1ZShxdWV1ZSk7XG5cdFx0XHR9KTtcblx0XHRcdHZhciBvYmogPSB7fTtcblx0XHRcdG9ialt3ZWJwYWNrUXVldWVzXSA9IChmbikgPT4gKGZuKHF1ZXVlKSk7XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH1cblx0fVxuXHR2YXIgcmV0ID0ge307XG5cdHJldFt3ZWJwYWNrUXVldWVzXSA9IHggPT4ge307XG5cdHJldFt3ZWJwYWNrRXhwb3J0c10gPSBkZXA7XG5cdHJldHVybiByZXQ7XG59KSk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLmEgPSAobW9kdWxlLCBib2R5LCBoYXNBd2FpdCkgPT4ge1xuXHR2YXIgcXVldWU7XG5cdGhhc0F3YWl0ICYmICgocXVldWUgPSBbXSkuZCA9IDEpO1xuXHR2YXIgZGVwUXVldWVzID0gbmV3IFNldCgpO1xuXHR2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xuXHR2YXIgY3VycmVudERlcHM7XG5cdHZhciBvdXRlclJlc29sdmU7XG5cdHZhciByZWplY3Q7XG5cdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlaikgPT4ge1xuXHRcdHJlamVjdCA9IHJlajtcblx0XHRvdXRlclJlc29sdmUgPSByZXNvbHZlO1xuXHR9KTtcblx0cHJvbWlzZVt3ZWJwYWNrRXhwb3J0c10gPSBleHBvcnRzO1xuXHRwcm9taXNlW3dlYnBhY2tRdWV1ZXNdID0gKGZuKSA9PiAocXVldWUgJiYgZm4ocXVldWUpLCBkZXBRdWV1ZXMuZm9yRWFjaChmbiksIHByb21pc2VbXCJjYXRjaFwiXSh4ID0+IHt9KSk7XG5cdG1vZHVsZS5leHBvcnRzID0gcHJvbWlzZTtcblx0Ym9keSgoZGVwcykgPT4ge1xuXHRcdGN1cnJlbnREZXBzID0gd3JhcERlcHMoZGVwcyk7XG5cdFx0dmFyIGZuO1xuXHRcdHZhciBnZXRSZXN1bHQgPSAoKSA9PiAoY3VycmVudERlcHMubWFwKChkKSA9PiB7XG5cdFx0XHRpZihkW3dlYnBhY2tFcnJvcl0pIHRocm93IGRbd2VicGFja0Vycm9yXTtcblx0XHRcdHJldHVybiBkW3dlYnBhY2tFeHBvcnRzXTtcblx0XHR9KSlcblx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRmbiA9ICgpID0+IChyZXNvbHZlKGdldFJlc3VsdCkpO1xuXHRcdFx0Zm4uciA9IDA7XG5cdFx0XHR2YXIgZm5RdWV1ZSA9IChxKSA9PiAocSAhPT0gcXVldWUgJiYgIWRlcFF1ZXVlcy5oYXMocSkgJiYgKGRlcFF1ZXVlcy5hZGQocSksIHEgJiYgIXEuZCAmJiAoZm4ucisrLCBxLnB1c2goZm4pKSkpO1xuXHRcdFx0Y3VycmVudERlcHMubWFwKChkZXApID0+IChkZXBbd2VicGFja1F1ZXVlc10oZm5RdWV1ZSkpKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZm4uciA/IHByb21pc2UgOiBnZXRSZXN1bHQoKTtcblx0fSwgKGVycikgPT4gKChlcnIgPyByZWplY3QocHJvbWlzZVt3ZWJwYWNrRXJyb3JdID0gZXJyKSA6IG91dGVyUmVzb2x2ZShleHBvcnRzKSksIHJlc29sdmVRdWV1ZShxdWV1ZSkpKTtcblx0cXVldWUgJiYgKHF1ZXVlLmQgPSAwKTtcbn07IiwidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCJ2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAob2JqKSA9PiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpIDogKG9iaikgPT4gKG9iai5fX3Byb3RvX18pO1xudmFyIGxlYWZQcm90b3R5cGVzO1xuLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vLyBtb2RlICYgMTY6IHJldHVybiB2YWx1ZSB3aGVuIGl0J3MgUHJvbWlzZS1saWtlXG4vLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuXHRpZihtb2RlICYgMSkgdmFsdWUgPSB0aGlzKHZhbHVlKTtcblx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcblx0aWYodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGlmKChtb2RlICYgNCkgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHRcdGlmKChtb2RlICYgMTYpICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdH1cblx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcblx0dmFyIGRlZiA9IHt9O1xuXHRsZWFmUHJvdG90eXBlcyA9IGxlYWZQcm90b3R5cGVzIHx8IFtudWxsLCBnZXRQcm90byh7fSksIGdldFByb3RvKFtdKSwgZ2V0UHJvdG8oZ2V0UHJvdG8pXTtcblx0Zm9yKHZhciBjdXJyZW50ID0gbW9kZSAmIDIgJiYgdmFsdWU7IHR5cGVvZiBjdXJyZW50ID09ICdvYmplY3QnICYmICF+bGVhZlByb3RvdHlwZXMuaW5kZXhPZihjdXJyZW50KTsgY3VycmVudCA9IGdldFByb3RvKGN1cnJlbnQpKSB7XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudCkuZm9yRWFjaCgoa2V5KSA9PiAoZGVmW2tleV0gPSAoKSA9PiAodmFsdWVba2V5XSkpKTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+ICh2YWx1ZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChucywgZGVmKTtcblx0cmV0dXJuIG5zO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18uaG1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG1vZHVsZSk7XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgJ2V4cG9ydHMnLCB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRzZXQ6ICgpID0+IHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignRVMgTW9kdWxlcyBtYXkgbm90IGFzc2lnbiBtb2R1bGUuZXhwb3J0cyBvciBleHBvcnRzLiosIFVzZSBFU00gZXhwb3J0IHN5bnRheCwgaW5zdGVhZDogJyArIG1vZHVsZS5pZCk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubm1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUucGF0aHMgPSBbXTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnYgPSAoZXhwb3J0cywgd2FzbU1vZHVsZUlkLCB3YXNtTW9kdWxlSGFzaCwgaW1wb3J0c09iaikgPT4ge1xuXHR2YXIgcmVxID0gZmV0Y2goX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIHdhc21Nb2R1bGVIYXNoICsgXCIubW9kdWxlLndhc21cIik7XG5cdGlmICh0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcgPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcocmVxLCBpbXBvcnRzT2JqKVxuXHRcdFx0LnRoZW4oKHJlcykgPT4gKE9iamVjdC5hc3NpZ24oZXhwb3J0cywgcmVzLmluc3RhbmNlLmV4cG9ydHMpKSk7XG5cdH1cblx0cmV0dXJuIHJlcVxuXHRcdC50aGVuKCh4KSA9PiAoeC5hcnJheUJ1ZmZlcigpKSlcblx0XHQudGhlbigoYnl0ZXMpID0+IChXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShieXRlcywgaW1wb3J0c09iaikpKVxuXHRcdC50aGVuKChyZXMpID0+IChPYmplY3QuYXNzaWduKGV4cG9ydHMsIHJlcy5pbnN0YW5jZS5leHBvcnRzKSkpO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHRcImJhY2tncm91bmRcIjogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMpW1wid2VicGFja0NodW5rX3N1YndhbGxldF9leHRlbnNpb25fa29uaVwiXSA9ICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcylbXCJ3ZWJwYWNrQ2h1bmtfc3Vid2FsbGV0X2V4dGVuc2lvbl9rb25pXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxuX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgW1widmVuZG9ycy1ub2RlX21vZHVsZXNfYmFzZTY0LWpzX2luZGV4X2pzLW5vZGVfbW9kdWxlc19hem5zX3Jlc29sdmVyLWNvcmVfZGlzdF9pbmRleF9qcy1ub2RlX21vLTk2ZDFiZVwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfYm5fanNfbGliX2JuX2pzLW5vZGVfbW9kdWxlc19idWZmZXJfaW5kZXhfanMtbm9kZV9tb2R1bGVzX2Nyb3NzLWZldGNoX2RpLTE0NDM5MFwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfaWVlZTc1NF9pbmRleF9qcy1ub2RlX21vZHVsZXNfanMtc2hhM19zcmNfc2hhM19qcy1ub2RlX21vZHVsZXNfaTE4bmV4dF9kLTA1ZmZiN1wiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfbG9kYXNoX2lzZXF1YWxfaW5kZXhfanMtbm9kZV9tb2R1bGVzX2xvZ2xldmVsX2xpYl9sb2dsZXZlbF9qcy1ub2RlX21vZHVsLTMyMDQxMlwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfcnhqc19kaXN0X2VzbTVfaW50ZXJuYWxfQmVoYXZpb3JTdWJqZWN0X2pzLW5vZGVfbW9kdWxlc19yeGpzX2Rpc3RfZXNtNV9pLWFlZDQyYVwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfd2FsbGV0Y29ubmVjdF91dGlsc19kaXN0X2luZGV4X2VzX2pzLW5vZGVfbW9kdWxlc19zcGxpdC1vbi1maXJzdF9pbmRleF9qLWNlYmQ3OFwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfYWNhbGEtbmV0d29ya19hcGlfaW5kZXhfanMtbm9kZV9tb2R1bGVzX2FzbjFfanNfbGliX2FzbjFfanMtbm9kZV9tb2R1bGVzLTZmMmUwOFwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfY3JjLTMyX2NyYzMyX2pzLW5vZGVfbW9kdWxlc19jcmVhdGUtZWNkaF9icm93c2VyX2pzLW5vZGVfbW9kdWxlc19jcmVhdGUtLTVmNWIzNFwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfY3J5cHRvLWJyb3dzZXJpZnlfaW5kZXhfanMtbm9kZV9tb2R1bGVzX2RlZmluZS1wcm9wZXJ0aWVzX2luZGV4X2pzLW5vZGVfLTY2Y2RiZFwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfZGlmZmllLWhlbGxtYW5fYnJvd3Nlcl9qcy1ub2RlX21vZHVsZXNfZWxsaXB0aWNfbGliX2VsbGlwdGljX2pzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19ldGhlcmV1bWpzX2NvbW1vbl9kaXN0X2Jyb3dzZXJfaW5kZXhfanMtbm9kZV9tb2R1bGVzX2VzNi1vYmplY3QtYXNzaWduX2ktYTI5OWE4XCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19ldnBfYnl0ZXN0b2tleV9pbmRleF9qcy1ub2RlX21vZHVsZXNfZm9yLWVhY2hfaW5kZXhfanMtbm9kZV9tb2R1bGVzX2V2ZW4tYTI0NDE3XCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19nb3BkX2luZGV4X2pzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19pbnRlcmxheV9pbnRlcmJ0Yy10eXBlc19idWlsZF9pbmRleF9qcy1ub2RlX21vZHVsZXNfanNvbi1ycGMtdG9vbHNfdXRpbHMtODBkYjY3XCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19rZWNjYWtfanNfanMtbm9kZV9tb2R1bGVzX2xvZGFzaF9tZXJnZV9pbmRleF9qc1wiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfb2FrLWZvdW5kYXRpb25fdHlwZXNfaW5kZXhfanMtbm9kZV9tb2R1bGVzX29wZW4td2ViM19vcm1sLWFwaS1kZXJpdmVfaW5kLTFhMGU3M1wiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfcHJvdG9idWZqc19pbmRleF9qcy1ub2RlX21vZHVsZXNfcHVibGljLWVuY3J5cHRfYnJvd3Nlcl9qcy1ub2RlX21vZHVsZXNfLWFmNjMzMFwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfcG9sa2Fkb3RfYXBwcy1jb25maWdfYXBpX3R5cGVzQnVuZGxlX2pzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19zbW9sZG90X2Rpc3RfbWpzX2Jhc2U2NF9qcy1ub2RlX21vZHVsZXNfc21vbGRvdF9kaXN0X21qc19jbGllbnRfanNcIixcInZlbmRvcnMtbm9kZV9tb2R1bGVzX3Ntb2xkb3RfZGlzdF9tanNfaW5kZXgtYnJvd3Nlcl9qc1wiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfc21vbGRvdF9kaXN0X21qc19pbnN0YW5jZV9hdXRvZ2VuX3dhc20wX2pzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19zbW9sZG90X2Rpc3RfbWpzX2luc3RhbmNlX2F1dG9nZW5fd2FzbV9qc1wiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfc21vbGRvdF9kaXN0X21qc19pbnN0YW5jZV9iaW5kaW5ncy1zbW9sZG90LWxpZ2h0X2pzLW5vZGVfbW9kdWxlc19zbW9sZG90LWM4OTliZVwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfc21vbGRvdF9kaXN0X21qc19pbnN0YW5jZV9pbnN0YW5jZV9qc1wiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfc3RhYmxlbGliX2VkMjU1MTlfbGliX2VkMjU1MTlfanMtbm9kZV9tb2R1bGVzX3N0cmVhbS1icm93c2VyaWZ5X2luZGV4X2pzLTMxNmI1MVwiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfdHdlZXRuYWNsLXV0aWxfbmFjbC11dGlsX2pzLW5vZGVfbW9kdWxlc191dGY4X3V0ZjhfanMtbm9kZV9tb2R1bGVzX3N1YnN0LTg0ZjE5M1wiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfd2FsbGV0Y29ubmVjdF9zaWduLWNsaWVudF9kaXN0X2luZGV4X2VzX2pzLW5vZGVfbW9kdWxlc193cnlfY29udGV4dF9saWJfLWQ3NDU5NlwiLFwiZGVmYXVsdC1leHRlbnNpb24tYmFzZV9zcmNfa29uaV9hcGlfZG90c2FtYV9kb21haW5fdHMtZXh0ZW5zaW9uLWJhc2Vfc3JjX2tvbmlfYXBpX3N0YWtpbmdfYm9uLTdhNzEwM1wiXSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbnN0YWxsYXRpb24udHNcIikpKVxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19iYXNlNjQtanNfaW5kZXhfanMtbm9kZV9tb2R1bGVzX2F6bnNfcmVzb2x2ZXItY29yZV9kaXN0X2luZGV4X2pzLW5vZGVfbW8tOTZkMWJlXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19ibl9qc19saWJfYm5fanMtbm9kZV9tb2R1bGVzX2J1ZmZlcl9pbmRleF9qcy1ub2RlX21vZHVsZXNfY3Jvc3MtZmV0Y2hfZGktMTQ0MzkwXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19pZWVlNzU0X2luZGV4X2pzLW5vZGVfbW9kdWxlc19qcy1zaGEzX3NyY19zaGEzX2pzLW5vZGVfbW9kdWxlc19pMThuZXh0X2QtMDVmZmI3XCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19sb2Rhc2hfaXNlcXVhbF9pbmRleF9qcy1ub2RlX21vZHVsZXNfbG9nbGV2ZWxfbGliX2xvZ2xldmVsX2pzLW5vZGVfbW9kdWwtMzIwNDEyXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19yeGpzX2Rpc3RfZXNtNV9pbnRlcm5hbF9CZWhhdmlvclN1YmplY3RfanMtbm9kZV9tb2R1bGVzX3J4anNfZGlzdF9lc201X2ktYWVkNDJhXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc193YWxsZXRjb25uZWN0X3V0aWxzX2Rpc3RfaW5kZXhfZXNfanMtbm9kZV9tb2R1bGVzX3NwbGl0LW9uLWZpcnN0X2luZGV4X2otY2ViZDc4XCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19hY2FsYS1uZXR3b3JrX2FwaV9pbmRleF9qcy1ub2RlX21vZHVsZXNfYXNuMV9qc19saWJfYXNuMV9qcy1ub2RlX21vZHVsZXMtNmYyZTA4XCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19jcmMtMzJfY3JjMzJfanMtbm9kZV9tb2R1bGVzX2NyZWF0ZS1lY2RoX2Jyb3dzZXJfanMtbm9kZV9tb2R1bGVzX2NyZWF0ZS0tNWY1YjM0XCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19jcnlwdG8tYnJvd3NlcmlmeV9pbmRleF9qcy1ub2RlX21vZHVsZXNfZGVmaW5lLXByb3BlcnRpZXNfaW5kZXhfanMtbm9kZV8tNjZjZGJkXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19kaWZmaWUtaGVsbG1hbl9icm93c2VyX2pzLW5vZGVfbW9kdWxlc19lbGxpcHRpY19saWJfZWxsaXB0aWNfanNcIixcInZlbmRvcnMtbm9kZV9tb2R1bGVzX2V0aGVyZXVtanNfY29tbW9uX2Rpc3RfYnJvd3Nlcl9pbmRleF9qcy1ub2RlX21vZHVsZXNfZXM2LW9iamVjdC1hc3NpZ25faS1hMjk5YThcIixcInZlbmRvcnMtbm9kZV9tb2R1bGVzX2V2cF9ieXRlc3Rva2V5X2luZGV4X2pzLW5vZGVfbW9kdWxlc19mb3ItZWFjaF9pbmRleF9qcy1ub2RlX21vZHVsZXNfZXZlbi1hMjQ0MTdcIixcInZlbmRvcnMtbm9kZV9tb2R1bGVzX2dvcGRfaW5kZXhfanNcIixcInZlbmRvcnMtbm9kZV9tb2R1bGVzX2ludGVybGF5X2ludGVyYnRjLXR5cGVzX2J1aWxkX2luZGV4X2pzLW5vZGVfbW9kdWxlc19qc29uLXJwYy10b29sc191dGlscy04MGRiNjdcIixcInZlbmRvcnMtbm9kZV9tb2R1bGVzX2tlY2Nha19qc19qcy1ub2RlX21vZHVsZXNfbG9kYXNoX21lcmdlX2luZGV4X2pzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19vYWstZm91bmRhdGlvbl90eXBlc19pbmRleF9qcy1ub2RlX21vZHVsZXNfb3Blbi13ZWIzX29ybWwtYXBpLWRlcml2ZV9pbmQtMWEwZTczXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19wcm90b2J1ZmpzX2luZGV4X2pzLW5vZGVfbW9kdWxlc19wdWJsaWMtZW5jcnlwdF9icm93c2VyX2pzLW5vZGVfbW9kdWxlc18tYWY2MzMwXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19wb2xrYWRvdF9hcHBzLWNvbmZpZ19hcGlfdHlwZXNCdW5kbGVfanNcIixcInZlbmRvcnMtbm9kZV9tb2R1bGVzX3Ntb2xkb3RfZGlzdF9tanNfYmFzZTY0X2pzLW5vZGVfbW9kdWxlc19zbW9sZG90X2Rpc3RfbWpzX2NsaWVudF9qc1wiLFwidmVuZG9ycy1ub2RlX21vZHVsZXNfc21vbGRvdF9kaXN0X21qc19pbmRleC1icm93c2VyX2pzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19zbW9sZG90X2Rpc3RfbWpzX2luc3RhbmNlX2F1dG9nZW5fd2FzbTBfanNcIixcInZlbmRvcnMtbm9kZV9tb2R1bGVzX3Ntb2xkb3RfZGlzdF9tanNfaW5zdGFuY2VfYXV0b2dlbl93YXNtX2pzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19zbW9sZG90X2Rpc3RfbWpzX2luc3RhbmNlX2JpbmRpbmdzLXNtb2xkb3QtbGlnaHRfanMtbm9kZV9tb2R1bGVzX3Ntb2xkb3QtYzg5OWJlXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19zbW9sZG90X2Rpc3RfbWpzX2luc3RhbmNlX2luc3RhbmNlX2pzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19zdGFibGVsaWJfZWQyNTUxOV9saWJfZWQyNTUxOV9qcy1ub2RlX21vZHVsZXNfc3RyZWFtLWJyb3dzZXJpZnlfaW5kZXhfanMtMzE2YjUxXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc190d2VldG5hY2wtdXRpbF9uYWNsLXV0aWxfanMtbm9kZV9tb2R1bGVzX3V0ZjhfdXRmOF9qcy1ub2RlX21vZHVsZXNfc3Vic3QtODRmMTkzXCIsXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc193YWxsZXRjb25uZWN0X3NpZ24tY2xpZW50X2Rpc3RfaW5kZXhfZXNfanMtbm9kZV9tb2R1bGVzX3dyeV9jb250ZXh0X2xpYl8tZDc0NTk2XCIsXCJkZWZhdWx0LWV4dGVuc2lvbi1iYXNlX3NyY19rb25pX2FwaV9kb3RzYW1hX2RvbWFpbl90cy1leHRlbnNpb24tYmFzZV9zcmNfa29uaV9hcGlfc3Rha2luZ19ib24tN2E3MTAzXCJdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2JhY2tncm91bmQudHNcIikpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiIsIiJdLCJuYW1lcyI6WyJ3cmFwQnl0ZXMiLCJ1OGFUb0hleCIsIlJlcXVlc3RCeXRlc1NpZ24iLCJjb25zdHJ1Y3RvciIsInBheWxvYWQiLCJzaWduIiwiX3JlZ2lzdHJ5IiwicGFpciIsInNpZ25hdHVyZSIsImRhdGEiLCJSZXF1ZXN0RXh0cmluc2ljU2lnbiIsInJlZ2lzdHJ5IiwiY3JlYXRlVHlwZSIsInZlcnNpb24iLCJTV0Vycm9yIiwiQmFsYW5jZUVycm9yVHlwZSIsImRldGVjdFRyYW5zbGF0ZSIsInQiLCJkZWZhdWx0RXJyb3JNYXAiLCJORVRXT1JLX0VSUk9SIiwibWVzc2FnZSIsImNvZGUiLCJ1bmRlZmluZWQiLCJUT0tFTl9FUlJPUiIsIlRJTUVPVVQiLCJHRVRfQkFMQU5DRV9FUlJPUiIsIkJhbGFuY2VFcnJvciIsImVycm9yVHlwZSIsImVyck1lc3NhZ2UiLCJkZWZhdWx0RXJyIiwiVVNFUl9SRUpFQ1RFRF9SRVFVRVNUIiwiVU5BVVRIT1JJWkVEIiwiVU5TVVBQT1JURURfTUVUSE9EIiwiRElTQ09OTkVDVEVEIiwiQ0hBSU5fRElTQ09OTkVDVEVEIiwiSU5WQUxJRF9QQVJBTVMiLCJJTlRFUk5BTF9FUlJPUiIsIkV2bVByb3ZpZGVyRXJyb3IiLCJmaW5hbE1lc3NhZ2UiLCJFcnJvciIsInRvSlNPTiIsIm5hbWUiLCJCYXNpY1R4RXJyb3JUeXBlIiwiU3Rha2luZ1R4RXJyb3JUeXBlIiwiVHJhbnNmZXJUeEVycm9yVHlwZSIsIk5PVF9FTk9VR0hfQkFMQU5DRSIsIkRVUExJQ0FURV9UUkFOU0FDVElPTiIsIlVOQUJMRV9UT19TSUdOIiwiVVNFUl9SRUpFQ1RfUkVRVUVTVCIsIlVOQUJMRV9UT19TRU5EIiwiU0VORF9UUkFOU0FDVElPTl9GQUlMRUQiLCJOT1RfRU5PVUdIX0VYSVNURU5USUFMX0RFUE9TSVQiLCJVTlNVUFBPUlRFRCIsIk5PVF9FTk9VR0hfTUlOX1NUQUtFIiwiRVhDRUVEX01BWF9OT01JTkFUSU9OUyIsIkVYSVNUX1VOU1RBS0lOR19SRVFVRVNUIiwiSU5WQUxJRF9BQ1RJVkVfU1RBS0UiLCJFWENFRURfTUFYX1VOU1RBS0lORyIsIklOQUNUSVZFX05PTUlOQVRJT05fUE9PTCIsIlJFQ0VJVkVSX05PVF9FTk9VR0hfRVhJU1RFTlRJQUxfREVQT1NJVCIsIlRyYW5zYWN0aW9uRXJyb3IiLCJBTExPV0VEX1BBVEgiLCJQQVNTV09SRF9FWFBJUllfTVMiLCJrZXlyaW5nIiwiYWNjb3VudHMiLCJhY2NvdW50c09ic2VydmFibGUiLCJUeXBlUmVnaXN0cnkiLCJhc3NlcnQiLCJpc0hleCIsImtleUV4dHJhY3RTdXJpIiwibW5lbW9uaWNHZW5lcmF0ZSIsIm1uZW1vbmljVmFsaWRhdGUiLCJ3aXRoRXJyb3JMb2ciLCJjcmVhdGVTdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsIlNFRURfREVGQVVMVF9MRU5HVEgiLCJTRUVEX0xFTkdUSFMiLCJFVEhfREVSSVZFX0RFRkFVTFQiLCJnZXRTdXJpIiwic2VlZCIsInR5cGUiLCJ0cmFuc2Zvcm1BY2NvdW50cyIsIk9iamVjdCIsInZhbHVlcyIsIm1hcCIsImpzb24iLCJhZGRyZXNzIiwibWV0YSIsImlzSnNvblBheWxvYWQiLCJ2YWx1ZSIsImdlbmVzaXNIYXNoIiwiRXh0ZW5zaW9uIiwic3RhdGUiLCJjYWNoZWRVbmxvY2tzIiwiYWNjb3VudHNDcmVhdGVFeHRlcm5hbCIsImFkZEV4dGVybmFsIiwiYWNjb3VudHNDcmVhdGVIYXJkd2FyZSIsImFjY291bnRJbmRleCIsImFkZHJlc3NPZmZzZXQiLCJoYXJkd2FyZVR5cGUiLCJhZGRIYXJkd2FyZSIsImFjY291bnRzQ3JlYXRlU3VyaSIsInN1cmkiLCJhZGRVcmkiLCJhY2NvdW50c0NoYW5nZVBhc3N3b3JkIiwibmV3UGFzcyIsIm9sZFBhc3MiLCJnZXRQYWlyIiwiaXNMb2NrZWQiLCJsb2NrIiwiZGVjb2RlUGtjczgiLCJlcnJvciIsImVuY3J5cHRBY2NvdW50IiwiYWNjb3VudHNFZGl0Iiwic2F2ZUFjY291bnRNZXRhIiwiYWNjb3VudHNFeHBvcnQiLCJwYXNzd29yZCIsImV4cG9ydGVkSnNvbiIsImJhY2t1cEFjY291bnQiLCJhY2NvdW50c0ZvcmdldCIsImZvcmdldEFjY291bnQiLCJyZWZyZXNoQWNjb3VudFBhc3N3b3JkQ2FjaGUiLCJzYXZlZEV4cGlyeSIsInJlbWFpbmluZ1RpbWUiLCJEYXRlIiwibm93IiwiYWNjb3VudHNTaG93IiwiaXNTaG93aW5nIiwiaXNIaWRkZW4iLCJhY2NvdW50c1RpZSIsImFjY291bnRzVmFsaWRhdGUiLCJlIiwiYWNjb3VudHNTdWJzY3JpYmUiLCJpZCIsInBvcnQiLCJjYiIsInN1YnNjcmlwdGlvbiIsInN1YmplY3QiLCJzdWJzY3JpYmUiLCJvbkRpc2Nvbm5lY3QiLCJhZGRMaXN0ZW5lciIsImdldFZhbHVlIiwiYXV0aG9yaXplQXBwcm92ZSIsInF1ZXVlZCIsImdldEF1dGhSZXF1ZXN0IiwicmVzb2x2ZSIsImdldEF1dGhMaXN0IiwibGlzdCIsImF1dGhVcmxzIiwiYXV0aG9yaXplUmVqZWN0IiwicmVqZWN0IiwiYXV0aG9yaXplU3Vic2NyaWJlIiwiYXV0aFN1YmplY3QiLCJyZXF1ZXN0cyIsIm1ldGFkYXRhQXBwcm92ZSIsImdldE1ldGFSZXF1ZXN0IiwicmVxdWVzdCIsInNhdmVNZXRhZGF0YSIsIm1ldGFkYXRhR2V0Iiwia25vd25NZXRhZGF0YSIsImZpbmQiLCJyZXN1bHQiLCJtZXRhZGF0YUxpc3QiLCJtZXRhZGF0YVJlamVjdCIsIm1ldGFkYXRhU3Vic2NyaWJlIiwibWV0YVN1YmplY3QiLCJqc29uUmVzdG9yZSIsImZpbGUiLCJyZXN0b3JlQWNjb3VudCIsImJhdGNoUmVzdG9yZSIsInJlc3RvcmVBY2NvdW50cyIsImpzb25HZXRBY2NvdW50SW5mbyIsImNyZWF0ZUZyb21Kc29uIiwiY29uc29sZSIsInNlZWRDcmVhdGUiLCJsZW5ndGgiLCJfc2VlZCIsImNyZWF0ZUZyb21VcmkiLCJzZWVkVmFsaWRhdGUiLCJwaHJhc2UiLCJpbmNsdWRlcyIsInNwbGl0Iiwiam9pbiIsInNpZ25pbmdBcHByb3ZlUGFzc3dvcmQiLCJzYXZlUGFzcyIsImdldFNpZ25SZXF1ZXN0IiwiYWNjb3VudCIsImN1cnJlbnRNZXRhZGF0YSIsInNldFNpZ25lZEV4dGVuc2lvbnMiLCJzaWduZWRFeHRlbnNpb25zIiwidXNlckV4dGVuc2lvbnMiLCJyZWdpc3RlciIsInR5cGVzIiwic2lnbmluZ0FwcHJvdmVTaWduYXR1cmUiLCJzaWduaW5nQ2FuY2VsIiwic2lnbmluZ0lzTG9ja2VkIiwic2lnbmluZ1N1YnNjcmliZSIsInNpZ25TdWJqZWN0Iiwid2luZG93T3BlbiIsImFsbG93ZWRQYXRoIiwicGF0aCIsInBhcmFtcyIsInN1YlBhdGgiLCJwYXJhbVN0cmluZyIsImkiLCJrZXlzIiwia2V5IiwiZW50cmllcyIsInVybCIsImNocm9tZSIsImV4dGVuc2lvbiIsImdldFVSTCIsInRhYnMiLCJjcmVhdGUiLCJkZXJpdmUiLCJwYXJlbnRBZGRyZXNzIiwibWV0YWRhdGEiLCJwYXJlbnRQYWlyIiwiZXJyIiwiZGVyaXZhdGlvblZhbGlkYXRlIiwicGFyZW50UGFzc3dvcmQiLCJjaGlsZFBhaXIiLCJkZXJpdmF0aW9uQ3JlYXRlIiwiYWRkUGFpciIsInRvZ2dsZUF1dGhvcml6YXRpb24iLCJoYW5kbGUiLCJmbiIsInAiLCJjYXRjaCIsInN1YnNjcmlwdGlvbnMiLCJwb3N0TWVzc2FnZSIsImlzU3Vic2NyaXB0aW9uUnVubmluZyIsIlNXV2FybmluZyIsIndhcm5pbmdUeXBlIiwiQmFzaWNUeFdhcm5pbmdDb2RlIiwiZGVmYXVsdFdhcm5pbmdNYXAiLCJUcmFuc2FjdGlvbldhcm5pbmciLCJ3YXJuaW5nTWVzc2FnZSIsIl9Bc3NldFR5cGUiLCJBUElJdGVtU3RhdGUiLCJBU1RBUl9SRUZSRVNIX0JBTEFOQ0VfSU5URVJWQUwiLCJTVUJfVE9LRU5fUkVGUkVTSF9CQUxBTkNFX0lOVEVSVkFMIiwiZ2V0RVZNQmFsYW5jZSIsImdldEVSQzIwQ29udHJhY3QiLCJnZXRQU1AyMkNvbnRyYWN0UHJvbWlzZSIsImdldERlZmF1bHRXZWlnaHRWMiIsIl9CQUxBTkNFX0NIQUlOX0dST1VQIiwiX01BTlRBX1pLX0NIQUlOX0dST1VQIiwiX1BVUkVfRVZNX0NIQUlOUyIsIl9aS19BU1NFVF9QUkVGSVgiLCJfY2hlY2tTbWFydENvbnRyYWN0U3VwcG9ydEJ5Q2hhaW4iLCJfZ2V0Q2hhaW5OYXRpdmVUb2tlblNsdWciLCJfZ2V0Q29udHJhY3RBZGRyZXNzT2ZUb2tlbiIsIl9nZXRUb2tlbk9uQ2hhaW5Bc3NldElkIiwiX2dldFRva2VuT25DaGFpbkluZm8iLCJfaXNDaGFpbkV2bUNvbXBhdGlibGUiLCJfaXNQdXJlRXZtQ2hhaW4iLCJfaXNTdWJzdHJhdGVSZWxheUNoYWluIiwiY2F0ZWdvcnlBZGRyZXNzZXMiLCJzdW1CTiIsIkJpZ04iLCJCTiIsIkJOX1pFUk8iLCJzdWJzY3JpYmVCYWxhbmNlIiwiYWRkcmVzc2VzIiwiY2hhaW5JbmZvTWFwIiwic3Vic3RyYXRlQXBpTWFwIiwiZXZtQXBpTWFwIiwiY2FsbGJhY2siLCJzdWJzdHJhdGVBZGRyZXNzZXMiLCJldm1BZGRyZXNzZXMiLCJ1bnN1Ykxpc3QiLCJjaGFpblNsdWciLCJjaGFpbkluZm8iLCJ1c2VBZGRyZXNzZXMiLCJuYXRpdmVUb2tlbkluZm8iLCJnZXROYXRpdmVUb2tlbkluZm8iLCJzdWJzY3JpYmVFVk1CYWxhbmNlIiwiaW5kZXhPZiIsImZ1bmdpYmxlVG9rZW5zQnlDaGFpbiIsImNoYWluU2VydmljZSIsImdldEZ1bmdpYmxlVG9rZW5zQnlDaGFpbiIsImdldFRpbWUiLCJ0b2tlbiIsInRva2VuU2x1ZyIsInNsdWciLCJmcmVlIiwibG9ja2VkIiwiUkVBRFkiLCJ0aW1lc3RhbXAiLCJmb3JFYWNoIiwibmV0d29ya0FQSSIsImlzUmVhZHkiLCJzdWJzY3JpYmVTdWJzdHJhdGVCYWxhbmNlIiwic3ViUHJvbSIsInRoZW4iLCJ1bnN1YiIsImNoYWluIiwiY2FsbEJhY2siLCJ1bnN1Yk5hdGl2ZVRva2VuIiwia2ludHN1Z2kiLCJnZW5zaGlybyIsImVxdWlsaWJyaXVtX3BhcmFjaGFpbiIsInN1YnNjcmliZVdpdGhTeXN0ZW1BY2NvdW50UGFsbGV0IiwiYXBpIiwidW5zdWJMb2NhbFRva2VuIiwidW5zdWJFdm1Db250cmFjdFRva2VuIiwidW5zdWJXYXNtQ29udHJhY3RUb2tlbiIsImJpZnJvc3QiLCJzdWJzY3JpYmVUb2tlbnNBY2NvdW50c1BhbGxldCIsInN0YXRlbWluZSIsInN1YnNjcmliZUFzc2V0c0FjY291bnRQYWxsZXQiLCJzdWJzY3JpYmVFcUJhbGFuY2VBY2NvdW50UGFsbGV0Iiwic3Vic2NyaWJlRXF1aWxpYnJpdW1Ub2tlbkJhbGFuY2UiLCJzdWJzY3JpYmVFUkMyMEludGVydmFsIiwiUFNQMjIiLCJzdWJzY3JpYmVQU1AyMkJhbGFuY2UiLCJ3YXJuIiwiY2hhaW5OYXRpdmVUb2tlblNsdWciLCJxdWVyeSIsInN5c3RlbSIsIm11bHRpIiwiYmFsYW5jZXMiLCJ0b3RhbCIsInJlc2VydmVkIiwibWlzY0Zyb3plbiIsImZlZUZyb3plbiIsInBvb2xlZFN0YWtpbmdCYWxhbmNlIiwibm9taW5hdGlvblBvb2xzIiwicG9vbE1lbWJlckRhdGFzIiwicG9vbE1lbWJlcnMiLCJfcG9vbE1lbWJlckRhdGEiLCJwb29sTWVtYmVyRGF0YSIsInRvUHJpbWl0aXZlIiwicG9vbGVkQmFsYW5jZSIsInBvaW50cyIsInRvU3RyaW5nIiwiYWRkIiwidW5ib25kaW5nRXJhcyIsImFtb3VudCIsImJhbGFuY2UiLCJ0b0JuIiwiZnJvemVuIiwiZ3QiLCJzdWIiLCJndGUiLCJzdWJzdHJhdGVJbmZvIiwidG9rZW5MaXN0IiwiZXJjMjBDb250cmFjdE1hcCIsImdldFRva2VuQmFsYW5jZXMiLCJ0b2tlbkluZm8iLCJjb250cmFjdCIsImJhbGFuY2VMaXN0IiwiUHJvbWlzZSIsImFsbCIsIm1ldGhvZHMiLCJiYWxhbmNlT2YiLCJjYWxsIiwibG9nIiwiZ2V0QXNzZXRCeUNoYWluQW5kQXNzZXQiLCJFUkMyMCIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwicHNwMjJDb250cmFjdE1hcCIsIl9iYWxhbmNlT2YiLCJnYXNMaW1pdCIsImJhbGFuY2VPYmoiLCJvdXRwdXQiLCJvayIsIk9rIiwiYmFsIiwiaW5jbHVkZU5hdGl2ZVRva2VuIiwidG9rZW5UeXBlcyIsIk5BVElWRSIsIkxPQ0FMIiwidG9rZW5NYXAiLCJhc3NldElkIiwidG9rZW5GcmVlQmFsYW5jZSIsImJhbGFuY2VzRGF0YSIsIkpTT04iLCJwYXJzZSIsInYwIiwiZnJlZVRva2VuQmFsYW5jZSIsInBhcnNlSW50IiwiYm5GcmVlVG9rZW5CYWxhbmNlIiwicG9zaXRpdmUiLCJ0b2tlbkJhbGFuY2UiLCJlcUJhbGFuY2VzIiwiYiIsImFzUG9zaXRpdmUiLCJvbkNoYWluSW5mbyIsInRva2VucyIsImZyZWVCYWxhbmNlIiwibG9ja2VkQmFsYW5jZSIsIm9yaWdpbkNoYWluIiwic3ltYm9sIiwic3RhcnRzV2l0aCIsImFzc2V0SW5kZXgiLCJhc3NldHMiLCJiZGF0YSIsInRvSHVtYW4iLCJhZGRyZXNzQmFsYW5jZSIsIlN0cmluZyIsInJlcGxhY2VBbGwiLCJpc0Zyb3plbiIsImJhbGFuY2VJdGVtIiwiUEVORElORyIsImdldEJhbGFuY2UiLCJ1bnN1YjIiLCJDT01NT05fQ0hBSU5fU0xVR1MiLCJDcm93ZGxvYW5QYXJhU3RhdGUiLCJBQ0FMQV9SRUZSRVNIX0NST1dETE9BTl9JTlRFUlZBTCIsIl9nZXRDaGFpblN1YnN0cmF0ZUFkZHJlc3NQcmVmaXgiLCJfZ2V0U3Vic3RyYXRlUGFyYUlkIiwiX2dldFN1YnN0cmF0ZVJlbGF5UGFyZW50IiwiX2lzU3Vic3RyYXRlUGFyYUNoYWluIiwicmVmb3JtYXRBZGRyZXNzIiwiYXhpb3MiLCJnZXRSUENDcm93ZGxvYW4iLCJwYXJlbnRBUEkiLCJwYXJhSWQiLCJoZXhBZGRyZXNzZXMiLCJwYXJhU3RhdGUiLCJ1bnN1YlByb21pc2UiLCJjcm93ZGxvYW4iLCJvd25Db250cmlidXRpb25zIiwiY29udHJpYnV0ZSIsIml0ZW0iLCJycyIsInN1YnNjcmliZUFjYWxhQ29udHJpYnV0ZUludGVydmFsIiwicG9sa2Fkb3RBZGRyZXNzZXMiLCJhY2FsYUNvbnRyaWJ1dGlvbkFwaSIsImdldENvbnRyaWJ1dGVJbmZvIiwicG9sa2Fkb3RBZGRyZXNzIiwiZ2V0IiwicmVzTGlzdCIsInJlcyIsImFjYWxhIiwidG90YWxET1RMb2NrZWQiLCJnZXRDcm93ZGxvYW5GdW5kc1N0YXR1cyIsImxlYXNlcyIsInNsb3RzIiwibGVhc2VzUGFyYUlkcyIsImFyZ3MiLCJmdW5kcyIsIm5ld1JhaXNlIiwibmV3UmFpc2VQYXJhSWRzIiwicmVkdWNlIiwic3RhdGVNYXAiLCJmdW5kRGF0YSIsInBhcmFTdHIiLCJDT01QTEVURUQiLCJPTkdPSU5HIiwic3Vic2NyaWJlQ3Jvd2Rsb2FuIiwidW5zdWJNYXAiLCJLVVNBTUEiLCJQT0xLQURPVCIsInBvbGthZG90QVBJIiwicG9sa2Fkb3RGdW5kc1N0YXR1c01hcCIsImt1c2FtYUFQSSIsImt1c2FtYUZ1bmRzU3RhdHVzTWFwIiwidG9IZXgiLCJuZXR3b3JrS2V5IiwicGFyZW50Q2hhaW4iLCJjcm93ZGxvYW5DYiIsIkFDQUxBIiwiYWNhbGFBZGRyZXNzZXMiLCJoZXhUb1U4YSIsImZvcm1hdEFyZ3MiLCJjYWxsSW5zdGFuY2UiLCJwYXJhbUFyZ0t2QXJyYXkiLCJhcmd1bWVudCIsInRvUmF3VHlwZSIsInN0cmluZ2lmeSIsInYiLCJhcmdOYW1lIiwicHVzaCIsImFyZ1ZhbHVlIiwicGFyc2VTdWJzdHJhdGVUcmFuc2FjdGlvbiIsImFwaVByb21pc2UiLCJub25jZSIsInRvTnVtYmVyIiwidGlwIiwic3BlY1ZlciIsInNwZWNWZXJzaW9uIiwiX2VyYSIsImVyYSIsImlzTW9ydGFsRXJhIiwicGVyaW9kIiwiYXNNb3J0YWxFcmEiLCJwaGFzZSIsIl9tZXRob2QiLCJtZXRob2QiLCJzZWN0aW9uTWV0aG9kIiwic2VjdGlvbiIsImZpcnN0QXJnIiwiYmFzZUluZm8iLCJtZXRob2ROYW1lIiwiYyIsImdldFdhc21Db250cmFjdEdhc0xpbWl0IiwiX0JBTEFOQ0VfVE9LRU5fR1JPVVAiLCJfVFJBTlNGRVJfQ0hBSU5fR1JPVVAiLCJfVFJBTlNGRVJfTk9UX1NVUFBPUlRFRF9DSEFJTlMiLCJfaXNOYXRpdmVUb2tlbiIsIl9pc1Rva2VuV2FzbVNtYXJ0Q29udHJhY3QiLCJpc1JlZkNvdW50IiwiYWNjb3VudEluZm8iLCJyZWZjb3VudCIsImNoZWNrUmVmZXJlbmNlQ291bnQiLCJhcGlQcm9wcyIsInR4IiwiaXNaZXJvIiwiY29uc3VtZXJzIiwiY2hlY2tTdXBwb3J0VHJhbnNmZXIiLCJzdWJzdHJhdGVBcGkiLCJzdXBwb3J0VHJhbnNmZXIiLCJzdXBwb3J0VHJhbnNmZXJBbGwiLCJpc1R4Q3VycmVuY2llc1N1cHBvcnRlZCIsImN1cnJlbmNpZXMiLCJpc1R4QmFsYW5jZXNTdXBwb3J0ZWQiLCJpc1R4VG9rZW5zU3VwcG9ydGVkIiwiaXNUeEVxQmFsYW5jZXNTdXBwb3J0ZWQiLCJjb250cmFjdHMiLCJjcmFiIiwiYml0Y291bnRyeSIsInNvcmFfc3Vic3RyYXRlIiwiYXZhaWwiLCJjcmVhdGVUcmFuc2ZlckV4dHJpbnNpYyIsImZyb20iLCJ0byIsInRyYW5zZmVyQWxsIiwidHJhbnNmZXIiLCJpc1R4QXNzZXRzU3VwcG9ydGVkIiwidHJhbnNmZXJBbW91bnQiLCJjb250cmFjdFByb21pc2UiLCJ0cmFuc2ZlcktlZXBBbGl2ZSIsInBlbmR1bHVtIiwia3RvbiIsImdldFJhbmRvbUlwZnNHYXRld2F5IiwiQmFzZU5mdEFwaSIsImlzVXJsIiwiZmV0Y2giLCJhY2FsYUV4dGVybmFsQmFzZVVybCIsIkFjYWxhTmZ0QXBpIiwicGFyc2VVcmwiLCJpbnB1dCIsImdldE5mdHMiLCJhc3NldElkcyIsInJlc3AiLCJvcm1sTkZUIiwidG9rZW5zQnlPd25lciIsImNsYXNzSWQiLCJ0b2tlbklkIiwicGFyc2VUb2tlbklkIiwiZ2V0Q29sbGVjdGlvbkRldGFpbHMiLCJjb2xsZWN0aW9uSWQiLCJtZXRhZGF0YUNvbGxlY3Rpb24iLCJjbGFzc2VzIiwiZ2V0TWV0YWRhdGEiLCJpbWFnZSIsImdldFRva2VuRGV0YWlscyIsImhhbmRsZU5mdCIsImNvbGxlY3Rpb25JZHMiLCJuZnRJZHMiLCJwYXJzZWRDbGFzc0lkIiwicGFyc2VkVG9rZW5JZCIsImNvbGxlY3Rpb25NZXRhIiwicGFyc2VkTmZ0IiwiZGVzY3JpcHRpb24iLCJleHRlcm5hbFVybCIsIm93bmVyIiwicGFyc2VkQ29sbGVjdGlvbiIsImNvbGxlY3Rpb25OYW1lIiwidXBkYXRlSXRlbSIsInVwZGF0ZUNvbGxlY3Rpb24iLCJoYW5kbGVOZnRzIiwiZmV0Y2hOZnRzIiwiY29ubmVjdCIsImhlYWRlcnMiLCJtZXRhZGF0YVVybCIsIkJJVF9DT1VOVFJZX0lQRlNfU0VSVkVSIiwiQklUX0NPVU5UUllfTEFORF9FU1RBVEVfTUVUQURBVEFfQVBJIiwiaGV4VG9CbiIsIkJpdENvdW50cnlOZnRBcGkiLCJvbkNoYWluTWV0YSIsImF0dHJpYnV0ZXMiLCJjYXRlZ29yeSIsImhleE1ldGF2ZXJzZUlkIiwibWV0YXZlcnNlSWQiLCJwYXJzZU1ldGFkYXRhIiwidHJhaXRMaXN0IiwidHJhaXRzIiwicHJvcGVydGllc01hcCIsInRyYWl0TWFwIiwidHJhaXRfdHlwZSIsImltYWdlX3VybCIsInByb3BlcnRpZXMiLCJleHRlcm5hbF91cmwiLCJSdW50aW1lSW5mbyIsIlNJTkdVTEFSX1YxX0VORFBPSU5UIiwiU0lOR1VMQVJfVjJfRU5EUE9JTlQiLCJLQU5BUklBX0VORFBPSU5UIiwiUk1SS19QSU5BVEFfU0VSVkVSIiwiU0lOR1VMQVJfVjFfQ09MTEVDVElPTl9FTkRQT0lOVCIsIlNJTkdVTEFSX1YyX0NPTExFQ1RJT05fRU5EUE9JTlQiLCJLQU5BUklBX0VYVEVSTkFMX1NFUlZFUiIsIkNMT1VERkxBUkVfUElOQVRBX1NFUlZFUiIsIkJJVF9DT1VOVFJZX1RIVU1CTkFJTF9SRVNPTFZFUiIsIkNGX0lQRlNfR0FURVdBWSIsIlBJTkFUQV9JUEZTX0dBVEVXQVkiLCJVTklRVUVfU0NBTl9FTkRQT0lOVCIsIlFVQVJUWl9TQ0FOX0VORFBPSU5UIiwiVkFSQV9TQ0FOX0VORFBPSU5UIiwiVU5JUVVFX0lQRlNfR0FURVdBWSIsIk5GVF9TVE9SQUdFX0dBVEVXQVkiLCJJUEZTX1czU19MSU5LIiwiR0FURVdBWV9JUEZTX0lPIiwiSVBGU19JTyIsIkRXRUJfTElOSyIsIklQRlNfR0FURVdBWV80RVZFUkxBTkQiLCJJUEZTX0ZMRUVLIiwiU1VQUE9SVEVEX05GVF9ORVRXT1JLUyIsIlNVUFBPUlRFRF9UUkFOU0ZFUl9FVk1fQ0hBSU5fTkFNRSIsIlNVUFBPUlRFRF9UUkFOU0ZFUl9FVk1fQ0hBSU4iLCJtb29uYmFzZSIsIm1vb25iZWFtIiwibW9vbnJpdmVyIiwiYXN0YXJFdm0iLCJzaGlkZW4iLCJzaGlidXlhIiwiVFJBTlNGRVJfQ0hBSU5fSUQiLCJTVVBQT1JURURfVFJBTlNGRVJfU1VCU1RSQVRFX0NIQUlOX05BTUUiLCJSQU5ET01fSVBGU19HQVRFV0FZX1NFVFRJTkciLCJwcm92aWRlciIsIndlaWdodCIsInByb3RvY29sIiwiUkFORE9NX0lQRlNfR0FURVdBWV9UT1RBTF9XRUlHSFQiLCJ3ZWlnaGVkSXRlbXMiLCJjdXJyZW50SXRlbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIl9FUkM3MjFfQUJJIiwiaXNFdGhlcmV1bUFkZHJlc3MiLCJFdm1OZnRBcGkiLCJldm1Db250cmFjdHMiLCJldm1BcGkiLCJpc0V0aGVyZXVtIiwic2V0U21hcnRDb250cmFjdE5mdHMiLCJkbmEiLCJnZXRJdGVtc0J5Q29sbGVjdGlvbiIsIm5mdFBhcmFtcyIsInNtYXJ0Q29udHJhY3QiLCJldGgiLCJDb250cmFjdCIsIm93bkl0ZW0iLCJjb2xsZWN0aW9uSW1hZ2UiLCJuZnRPd25lck1hcCIsIk51bWJlciIsIml0ZW1JbmRleGVzIiwidG9rZW5PZk93bmVyQnlJbmRleCIsInRva2VuVVJJIiwiZGV0YWlsVXJsIiwibmZ0SWQiLCJpdGVtRGV0YWlsIiwicGFyc2VkSXRlbSIsIkVSQzcyMSIsIm9yaWdpbkFzc2V0IiwibmZ0Q29sbGVjdGlvbiIsIkthcnVyYU5mdEFwaSIsIlJtcmtOZnRBcGkiLCJTdGF0ZW1pbmVOZnRBcGkiLCJVbmlxdWVOZnRBcGkiLCJWYXJhTmZ0QXBpIiwiV2FzbU5mdEFwaSIsIl9ORlRfQ0hBSU5fR1JPVVAiLCJfaXNDaGFpblN1cHBvcnRFdm1OZnQiLCJfaXNDaGFpblN1cHBvcnROYXRpdmVOZnQiLCJfaXNDaGFpblN1cHBvcnRXYXNtTmZ0IiwiU3RhdGVtaW50TmZ0QXBpIiwiY3JlYXRlU3Vic3RyYXRlTmZ0QXBpIiwia2FydXJhIiwicm1yayIsInN0YXRlbWludCIsInVuaXF1ZV9uZXR3b3JrIiwidmFyYSIsImNyZWF0ZVdhc21OZnRBcGkiLCJjcmVhdGVXZWIzTmZ0QXBpIiwiTmZ0SGFuZGxlciIsInNtYXJ0Q29udHJhY3ROZnRzIiwiaGFuZGxlcnMiLCJuZWVkU2V0dXBBcGkiLCJzZXRDaGFpbkluZm9NYXAiLCJzZXRXZWIzQXBpTWFwIiwid2ViM0FwaU1hcCIsInNldERvdFNhbWFBcGlNYXAiLCJkb3RTYW1hQVBJTWFwIiwic2V0QWRkcmVzc2VzIiwiaGFuZGxlciIsInNldHVwTmZ0Q29udHJhY3RzIiwiZmlsdGVyZWROZnRzIiwibmZ0Iiwic2V0dXBBcGkiLCJuZnRDb250cmFjdHMiLCJhY2NvdW50QXNzZXRzIiwiY29uY2F0IiwicmF3RGF0YSIsImdldEthcnVyYU1ldGFkYXRhIiwiaXNBcGlDb25uZWN0ZWQiLCJyZWNvdmVyQ29ubmVjdGlvbiIsInJlY292ZXJDb25uZWN0IiwiZ2V0U3Vic3RyYXRlQXBpIiwiZ2V0Q2hhaW4iLCJnZXRUb3RhbCIsImdldERhdGEiLCJzZXRTdWJzdHJhdGVBcGkiLCJzZXRDaGFpbiIsInJlcGxhY2UiLCJSTVJLX1ZFUiIsIlJNUktfU09VUkNFIiwiS0FOQklSRF9LRVlXT1JEIiwiZ2V0QWxsQnlBY2NvdW50IiwiZmV0Y2hVcmxzIiwic291cmNlIiwiU0lOR1VMQVJfVjIiLCJfZGF0YSIsIm5mdFNvdXJjZSIsIkJJUkRfS0FOQVJJQSIsIm5mdHMiLCJwcmltYXJ5UmVzb3VyY2UiLCJtZXRhZGF0YVVyaSIsIm5mdE1ldGFkYXRhIiwiS0FOQVJJQSIsIlNJTkdVTEFSX1YxIiwiYW5pbWF0aW9uX3VybCIsInRvTG93ZXJDYXNlIiwibWVkaWFVcmkiLCJhbGxOZnRzIiwiYWxsQ29sbGVjdGlvbnMiLCJrdXNhbWFBZGRyZXNzIiwiY29sbGVjdGlvbkluZm9VcmwiLCJyYXJpdHkiLCJtZXRhZGF0YV9yYXJpdHkiLCJybXJrX3ZlciIsIlZFUl8xIiwiVkVSXzIiLCJhbGxDb2xsZWN0aW9uTWV0YVVybCIsImFsbENvbGxlY3Rpb25NZXRhIiwibmZ0Q29sbGVjdGlvbklkIiwidW5pcXVlcyIsIm1ldGFkYXRhTmZ0IiwiaW5zdGFuY2VNZXRhZGF0YU9mIiwiZ2V0Q29sbGVjdGlvbkRldGFpbCIsImNvbGxlY3Rpb25NZXRhZGF0YSIsImNsYXNzTWV0YWRhdGFPZiIsIml0ZW1NZXRhZGF0YU9mIiwiY29sbGVjdGlvbk1ldGFkYXRhT2YiLCJpc1JlY2lwaWVudFNlbGYiLCJjdXJyZW50QWRkcmVzcyIsInJlY2lwaWVudEFkZHJlc3MiLCJhY2FsYUdldEV4dHJpbnNpYyIsInNlbmRlckFkZHJlc3MiLCJpdGVtSWQiLCJybXJrR2V0RXh0cmluc2ljIiwicmVtYXJrIiwicGFyc2VkUmVtYXJrIiwidW5pcXVlR2V0RXh0cmluc2ljIiwiU3Vic3RyYXRlIiwicXVhcnR6R2V0RXh0cmluc2ljIiwidW5pcXVlIiwic3RhdGVtaW5lR2V0RXh0cmluc2ljIiwic3RhdGVtaW50R2V0RXh0cmluc2ljIiwiZ2V0TmZ0VHJhbnNmZXJFeHRyaW5zaWMiLCJrdXNhbWEiLCJ1bmlxdWVOZnQiLCJxdWFydHoiLCJvcGFsIiwicGlvbmVlciIsImhleFRvU3RyIiwiaGV4VG9VVEYxNiIsInV0ZjE2VG9TdHJpbmciLCJkZXNlcmlhbGl6ZU5mdCIsImdldENvbGxlY3Rpb25Db3VudCIsImNyZWF0ZWRDb2xsZWN0aW9uQ291bnQiLCJnZXRBZGRyZXNzVG9rZW5zIiwiYWRkcmVzc1Rva2VucyIsImdldE5mdEltYWdlVXJsIiwiY29sbGVjdGlvbiIsInNjaGVtYVZlcnNpb24iLCJTY2hlbWFWZXJzaW9uIiwib2ZmY2hhaW5TY2hlbWEiLCJPZmZjaGFpblNjaGVtYSIsImdldE5mdERhdGEiLCJsb2NhbGUiLCJzY2hlbWFSZWFkIiwiQ29uc3RPbkNoYWluU2NoZW1hIiwibmZ0SXRlbUxpc3QiLCJuZnRQcm9wcyIsIkNvbnN0RGF0YSIsIk93bmVyIiwicHJlZml4IiwiVG9rZW5QcmVmaXgiLCJOYW1lIiwiY29sbGVjdGlvbkRlc2NyaXB0aW9uIiwiRGVzY3JpcHRpb24iLCJjb2xsZWN0aW9uQ291bnQiLCJhZGRyZXNzVG9rZW5EaWN0IiwibmZ0TWFwIiwiY29sbGVjdGlvbk1hcCIsImFsbENvbGxlY3Rpb25JZCIsImFkZHIiLCJjb2xsZWN0aW9uSWRTdHIiLCJjb2xsZWN0aW9uQnlJZCIsImZpbHRlciIsImltYWdlVXJsIiwidG9rZW5EYXRhIiwiUm9vdCIsImRlZmluZU1lc3NhZ2UiLCJzY2hlbWEiLCJmcm9tSlNPTiIsImNvbnZlcnRFbnVtVG9TdHJpbmciLCJORlRNZXRhIiwib3B0aW9ucyIsImZpZWxkcyIsInJlc29sdmVkVHlwZSIsInZhbHVlSnNvbkNvbW1lbnQiLCJ0cmFuc2xhdGlvbk9iamVjdCIsImJ1ZmZlciIsInJvb3QiLCJsb29rdXBUeXBlIiwiZGVjb2RlIiwib2JqZWN0SXRlbSIsInRvT2JqZWN0IiwiYXJyYXlzIiwiYnl0ZXMiLCJkZWZhdWx0cyIsImVudW1zIiwibG9uZ3MiLCJvYmplY3RzIiwib25lb2ZzIiwiQXJyYXkiLCJpc0FycmF5IiwiaGV4QWRkUHJlZml4IiwiZGVjb2RlQWRkcmVzcyIsImVuZHBvaW50IiwicGFyc2VOZnRSZXF1ZXN0IiwicHVibGljS2V5IiwiZ2V0TmZ0QnlBY2NvdW50IiwiYm9keSIsImFjY291bnRCeUlkIiwibWVkaWFVcmwiLCJBWkVST19ET01BSU5fQ09OVFJBQ1RTIiwiY29sbGVjdGlvbkFwaUZyb21BcnRaZXJvIiwiY29sbGVjdGlvbkRldGFpbEFwaUZyb21BcnRaZXJvIiwiZXh0ZXJuYWxVcmxPbkFydFplcm8iLCJpcGZzQXBpRnJvbUFydFplcm8iLCJpdGVtSW1hZ2VBcGlGcm9tQXJ0WmVybyIsImdldFBTUDM0Q29udHJhY3RQcm9taXNlIiwiZ2V0VG9rZW5VcmlNZXRob2QiLCJpc0F6ZXJvRG9tYWluTmZ0IiwiaXNQaW5rUm9ib05mdCIsImlzQXJ0WmVyb0ZlYXR1cmVkQ29sbGVjdGlvbiIsImNvbnRyYWN0QWRkcmVzcyIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwidXJsZW5jb2RlZCIsIlVSTFNlYXJjaFBhcmFtcyIsImFwcGVuZCIsImNvbGxlY3Rpb25JbmZvUHJvbWlzZSIsImNvbGxlY3Rpb25JbmZvIiwicmFjZSIsInN0YXR1cyIsIndhc21Db250cmFjdHMiLCJpc0F0dHJpYnV0ZVN0b3JlZE9uQ2hhaW4iLCJfb25DaGFpbkF0dHJpYnV0ZUNvdW50IiwiX2F0dHJpYnV0ZUNvdW50Iiwib25DaGFpbkF0dHJpYnV0ZUNvdW50IiwiaXNPayIsInBhcnNlRmVhdHVyZWRUb2tlblVyaSIsInRva2VuVXJpIiwicGFyc2VGZWF0dXJlZE5mdEltYWdlIiwicGFyc2VkVG9rZW5VcmkiLCJuZnRJdGVtSW1hZ2VTcmMiLCJjb2xsZWN0aW9uSW1hZ2VVcmwiLCJwYXJzZUZlYXR1cmVkQ29sbGVjdGlvbkltYWdlIiwiY29sbGVjdGlvbkRldGFpbCIsInJldCIsImF2YXRhckltYWdlIiwicGFyc2VkQ29sbGVjdGlvbkltYWdlIiwiY29sbGVjdGlvbkltYWdlU3JjIiwicHJvY2Vzc09uQ2hhaW5NZXRhZGF0YSIsImlzRmVhdHVyZWQiLCJuZnRJdGVtIiwicmF3SW1hZ2VTcmMiLCJwcm9jZXNzT2ZmQ2hhaW5NZXRhZGF0YSIsIl9pc0ZlYXR1cmVkIiwiX3Rva2VuVXJpIiwiX3Rva2VuVXJpT2JqIiwiaXNBdHRyaWJ1dGVPbkNoYWluIiwiX2JhbGFuY2UiLCJiYWxhbmNlSnNvbiIsIl90b2tlbkJ5SW5kZXhSZXNwIiwicmF3VG9rZW5JZCIsInRva2VuSWRPYmoiLCJ0b2tlblVyaU9iaiIsImRlYnVnIiwiUFNQMzQiLCJvbkNoYWluT3B0aW9uIiwiZmVhdHVyZWRDb2xsZWN0aW9uSW1hZ2UiLCJpc0NvbGxlY3Rpb25GZWF0dXJlZCIsIkEwX0FSVF9aRVJPX1RFU1RORVRfSU1BR0VfQVBJIiwiQVNUQVJfQVJUX1pFUk9fVEVTVE5FVF9JTUFHRV9BUEkiLCJBUlRfWkVST19URVNUTkVUX0lQRlNfQVBJIiwiQVNUQVJfQVJUX1pFUk9fVEVTVE5FVF9JUEZTX0FQSSIsIkEwX0FSVF9aRVJPX1RFU1RORVRfQ09MTEVDVElPTl9BUEkiLCJBU1RBUl9BUlRfWkVST19URVNUTkVUX0NPTExFQ1RJT05fQVBJIiwiQTBfQVJUX1pFUk9fSU1BR0VfQVBJIiwiQVNUQVJfQVJUX1pFUk9fSU1BR0VfQVBJIiwiQTBfQVJUX1pFUk9fSVBGU19BUEkiLCJBU1RBUl9BUlRfWkVST19JUEZTX0FQSSIsIkEwX0FSVF9aRVJPX0NPTExFQ1RJT05fQVBJIiwiQVNUQVJfQVJUX1pFUk9fQ09MTEVDVElPTl9BUEkiLCJBMF9BUlRfWkVST19FWFRFUk5BTF9VUkwiLCJBU1RBUl9BUlRfWkVST19FWFRFUk5BTF9VUkwiLCJTdGFraW5nU3RhdHVzIiwiU3Rha2luZ1R5cGUiLCJVbnN0YWtpbmdTdGF0dXMiLCJnZXRCb25kZWRWYWxpZGF0b3JzIiwiZ2V0U3Rha2luZ1N0YXR1c0J5Tm9taW5hdGlvbnMiLCJpc1Vuc3Rha2VBbGwiLCJwYXJzZUlkZW50aXR5IiwiX1NUQUtJTkdfRVJBX0xFTkdUSF9NQVAiLCJwYXJzZVJhd051bWJlciIsInN1YnNjcmliZUFtcGxpdHVkZVN0YWtpbmdNZXRhZGF0YSIsInBhcmFjaGFpblN0YWtpbmciLCJyb3VuZCIsIl9yb3VuZCIsInJvdW5kT2JqIiwiY3VycmVudCIsIm1heERlbGVnYXRpb25zIiwiY29uc3RzIiwibWF4RGVsZWdhdGlvbnNQZXJSb3VuZCIsIm1pbkRlbGVnYXRvclN0YWtlIiwidW5zdGFraW5nRGVsYXkiLCJzdGFrZUR1cmF0aW9uIiwiX2Jsb2NrUGVyUm91bmQiLCJkZWZhdWx0QmxvY2tzUGVyUm91bmQiLCJibG9ja1BlclJvdW5kIiwicGFyc2VGbG9hdCIsImJsb2NrRHVyYXRpb24iLCJkZWZhdWx0IiwidW5zdGFraW5nUGVyaW9kIiwiTk9NSU5BVEVEIiwibWluU3Rha2UiLCJtYXhWYWxpZGF0b3JQZXJOb21pbmF0b3IiLCJtYXhXaXRoZHJhd2FsUmVxdWVzdFBlclZhbGlkYXRvciIsImFsbG93Q2FuY2VsVW5zdGFraW5nIiwiZ2V0QW1wbGl0dWRlU3Rha2luZ01ldGFkYXRhIiwiY2hhaW5BcGkiLCJzdWJzY3JpYmVBbXBsaXR1ZGVOb21pbmF0b3JNZXRhZGF0YSIsImRlbGVnYXRvclN0YXRlIiwidW5zdGFraW5nSW5mbyIsIm5vbWluYXRpb25MaXN0IiwidW5zdGFraW5nTGlzdCIsImFjdGl2ZVN0YWtlIiwiaWRlbnRpdHlJbmZvIiwiaWRlbnRpdHkiLCJpZGVudGl0eU9mIiwiYm5BY3RpdmVTdGFrZSIsImRlbGVnYXRpb25TdGF0dXMiLCJOT1RfRUFSTklORyIsIkVBUk5JTkdfUkVXQVJEIiwidmFsaWRhdG9yQWRkcmVzcyIsInZhbGlkYXRvck1pblN0YWtlIiwiaGFzVW5zdGFraW5nIiwidmFsaWRhdG9ySWRlbnRpdHkiLCJfY3VycmVudEJsb2NrSW5mbyIsInJwYyIsImdldEhlYWRlciIsImN1cnJlbnRCbG9ja0luZm8iLCJjdXJyZW50QmxvY2tOdW1iZXIiLCJudW1iZXIiLCJuZWFyZXN0VW5zdGFraW5nQmxvY2siLCJuZWFyZXN0VW5zdGFraW5nQW1vdW50IiwiaXNDbGFpbWFibGUiLCJyZW1haW5pbmdCbG9jayIsIndhaXRpbmdUaW1lIiwiQ0xBSU1BQkxFIiwiVU5MT0NLSU5HIiwiY2xhaW1hYmxlIiwic3Rha2luZ1N0YXR1cyIsIm5vbWluYXRpb25zIiwidW5zdGFraW5ncyIsImdldEFtcGxpdHVkZU5vbWluYXRvck1ldGFkYXRhIiwiX2RlbGVnYXRvclN0YXRlIiwiX3Vuc3Rha2luZ0luZm8iLCJ1bnN0YWtpbmciLCJOT1RfU1RBS0lORyIsImdldEFtcGxpdHVkZUNvbGxhdG9yc0luZm8iLCJfYWxsQ29sbGF0b3JzIiwiX2luZmxhdGlvbkNvbmZpZyIsImNhbmRpZGF0ZVBvb2wiLCJpbmZsYXRpb25Db25maWciLCJtYXhEZWxlZ2F0b3JzUGVyQ29sbGF0b3IiLCJyYXdEZWxlZ2F0b3JSZXR1cm4iLCJkZWxlZ2F0b3IiLCJyZXdhcmRSYXRlIiwiYW5udWFsIiwiZGVsZWdhdG9yUmV0dXJuIiwiYWxsQ29sbGF0b3JzIiwiX2NvbGxhdG9yIiwiY29sbGF0b3JJbmZvIiwiYm5Ub3RhbFN0YWtlIiwiYm5Pd25TdGFrZSIsInN0YWtlIiwiYm5PdGhlclN0YWtlIiwidG90YWxTdGFrZSIsIm93blN0YWtlIiwib3RoZXJTdGFrZSIsIm5vbWluYXRvckNvdW50IiwiZGVsZWdhdG9ycyIsImNvbW1pc3Npb24iLCJleHBlY3RlZFJldHVybiIsImJsb2NrZWQiLCJpc1ZlcmlmaWVkIiwibWluQm9uZCIsImlzQ3Jvd2RlZCIsImdldEFtcGxpdHVkZUJvbmRpbmdFeHRyaW5zaWMiLCJzZWxlY3RlZFZhbGlkYXRvckluZm8iLCJub21pbmF0b3JNZXRhZGF0YSIsImJpbmFyeUFtb3VudCIsImpvaW5EZWxlZ2F0b3JzIiwiYm9uZGVkVmFsaWRhdG9ycyIsIl9wYXJhbXMiLCJkZWxlZ2F0b3JTdGFrZU1vcmUiLCJwYXJhbXNDb3VudCIsImdldEFtcGxpdHVkZVVuYm9uZGluZ0V4dHJpbnNpYyIsImNvbGxhdG9yQWRkcmVzcyIsInVuc3Rha2VBbGwiLCJkZWxlZ2F0b3JTdGFrZUxlc3MiLCJsZWF2ZURlbGVnYXRvcnMiLCJnZXRBbXBsaXR1ZGVXaXRoZHJhd2FsRXh0cmluc2ljIiwidW5sb2NrVW5zdGFrZWQiLCJnZXRBbXBsaXR1ZGVDbGFpbVJld2FyZEV4dHJpbnNpYyIsInV0aWxpdHkiLCJiYXRjaCIsImluY3JlbWVudERlbGVnYXRvclJld2FyZHMiLCJjbGFpbVJld2FyZHMiLCJnZXRBc3RhckJvbmRpbmdFeHRyaW5zaWMiLCJnZXRBc3RhckNsYWltUmV3YXJkRXh0cmluc2ljIiwiZ2V0QXN0YXJEYXBwc0luZm8iLCJnZXRBc3Rhck5vbWluYXRvck1ldGFkYXRhIiwiZ2V0QXN0YXJTdGFraW5nTWV0YWRhdGEiLCJnZXRBc3RhclVuYm9uZGluZ0V4dHJpbnNpYyIsImdldEFzdGFyV2l0aGRyYXdhbEV4dHJpbnNpYyIsInN1YnNjcmliZUFzdGFyU3Rha2luZ01ldGFkYXRhIiwiZ2V0UGFyYUJvbmRpbmdFeHRyaW5zaWMiLCJnZXRQYXJhQ2FuY2VsV2l0aGRyYXdhbEV4dHJpbnNpYyIsImdldFBhcmFjaGFpbkNvbGxhdG9yc0luZm8iLCJnZXRQYXJhQ2hhaW5Ob21pbmF0b3JNZXRhZGF0YSIsImdldFBhcmFDaGFpblN0YWtpbmdNZXRhZGF0YSIsImdldFBhcmFVbmJvbmRpbmdFeHRyaW5zaWMiLCJnZXRQYXJhV2l0aGRyYXdhbEV4dHJpbnNpYyIsInN1YnNjcmliZVBhcmFDaGFpblN0YWtpbmdNZXRhZGF0YSIsInZhbGlkYXRlUGFyYUNoYWluQm9uZGluZ0NvbmRpdGlvbiIsInZhbGlkYXRlUGFyYUNoYWluVW5ib25kaW5nQ29uZGl0aW9uIiwiZ2V0UG9vbGluZ0NsYWltUmV3YXJkRXh0cmluc2ljIiwiZ2V0UG9vbGluZ1dpdGhkcmF3YWxFeHRyaW5zaWMiLCJnZXRSZWxheUJvbmRpbmdFeHRyaW5zaWMiLCJnZXRSZWxheUNhbmNlbFdpdGhkcmF3YWxFeHRyaW5zaWMiLCJnZXRSZWxheUNoYWluTm9taW5hdG9yTWV0YWRhdGEiLCJnZXRSZWxheUNoYWluU3Rha2luZ01ldGFkYXRhIiwiZ2V0UmVsYXlQb29sc0luZm8iLCJnZXRSZWxheVVuYm9uZGluZ0V4dHJpbnNpYyIsImdldFJlbGF5VmFsaWRhdG9yc0luZm8iLCJnZXRSZWxheVdpdGhkcmF3YWxFeHRyaW5zaWMiLCJzdWJzY3JpYmVSZWxheUNoYWluU3Rha2luZ01ldGFkYXRhIiwidmFsaWRhdGVSZWxheUJvbmRpbmdDb25kaXRpb24iLCJ2YWxpZGF0ZVJlbGF5VW5ib25kaW5nQ29uZGl0aW9uIiwiX1NUQUtJTkdfQ0hBSU5fR1JPVVAiLCJ2YWxpZGF0ZVVuYm9uZGluZ0NvbmRpdGlvbiIsImNoYWluU3Rha2luZ01ldGFkYXRhIiwic2VsZWN0ZWRWYWxpZGF0b3IiLCJyZWxheSIsInZhbGlkYXRlQm9uZGluZ0NvbmRpdGlvbiIsInNlbGVjdGVkVmFsaWRhdG9ycyIsImdldENoYWluU3Rha2luZ01ldGFkYXRhIiwiYXN0YXIiLCJwYXJhIiwiYW1wbGl0dWRlIiwiZ2V0Tm9taW5hdG9yTWV0YWRhdGEiLCJnZXRWYWxpZGF0b3JzSW5mbyIsImRlY2ltYWxzIiwiZ2V0Tm9taW5hdGlvblBvb2xzSW5mbyIsImdldEJvbmRpbmdFeHRyaW5zaWMiLCJnZXRVbmJvbmRpbmdFeHRyaW5zaWMiLCJnZXRXaXRoZHJhd2FsRXh0cmluc2ljIiwiUE9PTEVEIiwiZ2V0Q2xhaW1SZXdhcmRFeHRyaW5zaWMiLCJzdGFraW5nVHlwZSIsImJvbmRSZXdhcmQiLCJnZXRDYW5jZWxXaXRoZHJhd2FsRXh0cmluc2ljIiwic2VsZWN0ZWRVbnN0YWtpbmciLCJzdWJzY3JpYmVFc3NlbnRpYWxDaGFpblN0YWtpbmdNZXRhZGF0YSIsImdldEV4aXN0VW5zdGFrZUVycm9yTWVzc2FnZSIsImdldE1heFZhbGlkYXRvckVycm9yTWVzc2FnZSIsImdldE1pblN0YWtlRXJyb3JNZXNzYWdlIiwiZ2V0UGFyYUN1cnJlbnRJbmZsYXRpb24iLCJpc1NhbWVBZGRyZXNzIiwic2VsZWN0ZWRDb2xsYXRvciIsImVycm9ycyIsInRhcmdldE5vbWluYXRpb24iLCJub21pbmF0aW9uIiwiYm5SZW1haW5pbmdTdGFrZSIsImJuQ2hhaW5NaW5TdGFrZSIsImJuQ29sbGF0b3JNaW5TdGFrZSIsImJuTWluU3Rha2UiLCJtYXgiLCJleGlzdFVuc3Rha2VFcnJvck1lc3NhZ2UiLCJzZWxlY3RlZENvbGxhdG9ycyIsIm1pblN0YWtlRXJyb3JNZXNzYWdlIiwibWF4VmFsaWRhdG9yRXJyb3JNZXNzYWdlIiwicGFyc2VkU2VsZWN0ZWRDb2xsYXRvckFkZHJlc3MiLCJkZWxlZ2F0aW9uQ291bnQiLCJjdXJyZW50RGVsZWdhdGlvbkFtb3VudCIsImRlbGVnYXRpb24iLCJtYXhEZWxlZ2F0aW9uc1BlckRlbGVnYXRvciIsImRlbGVnYXRpb25Cb25kTGVzc0RlbGF5IiwiX3VudmVzdGVkQWxsb2NhdGlvbiIsInZlc3RpbmciLCJ0b3RhbFVudmVzdGVkQWxsb2NhdGlvbiIsIl90b3RhbFN0YWtlIiwiX3RvdGFsSXNzdWFuY2UiLCJfaW5mbGF0aW9uIiwic3Rha2VkIiwidG90YWxJc3N1YW5jZSIsInVudmVzdGVkQWxsb2NhdGlvbiIsInJhd1VudmVzdGVkQWxsb2NhdGlvbiIsImluZmxhdGlvbiIsInN1YnNjcmliZVBhcmFDaGFpbk5vbWluYXRvck1ldGFkYXRhIiwidW5zdGFraW5nTWFwIiwiYm5Ub3RhbEFjdGl2ZVN0YWtlIiwiX3JvdW5kSW5mbyIsInJvdW5kSW5mbyIsImN1cnJlbnRSb3VuZCIsImRlbGVnYXRpb25zIiwiX2RlbGVnYXRpb25TY2hlZHVsZWRSZXF1ZXN0cyIsIl9pZGVudGl0eSIsIl9jb2xsYXRvckluZm8iLCJkZWxlZ2F0aW9uU2NoZWR1bGVkUmVxdWVzdHMiLCJjYW5kaWRhdGVJbmZvIiwibWluRGVsZWdhdGlvbiIsImxvd2VzdFRvcERlbGVnYXRpb25BbW91bnQiLCJzY2hlZHVsZWRSZXF1ZXN0Iiwid2hlbkV4ZWN1dGFibGUiLCJyZW1haW5pbmdFcmEiLCJhY3Rpb24iLCJiblN0YWtlIiwiYm5VbnN0YWtlQmFsYW5jZSIsInJhd0NvbGxhdG9ySW5mbyIsIl9jb2xsYXRvckNvbW1pc3Npb24iLCJjb2xsYXRvckNvbW1pc3Npb24iLCJtYXhEZWxlZ2F0aW9uUGVyQ29sbGF0b3IiLCJtYXhUb3BEZWxlZ2F0aW9uc1BlckNhbmRpZGF0ZSIsInJhd0NvbGxhdG9yQ29tbWlzc2lvbiIsImNvbGxhdG9yIiwiX2NvbGxhdG9yQWRkcmVzcyIsInRvdGFsQ291bnRlZCIsImJvbmQiLCJibk1pbkJvbmQiLCJleHRyYUluZm9NYXAiLCJfaW5mbyIsInJhd0luZm8iLCJyYXdJZGVudGl0eSIsImFjdGl2ZSIsImlzUmVhc29uYWJsZSIsImp1ZGdlbWVudHMiLCJ2YWxpZGF0b3IiLCJzZWxlY3RlZENvbGxhdG9ySW5mbyIsImRlbGVnYXRlIiwibm9taW5hdGlvbkNvdW50IiwiZGVsZWdhdG9yQm9uZE1vcmUiLCJzY2hlZHVsZURlbGVnYXRvckJvbmRMZXNzIiwic2NoZWR1bGVSZXZva2VEZWxlZ2F0aW9uIiwiZXhlY3V0ZURlbGVnYXRpb25SZXF1ZXN0IiwiZ2V0VHVyaW5nQ29tcG91bmRFeHRyaW5zaWMiLCJhY2NvdW50TWluaW11bSIsImJvbmRlZEFtb3VudCIsIl9vcHRpbWFsQ29tcG91bmRpbmciLCJhdXRvbWF0aW9uVGltZSIsImNhbGN1bGF0ZU9wdGltYWxBdXRvc3Rha2luZyIsIm9wdGltYWxDb21wb3VuZGluZyIsImNvbXBvdW5kaW5nUGVyaW9kIiwiZnJlcXVlbmN5Iiwic2V0RGF0ZSIsImdldERhdGUiLCJzZXRIb3VycyIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsInNldE1pbnV0ZXMiLCJzdGFydFRpbWUiLCJ2YWx1ZU9mIiwic2NoZWR1bGVBdXRvQ29tcG91bmREZWxlZ2F0ZWRTdGFrZVRhc2siLCJnZXRUdXJpbmdDYW5jZWxDb21wb3VuZGluZ0V4dHJpbnNpYyIsInRhc2tJZCIsImNhbmNlbFRhc2siLCJjYW5jZWxEZWxlZ2F0aW9uUmVxdWVzdCIsImNhbGN1bGF0ZUFsZXBoWmVyb1ZhbGlkYXRvclJldHVybiIsImNhbGN1bGF0ZUNoYWluU3Rha2VkUmV0dXJuIiwiY2FsY3VsYXRlSW5mbGF0aW9uIiwiY2FsY3VsYXRlVGVybm9hVmFsaWRhdG9yUmV0dXJuIiwiY2FsY3VsYXRlVmFsaWRhdG9yU3Rha2VkUmV0dXJuIiwiZ2V0Q29tbWlzc2lvbiIsInBhcnNlUG9vbFN0YXNoQWRkcmVzcyIsInRyYW5zZm9ybVBvb2xOYW1lIiwibWluSm9pbk5vbWluYXRpb25Qb29sIiwidmFsaWRhdGVQb29sQm9uZGluZ0NvbmRpdGlvbiIsInNlbGVjdGVkUG9vbCIsImJuQ3VycmVudEFjdGl2ZVN0YWtlIiwic3Rha2luZyIsImN1cnJlbnRFcmEiLCJfY3VycmVudEVyYSIsIm1heE5vbWluYXRpb25zIiwibWF4VW5sb2NraW5nQ2h1bmtzIiwidW5sb2NraW5nRXJhcyIsImJvbmRpbmdEdXJhdGlvbiIsIl90b3RhbEVyYVN0YWtlIiwiX2F1Y3Rpb25Db3VudGVyIiwiX21pbk5vbWluYXRvckJvbmQiLCJfbWluUG9vbEpvaW4iLCJfbWluaW11bUFjdGl2ZVN0YWtlIiwiZXJhc1RvdGFsU3Rha2UiLCJhdWN0aW9ucyIsImF1Y3Rpb25Db3VudGVyIiwibWluTm9taW5hdG9yQm9uZCIsIm1pbkpvaW5Cb25kIiwibWluaW11bUFjdGl2ZVN0YWtlIiwibWluQWN0aXZlU3Rha2UiLCJibk1pbkFjdGl2ZVN0YWtlIiwiYm5NaW5Ob21pbmF0b3JCb25kIiwicmF3VG90YWxFcmFTdGFrZSIsInJhd1RvdGFsSXNzdWFuY2UiLCJudW1BdWN0aW9ucyIsImJuVG90YWxFcmFTdGFrZSIsImJuVG90YWxJc3N1YW5jZSIsIm1pblBvb2xKb2luIiwidW5sb2NraW5nUGVyaW9kIiwidGVybm9hIiwiX2VyYVN0YWtlcnMiLCJlcmFzU3Rha2VycyIsImVyYVN0YWtlcnMiLCJhbGxDdXJyZW50Tm9taW5hdG9ycyIsIm5vbWluYXRvckxpc3QiLCJyYXdWYWxpZGF0b3JTdGF0IiwiZXJhTm9taW5hdG9ycyIsIm90aGVycyIsIm5vbWluYXRvciIsIndobyIsInN1YnNjcmliZVJlbGF5Q2hhaW5Ob21pbmF0b3JNZXRhZGF0YSIsImxlZGdlciIsIl9ub21pbmF0aW9ucyIsIl9ib25kZWQiLCJub21pbmF0b3JzIiwiYm9uZGVkIiwiX21heE5vbWluYXRvclJld2FyZGVkUGVyVmFsaWRhdG9yIiwibWF4Tm9taW5hdG9yUmV3YXJkZWRQZXJWYWxpZGF0b3IiLCJ2YWxpZGF0b3JMaXN0IiwidGFyZ2V0cyIsIm5vbWluYXRpb25TdGF0dXMiLCJfaWRlbnRpdHlJbmZvIiwiX2VyYVN0YWtlciIsImVyYVN0YWtlciIsInRvcE5vbWluYXRvcnMiLCJXQUlUSU5HIiwic2xpY2UiLCJ3YWl0aW5nTm9taW5hdGlvbkNvdW50IiwidW5sb2NraW5nIiwidW5sb2NraW5nQ2h1bmsiLCJpc0JvbmRlZEJlZm9yZSIsIl9sZWRnZXIiLCJzdWJzY3JpYmVSZWxheUNoYWluUG9vbE1lbWJlck1ldGFkYXRhIiwicG9vbE1lbWJlckluZm8iLCJwb29sc1BhbGxldElkIiwicGFsbGV0SWQiLCJwb29sU3Rhc2hBY2NvdW50IiwicG9vbElkIiwiX3Bvb2xNZXRhZGF0YSIsInBvb2xNZXRhZGF0YSIsInBvb2xOYW1lIiwiaXNVdGY4IiwidG9VdGY4Iiwiam9pbmVkUG9vbEluZm8iLCJ1bmxvY2tpbmdFcmEiLCJnZXRSZWxheUNoYWluUG9vbE1lbWJlck1ldGFkYXRhIiwiX3Bvb2xNZW1iZXJJbmZvIiwiYWxsVmFsaWRhdG9ycyIsInZhbGlkYXRvckluZm9MaXN0IiwiX21pbkJvbmQiLCJfc3Rha2luZ1Jld2FyZHMiLCJzdGFraW5nUmV3YXJkcyIsIm1heE5vbWluYXRvclJld2FyZGVkIiwicmF3TWluQm9uZCIsInRvdGFsU3Rha2VNYXAiLCJibkRlY2ltYWxzIiwicmF3VmFsaWRhdG9ySW5mbyIsInJhd1RvdGFsU3Rha2UiLCJyYXdPd25TdGFrZSIsIm93biIsIl9jb21taXNzaW9uSW5mbyIsInZhbGlkYXRvcnMiLCJjb21taXNzaW9uSW5mbyIsImJuQXZnU3Rha2UiLCJkaXZuIiwiZGl2IiwiYm5WYWxpZGF0b3JTdGFrZSIsImFsZXBoIiwicmV3YXJkUGVyVmFsaWRhdG9yIiwic2Vzc2lvbkV4dHJhUmV3YXJkUGF5b3V0IiwidmFsaWRhdG9yU3Rha2UiLCJfYWxsUG9vbHNJbmZvIiwicmV2ZXJzZVBvb2xJZExvb2t1cCIsIl9wb29sSW5mbyIsInBvb2xBZGRyZXNzTGlzdCIsInBvb2xBZGRyZXNzIiwiX2JvbmRlZFBvb2wiLCJfbWV0YWRhdGEiLCJib25kZWRQb29scyIsImJvbmRlZFBvb2wiLCJyb2xlcyIsIm1lbWJlckNvdW50ZXIiLCJ0YXJnZXRWYWxpZGF0b3JzIiwiYm9uZERlc3QiLCJib25kVHgiLCJub21pbmF0ZVR4IiwidmFsaWRhdG9yUGFyYW1MaXN0Iiwibm9taW5hdGUiLCJiYXRjaEFsbCIsImJvbmRFeHRyYSIsImNoaWxsVHgiLCJjaGlsbCIsInVuYm9uZFR4IiwidW5ib25kIiwid2l0aGRyYXdVbmJvbmRlZCIsIl9zbGFzaGluZ1NwYW5zIiwic2xhc2hpbmdTcGFucyIsInNsYXNoaW5nU3BhbkNvdW50Iiwic3BhbkluZGV4IiwicmVib25kIiwiY2xhaW1QYXlvdXQiLCJnZXRQb29saW5nQm9uZGluZ0V4dHJpbnNpYyIsInNlbGVjdGVkUG9vbElkIiwiRnJlZUJhbGFuY2UiLCJnZXRQb29saW5nVW5ib25kaW5nRXh0cmluc2ljIiwiSWQiLCJTVUJTUVVJRF9FTkRQT0lOVFMiLCJBU1RBUiIsIk1PT05SSVZFUiIsIk1PT05CRUFNIiwiSU5ERVhFUl9TVVBQT1JURURfU1RBS0lOR19DSEFJTlMiLCJTVUJRVUVSWV9FTkRQT0lOVFMiLCJwb2xrYWRvdCIsIndlc3RlbmQiLCJwaWNhc3NvIiwiY2FsYW1hcmkiLCJraGFsYSIsInBhcmFsbGVsIiwiY2xvdmVyIiwiYmFzaWxpc2siLCJhbHRhaXIiLCJraWx0Iiwicm9ib25vbWljcyIsInplaWdlaXN0IiwiZ2V0QW1wbGl0dWRlU3Rha2luZ09uQ2hhaW4iLCJnZXRBc3RhclN0YWtpbmdPbkNoYWluIiwiZ2V0UGFyYVN0YWtpbmdPbkNoYWluIiwiZ2V0Tm9taW5hdGlvblBvb2xSZXdhcmQiLCJnZXRSZWxheVBvb2xpbmdPbkNoYWluIiwiZ2V0UmVsYXlTdGFraW5nT25DaGFpbiIsImdldEFsbFN1YnNxdWlkU3Rha2luZyIsIl9pc0NoYWluU3VwcG9ydFN1YnN0cmF0ZVN0YWtpbmciLCJzdGFraW5nT25DaGFpbkFwaSIsInN0YWtpbmdDYWxsYmFjayIsIm5vbWluYXRvclN0YXRlQ2FsbGJhY2siLCJmaWx0ZXJlZEFwaU1hcCIsInBhcmVudEFwaSIsIm5vbWluYXRpb25Qb29sIiwiZ2V0Tm9taW5hdGlvblN0YWtpbmdSZXdhcmREYXRhIiwiZ2V0UG9vbGluZ1N0YWtpbmdSZXdhcmREYXRhIiwibmV0d29ya01hcCIsImRvdFNhbWFBcGlNYXAiLCJhY3RpdmVOZXR3b3JrcyIsInN1YnNjcmliZUFzdGFyTm9taW5hdG9yTWV0YWRhdGEiLCJfZ2V0Q2hhaW5OYXRpdmVUb2tlbkJhc2ljSW5mbyIsImdldFNpbmdsZVN0YWtpbmdBbXBsaXR1ZGUiLCJxdWVyeU11bHRpIiwiX3Vuc3Rha2luZyIsImFjdGl2ZUJhbGFuY2UiLCJ1bmxvY2tpbmdCYWxhbmNlIiwibmF0aXZlVG9rZW4iLCJ1bml0IiwidW5zdGFraW5nQmFsYW5jZSIsInVuc3Rha2luZ0Ftb3VudCIsImJuVW5zdGFraW5nQW1vdW50IiwidG90YWxCYWxhbmNlIiwic3Rha2luZ0l0ZW0iLCJnZXRNdWx0aVN0YWtpbmdBbXBsaXR1ZGUiLCJsZWRnZXJzIiwiX3Vuc3Rha2luZ1N0YXRlcyIsIm5ldHdvcmtzIiwiZ2V0QW1wbGl0dWRlVW5jbGFpbWVkU3Rha2luZ1Jld2FyZCIsImNoYWlucyIsInVuY2xhaW1lZFJld2FyZExpc3QiLCJuZXR3b3JrSW5mbyIsIl91bmNsYWltZWRSZXdhcmQiLCJyZXdhcmRzIiwidW5jbGFpbWVkUmV3YXJkIiwiX3RvdGFsQmFsYW5jZSIsIl91bmxvY2tpbmdCYWxhbmNlIiwibGVzc1RvdGFsIiwiZGFwcHNTdGFraW5nIiwiYm5VbmxvY2tpbmdCYWxhbmNlIiwidW5sb2NraW5nQ2h1bmtzIiwidW5ib25kaW5nSW5mbyIsImNodW5rIiwiYm5DaHVuayIsIl9hY3RpdmVCYWxhbmNlIiwiYm9uZGVkQmFsYW5jZSIsInVuYm9uZGVkQmFsYW5jZSIsImJuQm9uZGVkQmFsYW5jZSIsImJuVW5ib25kZWRCYWxhbmNlIiwidGFyZ2V0TmV0d29ya3MiLCJ2YWxpZEFkZHJlc3NlcyIsIm5vbWluYXRpb25Qb29sc0FwaSIsInBlbmRpbmdSZXdhcmRzIiwiZ2V0U3Vic3F1aWRRdWVyeSIsImdldFN1YnNxdWlkU3Rha2luZyIsInBhcnNlZEFjY291bnQiLCJzdGFraW5nUmV3YXJkSXRlbSIsInJlc3BEYXRhIiwicmV3YXJkSXRlbSIsInN0YWtlckJ5SWQiLCJsYXRlc3RSZXdhcmQiLCJ0b3RhbFJld2FyZCIsInRvdGFsU2xhc2giLCJmaWx0ZXJlZE5ldHdvcmtzIiwibmV0d29yayIsIndlYjNBcGkiLCJFeHRlcm5hbFJlcXVlc3RQcm9taXNlU3RhdHVzIiwiX0JBTEFOQ0VfUEFSU0lOR19DSEFJTl9HUk9VUCIsIkVWTV9SRUZPUk1BVF9ERUNJTUFMUyIsImhhbmRsZVRyYW5zZmVyQmFsYW5jZVJlc3VsdCIsImNoYW5nZVZhbHVlIiwicmVjZWlwdCIsInJlc3BvbnNlIiwidXBkYXRlU3RhdGUiLCJmZWUiLCJib2JhYmVhbSIsImwxRmVlIiwibDJCb2JhRmVlIiwiZ2FzVXNlZCIsImVmZmVjdGl2ZUdhc1ByaWNlIiwidHhSZXN1bHQiLCJjaGFuZ2UiLCJGQUlMRUQiLCJnZXRFVk1UcmFuc2FjdGlvbk9iamVjdCIsImdhc1ByaWNlIiwiZ2V0R2FzUHJpY2UiLCJ0cmFuc2FjdGlvbk9iamVjdCIsImVzdGltYXRlR2FzIiwiZ2FzIiwiZXN0aW1hdGVGZWUiLCJtdWwiLCJudW1iZXJSZXBsYWNlIiwic3Vic3RyaW5nIiwiZmlsbCIsImdldEVSQzIwVHJhbnNhY3Rpb25PYmplY3QiLCJhc3NldEFkZHJlc3MiLCJlcmMyMENvbnRyYWN0IiwiZnJlZUFtb3VudCIsInRyYW5zZmVyVmFsdWUiLCJnZW5lcmF0ZVRyYW5zZmVyRGF0YSIsImVuY29kZUFCSSIsInRyYW5zZmVyRGF0YSIsImdldEVSQzcyMVRyYW5zYWN0aW9uIiwic2FmZVRyYW5zZmVyRnJvbSIsIl9FUkMyMF9BQkkiLCJfQVpFUk9fRE9NQUlOX1JFR0lTVFJZX0FCSSIsIl9ORVVST0dVTlNfUFNQMzRfQUJJIiwiX1BJTktfUFNQMzRfQUJJIiwiX1BTUDIyX0FCSSIsIl9QU1AzNF9BQkkiLCJDb250cmFjdFByb21pc2UiLCJpc05ldXJvZ3VuTmZ0IiwibXVzdEZvcm1hdE51bWJlclJlZyIsImdldFBTUDM0VHJhbnNmZXJFeHRyaW5zaWMiLCJ0ZXN0IiwiTUFYX0NBTExfV0VJR0hUIiwiREVGQVVMVF9SRUZfVElNRSIsInRvQ29udHJhY3RBYmlNZXNzYWdlIiwiYWJpIiwibWVzc2FnZXMiLCJtIiwiY2FsbGVyQWRkcmVzcyIsImFiaU1lc3NhZ2UiLCJzdG9yYWdlRGVwb3NpdExpbWl0IiwiZ2FzUmVxdWlyZWQiLCJjb250cmFjdHNBcGkiLCJ0b1U4YSIsImlzRmFsbGJhY2siLCJwcm9vZlNpemUiLCJyZWZUaW1lIiwiZ2V0RXh0cmluc2ljQnlQb2xrYWRvdFhjbVBhbGxldCIsImdldEV4dHJpbnNpY0J5WGNtUGFsbGV0UGFsbGV0IiwiZ2V0RXh0cmluc2ljQnlYdG9rZW5zUGFsbGV0IiwiX1hDTV9DSEFJTl9HUk9VUCIsImNyZWF0ZVhjbUV4dHJpbnNpYyIsImRlc3RpbmF0aW9uVG9rZW5JbmZvIiwib3JpZ2luVG9rZW5JbmZvIiwicmVjaXBpZW50Iiwic2VuZGluZ1ZhbHVlIiwib3JpZ2luQ2hhaW5JbmZvIiwiZGVzdGluYXRpb25DaGFpbkluZm8iLCJleHRyaW5zaWMiLCJwb2xrYWRvdFhjbSIsInhjbVBhbGxldCIsImdldEJlbmVmaWNpYXJ5IiwiZ2V0RGVzdGluYXRpb25DaGFpbkxvY2F0aW9uIiwiZ2V0RGVzdFdlaWdodCIsImdldFRva2VuTG9jYXRpb24iLCJ3ZWlnaHRQYXJhbSIsImJlbmVmaWNpYXJ5IiwiZGVzdGluYXRpb24iLCJhc3NldExvY2F0aW9uIiwiQ29uY3JldGUiLCJwYXJlbnRzIiwiaW50ZXJpb3IiLCJmdW4iLCJGdW5naWJsZSIsIl9nZXRYY21Bc3NldE11bHRpbG9jYXRpb24iLCJldm1Ub0FkZHJlc3MiLCJGT1VSX0lOU1RSVUNUSU9OU19XRUlHSFQiLCJGT1VSX0lOU1RSVUNUSU9OU19MSU1JVEVEX1dFSUdIVCIsIkxpbWl0ZWQiLCJnZXRSZWNlaXZlckxvY2F0aW9uIiwidG9BZGRyZXNzIiwiQVNUQVJfRVZNIiwic3M1OEFkZHJlc3MiLCJBY2NvdW50SWQzMiIsIkFjY291bnRLZXkyMCIsInJlY2VpdmVyTG9jYXRpb24iLCJYMSIsIm11bHRpbG9jYXRpb24iLCJnZXREZXN0TXVsdGlsb2NhdGlvbiIsIlgyIiwiUGFyYWNoYWluIiwiX2dldFhjbUFzc2V0SWQiLCJfZ2V0WGNtQXNzZXRUeXBlIiwiZ2V0Q3VycmVuY3lJZCIsInRva2VuVHlwZSIsImRlc3RWZXJzaW9uIiwieFRva2VucyIsInhjbVZlciIsInRva2VuTG9jYXRpb24iLCJDUk9OX1JFRlJFU0hfTkZUX0lOVEVSVkFMIiwiQ1JPTl9SRUZSRVNIX1NUQUtJTkdfUkVXQVJEX0ZBU1RfSU5URVJWQUwiLCJDUk9OX1JFRlJFU0hfU1RBS0lOR19SRVdBUkRfSU5URVJWQUwiLCJDUk9OX1NZTkNfTUFOVEFfUEFZIiwid2FpdFRpbWVvdXQiLCJTdWJqZWN0IiwibG9nZ2VyIiwiY3JlYXRlTG9nZ2VyIiwiS29uaUNyb24iLCJkYlNlcnZpY2UiLCJjcm9uTWFwIiwic3ViamVjdE1hcCIsImdldENyb24iLCJnZXRTdWJqZWN0TWFwIiwiYWRkQ3JvbiIsInJ1bkZpcnN0IiwiYWRkU3Vic2NyaWJlQ3JvbiIsInNiIiwicmVtb3ZlQ3JvbiIsInJlbW92ZUFsbENyb25zIiwic3RhcnQiLCJldmVudFNlcnZpY2UiLCJ3YWl0S2V5cmluZ1JlYWR5Iiwid2FpdEFzc2V0UmVhZHkiLCJjdXJyZW50QWNjb3VudEluZm8iLCJrZXlyaW5nU2VydmljZSIsImN1cnJlbnRBY2NvdW50IiwiY29tbW9uUmVsb2FkRXZlbnRzIiwiZXZlbnRIYW5kbGVyIiwiZXZlbnRzIiwiZXZlbnRUeXBlcyIsInNlcnZpY2VJbmZvIiwiZ2V0U2VydmljZUluZm8iLCJjb21tb25SZWxvYWQiLCJzb21lIiwiZXZlbnRUeXBlIiwiY2hhaW5VcGRhdGVkIiwicmVsb2FkTWFudGFQYXkiLCJ1cGRhdGVkQ2hhaW5zIiwiZXZlbnQiLCJ1cGRhdGVkRGF0YSIsIm5lZWRVcGRhdGVOZnQiLCJyZXNldE5mdCIsImNoZWNrTmV0d29ya0F2YWlsYWJsZSIsInJlZnJlc2hOZnQiLCJjaGFpbkFwaU1hcCIsImdldFNtYXJ0Q29udHJhY3ROZnRzIiwiZ2V0QWN0aXZlQ2hhaW5JbmZvTWFwIiwic3luY01hbnRhUGF5Iiwic2V0U3Rha2luZ1Jld2FyZFJlYWR5Iiwib25MYXp5IiwiZ2V0U3Vic3RyYXRlQXBpTWFwIiwiZ2V0RXZtQXBpTWFwIiwiZ2V0QXBpTWFwIiwicmVmcmVzaFN0YWtpbmdSZXdhcmQiLCJyZWZyZXNoU3Rha2luZ1Jld2FyZEZhc3RJbnRlcnZhbCIsInN0b3AiLCJvZmZMYXp5Iiwic2VydmljZVN1YnNjcmlwdGlvbiIsImlzTWFudGFQYXlFbmFibGVkIiwiYXBpTWFwIiwic3Vic2NyaWJlTmZ0Iiwic3Vic3RyYXRlIiwiZXZtIiwibmV3QWRkcmVzcyIsInN1YnNjcmliZVN0YWtpbmdSZXdhcmQiLCJzdWJzY3JpYmVTdGFraW5nUmV3YXJkRmFzdEludGVydmFsIiwidXBkYXRlU3Rha2luZ1Jld2FyZFJlYWR5IiwicmVsb2FkTmZ0IiwicmVsb2FkU3Rha2luZyIsInVwZGF0ZWRDaGFpbiIsIkNvbW1vbiIsIkFjY291bnRFeHRlcm5hbEVycm9yQ29kZSIsIkNoYWluVHlwZSIsIkV4dHJpbnNpY1R5cGUiLCJNYW50YVBheUVuYWJsZU1lc3NhZ2UiLCJBTExfQUNDT1VOVF9LRVkiLCJBTExfR0VORVNJU19IQVNIIiwiWENNX01JTl9BTU9VTlRfUkFUSU8iLCJyZXNvbHZlQXplcm9BZGRyZXNzVG9Eb21haW4iLCJyZXNvbHZlQXplcm9Eb21haW5Ub0FkZHJlc3MiLCJfQVBJX09QVElPTlNfQ0hBSU5fR1JPVVAiLCJfREVGQVVMVF9NQU5UQV9aS19DSEFJTiIsIl9DaGFpbkNvbm5lY3Rpb25TdGF0dXMiLCJfZ2V0RXZtQ2hhaW5JZCIsIl9nZXRTdWJzdHJhdGVHZW5lc2lzSGFzaCIsIl9nZXRUb2tlbk1pbkFtb3VudCIsIl9pc0Fzc2V0U21hcnRDb250cmFjdE5mdCIsIl9pc0N1c3RvbUFzc2V0IiwiX2lzTG9jYWxUb2tlbiIsIl9pc01hbnRhWmtBc3NldCIsIl9pc1Rva2VuRXZtU21hcnRDb250cmFjdCIsIl9pc1Rva2VuVHJhbnNmZXJyZWRCeUV2bSIsIkVYVEVOU0lPTl9SRVFVRVNUX1VSTCIsIkRFRkFVTFRfQVVUT19MT0NLX1RJTUUiLCJXQUxMRVRfQ09OTkVDVF9FSVAxNTVfTkFNRVNQQUNFIiwiaXNQcm9wb3NhbEV4cGlyZWQiLCJpc1N1cHBvcnRXYWxsZXRDb25uZWN0Q2hhaW4iLCJpc1N1cHBvcnRXYWxsZXRDb25uZWN0TmFtZXNwYWNlIiwidW5pcXVlU3RyaW5nQXJyYXkiLCJjb252ZXJ0U3ViamVjdEluZm9Ub0FkZHJlc3NlcyIsImNyZWF0ZVRyYW5zYWN0aW9uRnJvbVJMUCIsInNpZ25hdHVyZVRvSGV4IiwicGFyc2VDb250cmFjdElucHV0IiwicGFyc2VFdm1SbHAiLCJiYWxhbmNlRm9ybWF0dGVyIiwiZm9ybWF0TnVtYmVyIiwiY3JlYXRlUGFpciIsImdldFNka0Vycm9yIiwiVHJhbnNhY3Rpb24iLCJoZXhTdHJpcFByZWZpeCIsImlzQXNjaWkiLCJ1OGFUb1N0cmluZyIsImFkZHJlc3NUb0V2bSIsImJhc2U2NERlY29kZSIsImlzQWRkcmVzcyIsImpzb25EZWNyeXB0IiwiQUNDT1VOVF9BTExfSlNPTiIsIktvbmlFeHRlbnNpb24iLCJsb2NrVGltZU91dCIsImtvbmlTdGF0ZSIsInRpbWVBdXRvTG9jayIsInNraXBBdXRvTG9jayIsImFsd2F5c0xvY2siLCJmaXJzdFRpbWUiLCJ1cGRhdGVUaW1lQXV0b0xvY2siLCJrZXlyaW5nTG9jayIsInNldHRpbmdTZXJ2aWNlIiwiZ2V0U2V0dGluZ3MiLCJnZXRTdWJqZWN0IiwibmV4dCIsImFjY291bnRTdWJqZWN0IiwiY2FuY2VsU3Vic2NyaXB0aW9uIiwieCIsImNyZWF0ZVVuc3Vic2NyaXB0aW9uSGFuZGxlIiwiaWdub3JlQ2hlY2tzdW0iLCJzczU4Rm9ybWF0IiwiZW5jb2RlQWRkcmVzcyIsImFjY291bnRFeHBvcnRQcml2YXRlS2V5IiwiY2hlY2tQdWJsaWNBbmRTZWNyZXRLZXkiLCJhY2NvdW50c0dldEFsbFdpdGhDdXJyZW50QWRkcmVzcyIsIndhaXRBY2NvdW50UmVhZHkiLCJ0cmFuc2Zvcm1lZEFjY291bnRzIiwicmVzcG9uc2VEYXRhIiwiY3VycmVudEdlbmVzaXNIYXNoIiwic3Vic2NyaXB0aW9uQWNjb3VudHMiLCJzdG9yZWRBY2NvdW50cyIsInN1YnNjcmlwdGlvbkN1cnJlbnRBY2NvdW50IiwiY3VycmVudEFjY291bnRTdWJqZWN0IiwiY3VycmVudEFjY291bnREYXRhIiwiYWNjb3VudHNHZXRBbGwiLCJrZXlyaW5nT3B0aW9uIiwib3B0aW9uc1N1YmplY3QiLCJvcHRpb25zSW5wdXRBZGRyZXNzIiwic3Vic2NyaWJlQWRkcmVzc2VzIiwiX2NiIiwiYWRkcmVzc2VzU3ViamVjdCIsInN1YmplY3RJbmZvIiwic2F2ZVJlY2VudEFjY291bnQiLCJhY2NvdW50SWQiLCJnZXRBY2NvdW50IiwiY29udGFjdCIsImdldEFkZHJlc3MiLCJzYXZlUmVjZW50IiwiZWRpdENvbnRhY3RBY2NvdW50IiwiX2FkZHJlc3MiLCJzYXZlQWRkcmVzcyIsImRlbGV0ZUNvbnRhY3RBY2NvdW50IiwiZm9yZ2V0QWRkcmVzcyIsIl9nZXRBdXRoTGlzdFYyIiwiZ2V0QXV0aG9yaXplIiwiYWRkcmVzc0xpc3QiLCJ1cmxMaXN0IiwiaXNBbGxvd2VkTWFwIiwic2V0QXV0aG9yaXplIiwiYXV0aG9yaXplU3Vic2NyaWJlVjIiLCJhdXRoU3ViamVjdFYyIiwiZ2V0QXV0aExpc3RWMiIsImF1dGhMaXN0IiwiYXV0aG9yaXplQXBwcm92ZVYyIiwiZ2V0QXV0aFJlcXVlc3RWMiIsImF1dGhvcml6ZVJlamVjdFYyIiwiYXV0aG9yaXplQ2FuY2VsVjIiLCJfZm9yZ2V0U2l0ZSIsImZvcmdldFNpdGUiLCJpdGVtcyIsIl9mb3JnZXRBbGxTaXRlIiwiZm9yZ2V0QWxsU2l0ZSIsImdldEFjY291bnRzIiwiYSIsImlzQWRkcmVzc1ZhbGlkV2l0aEF1dGhUeXBlIiwiYWNjb3VudEF1dGhUeXBlIiwiZmlsdGVyQWNjb3VudHNCeUFjY291bnRBdXRoVHlwZSIsIl9jaGFuZ2VBdXRob3JpemF0aW9uQWxsIiwiY29ubmVjdFZhbHVlIiwiaXNBbGxvd2VkIiwidGFyZ2V0QWNjb3VudHMiLCJjaGFuZ2VBdXRob3JpemF0aW9uQWxsIiwiX2NoYW5nZUF1dGhvcml6YXRpb24iLCJ0b2dnbGVBdXRob3JpemF0aW9uMiIsImNoYW5nZUF1dGhvcml6YXRpb24iLCJfY2hhbmdlQXV0aG9yaXphdGlvblBlckFjYyIsIl9jaGFuZ2VBdXRob3JpemF0aW9uQmxvY2siLCJfY2hhbmdlQXV0aG9yaXphdGlvblBlclNpdGUiLCJjaGFuZ2VBdXRob3JpemF0aW9uUGVyQWNjIiwiY2hhbmdlQXV0aG9yaXphdGlvblBlclNpdGUiLCJjaGFuZ2VBdXRob3JpemF0aW9uQmxvY2siLCJjb25uZWN0ZWRWYWx1ZSIsInRvZ2dsZUJhbGFuY2VzVmlzaWJpbGl0eSIsInVwZGF0ZVZhbHVlIiwiaXNTaG93QmFsYW5jZSIsInNldFNldHRpbmdzIiwic2F2ZUFjY291bnRBbGxMb2dvIiwiYWNjb3VudEFsbExvZ28iLCJzYXZlVGhlbWUiLCJ1cGRhdGVTZXR0aW5nIiwic2V0Q2FtZXJhIiwiY2FtZXJhIiwic2F2ZUJyb3dzZXJDb25maXJtYXRpb25UeXBlIiwic2V0QXV0b0xvY2tUaW1lIiwiYXV0b0xvY2tUaW1lIiwic2V0VW5sb2NrVHlwZSIsInVubG9ja1R5cGUiLCJzdWJzY3JpYmVTZXR0aW5ncyIsImJhbGFuY2VzVmlzaWJpbGl0eVN1YnNjcmlwdGlvbiIsInN1YnNjcmliZVNldHRpbmdzU3ViamVjdCIsInNldEVuYWJsZUNoYWluUGF0cm9sIiwiZW5hYmxlIiwic2V0U2hvd1plcm9CYWxhbmNlIiwic2hvdyIsInNldExhbmd1YWdlIiwibGFuZ3VhZ2UiLCJzZXRTaG93QmFsYW5jZSIsInN1YnNjcmliZUF1dGhVcmxzIiwiYXV0aG9yaXplVXJsU3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlQXV0aG9yaXplVXJsU3ViamVjdCIsIl9zYXZlQ3VycmVudEFjY291bnRBZGRyZXNzIiwiYWxsR2VuZXNpc0hhc2giLCJjdXJyZW50S2V5UGFpciIsInNldEN1cnJlbnRBY2NvdW50IiwidXBkYXRlQ3VycmVudEFjY291bnRBZGRyZXNzIiwic2F2ZUN1cnJlbnRBY2NvdW50QWRkcmVzcyIsImN1cnJlbnRJbmZvIiwiZ2V0QXNzZXRTZXR0aW5nIiwiZ2V0QXNzZXRTZXR0aW5ncyIsInN1YnNjcmliZUFzc2V0U2V0dGluZyIsImFzc2V0U2V0dGluZ1N1YnNjcmlwdGlvbiIsInN1YnNjcmliZUFzc2V0U2V0dGluZ3MiLCJ1cGRhdGVBc3NldFNldHRpbmciLCJhc3NldFNldHRpbmciLCJhdXRvRW5hYmxlTmF0aXZlVG9rZW4iLCJlbWl0IiwiZ2V0UHJpY2UiLCJwcmljZVNlcnZpY2UiLCJzdWJzY3JpYmVQcmljZSIsInByaWNlU3Vic2NyaXB0aW9uIiwiZ2V0UHJpY2VTdWJqZWN0IiwicmVzZXQiLCJiYWxhbmNlU3Vic2NyaXB0aW9uIiwiZ2V0Q3Jvd2Rsb2FuIiwiY3Jvd2Rsb2FuU3Vic2NyaXB0aW9uIiwidmFsaWRhdGVQYXNzd29yZCIsImNyeXB0b1R5cGUiLCJlbmNvZGluZyIsImNvbnRlbnQiLCJlbmNUeXBlIiwidG9TUzU4IiwiZW5jb2RlZCIsInZhbGlkYXRlZEFjY291bnRzUGFzc3dvcmQiLCJfYWRkQWRkcmVzc1RvQXV0aExpc3QiLCJfYWRkQWRkcmVzc2VzVG9BdXRoTGlzdCIsImFjY291bnRzQ3JlYXRlU3VyaVYyIiwiX3N1cmkiLCJhZGRyZXNzRGljdCIsImNoYW5nZWRBY2NvdW50IiwiaGFzTWFzdGVyUGFzc3dvcmQiLCJjaGFuZ2VNYXN0ZXJQYXNzd29yZCIsInVwZGF0ZUtleXJpbmdTdGF0ZSIsIm5ld0FjY291bnROYW1lIiwiYWRkQWNjb3VudFJlZiIsImFjY291bnRzRm9yZ2V0T3ZlcnJpZGUiLCJsb2NrQWZ0ZXIiLCJyZW1vdmVBY2NvdW50UmVmIiwiZGlzYWJsZU1hbnRhUGF5IiwiY2hlY2tMb2NrQWZ0ZXJNaWdyYXRlIiwic2VlZENyZWF0ZVYyIiwiYWRkcmVzc01hcCIsInNlZWRWYWxpZGF0ZVYyIiwiX2NoZWNrVmFsaWRhdGVQcml2YXRlS2V5IiwiYXV0b0FkZFByZWZpeCIsIm1ldGFtYXNrUHJpdmF0ZUtleVZhbGlkYXRlVjIiLCJpc1ZhbGlkU3VyaSIsImRlcml2ZVYyIiwidW5sb2NrUGFpciIsImRlcml2YXRpb25DcmVhdGVWMiIsImpzb25SZXN0b3JlVjIiLCJ3aXRoTWFzdGVyUGFzc3dvcmQiLCJpc1Bhc3N3b3JkVmFsaWRhdGVkIiwiYmF0Y2hSZXN0b3JlVjIiLCJhY2NvdW50c0luZm8iLCJhY2MiLCJnZXROZnRDb2xsZWN0aW9uIiwic3Vic2NyaWJlTmZ0Q29sbGVjdGlvbiIsIm5mdENvbGxlY3Rpb25TdWJzY3JpcHRpb24iLCJnZXROZnQiLCJuZnRTdWJzY3JpcHRpb24iLCJnZXRTdGFraW5nUmV3YXJkIiwic3Rha2luZ1Jld2FyZFN1YnNjcmlwdGlvbiIsImdldFN0YWtpbmciLCJzdWJzY3JpYmVTdGFraW5nIiwic3Rha2luZ1N1YnNjcmlwdGlvbiIsInN1YnNjcmliZUhpc3RvcnkiLCJoaXN0b3J5U3ViamVjdCIsImhpc3RvcnlTZXJ2aWNlIiwiZ2V0SGlzdG9yeVN1YmplY3QiLCJoaXN0b3JpZXMiLCJ2YWxpZGF0ZVRyYW5zZmVyIiwia2V5cGFpciIsImdldEFzc2V0QnlTbHVnIiwibWFrZVRyYW5zZmVyIiwiaW5wdXREYXRhIiwid2FybmluZ3MiLCJnZXRDaGFpbkluZm8iLCJuYXRpdmVUb2tlblNsdWciLCJpc1RyYW5zZmVyTmF0aXZlVG9rZW4iLCJjaGFpblR5cGUiLCJTVUJTVFJBVEUiLCJ0b2tlbkJhc2VBbW91bnQiLCJ0cmFuc2FjdGlvbiIsImdldEFkZHJlc3NGcmVlQmFsYW5jZSIsIkVWTSIsInR4VmFsIiwidHJhbnNmZXJOYXRpdmVBbW91bnQiLCJhZGRpdGlvbmFsVmFsaWRhdG9yIiwiaW5wdXRUcmFuc2FjdGlvbiIsIm1pbkFtb3VudCIsIm1pbnVzIiwibHQiLCJyZWNlaXZlckJhbGFuY2UiLCJwbHVzIiwiYXRMZWFzdCIsImF0TGVhc3RTdHIiLCJ0cmFuc2FjdGlvblNlcnZpY2UiLCJoYW5kbGVUcmFuc2FjdGlvbiIsImV4dHJpbnNpY1R5cGUiLCJUUkFOU0ZFUl9CQUxBTkNFIiwiVFJBTlNGRVJfVE9LRU4iLCJpZ25vcmVXYXJuaW5ncyIsImlzVHJhbnNmZXJBbGwiLCJlZEFzV2FybmluZyIsInZhbGlkYXRlQ3Jvc3NDaGFpblRyYW5zZmVyIiwiZGVzdGluYXRpb25OZXR3b3JrS2V5Iiwic2VuZGluZ1Rva2VuU2x1ZyIsInNlbmRlciIsImdldFhjbUVxdWFsQXNzZXRCeUNoYWluIiwiSU5WQUxJRF9UT0tFTiIsIm1ha2VDcm9zc0NoYWluVHJhbnNmZXIiLCJvcmlnaW5OZXR3b3JrS2V5IiwiZnJvbUtleVBhaXIiLCJnZW5lcmF0ZUJlZm9yZUhhbmRsZVJlc3BvbnNlRXJyb3JzIiwiZXZlbnRzSGFuZGxlciIsImdldENoYWluSW5mb01hcCIsImRlc3RNaW5BbW91bnQiLCJtdWx0aXBsaWVkQnkiLCJzcmNNaW5BbW91bnQiLCJhc3NldFR5cGUiLCJldmVudEVtaXR0ZXIiLCJvbiIsImRlc3QiLCJ2aXNpYmxlIiwiVFJBTlNGRVJfWENNIiwiZXZtTmZ0U3VibWl0VHJhbnNhY3Rpb24iLCJnZXRFdm1BcGkiLCJTRU5EX05GVCIsInVwc2VydENoYWluIiwidXBzZXJ0Q2hhaW5JbmZvIiwicmVtb3ZlQ3VzdG9tQ2hhaW4iLCJkaXNhYmxlQ2hhaW4iLCJlbmFibGVDaGFpbiIsImVuYWJsZVRva2VucyIsInJlY29ubmVjdENoYWluIiwidmFsaWRhdGVOZXR3b3JrIiwiZXhpc3RlZENoYWluU2x1ZyIsInZhbGlkYXRlQ3VzdG9tQ2hhaW4iLCJyZXNldERlZmF1bHROZXR3b3JrIiwicmVzZXREZWZhdWx0Q2hhaW5zIiwicmVjb3ZlckRvdFNhbWFBcGkiLCJyZWZyZXNoU3Vic3RyYXRlQXBpIiwidXBzZXJ0Q3VzdG9tVG9rZW4iLCJkZWxldGVDdXN0b21Bc3NldCIsImFzc2V0U2x1ZyIsImFzc2V0SW5mbyIsImRlbGV0ZU5mdENvbGxlY3Rpb24iLCJkZWxldGVDdXN0b21Bc3NldHMiLCJ2YWxpZGF0ZUN1c3RvbUFzc2V0IiwiZ2V0TWFudGFQYXlaa0JhbGFuY2UiLCJiYWxhbmNlU2VydmljZSIsImdldFRva2VuRnJlZUJhbGFuY2UiLCJ0cmFuc2ZlckdldE1heFRyYW5zZmVyYWJsZSIsImRlc3RDaGFpbiIsImlzWGNtVHJhbnNmZXIiLCJlc3RpbWF0ZWRGZWUiLCJtYXhUcmFuc2ZlcmFibGUiLCJkZXNDaGFpbkluZm8iLCJvcmdDaGFpbkluZm8iLCJtb2NrVHgiLCJwYXltZW50SW5mbyIsInBhcnRpYWxGZWUiLCJnZXRDaGFpbkluZm9CeUtleSIsIndlYjMiLCJzdWJzY3JpYmVBZGRyZXNzRnJlZUJhbGFuY2UiLCJjdXJyZW50RnJlZUJhbGFuY2UiLCJzdWJzY3JpYmVUb2tlbkZyZWVCYWxhbmNlIiwidHJhbnNmZXJDaGVja1JlZmVyZW5jZUNvdW50IiwidHJhbnNmZXJDaGVja1N1cHBvcnRpbmciLCJ0cmFuc2ZlckdldEV4aXN0ZW50aWFsRGVwb3NpdCIsInN1YnN0cmF0ZU5mdFN1Ym1pdFRyYW5zYWN0aW9uIiwiaXNTZW5kaW5nU2VsZiIsImlzUFNQMzQiLCJpc1BzcDM0IiwiZW5hYmxlQ2hhaW5zIiwiY2hhaW5TbHVncyIsImdldEFjY291bnRNZXRhIiwiYWNjb3VudHNUaWUyIiwic2V0QWNjb3VudFRpZSIsImFjY291bnRzQ3JlYXRlRXh0ZXJuYWxWMiIsImlzUmVhZE9ubHkiLCJleGlzdHMiLCJJTlZBTElEX0FERFJFU1MiLCJfZ2VuIiwiYWRkRnJvbUFkZHJlc3MiLCJpc0V4dGVybmFsIiwic2F2ZUFjY291bnQiLCJLRVlSSU5HX0VSUk9SIiwiYWNjb3VudHNDcmVhdGVIYXJkd2FyZVYyIiwib3JpZ2luR2VuZXNpc0hhc2giLCJhY2NvdW50c0NyZWF0ZUhhcmR3YXJlTXVsdGlwbGUiLCJzbHVnTWFwIiwiYmFzZU1ldGEiLCJpc0hhcmR3YXJlIiwiZXRoZXJldW0iLCJhdmFpbGFibGVHZW5lc2lzSGFzaGVzIiwiZmluZE5ldHdvcmtLZXlCeUdlbmVzaXNIYXNoIiwiYWNjb3VudHNDcmVhdGVXaXRoU2VjcmV0IiwiaXNBbGxvdyIsInNlY3JldEtleSIsImtleXJpbmdQYWlyIiwiX3NlY3JldCIsImFkZEZyb21QYWlyIiwic3VjY2VzcyIsInJlamVjdEV4dGVybmFsUmVxdWVzdCIsInRocm93RXJyb3IiLCJwcm9taXNlIiwiZ2V0RXh0ZXJuYWxSZXF1ZXN0IiwidXBkYXRlRXh0ZXJuYWxSZXF1ZXN0IiwiUkVKRUNURUQiLCJyZXNvbHZlUXJUcmFuc2ZlciIsInN1YnNjcmliZUNvbmZpcm1hdGlvbnMiLCJnZXRDb25maXJtYXRpb25zUXVldWVTdWJqZWN0IiwiY29tcGxldGVDb25maXJtYXRpb24iLCJnZXROZXR3b3JrSnNvbkJ5Q2hhaW5JZCIsImNoYWluSWQiLCJuIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwYXJzZUVWTVJMUCIsInFyU2lnblN1YnN0cmF0ZSIsInNpZ25lZCIsIndpdGhUeXBlIiwicXJTaWduRVZNIiwiZXZtU2lnbmVyIiwic2lnbk1lc3NhZ2UiLCJ0eE9iamVjdCIsImNvbW1vbiIsImZvckN1c3RvbUNoYWluIiwibmV0d29ya0lkIiwic2lnblRyYW5zYWN0aW9uIiwiciIsInMiLCJzdWJzY3JpYmVDaGFpblN0YWtpbmdNZXRhZGF0YSIsInN1YnNjcmliZVN0YWtpbmdOb21pbmF0b3JNZXRhZGF0YSIsInN1YnNjcmliZU5vbWluYXRvck1ldGFkYXRhIiwiZ2V0Qm9uZGluZ09wdGlvbnMiLCJnZXRTdGFraW5nTWV0YWRhdGFCeUNoYWluIiwiZ2V0Tm9taW5hdGlvblBvb2xPcHRpb25zIiwic3VibWl0Qm9uZGluZyIsImJvbmRpbmdWYWxpZGF0aW9uIiwiU1RBS0lOR19CT05EIiwic3VibWl0VW5ib25kaW5nIiwidW5ib25kaW5nVmFsaWRhdGlvbiIsIlNUQUtJTkdfVU5CT05EIiwic3VibWl0U3Rha2VXaXRoZHJhd2FsIiwiZG90U2FtYUFwaSIsIlNUQUtJTkdfV0lUSERSQVciLCJzdWJtaXRTdGFrZUNsYWltUmV3YXJkIiwiU1RBS0lOR19DTEFJTV9SRVdBUkQiLCJzdWJtaXRDYW5jZWxTdGFrZVdpdGhkcmF3YWwiLCJTVEFLSU5HX0NBTkNFTF9VTlNUQUtFIiwic3VibWl0UG9vbEJvbmRpbmciLCJTVEFLSU5HX0pPSU5fUE9PTCIsInN1Ym1pdFBvb2xpbmdVbmJvbmRpbmciLCJTVEFLSU5HX0xFQVZFX1BPT0wiLCJzdWJtaXRUdXJpbmdTdGFrZUNvbXBvdW5kaW5nIiwicGFyc2VkQWNjb3VudE1pbmltdW0iLCJTVEFLSU5HX0NPTVBPVU5ESU5HIiwic3VibWl0VHVyaW5nQ2FuY2VsU3Rha2VDb21wb3VuZCIsInR4U3RhdGUiLCJ0eEVycm9yIiwiU1RBS0lOR19DQU5DRUxfQ09NUE9VTkRJTkciLCJrZXlyaW5nU3RhdGVTdWJzY3JpYmUiLCJrZXlyaW5nU3RhdGVTdWJqZWN0Iiwia2V5cmluZ1N0YXRlIiwia2V5cmluZ0NoYW5nZU1hc3RlclBhc3N3b3JkIiwiY3JlYXRlTmV3IiwibmV3UGFzc3dvcmQiLCJvbGRQYXNzd29yZCIsInBhaXJzIiwiZ2V0UGFpcnMiLCJpc0luamVjdGVkIiwiaXNNYXN0ZXJQYXNzd29yZCIsInNldE1ldGEiLCJuZWVkTWlncmF0ZSIsImtleXJpbmdNaWdyYXRlTWFzdGVyUGFzc3dvcmQiLCJtaWdyYXRlV2l0aE1hc3RlclBhc3N3b3JkIiwia2V5cmluZ1VubG9jayIsInVubG9ja0tleXJpbmciLCJpbml0TWFudGFQYXkiLCJrZXlyaW5nRXhwb3J0TW5lbW9uaWMiLCJleHBvcnRNbmVtb25pYyIsInJlc2V0V2FsbGV0IiwicmVzZXRBbGwiLCJzaWduaW5nQXBwcm92ZVBhc3N3b3JkVjIiLCJpc0V2bSIsImlzQ2hhaW5BY3RpdmUiLCJnZXRDaGFpblN0YXRlQnlLZXkiLCJkZXJpdmF0aW9uQ3JlYXRlTXVsdGlwbGUiLCJjcmVhdGVDaGlsZCIsImluZGV4IiwicmVnIiwiZGVyaXZlRXZtIiwiZGVyaXZhdGlvbkNyZWF0ZVYzIiwiY2hpbGRyZW4iLCJ2YWxpZCIsImV4aXN0IiwidmFsaWRhdGVEZXJpdmVQYXRoIiwiZ2V0TGlzdERlcml2ZUFjY291bnRzIiwibGltaXQiLCJwYWdlIiwiZW5kIiwic3Vic2NyaWJlQ2hhaW5JbmZvTWFwIiwicmVhZHkiLCJjaGFpbkluZm9NYXBTdWJzY3JpcHRpb24iLCJ3YWl0Q2hhaW5SZWFkeSIsInN1YnNjcmliZUNoYWluU3RhdGVNYXAiLCJjaGFpblN0YXRlTWFwU3Vic2NyaXB0aW9uIiwiZ2V0Q2hhaW5TdGF0ZU1hcCIsInN1YnNjcmliZUFzc2V0UmVnaXN0cnkiLCJhc3NldFJlZ2lzdHJ5U3Vic2NyaXB0aW9uIiwiZ2V0QXNzZXRSZWdpc3RyeSIsInN1YnNjcmliZU11bHRpQ2hhaW5Bc3NldE1hcCIsIm11bHRpQ2hhaW5Bc3NldFN1YnNjcmlwdGlvbiIsImdldE11bHRpQ2hhaW5Bc3NldE1hcCIsInN1YnNjcmliZVhjbVJlZk1hcCIsInhjbVJlZlN1YnNjcmlwdGlvbiIsImdldFhjbVJlZk1hcCIsImdldFN1cHBvcnRlZFNtYXJ0Q29udHJhY3RUeXBlcyIsImdldFRyYW5zYWN0aW9uIiwidHJhbnNhY3Rpb25SZXN1bHQiLCJzdWJzY3JpYmVUcmFuc2FjdGlvbnMiLCJjb252ZXJ0UnMiLCJmcm9tRW50cmllcyIsInRyYW5zYWN0aW9uc1N1YmplY3QiLCJnZXRUcmFuc2FjdGlvblN1YmplY3QiLCJ0cmFuc2FjdGlvbnNTdWJzY3JpcHRpb24iLCJzdWJzY3JpYmVOb3RpZmljYXRpb25zIiwibm90aWZpY2F0aW9uU3ViamVjdCIsIm5vdGlmaWNhdGlvblNlcnZpY2UiLCJnZXROb3RpZmljYXRpb25TdWJqZWN0Iiwibm90aWZpY2F0aW9uU3Vic2NyaXB0aW9uIiwicmVsb2FkQ3JvbiIsImdldExvZ29NYXAiLCJjaGFpbkxvZ29NYXAiLCJhc3NldExvZ29NYXAiLCJnZXRDaGFpbkxvZ29NYXAiLCJnZXRBc3NldExvZ29NYXAiLCJwYXNzUGhpc2hpbmdQYWdlIiwiYXBwcm92ZVBhc3NQaGlzaGluZ1BhZ2UiLCJjb25uZWN0V2FsbGV0Q29ubmVjdCIsInVyaSIsIndhbGxldENvbm5lY3RTZXJ2aWNlIiwiY29ubmVjdFdDU3Vic2NyaWJlIiwicmVxdWVzdFNlcnZpY2UiLCJjb25uZWN0V0NTdWJqZWN0IiwiYWxsQ29ubmVjdFdDUmVxdWVzdHMiLCJhcHByb3ZlV2FsbGV0Q29ubmVjdFNlc3Npb24iLCJzZWxlY3RlZEFjY291bnRzIiwiZ2V0Q29ubmVjdFdDUmVxdWVzdCIsIndjSWQiLCJyZXF1aXJlZE5hbWVzcGFjZXMiLCJvcHRpb25hbE5hbWVzcGFjZXMiLCJhdmFpbGFibGVOYW1lc3BhY2VzIiwibmFtZXNwYWNlcyIsIm5hbWVzcGFjZSIsInVuU3VwcG9ydENoYWlucyIsInN1cHBvcnRDaGFpbnMiLCJyZXF1aXJlZE5hbWVTcGFjZSIsImRlZmF1bHRDaGFpbnMiLCJyZWxheVByb3RvY29sIiwicmVsYXlzIiwiYXBwcm92ZVNlc3Npb24iLCJyZWplY3RXYWxsZXRDb25uZWN0U2Vzc2lvbiIsInJlamVjdFNlc3Npb24iLCJzdWJzY3JpYmVXYWxsZXRDb25uZWN0U2Vzc2lvbnMiLCJzZXNzaW9uU3ViamVjdCIsInNlc3Npb25zIiwiZGlzY29ubmVjdFdhbGxldENvbm5lY3RTZXNzaW9uIiwidG9waWMiLCJkaXNjb25uZWN0IiwiV0NOb3RTdXBwb3J0U3Vic2NyaWJlIiwibm90U3VwcG9ydFdDU3ViamVjdCIsImFsbE5vdFN1cHBvcnRXQ1JlcXVlc3RzIiwiYXBwcm92ZVdhbGxldENvbm5lY3ROb3RTdXBwb3J0IiwiZ2V0Tm90U3VwcG9ydFdDUmVxdWVzdCIsInJlamVjdFdhbGxldENvbm5lY3ROb3RTdXBwb3J0IiwiZW5hYmxlTWFudGFQYXkiLCJzZXRNYW50YVprQXNzZXRTZXR0aW5ncyIsIm1uZW1vbmljIiwiY29ubmVjdGlvblN0YXR1cyIsIkNPTk5FQ1RFRCIsInVuc3ViU3luY1Byb2dyZXNzIiwibWFudGFQYXkiLCJzdWJzY3JpYmVTeW5jUHJvZ3Jlc3MiLCJpbml0aWFsU3luY01hbnRhUGF5IiwiU1VDQ0VTUyIsIlVOS05PV05fRVJST1IiLCJXUk9OR19QQVNTV09SRCIsImluaXRTeW5jTWFudGFQYXkiLCJnZXRTeW5jU3RhdGUiLCJpc1N5bmNpbmciLCJzZXRTeW5jU3RhdGUiLCJwcm9ncmVzcyIsInN1YnNjcmliZU1hbnRhUGF5Q29uZmlnIiwibWFudGFQYXlDb25maWdTdWJzY3JpcHRpb24iLCJnZXRNYW50YVBheUNvbmZpZyIsInN1YnNjcmliZU1hbnRhUGF5U3luY1N0YXRlIiwic3luY2luZ1N0YXRlU3Vic2NyaXB0aW9uIiwibmVlZE1hbnVhbFN5bmMiLCJmaW5kUmF3TWV0YWRhdGEiLCJmaW5kTWV0YWRhdGEiLCJyYXdNZXRhZGF0YSIsInJlc29sdmVEb21haW5CeUFkZHJlc3MiLCJkb21haW4iLCJyZXNvbHZlQWRkcmVzc0J5RG9tYWluIiwiYWRkSW5qZWN0cyIsImFkZEluamVjdEFjY291bnRzIiwicmVtb3ZlSW5qZWN0cyIsInJlbW92ZUluamVjdEFjY291bnRzIiwiREVGQVVMVF9TRVJWSUNFX01BUCIsImNoYWluUmVnaXN0cnkiLCJjcm9uIiwicHJpY2UiLCJoaXN0b3J5IiwicmVjb3ZlckFwaSIsImNoZWNrQXBpU3RhdHVzIiwiTW9iaWxlIiwicGluZyIsImluaXRDcm9uQW5kU3Vic2NyaXB0aW9uIiwiYWN0aXZlU2VydmljZXMiLCJhY3RpdmVDcm9uU2VydmljZXMiLCJpbnRlcnZhbE1hcCIsImNyb25JbnRlcnZhbE1hcCIsImFjdGl2ZVN1YnNjcmlwdGlvblNlcnZpY2VzIiwic3Vic2NyaWJlQWN0aXZlQ3JvbkFuZFN1YnNjcmlwdGlvblNlcnZpY2VNYXAiLCJzdGFydENyb25BbmRTdWJzY3JpcHRpb25TZXJ2aWNlcyIsImNyb25TZXJ2aWNlcyIsInN1YnNjcmlwdGlvblNlcnZpY2VzIiwic3RvcENyb25BbmRTdWJzY3JpcHRpb25TZXJ2aWNlcyIsInJlc3RhcnRDcm9uQW5kU3Vic2NyaXB0aW9uU2VydmljZXMiLCJzdGFydENyb25TZXJ2aWNlcyIsInNlcnZpY2VzIiwic3RvcENyb25TZXJ2aWNlcyIsInJlc3RhcnRDcm9uU2VydmljZXMiLCJzdGFydFN1YnNjcmlwdGlvblNlcnZpY2VzIiwic3RvcFN1YnNjcmlwdGlvblNlcnZpY2VzIiwicmVzdGFydFN1YnNjcmlwdGlvblNlcnZpY2VzIiwiQ2hhaW5JbmZvTWFwIiwiRXZtUHJvdmlkZXJFcnJvclR5cGUiLCJNQU5UQV9QQVlfQkFMQU5DRV9JTlRFUlZBTCIsIkJhbGFuY2VTZXJ2aWNlIiwiU2VydmljZVN0YXR1cyIsIkNoYWluU2VydmljZSIsIl9QUkVERUZJTkVEX1NJTkdMRV9NT0RFUyIsIl9pc0Fzc2V0RnVuZ2libGVUb2tlbiIsIl9pc0NoYWluRW5hYmxlZCIsIl9pc0NoYWluVGVzdE5ldCIsIl9wYXJzZU1ldGFkYXRhRm9yU21hcnRDb250cmFjdEFzc2V0IiwiRXZlbnRTZXJ2aWNlIiwiSGlzdG9yeVNlcnZpY2UiLCJLZXlyaW5nU2VydmljZSIsIk1pZ3JhdGlvblNlcnZpY2UiLCJOb3RpZmljYXRpb25TZXJ2aWNlIiwiUHJpY2VTZXJ2aWNlIiwiUmVxdWVzdFNlcnZpY2UiLCJTZXR0aW5nU2VydmljZSIsIkRhdGFiYXNlU2VydmljZSIsIlN1YnNjYW5TZXJ2aWNlIiwiU1VCU0NBTl9DSEFJTl9NQVBfUkVWRVJTRSIsIlRyYW5zYWN0aW9uU2VydmljZSIsIldhbGxldENvbm5lY3RTZXJ2aWNlIiwiQWNjb3VudFJlZlN0b3JlIiwic3RyaXBVcmwiLCJpc0NvbnRyYWN0QWRkcmVzcyIsImNyZWF0ZVByb21pc2VIYW5kbGVyIiwiZGVjb2RlUGFpciIsIlNpbXBsZUtleXJpbmciLCJLb25pU3Vic2NyaXB0aW9uIiwicGFzc3dvcmRlciIsInJlcXVpcmUiLCJnZW5lcmF0ZURlZmF1bHRDcm93ZGxvYW5NYXAiLCJjcm93ZGxvYW5NYXAiLCJLb25pU3RhdGUiLCJpbmplY3RlZFByb3ZpZGVycyIsIk1hcCIsInVuc3Vic2NyaXB0aW9uTWFwIiwiYWNjb3VudFJlZlN0b3JlIiwiZXh0ZXJuYWxSZXF1ZXN0IiwiYmFsYW5jZU1hcCIsImJhbGFuY2VTdWJqZWN0IiwiY3Jvd2Rsb2FuU3ViamVjdCIsIm5mdFN1YmplY3QiLCJtYW50YVBheUNvbmZpZ1N1YmplY3QiLCJzdGFraW5nU3ViamVjdCIsImNoYWluU3Rha2luZ01ldGFkYXRhU3ViamVjdCIsInN0YWtpbmdOb21pbmF0b3JNZXRhZGF0YVN1YmplY3QiLCJzdGFraW5nUmV3YXJkU3ViamVjdCIsInN0YWtpbmdSZXdhcmRTdGF0ZSIsImxhenlNYXAiLCJnZW5lcmFsU3RhdHVzIiwiSU5JVElBTElaSU5HIiwid2FpdFNsZWVwaW5nIiwid2FpdFN0YXJ0aW5nIiwicHJvdmlkZXJzIiwic3Vic2NhblNlcnZpY2UiLCJtaWdyYXRpb25TZXJ2aWNlIiwiaW5pdCIsImluamVjdE1ldGFkYXRhIiwicnBjTGlzdFByb3ZpZGVycyIsInJwY1NlbmQiLCJzZW5kIiwicnBjU3RhcnRQcm92aWRlciIsInNldCIsImRlbGV0ZSIsInJwY1N1YnNjcmliZSIsInJwY1N1YnNjcmliZUNvbm5lY3RlZCIsIl9yZXF1ZXN0IiwiaXNDb25uZWN0ZWQiLCJycGNVbnN1YnNjcmliZSIsInN1YnNjcmlwdGlvbklkIiwiZ2VuZXJhdGVEZWZhdWx0QmFsYW5jZU1hcCIsImFjdGl2ZUNoYWlucyIsImNoYWluQXNzZXRNYXAiLCJ3YWl0Q3J5cHRvUmVhZHkiLCJydW4iLCJvblJlYWR5Iiwib25BY2NvdW50QWRkIiwib25BY2NvdW50UmVtb3ZlIiwic3RhcnRTdWJzY3JpcHRpb24iLCJtYW50YVBheUNvbmZpZyIsImdldE1hbnRhUGF5Rmlyc3RDb25maWciLCJlbmFibGVkIiwiX3N0YXJ0IiwibGF6eU5leHQiLCJsYXp5IiwidXBkYXRlIiwic3Vic2NyaWJlRXZtQ2hhaW5DaGFuZ2UiLCJnZXRBZGRyZXNzTGlzdCIsImF1dGhvcml6ZVVybFYyIiwiZ2V0RGVjb2RlZEFkZHJlc3NlcyIsInN0YWtpbmdzIiwiZ2V0U3Rha2luZ3MiLCJhY3RpdmVDaGFpblNsdWdzIiwiZGV0YWlscyIsImdldFN0YWtpbmdPd25lcnNCeUNoYWlucyIsImdldFN0YWtpbmdzQnlDaGFpbnMiLCJnZXRQb29sZWRTdGFraW5nUmVjb3Jkc0J5QWRkcmVzcyIsImdldFBvb2xlZFN0YWtpbmdzIiwiZW5zdXJlVXJsQXV0aG9yaXplZFYyIiwic2V0U3Rha2luZ0l0ZW0iLCJ1cGRhdGVTdGFraW5nIiwidXBkYXRlQ2hhaW5TdGFraW5nTWV0YWRhdGEiLCJjaGFuZ2VzIiwidXBkYXRlU3Rha2luZ05vbWluYXRvck1ldGFkYXRhIiwidXBkYXRlTm9taW5hdG9yTWV0YWRhdGEiLCJzZXROZnRDb2xsZWN0aW9uIiwiYWRkTmZ0Q29sbGVjdGlvbiIsImdldEFsbE5mdENvbGxlY3Rpb24iLCJzdG9yZXMiLCJuZnRMaXN0IiwidXBkYXRlTmZ0RGF0YSIsIm5mdERhdGEiLCJhZGROZnQiLCJjbGVhblVwTmZ0cyIsIm93bk5vdGhpbmciLCJjbGVhblVwTmZ0IiwicmVzZXRTdGFraW5nUmV3YXJkIiwidXBkYXRlU3Rha2luZ1Jld2FyZCIsInN0YWtpbmdSZXdhcmREYXRhIiwiZ2V0QWNjb3VudFJlZk1hcCIsInJlZk1hcCIsInJlZkxpc3QiLCJhY2NSZWYiLCJuZXdMaXN0Iiwic3BsaWNlIiwicHJldmVudE9uZUFjY291bnQiLCJwYWlyR2VuZXNpc0hhc2giLCJzd2l0Y2hFdm1OZXR3b3JrQnlVcmwiLCJzaG9ydGVuVXJsIiwiY2hhaW5TdGF0ZSIsImN1cnJlbnRFdm1OZXR3b3JrS2V5Iiwic3dpdGNoTmV0d29ya0FjY291bnQiLCJjaGFuZ2VBZGRyZXNzIiwiYWRkQ29uZmlybWF0aW9uIiwiaXNBcHByb3ZlZCIsInVzZUFkZHJlc3MiLCJhZGROZXR3b3JrQ29uZmlybSIsIm5ldHdvcmtEYXRhIiwibW9kZSIsImFkZFRva2VuQ29uZmlybSIsInByaWNlSWQiLCJtdWx0aUNoYWluQXNzZXQiLCJoYXNWYWx1ZSIsImljb24iLCJzZXR0aW5ncyIsIm5ld1NldHRpbmdzIiwiZ2V0QWNjb3VudEFkZHJlc3MiLCJjaGVja2luZ0FkZHJlc3MiLCJnZXRBbGxBZGRyZXNzZXMiLCJyZW1vdmVJbmFjdGl2ZUNoYWluQmFsYW5jZXMiLCJhY3RpdmVCYWxhbmNlTWFwIiwiYWN0aXZlRGF0YSIsImdldFN0b3JlZEJhbGFuY2UiLCJnZXRCYWxhbmNlTWFwQnlBZGRyZXNzIiwiaGFuZGxlU3dpdGNoQWNjb3VudCIsInJlc2V0QmFsYW5jZU1hcCIsInJlc2V0Q3Jvd2Rsb2FuTWFwIiwiZGVmYXVsdERhdGEiLCJzdG9yZWREYXRhIiwicHVibGlzaEJhbGFuY2UiLCJnZXRTdG9yZWRDcm93ZGxvYW4iLCJwdWJsaXNoQ3Jvd2Rsb2FuIiwicmVzZXRTdGFraW5nIiwic2V0QmFsYW5jZUl0ZW0iLCJ1cGRhdGVCYWxhbmNlU3RvcmUiLCJnZXREYXRhQnlBZGRyZXNzQXNPYmplY3QiLCJzZXRDcm93ZGxvYW5JdGVtIiwiaXRlbURhdGEiLCJ1cGRhdGVDcm93ZGxvYW5TdG9yZSIsImdldEFzc2V0UmVmTWFwIiwiYXNzZXRUeXBlcyIsImdldEFzc2V0QnlDaGFpbkFuZFR5cGUiLCJkZXN0aW5hdGlvbkNoYWluIiwib3JpZ2luVG9rZW5TbHVnIiwidGFyZ2V0VG9rZW5zIiwidmFsaWRhdGVDdXN0b21Ub2tlbiIsIm5ld05hdGl2ZVRva2VuU2x1ZyIsImZvcmNlUmVtb3ZlQ2hhaW4iLCJnZXREZWZhdWx0TmV0d29ya0tleXMiLCJnZW5lc2lzSGFzaGVzIiwiaGFzaGVzIiwiY29uZGl0aW9uIiwidXBkYXRlQXNzZXRTZXR0aW5nQnlDaGFpbiIsInJlc2V0Q2hhaW5JbmZvTWFwIiwicmVmcmVzaFdlYjNBcGkiLCJyZWZyZXNoRXZtQXBpIiwiYXNzZXRSZWdpc3RyeSIsImNoYWluU3RhdGVNYXAiLCJnZXRFeHRlcm5hbFJlcXVlc3RNYXAiLCJzZXRFeHRlcm5hbFJlcXVlc3RNYXAiLCJfa2V5IiwiX3ZhbHVlIiwiY2xlYW5FeHRlcm5hbFJlcXVlc3QiLCJhcnIiLCJoYW5kbGVyUHVzaFRvRGVsZXRlIiwiY3JlYXRlZEF0IiwicGF1c2VBbGxOZXR3b3JrcyIsInJlYXNvbiIsInN0b3BBbGxDaGFpbkFwaXMiLCJyZXN1bWVBbGxOZXR3b3JrcyIsInJlc3VtZUFsbENoYWluQXBpcyIsImZpbmRDaGFpbklkR2VuZXNpc0hhc2giLCJmaW5kTmV0d29ya0tleUJ5Q2hhaW5JZCIsImV2bUluZm8iLCJldm1DaGFpbklkIiwiZmluZFNpbmdsZU1vZGUiLCJuZXR3b3JrS2V5cyIsImRlY29kZWQiLCJwcml2YXRlS2V5IiwiaXNWYWxpZCIsImtleVBhaXIiLCJnZXRFdGhLZXlyaW5nIiwiZXRoS2V5cmluZyIsImV2bVNpZ24iLCJhbGxvd2VkQWNjb3VudHMiLCJwMSIsInAyIiwiaGFzaFBheWxvYWQiLCJjYW5TaWduIiwic2lnblBheWxvYWQiLCJyZXF1aXJlZFBhc3N3b3JkIiwiZXZtU2VuZFRyYW5zYWN0aW9uIiwidHJhbnNhY3Rpb25QYXJhbXMiLCJldm1OZXR3b3JrIiwiYXV0b0Zvcm1hdE51bWJlciIsInZhbCIsIm1heFByaW9yaXR5RmVlUGVyR2FzIiwibWF4RmVlUGVyR2FzIiwiZnJvbUFkZHJlc3MiLCJnZXRUcmFuc2FjdGlvbkNvdW50IiwiZ2VuZXJhdGVIYXNoUGF5bG9hZCIsImlzVG9Db250cmFjdCIsInBhcnNlRGF0YSIsInJlcXVlc3RQYXlsb2FkIiwiZVR5cGUiLCJFVk1fRVhFQ1VURSIsInRyYW5zYWN0aW9uRGF0YSIsInRyYW5zYWN0aW9uRW1pdHRlciIsImFkZFRyYW5zYWN0aW9uIiwiZXh0cmluc2ljSGFzaCIsImV2bVByb3ZpZGVyRXJyb3IiLCJjb25maXJtYXRpb25zUXVldWVTdWJqZWN0Iiwib25JbnN0YWxsIiwiZ2V0QWN0aXZlQ2hhaW5JbmZvcyIsInNsZWVwIiwiU1RBUlRJTkciLCJTVE9QUEVEIiwiU1RPUFBJTkciLCJzbGVlcGluZyIsImlzV2FrZXVwIiwiU1RBUlRFRCIsInN0YXJ0aW5nIiwid2FrZXVwIiwiYXV0b0VuYWJsZUNoYWlucyIsImFzc2V0TWFwIiwicHJvbWlzZUxpc3QiLCJnZXRNdWx0aUNoYWluQmFsYW5jZSIsIm5lZWRFbmFibGVDaGFpbnMiLCJuZWVkQWN0aXZlVG9rZW5zIiwiY3VycmVudEFzc2V0U2V0dGluZ3MiLCJjaGFpbk1hcCIsImJhbGFuY2VEYXRhTGlzdCIsImJhbGFuY2VEYXRhIiwiYmFsYW5jZUlzRW1wdHkiLCJpc1Rlc3RuZXQiLCJ0b2tlbktleSIsInRvVXBwZXJDYXNlIiwic2V0QXNzZXRTZXR0aW5ncyIsInJlbW92ZUFsbEJ5QWRkcmVzcyIsImRlbGV0ZU5mdEJ5QWRkcmVzcyIsInJlbW92ZU5mdHNCeUFkZHJlc3MiLCJfdXJsIiwiZ2V0UGFzc1BoaXNoaW5nTGlzdCIsInBhc3MiLCJzZXRQYXNzUGhpc2hpbmciLCJ1cGRhdGVTdG9yZSIsInNlZWRQaHJhc2UiLCJzZXRDdXJyZW50QWRkcmVzcyIsInByaXZhdGVXYWxsZXQiLCJpbml0aWFsU2lnbmVyIiwibG9hZFVzZXJTZWVkUGhyYXNlIiwiYXV0aENvbnRleHQiLCJnZXRBdXRob3JpemF0aW9uQ29udGV4dCIsImxvYWRBdXRob3JpemF0aW9uQ29udGV4dCIsImVuY3J5cHRlZERhdGEiLCJlbmNyeXB0Iiwic2F2ZU1hbnRhQXV0aENvbnRleHQiLCJnZXRNYW50YUF1dGhDb250ZXh0IiwiZGVjcnlwdGVkRGF0YSIsImRlY3J5cHQiLCJwcm9vZkF1dGhLZXkiLCJVaW50OEFycmF5IiwicHJvb2ZfYXV0aG9yaXphdGlvbl9rZXkiLCJ6a0FkZHJlc3MiLCJnZXRaa0FkZHJlc3MiLCJzYXZlTWFudGFQYXlDb25maWciLCJpc0luaXRpYWxTeW5jIiwiY29uZmlnIiwiZHJvcEF1dGhvcml6YXRpb25Db250ZXh0IiwiZHJvcFVzZXJTZWVkUGhyYXNlIiwiZGVsZXRlTWFudGFQYXlDb25maWciLCJkZWxldGVNYW50YUF1dGhDb250ZXh0IiwiYmFzZVdhbGxldCIsImlzQXBpUmVhZHkiLCJzeW5jUmVzdWx0IiwiaW5pdGlhbFdhbGxldFN5bmMiLCJ1cGRhdGVNYW50YVBheUNvbmZpZyIsImdldE1hbnRhWmtCYWxhbmNlIiwiaW5pdGlhbFN5bmNJc0ZpbmlzaGVkIiwiZ2V0TWFudGFaa0Fzc2V0cyIsImdldE11bHRpWmtCYWxhbmNlIiwiemtCYWxhbmNlcyIsImFzc2V0TGlzdCIsInN1YnNjcmliZU1hbnRhUGF5QmFsYW5jZSIsIndhbGxldFN5bmMiLCJibkFzc2V0SWQiLCJnZXRaa0JhbGFuY2UiLCJzdWJzY3JpYmVTeW5jU3RhdGUiLCJoYXNoIiwiZ2V0TWV0YWRhdGFCeUhhc2giLCJoZXhWYWx1ZSIsIkNST05fR0VUX0FQSV9NQVBfU1RBVFVTIiwiUEhJU0hJTkdfUEFHRV9SRURJUkVDVCIsIl9DSEFJTl9WQUxJREFUSU9OX0VSUk9SIiwiX2dlbmVyYXRlQ3VzdG9tUHJvdmlkZXJLZXkiLCJERUZBVUxUX0NIQUlOX1BBVFJPTF9FTkFCTEUiLCJjYW5EZXJpdmUiLCJXZWIzIiwiY2hlY2tJZkRlbmllZCIsImlzTnVtYmVyIiwidHJhbnNmb3JtQWNjb3VudHNWMiIsImFueVR5cGUiLCJhdXRoSW5mbyIsImFjY291bnRTZWxlY3RlZCIsImF1dGhUeXBlRmlsdGVyIiwic29ydCIsIndoZW5DcmVhdGVkIiwiY2hhaW5QYXRyb2xDaGVja1VybCIsIktvbmlUYWJzIiwiYWNjb3VudFN1YnMiLCJldm1FdmVudEVtaXR0ZXJNYXAiLCJjaGFpblBhdHJvbFNlcnZpY2UiLCJwYXNzUGhpc2hpbmciLCJ1cGRhdGVDaGFpblBhdHJvbFNlcnZpY2UiLCJlbmFibGVDaGFpblBhdHJvbCIsInVwZGF0ZVBhc3NQaGlzaGluZyIsInBhc3NQaGlzaGluZ1N1YmplY3QiLCJnZXRTaWduaW5nUGFpciIsImJ5dGVzU2lnbiIsImdldEF1dGhJbmZvIiwiZXh0cmluc2ljU2lnbiIsIm1ldGFkYXRhUHJvdmlkZSIsImlubmVyQ2IiLCJfZXJyb3IiLCJyZWRpcmVjdFBoaXNoaW5nTGFuZGluZyIsInBoaXNoaW5nV2Vic2l0ZSIsIm5vbkZyYWdtZW50IiwiZW5jb2RlZFdlYnNpdGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjaGVja1Bhc3NMaXN0IiwiY2hlY2tQaGlzaGluZyIsImlzSW5EZW55TGlzdCIsImlzSW5DaGFpblBhdHJvbERlbnlMaXN0IiwicmVkaXJlY3RJZlBoaXNoaW5nIiwiZnJvbUxpc3QiLCJhY2NvdW50c0xpc3RWMiIsImFjY291bnRzU3Vic2NyaWJlVjIiLCJhdXRoSW5mb1N1YmplY3QiLCJpbmZvcyIsImFjY291bnRzVW5zdWJzY3JpYmUiLCJhdXRob3JpemVWMiIsImdldEV2bUN1cnJlbnRBY2NvdW50IiwiZ2V0QWxsIiwiYWxsQWNjb3VudHMiLCJhY2NvdW50TGlzdCIsImdldEV2bVN0YXRlIiwiY3VycmVudENoYWluIiwiYXV0b0FjdGl2ZUNoYWluIiwiY3VycmVudEV2bU5ldHdvcmsiLCJnZXREQXBwQ2hhaW5JbmZvIiwiYXV0b0FjdGl2ZSIsImFjY2Vzc1R5cGUiLCJkZWZhdWx0Q2hhaW4iLCJjdXJyZW50UHJvdmlkZXIiLCJXZWJzb2NrZXRQcm92aWRlciIsImNvbm5lY3RlZCIsImNoZWNraW5nTnVtIiwicG9sbCIsImdldEV2bVBlcm1pc3Npb24iLCJpbnZva2VyIiwicGFyZW50Q2FwYWJpbGl0eSIsImNhdmVhdHMiLCJkYXRlIiwic3dpdGNoRXZtQ2hhaW4iLCJldm1TdGF0ZSIsImFkZEV2bVRva2VuIiwiX3Rva2VuVHlwZSIsImNvbnRyYWN0RXJyb3IiLCJ2YWxpZGF0ZWQiLCJ2YWxpZGF0ZSIsImV4aXN0ZWRTbHVnIiwiZmluYWxseSIsInVwZGF0ZUNvbmZpcm1hdGlvbiIsImFkZEV2bUNoYWluIiwiYmxvY2tFeHBsb3JlclVybHMiLCJjaGFpbk5hbWUiLCJuYXRpdmVDdXJyZW5jeSIsInJwY1VybHMiLCJjaGFpbklkTnVtIiwiZXhpc3RlZE5ldHdvcmtTbHVnIiwiZXhpc3RlZENoYWluSW5mbyIsImZpbHRlcmVkVXJscyIsInRhcmdldFN0cmluZyIsIlVSTCIsIl8iLCJleGlzdGVudGlhbERlcG9zaXQiLCJhZGRyZXNzUHJlZml4IiwibmV3UHJvdmlkZXJLZXkiLCJjaGFpblNwZWMiLCJjaGFpbkVkaXRJbmZvIiwiYmxvY2tFeHBsb3JlciIsInVuY29uZmlybWVkIiwicHJvdmlkZXJFcnJvciIsIk5PTkUiLCJnZXRFdm1DdXJyZW50Q2hhaW5JZCIsImV2bVN1YnNjcmliZUV2ZW50cyIsImVtaXRFdmVudCIsImV2ZW50TmFtZSIsImN1cnJlbnRBY2NvdW50TGlzdCIsIm9uQ3VycmVudEFjY291bnRDaGFuZ2VkIiwibmV3QWNjb3VudExpc3QiLCJhY2NvdW50TGlzdFN1YnNjcmlwdGlvbiIsImN1cnJlbnRDaGFpbklkIiwiX29uQXV0aENoYW5nZWQiLCJhdXRoVXJsU3Vic2NyaXB0aW9uIiwibmV0d29ya0NoZWNrIiwibmV0IiwiaXNMaXN0ZW5pbmciLCJjb25uZWN0aW5nIiwibmV0d29ya0NoZWNrSW50ZXJ2YWwiLCJnZXRFdm1Qcm92aWRlciIsImV2ZW50TWFwIiwicmVtb3ZlTGlzdGVuZXIiLCJjaGVja0FuZEhhbmRsZVByb3ZpZGVyU3RhdHVzIiwic3VwcG9ydHNTdWJzY3JpcHRpb25zIiwiZW1pdHRlciIsInBlcmZvcm1XZWIzTWV0aG9kIiwianNvbnJwYyIsImNhblVzZUFjY291bnQiLCJzaWduUmVzdWx0IiwidHJhbnNhY3Rpb25IYXNoIiwiaGFuZGxlRXZtUmVxdWVzdCIsIm9yaWdpbiIsInJlQ29uZmlybSIsImhhbmRsZUV2bVNlbmQiLCJpc0V2bVB1YmxpY1JlcXVlc3QiLCJhZGRQc3BUb2tlbiIsIlBPUlRfRVhURU5TSU9OIiwiUE9SVF9NT0JJTEUiLCJtb2JpbGUiLCJuZnRIYW5kbGVyIiwiZXh0ZW5zaW9uUG9ydE5hbWUiLCJpc01vYmlsZSIsImlzRXh0ZW5zaW9uIiwidGFiIiwiZXJyb3JDb2RlIiwiZXJyb3JEYXRhIiwiQ09NTU9OX1JFTE9BRF9FVkVOVFMiLCJzdWJzY3JpcHRpb25NYXAiLCJzdGFraW5nT25DaGFpbiIsImVzc2VudGlhbENoYWluU3Rha2luZ01ldGFkYXRhIiwiZ2V0U3Vic2NyaXB0aW9uTWFwIiwiZ2V0U3Vic2NyaXB0aW9uIiwidXBkYXRlU3Vic2NyaXB0aW9uIiwiZnVuYyIsIm9sZEZ1bmMiLCJzdG9wQWxsU3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlQmFsYW5jZXNBbmRDcm93ZGxvYW5zIiwic3Vic2NyaWJlU3Rha2luZ09uQ2hhaW4iLCJuZWVkUmVsb2FkIiwib25seVJ1bk9uRmlyc3RUaW1lIiwiaW5pdEJhbGFuY2VTdWJzY3JpcHRpb24iLCJpbml0Q3Jvd2Rsb2FuU3Vic2NyaXB0aW9uIiwiaW5pdFN0YWtpbmdPbkNoYWluU3Vic2NyaXB0aW9uIiwiaW5pdEVzc2VudGlhbENoYWluU3Rha2luZ01ldGFkYXRhU3Vic2NyaXB0aW9uIiwiZmlsdGVyZWRDaGFpbkluZm9NYXAiLCJzdWJzY3JpcHRpb25Qcm9taXNlIiwiaW5pdE5mdFN1YnNjcmlwdGlvbiIsInRhcmdldE5ldHdvcmtNYXAiLCJwb29sZWRTdGFraW5nSXRlbXMiLCJwb29sZWRBZGRyZXNzZXMiLCJwb29sZWRJdGVtIiwidGFyZ2V0Q2hhaW5NYXAiLCJ0U2x1ZyIsImhhc0Vycm9yIiwiY2hhaW5MaXN0IiwidXNlQ2hhaW5JbmZvcyIsIkFzc2V0TG9nb01hcCIsImFpZ2VudCIsIkFzc2V0UmVmTWFwIiwic3JjQXNzZXQiLCJkZXN0QXNzZXQiLCJzcmNDaGFpbiIsIkNoYWluQXNzZXRNYXAiLCJjaGFpblN0YXR1cyIsInJlbGF5U2x1ZyIsImNyb3dkbG9hblVybCIsImhhc05hdGl2ZU5mdCIsInN1cHBvcnRTdGFraW5nIiwic3VwcG9ydFNtYXJ0Q29udHJhY3QiLCJjcm93ZGxvYW5QYXJhSWQiLCJjcm93ZGxvYW5GdW5kcyIsImV4dHJhSW5mbyIsInN1YnNjYW5TbHVnIiwiYml0Y29pbkluZm8iLCJ0b25JbmZvIiwiQ2hhaW5Mb2dvTWFwIiwiTXVsdGlDaGFpbkFzc2V0TWFwIiwib3JpZ2luQ2hhaW5Bc3NldCIsIkJlaGF2aW9yU3ViamVjdCIsIk1BWF9SRUNPVkVSX1JFVFJZIiwiRklSU1RfUkVDT05ORUNUX1RJTUUiLCJTSE9SVF9SRVRSWV9USU1FIiwiQWJzdHJhY3RDaGFpbkhhbmRsZXIiLCJhcGlTdGF0ZU1hcFN1YmplY3QiLCJpc1NsZWVwaW5nIiwicGFyZW50IiwicmVjb3Zlck1hcCIsImhhbmRsZUNvbm5lY3Rpb24iLCJuZXdTdGF0dXMiLCJmb3JjZVJlY292ZXIiLCJjdXJyZW50TWFwIiwib2xkU3RhdHVzIiwiY2FuY2VsUmVjb3ZlciIsImlzUmVjb3ZlcmluZyIsImhhbmRsZVJlY292ZXIiLCJyZXRyeVJlY29yZCIsInJldHJ5VGltZXMiLCJVTlNUQUJMRSIsInJldHJ5VGltZW91dCIsImdldEFwaUJ5Q2hhaW4iLCJjYW5jZWxBbGxSZWNvdmVyIiwiRVZNX1BBU1NfQ09OTkVDVF9TVEFUVVMiLCJhY2FsYUV2bU5ldHdvcmtzIiwiRXZtQXBpIiwiYXBpUmV0cnkiLCJpc0FwaUNvbm5lY3RlZFN1YmplY3QiLCJjb25uZWN0aW9uU3RhdHVzU3ViamVjdCIsImlzQXBpUmVhZHlPbmNlIiwidXBkYXRlQ29ubmVjdGlvblN0YXR1cyIsImlzUmVhZHlIYW5kbGVyIiwidXBkYXRlQXBpVXJsIiwiYXBpVXJsIiwic2V0UHJvdmlkZXIiLCJjcmVhdGVQcm92aWRlciIsIndzUHJvdmlkZXIiLCJyZWNvbm5lY3QiLCJIdHRwUHJvdmlkZXIiLCJwcm92aWRlck5hbWUiLCJpbnRlcnZhbENoZWNrQXBpIiwiY3JlYXRlSW50ZXJ2YWxDaGVja0FwaSIsImNsZWFySW50ZXJ2YWxDaGVja0FwaSIsIm9uQ29ubmVjdCIsIkNPTk5FQ1RJTkciLCJkZXN0cm95IiwiRXZtQ2hhaW5IYW5kbGVyIiwiZ2V0RXZtQXBpQnlDaGFpbiIsInNldEV2bUFwaSIsImluaXRBcGkiLCJvblVwZGF0ZVN0YXR1cyIsImV4aXN0ZWQiLCJhcGlPYmplY3QiLCJiaW5kIiwiZGVzdHJveUV2bUFwaSIsIndha2VVcCIsImdldEFjdGl2ZUNoYWlucyIsImdldENoYWluU3BlYyIsImdldENoYWluSWQiLCJjaGFpbkluZm9MaXN0IiwiX2NoYWluSW5mbyIsIl9jaGFpbklkIiwiZ2V0U21hcnRDb250cmFjdFRva2VuSW5mbyIsInRva2VuQ29udHJhY3QiLCJfbmFtZSIsIl9zeW1ib2wiLCJfZGVjaW1hbHMiLCJhY2FsYU9wdGlvbnMiLCJvYWtScGMiLCJvYWtUeXBlcyIsIkFQSV9BVVRPX0NPTk5FQ1RfTVMiLCJBUElfQ09OTkVDVF9USU1FT1VUIiwiZ2V0U3Vic3RyYXRlQ29ubmVjdFByb3ZpZGVyIiwiREVGQVVMVF9BVVgiLCJzcGVjIiwiYXZhaWxTcGVjIiwiQXBpUHJvbWlzZSIsIldzUHJvdmlkZXIiLCJ0eXBlc0J1bmRsZSIsImZvcm1hdEJhbGFuY2UiLCJhZGRyZXNzRGVmYXVsdHMiLCJTdWJzdHJhdGVBcGkiLCJ1c2VMaWdodENsaWVudCIsInN1YnN0cmF0ZVJldHJ5Iiwic3BlY05hbWUiLCJzeXN0ZW1DaGFpbiIsInN5c3RlbU5hbWUiLCJzeXN0ZW1WZXJzaW9uIiwiY3JlYXRlQXBpIiwiZXh0ZXJuYWxBcGlQcm9taXNlIiwiYXBpT3B0aW9uIiwidHVyaW5nIiwib25FcnJvciIsImhhbmRsZUFwaVJlYWR5Iiwib2ZmIiwiZmlsbEFwaUluZm8iLCJhcGlFcnJvciIsIkRFRkFVTFRfREVDSU1BTFMiLCJERUZBVUxUX1NTNTgiLCJydW50aW1lVmVyc2lvbiIsImNoYWluU1M1OCIsInRva2VuRGVjaW1hbHMiLCJjaGFpbkRlY2ltYWxzIiwidG9rZW5TeW1ib2wiLCJjaGFpblRva2VucyIsInVud3JhcE9yIiwiZ2V0RGVmYXVsdHMiLCJzZXRDaGFpblByb3BlcnRpZXMiLCJkZWZhdWx0Rm9ybWF0QmFsYW5jZSIsImRlZmF1bHRTZWN0aW9uIiwiZGVmYXVsdE1ldGhvZCIsImFwaURlZmF1bHRUeCIsImFwaURlZmF1bHRUeFN1ZG8iLCJzZXRDb2RlIiwiU3Vic3RyYXRlQ2hhaW5IYW5kbGVyIiwiZ2V0U3Vic3RyYXRlQXBpQnlDaGFpbiIsInBhcmFjaGFpbkluZm8iLCJwYXJhY2hhaW5JZCIsInNzNThQcmVmaXgiLCJjb250cmFjdENhbGxlciIsIm5hbWVSZXNwIiwic3ltYm9sUmVzcCIsImRlY2ltYWxzUmVzcCIsInN5bWJvbE9iaiIsImRlY2ltYWxzT2JqIiwibmFtZU9iaiIsImNvbGxlY3Rpb25JZFJlc3AiLCJjb2xsZWN0aW9uSWREaWN0IiwiQnl0ZXMiLCJkZXN0cm95U3Vic3RyYXRlQXBpIiwic3Vic3RyYXRlQVBJIiwidXBzZXJ0TWV0YWRhdGEiLCJydW50aW1lTWV0YWRhdGEiLCJTYyIsIldlbGxLbm93bkNoYWluIiwiU2NQcm92aWRlciIsInJlbGF5Q2hhaW5TcGVjcyIsImtzbWNjMyIsInJvY29jbyIsInJvY29jb192Ml8yIiwid2VzdGVuZDIiLCJzb3VyY2VGb2xkZXJVcmwiLCJwYXJhQ2hhaW5TcGVjcyIsIlByb3ZpZGVyUGxhY2Vob2xkZXIiLCJwcm92aWRlclByb21pc2UiLCJoYXNTdWJzY3JpcHRpb25zIiwiaXNDbG9uYWJsZSIsImNsb25lIiwiY2FuY2VsIiwiaXNDYWNoZWFibGUiLCJzcGVjTGluayIsInJlbGF5TmFtZSIsInBhcmFOYW1lIiwicmVsYXlTcGVjIiwicmVsYXlQcm92aWRlciIsInBhcmFDaGFpbkRhdGEiLCJzY1Byb3ZpZGVyIiwic2NQcm9taXNlIiwidGV4dCIsIkJhc2VXYWxsZXQiLCJNYW50YVBheVdhbGxldCIsIk1hbnRhUHJpdmF0ZUhhbmRsZXIiLCJfcHJpdmF0ZVdhbGxldCIsInN5bmNTdGF0ZVN1YmplY3QiLCJzeW5jU3RhdGUiLCJ1cGRhdGVNYW50YVBheURhdGEiLCJzZXRNYW50YVBheURhdGEiLCJnZXRNYW50YVBheURhdGEiLCJjb250ZXh0Iiwic2F2ZUxlZGdlclN0YXRlIiwicGFsbGV0TmFtZSIsInN1ZmZpeCIsImdldExlZGdlclN0YXRlIiwicHJvdmlkZXJVcmwiLCJuZXR3b3JrUGFyYW0iLCJjaGFyQXQiLCJhcGlFbmRwb2ludCIsImxvZ2dpbmdFbmFibGVkIiwicHJvdmluZ0ZpbGVQYXRoIiwicGFyYW1ldGVyc0ZpbGVQYXRoIiwic2F2ZVN0b3JhZ2VTdGF0ZVRvTG9jYWwiLCJnZXRTdG9yYWdlU3RhdGVGcm9tTG9jYWwiLCJnZXRDdXJyZW50TGVkZ2VyU3RhdGUiLCJsZWRnZXJTdGF0ZSIsImdldExlZGdlckN1cnJlbnRDb3VudCIsImNoZWNrcG9pbnQiLCJsZWRnZXJUb3RhbENvdW50IiwiZ2V0TGVkZ2VyVG90YWxDb3VudCIsImN1cnJlbnRDb3VudCIsIl9URVNUX0VSQzcyMV9BQkkiLCJfQXNzZXRSZWZQYXRoIiwiX0NoYWluU3RhdHVzIiwiX1N1YnN0cmF0ZUNoYWluVHlwZSIsIl9BU1NFVF9MT0dPX01BUF9TUkMiLCJfQVNTRVRfUkVGX1NSQyIsIl9DSEFJTl9BU1NFVF9TUkMiLCJfQ0hBSU5fSU5GT19TUkMiLCJfQ0hBSU5fTE9HT19NQVBfU1JDIiwiX0RFRkFVTFRfQUNUSVZFX0NIQUlOUyIsIl9NVUxUSV9DSEFJTl9BU1NFVF9TUkMiLCJfQ1VTVE9NX1BSRUZJWCIsIl9ORlRfQ09OVFJBQ1RfU1RBTkRBUkRTIiwiX1NNQVJUX0NPTlRSQUNUX1NUQU5EQVJEUyIsIl9pc0N1c3RvbUNoYWluIiwiX2lzRXF1YWxDb250cmFjdEFkZHJlc3MiLCJfaXNFcXVhbFNtYXJ0Q29udHJhY3RBc3NldCIsIl9pc1B1cmVTdWJzdHJhdGVDaGFpbiIsIl9wYXJzZUFzc2V0UmVmS2V5IiwiQXNzZXRTZXR0aW5nU3RvcmUiLCJNT0RVTEVfU1VQUE9SVCIsImRhdGFNYXAiLCJhc3NldFJlZk1hcCIsImxvY2tDaGFpbkluZm9NYXAiLCJtYW50YUNoYWluSGFuZGxlciIsImNoYWluSW5mb01hcFN1YmplY3QiLCJjaGFpblN0YXRlTWFwU3ViamVjdCIsImFzc2V0UmVnaXN0cnlTdWJqZWN0IiwibXVsdGlDaGFpbkFzc2V0TWFwU3ViamVjdCIsInhjbVJlZk1hcFN1YmplY3QiLCJzdG9yZSIsImFzc2V0U2V0dGluZ1N1YmplY3QiLCJNQU5UQV9aSyIsInN1YnN0cmF0ZUNoYWluSGFuZGxlciIsImV2bUNoYWluSGFuZGxlciIsImdldENoYWluQ3VycmVudFByb3ZpZGVyQnlLZXkiLCJwcm92aWRlck1hcCIsImdldFNtYXJ0Q29udHJhY3RUb2tlbnMiLCJmaWx0ZXJlZEFzc2V0UmVnaXN0cnkiLCJhc3NldCIsImdldEV2bUNoYWluSW5mb01hcCIsImdldFN1YnN0cmF0ZUNoYWluSW5mb01hcCIsImdldEFsbFByaWNlSWRzIiwiZ2V0QWN0aXZlQ2hhaW5TbHVncyIsImNoYWluQXNzZXQiLCJjaGVja0FjdGl2ZSIsImFzc2V0U2V0dGluZ3MiLCJfZmlsdGVyQWN0aXZlIiwiZGVzdGluYXRpb25DaGFpblNsdWciLCJhc3NldFJlZktleSIsImFzc2V0UmVmIiwiWENNIiwiZGVsZXRlQXNzZXRzQnlDaGFpbiIsInJlbW92ZUZyb21DaGFpblN0b3JlIiwidXBkYXRlQ2hhaW5TdWJzY3JpcHRpb24iLCJleGNsdWRlZENoYWlucyIsInVwZGF0ZUNoYWluU3RhdGVNYXBTdWJzY3JpcHRpb24iLCJzZXRDaGFpbkNvbm5lY3Rpb25TdGF0dXMiLCJkZWZhdWx0U2x1ZyIsImdlbmVyYXRlU2x1Z0Zvck5hdGl2ZVRva2VuIiwiZ2VuZXJhdGVTbHVnRm9yU21hcnRDb250cmFjdEFzc2V0IiwidXBkYXRlQXNzZXRTdG9yZSIsInRhcmdldEFzc2V0cyIsInRhcmdldFRva2VuIiwicmVtb3ZlRnJvbUJhbGFuY2VTdG9yZSIsInJlbW92ZUZyb21Bc3NldFN0b3JlIiwid2FpdERhdGFiYXNlUmVhZHkiLCJsYXRlc3RBc3NldFJlZk1hcCIsImxhdGVzdE11bHRpQ2hhaW5Bc3NldE1hcCIsImZldGNoTGF0ZXN0RGF0YSIsImluaXRDaGFpbnMiLCJpbml0QXBpcyIsImluaXRBc3NldFNldHRpbmdzIiwiaW5pdEFwaUZvckNoYWluIiwiY3VycmVudFN0YXR1cyIsImRlc3Ryb3lBcGlGb3JDaGFpbiIsInVwZGF0ZUNoYWluU3RvcmUiLCJuZWVkVXBkYXRlIiwiaW5pdFByb21pc2VzIiwiY3VycmVudFN0YXRlIiwiY2hlY2tFeGlzdGVkUHJlZGVmaW5lZENoYWluIiwibGF0ZXN0Q2hhaW5JbmZvTWFwIiwiZHVwbGljYXRlZFNsdWciLCJzcmMiLCJkZWZhdWx0VmFsdWUiLCJzdG9yZWRDaGFpblNldHRpbmdzIiwiZ2V0QWxsQ2hhaW5TdG9yZSIsInN0b3JlZENoYWluU2V0dGluZ01hcCIsImNoYWluU3RvcmVkU2V0dGluZyIsIm5ld1N0b3JhZ2VEYXRhIiwiZGVwcmVjYXRlZENoYWlucyIsImRlcHJlY2F0ZWRDaGFpbk1hcCIsIm1lcmdlZENoYWluSW5mb01hcCIsInN0b3JlZFNsdWciLCJzdG9yZWRDaGFpbkluZm8iLCJkdXBsaWNhdGVkRGVmYXVsdFNsdWciLCJidWxrVXBkYXRlQ2hhaW5TdG9yZSIsImluaXRBc3NldFJlZ2lzdHJ5IiwiZGVwcmVjYXRlZEN1c3RvbUNoYWluTWFwIiwic3RvcmVkQXNzZXRSZWdpc3RyeSIsImdldEFsbEFzc2V0U3RvcmUiLCJsYXRlc3RBc3NldFJlZ2lzdHJ5IiwibWVyZ2VkQXNzZXRSZWdpc3RyeSIsInBhcnNlZFN0b3JlZEFzc2V0UmVnaXN0cnkiLCJkZXByZWNhdGVkQXNzZXRzIiwic3RvcmVkQXNzZXQiLCJuZXdPcmlnaW5DaGFpbiIsIm5ld1NsdWciLCJzdG9yZWRBc3NldEluZm8iLCJkdXBsaWNhdGVkIiwiZGVmYXVsdENoYWluQXNzZXQiLCJ1cGRhdGVDaGFpbkluZm9NYXBTdWJzY3JpcHRpb24iLCJ1cGRhdGVDaGFpbiIsInRhcmdldENoYWluSW5mbyIsInRhcmdldENoYWluU3RhdGUiLCJjaGFuZ2VkUHJvdmlkZXIiLCJpbnNlcnRDaGFpbiIsIm5ld0NoYWluU2x1ZyIsImdlbmVyYXRlU2x1Z0ZvckN1c3RvbUNoYWluIiwiUEFSQUNIQUlOIiwiUkVMQVlDSEFJTiIsImFiaUV4cGxvcmVyIiwiQUNUSVZFIiwicGFyc2VkTmFtZSIsImV4aXN0aW5nQ2hhaW5TbHVnIiwiY29uZmxpY3RDaGFpbk5hbWUiLCJwcm92aWRlckNvbmZsaWN0Q2hhaW5OYW1lIiwiY29uZmxpY3RDaGFpblNsdWciLCJwcm92aWRlckNvbmZsaWN0Q2hhaW5TbHVnIiwidmFsaWRhdGVQcm92aWRlciIsImNvbm5lY3Rpb25UaW1lb3V0IiwiY29ubmVjdGlvblRyaWFsIiwiX2FwaSIsImdldENoYWluU3BlY0J5UHJvdmlkZXIiLCJhc3NpZ24iLCJQUk9WSURFUl9OT1RfU0FNRV9DSEFJTiIsIkVYSVNURURfQ0hBSU4iLCJjb25mbGljdENoYWluIiwiY29uZmxpY3RLZXkiLCJDT05ORUNUSU9OX0ZBSUxVUkUiLCJ0YXJnZXRQcm92aWRlciIsImFsbEV4aXN0ZWRQcm92aWRlcnMiLCJFWElTVEVEX1BST1ZJREVSIiwiZXhpc3RlZFRva2VuIiwiaXNFeGlzdCIsImNoZWNrQW5kVXBkYXRlU3RhdHVzTWFwRm9yQ2hhaW4iLCJpc1NldHRpbmdFeGlzdGVkIiwidXBkYXRlQXNzZXRzIiwiemtBc3NldFNldHRpbmdzIiwic3RvcmVkQXNzZXRTZXR0aW5ncyIsIm5ld0Fzc2V0U2V0dGluZ3MiLCJnZXRTdG9yZUFzc2V0U2V0dGluZ3MiLCJuZWVkVXBkYXRlU3ViamVjdCIsIm5hdGl2ZUFzc2V0IiwiYXNzZXRzQnlDaGFpbiIsImFsbENoYWlucyIsImN1c3RvbVRva2VuIiwiZ2V0TWV0YWRhdGFCeUdlbmVzaXNIYXNoIiwiRXZlbnRFbWl0dGVyIiwicGVuZGluZ0V2ZW50cyIsImxhenlFbWl0dGVyIiwibGF6eVRpbWUiLCJ0aW1lb3V0SWQiLCJnZW5lcmF0ZVdhaXRQcm9taXNlIiwib25jZSIsInNldExhenlUaW1lb3V0IiwiZW1pdExhenkiLCJvbmNlTGF6eSIsIk1BWF9GRVRDSF9QQUdFX1BFUl9TRVNTSU9OIiwiTUlOX19OVU1fSElTVE9SWV9QRVJfQUNDT1VOVCIsIkhpc3RvcnlSZWNvdmVyU3RhdHVzIiwiQkxPQ0tfTElNSVQiLCJzdWJzdHJhdGVSZWNvdmVyIiwiYmxvY2tIYXNoIiwic3RhcnRCbG9jayIsIlVOS05PV04iLCJMQUNLX0lORk8iLCJjdXJyZW50QmxvY2siLCJmb3VuZCIsImdldEJsb2NrSGFzaCIsImJsb2NrIiwiZ2V0QmxvY2siLCJleHRyaW5zaWNzIiwiaWR4Iiwic2lnbmVyIiwiYmxvY2tOdW1iZXIiLCJoZWFkZXIiLCJhbGxFdmVudHMiLCJhdCIsImlzQXBwbHlFeHRyaW5zaWMiLCJhc0FwcGx5RXh0cmluc2ljIiwiZXEiLCJFeHRyaW5zaWNTdWNjZXNzIiwiaXMiLCJFeHRyaW5zaWNGYWlsZWQiLCJGQUlMX0RFVEVDVCIsIkFQSV9JTkFDVElWRSIsImV2bVJlY292ZXIiLCJ0cmFuc2FjdGlvblJlY2VpcHQiLCJnZXRUcmFuc2FjdGlvblJlY2VpcHQiLCJnZXRCbG9ja051bWJlciIsInRyYW5zYWN0aW9ucyIsImhpc3RvcnlSZWNvdmVyIiwiY2hlY2tGdW5jdGlvbiIsIkV4dHJpbnNpY1N0YXR1cyIsIkNST05fUkVDT1ZFUl9ISVNUT1JZX0lOVEVSVkFMIiwiQ1JPTl9SRUZSRVNIX0hJU1RPUllfSU5URVJWQUwiLCJmZXRjaE11bHRpQ2hhaW5IaXN0b3JpZXMiLCJuZWVkUmVjb3ZlcnlIaXN0b3JpZXMiLCJmZXRjaFByb21pc2UiLCJyZWNvdmVySW50ZXJ2YWwiLCJmZXRjaEFuZExvYWRIaXN0b3JpZXMiLCJoaXN0b3J5UmVjb3JkcyIsImFjY291bnRNYXAiLCJyZWNvcmQiLCJmcm9tTmFtZSIsInRvTmFtZSIsImFkZEhpc3RvcnlJdGVtcyIsImdldEhpc3RvcmllcyIsInVwZGF0ZUhpc3RvcmllcyIsInVwZGF0ZURhdGEiLCJleGlzdGVkUmVjb3JkcyIsInVwZGF0ZWRSZWNvcmRzIiwidXBkYXRlSGlzdG9yeUJ5RXh0cmluc2ljSGFzaCIsImluc2VydEhpc3RvcmllcyIsImhpc3RvcnlJdGVtcyIsInVwc2VydEhpc3RvcnkiLCJhcHBSZWNvcmRzIiwiZXhjbHVkZUtleXMiLCJ1cGRhdGVSZWNvcmRzIiwicmVtb3ZlSGlzdG9yeUJ5QWRkcmVzcyIsIk5PVF9JTklUSUFMSVpFRCIsImxvYWREYXRhIiwicGVyc2lzdERhdGEiLCJzdGFydENyb24iLCJzdG9wQ3JvbiIsInN0YXJ0UmVjb3Zlckhpc3RvcmllcyIsInJlY292ZXJIaXN0b3JpZXMiLCJzdG9wUmVjb3Zlckhpc3RvcmllcyIsInByb2Nlc3NpbmdIaXN0b3J5IiwicHJvbWlzZXMiLCJyZXN1bHRzIiwicmVjb3ZlclJlc3VsdCIsImN1cnJlbnRFeHRyaW5zaWNIYXNoIiwiRkFJTCIsInN0YXJ0UHJvbWlzZUhhbmRsZXIiLCJyZWNvdmVyUHJvY2Vzc2luZ0hpc3RvcnkiLCJJTklUSUFMSVpFRCIsIlBST0NFU1NJTkciLCJTVUJNSVRUSU5HIiwicmVjb3Zlck51bWJlciIsIndhaXRGb3JTdGFydGVkIiwic3RvcFByb21pc2VIYW5kbGVyIiwid2FpdEZvclN0b3BwZWQiLCJBcG9sbG9DbGllbnQiLCJjcmVhdGVIdHRwTGluayIsImdxbCIsIkluTWVtb3J5Q2FjaGUiLCJUcmFuc2FjdGlvbkRpcmVjdGlvbiIsIk1VTFRJX0NIQUlOX1VSTCIsIk11bHRpQ2hhaW5UeENsaWVudCIsImNhY2hlIiwibGluayIsIlN1YnNxdWlkVHJhbnNhY3Rpb25UeXBlIiwiSElTVE9SWV9TVVBQT1JUX1RZUEVTIiwiQmFsYW5jZVRyYW5zZmVyIiwiRXRoZXJldW1FeGVjdXRlZCIsIlN0YWtpbmdCb25kZWQiLCJhbnlEYXRhIiwiYXV0b0Zvcm1hdEFkZHJlc3MiLCJnZW5lcmF0ZVNpZ25hdHVyZSIsInJIZXgiLCJzSGV4IiwidkhleCIsInBhcnNlQXJncyIsInBhcnNlU3Vic3F1aWRUcmFuc2FjdGlvbkRhdGEiLCJoaXN0b3J5SXRlbSIsIm5hdGl2ZURlY2ltYWxzIiwibmF0aXZlU3ltYm9sIiwicmVsYXRlZEFkZHJlc3NlcyIsInRyYW5zYWN0aW9uVHlwZSIsInBhcnNlZEFyZ3MiLCJDcm93ZGxvYW5Db250cmlidXRlZCIsIkNST1dETE9BTiIsImNhbGxEYXRhIiwidG9UaW1lc3RhbXAiLCJ0aW1lIiwiZGlyZWN0aW9uIiwiU0VORCIsIlJFQ0VJVkVEIiwibWF4UGFnZSIsImNvdW50TWFwIiwiX2xhc3RJZCIsImN1cnJlbnRQYWdlIiwibGFzdElkIiwidmFyaWFibGVzIiwib2xkZXJUaGFuSWQiLCJuZWVkUHJvY2Vzc2VkRGF0YSIsInRyYW5zYWN0aW9uc0J5QWRkcmVzcyIsImxvd2VyQWRkcmVzc2VzIiwibG93ZXJBZGRyZXNzIiwidXNlZEFkZHJlc3NlcyIsImFkciIsInJldHJ5QWRkcmVzc2VzIiwiX2FkZHJlc3NlcyIsInJldHJ5SGlzdG9yaWVzIiwiQ3VycmVudEFjY291bnRTdG9yZSIsInN0cmluZ1Nob3J0ZW4iLCJjdXJyZW50QWNjb3VudFN0b3JlIiwiYmVmb3JlQWNjb3VudCIsInN1YnNjcmliZUFjY291bnRzIiwiYmVmb3JlQWRkcmVzc2VzIiwiYWZ0ZXJBZGRyZXNzZXMiLCJyZW1vdmVkQWRkcmVzc2VzIiwiYWRkZWRBZGRyZXNzZXMiLCJsb2NrQWxsIiwiYWZ0ZXJBY2NvdW50cyIsIkJhc2VNaWdyYXRpb25Kb2IiLCJNaWdyYXRpb25TY3JpcHRzIiwiRVZFUllUSU1FIiwibG9jYWxlQ29tcGFyZSIsIkpvYkNsYXNzIiwiY2hlY2siLCJtaWdyYXRpb24iLCJ0YWJsZSIsIndoZXJlIiwiZmlyc3QiLCJqb2IiLCJwdXQiLCJBdXRvRW5hYmxlQ2hhaW5zVG9rZW5zIiwiRGVsZXRlQ2hhaW4iLCJFbmFibGVDaGFpbiIsIkVuYWJsZVZhcmFDaGFpbiIsIk1pZ3JhdGVTZXR0aW5ncyIsInN0ZWxsYVN3YXAiLCJNaWdyYXRlQXV0b0xvY2siLCJjdXJyZW50U2V0dGluZ3MiLCJNaWdyYXRlQ2hhaW5QYXRyb2wiLCJNaWdyYXRlUHJvdmlkZXIiLCJNaWdyYXRlRXRoUHJvdmlkZXIiLCJuZXdQcm92aWRlciIsIm9sZFByb3ZpZGVyIiwiTWlncmF0ZUltcG9ydGVkVG9rZW4iLCJzdG9yYWdlIiwibG9jYWwiLCJFdm1Ub2tlbiIsImlzQ3VzdG9tIiwiQWNjb3VudHNTdG9yZSIsImlzU3RyaW5nIiwiTWlncmF0ZUxlZGdlckFjY291bnQiLCJuZXdWYWx1ZSIsImFsbE1hcCIsIk1pZ3JhdGVOZXR3b3JrU2V0dGluZ3MiLCJvbGROZXR3b3JrTWFwIiwiTmV0d29ya01hcCIsImVuYWJsZUxpc3QiLCJhc3NldEluZm9NYXAiLCJNaWdyYXRlUGlvbmVlclByb3ZpZGVyIiwidWlTZXR0aW5ncyIsImlzQWNjZXNzQ2FtZXJhIiwiTWlncmF0ZVRva2VuRGVjaW1hbHMiLCJpbmZvIiwiRGV4aWUiLCJNaWdyYXRlVHJhbnNhY3Rpb25IaXN0b3J5IiwiZGIiLCJkZXhpZURCIiwib3BlbiIsInRyYW5zYWN0aW9uVGFibGUiLCJvbGRUcmFuc2FjdGlvbkRhdGEiLCJ0b0FycmF5IiwibmV3VHJhbnNhY3Rpb25JdGVtcyIsImNoYW5nZVN5bWJvbCIsImZlZVN5bWJvbCIsInRyYW5zZmVyQXNzZXQiLCJuZXdJdGVtIiwiaXNTdWNjZXNzIiwidjQiLCJ1dWlkdjQiLCJNaWdyYXRlV2FsbGV0UmVmZXJlbmNlIiwid2FsbGV0UmVmZXJlbmNlIiwiTWlncmF0ZUF1dGhVcmxzIiwibm90aWZ5Iiwibm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9ucyIsIm5vdGlmeVZpYUJyb3dzZXIiLCJjcmVhdGVCcm93c2VyTm90aWZpY2F0aW9uIiwidGl0bGUiLCJpY29uVXJsIiwicHJpb3JpdHkiLCJpc0NsaWNrYWJsZSIsIm5vdGlmaWNhdGlvbklkIiwib25DbGlja2VkIiwibklkIiwid2luZG93IiwidXNlQmFja3VwQXBpIiwiZ2V0VG9rZW5QcmljZSIsInByaWNlSWRzIiwiY3VycmVuY3kiLCJpZFN0ciIsInByaWNlTWFwIiwicHJpY2UyNGhNYXAiLCJjdXJyZW50UHJpY2UiLCJjdXJyZW50X3ByaWNlIiwicHJpY2UyNGgiLCJwcmljZV9jaGFuZ2VfMjRoIiwiQ1JPTl9SRUZSRVNIX1BSSUNFX0lOVEVSVkFMIiwiREVGQVVMVF9QUklDRV9TVUJKRUNUIiwicHJpY2VTdWJqZWN0IiwiU2V0IiwiZ2V0UHJpY2VJZHMiLCJwcmljZUlkTGlzdCIsInJlZnJlc2hQcmljZURhdGEiLCJyZWZyZXNoVGltZW91dCIsInVwZGF0ZVByaWNlU3RvcmUiLCJuZXdQcmljZUlkcyIsInNpemUiLCJldmVyeSIsImhhcyIsImdldFByaWNlU3RvcmUiLCJQUkVERUZJTkVEX0NIQUlOX0RBUFBfQ0hBSU5fTUFQIiwiV0VCX0FQUF9VUkwiLCJBdXRob3JpemVTdG9yZSIsImdldERvbWFpbkZyb21VcmwiLCJnZXRJZCIsIkFVVEhfVVJMU19LRVkiLCJBdXRoUmVxdWVzdEhhbmRsZXIiLCJhdXRob3JpemVTdG9yZSIsImF1dGhSZXF1ZXN0c1YyIiwiYXV0aG9yaXplQ2FjaGVkIiwiYXV0aG9yaXplVXJsU3ViamVjdCIsImV2bUNoYWluU3ViamVjdCIsIm51bUF1dGhSZXF1ZXN0c1YyIiwiYWxsQXV0aFJlcXVlc3RzVjIiLCJ1cGRhdGVJY29uQXV0aFYyIiwic2hvdWxkQ2xvc2UiLCJ1cGRhdGVJY29uVjIiLCJjaGFpbkluZm9NYXBzIiwicHJlZGVmaW5lZFN1cHBvcnRDaGFpbnMiLCJldm1DaGFpbnMiLCJhdXRoQ29tcGxldGVWMiIsImNvbXBsZXRlIiwiaXNDYW5jZWxsZWQiLCJpc0V2bVR5cGUiLCJiYWNrdXBBbGxvd2VkIiwiaXNFdGgiLCJkZWZhdWx0RXZtTmV0d29ya0tleSIsImF1dGhvcml6ZUxpc3QiLCJjb3VudCIsImlzRHVwbGljYXRlIiwiZXhpc3RlZEF1dGgiLCJleGlzdGVkQWNjb3VudEF1dGhUeXBlIiwiY29uZmlybUFub3RoZXJUeXBlIiwiaW5CbGFja0xpc3QiLCJhbGxvd2VkIiwiYWxsb3dlZExpc3RCeVJlcXVlc3RUeXBlIiwiaXNXaGl0ZUxpc3QiLCJwb3B1cE9wZW4iLCJlbnRyeSIsIkNvbm5lY3RXQ1JlcXVlc3RIYW5kbGVyIiwiY29ubmVjdFdDUmVxdWVzdHMiLCJudW1Db25uZWN0V0NSZXF1ZXN0cyIsInVwZGF0ZUljb25Db25uZWN0V0MiLCJjb25uZWN0V0NDb21wbGV0ZSIsImFkZENvbm5lY3RXQ1JlcXVlc3QiLCJhbnlOdW1iZXJUb0JOIiwiaXNJbnRlcm5hbFJlcXVlc3QiLCJ0b0J1ZmZlciIsIkV2bVJlcXVlc3RIYW5kbGVyIiwiYWRkTmV0d29ya1JlcXVlc3QiLCJhZGRUb2tlblJlcXVlc3QiLCJzd2l0Y2hOZXR3b3JrUmVxdWVzdCIsImV2bVNpZ25hdHVyZVJlcXVlc3QiLCJldm1TZW5kVHJhbnNhY3Rpb25SZXF1ZXN0IiwiZXZtV2F0Y2hUcmFuc2FjdGlvblJlcXVlc3QiLCJjb25maXJtYXRpb25zUHJvbWlzZU1hcCIsIm51bUV2bVJlcXVlc3RzIiwiY29uZmlybWF0aW9ucyIsImNvbmZpcm1hdGlvblR5cGUiLCJwYXlsb2FkSnNvbiIsImlzSW50ZXJuYWwiLCJpc0Fsd2F5c1JlcXVpcmVkIiwicmVzb2x2ZXIiLCJjb25maXJtYXRpb24iLCJjb25maWdUb1RyYW5zYWN0aW9uIiwiZm9ybWF0RmllbGQiLCJ0eERhdGEiLCJjdXN0b20iLCJkZWZhdWx0SGFyZGZvcmsiLCJkZWNvcmF0ZVJlc3VsdCIsImN0IiwibnVtQWxsUmVxdWVzdHMiLCJleHRyYWN0TWV0YWRhdGEiLCJNZXRhZGF0YVN0b3JlIiwiYWRkTWV0YWRhdGEiLCJNZXRhZGF0YVJlcXVlc3RIYW5kbGVyIiwibWV0YVN0b3JlIiwibWV0YVJlcXVlc3RzIiwiYWxsTWV0YVJlcXVlc3RzIiwibnVtTWV0YVJlcXVlc3RzIiwidXBkYXRlSWNvbk1ldGEiLCJtZXRhQ29tcGxldGUiLCJOb3RTdXBwb3J0V0NSZXF1ZXN0SGFuZGxlciIsIm5vdFN1cHBvcnRXQ1JlcXVlc3RzIiwibnVtTm90U3VwcG9ydFdDUmVxdWVzdHMiLCJ1cGRhdGVJY29uTm90U3VwcG9ydFdDIiwibm90U3VwcG9ydFdDQ29tcGxldGUiLCJhZGROb3RTdXBwb3J0V0NSZXF1ZXN0IiwiREVGQVVMVF9OT1RJRklDQVRJT05fVFlQRSIsImdldE9TIiwiTk9USUZJQ0FUSU9OX1VSTCIsIk9TIiwiZXh0cmFIZWlnaHQiLCJleHRyYVdpZHRoIiwiUE9QVVBfV0lORE9XX09QVFMiLCJmb2N1c2VkIiwiaGVpZ2h0Iiwid2lkdGgiLCJOT1JNQUxfV0lORE9XX09QVFMiLCJQb3B1cEhhbmRsZXIiLCJ3aW5kb3dzIiwidXBkYXRlTm90aWZpY2F0aW9uIiwiYnJvd3NlckNvbmZpcm1hdGlvblR5cGUiLCJudW1SZXF1ZXN0cyIsImJyb3dzZXJBY3Rpb24iLCJzZXRCYWRnZVRleHQiLCJwb3B1cENsb3NlIiwicG9wdXAiLCJyZW1vdmUiLCJnZXRDdXJyZW50Iiwid2luIiwicG9wdXBPcHRpb25zIiwibGVmdCIsInRvcCIsIlN1YnN0cmF0ZVJlcXVlc3RIYW5kbGVyIiwic3Vic3RyYXRlUmVxdWVzdHMiLCJhbGxTdWJzdHJhdGVSZXF1ZXN0cyIsInVwZGF0ZUljb25TaWduIiwic2lnbkNvbXBsZXRlIiwibnVtU3Vic3RyYXRlUmVxdWVzdHMiLCJfaWQiLCJrbm93bkdlbmVzaXMiLCJrbm93bkVudHJpZXMiLCJkZWZzIiwicmVtb3ZhbHMiLCJkZWYiLCJwb3B1cEhhbmRsZXIiLCJtZXRhZGF0YVJlcXVlc3RIYW5kbGVyIiwiYXV0aFJlcXVlc3RIYW5kbGVyIiwic3Vic3RyYXRlUmVxdWVzdEhhbmRsZXIiLCJldm1SZXF1ZXN0SGFuZGxlciIsImNvbm5lY3RXQ1JlcXVlc3RIYW5kbGVyIiwibm90U3VwcG9ydFdDUmVxdWVzdEhhbmRsZXIiLCJwb3B1cExpc3QiLCJudW1BdXRoUmVxdWVzdHMiLCJzaWduSW50ZXJuYWxUcmFuc2FjdGlvbiIsIkxBTkdVQUdFIiwiUGFzc1BoaXNoaW5nU3RvcmUiLCJTZXR0aW5nc1N0b3JlIiwiaTE4biIsIkRFRkFVTFRfU0VUVElORyIsInNldHRpbmdzU3RvcmUiLCJwYXNzUGhpc2hpbmdTdG9yZSIsIm9sZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJ1cGRhdGVMYW5ndWFnZSIsImNoYW5nZUxhbmd1YWdlIiwibGFuZ3VhZ2VDYWNoZSIsImxvYWRlcnMiLCJCYWNrZW5kIiwicmVhZCIsImxuZyIsIl9uYW1lc3BhY2UiLCJyZXNwb25kZXIiLCJjcmVhdGVMb2FkZXIiLCJpMThuZXh0IiwidXNlIiwiYmFja2VuZCIsImZhbGxiYWNrTG5nIiwiaW50ZXJwb2xhdGlvbiIsImVzY2FwZVZhbHVlIiwia2V5U2VwYXJhdG9yIiwibG9hZCIsIm5zU2VwYXJhdG9yIiwicmV0dXJuRW1wdHlTdHJpbmciLCJyZXR1cm5OdWxsIiwiS29uaURhdGFiYXNlIiwiQXNzZXRTdG9yZSIsIkJhbGFuY2VTdG9yZSIsIkNoYWluU3RvcmUiLCJDcm93ZGxvYW5TdG9yZSIsIk1pZ3JhdGlvblN0b3JlIiwiTmZ0Q29sbGVjdGlvblN0b3JlIiwiTmZ0U3RvcmUiLCJQcmljZVN0b3JlIiwiU3Rha2luZ1N0b3JlIiwiVHJhbnNhY3Rpb25TdG9yZSIsIkNoYWluU3Rha2luZ01ldGFkYXRhU3RvcmUiLCJNYW50YVBheVN0b3JlIiwiTm9taW5hdG9yTWV0YWRhdGFTdG9yZSIsIl9kYiIsIm5mdENvbGxlY3Rpb25zIiwiY3Jvd2Rsb2FucyIsIm1pZ3JhdGlvbnMiLCJwcmljZURhdGEiLCJ1cHNlcnQiLCJyZW1vdmVCeVNsdWdzIiwiZGVsZXRlQnlDaGFpbkFuZEFkZHJlc3MiLCJjaGFpbkhhc2hlcyIsInN1YnNjcmliZUJ5Q2hhaW4iLCJzdWJzY3JpYmVCeUFkZHJlc3NlcyIsInF1ZXJ5SGlzdG9yeSIsImNsZWFuZWRIaXN0b3J5IiwiYnVsa1Vwc2VydCIsImNhblVwZGF0ZSIsInVwZGF0ZVdpdGhRdWVyeSIsInJlbW92ZUNvbGxlY3Rpb24iLCJkZWxldGVOZnRzQnlDb2xsZWN0aW9uIiwiZGVsZXRlTmZ0c0J5Q2hhaW5BbmRPd25lciIsImhhbmRsZU5mdFRyYW5zZmVyIiwiZGVsZXRlTmZ0SXRlbSIsInJlbW92ZU5mdHMiLCJyZW1vdmVDaGFpbnMiLCJyZW1vdmVBc3NldHMiLCJleGlzdGluZ1JlY29yZCIsImdldEJ5Q2hhaW5BbmRUeXBlIiwidXBkYXRlQnlDaGFpbkFuZFR5cGUiLCJjbGVhciIsImRlbGV0ZVJlY29yZCIsImdldENvbmZpZyIsImdldEZpcnN0Q29uZmlnIiwiREVGQVVMVF9EQVRBQkFTRSIsImNvbmRpdGlvbmFsVmVyc2lvbiIsInVwZ3JhZGUiLCJkZXhpZVZlcnNpb24iLCJCYXNlU3RvcmUiLCJhbnlPZklnbm9yZUNhc2UiLCJCYXNlU3RvcmVXaXRoQWRkcmVzcyIsImVxdWFscyIsInN0b3JlZEJhbGFuY2UiLCJ0b2tlblNsdWdzIiwiX3RhYmxlIiwicmVjb3JkcyIsImJ1bGtQdXQiLCJjb25kaXRpb25zIiwiQmFzZVN0b3JlV2l0aEFkZHJlc3NBbmRDaGFpbiIsImNvbnZlcnRUb0pzb25PYmplY3QiLCJlcXVhbHNJZ25vcmVDYXNlIiwiQmFzZVN0b3JlV2l0aENoYWluIiwibGl2ZVF1ZXJ5IiwiZ2V0QnlDaGFpbnMiLCJyZW1vdmVCeUNoYWlucyIsInVwZGF0ZU1ldGFkYXRhQnlHZW5lc2lzSGFzaCIsImFuZCIsInN0b3JlZEl0ZW0iLCJnZXRCeUFkZHJlc3MiLCJzdWJzY3JpYmVBbGwiLCJyZW1vdmVCeUFkZHJlc3MiLCJQcmljZSIsImdldFNpbmdsZVJlY29yZCIsImdldEhpc3RvcnlCeUFkZHJlc3NBc09iamVjdCIsInF1ZXJ5T2JqZWN0IiwibW9kaWZ5IiwiU1VCU0NBTl9DSEFJTl9NQVAiLCJsaW1pdFJhdGUiLCJpbnRlcnZhbENoZWNrIiwibWF4UmV0cnkiLCJyZXF1ZXN0TWFwIiwibmV4dElkIiwiaXNSdW5uaW5nIiwiZ2V0QXBpVXJsIiwic3Vic2NhbkNoYWluIiwicG9zdFJlcXVlc3QiLCJhZGRSZXF1ZXN0IiwibmV3SWQiLCJyZXRyeSIsInByb2Nlc3MiLCJyZW1haW5pbmdSZXF1ZXN0cyIsImpzb25EYXRhIiwiYmlmcm9zdF90ZXN0bmV0IiwiaHlkcmFkeF9tYWluIiwiZWRnZXdhcmUiLCJjZW50cmlmdWdlIiwiaW50ZXJsYXkiLCJub2RsZSIsImRhcndpbmlhIiwicG9sa2FkZXgiLCJkb2xwaGluIiwiZWZpbml0eSIsImNvbXBvc2FibGVGaW5hbmNlIiwicGhhbGEiLCJjcnVzdCIsImhlaWtvIiwiemVpdGdlaXN0Iiwic2FrdXJhIiwic2hhZG93IiwiaW50ZWdyaXRlZSIsImFjYWxhX3Rlc3RuZXQiLCJtYW5nYXRheCIsImVuY29pbnRlciIsInN1YnNwYWNlX2dlbWluaV8yYSIsIm9yaWdpbnRyYWlsIiwiYmFqdW4iLCJzbm93Iiwia2lsdF9wZXJlZ3JpbmUiLCJwb2x5bWVzaCIsImsiLCJUUkFOU0FDVElPTl9USU1FT1VUIiwiX2dldEFzc2V0RGVjaW1hbHMiLCJwYXJzZVhjbUV2ZW50TG9ncyIsImV2ZW50TG9ncyIsInNlbmRpbmdUb2tlbkluZm8iLCJwYXJzZVRyYW5zZmVyRXZlbnRMb2dzIiwidHJhbnNhY3Rpb25Db3VudCIsInZhbGlkYXRpb25Db3VudCIsImdldFRyYW5zYWN0aW9uSWQiLCJpc1dhbGxldENvbm5lY3QiLCJnZXRWYWxpZGF0aW9uSWQiLCJpc1N1YnN0cmF0ZVRyYW5zYWN0aW9uIiwidHlwZU5hbWUiLCJTVEFLSU5HX1BPT0xfV0lUSERSQVciLCJnZXRCYXNlVHJhbnNhY3Rpb25JbmZvIiwiTm90aWZpY2F0aW9uVHlwZSIsImdldEV4cGxvcmVyTGluayIsInBhcnNlVHJhbnNhY3Rpb25EYXRhIiwiaXNXYWxsZXRDb25uZWN0UmVxdWVzdCIsIm1lcmdlVHJhbnNhY3Rpb25BbmRTaWduYXR1cmUiLCJhZGRIZXhQcmVmaXgiLCJldGhlcnMiLCJ0cmFuc2FjdGlvblN1YmplY3QiLCJ3YXRjaFRyYW5zYWN0aW9uU3Vic2NyaWJlcyIsImRhdGFiYXNlU2VydmljZSIsImFsbFRyYW5zYWN0aW9ucyIsInByb2Nlc3NpbmdUcmFuc2FjdGlvbnMiLCJRVUVVRUQiLCJjaGVja0R1cGxpY2F0ZSIsImdlbmVyYWxWYWxpZGF0ZSIsInZhbGlkYXRpb25JbnB1dCIsInZhbGlkYXRpb24iLCJ2YWxpZGF0aW9uUmVzcG9uc2UiLCJ0cmFuc2Zlck5hdGl2ZSIsImZlZU51bSIsImJhbGFuY2VOdW0iLCJlZE51bSIsInRyYW5zZmVyTmF0aXZlTnVtIiwiZmlsbFRyYW5zYWN0aW9uRGVmYXVsdEluZm8iLCJ0cmFuc2FjdGlvbklkIiwidXBkYXRlZEF0Iiwic2VuZFRyYW5zYWN0aW9uIiwidmFsaWRhdGVkVHJhbnNhY3Rpb24iLCJzdG9wQnlFcnJvcnMiLCJzdG9wQnlXYXJuaW5ncyIsInNpZ25BbmRTZW5kU3Vic3RyYXRlVHJhbnNhY3Rpb24iLCJzaWduQW5kU2VuZEV2bVRyYW5zYWN0aW9uIiwib25TaWduZWQiLCJvblNlbmQiLCJvbkhhc1RyYW5zYWN0aW9uSGFzaCIsImhhbmRsZVBvc3RQcm9jZXNzaW5nIiwib25TdWNjZXNzIiwib25GYWlsZWQiLCJyZW1vdmVUcmFuc2FjdGlvbiIsInVwZGF0ZVRyYW5zYWN0aW9uIiwiZ2V0VHJhbnNhY3Rpb25MaW5rIiwidHJhbnNhY3Rpb25Ub0hpc3RvcmllcyIsImJhc2VOYXRpdmVBbW91bnQiLCJhZGRpdGlvbmFsSW5mbyIsIm9yaWdpbmFsQ2hhaW4iLCJ0b0FjY291bnQiLCJyZWNlaXZlckhpc3RvcnkiLCJuZXh0U3RhdHVzIiwiRVJST1IiLCJ1bnNpZ25lZFNlcmlhbGl6ZWQiLCJhY2NvdW50UGFpciIsImV2ZW50RGF0YSIsInR4SGFzaCIsIm9uQ29tcGxldGUiLCJvbkNoZWNrIiwic2lnbmVkVHJhbnNhY3Rpb24iLCJyZWNvdmVyIiwicmVjb3ZlclRyYW5zYWN0aW9uIiwiaGFuZGxlVHJhbnNhY3Rpb25UaW1lb3V0Iiwic2VuZFNpZ25lZFRyYW5zYWN0aW9uIiwic2lnbkFzeW5jIiwic2lnbmluZyIsImlzSW5CbG9jayIsImFzSW5CbG9jayIsImlzRmluYWxpemVkIiwiZm9ybWF0SnNvblJwY0Vycm9yIiwiZm9ybWF0SnNvblJwY1Jlc3VsdCIsImdldEVpcDE1NU1lc3NhZ2VBZGRyZXNzIiwiZ2V0V0NJZCIsInBhcnNlUmVxdWVzdFBhcmFtcyIsIkVJUDE1NV9TSUdOSU5HX01FVEhPRFMiLCJFaXAxNTVSZXF1ZXN0SGFuZGxlciIsImhhbmRsZVJlcXVlc3QiLCJyZXF1ZXN0RXZlbnQiLCJyZXF1ZXN0U2Vzc2lvbiIsImdldFNlc3Npb24iLCJwZWVyIiwic2Vzc2lvbkFjY291bnRzIiwiZWlwMTU1IiwiUEVSU09OQUxfU0lHTiIsIkVUSF9TSUdOIiwiRVRIX1NJR05fVFlQRURfREFUQSIsIkVUSF9TSUdOX1RZUEVEX0RBVEFfVjMiLCJFVEhfU0lHTl9UWVBFRF9EQVRBX1Y0IiwicmVzcG9uc2VSZXF1ZXN0IiwiRVRIX1NFTkRfVFJBTlNBQ1RJT04iLCJjcmVhdGVSZXF1ZXN0IiwiUE9MS0FET1RfU0lHTklOR19NRVRIT0RTIiwiUG9sa2Fkb3RSZXF1ZXN0SGFuZGxlciIsIlBPTEtBRE9UX1NJR05fTUVTU0FHRSIsInBhcmFtIiwiUE9MS0FET1RfU0lHTl9UUkFOU0FDVElPTiIsInRyYW5zYWN0aW9uUGF5bG9hZCIsIlNpZ25DbGllbnQiLCJnZXRJbnRlcm5hbEVycm9yIiwiQUxMX1dBTExFVF9DT05ORUNUX0VWRU5UIiwiREVGQVVMVF9XQUxMRVRfQ09OTkVDVF9PUFRJT05TIiwiV0FMTEVUX0NPTk5FQ1RfU1VQUE9SVEVEX01FVEhPRFMiLCJjb252ZXJ0Q29ubmVjdFJlcXVlc3QiLCJjb252ZXJ0Tm90U3VwcG9ydFJlcXVlc3QiLCJvcHRpb24iLCJzZXNzaW9uIiwiY2hhbmdlT3B0aW9uIiwibmV3T3B0aW9uIiwiYXBwcm92ZSIsInJlc3BvbmQiLCJwYWlyaW5nIiwiY29yZSIsImdldEtleXMiLCJkZWxldGVLZXlzIiwicmVtb3ZlSXRlbSIsInNlc3Npb25TdG9yYWdlIiwicGFpcmluZ1N0b3JhZ2UiLCJzdWJzY3JpcHRpb25TdG9yYWdlIiwicGFpcmluZ3MiLCJmb3JjZSIsInByb3Bvc2FsIiwiZmxhdCIsInJlcXVlc3ROYW1lc3BhY2UiLCJub3RTdXBwb3J0UmVxdWVzdCIsInJlbW92ZUFsbExpc3RlbmVycyIsIkVYVEVOU0lPTl9QUkVGSVgiLCJTdWJzY3JpYmFibGVTdG9yZSIsImlzVGVzdGluZyIsImxhc3RFcnJvciIsInJ1bnRpbWUiLCJnZXRQcmVmaXgiLCJTVUJXQUxMRVRfS0VZUklORyIsIktleXJpbmdTdG9yZSIsImFzeW5jR2V0IiwicmVtb3ZlQWxsIiwic2ltcGxlQWRkcmVzcyIsInF1aWNrRm9ybWF0QWRkcmVzc1RvQ29tcGFyZSIsIl9yYXdTaWduYXR1cmUiLCJfc2lnbmF0dXJlIiwic2VyaWFsaXplZCIsIkJ1ZmZlciIsImlzQnVmZmVyIiwiX2pzb25JbnRlcmZhY2VNZXRob2RUb1N0cmluZyIsImtlY2NhazI1NiIsIkFCSV9UWVBFUyIsImluc3RhbmNlT2ZBYmlJdGVtIiwib2JqZWN0IiwiY2hlY2tBcnJheUFiaUl0ZW1zIiwiZ2VuVHlwZSIsImNvbXBvbmVudHMiLCJ0dXBsZVN0ciIsImdldE1ldGhvZElkIiwiZ2V0TWV0aG9kTmFtZSIsImRlZXBSZW1vdmVVbndhbnRlZEFycmF5UHJvcGVydGllcyIsImRlZXBTdHJpcFR1cGxlQWRkcmVzc2VzIiwidHVwbGVUeXBlcyIsInRvSGV4U3RyaW5nIiwiYnl0ZUFycmF5IiwiYnl0ZSIsIklucHV0RGF0YURlY29kZXIiLCJwcm9wIiwiVHlwZUVycm9yIiwiZGVjb2RlQ29uc3RydWN0b3IiLCJ0cmltIiwib2JqIiwiaW5wdXRzIiwibmFtZXMiLCJfaW5wdXRzIiwiQWJpQ29kZXIiLCJkZWZhdWx0QWJpQ29kZXIiLCJkZWNvZGVEYXRhIiwiZGF0YUJ1ZiIsIm1ldGhvZElkIiwic3ViYXJyYXkiLCJpbnB1dHNCdWYiLCJpZmMiLCJJbnRlcmZhY2UiLCJkZWNvZGVGdW5jdGlvbkRhdGEiLCJGdW5jdGlvbkZyYWdtZW50IiwidHlwZXNUb1JldHVybiIsIl9yZXN1bHQiLCJfZ2V0RXZtQWJpRXhwbG9yZXIiLCJBQklzIiwiZ2VuTmFtZSIsImdlbklucHV0IiwicGFyc2VUeXBlIiwiX3R5cGVzIiwibGFzdEluZGV4T2YiLCJfbmV3Iiwic3RyIiwicGFyc2VSZXN1bHQiLCJnZXRDb2RlIiwicGFyc2VJbnB1dFdpdGhBYmkiLCJkZWNvZGVyIiwicmF3IiwidGVtcCIsImdldENoYWluSW5mb0J5Q2hhaW5JZCIsImV0aGVyZXVtQ2hhaW5JZCIsIlBPUlRfQ09OVEVOVCIsImNyeXB0b1dhaXRSZWFkeSIsIklETEVfVElNRSIsImlkbGVUaW1lciIsIndhaXRpbmdUb1N0b3AiLCJvcGVuQ291bnQiLCJzZXRCYWRnZUJhY2tncm91bmRDb2xvciIsImNvbG9yIiwiaGFuZGxlRXh0ZW5zaW9uSWRsaW5nIiwib25NZXNzYWdlIiwic2V0VW5pbnN0YWxsVVJMIiwib25TdGFydHVwIiwibG9hZEFsbCIsInBhc3N3b3JkX3N0b3JlIiwicmVzdG9yZUtleXJpbmdQYXNzd29yZCIsIm9uSW5zdGFsbGVkIl0sInNvdXJjZVJvb3QiOiIifQ==